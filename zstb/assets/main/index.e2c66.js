window.__require=function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AchievementItem:[function(t,e,o){"use strict";cc._RF.push(e,"502ec5yLPJN8Iv91DYFocve","AchievementItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/i18n/i18nMgr"),s=t("../../../Model/AchievementModel"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.desc1=null,e.desc2=null,e.rNum=null,e.pbNum=null,e.pb=null,e.btns=[],e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.updateDate=function(t){this._dataSource=t;var e=t.id,o=s.AchievementModel.inst.levels[e]||0,n=s.AchievementModel.inst.points[e]||0,i=t.count[o],r=t.rewardNum[o];o>=t.count.length?(this.btns.forEach(function(t,e){return t.node.active=0==e}),this.desc2.string="\u5168\u90e8\u8fbe\u6210",i=t.count[o-1],r=t.rewardNum[o-1]):n>=i?(this.btns.forEach(function(t,e){return t.node.active=1==e}),this.desc2.string="\u9886\u53d6"):(this.btns.forEach(function(t,e){return t.node.active=2==e}),this.desc2.string="\u9886\u53d6"),this.pb.progress=n/i,this.pbNum.string=n+" / "+i,this.rNum.string=""+r,this.desc1.string=a.i18nMgr.placeholder("Lv."+(o+1)+" "+t.desc,[""+i])},r([p(cc.Sprite)],e.prototype,"icon",void 0),r([p(cc.Label)],e.prototype,"desc1",void 0),r([p(cc.Label)],e.prototype,"desc2",void 0),r([p(cc.Label)],e.prototype,"rNum",void 0),r([p(cc.Label)],e.prototype,"pbNum",void 0),r([p(cc.ProgressBar)],e.prototype,"pb",void 0),r([p(cc.Button)],e.prototype,"btns",void 0),r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/AchievementModel":"AchievementModel"}],AchievementModel:[function(t,e,o){"use strict";cc._RF.push(e,"862b8w7hrJGKYZFo8e69WYS","AchievementModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.AchievementModel=void 0;var n=t("../Controller/TableMgr"),i=t("../Define/RedDotKey"),r=t("../Framework/Event/RedDot"),a=t("../Framework/Storage/LocalStorageMgr"),s=function(){function t(){this._info=[],this._levels=[],this._points=[],this._param=Object.create(null),this._info=n.TABLE.getTable("Achievement"),this._levels=JSON.parse(a.LocalStorageMgr.getItem("Achievement_levels")||"[]"),this._points=JSON.parse(a.LocalStorageMgr.getItem("Achievement_points")||"[]"),this._param=JSON.parse(a.LocalStorageMgr.getItem("Achievement_param")||"{}"),this.sort()}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"info",{get:function(){return this._info},set:function(t){this._info=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},set:function(t){this._levels=t,a.LocalStorageMgr.setItem("Achievement_levels",JSON.stringify(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"points",{get:function(){return this._points},set:function(t){this._points=t,a.LocalStorageMgr.setItem("Achievement_points",JSON.stringify(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"param",{get:function(){return this._param},set:function(t){this._param=t,a.LocalStorageMgr.setItem("Achievement_param",JSON.stringify(t))},enumerable:!1,configurable:!0}),t.prototype.addPoint=function(t,e){void 0===e&&(e=1);var o=this.points[t]||0;this.points[t]=o+e,this.points=this._points,this.sort()},t.prototype.updatePoint=function(t,e){switch(t){case 2:case 22:var o=this.param[t];null==o&&(o=[]),o.indexOf(e)<0&&(o.push(e),this.param[t]=o,this.param=this._param,this.points[t]=o.length,this.points=this._points);break;default:(this.points[t]||0<e)&&(this.points[t]=e,this.points=this._points)}this.sort()},t.prototype.checkGet=function(){var t=this,e=!!this._info.find(function(e){var o=t._points[e.id]||0,n=t._levels[e.id]||0;return o>=e.count[n]});return r.RedDot.inst.setRedDot(i.RedDotKey.Achievement,e?1:0),e},t.prototype.sort=function(){var t=this;this._info.sort(function(e,o){var n=t._points[e.id]||0,i=t._levels[e.id]||0,r=t._points[o.id]||0,a=t._levels[o.id]||0;return n>=e.count[i]&&r>=o.count[a]?e.sort-o.sort:n>=e.count[i]?-1:r>=o.count[a]?1:e.sort-o.sort})},t._inst=null,t}();o.AchievementModel=s,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/RedDotKey":"RedDotKey","../Framework/Event/RedDot":"RedDot","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr"}],Achievement:[function(t,e,o){"use strict";cc._RF.push(e,"08417RKY/RG8Z+54zzJAD6K","Achievement");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Audio/AudioMgr"),c=t("../../../Framework/Event/EventMgr"),l=t("../../../Framework/List/List"),p=t("../../../Framework/UIBase"),u=t("../../../Framework/VM"),d=t("../../../Model/AchievementModel"),h=t("../../../Model/UserModel"),f=t("./AchievementItem"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moneyTxt=null,e.rMoneyTxt=null,e.list=null,e}return i(e,t),e.prototype.onOpen=function(){s.AudioMgr.inst.playEffectByName("ui_open"),this.updateMoney(h.UserModel.inst.money),this.updateRMoney(h.UserModel.inst.rMoney),this.list.numItems=d.AchievementModel.inst.info.length},e.prototype.onEnable=function(){u.VM.bindPath("UserModel._money",this.updateMoney,this),u.VM.bindPath("UserModel._rMoney",this.updateRMoney,this)},e.prototype.onDisable=function(){u.VM.unbindPath("UserModel._money",this.updateMoney,this),u.VM.unbindPath("UserModel._rMoney",this.updateRMoney,this)},e.prototype.onListRender=function(t,e){var o=this,n=t.getComponent(f.default);n.updateDate(d.AchievementModel.inst.info[e]);var i=n.btns[1];i.node.targetOff(cc.Node.EventType.TOUCH_END),i.node.on(cc.Node.EventType.TOUCH_END,function(){s.AudioMgr.inst.playEffectByName("achievement");var t=d.AchievementModel.inst.info[e],i=t.id,r=d.AchievementModel.inst.levels[i]||0,l=t.rewardNum[r],p=n.icon.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(a.EventId.ON_UI_MAIN_FLY_ICON,p,"RMoney",null,{target:o.rMoneyTxt.node}),h.UserModel.inst.rMoney+=l,d.AchievementModel.inst.levels[i]=r+1,d.AchievementModel.inst.levels=d.AchievementModel.inst.levels,d.AchievementModel.inst.sort(),o.list.updateAll()})},e.prototype.updateMoney=function(t){this.moneyTxt.string=""+t},e.prototype.updateRMoney=function(t){this.rMoneyTxt.string=""+t},r([g(cc.Label)],e.prototype,"moneyTxt",void 0),r([g(cc.Label)],e.prototype,"rMoneyTxt",void 0),r([g(l.default)],e.prototype,"list",void 0),r([y],e)}(p.default);o.default=m,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/UIBase":"UIBase","../../../Framework/VM":"VM","../../../Model/AchievementModel":"AchievementModel","../../../Model/UserModel":"UserModel","./AchievementItem":"AchievementItem"}],AdMgr:[function(t,e,o){"use strict";cc._RF.push(e,"2284f7DjJJAlqQaY1Tco2wC","AdMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Define/Define"),a=t("../Define/EventId"),s=t("../Framework/Audio/AudioMgr"),c=t("../Framework/Event/EventMgr"),l=t("../Framework/Platform/BytedanceSDK"),p=t("../Framework/UI/UIFacade"),u=t("../Framework/Utils/Singleton"),d=t("../Model/AchievementModel"),h=t("./TimeMgr"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isPlaying=!1,e._isComplete=!1,e._eventComplete=null,e._eventCancel=null,e._eventClose=null,e._interstitial_time=0,e}return i(e,t),e.prototype.init=function(){this.loadAd(""),this._interstitial_time=h.default.inst.now()+18e4},Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),e.prototype._onAdComplete=function(){this._isComplete=!0},e.prototype._onAdCancel=function(){var t=this;this._eventClose(),cc.Canvas.instance.scheduleOnce(function(){return t._eventCancel()})},e.prototype._onAdClose=function(){var t=this;this._eventClose(),this._isComplete&&(this._isComplete=!1,cc.Canvas.instance.scheduleOnce(function(){return t._eventComplete()}),d.AchievementModel.inst.addPoint(20))},e.prototype.loadAd=function(t){cc.sys.platform!=cc.sys.WECHAT_GAME&&(cc.sys.platform==cc.sys.BYTEDANCE_GAME?l.default.inst.loadAd():cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdSDK","loadAd","(Ljava/lang/String;)V",t):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdSDK","loadAd:",t))},e.prototype.showAd=function(t,e,o){var n=this,i=function(){n._eventComplete=e,n._eventCancel=function(){},n._eventClose=function(){},n._onAdComplete(),n._onAdClose()};(function(){if(r.Config.debugAD)i();else{var a=!1;if(cc.sys.platform==cc.sys.WECHAT_GAME)i();else if(cc.sys.platform==cc.sys.BYTEDANCE_GAME)l.default.inst.showAd("",t);else if(cc.sys.os===cc.sys.OS_ANDROID)a=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdSDK","showAd","(Ljava/lang/String;Ljava/lang/String;)Z","",t);else{if(cc.sys.os!==cc.sys.OS_IOS)return void i();a=jsb.reflection.callStaticMethod("AdSDK","showAd:AdName:","",t)}if(!a)return p.UIFacade.showToast("\u5e7f\u544a\u8fd8\u6ca1\u51c6\u5907\u597d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),void s.AudioMgr.inst.playEffectByName("ui_not");cc.audioEngine.pauseAll(),n._isPlaying=!0,n._isComplete=!1,n._eventComplete=e,n._eventCancel=o,n._eventClose=function(){n._isPlaying=!1,cc.audioEngine.resumeAll()}}})(),this._interstitial_time=h.default.inst.now()-3e4},e.prototype.showAdBanner=function(t){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdBannerSDK","showAd","(Ljava/lang/String;Ljava/lang/String;)Z","",t):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdBannerSDK","showAd:AdName:","",t))},e.prototype.removeAdBanner=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdBannerSDK","removeAd","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdBannerSDK","removeAd"))},e.prototype.showAdInterstitial=function(t){var e=h.default.inst.now();e-this._interstitial_time<6e4||(this._interstitial_time=e,cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdInterstitialSDK","showAd","(Ljava/lang/String;Ljava/lang/String;)Z","",t):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdInterstitialSDK","showAd:AdName:","",t)))},e.prototype.removeAdInterstitial=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdInterstitialSDK","removeAd","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdInterstitialSDK","removeAd"))},e.prototype.showAdNative=function(t,e,o){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdNativeSDK","showAd","(Ljava/lang/String;Ljava/lang/String;II)Z","",t,e,o):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdNativeSDK","showAd:AdName:X:Y:","",t,e,o))},e.prototype.removeAdNative=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdNativeSDK","removeAd","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdNativeSDK","removeAd"))},e.prototype.pauseAdNative=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdNativeSDK","pauseAd","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdNativeSDK","pauseAd"))},e.prototype.resumeAdNative=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdNativeSDK","resumeAd","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdNativeSDK","resumeAd"))},e.prototype._onAdNativeComplete=function(){c.EVENT.emit(a.EventId.ON_AD_NATIVE_COMPLETE)},e}(u.Singleton());o.default=f,window.AD=f.inst,cc._RF.pop()},{"../Define/Define":"Define","../Define/EventId":"EventId","../Framework/Audio/AudioMgr":"AudioMgr","../Framework/Event/EventMgr":"EventMgr","../Framework/Platform/BytedanceSDK":"BytedanceSDK","../Framework/UI/UIFacade":"UIFacade","../Framework/Utils/Singleton":"Singleton","../Model/AchievementModel":"AchievementModel","./TimeMgr":"TimeMgr"}],AgeTips:[function(t,e,o){"use strict";cc._RF.push(e,"8b6056toeVJUYEBnNyai8/K","AgeTips");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onOpen=function(){},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],AudioMgr:[function(t,e,o){"use strict";cc._RF.push(e,"8755al2TJxGM74sdOuBFoCr","AudioMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.AudioMgr=void 0;var a=t("../Audio/RTAudioSource"),s=t("./RTAudioSourceMgr"),c=t("../Res/ResKeeper"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bgmAudio=null,e._effectClips=new Map,e._onceEffect=new Map,e._loopEffect=new Map,e}var o;return i(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return o._inst?o._inst:(cc.error("AudioMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._inst=this},e.prototype.playBgm=function(t,e){var o=this;void 0===t&&(t="bgm"),void 0===e&&(e=0),this._bgmAudio&&this._bgmAudio.node.destroy(),this._bgmAudio=null,this.loadBundleRes("Audio",t,function(n,i){var r=i;if(null!=r){var s=o._bgmAudio;null==s&&((s=(new cc.Node).addComponent(a.default)).audioType=a.RTAudioSourceType.Music,s.node.name=r.name,s.node.setParent(o.node),o._bgmAudio=s),s.isPlaying||(s.playOnLoad=!0,s.loop=!0,s.clip=r,s.setCurrentTime(e),s.play())}else cc.warn("audio: '"+t+"' not found")})},e.prototype.gameShow=function(){var t=this;if(this.setEffectVolume(1),this.setMusicVolume(1),this._bgmAudio){var e=this._bgmAudio.getCurrentTime();this._bgmAudio.stop(),this.scheduleOnce(function(){t._bgmAudio.setCurrentTime(e),t._bgmAudio.play()},.3)}},e.prototype.gameHide=function(){this.setEffectVolume(0),this.setMusicVolume(0)},e.prototype.playEffect=function(t,e){void 0===e&&(e=0),s.default.inst.isEffectMute()||this.scheduleOnce(function(){cc.audioEngine.playEffect(t,!1)},e)},e.prototype.playEffectByName=function(t,e,o){void 0===e&&(e=0),void 0===o&&(o=0);var n=this._effectClips.get(t);n&&this.playEffect(n,o)},e.prototype.playLoopEffect=function(t){var e=this._loopEffect.get(t);null==e&&((e=(new cc.Node).addComponent(a.default)).audioType=a.RTAudioSourceType.Effect,e.node.name=t.name,e.node.setParent(this.node),e.playOnLoad=!0,e.clip=t,this._loopEffect.set(t,e)),e.isPlaying||(e.loop=!0,e.play())},e.prototype.playLoopEffectByName=function(t){var e=this._effectClips.get(t);e&&this.playLoopEffect(e)},e.prototype.stopLoopEffect=function(t){var e=this._loopEffect.get(t);e&&e.stop()},e.prototype.stopLoopEffectByName=function(t){var e=this._effectClips.get(t);e&&this.stopLoopEffect(e)},e.prototype.getLoopEffectSourceByName=function(t){var e=this._effectClips.get(t);return this._loopEffect.get(e)},e.prototype.getClipByName=function(t){return this._effectClips.get(t)},e.prototype.stopEffectAll=function(){this._loopEffect.forEach(function(t){return t.stop()})},e.prototype.initClip=function(){var t=this;s.default.inst.init(),cc.assetManager.getBundle("Audio").loadDir("/",cc.AudioClip,function(e,o){for(var n=0;n<o.length;n++){var i=o[n];t._effectClips.set(i.name,i)}})},e.prototype.setMusicVolume=function(t,e){void 0===e&&(e=!1),s.default.inst.setMusicVolume(t,e)},e.prototype.setEffectVolume=function(t,e){void 0===e&&(e=!1),s.default.inst.setEffectVolume(t,e)},e.prototype.muteAllMusic=function(t,e){void 0===e&&(e=!1),s.default.inst.muteAllMusic(t,e)},e.prototype.muteAllEffect=function(t,e){void 0===e&&(e=!1),s.default.inst.muteAllEffect(t,e)},o=r([p],e)}(c.default));o.AudioMgr=u,cc._RF.pop()},{"../Audio/RTAudioSource":"RTAudioSource","../Res/ResKeeper":"ResKeeper","./RTAudioSourceMgr":"RTAudioSourceMgr"}],Bootstrap:[function(t,e,o){"use strict";cc._RF.push(e,"1b9089GT51Gsaycn08Qai4h","Bootstrap");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Module/ModuleMgr"),l=t("../../Controller/AdMgr"),p=t("../../Controller/NativeMgr"),u=t("../../Controller/TableMgr"),d=t("../../Controller/TimeMgr"),h=t("../../Define/SceneDef"),f=t("../../Define/UIDefs"),_=t("../../Framework/Audio/AudioMgr"),y=t("../../Framework/Event/RedDot"),g=t("../../Framework/i18n/i18nMgr"),m=t("../../Framework/Scene/SceneBase"),v=t("../../Framework/Scene/SceneMgr"),M=t("../../Framework/UI/UIMgr"),b=t("../../Define/Define"),E=cc._decorator,O=E.ccclass,I=E.property,S=!1;cc.macro.ENABLE_MULTI_TOUCH=!1;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.logo=null,e.uiRoot=null,e.audioRoot=null,e.loadPrefabs=[],e._logoEnd=!1,e._initEnd=!1,e}return i(e,t),e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return s(this,function(){return p.default.inst.gameInit(),[2]})})},e.prototype.start=function(){return a(this,void 0,void 0,function(){var t,e,o;return s(this,function(n){switch(n.label){case 0:return(t=cc.find("PROFILER-NODE/LEFT-PANEL"))&&(t.addComponent(cc.LabelOutline).color=cc.color(0,0,0),t.getComponent(cc.Label).cacheMode=cc.Label.CacheMode.NONE),(e=cc.find("PROFILER-NODE/RIGHT-PANEL"))&&(e.addComponent(cc.LabelOutline).color=cc.color(0,0,0),e.getComponent(cc.Label).cacheMode=cc.Label.CacheMode.NONE),cc.sys.isNative&&(o=cc.find("PROFILER-NODE"))&&(o.scale*=2),g.i18nMgr.setLanguage("zh"),y.RedDot.inst.init(),c.ModuleMgr.inst.init(),S?(this._logoEnd=!0,this._initEnd=!0,this.showLogo(),[2]):(S=!0,[4,this.initFramework()]);case 1:return n.sent(),[2]}})})},e.prototype.showLogo=function(){var t=this;cc.tween(this.logo).delay(1).to(1,{opacity:0}).call(function(){M.default.inst.delayUIWaitAnim(60),M.default.inst.open(f.UIType.Loading),t._logoEnd=!0,t.initEnd()}).start()},e.prototype.initFramework=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.rootLoading()];case 1:return t.sent(),[4,this.resoucreLoading()];case 2:return t.sent(),[4,u.TABLE.loadTableRes()];case 3:return t.sent(),this.initGame(),this._initEnd=!0,this.initEnd(),[2]}})})},e.prototype.initGame=function(){return a(this,void 0,void 0,function(){return s(this,function(){return _.AudioMgr.inst.initClip(),M.default.inst.createCache(),[2]})})},e.prototype.initEnd=function(){return a(this,void 0,void 0,function(){return s(this,function(){return this._logoEnd&&this._initEnd?(this.onToGame(),[2]):[2]})})},e.prototype.onToGame=function(){cc.game.targetOff(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,function(){l.default.inst.isPlaying||(_.AudioMgr.inst.gameShow(),cc.game.resume())}),cc.game.targetOff(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,function(){l.default.inst.isPlaying||(_.AudioMgr.inst.gameHide(),cc.game.pause())}),p.default.inst.gameStart(),d.default.inst.init(function(t){t?(cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){M.default.inst.delayUIWaitAnim(1),M.default.inst.open(f.UIType.GameStart),M.default.inst.open(f.UIType.UIMain),M.default.inst.close(f.UIType.Loading),_.AudioMgr.inst.playBgm("bgMenu"),l.default.inst.init()}),v.SceneMgr.inst.loadScene(h.SceneType.Main)):p.default.inst.networkErr()})},e.prototype.rootLoading=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){cc.assetManager.loadBundle("Prefabs",function(o){if(!o){var n=cc.instantiate(t.uiRoot);cc.director.getScene().addChild(n),cc.game.addPersistRootNode(n);var i=cc.instantiate(t.audioRoot);cc.director.getScene().addChild(i),cc.game.addPersistRootNode(i),t.showLogo(),e()}})})]})})},e.prototype.resoucreLoading=function(){return a(this,void 0,void 0,function(){return s(this,function(){return[2,new Promise(function(t){for(var e=0,o=0,n=b.BundleNames;o<n.length;o++){var i=n[o];cc.assetManager.loadBundle(i,function(o){o?console.log(o):++e==b.BundleNames.length&&t()})}})]})})},e.prototype.onClickAgeTip=function(){M.default.inst.open(f.UIType.AgeTips)},e.prototype.onClickUserFeedback=function(){p.default.inst.openUserFeedback()},r([I(cc.Node)],e.prototype,"logo",void 0),r([I(cc.Prefab)],e.prototype,"uiRoot",void 0),r([I(cc.Prefab)],e.prototype,"audioRoot",void 0),r([I({type:cc.Prefab,tooltip:"\u6253\u5305\u65f6\u5f15\u5165\u5230\u521d\u59cb\u573a\u666f"})],e.prototype,"loadPrefabs",void 0),r([O],e)}(m.default);o.default=w,cc._RF.pop()},{"../../Controller/AdMgr":"AdMgr","../../Controller/NativeMgr":"NativeMgr","../../Controller/TableMgr":"TableMgr","../../Controller/TimeMgr":"TimeMgr","../../Define/Define":"Define","../../Define/SceneDef":"SceneDef","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/RedDot":"RedDot","../../Framework/Scene/SceneBase":"SceneBase","../../Framework/Scene/SceneMgr":"SceneMgr","../../Framework/UI/UIMgr":"UIMgr","../../Framework/i18n/i18nMgr":"i18nMgr","../../Module/ModuleMgr":"ModuleMgr"}],BulletBase:[function(t,e,o){"use strict";cc._RF.push(e,"e5f27C6qWJBs5BTJoTzt8V9","BulletBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletBase=void 0;var a=t("../../../Model/GameModel"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._dmgRandRange=new cc.Vec2(-.15,.15),e._game=a.GameModel.inst,e._arg=null,e._target=null,e._type=-1,e._attrs=null,e._weapon=null,e._callback=null,e._damage=0,e._crit=0,e._critDamage=0,e}return i(e,t),e.prototype.reuse=function(){},e.prototype.unuse=function(){},e.prototype.fire=function(t,e){this._arg=t,this._target=t.target,this._type=t.type,this._attrs=t.attrs,this._weapon=t.weapon,this._callback=e,this._damage=this._weapon.getDamage(this._type)*this._game.player.atk,this._crit=this._weapon.getCrit(),this._critDamage=this._weapon.getCritDamage()},e.prototype.getDamage=function(){var t=cc.math.randomRange(this._dmgRandRange.x,this._dmgRandRange.y),e=this._damage*(1+t),o=Math.random()<this._crit;return o&&(e*=this._critDamage),{damage:e=Math.round(e),crit:o}},r([c],e)}(cc.Component));o.BulletBase=l,cc._RF.pop()},{"../../../Model/GameModel":"GameModel"}],BulletDrawBase:[function(t,e,o){"use strict";cc._RF.push(e,"c13fbhiklFKUaQgRNadZLiT","BulletDrawBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletDrawBase=void 0;var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphics=null,e._width=20,e._color=cc.color(0,0,0),e._tempDrawPointsAll=null,e._tempDrawColorsAll=null,e}return i(e,t),e.prototype.setDraw=function(t,e){this._tempDrawPointsAll!=t&&this._tempDrawColorsAll!=e&&(this._tempDrawPointsAll=t,this._tempDrawColorsAll=e,this.draw())},e.prototype.draw=function(){if(null!=this.graphics){var t=this.graphics,e=this._tempDrawPointsAll.concat();for(var o in e){var n=e[o],i=this._tempDrawColorsAll[o];this._color=cc.color(i.x,i.y,i.z);for(var r=[],a=0,s=n;a<s.length;a++){var c=s[a];r.push({x:c.x,y:c.y});var l=r.length;if(l<=1)t.circle(c.x,c.y,this._width/2),t.fill();else{var p=r[l-2],u=r[l-1];t.moveTo(p.x,p.y),t.lineTo(u.x,u.y),t.lineWidth=this._width,t.lineCap=cc.Graphics.LineCap.ROUND,t.lineJoin=cc.Graphics.LineJoin.ROUND,t.strokeColor=this._color,t.stroke()}}}}},r([l(cc.Graphics)],e.prototype,"graphics",void 0),r([c],e)}(a.BulletBase);o.BulletDrawBase=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],BytedanceSDK:[function(t,e,o){"use strict";cc._RF.push(e,"e89a4sbLcZMeoGqH4ApMOIe","BytedanceSDK");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../Controller/AdMgr"),a=t("../../Controller/TimeMgr"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._adUnitId="hqi4870rap91c2a213",e._rewarededVideoAd=null,e._loading=!1,e._interval=0,e._name="",e}return i(e,t),e.prototype.gameInit=function(){tt.login({force:!0,success:function(t){console.log("login \u8c03\u7528\u6210\u529f"+t.code+" "+t.anonymousCode)},fail:function(){console.log("login \u8c03\u7528\u5931\u8d25")}})},e.prototype.gameStart=function(){},e.prototype.loadAd=function(){var t=this;if(null==this._rewarededVideoAd&&!this._loading){var e=a.default.inst.now();if(!(e-this._interval<1e3)){this._interval=e,this._loading=!0,this.logEvent("ohayoo_game_request",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:this._adUnitId});var o=tt.createRewardedVideoAd({adUnitId:this._adUnitId});o.onLoad(function(){t._loading=!0,t._rewarededVideoAd=o,t.logEvent("ohayoo_game_send",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:t._adUnitId,ad_code:"2000"})}),o.onError(function(e){t._loading=!1,t._rewarededVideoAd=null,r.default.inst._onAdClose(),e.errCode,t.logEvent("ohayoo_game_send",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:t._adUnitId,ad_code:e.errCode})}),o.onClose(function(e){t._rewarededVideoAd=null,e.isEnded&&r.default.inst._onAdComplete(),r.default.inst._onAdClose(),t.loadAd(),t.logEvent("ohayoo_game_show_end",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:t._adUnitId,ad_position:t._name,result:"\u6210\u529f"})}),o.load()}}},e.prototype.showAd=function(t,e){return!this._loading&&(null==this._rewarededVideoAd?(this.loadAd(),!1):(this._name=e,this.logEvent("ohayoo_game_button_click",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:this._adUnitId,ad_position:this._name}),this._rewarededVideoAd.show(),!0))},e.prototype.logEvent=function(t,e){tt.reportAnalytics(t,e)},e.prototype.now=function(){return tt.getPerformance().now()},e}(t("../Utils/Singleton").Singleton());o.default=s,cc._RF.pop()},{"../../Controller/AdMgr":"AdMgr","../../Controller/TimeMgr":"TimeMgr","../Utils/Singleton":"Singleton"}],ComBulletBanyue:[function(t,e,o){"use strict";cc._RF.push(e,"ce3cd/yAPZAP4ryFuTo9aiL","ComBulletBanyue");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radian=0,e._moveSpeed=0,e._upSpeed=0,e._lifeStamp=0,e._lifeTime=0,e._repelSpeed=0,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed)},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=this._target;this.node.setPosition(n.x,n.y+40),this.node.scale=this._weapon.getAoeRange(),this._radian=e.radian,this._moveSpeed=this._weapon.getMoveSpeed(),this._upSpeed=this._attrs.upSpeed,this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._repelSpeed=this._attrs.repelSpeed,this.node.angle=cc.misc.radiansToDegrees(this._radian),this._weapon.getSenior()&&(this._lifeTime*=2)},e.prototype.update=function(t){if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.getPosition()});else{var e=cc.math.lerp(this._moveSpeed,this._upSpeed,this._lifeStamp/this._lifeTime)*t,o=this._radian,n=Math.cos(o)*e,i=Math.sin(o)*e;this.node.x+=n,this.node.y+=i}},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletBishou:[function(t,e,o){"use strict";cc._RF.push(e,"fed86Nit+1LD6gtYefjh2uB","ComBulletBishou");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Model/GameModel"),s=t("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.motionStreak=null,e._rBody=null,e._collider=null,e._delayTime=0,e._offsetAngle=0,e._offsetSpeed=0,e._velocity=cc.v2(),e._direct=cc.v2(),e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.x,this.node.y),this.motionStreak.node.setSiblingIndex(0)},e.prototype.onDisable=function(){this.motionStreak.node.removeFromParent()},e.prototype.onDestroy=function(){this.motionStreak.node.destroy()},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){if(t.prototype.fire.call(this,e,o),0==this.node.x&&0==this.node.y){var n=this._game.player.node;this.node.setPosition(n.x,n.y)}this.node.angle=0,this.node.scale=this._attrs.aoeRange,this._velocity=cc.v2(1,0).rotateSelf(cc.math.randomRangeInt(0,360)),this._velocity.multiplyScalar(this._attrs.moveSpeed*(1+this._offsetSpeed)),this._offsetAngle=.5*Math.PI*(Math.random()>.5?1:-1)},e.prototype.update=function(t){if(!this._game.isPause)if(this.node.x+=this._velocity.x*t,this.node.y+=this._velocity.y*t,this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y,this.icon.node.angle-=1/this._attrs.angularSpeed*360*t,this._delayTime>0)this._delayTime-=t;else{0!=this._offsetAngle&&(this._offsetAngle-=.5*this._offsetAngle*t),0!=this._offsetSpeed&&(this._offsetSpeed-=.5*this._offsetSpeed*t),null!=this._target&&null!=this._target.parent||(this._target=a.GameModel.inst.findRandMonster(),this._offsetAngle=.5*Math.PI*(Math.random()>.5?1:-1),this._offsetSpeed=-.5,this._delayTime=1);var e,o=this.node;if(e=null!=this._target?this._target:this._game.player.node,cc.Vec2.subtract(this._direct,e,o),this._direct.len()<=50)this._delayTime=1,this._target=null;else{var n=Math.atan2(this._direct.y,this._direct.x)+this._offsetAngle,i=this._attrs.moveSpeed*(1+this._offsetSpeed);this.node.angle=cc.math.toDegree(n),this._velocity.x=Math.cos(n)*i,this._velocity.y=Math.sin(n)*i}}},r([p(cc.Sprite)],e.prototype,"icon",void 0),r([p(cc.MotionStreak)],e.prototype,"motionStreak",void 0),r([l],e)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Model/GameModel":"GameModel","./BulletBase":"BulletBase"}],ComBulletChongfeng:[function(t,e,o){"use strict";cc._RF.push(e,"322c6zEXtJNhIHXHI8IBGTd","ComBulletChongfeng");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._monster=null,e._rBody=null,e._collider=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this._monster.node.pauseAllActions()},e.prototype.resume=function(){this._monster.node.resumeAllActions()},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o),this._monster=e.monster,this._collider.tag=this._monster.atk*this._attrs.damage;var i=this._monster.spine.setAnimation(0,"attack2",!1);this._monster.spine.setTrackCompleteListener(i,function(){n._monster.spine.setAnimation(0,"run",!0)}),this.node.setParent(this._monster.node),this.node.setPosition(cc.Vec2.ZERO);for(var r=e.radian,a=this._attrs.duration,s=this._attrs.moveSpeed,c=Math.cos(r)*s*a,l=Math.sin(r)*s*a,p=this._monster.node.getPosition(),u=p.clone().addSelf(cc.v2(c,l)),d=this._attrs.delay,h=this._attrs.hitCount,f=this._monster.node.scaleX,_=cc.tween(this._monster.node),y=0;y<h;y++)_.to(d,{scaleX:y%2==0?f:-f}),_.to(a,{x:y%2==0?u.x:p.x,y:y%2==0?u.y:p.y});_.call(function(){n._monster.spine.setAnimation(0,"run",!0),n._monster.node.emit("resumeMove"),o()}),_.start()},e.prototype.update=function(){if(this._monster.hp<0)return cc.Tween.stopAllByTarget(this._monster.node),void this._callback();this.node.setPosition(cc.Vec2.ZERO)},r([p],e)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletChushouZ2:[function(t,e,o){"use strict";cc._RF.push(e,"96e3aCj69NMg593/KUrPOM4","ComBulletChushouZ2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hitMonsterList=[],e._doubleScale=!1,e}return i(e,t),e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.node.pauseAllActions()},e.prototype.resume=function(){this.node.resumeAllActions()},e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node)},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o);var i=e.pos,r=e.doubleScale;this.node.setPosition(i.x,i.y),this.node.scale=this._attrs.aoeRange,r&&(this.node.scale*=2),this._doubleScale=r,this._hitMonsterList.length=0;var a=e.direct;this.node.angle=45+45*-a,this.node.opacity=255;var s=this._attrs.duration;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).delay(.1).call(function(){n._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:n.getDamage()})})}).delay(1*s/4).to(2*s/4,{opacity:0},{easing:"smooth"}).call(function(){n._callback()}).start()},r([p],e)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletChushouZ:[function(t,e,o){"use strict";cc._RF.push(e,"5b1becys6FPUI92lNyG2fHn","ComBulletChushouZ");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Audio/AudioMgr"),c=t("../../../Framework/Event/EventMgr"),l=t("./BulletBase"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._rBody=null,e._collider=null,e._hitMonsterList=[],e._hitCallback=null,e._doubleScale=!1,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onEnable=function(){c.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){c.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.node.pauseAllActions(),this.spine.timeScale=0},e.prototype.resume=function(){this.node.resumeAllActions(),this.spine.timeScale=1},e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node)},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.fire=function(e,o){var n=this;s.AudioMgr.inst.playEffectByName("chushouOut"),t.prototype.fire.call(this,e,o);var i=e.pos,r=e.doubleScale;this.node.setPosition(i.x,i.y),this.node.scale=this._attrs.aoeRange,r&&(this.node.scale*=2),this._doubleScale=r,this._collider.enabled=!0,this._hitMonsterList.length=0,this._hitCallback=e.hitCallback;var a=cc.math.randomRangeInt(0,8);this.spine.setAnimation(0,"idle",!1),cc.tween(this.node).delay(.2).call(function(){n._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:n.getDamage()})}),n._collider.enabled=!1}).delay(.33).call(function(){var t;switch(a){case 0:t="attack1",n.spine.node.scaleX=1;break;case 1:t="attack2",n.spine.node.scaleX=1;break;case 2:t="attack3",n.spine.node.scaleX=1;break;case 3:t="attack4",n.spine.node.scaleX=1;break;case 4:t="attack3",n.spine.node.scaleX=-1;break;case 5:t="attack2",n.spine.node.scaleX=-1;break;case 6:t="attack1",n.spine.node.scaleX=-1;break;case 7:t="attack5",n.spine.node.scaleX=1}s.AudioMgr.inst.playEffectByName("chushouHit"),n.spine.setAnimation(0,t,!1),cc.tween(n.node).delay(.8).call(function(){n._hitCallback({pos:n.node.getPosition(),direct:a,doubleScale:n._doubleScale})}).delay(2.2).call(function(){n._callback()}).start()}).start()},r([d(sp.Skeleton)],e.prototype,"spine",void 0),r([u],e)}(l.BulletBase);o.default=h,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletChushou:[function(t,e,o){"use strict";cc._RF.push(e,"9e581NyZl5D87R7FDth6KrF","ComBulletChushou");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeStamp=0,e._lifeTime=0,e._doubleScale=!1,e}return i(e,t),e.prototype.onBeginContact=function(){this._lifeStamp=this._lifeTime},e.prototype.fire=function(e,o){var n;if(t.prototype.fire.call(this,e,o),null!=this._target&&null!=this._target.parent){var i=this._game.player.node,r=this._target;n=cc.Vec2.subtract(cc.v2(),r,i)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));var a=e.doubleScale,s=Math.atan2(n.y,n.x),c=this._game.player.node;this.node.setPosition(c.x,c.y),this.node.scale=this._attrs.aoeRange,this.node.angle=cc.math.toDegree(s),a&&(this.node.scale*=2),this._doubleScale=a,this._lifeStamp=0,this._lifeTime=this._attrs.duration+.1},e.prototype.update=function(t){if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>this._lifeTime){var e=this.node.getPosition();this._callback({pos:e,doubleScale:this._doubleScale})}else{var o=this._attrs.moveSpeed,n=this.node.angle,i=o*t,r=cc.math.toRadian(n),a=Math.cos(r)*i,s=Math.sin(r)*i;this.node.x+=a,this.node.y+=s}},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletCommonPetLeiyun:[function(t,e,o){"use strict";cc._RF.push(e,"86300b6ao1O44PvpNVmrCIF","ComBulletCommonPetLeiyun");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rBody=null,e._collider=null,e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._hitMonsterList=[],e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider)},e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o),e.direct.x<0?(this.node.scaleX=-1*Math.abs(this.node.scaleX),this._collider.offset.x=-1*Math.abs(this._collider.offset.x),this._collider.apply()):(this.node.scaleX=Math.abs(this.node.scaleX),this._collider.offset.x=Math.abs(this._collider.offset.x),this._collider.apply()),this.node.setPosition(0,0),this._damage=e.damage,this._lifeStamp=0,this._lifeTime=e.lifeTime,this._effectStamp=0,this._effectInterval=e.effectInterval,this._hitMonsterList.length=0},e.prototype.update=function(t){var e=this;this._game.isPause||(this._lifeStamp+=t,this._lifeStamp>this._lifeTime?this._callback():(this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:e.getDamage()})}))))},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletCommonPet:[function(t,e,o){"use strict";cc._RF.push(e,"720823VxAZOAo3TdVoRyY9t","ComBulletCommonPet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Model/GameModel"),s=t("../../../Model/GodPetModel"),c=t("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rBody=null,e._collider=null,e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._hitMonsterList=[],e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider)},e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o),e.direct.x<0?(this.node.scaleX=-1*Math.abs(this.node.scaleX),this._collider.offset.x=-1*Math.abs(this._collider.offset.x),this._collider.apply()):(this.node.scaleX=Math.abs(this.node.scaleX),this._collider.offset.x=Math.abs(this._collider.offset.x),this._collider.apply()),this.node.setPosition(0,0),this._damage=e.damage,this._lifeStamp=0,this._lifeTime=e.lifeTime,this._effectStamp=0,this._effectInterval=e.effectInterval,this._hitMonsterList.length=0},e.prototype.update=function(t){var e=this;this._game.isPause||(this._lifeStamp+=t,this._lifeStamp>this._lifeTime?this._callback():(this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:e.getDamage()})}))))},e.prototype.getDamage=function(){var t=a.GameModel.inst.player,e=s.GodPetModel.inst.cur,o=cc.math.randomRange(this._dmgRandRange.x,this._dmgRandRange.y),n=this._damage*t.atk*(1+o),i=Math.random()<e.crit;return i&&(n*=e.critDamage),{damage:n=Math.round(n),crit:i}},r([p],e)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Model/GameModel":"GameModel","../../../Model/GodPetModel":"GodPetModel","./BulletBase":"BulletBase"}],ComBulletCommon:[function(t,e,o){"use strict";cc._RF.push(e,"5b8390HTLRP6r5CurJP0Rp8","ComBulletCommon");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/TableMgr"),s=t("../../../Define/EventId"),c=t("../../../Framework/Audio/AudioMgr"),l=t("../../../Framework/Event/EventMgr"),p=t("../../../Model/WeaponModel"),u=t("./BulletBase"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._rBody=null,e._collider=null,e._repelSpeed=0,e._moveSpeed=0,e._velocity=cc.v2(),e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider),this._repelSpeed=Number(a.TABLE.getGlobal("Attack_repelSpeed")),this._moveSpeed=Number(a.TABLE.getGlobal("Attack_moveSpeed"))},e.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_PAUSE,this.pause,this),l.EVENT.on(s.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_PAUSE,this.pause,this),l.EVENT.off(s.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.spine.timeScale=0},e.prototype.resume=function(){this.spine.timeScale=1},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed)},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o),c.AudioMgr.inst.playEffectByName("atk1");var i=p.WeaponModel.inst.magicAttrs.a_attack_aoerange_p;this.node.scale=i>0?1+i:1;var r=e.direct;r.x<0?this.node.scaleX=-1*Math.abs(this.node.scaleX):this.node.scaleX=Math.abs(this.node.scaleX),this._velocity.x=r.x*this._moveSpeed,this.node.setPosition(this._target.x,this._target.y);var a=this.spine.setAnimation(0,"attack",!1);this.spine.setTrackEventListener(a,function(){n._collider.enabled=!0}),this.spine.setTrackCompleteListener(a,function(){n._callback()}),this._collider.enabled=!1},e.prototype.update=function(t){this._game.isPause||(this.node.x+=this._velocity.x*t)},r([f(sp.Skeleton)],e.prototype,"spine",void 0),r([h],e)}(u.BulletBase);o.default=_,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletDasuan:[function(t,e,o){"use strict";cc._RF.push(e,"e20c6/zsFdKJLoV+oxkFG+p","ComBulletDasuan");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._effectStamp=0,e._effectInterval=0,e._hitMonsterList=[],e._offset=cc.v2(),e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node)},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.fire=function(e,o){if(t.prototype.fire.call(this,e,o),!this._weapon.getSenior()){var n=this._game.player.node.children[this._game.player.node.childrenCount-1];this._offset.y=n.y}var i=this._game.player.node;this.node.setPosition(i.x,i.y+this._offset.y),this.node.scale=this._weapon.getAoeRange(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},e.prototype.update=function(t){var e=this;if(!this._game.isPause){var o=this._game.player.node;this.node.setPosition(o.x,o.y+this._offset.y),this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:e.getDamage()})}))}},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletDianWang:[function(t,e,o){"use strict";cc._RF.push(e,"d4b66b2e+1Bc4Le4fZ7JUQO","ComBulletDianWang");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._hitMonsterList=[],e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node)},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.fire=function(e,o){e.type=0,e.attrs=e.weapon.weaponAttrs[e.type],t.prototype.fire.call(this,e,o),this.node.setPosition(this._target.x,this._target.y),this.node.scale=this._weapon.getAoeRange(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},e.prototype.update=function(t){var e=this;this._game.isPause||(this._lifeStamp+=t,this._lifeStamp>this._lifeTime?this._callback():(this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:e.getDamage()})}))))},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletDici:[function(t,e,o){"use strict";cc._RF.push(e,"93d0d5Gox1I1550f8YbLtAP","ComBulletDici");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ani=null,e._rBody=null,e._collider=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.node.pauseAllActions(),this.ani.pause()},e.prototype.resume=function(){this.node.resumeAllActions(),this.ani.play()},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o);var i=e.monster;this._collider.tag=i.atk*this._attrs.damage;var r=e.pos,a=e.scale;this.node.setPosition(r),this.node.scale=this._attrs.aoeRange*a,this.ani.play(),this.ani.once(cc.Animation.EventType.FINISHED,function(){o()}),this._rBody.active=!1,cc.tween(this.node).delay(.3).call(function(){n._rBody.active=!0}).delay(.1).call(function(){n._rBody.active=!1}).start()},r([u(cc.Animation)],e.prototype,"ani",void 0),r([p],e)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletDraw1Z:[function(t,e,o){"use strict";cc._RF.push(e,"905cdLMLXhG9ajr+NtVlQcR","ComBulletDraw1Z");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeStamp=0,e._lifeTime=0,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=e.pos;this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(),this._damage=this._weapon.getDamage(this._type)*this._game.player.atk,this._lifeStamp=0,this._lifeTime=.5},e.prototype.update=function(t){this._game.isPause||(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime&&this._callback())},r([c],e)}(a.BulletDrawBase));o.default=l,cc._RF.pop()},{"./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw1:[function(t,e,o){"use strict";cc._RF.push(e,"1d891v2fwxEv5SkF5A1+LCR","ComBulletDraw1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Utils/VectorUtil"),s=t("./BulletDrawBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radian=0,e._lifeStamp=0,e._lifeTime=0,e._moveSpeed=0,e}return i(e,t),e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=this._game.player.node.getPosition(),i=this._target.getPosition(),r=n.sub(n.sub(i).multiplyScalar(.9));this.node.setPosition(r),this.node.scale=this._weapon.getAoeRange(),this._radian=cc.math.toRadian(-90),this._lifeStamp=0,this._lifeTime=this._attrs.duration,this._moveSpeed=this._attrs.moveSpeed;var s=cc.Vec2.ZERO,c=a.VectorUtil.getSubRay(s,this._radian,this._moveSpeed*this._lifeTime);this.graphics.node.setPosition(c.x,c.y),this.graphics.node.angle=0},e.prototype.update=function(t){if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.getPosition()});else{var e=this._moveSpeed*t,o=this._radian,n=Math.cos(o)*e,i=Math.sin(o)*e;this.graphics.node.x+=n,this.graphics.node.y+=i}},r([l],e)}(s.BulletDrawBase));o.default=p,cc._RF.pop()},{"../../../Framework/Utils/VectorUtil":"VectorUtil","./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw2:[function(t,e,o){"use strict";cc._RF.push(e,"9c0b75XZ8lCK4tSebZn/HOd","ComBulletDraw2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radian=0,e._moveSpeed=0,e._lifeStamp=0,e._lifeTime=0,e._repelSpeed=0,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed)},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=this._target;this.node.setPosition(n.x,n.y+40),this.node.scale=this._weapon.getAoeRange(),this._radian=e.radian,this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._attrs.duration,this._repelSpeed=this._attrs.repelSpeed,this.node.angle=cc.misc.radiansToDegrees(this._radian)},e.prototype.update=function(t){if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.getPosition()});else{var e=this._moveSpeed*t,o=this._radian,n=Math.cos(o)*e,i=Math.sin(o)*e;this.node.x+=n,this.node.y+=i}},r([c],e)}(a.BulletDrawBase));o.default=l,cc._RF.pop()},{"./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw3Z:[function(t,e,o){"use strict";cc._RF.push(e,"801bbrZcdpN3amLYRQQM5lA","ComBulletDraw3Z");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("./BulletDrawBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e}return i(e,t),e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.spine.timeScale=0},e.prototype.resume=function(){this.spine.timeScale=1},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o);var i=e.pos;this.node.setPosition(i),this.node.scale=this._weapon.getAoeRange();var r=this.spine.setAnimation(0,this.spine.animation,!1);this.spine.setTrackCompleteListener(r,function(){n._callback()})},r([u(sp.Skeleton)],e.prototype,"spine",void 0),r([p],e)}(c.BulletDrawBase);o.default=d,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw3:[function(t,e,o){"use strict";cc._RF.push(e,"60389nVP1lE2r/zDZt3iI0H","ComBulletDraw3");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("./BulletDrawBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeStamp=0,e._lifeTime=0,e}return i(e,t),e.prototype.onBeginContact=function(){this._lifeStamp=this._lifeTime},e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.node.pauseAllActions()},e.prototype.resume=function(){this.node.resumeAllActions()},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o),this.node.setPosition(this._target.x,this._target.y),this.node.scale=this._weapon.getAoeRange(),this._lifeStamp=0,this._lifeTime=this._attrs.duration,cc.tween(this.node).to(this._lifeTime/6,{scale:.8}).to(this._lifeTime/6,{scale:1}).to(this._lifeTime/6,{scale:.8}).to(this._lifeTime/6,{scale:1}).to(this._lifeTime/6,{scale:.8}).to(this._lifeTime/6,{scale:1}).start()},e.prototype.update=function(t){if(!this._game.isPause)return this._lifeStamp+=t,this._lifeStamp>=this._lifeTime?(this._lifeStamp=0,void this._callback({pos:this.node.getPosition()})):void 0},r([p],e)}(c.BulletDrawBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","./BulletDrawBase":"BulletDrawBase"}],ComBulletFeidaoZ_NewYear:[function(t,e,o){"use strict";cc._RF.push(e,"83919Zjl2pEZYHuN6x1XnYx","ComBulletFeidaoZ_NewYear");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../Game/Weapon/Bullet/BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e}return i(e,t),e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o);var i=e.pos;this.node.setPosition(i.x,i.y),this.node.setParent,this.spine.setAnimation(0,"animation",!1),this.spine.setCompleteListener(function(){n._callback()})},r([l(sp.Skeleton)],e.prototype,"spine",void 0),r([c],e)}(a.BulletBase);o.default=p,cc._RF.pop()},{"../../../../Game/Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletFeidaoZ:[function(t,e,o){"use strict";cc._RF.push(e,"2e028ptXGhBGJm474QZdOB8","ComBulletFeidaoZ");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../NpcBase"),s=t("./BulletBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._v2=cc.v2(),e._lifeStamp=0,e._lifeTime=0,e}return i(e,t),e.prototype.fire=function(e,o){if(t.prototype.fire.call(this,e,o),null!=this._target&&null!=this._target.parent){var n=this._target.getComponent(a.NpcBase);if(null==n||n.hp<=0)this._callback();else{var i=e.pos,r=cc.v2(this._target.x,this._target.y+40),s=cc.Vec2.subtract(this._v2,r,i),c=cc.math.toDegree(Math.atan2(s.y,s.x));this.node.setParent(this._target),this.node.setPosition(0,40,0),this.node.scaleX=1/this._target.scaleX,this.node.scaleY=1/this._target.scaleY,this._target.scaleX<0?this.node.angle=-c:this.node.angle=c,this._lifeStamp=0,this._lifeTime=this._attrs.duration}}else this._callback()},e.prototype.update=function(t){this._game.isPause||(null!=this._target&&null!=this._target.parent?(this._lifeStamp+=t,this._lifeStamp>this._lifeTime&&this._callback()):this._callback())},r([l],e)}(s.BulletBase));o.default=p,cc._RF.pop()},{"../../NpcBase":"NpcBase","./BulletBase":"BulletBase"}],ComBulletFeidao:[function(t,e,o){"use strict";cc._RF.push(e,"ee2dfiQn75DsJmo1AqHULiN","ComBulletFeidao");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Audio/AudioMgr"),s=t("../../../Model/GameModel"),c=t("./BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.motionStreak=null,e._rBody=null,e._collider=null,e._radian=0,e._moveSpeed=0,e._hitCount=0,e._lifeStamp=0,e._lifeTime=0,e._v2=cc.v2(),e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.x,this.node.y),this.motionStreak.node.setSiblingIndex(0)},e.prototype.onDisable=function(){this.motionStreak.node.removeFromParent()},e.prototype.onDestroy=function(){this.motionStreak.node.destroy()},e.prototype.onBeginContact=function(t,e,o){this._target=o.node,this.hit(o.node)},e.prototype.fire=function(e,o){var n;if(t.prototype.fire.call(this,e,o),a.AudioMgr.inst.playEffectByName("feidao"),null!=this._target&&null!=this._target.parent){var i=this._game.player.node,r=cc.v2(this._target.x,this._target.y+40);n=cc.Vec2.subtract(this._v2,r,i)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));this._radian=Math.atan2(n.y,n.x);var s=this._game.player.node;this.node.setPosition(s.x,s.y),this.node.scale=this._attrs.aoeRange,this.node.angle=cc.math.toDegree(this._radian),this._moveSpeed=this._attrs.moveSpeed,this._hitCount=this._weapon.getHitCount(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration()},e.prototype.update=function(t){if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime)this._callback({pos:this.node.getPosition(),target:this._target});else{var e=this._moveSpeed*t,o=this._radian,n=Math.cos(o)*e,i=Math.sin(o)*e;this.node.x+=n,this.node.y+=i,this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y}},e.prototype.hit=function(t){var e=this;this._hitCount--,this._hitCount>0?(this.scheduleOnce(function(){var t;if(e._target=s.GameModel.inst.findRandMonster(),null!=e._target&&null!=e._target.parent){var o=e._game.player.node,n=cc.v2(e._target.x,e._target.y+40);t=cc.Vec2.subtract(e._v2,n,o)}else t=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));e._radian=Math.atan2(t.y,t.x),e.node.angle=cc.math.toDegree(e._radian),e._rBody.syncRotation(!1)}),this._lifeStamp=0):this._lifeStamp=this._lifeTime,t.emit("hit",{damage:this.getDamage()})},r([u(cc.MotionStreak)],e.prototype,"motionStreak",void 0),r([p],e)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Model/GameModel":"GameModel","./BulletBase":"BulletBase"}],ComBulletFeijian:[function(t,e,o){"use strict";cc._RF.push(e,"ed84dFG/eJO4ZzzbLf1yFdu","ComBulletFeijian");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Weapon/Bullet/BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rBody=null,e._collider=null,e._velocity=cc.v2(),e._lifeStamp=0,e._lifeTime=0,e._moveSpeed=0,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=e.monster;this._collider.tag=n.atk*this._attrs.damage;var i=n.node;this.node.setPosition(i.x,i.y);var r=e.radian;this.node.angle=cc.math.toDegree(r),this.node.scale=this._attrs.aoeRange,this._moveSpeed=this._attrs.moveSpeed;var a=Math.cos(r)*this._moveSpeed,s=Math.sin(r)*this._moveSpeed;this._velocity=cc.v2(a,s),this._lifeStamp=0,this._lifeTime=this._attrs.duration},e.prototype.update=function(t){this._game.isPause||(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime+.1&&this._callback({pos:this.node.getPosition()}),this.node.x+=this._velocity.x*t,this.node.y+=this._velocity.y*t)},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletFreezeAll:[function(t,e,o){"use strict";cc._RF.push(e,"5a6b1RsjW5MZ7+iyuIR4rnM","ComBulletFreezeAll");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hitMonsterList=[],e._stopTime=0,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node)},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o);var i=this._game.player.node;this.node.setPosition(i.x,i.y),this._hitMonsterList.length=0,this._stopTime=this._attrs.stopTime,this.scheduleOnce(function(){n._hitMonsterList.forEach(function(t){return t.emit("stop",n._stopTime)}),n._callback()},.1)},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletGunshiZ:[function(t,e,o){"use strict";cc._RF.push(e,"083d0XlUJNKNbzwm2BwK84Q","ComBulletGunshiZ");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("./BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._rBody=null,e._collider=null,e._effectStamp=0,e._effectInterval=1,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.spine.timeScale=0},e.prototype.resume=function(){this.spine.timeScale=1},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){var n=this;e.type=0,e.attrs=e.weapon.weaponAttrs[e.type],t.prototype.fire.call(this,e,o);var i=e.pos;this.node.setPosition(i.x+100*Math.random()-50,i.y+100*Math.random()-50),this.node.scale=this._weapon.getAoeRange(this._type),this.spine.setAnimation(0,"idle2",!1),this.spine.setCompleteListener(function(){n._callback()}),this._collider.enabled=!1},e.prototype.update=function(t){this._game.isPause||(this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._collider.enabled=!0))},r([u(sp.Skeleton)],e.prototype,"spine",void 0),r([p],e)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletGunshi:[function(t,e,o){"use strict";cc._RF.push(e,"a7e21aiMdNK9KjELLnu0GsT","ComBulletGunshi");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/StaticData"),s=t("../../../Model/WeaponModel"),c=t("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._hitMonsterList=[],e._stopTime=0,e._moveSpeed=0,e._hitCallback=null,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){-1==this._hitMonsterList.indexOf(o.node)&&(this._hitMonsterList.push(o.node),this._stopTime>0&&o.node.emit("stop",this._stopTime),o.node.emit("hit",{damage:this.getDamage()}))},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=e.direct,i=cc.v2(),r=0,c=0;0==n?(i.x=cc.math.randomRange(a.StaticData.minX,a.StaticData.maxX),i.y=this._attrs.upPos,r=this._attrs.upSpeed,c=2*Math.abs(i.y)/r,this.node.angle=-90):1==n&&(i.x=this._attrs.rPos,i.y=cc.math.randomRange(a.StaticData.minY+200,a.StaticData.maxY-200),r=this._attrs.rSpeed,c=2*Math.abs(i.x)/r,this.node.angle=180),i.x+=this._game.player.node.x,i.y+=this._game.player.node.y,this.node.setPosition(i),this.node.scale=this._weapon.getAoeRange(),this._stopTime=this._attrs.stopTime+(s.WeaponModel.inst.magicAttrs.sp_gunshi||0),this._lifeStamp=0,this._lifeTime=c,this._effectStamp=Math.random()*this._attrs.effectInterval,this._effectInterval=this._attrs.effectInterval,this._moveSpeed=r,this._hitCallback=e.hitCallback,this._hitMonsterList.length=0},e.prototype.update=function(t){if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>this._lifeTime)this._callback();else{this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitCallback({pos:this.node.getPosition()}));var e=this._moveSpeed,o=this.node.angle,n=e*t,i=cc.misc.degreesToRadians(o),r=Math.cos(i)*n,a=Math.sin(i)*n;this.node.x+=r,this.node.y+=a}},r([p],e)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/StaticData":"StaticData","../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletHudun:[function(t,e,o){"use strict";cc._RF.push(e,"4ab7cAmEjBBXJPsb6DQpC9n","ComBulletHudun");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Model/WeaponModel"),s=t("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._maxDunCount=0,e._curDunCount=0,e}return i(e,t),e.prototype.onBeginContact=function(){this.setDunAndDo()},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o),this._lifeTime=this._attrs.duration+(a.WeaponModel.inst.magicAttrs.a_hudun_duration_v||0),this._maxDunCount=this._curDunCount=this._attrs.hitCount,this._effectInterval=this._attrs.effectInterval,this._game.immune+=this._maxDunCount,this.updateDun()},e.prototype.updateDun=function(){this._curDunCount<=0?this.spine.node.active=!1:(this.spine.node.active=!0,1==this._curDunCount?this.spine.setAnimation(0,"idle1",!0):2==this._curDunCount?this.spine.setAnimation(0,"idle2",!0):3==this._curDunCount&&this.spine.setAnimation(0,"idle3",!0))},e.prototype.addDun=function(){this._curDunCount++,this._game.immune++,this.updateDun()},e.prototype.subDun=function(){this._curDunCount--,this._game.immune--,this.updateDun()},e.prototype.setDunAndDo=function(){return 0==this._curDunCount?this._curDunCount:(0==this._lifeStamp&&(this._lifeStamp=this._lifeTime,this._effectStamp=0),this._curDunCount)},e.prototype.update=function(t){if(!this._game.isPause){var e=this._game.player.node;this.node.setPosition(e.x,e.y),0==this._lifeStamp?this._curDunCount<this._maxDunCount&&(this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this.addDun())):(this._lifeStamp-=t,this._lifeStamp<=0&&(this.subDun(),this._lifeStamp=0))}},r([p(sp.Skeleton)],e.prototype,"spine",void 0),r([l],e)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletJianYu:[function(t,e,o){"use strict";cc._RF.push(e,"9db785LVhtFj6YepwE9Q+7T","ComBulletJianYu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("../../../Framework/Utils/VectorUtil"),l=t("./BulletBase"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeArrow=null,e.node0=null,e.node1=null,e.aniHit=null,e.motionStreak=null,e._rBody=null,e._collider=null,e._radians=0,e._delay=0,e._moveSpeed=0,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider)},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this),this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.x,this.node.y),this.motionStreak.node.setSiblingIndex(0)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this),this.motionStreak.node.removeFromParent()},e.prototype.onDestroy=function(){this.motionStreak.node.destroy()},e.prototype.pause=function(){this.node.pauseAllActions(),this.nodeArrow.pauseAllActions()},e.prototype.resume=function(){this.node.resumeAllActions(),this.nodeArrow.resumeAllActions()},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o);var i=this._game.player.node.getPosition(),r=e.pos,a=i.sub(i.sub(r).multiplyScalar(.8));this.node.setPosition(a),this.node.scale=this._weapon.getAoeRange();var s=e.index*this._attrs.effectInterval,l=this._weapon.getDuration(),p=e.angle;this._radians=cc.math.toRadian(p),this._moveSpeed=this._attrs.moveSpeed;var u=cc.Vec2.ZERO,d=c.VectorUtil.getSubRay(u,this._radians,l*this._moveSpeed);this.nodeArrow.setPosition(d.x,d.y),this.nodeArrow.angle=p,this._collider.enabled=!1,this.aniHit.node.active=!1,this.node0.active=!0,this.node1.active=!1,this.node.opacity=255,this.nodeArrow.opacity=0,cc.tween(this.nodeArrow).delay(s).call(function(){n.nodeArrow.opacity=255}).to(l,{x:0,y:0}).call(function(){n._collider.enabled=!0,n.scheduleOnce(function(){n._collider.enabled=!1},.1),n.node0.active=!1,n.node1.active=!0,n.aniHit.node.active=!0,n.aniHit.play(),cc.tween(n.node).to(n._attrs.delay,{opacity:0}).call(function(){return n._callback({pos:n.node.getPosition()})}).start()}).start()},e.prototype.update=function(){this.motionStreak.node.x=this.node.x+this.nodeArrow.x,this.motionStreak.node.y=this.node.y+this.nodeArrow.y},r([d(cc.Node)],e.prototype,"nodeArrow",void 0),r([d(cc.Node)],e.prototype,"node0",void 0),r([d(cc.Node)],e.prototype,"node1",void 0),r([d(cc.Animation)],e.prototype,"aniHit",void 0),r([d(cc.MotionStreak)],e.prototype,"motionStreak",void 0),r([u],e)}(l.BulletBase);o.default=h,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/Utils/VectorUtil":"VectorUtil","./BulletBase":"BulletBase"}],ComBulletJiantaZ2:[function(t,e,o){"use strict";cc._RF.push(e,"6af4aPfvBlKzK1mhjXipBV1","ComBulletJiantaZ2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._group=[],e._v2=cc.v2(),e._effectSpeed=1,e._effectStamp=0,e._interval=0,e._intervalStamp=0,e._moveSpeed=0,e._radians=0,e._radians2=0,e._dur=0,e._start=null,e._end=null,e._rBody=null,e._collider=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o),this._group=e.group,this._moveSpeed=this._attrs.moveSpeed,this._interval=this._intervalStamp=this._attrs.interval,this._start=this._group[0],this._end=this._group[1];var n=cc.Vec2.subtract(this._v2,this._end,this._start);this._radians=Math.atan2(n.y,n.x);var i=cc.Vec2.subtract(this._v2,this._start,this._end);this._radians2=Math.atan2(i.y,i.x),this._dur=this._v2.mag()/this._moveSpeed,this.node.setPosition(this._start.x,this._start.y),this.node.scale=this._attrs.aoeRange,this._effectSpeed=1,this._effectStamp=0,this._intervalStamp=0},e.prototype.update=function(t){if(!this._game.isPause)if(null!=this._group[0].parent&&null!=this._group[1].parent){if(this._intervalStamp+=t,this._interval>this._intervalStamp)return this.node.opacity=0,void(this._collider.enabled=!1);this.node.opacity=255,this._collider.enabled=!0,this._effectStamp+=t*this._effectSpeed,this._effectStamp>this._dur?(this._effectStamp=this._dur,this._intervalStamp=0,this._effectSpeed*=-1,this.node.scaleX*=-1):this._effectStamp<0&&(this._effectStamp=0,this._intervalStamp=0,this._effectSpeed*=-1,this.node.scaleX*=-1);var e=this._moveSpeed*t,o=1==this._effectSpeed?this._radians:this._radians2,n=Math.cos(o)*e,i=Math.sin(o)*e;this.node.x+=n,this.node.y+=i}else this._callback()},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletJiantaZ:[function(t,e,o){"use strict";cc._RF.push(e,"47b01tj1a5IxYoRuMdQcDY6","ComBulletJiantaZ");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._moveSpeed=0,e._v2=cc.v2(),e._targetPos=cc.v2(),e}return i(e,t),e.prototype.fire=function(e,o){e.type=0,e.attrs=e.weapon.weaponAttrs[e.type],t.prototype.fire.call(this,e,o);var n=e.pos;this.node.setPosition(n),this._moveSpeed=this._weapon.weaponAttrs[0].moveSpeed},e.prototype.update=function(t){if(!this._game.isPause){var e,o=this.node;this._target&&null!=this._target.parent?(e=this._target,this._targetPos=this._target.getPosition(this._targetPos)):(e=this._targetPos,this._target=null);var n=cc.Vec2.subtract(this._v2,e,o),i=Math.atan2(n.y,n.x),r=this._moveSpeed*t,a=Math.cos(i)*r,s=Math.sin(i)*r;this.node.x+=a,this.node.y+=s,this.node.angle=cc.math.toDegree(i),cc.Vec2.distance(o,e)<=50&&(this._target&&null!=this._target.parent&&this._target.emit("hit",{damage:this.getDamage()}),this._callback({pos:o}))}},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletJianta:[function(t,e,o){"use strict";cc._RF.push(e,"f78a08T1bJP3J5i3gBtUmcm","ComBulletJianta");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Model/GameModel"),s=t("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._hitCount=0,e._hitCallback=null,e._distance=0,e._hp=0,e._hpMax=0,e._v2=cc.v2(),e._tmp1=cc.v2(),e._tmp2=cc.v2(),e._tmp3=cc.v2(),e}return i(e,t),e.prototype.onEnable=function(){this.node.on("update",this.onUpdate,this)},e.prototype.onDisable=function(){this.node.off("update",this.onUpdate,this)},e.prototype.onHit=function(t){t<=0||(this._hp-=t,this._hp<=0&&(this._lifeStamp=this._lifeTime))},e.prototype.onUpdate=function(){this._lifeTime=this._weapon.getDuration(),this._effectInterval=this._attrs.effectInterval,this._hitCount=this._attrs.hitCount,this._distance=this._attrs.distance,this._hp=this._hpMax=this._attrs.hp},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=this._target.getPosition();n.x+=50*Math.random()-25,n.y+=50*Math.random()-25,this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitCount=this._attrs.hitCount,this._hitCallback=e.hitCallback,this._distance=this._attrs.distance,this._hp=this._hpMax=this._attrs.hp,this.spine.setAnimation(0,"idle",!0)},e.prototype.update=function(t){var e=this;if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>this._lifeTime)this._callback();else if(this._effectStamp+=t,this._effectStamp>=this._effectInterval){this._effectStamp-=this._effectInterval;var o=a.GameModel.inst.findDistanceNearMonsters(this._hitCount,this._distance,this.node);if(0==o.length)return;var n=this.node.getPosition(this._tmp1);n.y+=60;var i=o[0].getPosition(this._tmp2),r=n;cc.Vec2.subtract(this._v2,r,i);var s,c=Math.atan2(this._v2.y,this._v2.x);s=c>.7853981633974483&&c<2.356194490192345?"attack3":c<-.7853981633974483&&c>-2.356194490192345?"attack2":"attack1",Math.abs(c)>1.5707963267948966?this.node.scaleX=Math.abs(this.node.scaleX):this.node.scaleX=-1*Math.abs(this.node.scaleX),this.spine.setAnimation(0,s,!1),this.spine.setCompleteListener(function(){e.spine.setCompleteListener(null),e.spine.setAnimation(0,"idle",!0)}),this.scheduleOnce(function(){for(var t=e._hitCount,i=0;i<t;i++){var r=o[i];null!=r&&null!=r.parent&&e._hitCallback({target:r,pos:n})}},.16)}},r([p(sp.Skeleton)],e.prototype,"spine",void 0),r([l],e)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Model/GameModel":"GameModel","./BulletBase":"BulletBase"}],ComBulletJiguang:[function(t,e,o){"use strict";cc._RF.push(e,"6a14fdvR2RH8KrKaQV/Alf/","ComBulletJiguang");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Audio/AudioMgr"),s=t("../../../Model/WeaponModel"),c=t("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._hitMonsterList=[],e._angularSpeed=0,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.fire=function(e,o){var n;if(t.prototype.fire.call(this,e,o),a.AudioMgr.inst.playEffectByName("jiguang"),null!=this._target&&null!=this._target.parent){var i=this._game.player.node,r=cc.v2(this._target.x,this._target.y+40);n=cc.Vec2.subtract(cc.v2(),r,i)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));var c=Math.atan2(n.y,n.x);this.node.angle=cc.math.toDegree(c);var l=this._game.player.node;this.node.setPosition(l.x,l.y),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._angularSpeed=this._attrs.angularSpeed+(s.WeaponModel.inst.magicAttrs.sp_jiguang||0),this._hitMonsterList.length=0},e.prototype.update=function(t){var e=this;if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime)this._callback();else{var o=this._game.player.node;this.node.setPosition(o.x,o.y),this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:e.getDamage()})})),this._angularSpeed>0&&(this.node.angle-=1/this._angularSpeed*360*t)}},r([p],e)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletLeidianSenior:[function(t,e,o){"use strict";cc._RF.push(e,"bdd2eL93AtKSY/PIwOZ+49e","ComBulletLeidianSenior");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Res/ResKeeper"),s=t("../ComWeaponCommonPet"),c=t("../Pet/ComPetLeiyun"),l=t("./BulletBase"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e}return i(e,t),e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o),this.node.setPosition(0,0);var i=this._game.player.node;this.spine.node.setPosition(i.x,i.y);var r=this.node.addComponent(a.default),l=this.spine.addComponent(c.default);l.atkSpeed=this._attrs.interval,l.atkOffset=cc.v2(0,0),l.moveSpeed=this._attrs.moveSpeed,r.loadBundleRes("Prefabs","/Game/Weapon/weaponCommonPetLeiyun",cc.Prefab,function(t,e){var o=cc.instantiate(e),i=o.getComponent(s.ComWeaponCommonPet);i.damage=n._attrs.damage*n._game.player.atk,i.lifeTime=n._attrs.duration,i.effectInterval=n._attrs.effectInterval,l.weapon=i,o.setParent(l.node)})},r([d(sp.Skeleton)],e.prototype,"spine",void 0),r([u],e)}(l.BulletBase);o.default=h,cc._RF.pop()},{"../../../Framework/Res/ResKeeper":"ResKeeper","../ComWeaponCommonPet":"ComWeaponCommonPet","../Pet/ComPetLeiyun":"ComPetLeiyun","./BulletBase":"BulletBase"}],ComBulletLeidian:[function(t,e,o){"use strict";cc._RF.push(e,"277a46QsJtEQ4hzdZ+jkVa6","ComBulletLeidian");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Audio/AudioMgr"),s=t("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e}return i(e,t),e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o),a.AudioMgr.inst.playEffectByName("leidian"),this.node.setPosition(this._target.x,this._target.y),this.spine.setAnimation(0,"idle",!1),this.spine.setCompleteListener(function(){n._callback()}),this.scheduleOnce(function(){n._target.emit("hit",{damage:n.getDamage()})},.2)},r([p(sp.Skeleton)],e.prototype,"spine",void 0),r([l],e)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","./BulletBase":"BulletBase"}],ComBulletLiandao:[function(t,e,o){"use strict";cc._RF.push(e,"58a026wE8FILq2Mh+22IdNH","ComBulletLiandao");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Weapon/Bullet/BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.motionStreak=null,e._radian=0,e._moveSpeed=0,e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._delayStamp=0,e._delay=0,e._hitMonsterList=[],e._v2=cc.v2(),e._rBody=null,e._collider=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.x,this.node.y),this.motionStreak.node.setSiblingIndex(0)},e.prototype.onDisable=function(){this.motionStreak.node.removeFromParent()},e.prototype.onDestroy=function(){this.motionStreak.node.destroy()},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=e.monster;this._collider.tag=n.atk*this._attrs.damage,this._target=n.node;var i=n.node;this.node.setPosition(i.x,i.y),this.node.scale=this._attrs.aoeRange,this._radian=e.radian,this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._delayStamp=0,this._delay=this._attrs.delay,this._hitMonsterList.length=0},e.prototype.update=function(t){var e=this;if(!this._game.isPause){if(this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y,this._lifeStamp+=t,this._lifeStamp<this._lifeTime){var o=this._moveSpeed*t,n=this._radian,i=Math.cos(n)*o,r=Math.sin(n)*o;return this.node.x+=i,void(this.node.y+=r)}if(this._delayStamp+=t,this._delayStamp>this._delay){var a=this.node,s=this._target,c=cc.Vec2.subtract(this._v2,s,a);return n=Math.atan2(c.y,c.x),o=this._moveSpeed*t,i=Math.cos(n)*o,r=Math.sin(n)*o,this.node.x+=i,this.node.y+=r,void(cc.Vec2.distance(a,s)<=50&&this._callback())}this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:e.getDamage()})}))}},r([l(cc.MotionStreak)],e.prototype,"motionStreak",void 0),r([c],e)}(a.BulletBase);o.default=p,cc._RF.pop()},{"../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletLiuxingchuiSenior:[function(t,e,o){"use strict";cc._RF.push(e,"47834NUZDFF1qSi/I3d2Lv6","ComBulletLiuxingchuiSenior");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rBody=null,e._collider=null,e._angle=0,e._effectSpeed=1,e._effectStamp=0,e._angularSpeed=0,e._startDistance=0,e._endDistance=0,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCircleCollider)},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=e.startAngle,i=this._weapon.getAoeRange();this._angle=n,this.node.scale=i,this._collider.radius=70*i,this._collider.apply(),this._angularSpeed=this._attrs.angularSpeed,this._startDistance=1.2*this._attrs.distance,this._endDistance=this._weapon.getSkillInfo()[0][0].distance/2,this._effectStamp=0,this._effectSpeed=1,this._angularSpeed<1&&(this._angularSpeed=1)},e.prototype.update=function(t){if(!this._game.isPause){this._angle-=1/this._angularSpeed*360*t,this._effectStamp+=t*this._effectSpeed,this._effectStamp>1?(this._effectStamp=1,this._effectSpeed*=-1):this._effectStamp<0&&(this._effectStamp=0,this._effectSpeed*=-1);var e=cc.math.lerp(this._startDistance,this._endDistance,this._effectStamp),o=cc.math.toRadian(this._angle),n=Math.cos(o)*e,i=Math.sin(o)*e;this.node.setPosition(n,i,0)}},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletLiuxingchui:[function(t,e,o){"use strict";cc._RF.push(e,"46e7b4l6mlIFZ9oCAKLxJXL","ComBulletLiuxingchui");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rBody=null,e._collider=null,e._angle=0,e._effectSpeed=1,e._effectStamp=0,e._angularSpeed=0,e._startDistance=0,e._endDistance=0,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCircleCollider)},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=this._weapon.getAoeRange();this.node.setScale(n),this._collider.radius=70*n,this._collider.apply(),this._angle=e.startAngle,this._angularSpeed=this._attrs.angularSpeed,this._startDistance=this._attrs.distance,this._endDistance=this._attrs.distance,this._effectStamp=0,this._effectSpeed=1,this._angularSpeed<1&&(this._angularSpeed=1)},e.prototype.update=function(t){if(!this._game.isPause){this._angle-=1/this._angularSpeed*360*t,this._effectStamp+=t*this._effectSpeed,this._effectStamp>1?(this._effectStamp=1,this._effectSpeed*=-1):this._effectStamp<0&&(this._effectStamp=0,this._effectSpeed*=-1);var e=cc.math.lerp(this._startDistance,this._endDistance,this._effectStamp),o=cc.math.toRadian(this._angle),n=Math.cos(o)*e,i=Math.sin(o)*e;this.node.setPosition(n,i,0),this._rBody.syncPosition(!1)}},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletMofadanZ:[function(t,e,o){"use strict";cc._RF.push(e,"56a96A+rcFM67aN1UgCXeIk","ComBulletMofadanZ");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ani=null,e._rBody=null,e._collider=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.node.pauseAllActions()},e.prototype.resume=function(){this.node.resumeAllActions()},e.prototype.fire=function(e,o){e.type=0,e.attrs=e.weapon.weaponAttrs[e.type],t.prototype.fire.call(this,e,o);var n=e.monster;this._collider.tag=n.atk*this._attrs.damage;var i=e.pos;this.node.setPosition(i),this.node.scale=this._attrs.aoeRange,this.ani.play(),this.ani.once(cc.Animation.EventType.FINISHED,function(){o()})},r([u(cc.Animation)],e.prototype,"ani",void 0),r([p],e)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletMofadan:[function(t,e,o){"use strict";cc._RF.push(e,"098c36KxqFBaLUWsyVQ3q2I","ComBulletMofadan");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeStamp=0,e._lifeTime=0,e}return i(e,t),e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.node.pauseAllActions()},e.prototype.resume=function(){this.node.resumeAllActions()},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=e.pos;e.aoeRange,this.node.setPosition(n),this.node.scale=this._attrs.aoeRange,this._lifeStamp=0,this._lifeTime=this._attrs.warnInterval},e.prototype.update=function(t){this._game.isPause||(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime+.1&&this._callback({pos:this.node.getPosition()}))},r([p],e)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletMozhuaZ:[function(t,e,o){"use strict";cc._RF.push(e,"d6894u3TXRIWru5Pq2TqJF4","ComBulletMozhuaZ");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._hitMonsterList=[],e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=e.pos;this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(this._type),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(this._type),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},e.prototype.update=function(t){var e=this;this._game.isPause||(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime+.1?this._callback():(this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:e.getDamage()})}))))},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletMozhua:[function(t,e,o){"use strict";cc._RF.push(e,"91b1fhOdIFL97bIlqDQNAoW","ComBulletMozhua");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Audio/AudioMgr"),c=t("../../../Framework/Event/EventMgr"),l=t("../../../Model/WeaponModel"),p=t("./BulletBase"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.motionStreak=null,e._rBody=null,e._collider=null,e._lifeStamp=0,e._lifeTime=0,e._angularSpeed=0,e._v2=cc.v2(),e._v3=cc.v3(),e._targetPos=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.x,this.node.y),this.motionStreak.node.setSiblingIndex(0),c.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){this.motionStreak.node.removeFromParent(),c.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDestroy=function(){this.motionStreak.node.destroy()},e.prototype.pause=function(){this.node.pauseAllActions()},e.prototype.resume=function(){this.node.resumeAllActions()},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o),s.AudioMgr.inst.playEffectByName("mozhua");var n=this._game.player.node;this.node.setPosition(n.x,n.y);var i=this.node,r=this._target,a=cc.Vec2.subtract(this._v2,i,r),c=Math.atan2(a.y,a.x);this.node.angle=cc.math.toDegree(c);var p=l.WeaponModel.inst.magicAttrs.sp_mozhua||0;this._collider.enabled=p>0,this._attrs.damage=p,this._angularSpeed=Math.random()>.5?1:-1,this._targetPos=this._target.getPosition(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration()},e.prototype.update=function(t){if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.getPosition()});else{var e=this.node,o=this._targetPos,n=cc.Vec2.subtract(this._v2,o,e),i=Math.atan2(n.y,n.x)-cc.math.lerp(this._angularSpeed,0,this._lifeStamp/(this._lifeTime/2)),r=this._attrs.moveSpeed*t,a=Math.cos(i)*r,s=Math.sin(i)*r;this.node.x+=a,this.node.y+=s,this.node.angle=cc.math.toDegree(i),this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y,this.motionStreak.node.angle=this.node.angle,cc.Vec2.distance(e,o)<=50&&this._callback({pos:e})}},r([h(cc.MotionStreak)],e.prototype,"motionStreak",void 0),r([d],e)}(p.BulletBase);o.default=f,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletQiang:[function(t,e,o){"use strict";cc._RF.push(e,"180e2i+8XZOxIYZQI3w8g8m","ComBulletQiang");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeStamp=0,e._lifeTime=0,e._hp=0,e._hpMax=0,e._contact_monster_atk=0,e._touchStamp=0,e._touchDelta=.1,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){var n=o.tag;this.onHit(n),this._contact_monster_atk+=n},e.prototype.onEndContact=function(t,e,o){var n=o.tag;this._contact_monster_atk-=n},e.prototype.onHit=function(t){t<=0||(this._hp-=t,this._hp<=0&&(this._lifeStamp=this._lifeTime))},e.prototype.fire=function(e,o){e.type=0,e.attrs=e.weapon.weaponAttrs[e.type],t.prototype.fire.call(this,e,o);var n=e.pos;this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._hp=this._hpMax=this._attrs.hp,this._contact_monster_atk=0},e.prototype.update=function(t){this._game.isPause||(this._lifeStamp+=t,this._lifeStamp>this._lifeTime?this._callback():(this._touchStamp+=t,this._touchStamp>=this._touchDelta&&(this._touchStamp-=this._touchDelta,this._contact_monster_atk>0&&this.onHit(this._contact_monster_atk))))},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletQuanZ:[function(t,e,o){"use strict";cc._RF.push(e,"88e718hBV9L+qFeIZ7SHgQ3","ComBulletQuanZ");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._radians=0,e._lifeStamp=0,e._lifeTime=0,e._moveSpeed=0,e._rBody=null,e._collider=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){var n,i=this;if(t.prototype.fire.call(this,e,o),null!=this._target&&null!=this._target.parent){var r=this._game.player.node,a=cc.v2(this._target.x,this._target.y+40);n=cc.Vec2.subtract(cc.v2(),a,r)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));var s=Math.atan2(n.y,n.x);this.node.angle=cc.math.toDegree(s)+cc.math.randomRange(-25,25);var c=this._game.player.node;this.node.setPosition(c.x,c.y),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._collider.enabled=!0,this.spine.setAnimation(0,this.spine.defaultAnimation,!1),this.spine.setCompleteListener(function(){i._callback()}),this.spine.setEventListener(function(){i._collider.enabled=!0}),this._collider.enabled=!1},r([l(sp.Skeleton)],e.prototype,"spine",void 0),r([c],e)}(a.BulletBase);o.default=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletQuan:[function(t,e,o){"use strict";cc._RF.push(e,"c3a38eYk15GYLQOFo6R2UqB","ComBulletQuan");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Audio/AudioMgr"),s=t("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._rBody=null,e._collider=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o),a.AudioMgr.inst.playEffectByName("quan");var i=this._game.player.node.getPosition(),r=this._target.getPosition(),s=i.sub(i.sub(r));this.node.setPosition(s),this.node.scale=this._weapon.getAoeRange(),this.spine.setAnimation(0,this.spine.defaultAnimation,!1),this.spine.setCompleteListener(function(){n._callback()}),this.spine.setEventListener(function(){n._collider.enabled=!0}),this._collider.enabled=!1},r([p(sp.Skeleton)],e.prototype,"spine",void 0),r([l],e)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","./BulletBase":"BulletBase"}],ComBulletShufu:[function(t,e,o){"use strict";cc._RF.push(e,"49d0a0Gl8RCAa6IBVffDpJ+","ComBulletShufu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Audio/AudioMgr"),c=t("../../../Framework/Event/EventMgr"),l=t("./BulletBase"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._stopTime=0,e}return i(e,t),e.prototype.onEnable=function(){c.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){c.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.spine.timeScale=0},e.prototype.resume=function(){this.spine.timeScale=1},e.prototype.onBeginContact=function(t,e,o){o.node.emit("stop",this._stopTime)},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o),s.AudioMgr.inst.playEffectByName("ice");var i=e.radian;this.node.angle=cc.math.toDegree(i),this.node.setPosition(0,0);var r=this.spine.setAnimation(0,"idle1",!1);this.spine.setTrackCompleteListener(r,function(){n._callback()}),this._stopTime=this._attrs.stopTime},r([d(sp.Skeleton)],e.prototype,"spine",void 0),r([u],e)}(l.BulletBase);o.default=h,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletTaijilunSenior:[function(t,e,o){"use strict";cc._RF.push(e,"8b564FFDMpP+b1c/3GJFg5n","ComBulletTaijilunSenior");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("./BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._delay=0,e._stopTime=0,e._rBody=null,e._collider=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()}),o.node.emit("stop",this._stopTime)},e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.spine.timeScale=0},e.prototype.resume=function(){this.spine.timeScale=1},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o);var i=this._game.player.node;this.node.setPosition(i.x,i.y),this.node.setScale(this._weapon.getAoeRange(this._type)),this._stopTime=this._attrs.stopTime,this._delay=this._attrs.delay,this._collider.enabled=!1,this.spine.timeScale=3.56/this._delay,this.spine.setAnimation(0,"idle",!1),this.spine.setCompleteListener(function(){n._collider.enabled=!0,n.spine.setAnimation(0,"attack",!1),n.spine.setCompleteListener(function(){n._callback({})})})},r([u(sp.Skeleton)],e.prototype,"spine",void 0),r([p],e)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletTaijilun:[function(t,e,o){"use strict";cc._RF.push(e,"98eec+b6WFPgr2lmQ8UrKYo","ComBulletTaijilun");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shadow=null,e._radian=0,e._moveSpeed=0,e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._delayStamp=0,e._delay=0,e._hitMonsterList=[],e._v2=cc.v3(),e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.onEnable=function(){this.shadow.setPosition(this.node.x,this.node.y),this.shadow.setSiblingIndex(0)},e.prototype.onDisable=function(){this.shadow.removeFromParent()},e.prototype.onDestroy=function(){this.shadow.destroy()},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o),this.shadow.setParent(e.shadow),this._radian=e.radian;var n=this._game.player.node;this.node.setPosition(n.x,n.y),this.node.setScale(this._weapon.getAoeRange()),this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._delayStamp=0,this._delay=this._attrs.delay,this._hitMonsterList.length=0},e.prototype.update=function(t){var e=this;if(!this._game.isPause){if(this.shadow.x=this.node.x,this.shadow.y=this.node.y,this._lifeStamp+=t,this._lifeStamp<this._lifeTime){var o=this._moveSpeed*t,n=this._radian,i=Math.cos(n)*o,r=Math.sin(n)*o;return this.node.x+=i,void(this.node.y+=r)}if(this._delayStamp+=t,this._delayStamp>this._delay){var a=this.node,s=this._game.player.node,c=cc.Vec2.subtract(this._v2,s,a);return n=Math.atan2(c.y,c.x),o=this._moveSpeed*t,i=Math.cos(n)*o,r=Math.sin(n)*o,this.node.x+=i,this.node.y+=r,void(cc.Vec2.distance(a,s)<=50&&this._callback())}this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:e.getDamage()})}))}},r([l(cc.Node)],e.prototype,"shadow",void 0),r([c],e)}(a.BulletBase);o.default=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletXialuo:[function(t,e,o){"use strict";cc._RF.push(e,"33909MKYaRIQJOroSp9sf+d","ComBulletXialuo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._monster=null,e._rBody=null,e._collider=null,e}return i(e,t),e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.node.pauseAllActions()},e.prototype.resume=function(){this.node.resumeAllActions()},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o),this._monster=e.monster,this._collider.tag=this._monster.atk*this._attrs.damage,this.node.setParent(this._monster.node),this.node.setPosition(cc.Vec2.ZERO);var i=this._monster.getComponent(cc.RigidBody);i.active=!1,this._rBody.active=!1;var r=e.pos;this._monster.node.setPosition(r);var a=this._monster.spine.setAnimation(0,"attack2",!1);this._monster.spine.setTrackCompleteListener(a,function(){n._monster.spine.setAnimation(0,"run",!0),n._monster.node.emit("resumeMove"),o()}),this._monster.spine.setTrackEventListener(a,function(){i.active=!0,n._rBody.active=!0})},e.prototype.update=function(){if(this._monster.hp<0)return cc.Tween.stopAllByTarget(this._monster.node),void this._callback();this.node.setPosition(cc.Vec2.ZERO)},r([p],e)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletXuanfeng:[function(t,e,o){"use strict";cc._RF.push(e,"73d6c0pnFFLh6K/MjClWcVQ","ComBulletXuanfeng");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hitMonsterList=[],e._lifeStamp=0,e._lifeTime=0,e._radian=0,e._friction=.7,e._moveSpeed=0,e._repelSpeed=0,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){-1==this._hitMonsterList.indexOf(o.node)&&(this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed))},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=this._weapon.getAoeRange();this.node.setScale(n);var i=this._game.player.node;this.node.setPosition(i.x,i.y),this._radian=Math.random()*Math.PI*2,this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._attrs.duration,this._repelSpeed=this._attrs.repelSpeed,this._hitMonsterList.length=0},e.prototype.update=function(t){if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.getPosition()});else{var e=this._radian,o=this._moveSpeed*t,n=Math.cos(e)*o,i=Math.sin(e)*o;this.node.x+=n,this.node.y+=i,this._moveSpeed-=this._friction*this._moveSpeed*t,this._moveSpeed<0&&(this._moveSpeed=0)}},r([c],e)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletYunShiZ:[function(t,e,o){"use strict";cc._RF.push(e,"539459kLKVL6o8TRNfiU0na","ComBulletYunShiZ");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ani=null,e.aniHit=null,e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._hitMonsterList=[],e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},e.prototype.onEndContact=function(t,e,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},e.prototype.fire=function(e,o){var n=this;t.prototype.fire.call(this,e,o);var i=e.pos;this.node.setPosition(i),this.node.scale=this._weapon.getAoeRange(this._type),this.ani.play("yunshi3"),this.ani.on(cc.Animation.EventType.FINISHED,function(){n.ani.play("yunshi4")}),this.aniHit.node.active=!0,this.aniHit.play("yunshi2"),this.aniHit.on(cc.Animation.EventType.FINISHED,function(){n.aniHit.node.active=!1}),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(this._type),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},e.prototype.update=function(t){var e=this;if(!this._game.isPause){if(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime)return this._lifeStamp=-cc.macro.REPEAT_FOREVER,void cc.tween(this.ani.node).to(.3,{opacity:0}).call(function(){e.ani.node.opacity=255,e._callback()}).start();this._effectStamp+=t,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(t){return t.emit("hit",{damage:e.getDamage()})}))}},r([l(cc.Animation)],e.prototype,"ani",void 0),r([l(cc.Animation)],e.prototype,"aniHit",void 0),r([c],e)}(a.BulletBase);o.default=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletYunShi:[function(t,e,o){"use strict";cc._RF.push(e,"063894SO+JCM51RAjcYQ0e/","ComBulletYunShi");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Utils/VectorUtil"),s=t("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ani=null,e._radians=0,e._lifeStamp=0,e._lifeTime=0,e._moveSpeed=0,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){o.node.emit("hit",{damage:this.getDamage()})},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=this._game.player.node.getPosition(),i=this._target.getPosition(),r=n.sub(n.sub(i).multiplyScalar(.8));this.node.setPosition(r),this.node.scale=this._weapon.getAoeRange(),this._radians=cc.math.toRadian(-100),this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._attrs.duration;var s=this.ani.node.height,c=cc.Vec2.ZERO,l=a.VectorUtil.getSubRay(c,this._radians,this._moveSpeed*this._lifeTime+s/2);this.ani.node.setPosition(l.x,l.y),this.ani.node.angle=-10},e.prototype.update=function(t){if(!this._game.isPause){this._lifeStamp+=t,this._lifeStamp>=this._lifeTime+.1&&this._callback({pos:this.node.getPosition()});var e=this._moveSpeed*t,o=this._radians,n=Math.cos(o)*e,i=Math.sin(o)*e;this.ani.node.x+=n,this.ani.node.y+=i}},r([p(cc.Animation)],e.prototype,"ani",void 0),r([l],e)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Framework/Utils/VectorUtil":"VectorUtil","./BulletBase":"BulletBase"}],ComBulletZhengguo:[function(t,e,o){"use strict";cc._RF.push(e,"d19daOqPZZEJpebdP1aU9Wz","ComBulletZhengguo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Model/WeaponModel"),s=t("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.icons=[],e.ani=null,e._lifeStamp=0,e._lifeTime=0,e._effectStamp=0,e._effectInterval=0,e._distance=0,e._addHp=0,e._hp=0,e._hpMax=0,e._contact_monster_atk=0,e._touchStamp=0,e._touchDelta=.1,e._isComplete=!1,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){var n=o.tag;this.onHit(n),this._contact_monster_atk+=n},e.prototype.onEndContact=function(t,e,o){var n=o.tag;this._contact_monster_atk-=n},e.prototype.onHit=function(t){t<=0||(this._hp-=t,this._hp<=0&&(this._lifeStamp=this._lifeTime))},e.prototype.fire=function(e,o){t.prototype.fire.call(this,e,o);var n=this._target.getPosition();n.x+=50*Math.random()-25,n.y+=50*Math.random()-25,this.node.setPosition(n),this.node.scale=this._attrs.aoeRange,this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._distance=this._attrs.distance,this._addHp=this._attrs.damage,this._hp=this._hpMax=this._attrs.hp,this._isComplete=!1,this._contact_monster_atk=0,this.switchState()},e.prototype.switchState=function(){this.icon.spriteFrame=this.icons[this._isComplete?1:0],this.ani.node.active=this._isComplete},e.prototype.update=function(t){if(!this._game.isPause)if(this._lifeStamp+=t,this._lifeStamp>=this._lifeTime)this._callback({pos:this.node.getPosition(),target:this._target});else{if(this._touchStamp+=t,this._touchStamp>=this._touchDelta&&(this._touchStamp-=this._touchDelta,this._contact_monster_atk>0&&this.onHit(this._contact_monster_atk)),!this._isComplete)return this._effectStamp+=t,void(this._effectStamp>this._effectInterval&&(this._isComplete=!0,this.switchState()));var e=this.node,o=this._game.player.node;if(cc.Vec2.distance(e,o)<this._distance){this._effectStamp=0,this._isComplete=!1,this.switchState();var n=this._addHp*this._game.player.maxHp,i=a.WeaponModel.inst.magicAttrs.a_foodhp_p;i>0&&(n+=n*i),this._game.player.hp+=n}}},r([p(cc.Sprite)],e.prototype,"icon",void 0),r([p(cc.SpriteFrame)],e.prototype,"icons",void 0),r([p(cc.Animation)],e.prototype,"ani",void 0),r([l],e)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComHitBeEffect:[function(t,e,o){"use strict";cc._RF.push(e,"b811cE5y0JO/aRYtLplZ96G","ComHitBeEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComHitBeEffect=void 0;var a=t("../../Controller/GameItemBase"),s=t("../../Model/GameModel"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e}var o;return i(e,t),o=e,e.prototype.playAnim=function(){var t=this,e=Date.now(),n="hit1";e-o.lastTime<1e3*s.GameModel.inst.player.touchDelta&&(n="hit2"),o.lastTime=e,this.node.active=!0,this.spine.setAnimation(0,n,!1),this.scheduleOnce(function(){t.recycle()},.5)},e.lastTime=0,r([p(sp.Skeleton)],e.prototype,"spine",void 0),o=r([l],e)}(a.GameItemBase);o.ComHitBeEffect=u,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase","../../Model/GameModel":"GameModel"}],ComHitEffect:[function(t,e,o){"use strict";cc._RF.push(e,"d8ca2OCBghMHLrByrMt1yRC","ComHitEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComHitEffect=void 0;var a=t("../../Controller/GameItemBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.animHit=null,e}return i(e,t),e.prototype.playAnim=function(){var t=this;this.node.active=!0,this.animHit.play(),this.animHit.once(cc.Animation.EventType.FINISHED,function(){t.recycle()})},r([l(cc.Animation)],e.prototype,"animHit",void 0),r([c],e)}(a.GameItemBase);o.ComHitEffect=p,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase"}],ComHitNum:[function(t,e,o){"use strict";cc._RF.push(e,"83c7bxoZcRLLaeW6Kfv6Dbj","ComHitNum");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/GameItemBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelHp=null,e.animShow=null,e.bj=null,e.bjImgs=[],e}return i(e,t),e.prototype.play=function(t){var e=this;this.node.active=!0,this.labelHp.string=t,this.animShow.play(),this.animShow.once(cc.Animation.EventType.FINISHED,function(){e.recycle()}),this.bj&&(t>1e5?this.bj.spriteFrame=this.bjImgs[4]:t>1e3?this.bj.spriteFrame=this.bjImgs[3]:t>100?this.bj.spriteFrame=this.bjImgs[2]:t>10?this.bj.spriteFrame=this.bjImgs[1]:t>0&&(this.bj.spriteFrame=this.bjImgs[0]))},r([l(cc.Label)],e.prototype,"labelHp",void 0),r([l(cc.Animation)],e.prototype,"animShow",void 0),r([l(cc.Sprite)],e.prototype,"bj",void 0),r([l([cc.SpriteFrame])],e.prototype,"bjImgs",void 0),r([c],e)}(a.GameItemBase);o.default=p,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase"}],ComMonsterChongfeng:[function(t,e,o){"use strict";cc._RF.push(e,"0d71cdGKuFEW6sEBK42YHzy","ComMonsterChongfeng");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MonsterWeapon"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._distance=0,e._interval=0,e._bulletCount=0,e._v2=cc.v2(),e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount},e.prototype.warn=function(e,o){if(void 0===o&&(o=0),!(this.monster.hp<=0)){var n=this.monster.node,i=this._game.player.node,r=cc.Vec2.subtract(this._v2,i,n),a=Math.atan2(r.y,r.x);e.radian=a,t.prototype.warn.call(this,e,o)}},e.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!0),this.monster.node.emit("pauseMove"))},e.prototype.onEnd=function(){},e.prototype.update=function(t){if(!this._game.isPause&&this._isStart&&!(this._ref>0)){this._fireStamp+=t;var e=this.monster.node,o=this._game.player.node;if(!(cc.Vec2.distance(e,o)>this._distance)){var n=this._interval;this._fireStamp>=n&&(this._fireStamp=0,this.warn({target:this._game.player.node}))}}},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"./MonsterWeapon":"MonsterWeapon"}],ComMonsterDici:[function(t,e,o){"use strict";cc._RF.push(e,"0fec0jFiZ9GM7FyfX7/3q8K","ComMonsterDici");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/LayerMgr"),s=t("../../Warn/WarnBase"),c=t("./MonsterWeapon"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curWarnStamp=0,e._bulletCount=0,e._distance=0,e._interval=0,e._warnInterval=0,e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount,this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._warnInterval=this._weaponInfo.weaponAttrs[0].warnInterval},e.prototype.warn=function(t,e){var o=this;if(void 0===e&&(e=0),!(this.monster.hp<=0)){var n="warn"+e,i=this.get(n);if(null!=i){i.setParent(a.LayerMgr.inst.WarnLayer);var r=this.monster.node.getPosition(),c=Math.random()*Math.PI*2,l=Math.random()*this._weaponInfo.weaponAttrs[0].rPos;r.x+=Math.cos(c)*l,r.y+=Math.sin(c)*l,t.pos=r,t.scale=cc.math.randomRange(.5,1.5),t.range=this._weaponInfo.weaponAttrs[0].warnRange*t.scale,t.radian=t.radian||0,t.dur=t.dur||this._weaponInfo.weaponAttrs[e].warnInterval,t.width*=t.aoeRange||this._weaponInfo.weaponAttrs[e].aoeRange||1;var p=i.getComponent(s.default);p.setWarn({dur:t.dur,range:t.range,pos:t.pos,radian:t.radian,width:t.width},function(){o.put(n,p.node),o.fire(t,e)})}}},e.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!0),this.monster.node.emit("pauseMove"))},e.prototype.onEnd=function(){var t=this;if(!(this.monster.hp<=0||this._ref>0)){var e=this.monster.spine.setAnimation(0,"attack2",!1);this.monster.spine.setTrackCompleteListener(e,function(){t.monster.spine.setAnimation(0,"run",!0),t.monster.node.emit("resumeMove")})}},e.prototype.update=function(t){if(!this._game.isPause&&this._isStart){if(0==this._curFireCount&&0==this._ref){this._fireStamp+=t;var e=this.monster.node,o=this._game.player.node;if(cc.Vec2.distance(e,o)>this._distance)return;var n=this._interval;if(this._fireStamp>=n){this._fireStamp=0;var i=this._bulletCount;this._curFireCount=i,this.onStart(0),this._ref++}}this._curFireCount>0&&(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.warn({target:this._game.player.node}))),this._ref>0&&(this._curWarnStamp+=t,this._curWarnStamp>=this._warnInterval-.3&&(this._curWarnStamp=0,this._ref--,this.onEnd(0)))}},e.prototype.onDead=function(){this._isStart=!1,this._ref=0,this._curFireCount=0},r([p],e)}(c.default));o.default=u,cc._RF.pop()},{"../../../Controller/LayerMgr":"LayerMgr","../../Warn/WarnBase":"WarnBase","./MonsterWeapon":"MonsterWeapon"}],ComMonsterFeijian:[function(t,e,o){"use strict";cc._RF.push(e,"a47d2Dets1CN7fzYIsBAANL","ComMonsterFeijian");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MonsterWeapon"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._distance=0,e._interval=0,e._bulletCount=0,e._hitCount=0,e._angularSpeed=0,e._v2=cc.v2(),e._fireArg=[],e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount,this._hitCount=this._weaponInfo.weaponAttrs[0].hitCount,this._angularSpeed=this._weaponInfo.weaponAttrs[0].angularSpeed},e.prototype.warn=function(e,o){if(void 0===o&&(o=0),!(this.monster.hp<=0)){for(var n=this.monster.node,i=this._game.player.node,r=cc.Vec2.subtract(this._v2,i,n),a=Math.atan2(r.y,r.x),s=this._bulletCount,c=0;c<s;c++){var l=Object.assign({},e);l.radian=a+cc.math.toRadian(c*this._angularSpeed-Math.floor(s/2)*this._angularSpeed),t.prototype.warn.call(this,l,o)}this._fireArg.length=0}},e.prototype.fire=function(t,e){void 0===e&&(e=0),this._fireArg.push(t)},e.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!0),this.monster.node.emit("pauseMove"))},e.prototype.onEnd=function(){var e=this;if(!(this.monster.hp<=0||this._ref>0)){var o=this._hitCount,n=this.monster.spine.setAnimation(0,"attack2",!0);this.monster.spine.setTrackEventListener(n,function(){o--;for(var n=0,i=e._fireArg;n<i.length;n++){var r=i[n];t.prototype.fire.call(e,r)}}),this.monster.spine.setTrackCompleteListener(n,function(){0==o&&(e.monster.spine.setAnimation(0,"run",!0),e.monster.node.emit("resumeMove"))})}},e.prototype.update=function(t){if(!this._game.isPause&&this._isStart&&!(this._ref>0)){this._fireStamp+=t;var e=this.monster.node,o=this._game.player.node;if(!(cc.Vec2.distance(e,o)>this._distance)){var n=this._interval;this._fireStamp>=n&&(this._fireStamp=0,this.warn({target:this._game.player.node}))}}},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"./MonsterWeapon":"MonsterWeapon"}],ComMonsterLiandao:[function(t,e,o){"use strict";cc._RF.push(e,"86b4fFmZqNO8Y2RynrJJTns","ComMonsterLiandao");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MonsterWeapon"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._bulletCount=0,e._distance=0,e._interval=0,e._v2=cc.v2(),e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount},e.prototype.warn=function(e,o){if(void 0===o&&(o=0),!(this.monster.hp<=0))for(var n=this._bulletCount,i=this.monster.node,r=this._game.player.node,a=cc.Vec2.subtract(this._v2,r,i),s=Math.atan2(a.y,a.x),c=0;c<n;c++){var l=Object.assign({},e);l.radian=s+cc.math.toRadian(c*Math.floor(360/n)),t.prototype.warn.call(this,l,o)}},e.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack",!0),this.monster.node.emit("pauseMove"))},e.prototype.onEnd=function(){var t=this;if(!(this.monster.hp<=0||this._ref>0)){var e=this.monster.spine.setAnimation(0,"attack2",!1);this.monster.spine.setTrackCompleteListener(e,function(){t.monster.spine.setAnimation(0,"run",!0),t.monster.node.emit("resumeMove")})}},e.prototype.update=function(t){if(!this._game.isPause&&this._isStart&&!(this._ref>0)){this._fireStamp+=t;var e=this.monster.node,o=this._game.player.node;if(!(cc.Vec2.distance(e,o)>this._distance)){var n=this._interval;this._fireStamp>=n&&(this._fireStamp=0,this.warn({target:this._game.player.node}))}}},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"./MonsterWeapon":"MonsterWeapon"}],ComMonsterMofadan:[function(t,e,o){"use strict";cc._RF.push(e,"2111aUlwddBqY1+jhC5FWDB","ComMonsterMofadan");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/LayerMgr"),s=t("../../Warn/WarnBase"),c=t("./MonsterWeapon"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.4,e._curFireCount=0,e._curWarnStamp=0,e._bulletCount=0,e._distance=0,e._interval=0,e._warnInterval=0,e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount,this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._curFireStampDelta=this._weaponInfo.weaponAttrs[0].delay,this._warnInterval=this._curFireStampDelta*this._bulletCount},e.prototype.warn=function(t,e){var o=this;if(void 0===e&&(e=0),!(this.monster.hp<=0)){var n="warn"+e,i=this.get(n);if(null!=i){i.setParent(a.LayerMgr.inst.WarnLayer),t.pos=t.pos||this.monster.node.getPosition(),t.radian=t.radian||0,t.aoeRange=this._weaponInfo.weaponAttrs[e].aoeRange,t.range=this._weaponInfo.weaponAttrs[e].warnRange*this._weaponInfo.weaponAttrs[e].aoeRange,t.dur=this._weaponInfo.weaponAttrs[e].warnInterval,t.width*=t.aoeRange||this._weaponInfo.weaponAttrs[e].aoeRange||1;var r=i.getComponent(s.default);r.setWarn({dur:t.dur,range:t.range,pos:t.pos,radian:t.radian,width:t.width},function(){o.put(n,r.node),o.fire(t,e+1)}),this.fire(t,e)}}},e.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!0),this.monster.node.emit("pauseMove"))},e.prototype.onEnd=function(){var t=this;if(!(this.monster.hp<=0||this._ref>0)){var e=this.monster.spine.setAnimation(0,"attack2",!1);this.monster.spine.setTrackCompleteListener(e,function(){t.monster.spine.setAnimation(0,"run",!0),t.monster.node.emit("resumeMove")})}},e.prototype.update=function(t){if(!this._game.isPause&&this._isStart){if(0==this._curFireCount&&0==this._ref){this._fireStamp+=t;var e=this.monster.node,o=this._game.player.node;if(cc.Vec2.distance(e,o)>this._distance)return;var n=this._interval;if(this._fireStamp>=n){this._fireStamp=0;var i=this._bulletCount;this._curFireCount=i,this.onStart(0),this._ref++}}if(this._curFireCount>0&&(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta)){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var r=this.monster.node.getPosition(),a=Math.random()*Math.PI*2,s=Math.random()*this._weaponInfo.weaponAttrs[0].rPos;r.x+=Math.cos(a)*s,r.y+=Math.sin(a)*s,this.warn({target:this._game.player.node,pos:r})}this._ref>0&&(this._curWarnStamp+=t,this._curWarnStamp>=this._warnInterval&&(this._curWarnStamp=0,this._ref--,this.onEnd(0)))}},e.prototype.onDead=function(){this._isStart=!1,this._ref=0,this._curFireCount=0},r([p],e)}(c.default));o.default=u,cc._RF.pop()},{"../../../Controller/LayerMgr":"LayerMgr","../../Warn/WarnBase":"WarnBase","./MonsterWeapon":"MonsterWeapon"}],ComMonsterXialuo:[function(t,e,o){"use strict";cc._RF.push(e,"c2e428EolFFSJEedNwnxJAP","ComMonsterXialuo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MonsterWeapon"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._distance=0,e._interval=0,e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval},e.prototype.warn=function(e,o){void 0===o&&(o=0),this.monster.hp<=0||(e.pos=this._game.player.node.getPosition(),t.prototype.warn.call(this,e,o))},e.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!1),this.monster.node.emit("pauseMove"),this.monster.getComponent(cc.RigidBody).active=!1)},e.prototype.onEnd=function(){},e.prototype.update=function(t){if(!this._game.isPause&&this._isStart&&!(this._ref>0)){this._fireStamp+=t;var e=this.monster.node,o=this._game.player.node;if(!(cc.Vec2.distance(e,o)>this._distance)){var n=this._interval;this._fireStamp>=n&&(this._fireStamp=0,this.warn({target:this._game.player.node}))}}},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"./MonsterWeapon":"MonsterWeapon"}],ComPetLeiyun:[function(t,e,o){"use strict";cc._RF.push(e,"54611sZxjtOOIBRHZ617NRJ","ComPetLeiyun");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../../../Framework/Audio/AudioMgr"),c=t("../../../Framework/Utils/Utils"),l=t("../../Component/PetComponent"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){var t;this._stateMachine=((t={})[a.Idle]=new f(this),t[a.Atk]=new _(this),t),this._state=this._stateMachine[a.Idle],this.spPet=this.getComponent(sp.Skeleton),this.spRideState=this.spPet.getState(),this.spRideState&&(this.spRideState.data.defaultMix=.2)},r([u],e)}(l.default));o.default=d,function(t){t[t.Idle=0]="Idle",t[t.Atk=1]="Atk"}(a||(a={}));var h=function(t){this.pet=null,this.pet=t},f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=a.Idle,e._v2=cc.v2(),e._dur_atk=0,e._dur_atk_speed=1.5,e._dur_atk_temp=[1.5,2,2.5,3,3.5],e._dur_idle=0,e}return i(e,t),e.prototype.onStart=function(){this._dur_atk_speed=c.default.getRandToArray(this._dur_atk_temp),this.pet.playAnimation("idle")},e.prototype.onEnd=function(){},e.prototype.update=function(t){var e=this.pet.node.getPosition(),o=this.pet.game.player.node.getPosition(),n=cc.Vec2.subtract(this._v2,o,e),i=n.len();if(i>1e3){this._dur_idle=0;var r=this.pet.moveSpeed*t;i>1500?r*=1.2:i<1200&&(r*=.8);var s=-n.signAngle(cc.Vec2.RIGHT),c=Math.cos(s)*r,l=Math.sin(s)*r;this.pet.node.x+=c,this.pet.node.y+=l,this.pet.updateScale(c,l),this.pet.playAnimation("run")}else this._dur_idle+=t,this._dur_idle>.2&&this.pet.playAnimation("idle");this._dur_atk+=t,this._dur_atk>=this._dur_atk_speed&&(this._dur_atk=0,this.pet.switchState(a.Atk))},e}(h),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=a.Atk,e._v2=cc.v2(),e._target=null,e._atking=!1,e}return i(e,t),e.prototype.onStart=function(){this.searchTarget()},e.prototype.onEnd=function(){},e.prototype.atk=function(){s.AudioMgr.inst.playEffectByName("leidian"),this._atking=!0,this.pet.spPet.setAnimation(0,"attack",!0),this.fire()},e.prototype.atkEnd=function(){this._atking=!1,this._target=null,this.pet.switchState(a.Idle)},e.prototype.searchTarget=function(){this._target=this.pet.game.findRandMonster(),null!=this._target&&null!=this._target.parent||this.pet.switchState(a.Idle)},e.prototype.fire=function(){var t=this,e=cc.v2(this.pet.node.scaleX<0?1:-1);this.pet.weapon.fire({target:this.pet.node,direct:e,atkEnd:function(){t.atkEnd()}})},e.prototype.update=function(t){if(!this._atking)if(null!=this._target&&null!=this._target.parent){var e=this.pet.node,o=this._target;if(this._v2.x=o.x-e.x+(e.x>o.x?this.pet.atkOffset.x:-this.pet.atkOffset.x),this._v2.y=o.y-e.y+this.pet.atkOffset.y,this._v2.len()<20)return this.pet.updateScale(o.x-e.x,0),void this.atk();var n=this.pet.moveSpeed*t,i=Math.atan2(this._v2.y,this._v2.x),r=Math.cos(i)*n,s=Math.sin(i)*n;this.pet.node.x+=r,this.pet.node.y+=s,this.pet.updateScale(r,s),this.pet.playAnimation("run")}else this.pet.switchState(a.Idle)},e}(h);cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Utils/Utils":"Utils","../../Component/PetComponent":"PetComponent"}],ComWarnBox:[function(t,e,o){"use strict";cc._RF.push(e,"1cbe3eKsOlLJLcbGCnB3hAO","ComWarnBox");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./WarnBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box1=null,e.box2=null,e}return i(e,t),e.prototype.setWarn=function(e,o){var n=this;t.prototype.setWarn.call(this,e,o),this.node.setPosition(e.pos),this.node.angle=cc.math.toDegree(e.radian),this.box1.width=e.width,this.box1.height=e.range,this.box2.width=e.width,this.box2.height=0;var i=e.dur;cc.tween(this.box2).to(i,{height:e.range}).call(function(){o(),n._info=null,n._callback=null}).start()},e.prototype.pause=function(){this.box2.pauseAllActions()},e.prototype.resume=function(){this.box2.resumeAllActions()},r([l(cc.Node)],e.prototype,"box1",void 0),r([l(cc.Node)],e.prototype,"box2",void 0),r([c],e)}(a.default);o.default=p,cc._RF.pop()},{"./WarnBase":"WarnBase"}],ComWarnCircle:[function(t,e,o){"use strict";cc._RF.push(e,"90961K19gJLsYtWMdVNu8Zu","ComWarnCircle");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./WarnBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circle1=null,e.circle2=null,e}return i(e,t),e.prototype.setWarn=function(e,o){var n=this;t.prototype.setWarn.call(this,e,o),this.node.setPosition(e.pos);var i=2*e.range;this.circle1.width=i,this.circle1.height=i,this.circle2.width=0,this.circle2.height=0;var r=e.dur;cc.tween(this.circle2).to(r,{height:i,width:i}).call(function(){o(),n._info=null,n._callback=null}).start()},e.prototype.pause=function(){this.circle2.pauseAllActions()},e.prototype.resume=function(){this.circle2.resumeAllActions()},r([l(cc.Node)],e.prototype,"circle1",void 0),r([l(cc.Node)],e.prototype,"circle2",void 0),r([c],e)}(a.default);o.default=p,cc._RF.pop()},{"./WarnBase":"WarnBase"}],ComWeaponBanyue:[function(t,e,o){"use strict";cc._RF.push(e,"4a8b1mc0wZCmYefw2OIIn3V","ComWeaponBanyue");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.2,e._curFireCount=0,e._radian=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer)},e.prototype.fire=function(e,o){void 0===o&&(o=0),e.radian=this._radian,t.prototype.fire.call(this,e,o)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),this._curFireStampDelta=this._weaponInfo.weaponAttrs[0].delay,s.AchievementModel.inst.updatePoint(25,this._weaponInfo.getLevel())},e.prototype.update=function(t){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._curFireCount=o}}else this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this._radian=Math.atan2(this._game.orientation.y,this._game.orientation.x),this.fire({target:this._game.player.node}))},r([p],e)}(c.WeaponBase));o.default=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","./WeaponBase":"WeaponBase"}],ComWeaponBishou:[function(t,e,o){"use strict";cc._RF.push(e,"e2164eX5flHl6NUbEtuBQO1","ComWeaponBishou");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponBishou=void 0;var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:c.GameModel.inst.player.node}),s.AchievementModel.inst.updatePoint(9,this._weaponInfo.getLevel())},e.prototype.fire=function(e,o){void 0===o&&(o=0);for(var n=this._weaponInfo.getBulletCount(),i=0;i<n;i++)t.prototype.fire.call(this,e,o)},r([u],e)}(l.WeaponBase));o.ComWeaponBishou=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponChushou:[function(t,e,o){"use strict";cc._RF.push(e,"2cd6bn5czFHL7xVvPKeTGIV","ComWeaponChushou");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("../../Model/WeaponModel"),p=t("./Bullet/BulletBase"),u=t("./WeaponBase"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire3Layer=new cc.Node,this._fire3Layer.setParent(a.LayerMgr.inst.BulletLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy(),this._fire3Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return this._fire3Layer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),s.AchievementModel.inst.updatePoint(15,this._weaponInfo.getLevel())},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=this._weaponInfo.getSenior(),i=this.get(n?3+e:e);if(null!=i){i.setParent(this.getBulletParent(e));var r=!1,a=l.WeaponModel.inst.magicAttrs.sp_chushou;a&&a>Math.random()&&(r=!0);var s=i.getComponent(p.BulletBase);t.type=e,t.attrs=this._weaponInfo.weaponAttrs[e],t.doubleScale=r,t.weapon=this._weaponInfo,s.fire(t,function(t){o.put(e,s.node),o.fire2(t,++e)})}},e.prototype.fire2=function(t,e){var o=this;void 0===e&&(e=0);var n=this._weaponInfo.getSenior(),i=this.get(n?3+e:e);if(null!=i){i.setParent(this.getBulletParent(e));var r=i.getComponent(p.BulletBase);t.type=e,t.attrs=this._weaponInfo.weaponAttrs[e],t.weapon=this._weaponInfo,t.hitCallback=function(t){o.fire3(t,e+1)},r.fire(t,function(){o.put(e,r.node)})}},e.prototype.fire3=function(t,e){var o=this;void 0===e&&(e=0);var n=this._weaponInfo.getSenior()?3+e:e,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(e));var r=i.getComponent(p.BulletBase);t.type=e,t.attrs=this._weaponInfo.weaponAttrs[e],t.weapon=this._weaponInfo,r.fire(t,function(){o.put(n,r.node)})}},e.prototype.update=function(t){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findRandMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([h],e)}(u.WeaponBase));o.default=f,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponCommonPet:[function(t,e,o){"use strict";cc._RF.push(e,"9710fRm3oxJcZSfGw9tcpwO","ComWeaponCommonPet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponCommonPet=void 0;var a=t("../../Controller/LayerMgr"),s=t("../../Model/GodPetModel"),c=t("./Bullet/BulletBase"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.damage=0,e.lifeTime=0,e.effectInterval=0,e}return i(e,t),e.prototype.onLoad=function(){for(var t in this._waterLevel=10,this.pfBullet)this.addItemPool(Number(t),this.pfBullet[t]);for(var t in this.pfSeniorBullet)this.addItemPool(3+Number(t),this.pfSeniorBullet[t])},e.prototype.getAttrFromCfg=function(){},e.prototype.updateAttrs=function(){},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this.node.parent;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=this.get(e);if(null!=n){n.setParent(this.getBulletParent(e)),this.setParam(t,e);var i=t.atkEnd,r=n.getComponent(c.BulletBase);r.fire(t,function(t){o.onFireAfter(t,e,e,r.node),i&&i()})}},e.prototype.setParam=function(t){t.weapon=this,t.damage=this.damage,t.lifeTime=this.lifeTime,t.effectInterval=this.effectInterval},e.prototype.onFireAfter=function(t,e,o,n){this.put(o,n)},e.prototype.getDamage=function(t){var e;return void 0===t&&(t=0),(null===(e=s.GodPetModel.inst.cur)||void 0===e?void 0:e.atk)||0},e.prototype.getCrit=function(){var t;return(null===(t=s.GodPetModel.inst.cur)||void 0===t?void 0:t.crit)||0},e.prototype.getCritDamage=function(){var t;return(null===(t=s.GodPetModel.inst.cur)||void 0===t?void 0:t.critDamage)||0},r([u],e)}(l.WeaponBase));o.ComWeaponCommonPet=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GodPetModel":"GodPetModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponCommon:[function(t,e,o){"use strict";cc._RF.push(e,"1d1584mYMxHWLohm88ipI/x","ComWeaponCommon");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponCommon=void 0;var a=t("../../Controller/LayerMgr"),s=t("../../Model/GameModel"),c=t("../../Model/WeaponModel"),l=t("./Bullet/BulletBase"),p=t("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){for(var t in this._waterLevel=10,this.pfBullet)this.addItemPool(Number(t),this.pfBullet[t]);for(var t in this.pfSeniorBullet)this.addItemPool(3+Number(t),this.pfSeniorBullet[t])},e.prototype.updateAttrs=function(){},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return a.LayerMgr.inst.BulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=this.get(e);if(null!=n){n.setParent(this.getBulletParent(e));var i=n.getComponent(l.BulletBase);t.weapon=this,t.direct=cc.v2(this._game.orientation.x>0?1:-1,0),i.fire(t,function(){o.put(e,i.node)}),(c.WeaponModel.inst.magicAttrs.a_patk2_v||0)<=0||this.scheduleOnce(function(){var n=o.get(e);if(null!=n){n.setParent(o.getBulletParent(e));var i=n.getComponent(l.BulletBase);t.weapon=o,t.direct=cc.v2(o._game.orientation.x>0?-1:1,0),i.fire(t,function(){o.put(e,i.node)})}},.3)}},e.prototype.getDamage=function(t){return void 0===t&&(t=0),1},e.prototype.getCrit=function(){return s.GameModel.inst.player.crit+(c.WeaponModel.inst.magicAttrs.a_crit_p||0)},e.prototype.getCritDamage=function(){return 2+(c.WeaponModel.inst.magicAttrs.a_critdmg_p||0)},r([d],e)}(p.WeaponBase));o.ComWeaponCommon=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponDasuan:[function(t,e,o){"use strict";cc._RF.push(e,"99800PN4FpAn60/baU0kit5","ComWeaponDasuan");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponDasuan=void 0;var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("./Bullet/BulletBase"),p=t("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:c.GameModel.inst.player.node}),s.AchievementModel.inst.updatePoint(17,this._weaponInfo.getLevel())},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return a.LayerMgr.inst.BulletLayer;case 1:return a.LayerMgr.inst.BulletLayer2;case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=this._weaponInfo.getSenior(),i=n?3+e:e,r=this.get(i);if(null!=r){r.setParent(this.getBulletParent(n?1:0));var a=r.getComponent(l.BulletBase);t.type=e,t.attrs=this._weaponInfo.weaponAttrs[e],t.weapon=this._weaponInfo,a.fire(t,function(t){o.put(i,a.node),o.fire(t,++e)})}},r([d],e)}(p.WeaponBase));o.ComWeaponDasuan=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponDianwang:[function(t,e,o){"use strict";cc._RF.push(e,"a77d27zkWhLiotpQLf7+jVZ","ComWeaponDianwang");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/GameModel"),c=t("./Bullet/BulletBase"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy()},e.prototype.build=function(t){var e=0,o=Math.atan2(this._game.orientation.y,this._game.orientation.x);(o>.7853981633974483&&o<2.356194490192345||o<-.7853981633974483&&o>-2.356194490192345)&&(e=1);for(var n=this._bulletCount,i=0;i<n;i++){var r=Object.assign({},t);r.pos=this._game.player.node.getPosition(),0==e?r.pos.x+=150*i-150*Math.floor(n/2):r.pos.y+=150*i-150*Math.floor(n/2),this.fire(r,e)}},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=e,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(e));var r=i.getComponent(c.BulletBase);t.type=e,t.attrs=this._weaponInfo.weaponAttrs[0],t.weapon=this._weaponInfo,r.fire(t,function(){o.put(n,r.node)})}},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},e.prototype.update=function(t){this._game.isPause||this._game.buildGCD>0||(this._fireStamp+=t,this._fireStamp>=this._interval&&(this._fireStamp=0,this._game.buildGCD=1,this.build({target:s.GameModel.inst.player.node})))},r([u],e)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponDraw1:[function(t,e,o){"use strict";cc._RF.push(e,"b5d17a7LmpGIpeWoko1oPr3","ComWeaponDraw1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Model/GameModel"),s=t("./WeaponDrawBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},e.prototype.update=function(t){if(!this._game.isPause&&this._activeTime>0)if(this._activeTime-=t,0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._targetList=a.GameModel.inst.findRandMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([l],e)}(s.WeaponDrawBase));o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel","./WeaponDrawBase":"WeaponDrawBase"}],ComWeaponDraw2:[function(t,e,o){"use strict";cc._RF.push(e,"6db30fAB6pLMpBROV7bZdwQ","ComWeaponDraw2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./WeaponDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},e.prototype.fire=function(e,o){void 0===o&&(o=0);var n=this._bulletCount,i=this._curTargetIdx,r=Math.atan2(this._game.orientation.y,this._game.orientation.x);r-=cc.math.toRadian(30*i-30*Math.floor(n/2)),e.radian=r,t.prototype.fire.call(this,e,o)},e.prototype.update=function(t){if(!this._game.isPause&&this._activeTime>0)if(this._activeTime-=t,0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._curTargetIdx=0,this._curFireCount=o}}else this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.fire({target:this._game.player.node}),this._curTargetIdx++)},r([c],e)}(a.WeaponDrawBase));o.default=l,cc._RF.pop()},{"./WeaponDrawBase":"WeaponDrawBase"}],ComWeaponDraw3:[function(t,e,o){"use strict";cc._RF.push(e,"077e5tukx9By7Vmi2uptM4U","ComWeaponDraw3");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./WeaponDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},e.prototype.update=function(t){if(!this._game.isPause&&this._activeTime>0)if(this._activeTime-=t,0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._curTargetIdx=0,this._curFireCount=o}}else this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.fire({target:this._game.player.node}))},r([c],e)}(a.WeaponDrawBase));o.default=l,cc._RF.pop()},{"./WeaponDrawBase":"WeaponDrawBase"}],ComWeaponFeidao:[function(t,e,o){"use strict";cc._RF.push(e,"5acc4mG6zFBBZ9UnZi7Y5GP","ComWeaponFeidao");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer2)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),s.AchievementModel.inst.updatePoint(12,this._weaponInfo.getLevel())},e.prototype.update=function(t){if(!this._game.isPause){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0;for(var n=0;n<o;n++){var i=this._targetList[this._curTargetIdx++];null!=i&&null!=i.parent&&this.fire({target:i})}}}},r([u],e)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponFreezeAll:[function(t,e,o){"use strict";cc._RF.push(e,"d6ca9hdNf9OLq2YhKVOx7X9","ComWeaponFreezeAll");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Model/GameModel"),s=t("./WeaponBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._interval=0,e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval()},e.prototype.update=function(t){this._game.isPause||(this._fireStamp+=t,this._fireStamp>=this._interval&&(this._fireStamp=0,this.fire({target:a.GameModel.inst.player.node})))},r([l],e)}(s.WeaponBase));o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponGunshi:[function(t,e,o){"use strict";cc._RF.push(e,"3e0a6JUnfJHMr8vowhD+tnw","ComWeaponGunshi");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Framework/Audio/AudioMgr"),c=t("../../Model/AchievementModel"),l=t("../../Model/GameModel"),p=t("../../Model/WeaponModel"),u=t("./Bullet/BulletBase"),d=t("./WeaponBase"),h=cc._decorator,f=h.ccclass,_=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curFireCount2=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e._bulletCount2=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.weaponAttrs[0].upCount,this._bulletCount2=this._weaponInfo.weaponAttrs[0].rCount+(p.WeaponModel.inst.magicAttrs.a_gunshi_rcount_v||0),c.AchievementModel.inst.updatePoint(13,this._weaponInfo.getLevel())},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=this._weaponInfo.getSenior()?3+e:e,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(e));var r=i.getComponent(u.BulletBase);t.type=e,t.attrs=this._weaponInfo.weaponAttrs[e],t.weapon=this._weaponInfo,t.hitCallback=function(t){o.fire(t,e+1)},r.fire(t,function(){o.put(n,r.node)})}},e.prototype.update=function(t){if(!this._game.isPause)if(0==this._curFireCount&&0==this._curFireCount2){this._fireStamp+=t;var e=this._interval;this._fireStamp>=e&&(this._fireStamp=0,this._curTargetIdx=0,this._curFireCount=this._bulletCount,this._curFireCount2=this._bulletCount2,s.AudioMgr.inst.playEffectByName("gunshi"))}else this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount>0&&(this._curFireCount--,this.fire({target:l.GameModel.inst.player.node,direct:0})),this._curFireCount2>0&&(this._curFireCount2--,this.fire({target:l.GameModel.inst.player.node,direct:1})))},r([f],e)}(d.WeaponBase));o.default=_,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Framework/Audio/AudioMgr":"AudioMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponHudun:[function(t,e,o){"use strict";cc._RF.push(e,"394b2JrewBOvaM0DPzGHGrn","ComWeaponHudun");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponHudun=void 0;var a=t("../../Controller/LayerMgr"),s=t("../../Model/GameModel"),c=t("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:s.GameModel.inst.player.node})},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return a.LayerMgr.inst.BulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},r([p],e)}(c.WeaponBase));o.ComWeaponHudun=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponJianta:[function(t,e,o){"use strict";cc._RF.push(e,"12e9f8SfetIgautvbuymPC6","ComWeaponJianta");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/GameModel"),c=t("./Bullet/BulletBase"),l=t("./Bullet/ComBulletJianta"),p=t("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._interval=0,e._hitCount=0,e._senior=!1,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer2)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.updateAttrs=function(){var e=this;if(t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._hitCount=this._weaponInfo.getHitCount(1),this._senior!=this._weaponInfo.getSenior()){this._senior=!this._senior;var o=[],n=this._senior?0:3,i=this._senior?3:0;this._nodeList[n].forEach(function(t){var i=t.getComponent(l.default)._lifeStamp;o.push(i),e.put(n,t),e.fire({target:t})}),this._nodeList[i].forEach(function(t,e){t.getComponent(l.default)._lifeStamp=o[e]})}else for(var r in this._nodeList)this._nodeList[r].forEach(function(t){return t.emit("update")})},e.prototype.fire=function(e,o){var n=this;void 0===o&&(o=0);var i=this._senior?3+o:o,r=this.get(i);if(null!=r){r.setParent(this.getBulletParent(o));var a=r.getComponent(c.BulletBase);e.type=o,e.attrs=this._weaponInfo.weaponAttrs[o],e.weapon=this._weaponInfo,e.hitCallback=function(e){0==o&&t.prototype.fire.call(n,e,o+1)},a.fire(e,function(){n.put(i,a.node)}),this._senior&&this.fireSenior(e,r)}},e.prototype.onFireAfter=function(t,e,o,n){this.put(o,n)},e.prototype.fireSenior=function(t,e){var o=this;if(this._senior){for(var n=this._nodeList[3],i=[],r=0,a=n;r<a.length;r++){var s=a[r];s!=e&&i.push([e,s])}t.attrs=this._weaponInfo.weaponAttrs[1];var l=i.length;l>this._hitCount&&(l=this._hitCount);for(var p=function(e){var n=u.get(5);if(null==n)return{value:void 0};n.setParent(u.getBulletParent(1));var r=Object.assign({},t),a=n.getComponent(c.BulletBase);r.group=i[e],a.fire(r,function(){o.put(5,a.node)})},u=this,d=0;d<l;d++){var h=p(d);if("object"==typeof h)return h.value}}},e.prototype.update=function(t){this._game.isPause||this._game.buildGCD>0||(this._fireStamp+=t,this._fireStamp>=this._interval&&(this._fireStamp=0,this._game.buildGCD=1,this.fire({target:s.GameModel.inst.player.node})))},r([d],e)}(p.WeaponBase));o.default=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./Bullet/ComBulletJianta":"ComBulletJianta","./WeaponBase":"WeaponBase"}],ComWeaponJianyu:[function(t,e,o){"use strict";cc._RF.push(e,"6c704WWCaRPeIydCOa/QJ5e","ComWeaponJianyu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e._hitCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},e.prototype.fire=function(e,o){void 0===o&&(o=0);for(var n=this._bulletCount,i=(this._weaponInfo.getAoeRange(),this._weaponInfo.weaponAttrs[o].upPos),r=this._weaponInfo.weaponAttrs[o].rPos,a=this._weaponInfo.weaponAttrs[o].upCount,s=this._game.player.node.getPosition(),c=e.target.getPosition(),l=cc.v2(n/2/a*i,a/2*r),p=s.x>c.x,u=0;u<n;u++){var d=c.add(cc.v2(u*(p?i:-i)-(p?l.x:-l.x),(u+1)%a*r-l.y)),h=Object.assign(e);h.pos=d,h.index=u,h.angle=p?-80:-100,t.prototype.fire.call(this,h,o)}},e.prototype.onFireAfter=function(t,e,o,n){this.put(o,n)},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),this._hitCount=this._weaponInfo.getHitCount(),s.AchievementModel.inst.updatePoint(27,this._weaponInfo.getLevel())},e.prototype.update=function(t){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._hitCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],e)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponJiguang:[function(t,e,o){"use strict";cc._RF.push(e,"f59395VKUBL2ZFJAUXDOpmC","ComWeaponJiguang");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),s.AchievementModel.inst.updatePoint(19,this._weaponInfo.getLevel())},e.prototype.update=function(t){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],e)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponLeidian:[function(t,e,o){"use strict";cc._RF.push(e,"7fdd4MhvVBFsK0HM/czXL2s","ComWeaponLeidian");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e._fire1Layer=null,e._fire2Layer=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer2)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer}},e.prototype.onFireAfter=function(t,e,o,n){this.put(o,n)},e.prototype.updateAttrs=function(){var e=this;if(t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),this._weaponInfo.getSenior())for(var o=this._weaponInfo.getBulletCount(1)-this.getNodeList(4).length,n=0;n<o;n++)this.fire({},1);else this.getNodeList(4).forEach(function(t){return e.put(4,t)}),this.getNodeList(4).length=0;s.AchievementModel.inst.updatePoint(23,this._weaponInfo.getLevel())},e.prototype.update=function(t){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],e)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponLiuxingchui:[function(t,e,o){"use strict";cc._RF.push(e,"dfc8bt9HHVJpaIUvEx/FBQE","ComWeaponLiuxingchui");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponLiuxingchui=void 0;var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bulletCount=0,e}return i(e,t),e.prototype.fire=function(e,o){void 0===o&&(o=0);for(var n=this._bulletCount,i=0;i<n;i++)e.startAngle=i*Math.floor(360/n),t.prototype.fire.call(this,e,o)},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._bulletCount=this._weaponInfo.getBulletCount(),this.recycle(),this.fire({target:c.GameModel.inst.player.node}),s.AchievementModel.inst.updatePoint(10,this._weaponInfo.getLevel())},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return a.LayerMgr.inst.PlayerBulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},r([u],e)}(l.WeaponBase));o.ComWeaponLiuxingchui=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponMozhua:[function(t,e,o){"use strict";cc._RF.push(e,"faaeeZ0+iNNwIu0JyUqAFEB","ComWeaponMozhua");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),s.AchievementModel.inst.updatePoint(16,this._weaponInfo.getLevel())},e.prototype.update=function(t){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],e)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponQiang:[function(t,e,o){"use strict";cc._RF.push(e,"005e7fZnqdDoZ+NbbXq4Sim","ComWeaponQiang");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/GameModel"),c=t("./Bullet/BulletBase"),l=t("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy()},e.prototype.build=function(t){var e=0,o=Math.atan2(this._game.orientation.y,this._game.orientation.x);(o>.7853981633974483&&o<2.356194490192345||o<-.7853981633974483&&o>-2.356194490192345)&&(e=1);for(var n=this._bulletCount,i=0;i<n;i++){var r=Object.assign({},t);r.pos=this._game.player.node.getPosition(),0==e?r.pos.x+=200*i-200*Math.floor(n/2):r.pos.y+=200*i-200*Math.floor(n/2),this.fire(r,e)}},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=e,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(e));var r=i.getComponent(c.BulletBase);t.type=e,t.attrs=this._weaponInfo.weaponAttrs[0],t.weapon=this._weaponInfo,r.fire(t,function(){o.put(n,r.node)})}},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},e.prototype.update=function(t){this._game.isPause||this._game.buildGCD>0||(this._fireStamp+=t,this._fireStamp>=this._interval&&(this._fireStamp=0,this._game.buildGCD=1,this.build({target:s.GameModel.inst.player.node})))},r([u],e)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponQuan:[function(t,e,o){"use strict";cc._RF.push(e,"1b910szer5Ob7hnFpzdFoNk","ComWeaponQuan");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/AchievementModel"),c=t("../../Model/GameModel"),l=t("./Bullet/BulletBase"),p=t("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._seniorStamp=cc.macro.REPEAT_FOREVER,e._curSeniorStamp=0,e._curSeniorStampDelta=.1,e._curSeniorCount=0,e._curSeniorIdx=0,e._interval=0,e._bulletCount=0,e._senior=!1,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),this._senior=this._weaponInfo.getSenior(),s.AchievementModel.inst.updatePoint(26,this._weaponInfo.getLevel())},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=this._weaponInfo.getSenior()?3+e:e,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(e));var r=i.getComponent(l.BulletBase);t.type=e,t.attrs=this._weaponInfo.weaponAttrs[e],t.weapon=this._weaponInfo,r.fire(t,function(){o.put(n,r.node)})}},e.prototype.update=function(t){var e=this;if(!this._game.isPause){if(0==this._curFireCount){this._fireStamp+=t;var o=this._interval;if(this._fireStamp>=o){this._fireStamp=0;var n=this._bulletCount;this._targetList=c.GameModel.inst.findRandMonsters(n),this._curTargetIdx=0,this._curFireCount=n}}else if(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var i=this._targetList[this._curTargetIdx++];null!=i&&null!=i.parent&&this.fire({target:i})}if(this._senior)if(0==this._curSeniorCount)this._seniorStamp+=t,o=this._interval,this._seniorStamp>=o&&(this._seniorStamp=0,n=this._bulletCount,this._targetList=c.GameModel.inst.findNearMonsters(n),this._curSeniorIdx=0,this._curSeniorCount=n);else if(this._curSeniorStamp+=t,this._curSeniorStamp>=this._curSeniorStampDelta){this._curSeniorStamp-=this._curSeniorStampDelta,this._curSeniorCount--;var r=this._targetList[this._curSeniorIdx++];if(null!=r&&null!=r.parent){n=this._weaponInfo.weaponAttrs[1].hitCount;for(var a=0;a<n;a++)this.scheduleOnce(function(){return e.fire({target:r},1)},.2*a)}}}},r([d],e)}(p.WeaponBase));o.default=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponShufu:[function(t,e,o){"use strict";cc._RF.push(e,"68ab7OZHc9Nl6ukEVjeDcNj","ComWeaponShufu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/GameModel"),c=t("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e._curFireIdx=0,e}return i(e,t),e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return a.LayerMgr.inst.PlayerBulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.update=function(t){if(!this._game.isPause){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._targetList=s.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0;for(var n=0;n<o;n++){var i=this._targetList[this._curTargetIdx++];if(i){var r=2*-Math.PI/12*this._curFireIdx++;this.fire({target:i,radian:r})}}}}},r([p],e)}(c.WeaponBase));o.default=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponTaijilun:[function(t,e,o){"use strict";cc._RF.push(e,"67253uY+wlNQ5GkIGU6/zPz","ComWeaponTaijilun");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Framework/Audio/AudioMgr"),c=t("../../Model/AchievementModel"),l=t("../../Model/GameModel"),p=t("./Bullet/BulletBase"),u=t("./WeaponBase"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._interval=0,e._seniorStamp=cc.macro.REPEAT_FOREVER,e._seniorInterval=0,e._bulletCount=0,e._isStart=!1,e._isSenior=!1,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);for(var n=this._bulletCount,i=function(t,e){var n=o._weaponInfo.getSenior()?3+e:e,i=o.get(n);if(null!=i){i.setParent(o.getBulletParent(e));var r=i.getComponent(p.BulletBase);t.type=e,t.attrs=o._weaponInfo.weaponAttrs[e],t.weapon=o._weaponInfo,t.shadow=o._fire2Layer,r.fire(t,function(){o.put(n,r.node),o._isStart=!1}),o._isStart=!0}},r=Math.atan2(this._game.orientation.y,this._game.orientation.x),a=0;a<n;a++)t.radian=r+cc.math.toRadian(a*Math.floor(360/n)),i(t,e)},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._seniorInterval=this._weaponInfo.getInterval(1),this._bulletCount=this._weaponInfo.getBulletCount(),this._isSenior=this._weaponInfo.getSenior(),c.AchievementModel.inst.updatePoint(24,this._weaponInfo.getLevel())},e.prototype.update=function(t){this._game.isPause||(this._isSenior&&(this._seniorStamp+=t,this._seniorStamp>=this._seniorInterval&&(this._seniorStamp=0,s.AudioMgr.inst.playEffectByName("taijilun"),this.fire({target:l.GameModel.inst.player.node},1))),this._isStart||(this._fireStamp+=t,this._fireStamp>=this._interval&&(this._fireStamp=0,s.AudioMgr.inst.playEffectByName("taijilun"),this.fire({target:l.GameModel.inst.player.node}))))},r([h],e)}(u.WeaponBase));o.default=f,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Framework/Audio/AudioMgr":"AudioMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponXuanfeng:[function(t,e,o){"use strict";cc._RF.push(e,"79845LHMAJKO4NWifxApegX","ComWeaponXuanfeng");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Define/EventId"),c=t("../../Framework/Audio/AudioMgr"),l=t("../../Framework/Event/EventMgr"),p=t("../../Model/AchievementModel"),u=t("../../Model/GameModel"),d=t("../../Model/WeaponModel"),h=t("./WeaponBase"),f=cc._decorator,_=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._hitFireStamp=0,e._hitFireInterval=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy()},e.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_PLAYER_HIT,this.onHit,this)},e.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_PLAYER_HIT,this.onHit,this)},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount();var e=d.WeaponModel.inst.magicAttrs.sp_xuanfeng;this._hitFireInterval=e||0,p.AchievementModel.inst.updatePoint(14,this._weaponInfo.getLevel())},e.prototype.onHit=function(){0!=this._hitFireInterval&&0==this._hitFireStamp&&(this._hitFireStamp=this._hitFireInterval,this.fire({target:u.GameModel.inst.player.node}))},e.prototype.update=function(t){if(!this._game.isPause)if(this._hitFireStamp>0&&(this._hitFireStamp-=t,this._hitFireStamp<0&&(this._hitFireStamp=0)),0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._curFireCount=o,c.AudioMgr.inst.playEffectByName("xuanfeng")}}else this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.fire({target:u.GameModel.inst.player.node}))},r([_],e)}(h.WeaponBase));o.default=y,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","./WeaponBase":"WeaponBase"}],ComWeaponYunshi:[function(t,e,o){"use strict";cc._RF.push(e,"cf654JZp5hPZ5/zyYP0YH4W","ComWeaponYunshi");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/GameModel"),c=t("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetList=[],e._fireStamp=cc.macro.REPEAT_FOREVER,e._curFireStamp=0,e._curFireStampDelta=.1,e._curFireCount=0,e._curTargetIdx=0,e._interval=0,e._bulletCount=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer),this._fire3Layer=new cc.Node,this._fire3Layer.setParent(a.LayerMgr.inst.EffectLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy(),this._fire3Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return this._fire3Layer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},e.prototype.update=function(t){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=t;var e=this._interval;if(this._fireStamp>=e){this._fireStamp=0;var o=this._bulletCount;this._targetList=s.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=t,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([p],e)}(c.WeaponBase));o.default=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponZhengguo:[function(t,e,o){"use strict";cc._RF.push(e,"6a115KF2XBGMI2TpslUm4oo","ComWeaponZhengguo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/LayerMgr"),s=t("../../Model/GameModel"),c=t("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireStamp=cc.macro.REPEAT_FOREVER,e._interval=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this._fire1Layer.destroy()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:return this._fire1Layer;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},e.prototype.updateAttrs=function(){t.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval()},e.prototype.update=function(t){this._game.isPause||this._game.buildGCD>0||(this._fireStamp+=t,this._fireStamp>=this._interval&&(this._fireStamp=0,this._game.buildGCD=1,this.fire({target:s.GameModel.inst.player.node})))},r([p],e)}(c.WeaponBase));o.default=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],CommonToast:[function(t,e,o){"use strict";cc._RF.push(e,"c2ba2y6ZDtG7ZP9ddIgV9aw","CommonToast");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e._isOpening=!1,e._runTime=0,e._tipList=[],e.openTime=0,e.minOpenTime=1,e.maxOpenTime=8,e.isOpeningCount=!1,e.showingNext=!1,e.nowItem=null,e.lastItem=null,e.label=null,e}return i(e,t),Object.defineProperty(e.prototype,"isOpening",{get:function(){return this._isOpening},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.item.active=!1},e.prototype.showTips=function(t){try{if(this.freshWidth(t),this._tipList.push(t),1==this._tipList.length&&0==this._isOpening)this.showingNext=!0,this.item.width=40*t.length+20,this._showNext();else{if(this._tipList.length>2)for(var e=Object.create(null),o=0;o<this._tipList.length;o++)if(e[this._tipList[o]]||this.label&&this._tipList[o]==this.label.string){if(this._tipList.splice(o,1),this._tipList.length<=2)break;o--}else e[this._tipList[o]]=1;this._tipList.length>0&&0==this._isOpening&&0==this.isOpeningCount&&0==this.showingNext&&(this.showingNext=!0,this._showNext())}}catch(n){this.node&&(this.node.active=!1),cc.log("ShowTips",n)}},e.prototype.freshWidth=function(t){this.item.width=40*t.length+20},e.prototype._showNext=function(){this.nowItem?(cc.log("tip\u5b58\u5728"),this.showingNext=!1):(this.nowItem=cc.instantiate(this.item),this.nowItem.parent=this.node,this.nowItem.active=!0,this._showOneTip(this._tipList[0])&&(this._tipList.shift(),this.openTime=0),this.showingNext=!1)},e.prototype._showOneTip=function(t){if(cc.log("ShowOneTip"),this._isOpening)return cc.log("\u4e0d\u80fd\u540c\u65f6\u6253\u5f00\u591a\u4e2a\u63d0\u793a"),!1;if(!this.nowItem)return cc.log("\u5f53\u524dtip\u5df2\u9500\u6bc1"),!1;this.isOpeningCount=!0,this._isOpening=!0;var e=this.nowItem.getChildByName("Label");if(e){var o=e.getComponent(cc.Label);o?(this.label=o,o.string=t):cc.log("tip   \u627e\u4e0d\u5230label")}else cc.log("tip   \u627e\u4e0d\u5230 node   label");return this.nowItem.opacity=0,cc.tween(this.nowItem).to(.8,{opacity:255}).start(),cc.tween(this.nowItem).by(.15,{position:cc.v3(0,60)}).start(),!0},e.prototype._removeTips=function(){this.lastItem&&(cc.Tween.stopAllByTarget(this.lastItem),this.lastItem.destroy()),this.lastItem=this.nowItem,this.nowItem=null,this.lastItem&&(cc.tween(this.lastItem).delay(.35).to(.8,{opacity:0},{easing:"quadIn"}).call(this.lastItem.removeFromParent.bind(this)).start(),cc.tween(this.lastItem).by(.25,{position:cc.v3(0,80)}).start()),this._isOpening=!1,this._tipList.length>0&&(this.showingNext=!0,this._showNext())},e.prototype.update=function(t){if(this._runTime+=t,!(this._runTime<.1)&&(this._runTime=0,this._isOpening&&this.isOpeningCount)){if(this.openTime++,this.openTime>this.maxOpenTime)return this.isOpeningCount=!1,void this._removeTips();if(this._tipList.length>0&&this.openTime>this.minOpenTime)return this.isOpeningCount=!1,void this._removeTips()}},r([c(cc.Node)],e.prototype,"item",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Confirm:[function(t,e,o){"use strict";cc._RF.push(e,"ba72fAeNg9IibgU7eIBYR7c","Confirm");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txts=[],e.btnConfirm=null,e.btnCancel=null,e.btnClose=null,e._confirm=null,e._cancel=null,e}return i(e,t),e.prototype.onOpen=function(t,e){var o=e.text,n=e.confirm,i=e.cancel,r=e.close;e.autoClose,null==i&&(this.btnCancel.node.active=!1,this.btnConfirm.node.setPosition(0,this.btnConfirm.node.y),this.btnConfirm.node.width=270),this.btnClose.node.active=r,this.txts.forEach(function(t,e){return t.string=""+o[e]}),this._confirm=n,this._cancel=i},e.prototype.onClickConfirm=function(){this._confirm&&this._confirm(),this.close()},e.prototype.onClickCancel=function(){this._cancel&&this._cancel(),this.close()},r([l(cc.Label)],e.prototype,"txts",void 0),r([l(cc.Button)],e.prototype,"btnConfirm",void 0),r([l(cc.Button)],e.prototype,"btnCancel",void 0),r([l(cc.Button)],e.prototype,"btnClose",void 0),r([c],e)}(a.default);o.default=p,cc._RF.pop()},{"../../Framework/UIBase":"UIBase"}],Define:[function(t,e,o){"use strict";cc._RF.push(e,"9d4e4ZPBHxBDr1UOayG7XXC","Define"),Object.defineProperty(o,"__esModule",{value:!0}),o.EXCHANGE_TYPE=o.BACKGROUND_URL=o.STAGE_ICON_URL=o.SKILL_NAME=o.SKILL_ICON_URL=o.EQUIP_ICON_URL=o.EQUIP_QUALITY_ICON_URL=o.TALENT_ICON_URL_BY_ID=o.TALENT_ICON_URL=o.MONEY_ICON_URL=o.BubbleItemTag=o.ItemId=o.ItemTag=o.StoreExchangeType=o.UnlockType=o.BundleNames=o.Config=void 0,o.Config={debug:!0,debugAD:!1,isAdBanner:!1,isAdNative:!1,isAdInterstitial:!1,refreshAdBanner:0,abTestType:0,abTest:""},o.BundleNames=["Config","Textures","Audio"],function(t){t[t.Idle=0]="Idle",t[t.NotUnlock=1]="NotUnlock",t[t.Max=2]="Max"}(o.UnlockType||(o.UnlockType={})),function(t){t[t.BuildSkill=0]="BuildSkill",t[t.Skill=1]="Skill",t[t.Ride=2]="Ride",t[t.Weapon=3]="Weapon",t[t.Pet=4]="Pet",t[t.Skin=5]="Skin",t[t.Back=6]="Back",t[t.Map=7]="Map"}(o.StoreExchangeType||(o.StoreExchangeType={})),function(t){t[t.ScoreFloatItem=99]="ScoreFloatItem"}(o.ItemTag||(o.ItemTag={})),o.ItemId||(o.ItemId={}),o.BubbleItemTag||(o.BubbleItemTag={}),o.MONEY_ICON_URL={money:"/Common/UI/ui_hb1",Money:"/Common/UI/ui_hb1",rMoney:"/Common/UI/ui_hb2",RMoney:"/Common/UI/ui_hb2",g1Money:"/Common/UI/ui_lbs",G1Money:"/Common/UI/ui_lbs",XiuLian:"/View/XiuLian/img/ui_xljm3",Fu:"/Common/UI/ui_xnhdjm6"},o.TALENT_ICON_URL={0:"/Common/Icon/talentIcon/tb_tf1",1:"/Common/Icon/talentIcon/tb_tf2",2:"/Common/Icon/talentIcon/tb_tf3",3:"/Common/Icon/talentIcon/tb_tf4",4:"/Common/Icon/talentIcon/tb_tf5",5:"/Common/Icon/talentIcon/tb_tf6",6:"/Common/Icon/talentIcon/tb_tf7",7:"/Common/Icon/talentIcon/tb_tf8",8:"/Common/Icon/talentIcon/tb_tf9",9:"/Common/Icon/talentIcon/tb_tf10",10:"/Common/Icon/talentIcon/tb_tf11",11:"/Common/Icon/talentIcon/tb_tf12",12:"/Common/Icon/talentIcon/tb_tf13",13:"/Common/Icon/talentIcon/tb_tf14",14:"/Common/Icon/talentIcon/tb_tf15",15:"/Common/Icon/talentIcon/tb_tf16",16:"/Common/Icon/talentIcon/tb_tf17",17:"/Common/Icon/talentIcon/tb_tf18",18:"/Common/Icon/talentIcon/tb_tf19",19:"/Common/Icon/talentIcon/tb_tf20",20:"/Common/Icon/talentIcon/tb_tf21",21:"/Common/Icon/talentIcon/tb_tf22"},o.TALENT_ICON_URL_BY_ID={a_slevel_v:"/Common/Icon/talentIcon/tb_tf1",s_damage_p:"/Common/Icon/talentIcon/tb_tf2",a_crit_p:"/Common/Icon/talentIcon/tb_tf3",a_dodg_p:"/Common/Icon/talentIcon/tb_tf4",s_cd_p:"/Common/Icon/talentIcon/tb_tf5",a_bspeed_p:"/Common/Icon/talentIcon/tb_tf6",a_range_p:"/Common/Icon/talentIcon/tb_tf7",a_time_p:"/Common/Icon/talentIcon/tb_tf8",s_ehp_p:"/Common/Icon/talentIcon/tb_tf9",a_hps_p:"/Common/Icon/talentIcon/tb_tf10",a_hpm3_p:"/Common/Icon/talentIcon/tb_tf11",a_hlu_p:"/Common/Icon/talentIcon/tb_tf12",a_lucky_p:"/Common/Icon/talentIcon/tb_tf13",a_drop_p:"/Common/Icon/talentIcon/tb_tf14",a_exp_p:"/Common/Icon/talentIcon/tb_tf15",a_pickrange_p:"/Common/Icon/talentIcon/tb_tf16",a_hp_v:"/Common/Icon/talentIcon/tb_tf17",a_hp_p:"/Common/Icon/talentIcon/tb_tf18",a_atk_v:"/Common/Icon/talentIcon/tb_tf19",a_atk_p:"/Common/Icon/talentIcon/tb_tf20",a_critdmg_p:"/Common/Icon/talentIcon/tb_tf21",a_movespeed_v:"/Common/Icon/talentIcon/tb_tf22"},o.EQUIP_QUALITY_ICON_URL={0:"/Common/Icon/equipIcon/ui_itemk1",1:"/Common/Icon/equipIcon/ui_itemk2",2:"/Common/Icon/equipIcon/ui_itemk3",3:"/Common/Icon/equipIcon/ui_itemk4",4:"/Common/Icon/equipIcon/ui_itemk5",5:"/Common/Icon/equipIcon/ui_itemk6",6:"/Common/Icon/equipIcon/ui_itemk7"},o.EQUIP_ICON_URL={0:"/Common/Icon/equipIcon/tb_zb1",1:"/Common/Icon/equipIcon/tb_zb2",2:"/Common/Icon/equipIcon/tb_zb3",3:"/Common/Icon/equipIcon/tb_zb4",4:"/Common/Icon/equipIcon/tb_zb5",5:"/Common/Icon/equipIcon/tb_zb6",6:"/Common/Icon/equipIcon/tb_zb7",7:"/Common/Icon/equipIcon/tb_zb8",8:"/Common/Icon/equipIcon/tb_zb9",9:"/Common/Icon/equipIcon/tb_zb10",10:"/Common/Icon/equipIcon/tb_zb11",11:"/Common/Icon/equipIcon/tb_zb12",12:"/Common/Icon/equipIcon/tb_zb13",13:"/Common/Icon/equipIcon/tb_zb14",14:"/Common/Icon/equipIcon/tb_zb15",15:"/Common/Icon/equipIcon/tb_zb16",16:"/Common/Icon/equipIcon/tb_zb17",17:"/Common/Icon/equipIcon/tb_zb18",18:"/Common/Icon/equipIcon/tb_zb19",19:"/Common/Icon/equipIcon/tb_zb20",20:"/Common/Icon/equipIcon/tb_zb21",21:"/Common/Icon/equipIcon/tb_zb22",22:"/Common/Icon/equipIcon/tb_zb23",23:"/Common/Icon/equipIcon/tb_zb24",24:"/Common/Icon/equipIcon/tb_zb25",25:"/Common/Icon/equipIcon/tb_zb26",26:"/Common/Icon/equipIcon/tb_zb27",27:"/Common/Icon/equipIcon/tb_zb28",28:"/Common/Icon/equipIcon/tb_zb29",29:"/Common/Icon/equipIcon/tb_zb30"},o.SKILL_ICON_URL={dasuan:"/Common/Icon/skillIcon/tb_skill1",liuxingchui:"/Common/Icon/skillIcon/tb_skill2",zhadao:"/Common/Icon/skillIcon/tb_skill3",mozhua:"/Common/Icon/skillIcon/tb_skill4",xuanfeng:"/Common/Icon/skillIcon/tb_skill5",xuedizi:"/Common/Icon/skillIcon/tb_skill6",shufu:"/Common/Icon/skillIcon/tb_skill7",chushou:"/Common/Icon/skillIcon/tb_skill8",hudun:"/Common/Icon/skillIcon/tb_skill9",jiguang:"/Common/Icon/skillIcon/tb_skill10",gunshi:"/Common/Icon/skillIcon/tb_skill11",yunshi:"/Common/Icon/skillIcon/tb_skill12",huojian:"/Common/Icon/skillIcon/tb_skill13",feidao:"/Common/Icon/skillIcon/tb_skill14",bishou:"/Common/Icon/skillIcon/tb_skill15",leidian:"/Common/Icon/skillIcon/tb_skill16",jianta:"/Common/Icon/exchangeIcon/tb_dhjz1",zhengguo:"/Common/Icon/exchangeIcon/tb_dhjz4",qiang:"/Common/Icon/exchangeIcon/tb_dhjz3",dianwang:"/Common/Icon/exchangeIcon/tb_dhjz2",taijilun:"/Common/Icon/skillIcon/tb_skill18",banyue:"/Common/Icon/skillIcon/tb_skill20",quan:"/Common/Icon/skillIcon/tb_skill21",jianyu:"/Common/Icon/skillIcon/tb_skill13"},o.SKILL_NAME={dasuan:"\u6c14\u573a",liuxingchui:"\u6d41\u661f\u9524",zhadao:"\u95f8\u5200",mozhua:"\u9b54\u722a",xuanfeng:"\u65cb\u98ce",xuedizi:"\u8840\u6ef4\u5b50",shufu:"\u5bd2\u51b0",chushou:"\u89e6\u624b",hudun:"\u62a4\u76fe",jiguang:"\u6307",gunshi:"\u6eda\u77f3",yunshi:"\u9668\u77f3",huojian:"\u706b\u7bad",feidao:"\u98de\u5200",bishou:"\u56de\u65cb\u9556",leidian:"\u96f7\u51fb",jianta:"\u4ed9\u4eba\u638c",zhengguo:"\u84b8\u9505",qiang:"\u5899",dianwang:"\u7535\u7f51",taijilun:"\u592a\u6781\u8f6e",banyue:"\u65b0\u6708",quan:"\u62f3",jianyu:"\u7bad\u96e8"},o.STAGE_ICON_URL={0:"/View/StageMap/stageObj/cc1",1:"/View/StageMap/stageObj/cc2",2:"/View/StageMap/stageObj/cc3",3:"/View/StageMap/stageObj/cc4",4:"/View/StageMap/stageObj/cc5",5:"/View/StageMap/stageObj/cc6",6:"/View/StageMap/stageObj/cc7",7:"/View/StageMap/stageObj/cc8",8:"/View/StageMap/stageObj/cc9",9:"/View/StageMap/stageObj/cc1b",10:"/View/StageMap/stageObj/ui_tgyz"},o.BACKGROUND_URL=["/Bg/map1","/Bg/map2","/Bg/map3","/Bg/map4"],function(t){t[t.Skill_0=0]="Skill_0",t[t.Skill_1=1]="Skill_1",t[t.Ride=2]="Ride",t[t.Weapon=3]="Weapon",t[t.Pet=4]="Pet",t[t.Skin=5]="Skin",t[t.Back=6]="Back",t[t.Background=7]="Background"}(o.EXCHANGE_TYPE||(o.EXCHANGE_TYPE={})),cc._RF.pop()},{}],DrawSkill:[function(t,e,o){"use strict";cc._RF.push(e,"54b24nSrC1Pt67ZoBZ36WN7","DrawSkill");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Define/EventId"),c=t("../../../Define/UIDefs"),l=t("../../../Framework/Event/EventMgr"),p=t("../../../Framework/UI/UIFacade"),u=t("../../../Framework/UI/UIMgr"),d=t("../../../Framework/UIBase"),h=t("../../../Model/WeaponModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pages=[],e.toggles=null,e.graphics=null,e.graphics2=null,e.txtDesc=null,e._pageIdx=0,e._width=20,e._color=cc.color(0,0,0),e._tempDrawPoints=[],e._tempDrawPointsAll=[],e._tempDrawColorsAll=[],e._box=null,e._drawId=null,e}return i(e,t),e.prototype.onOpen=function(){var t=this;this.pages.forEach(function(e,o){return e.active=o==t._pageIdx}),this._box=this.graphics.node.getBoundingBoxToWorld(),this.graphics.strokeColor=this._color,this.graphics.node.on(cc.Node.EventType.TOUCH_START,this.onClickDraw,this),this.graphics.node.on(cc.Node.EventType.TOUCH_END,this.onClickDraw,this),this.graphics.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onClickDraw,this),this.graphics.node.on(cc.Node.EventType.TOUCH_MOVE,this.onClickDraw,this),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},e.prototype.onClose=function(){u.default.inst.isUIOpen(c.UIType.SelectWeapon)||u.default.inst.isUIOpen(c.UIType.EliteBox)||u.default.inst.isUIOpen(c.UIType.FightEquip)||l.EVENT.emit(s.EventId.ON_GAME_RESUME)},e.prototype.onClickDraw=function(t){switch(t.type){case cc.Node.EventType.TOUCH_START:break;case cc.Node.EventType.TOUCH_END:case cc.Node.EventType.TOUCH_CANCEL:this._tempDrawColorsAll.push({x:this._color.r,y:this._color.g,z:this._color.b}),this._tempDrawPointsAll.push(this._tempDrawPoints),this._tempDrawPoints=[];break;case cc.Node.EventType.TOUCH_MOVE:var e=t.getLocation();e.x>this._box.xMax&&(e.x=this._box.xMax),e.x<this._box.xMin&&(e.x=this._box.xMin),e.y>this._box.yMax&&(e.y=this._box.yMax),e.y<this._box.yMin&&(e.y=this._box.yMin);var o=this.graphics.node.convertToNodeSpaceAR(e);this.draw(o,this.graphics)}},e.prototype.onClickToggle=function(t){switch(t.node.getSiblingIndex()){case 0:this._color=cc.Color.BLACK;break;case 1:this._color=cc.Color.RED;break;case 2:this._color=cc.Color.YELLOW;break;case 3:this._color=cc.Color.BLUE;break;case 4:this._color=cc.Color.GREEN}this.graphics.strokeColor=this._color},e.prototype.onClickSwitch=function(){var t=this;a.default.inst.showAd("\u6362\u4e2a\u6548\u679c",function(){t._drawId=h.WeaponModel.inst.getRandomDraw(t._drawId),t.txtDesc.string=h.WeaponModel.inst.weaponDrawList[t._drawId][0].desc})},e.prototype.onClickNext=function(){var t=this;switch(this._pageIdx){case 1:if(0==this._tempDrawPointsAll.length)return void p.UIFacade.showToast("\u4f60\u8fd8\u6ca1\u753b\u5462\uff01");h.WeaponModel.inst.tempDrawPointsAll=this._tempDrawPointsAll,h.WeaponModel.inst.tempDrawColorsAll=this._tempDrawColorsAll,this._drawId=h.WeaponModel.inst.getRandomDraw(),this.txtDesc.string=h.WeaponModel.inst.weaponDrawList[this._drawId][0].desc,this.recovery();break;case 2:return l.EVENT.emit(s.EventId.ON_GAME_DRAW_SKILL_LEVEL_UP,this._drawId,1),void this.close()}this._pageIdx++,this.pages.forEach(function(e,o){return e.active=o==t._pageIdx})},e.prototype.draw=function(t,e){var o=this._tempDrawPoints.length;if(this._tempDrawPoints.push({x:t.x,y:t.y}),o<=1)e.circle(t.x,t.y,this._width/2),e.fill();else{var n=this._tempDrawPoints[o-2],i=this._tempDrawPoints[o-1];e.moveTo(n.x,n.y),e.lineTo(i.x,i.y),e.lineWidth=this._width,e.lineCap=cc.Graphics.LineCap.ROUND,e.lineJoin=cc.Graphics.LineJoin.ROUND,e.strokeColor=this._color,e.stroke()}},e.prototype.recovery=function(){var t=this._tempDrawPointsAll.concat();for(var e in t){var o=t[e],n=this._tempDrawColorsAll[e];this._color=cc.color(n.x,n.y,n.z);for(var i=0,r=o;i<r.length;i++){var a=r[i];this.draw(a,this.graphics2)}this._tempDrawPoints=[]}},r([y([cc.Node])],e.prototype,"pages",void 0),r([y(cc.ToggleContainer)],e.prototype,"toggles",void 0),r([y(cc.Graphics)],e.prototype,"graphics",void 0),r([y(cc.Graphics)],e.prototype,"graphics2",void 0),r([y(cc.Label)],e.prototype,"txtDesc",void 0),r([_],e)}(d.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/WeaponModel":"WeaponModel"}],EliteBox:[function(t,e,o){"use strict";cc._RF.push(e,"b20b265LaRFdZJuujuwtNm2","EliteBox");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Define/EventId"),c=t("../../../Define/UIDefs"),l=t("../../../Framework/Event/EventMgr"),p=t("../../../Framework/UI/UIMgr"),u=t("../../../Framework/UIBase"),d=t("../../../Model/WeaponModel"),h=t("./SelectWeaponItem"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectWeapons=[],e.spine=null,e.content=null,e.ani=null,e._skillList=[],e}return i(e,t),e.prototype.onOpen=function(){var t=this;this.content.active=!1;var e=this.spine.setAnimation(0,"idle2",!1);this.spine.setTrackCompleteListener(e,function(){t.spine.setAnimation(0,"idle3",!0)}),this.spine.setTrackEventListener(e,function(){t.content.active=!0,t.ani.play()}),this.getWeapon(),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},e.prototype.onClose=function(){p.default.inst.isUIOpen(c.UIType.SelectWeapon)||p.default.inst.isUIOpen(c.UIType.EliteBox)||p.default.inst.isUIOpen(c.UIType.FightEquip)||p.default.inst.isUIOpen(c.UIType.DrawSkill)||l.EVENT.emit(s.EventId.ON_GAME_RESUME)},e.prototype.getWeapon=function(){for(var t=d.WeaponModel.inst.getRandomExtra(1),e=t.length,o=0;o<e;o++){var n=t[o];(i=this.selectWeapons[o]).node.active=!0,i.setInfo(n)}for(;o<this.selectWeapons.length;o++){var i;(i=this.selectWeapons[o]).node.active=!1}this._skillList=t},e.prototype.getWeaponLevelUp=function(){for(var t=0;t<this._skillList.length;t++){var e=this._skillList[t],o=this.selectWeapons[t].node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP_EXTRA,e.id,e.info.lv),l.EVENT.emit(s.EventId.ON_UI_GAME_FLY_SKILL,o,e.id)}},e.prototype.onClickGet=function(){this.getWeaponLevelUp(),this.close()},e.prototype.onClickGetAD=function(){var t=this;a.default.inst.showAd("\u7cbe\u82f1\u5b9d\u7bb1",function(){t.getWeaponLevelUp(),t.getWeaponLevelUp(),t.close()})},r([y([h.default])],e.prototype,"selectWeapons",void 0),r([y(sp.Skeleton)],e.prototype,"spine",void 0),r([y(cc.Node)],e.prototype,"content",void 0),r([y(cc.Animation)],e.prototype,"ani",void 0),r([_],e)}(u.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/WeaponModel":"WeaponModel","./SelectWeaponItem":"SelectWeaponItem"}],EventId:[function(t,e,o){"use strict";cc._RF.push(e,"11b6fpZP7FGr7WF79E8hZzj","EventId"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventId=void 0,o.EventId={ON_NODE_POOL_REUSE:"EventId.ON_NODE_POOL_REUSE",ON_NODE_POOL_UNUSE:"EventId.ON_NODE_POOL_UNUSE",CHANGE_SCENE:"EventId.CHANGE_SCENE",EVENT_CONFIRM:"EventId.EVENT_CONFIRM",ON_ORIENTATION_CHANGE:"EventId.ON_ORIENTATION_CHANGE",ON_UI_OPEN:"EventId.EVENT_ON_UI_OPEN",ON_UI_CLOSE:"EventId.EVENT_ON_UI_CLOSE",ON_UI_OPEN_FAIL:"EventId.ON_UI_OPEN_FAIL",ON_UI_MAIN_FLY_ICON:"EventId.ON_UI_MAIN_FLY_ICON",ON_UI_MAIN_FLY_XIULIAN:"EventId.ON_UI_MAIN_FLY_XIULIAN",ON_UI_GAME_FLY_EQUIP:"EventId.ON_UI_GAME_FLY_EQUIP",ON_UI_GAME_FLY_SKILL:"EventId.ON_UI_GAME_FLY_SKILL",ON_LOGIN_RET:"EventId.ON_LOGIN_RET",ON_UPDATE_LOADING_PROGRESS:"EventId.ON_UPDATE_LOADING_PROGRESS",ON_UPDATE_LOADING_END:"EventId.ON_UPDATE_LOADING_END",ON_UPDATE_LOADING_TTP:"EventId.ON_UPDATE_LOADING_TTP",ON_REFUSE_ITEM_NUM:"ON_REFUSE_ITEM_NUM",ON_REFUSE_STORE:"ON_REFUSE_STORE",ON_REFUSE_TASK:"ON_REFUSE_TASK",ON_GAME_PAUSE:"ON_GAME_PAUSE",ON_GAME_RESUME:"ON_GAME_RESUME",ON_GAME_START:"ON_GAME_START",ON_GAME_LOAD:"ON_GAME_LOAD",ON_GAME_LOADED:"ON_GAME_LOADED",ON_GAME_RESULT:"ON_GAME_RESULT",ON_GAME_OVER:"ON_GAME_OVER",ON_GAME_READY_START:"ON_GAME_READY_START",ON_GAME_READY_END:"ON_GAME_READY_END",ON_GAME_ROUND_START:"ON_GAME_ROUND_START",ON_GAME_ROUND_END:"ON_GAME_ROUND_END",ON_GAME_SKILL_LEVEL_UP:"ON_GAME_SKILL_LEVEL_UP",ON_GAME_SKILL_LEVEL_UP_EXTRA:"ON_GAME_SKILL_LEVEL_UP_EXTRA",ON_GAME_DRAW_SKILL_LEVEL_UP:"ON_GAME_DRAW_SKILL_LEVEL_UP",ON_GAME_SKILL_REFUSE:"ON_GAME_SKILL_REFUSE",ON_GAME_DRAW_SKILL_REFUSE:"ON_GAME_DRAW_SKILL_REFUSE",ON_GAME_PLAYER_HIT:"ON_GAME_PLAYER_HIT",ON_GAME_PLAYER_REVIVE:"ON_GAME_PLAYER_REVIVE",ON_REFRESH_ROLE:"ON_REFRESH_ROLE",ON_REFRESH_RIDE:"ON_REFRESH_RIDE",ON_REFRESH_PET:"ON_REFRESH_PET",ON_REFRESH_SKIN:"ON_REFRESH_SKIN",ON_REFRESH_FIGHT_EQUIP:"ON_REFRESH_FIGHT_EQUIP",ON_GAME_UPDATE_ROLE_POS:"ON_GAME_ROLE_POS",ON_AD_NATIVE_COMPLETE:"EventId.ON_AD_NATIVE_COMPLETE"},cc._RF.pop()},{}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0b580U6y3NDDoFSQ+d5eIuN","EventMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT=void 0;var r=function(t){function e(){return t.call(this)||this}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return e._inst||(e._inst=new e)},enumerable:!1,configurable:!0}),e}(cc.EventTarget);o.EVENT=r.inst,cc._RF.pop()},{}],FightEquipGuide:[function(t,e,o){"use strict";cc._RF.push(e,"d3683pd1ppIS7LASNviemXh","FightEquipGuide");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onOpen=function(){},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],FightEquipItem:[function(t,e,o){"use strict";cc._RF.push(e,"78ae864XXpAeLPn2P+Lt29T","FightEquipItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/Define"),s=t("../../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.spQuality=null,e.txtName=null,e.txtMsg=null,e._data=null,e}return i(e,t),e.prototype.setData=function(t){var e=this;if(null==t)this.icon.spriteFrame=null,this.loadBundleRes("Textures",a.EQUIP_QUALITY_ICON_URL[0],cc.SpriteFrame,function(t,o){var n=e.spQuality.spriteFrame;e.spQuality.spriteFrame=null,e.spQuality.spriteFrame=o,e.releaseAsset(n)}),this.txtName.string="",this.txtMsg.string="";else{this.loadBundleRes("Textures",a.EQUIP_ICON_URL[t.icon-1],cc.SpriteFrame,function(t,o){var n=e.icon.spriteFrame;e.icon.spriteFrame=null,e.icon.spriteFrame=o,e.releaseAsset(n)}),this.loadBundleRes("Textures",a.EQUIP_QUALITY_ICON_URL[t.quality+1],cc.SpriteFrame,function(t,o){var n=e.spQuality.spriteFrame;e.spQuality.spriteFrame=null,e.spQuality.spriteFrame=o,e.releaseAsset(n)});for(var o="",n=0,i=t.desc;n<i.length;n++)o+=i[n]+"\n";switch(this.txtName.string=""+t.name,this.txtMsg.string=""+o,t.quality){case 0:this.txtName.node.color=cc.color(30,255,30),this.txtMsg.node.color=cc.color(30,255,30);break;case 1:this.txtName.node.color=cc.color(0,168,255),this.txtMsg.node.color=cc.color(0,168,255);break;case 2:this.txtName.node.color=cc.color(255,0,255),this.txtMsg.node.color=cc.color(255,0,255);break;case 3:this.txtName.node.color=cc.color(255,155,12),this.txtMsg.node.color=cc.color(255,155,12);break;case 4:this.txtName.node.color=cc.color(255,255,0),this.txtMsg.node.color=cc.color(255,255,0);break;case 5:this.txtName.node.color=cc.color(255,0,0),this.txtMsg.node.color=cc.color(255,0,0)}}this._data=t},r([p(cc.Sprite)],e.prototype,"icon",void 0),r([p(cc.Sprite)],e.prototype,"spQuality",void 0),r([p(cc.Label)],e.prototype,"txtName",void 0),r([p(cc.Label)],e.prototype,"txtMsg",void 0),r([l],e)}(s.default);o.default=u,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/Res/ResKeeper":"ResKeeper"}],FightEquipTips:[function(t,e,o){"use strict";cc._RF.push(e,"869774O8/5O/a8f2KVOcOP9","FightEquipTips");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Framework/Event/EventMgr"),c=t("../../../Framework/UIBase"),l=t("../../../Model/GameModel"),p=t("./FightEquipItem"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e._data=null,e}return i(e,t),e.prototype.onOpen=function(t,e){var o=e;this.item.setData(o),this._data=o},e.prototype.onClickUnEquip=function(){var t=this,e=l.GameModel.inst.fightList.findIndex(function(e){return e&&e.type==t._data.type});delete l.GameModel.inst.fightList[e],s.EVENT.emit(a.EventId.ON_REFRESH_FIGHT_EQUIP),this.close()},r([h(p.default)],e.prototype,"item",void 0),r([d],e)}(c.default);o.default=f,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/GameModel":"GameModel","./FightEquipItem":"FightEquipItem"}],FightEquip:[function(t,e,o){"use strict";cc._RF.push(e,"514823GuQVGAJX7rAws7joM","FightEquip");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/TableMgr"),s=t("../../../Define/Define"),c=t("../../../Define/EventId"),l=t("../../../Define/UIDefs"),p=t("../../../Framework/Event/EventMgr"),u=t("../../../Framework/UI/UIFacade"),d=t("../../../Framework/UI/UIMgr"),h=t("../../../Framework/UIBase"),f=t("../../../Model/AchievementModel"),_=t("../../../Model/GameModel"),y=t("./FightEquipItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cur=null,e.new=null,e.list=[],e.txtEquip=null,e.btnEquip=null,e.btnUnEquip=null,e.btnClose=null,e._data=null,e}return i(e,t),e.prototype.onOpen=function(t,e){var o=this,n=e;if(null==n)this.cur.node.active=!1,this.new.node.active=!1,this.btnEquip.node.active=!1,this.btnUnEquip.node.active=!1,this.btnClose.node.active=!0;else{this.btnClose.node.active=!1;var i=a.TABLE.getTable("FightEquip").find(function(t){return t.id==n});this.new.setData(i),this._data=i;for(var r=0,s=_.GameModel.inst.fightList;r<s.length;r++){var l=s[r];if(null!=l&&l.type==i.type){l.quality<i.quality&&(this.txtEquip.string="\u5347\u7ea7");break}}}this.list.forEach(function(t){return t.node.on(cc.Node.EventType.TOUCH_END,o.onClickItem,o)}),this.updateFightList(),p.EVENT.emit(c.EventId.ON_GAME_PAUSE)},e.prototype.onClose=function(){d.default.inst.isUIOpen(l.UIType.SelectWeapon)||d.default.inst.isUIOpen(l.UIType.EliteBox)||d.default.inst.isUIOpen(l.UIType.DrawSkill)||d.default.inst.isUIOpen(l.UIType.DrawSkill)||p.EVENT.emit(c.EventId.ON_GAME_RESUME)},e.prototype.onEnable=function(){p.EVENT.on(c.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateFightList,this)},e.prototype.onDisable=function(){p.EVENT.off(c.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateFightList,this)},e.prototype.updateFightList=function(){for(var t=0;t<this.list.length;t++)this.list[t].setData(_.GameModel.inst.fightList[t])},e.prototype.onClickItem=function(t){var e=t.target.getSiblingIndex();null!=_.GameModel.inst.fightList[e]&&d.default.inst.open(l.UIType.FightEquipTips,_.GameModel.inst.fightList[e])},e.prototype.onClickEquip=function(){var t=this,e=_.GameModel.inst.fightList.findIndex(function(t){return null==t}),o=_.GameModel.inst.fightList.findIndex(function(e){return e&&e.type==t._data.type});if(o>=0)_.GameModel.inst.fightList[o]=this._data;else{if(!(e>=0))return void u.UIFacade.showToast("\u9053\u5177\u680f\u5df2\u6ee1");_.GameModel.inst.fightList[e]=this._data}f.AchievementModel.inst.updatePoint(2,this._data.id),null!=this._data.skill&&""!=this._data.skill&&f.AchievementModel.inst.updatePoint(22,this._data.id),p.EVENT.emit(c.EventId.ON_REFRESH_FIGHT_EQUIP);var n=this.cur.node.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(c.EventId.ON_UI_GAME_FLY_EQUIP,n,this._data),this.close()},e.prototype.onClickUnEquip=function(){this.close()},e.prototype.onClickEquipGuide=function(){s.Config.isAdBanner?d.default.inst.open(l.UIType.FightEquipGuideB):d.default.inst.open(l.UIType.FightEquipGuide)},r([v(y.default)],e.prototype,"cur",void 0),r([v(y.default)],e.prototype,"new",void 0),r([v([y.default])],e.prototype,"list",void 0),r([v(cc.Label)],e.prototype,"txtEquip",void 0),r([v(cc.Button)],e.prototype,"btnEquip",void 0),r([v(cc.Button)],e.prototype,"btnUnEquip",void 0),r([v(cc.Button)],e.prototype,"btnClose",void 0),r([m],e)}(h.default);o.default=M,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/AchievementModel":"AchievementModel","../../../Model/GameModel":"GameModel","./FightEquipItem":"FightEquipItem"}],GameBase:[function(t,e,o){"use strict";cc._RF.push(e,"bc33cnjl0dCSavtH+OorQYU","GameBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameBase=void 0;var a=t("../Define/EventId"),s=t("../Framework/Event/EventMgr"),c=t("../Framework/Res/ResKeeperAddition"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this),s.EVENT.on(a.EventId.ON_GAME_START,this.gameStart,this),s.EVENT.on(a.EventId.ON_GAME_LOAD,this.gameLoad,this),s.EVENT.on(a.EventId.ON_GAME_RESULT,this.gameResult,this),s.EVENT.on(a.EventId.ON_GAME_OVER,this.gameOver,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this),s.EVENT.off(a.EventId.ON_GAME_START,this.gameStart,this),s.EVENT.off(a.EventId.ON_GAME_LOAD,this.gameLoad,this),s.EVENT.off(a.EventId.ON_GAME_RESULT,this.gameResult,this),s.EVENT.off(a.EventId.ON_GAME_OVER,this.gameOver,this)},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.gameStart=function(){},e.prototype.gameLoad=function(){},e.prototype.gameResult=function(){},e.prototype.gameOver=function(){},r([p],e)}(c.default));o.GameBase=u,cc._RF.pop()},{"../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Res/ResKeeperAddition":"ResKeeperAddition"}],GameItemBase:[function(t,e,o){"use strict";cc._RF.push(e,"4eb96tDM/lJcrdWMMo1pI4Y","GameItemBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameItemBase=void 0;var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this._info=t},e.prototype.recycle=function(){},r([s],e)}(cc.Component));o.GameItemBase=c,cc._RF.pop()},{}],GameItemMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ce113njI2JEMLy6Z50zXB+1","GameItemMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s,c=t("../Framework/Res/ResKeeperAddition"),l=t("../Game/Items/ComHitBeEffect"),p=t("../Game/Items/ComHitEffect"),u=t("../Game/Items/ComHitNum"),d=t("../Game/Items/HpBar"),h=t("../Model/GameModel"),f=t("./GameItemBase"),_=t("./LayerMgr"),y=cc._decorator;y.ccclass,y.property,function(t){t[t.HitBeEffect=0]="HitBeEffect",t[t.HitEffect=1]="HitEffect",t[t.HitMiss=2]="HitMiss",t[t.HitNum=3]="HitNum",t[t.HitNumC=4]="HitNumC",t[t.PickUpBox=5]="PickUpBox",t[t.PickUpEquip=6]="PickUpEquip",t[t.PickUpExp=7]="PickUpExp",t[t.PickUpLbs=8]="PickUpLbs",t[t.PickUpFood=9]="PickUpFood",t[t.Revive=10]="Revive",t[t.HpBar=11]="HpBar",t[t.HpBar2=12]="HpBar2"}(s||(s={}));var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return this._inst||(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),e.prototype.init=function(){return r(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.loadItemPool(s.HitBeEffect,"Prefabs","/Game/Items/HitBeEffect",f.GameItemBase)];case 1:return t.sent(),[4,this.loadItemPool(s.HitEffect,"Prefabs","/Game/Items/HitEffect",f.GameItemBase)];case 2:return t.sent(),[4,this.loadItemPool(s.HitMiss,"Prefabs","/Game/Items/HitMiss",f.GameItemBase)];case 3:return t.sent(),[4,this.loadItemPool(s.HitNum,"Prefabs","/Game/Items/HitNum",f.GameItemBase)];case 4:return t.sent(),[4,this.loadItemPool(s.HitNumC,"Prefabs","/Game/Items/HitNumC",f.GameItemBase)];case 5:return t.sent(),[4,this.loadItemPool(s.PickUpBox,"Prefabs","/Game/Items/PickUpBox",f.GameItemBase)];case 6:return t.sent(),[4,this.loadItemPool(s.PickUpEquip,"Prefabs","/Game/Items/PickUpEquip",f.GameItemBase)];case 7:return t.sent(),[4,this.loadItemPool(s.PickUpExp,"Prefabs","/Game/Items/PickUpExp",f.GameItemBase)];case 8:return t.sent(),[4,this.loadItemPool(s.PickUpLbs,"Prefabs","/Game/Items/PickUpLbs",f.GameItemBase)];case 9:return t.sent(),[4,this.loadItemPool(s.PickUpFood,"Prefabs","/Game/Items/PickUpFood",f.GameItemBase)];case 10:return t.sent(),[4,this.loadItemPool(s.Revive,"Prefabs","/Game/Items/Revive")];case 11:return t.sent(),[4,this.loadItemPool(s.HpBar,"Prefabs","/Game/Items/HpBar")];case 12:return t.sent(),[4,this.loadItemPool(s.HpBar2,"Prefabs","/Game/Items/HpBar2")];case 13:return t.sent(),[2]}})})},e.prototype.generateHitNum=function(t,e){var o=this,n=s.HitNum,i=this.get(n),r=_.LayerMgr.inst.TopLayer;i.setParent(r);var a=30*Math.random()-15;i.setPosition(t.x+a,t.y+a);var c=i.getComponent(u.default);return c.play(e),c.recycle=function(){return o.put(n,i)},i},e.prototype.generateHitNumC=function(t,e){var o=this,n=s.HitNumC,i=this.get(n),r=_.LayerMgr.inst.TopLayer;i.setParent(r);var a=30*Math.random()-15;i.setPosition(t.x+a,t.y+a);var c=i.getComponent(u.default);return c.play(e),c.recycle=function(){return o.put(n,i)},i},e.prototype.generateHitMiss=function(t){var e=this,o=s.HitMiss,n=this.get(o),i=_.LayerMgr.inst.TopLayer;n.setParent(i);var r=30*Math.random()-15;n.setPosition(t.x+r,t.y+r);var a=n.getComponent(u.default);return a.play(0),a.recycle=function(){return e.put(o,n)},n},e.prototype.generateHitEffect=function(t){var e=this,o=s.HitEffect,n=this.get(o),i=_.LayerMgr.inst.TopLayer;n.setParent(i),n.setPosition(t.x,t.y);var r=n.getComponent(p.ComHitEffect);return r.playAnim(),r.recycle=function(){return e.put(o,n)},n},e.prototype.generateHitBeEffect=function(t){var e=this,o=s.HitBeEffect,n=this.get(o),i=_.LayerMgr.inst.TopLayer;n.setParent(i),n.setPosition(t.x,t.y);var r=n.getComponent(l.ComHitBeEffect);return r.playAnim(),r.recycle=function(){return e.put(o,n)},n},e.prototype.generateBox=function(t){var e=this,o=s.PickUpBox,n=this.get(o),i=_.LayerMgr.inst.Equip1Layer;return n.setParent(i),n.setPosition(t.x,t.y),n.getComponent(f.GameItemBase).recycle=function(){return e.put(o,n)},n},e.prototype.generateEquip=function(t,e){var o=this,n=s.PickUpEquip,i=this.get(n),r=_.LayerMgr.inst.Equip2Layer;i.setParent(r),i.setPosition(t.x,t.y);var a=i.getComponent(f.GameItemBase);return a.init(e),a.recycle=function(){return o.put(n,i)},i},e.prototype.generateExp=function(t){var e=this,o=s.PickUpExp,n=this.get(o),i=_.LayerMgr.inst.ItemLayer;return n.setParent(i),n.setPosition(t.x,t.y),n.getComponent(f.GameItemBase).recycle=function(){return e.put(o,n)},n},e.prototype.generateLbs=function(t){var e=this,o=s.PickUpLbs,n=this.get(o),i=_.LayerMgr.inst.ItemLayer;return n.setParent(i),n.setPosition(t.x,t.y),n.getComponent(f.GameItemBase).recycle=function(){return e.put(o,n)},n},e.prototype.generateFood=function(t){var e=this,o=s.PickUpFood,n=this.get(o),i=_.LayerMgr.inst.EquipLayer;return n.setParent(i),n.setPosition(t.x,t.y),n.getComponent(f.GameItemBase).recycle=function(){return e.put(o,n)},n},e.prototype.generateRevive=function(t){var e=this,o=s.Revive,n=this.get(o),i=h.GameModel.inst.player.node;n.setParent(i),n.setPosition(0,0);var r=n.getComponent(sp.Skeleton),a=r.setAnimation(0,r.defaultAnimation,!1);r.setTrackCompleteListener(a,function(){e.put(o,n),t&&t()})},e.prototype.generateHpBar=function(t,e){var o=this;void 0===e&&(e=0);var n=s.HpBar,i=this.get(n),r=_.LayerMgr.inst.HpLayer;i.setParent(r);var a=i.getComponent(d.default);return a.setTarget(t,e),a.recycle=function(){return o.put(n,i)},i},e.prototype.generateHpBar2=function(t,e){var o=this;void 0===e&&(e=0);var n=s.HpBar2,i=this.get(n),r=_.LayerMgr.inst.HpLayer;i.setParent(r);var a=i.getComponent(d.default);return a.setTarget(t,e),a.recycle=function(){return o.put(n,i)},i},e}(c.default);o.default=g,cc._RF.pop()},{"../Framework/Res/ResKeeperAddition":"ResKeeperAddition","../Game/Items/ComHitBeEffect":"ComHitBeEffect","../Game/Items/ComHitEffect":"ComHitEffect","../Game/Items/ComHitNum":"ComHitNum","../Game/Items/HpBar":"HpBar","../Model/GameModel":"GameModel","./GameItemBase":"GameItemBase","./LayerMgr":"LayerMgr"}],GameModel:[function(t,e,o){"use strict";cc._RF.push(e,"17d5ceNpfNF3YpAH2oZtTp6","GameModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameModel=void 0;var n=t("../Controller/TableMgr"),i=t("../Define/EventId"),r=t("../Framework/Event/EventMgr"),a=t("../Framework/Utils/Utils"),s=t("../Framework/VM"),c=t("./WeaponModel"),l=function(){function t(){this.isLoad=!1,this._loadRef=0,this.isGuide=!1,this.isPause=!0,this.isFinished=!1,this._money=0,this._rMoney=0,this._g1Money=0,this._fu=0,this._stage=0,this._wave=0,this._waveMax=0,this._time=0,this._monster=0,this._monsterList=[],this._exp=0,this._level=0,this._fightList=[null,null,null,null,null,null],this._orientation={x:-1,y:0},this._player=null,this._immune=0,this._revive=0,this._buildGCD=0,s.VM.add(this,"GameModel")}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"money",{get:function(){return this._money},set:function(t){this._money=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rMoney",{get:function(){return this._rMoney},set:function(t){this._rMoney=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fightList",{get:function(){return this._fightList},set:function(t){this._fightList=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},set:function(t){this._stage=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wave",{get:function(){return this._wave},set:function(t){this._wave=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g1Money",{get:function(){return this._g1Money},set:function(t){this._g1Money=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"monster",{get:function(){return this._monster},set:function(t){this._monster=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time",{get:function(){return this._time},set:function(t){this._time=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"monsterList",{get:function(){return this._monsterList},set:function(t){this._monsterList=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp=t;var e=n.TABLE.getPlayerLevel()[this._level+1];null!=e&&this._exp>=e&&(this._exp-=e,this._level++,c.WeaponModel.inst.skillPoint++,this.exp=this._exp)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fu",{get:function(){return this._fu},set:function(t){this._fu=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buildGCD",{get:function(){return this._buildGCD},set:function(t){this._buildGCD=t},enumerable:!1,configurable:!0}),t.prototype.getLevelExp=function(){var t=n.TABLE.getPlayerLevel()[this._level+1];return null==t?0:t},Object.defineProperty(t.prototype,"waveMax",{get:function(){return this._waveMax},set:function(t){this._waveMax=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"player",{get:function(){return this._player},set:function(t){this._player=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"immune",{get:function(){return this._immune},set:function(t){this._immune=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"revive",{get:function(){return this._revive},set:function(t){this._revive=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadRef",{get:function(){return this._loadRef},set:function(t){this.isLoad&&(this._loadRef=t,0==this._loadRef&&r.EVENT.emit(i.EventId.ON_GAME_LOADED))},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this._money=0,this._rMoney=0,this._fu=0,this._stage=0,this._wave=0,this._waveMax=0,this._time=0,this._monster=0,this._monsterList=[],this._exp=0,this._level=0,this._fightList=[null,null,null,null,null,null],this._orientation={x:-1,y:0},this._immune=0,this._revive=0,this.isFinished=!1},t.prototype.findRandMonster=function(){var t=[];return this._monsterList.forEach(function(e){return e.hp>0&&t.push(e.node)}),a.default.getRandToArray(t)},t.prototype.findRandMonsters=function(t){var e=[];return this._monsterList.forEach(function(t){return t.hp>0&&e.push(t.node)}),a.default.RandomSome(e,t)},t.prototype.findNearMonsters=function(t){var e=[];this._monsterList.forEach(function(t){return t.hp>0&&e.push(t.node)});var o=this._player.node;e.sort(function(t,e){return cc.Vec2.distance(o,t)-cc.Vec2.distance(o,e)});for(var n=[],i=0;i<t;i++)e[i]&&n.push(e[i]);return n},t.prototype.findDistanceRandMonsters=function(t,e,o){void 0===e&&(e=100),void 0===o&&(o=this._player.node);var n=[];return this._monsterList.forEach(function(t){return t.hp>0&&cc.Vec2.distance(o,t.node)<e&&n.push(t.node)}),a.default.RandomSome(n,t)},t.prototype.findDistanceNearMonsters=function(t,e,o){void 0===e&&(e=100),void 0===o&&(o=this._player.node);var n=[];return this._monsterList.filter(function(t){return t.hp>0&&cc.Vec2.distance(o,t.node)<e&&n.push(t.node)}),n.sort(function(t,e){return cc.Vec2.distance(o,t)-cc.Vec2.distance(o,e)}),n.length>t&&(n.length=t),n},t._inst=null,t}();o.GameModel=l,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Utils/Utils":"Utils","../Framework/VM":"VM","./WeaponModel":"WeaponModel"}],GameOver:[function(t,e,o){"use strict";cc._RF.push(e,"06bb1EonLhCn7mtzfrPQNUu","GameOver");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/AdMgr"),s=t("../../Define/Define"),c=t("../../Define/EventId"),l=t("../../Framework/Audio/AudioMgr"),p=t("../../Framework/Event/EventMgr"),u=t("../../Framework/UIBase"),d=t("../../Model/AchievementModel"),h=t("../../Model/GameModel"),f=t("../../Model/UserModel"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spineBg=null,e.txtTittle=null,e.nodeMoney=null,e.txtMoney=null,e.nodeRMoney=null,e.txtRMoney=null,e.nodeG1Money=null,e.txtG1Money=null,e.nodeFu=null,e.txtFu=null,e.btnRevive=null,e.btnAD=null,e._cbReward=null,e}return i(e,t),e.prototype.onOpen=function(){p.EVENT.emit(c.EventId.ON_GAME_PAUSE),h.GameModel.inst.isFinished||0!=h.GameModel.inst.revive?this.btnRevive.node.active=!1:(this.btnRevive.node.active=!0,this.btnAD.node.active=!1),h.GameModel.inst.isFinished?(f.UserModel.inst.selectStage==f.UserModel.inst.curStage&&(f.UserModel.inst.curStage++,d.AchievementModel.inst.updatePoint(3,f.UserModel.inst.curStage-1)),l.AudioMgr.inst.playEffectByName("stageFinish"),this.spineBg.setAnimation(0,"idle1",!0),this.txtTittle.string="\u5f53\u524d\n\u5956\u52b1"):(l.AudioMgr.inst.playEffectByName("gameOver"),this.spineBg.setAnimation(0,"idle2",!0),this.txtTittle.string="\u901a\u5173\n\u5956\u52b1"),h.GameModel.inst.money>0?(this.nodeMoney.active=!0,this.txtMoney.string="x"+h.GameModel.inst.money):this.nodeMoney.active=!1,h.GameModel.inst.rMoney>0?(this.nodeRMoney.active=!0,this.txtRMoney.string="x"+h.GameModel.inst.rMoney):this.nodeRMoney.active=!1,h.GameModel.inst.g1Money>0?(this.nodeG1Money.active=!0,this.txtG1Money.string="x"+h.GameModel.inst.g1Money):this.nodeG1Money.active=!1,h.GameModel.inst.fu>0?(this.nodeFu.active=!0,this.txtFu.string="x"+h.GameModel.inst.fu):this.nodeFu.active=!1},e.prototype.onClose=function(){this._cbReward&&this._cbReward()},e.prototype.onClickRevive=function(){var t=this;a.default.inst.showAd("\u5c40\u5185\u590d\u6d3b",function(){p.EVENT.emit(c.EventId.ON_GAME_PLAYER_REVIVE),t.close()})},e.prototype.onClickAD=function(){var t=this;a.default.inst.showAd("\u7ed3\u7b97\u5956\u52b1\u591a\u500d",function(){p.EVENT.emit(c.EventId.ON_GAME_OVER),t.onReward(2),t.close()})},e.prototype.onClickExit=function(){s.Config.isAdInterstitial&&a.default.inst.showAdInterstitial("\u7ed3\u7b97\u63d2\u5c4f"),p.EVENT.emit(c.EventId.ON_GAME_OVER),this.onReward(1),this.close()},e.prototype.onReward=function(t){var e=this.nodeMoney.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.nodeRMoney.convertToWorldSpaceAR(cc.Vec2.ZERO),n=this.nodeG1Money.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.nodeFu.convertToWorldSpaceAR(cc.Vec2.ZERO),r=h.GameModel.inst.money*t,a=h.GameModel.inst.rMoney*t,s=h.GameModel.inst.g1Money*t,l=h.GameModel.inst.fu*t;this._cbReward=function(){r&&(p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,e,"Money"),t>1&&p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,o,"Money",null,{delay:.6}),f.UserModel.inst.money+=r),a&&(p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,o,"RMoney"),t>1&&p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,o,"RMoney",null,{delay:.6}),f.UserModel.inst.rMoney+=a),s&&(p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,n,"G1Money"),t>1&&p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,n,"G1Money",null,{delay:.6}),f.UserModel.inst.g1Money+=s),l&&(p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,i,"Fu"),t>1&&p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,i,"Fu",null,{delay:.6}),f.UserModel.inst.fu+=l)}},r([g(sp.Skeleton)],e.prototype,"spineBg",void 0),r([g(cc.Label)],e.prototype,"txtTittle",void 0),r([g(cc.Node)],e.prototype,"nodeMoney",void 0),r([g(cc.Label)],e.prototype,"txtMoney",void 0),r([g(cc.Node)],e.prototype,"nodeRMoney",void 0),r([g(cc.Label)],e.prototype,"txtRMoney",void 0),r([g(cc.Node)],e.prototype,"nodeG1Money",void 0),r([g(cc.Label)],e.prototype,"txtG1Money",void 0),r([g(cc.Node)],e.prototype,"nodeFu",void 0),r([g(cc.Label)],e.prototype,"txtFu",void 0),r([g(cc.Button)],e.prototype,"btnRevive",void 0),r([g(cc.Button)],e.prototype,"btnAD",void 0),r([y],e)}(u.default);o.default=m,cc._RF.pop()},{"../../Controller/AdMgr":"AdMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/UserModel":"UserModel"}],GamePause:[function(t,e,o){"use strict";cc._RF.push(e,"a7f31/CuBpLCoq2AwmY/GLA","GamePause");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GamePause=void 0;var a=t("../../Define/EventId"),s=t("../../Framework/Event/EventMgr"),c=t("../../Framework/UI/UIFacade"),l=t("../../Framework/UIBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onOpen=function(){s.EVENT.emit(a.EventId.ON_GAME_PAUSE)},e.prototype.onClose=function(){s.EVENT.emit(a.EventId.ON_GAME_RESUME)},e.prototype.onClickExit=function(){var t=this;c.UIFacade.showConfirm("\u63d0\u793a","\u662f\u5426\u9000\u51fa\u6e38\u620f\uff1f","\u786e\u5b9a","\u53d6\u6d88").then(function(){s.EVENT.emit(a.EventId.ON_GAME_OVER),t.close()}).catch(function(){})},e.prototype.update=function(){},r([u],e)}(l.default));o.GamePause=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UIBase":"UIBase"}],GameStart:[function(t,e,o){"use strict";cc._RF.push(e,"a8549cWXPpIab8SvmxFdFNB","GameStart");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/EventId"),s=t("../../Framework/Event/EventMgr"),c=t("../../Framework/UIBase"),l=t("../../Controller/ItemMgr"),p=t("../../Model/GodPetModel"),u=t("../../Model/GodRideModel"),d=t("../../Model/GodSkinModel"),h=t("../../Model/GodWeaponModel"),f=t("../../Model/GodBackModel"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spRole=null,e.nodeRole=null,e.nodeRide=null,e.nodePet=null,e.nodeWeapon=null,e.nodeBack=null,e._spaceX=180,e}return i(e,t),e.prototype.onOpen=function(){var t=this;l.default.inst.init(),s.EVENT.emit(a.EventId.ON_GAME_PAUSE),this.nodeWeapon.removeFromParent();var e=this.spRole.attachUtil;e.generateAllAttachedNodes(),e.getAttachedNodes("target_lram")[0].addChild(this.nodeWeapon);var o=e.getAttachedNodes("beishi")[0];this.nodeBack.setSiblingIndex(0),this.nodeBack.scale=1,this.schedule(function(){var e=t.nodeRole.x,n=t.nodeRole.y;e+=o._bone.worldX,n+=o._bone.worldY,t.nodeBack.setPosition(e,n),t.nodeBack.angle=o._bone.getWorldRotationX()}),this.updatePlayer()},e.prototype.onClose=function(){l.default.inst.releaseAutoRes()},e.prototype.onLoad=function(){s.EVENT.on(a.EventId.ON_REFRESH_ROLE,this.updatePlayer,this),s.EVENT.on(a.EventId.ON_REFRESH_RIDE,this.updatePlayer,this),s.EVENT.on(a.EventId.ON_REFRESH_SKIN,this.updatePlayer,this),s.EVENT.on(a.EventId.ON_REFRESH_PET,this.updatePlayer,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),s.EVENT.off(a.EventId.ON_REFRESH_ROLE,this.updatePlayer,this),s.EVENT.off(a.EventId.ON_REFRESH_RIDE,this.updatePlayer,this),s.EVENT.off(a.EventId.ON_REFRESH_SKIN,this.updatePlayer,this),s.EVENT.off(a.EventId.ON_REFRESH_PET,this.updatePlayer,this)},e.prototype.updatePlayer=function(){var t=this;if(d.GodSkinModel.inst.curIdx>0){var e=d.GodSkinModel.inst.getInfo(d.GodSkinModel.inst.curIdx);this.spRole.setSkin("suit"+e.name.match(/\d+/g))}else this.spRole.setSkin("suit0");this.spRole.setAnimation(0,"idle2",!0),this.spRole.defaultAnimation="idle2",this.loadBundleRes("Prefabs",h.GodWeaponModel.inst.getPrefabUrl(h.GodWeaponModel.inst.curIdx),cc.Prefab,function(e,o){var n=cc.instantiate(o);t.nodeWeapon.destroyAllChildren(),t.nodeWeapon.addChild(n);var i=n.getComponent(sp.Skeleton);i.setAnimation(0,"idle1",!0),i.defaultAnimation="idle1"}),f.GodBackModel.inst.curIdx>0?this.loadBundleRes("Prefabs",f.GodBackModel.inst.getPrefabUrl(f.GodBackModel.inst.curIdx),cc.Prefab,function(e,o){var n=cc.instantiate(o);t.nodeBack.destroyAllChildren(),t.nodeBack.addChild(n);var i=n.getComponent(sp.Skeleton);i.setAnimation(0,"idle",!0),i.defaultAnimation="idle"}):this.nodeBack.destroyAllChildren(),this.nodeRide.active=u.GodRideModel.inst.curIdx>0,this.nodeRide.active&&this.loadBundleRes("Prefabs",u.GodRideModel.inst.getPrefabUrl(u.GodRideModel.inst.curIdx),cc.Prefab,function(e,o){var n=cc.instantiate(o);t.nodeRide.destroyAllChildren(),t.nodeRide.addChild(n)}),this.nodePet.active=p.GodPetModel.inst.curIdx>0,this.nodePet.active&&this.loadBundleRes("Prefabs",p.GodPetModel.inst.getPrefabUrl(p.GodPetModel.inst.curIdx),cc.Prefab,function(e,o){var n=cc.instantiate(o);t.nodePet.destroyAllChildren(),t.nodePet.addChild(n)}),this.nodeRide.active&&this.nodePet.active?(this.nodeRole.x=-this._spaceX,this.nodeRide.x=0,this.nodePet.x=this._spaceX):this.nodeRide.active?(this.nodeRole.x=-this._spaceX/2,this.nodeRide.x=this._spaceX/2):this.nodePet.active?(this.nodeRole.x=-this._spaceX/2,this.nodePet.x=this._spaceX/2):this.nodeRole.x=0},r([g(sp.Skeleton)],e.prototype,"spRole",void 0),r([g(cc.Node)],e.prototype,"nodeRole",void 0),r([g(cc.Node)],e.prototype,"nodeRide",void 0),r([g(cc.Node)],e.prototype,"nodePet",void 0),r([g(cc.Node)],e.prototype,"nodeWeapon",void 0),r([g(cc.Node)],e.prototype,"nodeBack",void 0),r([y],e)}(c.default);o.default=m,cc._RF.pop()},{"../../Controller/ItemMgr":"ItemMgr","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase","../../Model/GodBackModel":"GodBackModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel"}],GetG1Money:[function(t,e,o){"use strict";cc._RF.push(e,"83b85evnrxBOItU7TWOK5S/","GetG1Money");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Define/EventId"),c=t("../../../Framework/Event/EventMgr"),l=t("../../../Framework/UIBase"),p=t("../../../Model/StoreModel"),u=t("../../../Model/UserModel"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtNum=null,e._type=-1,e._cb=null,e}return i(e,t),e.prototype.onOpen=function(t,e){this._type=e.type,this._cb=e.cb,this.txtNum.string=""+p.StoreModel.inst.rMoneyNum},e.prototype.onClickAd=function(){var t=this;a.default.inst.showAd("\u8865\u5145\u5143\u5b9d",function(){u.UserModel.inst.g1Money+=p.StoreModel.inst.g1MoneyNum;var e=t.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,e,"G1Money"),t._cb&&t._cb(),t.close()})},r([f(cc.Label)],e.prototype,"txtNum",void 0),r([h],e)}(l.default);o.default=_,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],GetMoney:[function(t,e,o){"use strict";cc._RF.push(e,"78075HhmCpKqJMVsWh0j2/J","GetMoney");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Define/EventId"),c=t("../../../Framework/Event/EventMgr"),l=t("../../../Framework/UIBase"),p=t("../../../Model/StoreModel"),u=t("../../../Model/UserModel"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtNum=null,e._type=-1,e._cb=null,e}return i(e,t),e.prototype.onOpen=function(t,e){this._type=e.type,this._cb=e.cb,this.txtNum.string=""+p.StoreModel.inst.rMoneyNum},e.prototype.onClickAd=function(){var t=this;a.default.inst.showAd("\u8865\u5145\u5143\u5b9d",function(){u.UserModel.inst.rMoney+=p.StoreModel.inst.rMoneyNum;var e=t.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,e,"RMoney"),t._cb&&t._cb(),t.close()})},r([f(cc.Label)],e.prototype,"txtNum",void 0),r([h],e)}(l.default);o.default=_,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],GodBackModel:[function(t,e,o){"use strict";cc._RF.push(e,"d1bb0HuU8pAbZdG0VbBwRqp","GodBackModel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodBackModel=void 0;var r=t("../Controller/TableMgr"),a=t("../Define/Define"),s=t("../Framework/Storage/LocalStorageMgr"),c=t("./GodBase"),l=t("./UserModel"),p=function(t){function e(){var e=t.call(this)||this;return e.table=null,e.info=null,e._curIdx=Number(s.LocalStorageMgr.getItem("GodBack_curIdx"))||0,e._curLevel=Number(s.LocalStorageMgr.getItem("GodBack_curLevel"))||0,e._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodBack_unlock")||"[]"),e._exp=Number(s.LocalStorageMgr.getItem("GodBack_exp"))||0,e.table=r.TABLE.getTable("GodBack"),e.info=e.table.filter(function(t){return t.lv<100}),e.curLevel>e.info.length&&(e.curLevel=e.info.length),e._refreshInfo(),e}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curIdx",{get:function(){return this._curIdx},set:function(t){this._curIdx=t,s.LocalStorageMgr.setItem("GodBack_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLv",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStar",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLevel",{get:function(){return this._curLevel},set:function(t){this._curLevel=t,this._refreshInfo(),s.LocalStorageMgr.setItem("GodBack_curLevel",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp=t,s.LocalStorageMgr.setItem("GodBack_exp",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unlock",{get:function(){return this._unlock},set:function(t){this._unlock=t,s.LocalStorageMgr.setItem("GodBack_unlock",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),e.prototype._refreshInfo=function(){var t=this.info;return this._curLevel>t.length?(this._cur=t[t.length-1],this._next=t[t.length-2]):(this._cur=t[this._curLevel-1],this._next=t[this._curLevel]),this._cur},e.prototype.getInfo=function(t){return this.table.find(function(e){return e.lv==t})},e.prototype.getSiblingInfo=function(t){var e=this.curLv;return 0==e&&(e=1),this.getInfo(e+t)},e.prototype.getPrefabUrl=function(t){return"/Game/GodBack/"+this.getInfo(t).name},e.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},e.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godBackOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},e.prototype.getAttr=function(){var t=this,e=this.table,o=0,n=0,i=this._cur;return i&&(o+=i.atk,n+=i.hp),e.forEach(function(e){t._unlock.includes(e.lv)&&(o+=e.atk,n+=e.hp)}),{atk:o,hp:n}},e._inst=null,e}(c.GodBase);o.GodBackModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodBase:[function(t,e,o){"use strict";cc._RF.push(e,"95b66kQkKNIXpMU8IjaSu3M","GodBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.GodBase=void 0;var n=function(){function t(){this._isUnlock=0,this._curIdx=0,this._curLevel=-1,this._unlock=[],this._exp=0,this._cur=null,this._next=null}return Object.defineProperty(t.prototype,"unlock",{get:function(){return this._unlock},set:function(t){this._unlock=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUnlock",{get:function(){return this._isUnlock},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){return 0},enumerable:!1,configurable:!0}),t.prototype.getInfo=function(){return null},t.prototype.getSiblingInfo=function(){return null},t.prototype.getPrefabUrl=function(){return null},t.prototype.getState=function(){return null},t.prototype.canLevelUp=function(){return!1},t}();o.GodBase=n,cc._RF.pop()},{}],GodGuide:[function(t,e,o){"use strict";cc._RF.push(e,"ece0aKGYQBAObD4jIyXCVFJ","GodGuide");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Controller/NativeMgr"),s=t("../Model/GodSkinModel"),c=t("../Model/GodPetModel"),l=t("../Model/GodWeaponModel"),p=t("./task/Task"),u=t("../Model/GodRideModel"),d=t("../Framework/Res/ResKeeper"),h=t("../Model/UserModel"),f=t("../Framework/UI/UIMgr"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTest=!1,e.test=null,e.touch=null,e.mask=null,e.mask_sp=null,e._touchValid=0,e.name="",e}var o;return i(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return o._inst?o._inst:(cc.error("GodGuide not load yet!","%s"),null)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._inst=this,this.test.active=this.isTest},e.prototype.onDestroy=function(){o._inst=null},e.prototype.onEnable=function(){this.touch.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.touch.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},e.prototype.onDisable=function(){this.touch.off(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.touch.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},e.prototype.start=function(){this.isTest||(this.node.active=!1)},e.prototype.run=function(){var t=this;null==cc.sys.localStorage.getItem("Guide0")?(cc.sys.localStorage.setItem("Guide0",1),this.name="Guide0",this.getTask("GuideTask1",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:1,guidedesc:"\u5c11\u4fa0\uff01\u7b49\u4f60\u5f88\u4e45\u4e86\uff01\u654c\u4eba\u65e9\u5df2\u6df1\u5165\u6211\u65b9\u8179\u5730\uff0c\u5feb\u5feb\u968f\u6211\u8fdb\u5165\u6218\u573a\u5427\uff01"}),t.name=""})):null==cc.sys.localStorage.getItem("Guide2")&&h.UserModel.inst.canTalentBuy()?(cc.sys.localStorage.setItem("Guide2",1),this.name="Guide2",this.getTask("GuideTask3",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:3,guidedesc:"\u5b66\u4e60\u5929\u8d4b\u6765\u63d0\u5347\u6218\u529b"}),t.name="",t.run()})):null==cc.sys.localStorage.getItem("Guide1")&&u.GodRideModel.inst.canLevelUp()&&null==u.GodRideModel.inst.cur?(cc.sys.localStorage.setItem("Guide1",1),this.name="Guide1",this.getTask("GuideTask2",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:2,guidedesc:"\u5750\u9a91\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),t.name=""})):null==cc.sys.localStorage.getItem("Guide4")&&l.GodWeaponModel.inst.canLevelUp()&&null==l.GodWeaponModel.inst.cur?(cc.sys.localStorage.setItem("Guide4",1),this.name="Guide4",this.getTask("GuideTask5",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:5,guidedesc:"\u795e\u5175\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),t.name="",t.run()})):null==cc.sys.localStorage.getItem("Guide5")&&c.GodPetModel.inst.canLevelUp()&&null==c.GodPetModel.inst.cur?(cc.sys.localStorage.setItem("Guide5",1),this.name="Guide5",this.getTask("GuideTask6",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:6,guidedesc:"\u795e\u5ba0\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),t.name="",t.run()})):null==cc.sys.localStorage.getItem("Guide6")&&s.GodSkinModel.inst.canLevelUp()&&null==s.GodSkinModel.inst.cur&&(cc.sys.localStorage.setItem("Guide6",1),this.name="Guide6",this.getTask("GuideTask7",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:7,guidedesc:"\u5957\u88c5\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),t.name="",t.run()}))},e.prototype.getTask=function(t,e){var o=this;f.default.inst.delayUIWaitAnim(1),f.default.inst.showUIWaitAnim(),this.loadBundleRes("Prefabs","/Guide/task/"+t,cc.Prefab,function(t,n){f.default.inst.hideUIWaitAnim(),t&&cc.error(t),n&&o.execGuideTask(n,function(){o.releaseAsset(n),e&&e()})})},e.prototype.execGuideTask=function(t,e){console.warn("\u5f00\u59cb\u6267\u884c\u4efb\u52a1",t.name),this.node.active=!0;var o=cc.instantiate(t);o.setParent(this.node),this._endCb=e,this._task=o.getComponent(p.default),this.nextStage(!1)},e.prototype.endGuideTask=function(){console.warn("\u4efb\u52a1\u6267\u884c\u7ed3\u675f"),this.node.active=!1,this.mask.node.active=!1,this._task.node&&this._task.node.destroy(),this._task=null,this._endCb&&this._endCb()},e.prototype.nextStage=function(t){var e=this;void 0===t&&(t=!0),t&&this._task.index++,this.input=!1,this.exec=!1,this._task.targetNode=null,this._touchValid=0,this.mask.node.active=!1;var o=this._task.steps[this._task.index];if(o){var n=function(){e.exec=!0,e.input=!0,e._task.targetNode=cc.find(o.path),null==e._task.targetNode&&(e._task.targetNode=e.touch),"finger"==o.type&&e._focusToNode(e._task.targetNode)};o.onStart?o.onStart(n,this):n()}else this.endGuideTask()},e.prototype.onTouch=function(t){var e=t.target;if(!this.input)return console.warn("\u5904\u4e8e\u7981\u6b62\u72b6\u6001\uff0c\u62e6\u622a"),void e._touchListener.setSwallowTouches(!0);if(this._task&&this.exec){var o=this._task.steps[this._task.index];if(t.type==cc.Node.EventType.TOUCH_START)this._touchValid=0,this.checkHit(t.getLocation())&&(this._touchValid++,o.eventType==cc.Node.EventType.TOUCH_START&&this._touchValid++);else if(t.type==cc.Node.EventType.TOUCH_END)this.checkHit(t.getLocation())&&this._touchValid++;else{if(t.type==cc.Node.EventType.TOUCH_MOVE)return void e._touchListener.setSwallowTouches(!0);if(t.type==cc.Node.EventType.TOUCH_CANCEL)return void e._touchListener.setSwallowTouches(!1)}"finger"==o.type&&(1==this._touchValid&&t.type==cc.Node.EventType.TOUCH_START?e._touchListener.setSwallowTouches(!1):2==this._touchValid?(console.warn("\u547d\u4e2d\u76ee\u6807\u8282\u70b9\uff0c\u653e\u884c"),e._touchListener.setSwallowTouches(!1),this.nextStage()):(console.warn("\u672a\u547d\u4e2d\u76ee\u6807\u8282\u70b9\uff0c\u62e6\u622a"),e._touchListener.setSwallowTouches(!0)))}else e._touchListener.setSwallowTouches(!1)},e.prototype.checkHit=function(t){var e=this,o=this._task.targetNode;if(o){var n,i,r=o.getBoundingBox(),a=o.convertToWorldSpaceAR(cc.Vec2.ZERO);return o.group!=this.node.group&&(cc.Camera.cameras.forEach(function(t){t.containsNode(e.node)&&(n=t),t.containsNode(o)&&(i=t)}),n!=i&&a.subSelf(cc.Vec2.subtract(cc.v2(),n.node.getPosition(),i.node.getPosition()))),r.x=a.x-r.width/2,r.y=a.y-r.height/2,!!r.contains(t)}return!0},e.prototype._focusToNode=function(t){var e=this;this.mask.node.active=!0,this.mask._graphics.clear(),this.scheduleOnce(function(){var o,n,i=t.getBoundingBox(),r=t.convertToWorldSpaceAR(cc.Vec2.ZERO);t.group!=e.node.group&&(cc.Camera.cameras.forEach(function(i){i.containsNode(e.node)&&(o=i),i.containsNode(t)&&(n=i)}),o!=n&&r.subSelf(cc.Vec2.subtract(cc.v2(),o.node.getPosition(),n.node.getPosition())));var a=e.node.convertToNodeSpaceAR(r);i.x=a.x-i.width/2,i.y=a.y-i.height/2,e.mask._graphics.fillRect(i.x,i.y,i.width,i.height)})},e.prototype.getNodeFullPath=function(t){var e=cc.director.getScene().name,o=[],n=t;do{o.unshift(n.name),n=n.parent}while(n&&n.name!==e);return o.join("/")},e.prototype.startRecordNodeTouch=function(){if(this._task)cc.warn("\u4efb\u52a1\u5f15\u5bfc\u4e2d\uff0c\u4e0d\u80fd\u5f55\u5236");else{if(this._dispatchEvent)return cc.warn("\u5df2\u7ecf\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f \u505c\u6b62\u5f55\u5236"),void this.stopRecordNodeTouch();cc.warn("\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f"),this._dispatchEvent=cc.Node.prototype.dispatchEvent,this._recordSteps=[],this.input=!0;var t=this;cc.Node.prototype.dispatchEvent=function(e){if(t._dispatchEvent.call(this,e),!t.isGuideNode(e.target)&&e.type===cc.Node.EventType.TOUCH_END){var o=t.getNodeFullPath(this);t._recordSteps.push({path:o,type:"finger",onStart:null})}}}},e.prototype.stopRecordNodeTouch=function(){this._dispatchEvent?(cc.Node.prototype.dispatchEvent=this._dispatchEvent,this._dispatchEvent=null,this.input=!1,cc.warn("\u9000\u51fa\u5f55\u5236\u72b6\u6001")):cc.warn("\u672a\u8fdb\u5165\u5f55\u5236\u72b6\u6001")},e.prototype.execRecordTask=function(){this._task?cc.warn("\u4efb\u52a1\u5f15\u5bfc\u4e2d\uff0c\u4e0d\u80fd\u5f55\u5236"):this._dispatchEvent?cc.warn("\u5df2\u7ecf\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f"):this._recordSteps?(console.log(JSON.stringify(this._recordSteps)),this._recordSteps=null):cc.warn("\u6ca1\u6709\u5f55\u5236\u5185\u5bb9")},e.prototype.clearRecord=function(){this.stopRecordNodeTouch(),this.mask.node.active=!1,this._task=null,this._recordSteps=null},e.prototype.isGuideNode=function(t){var e=t;if(e==this.touch)return!0;for(var o=0,n=this.test.children;o<n.length;o++)if(e==n[o])return!0;return!1},r([g],e.prototype,"isTest",void 0),r([g(cc.Node)],e.prototype,"test",void 0),r([g(cc.Node)],e.prototype,"touch",void 0),r([g(cc.Mask)],e.prototype,"mask",void 0),r([g(cc.Sprite)],e.prototype,"mask_sp",void 0),o=r([y],e)}(d.default);o.default=m,cc._RF.pop()},{"../Controller/NativeMgr":"NativeMgr","../Framework/Res/ResKeeper":"ResKeeper","../Framework/UI/UIMgr":"UIMgr","../Model/GodPetModel":"GodPetModel","../Model/GodRideModel":"GodRideModel","../Model/GodSkinModel":"GodSkinModel","../Model/GodWeaponModel":"GodWeaponModel","../Model/UserModel":"UserModel","./task/Task":"Task"}],GodMenuInfo:[function(t,e,o){"use strict";cc._RF.push(e,"10e6bDWd69GnLvv1ubUHHwe","GodMenuInfo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Audio/AudioMgr"),s=t("../../../Framework/i18n/i18nMgr"),c=t("../../../Framework/UIBase"),l=t("../../../Model/GodBackModel"),p=t("../../../Model/GodPetModel"),u=t("../../../Model/GodRideModel"),d=t("../../../Model/GodSkinModel"),h=t("../../../Model/GodWeaponModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.txtTitle=null,e._type=-1,e._str=null,e._model=null,e._info=null,e}return i(e,t),e.prototype.onOpen=function(t,e){var o=this;a.AudioMgr.inst.playEffectByName("ui_open"),this._info=e.info,this._type=e.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin","GodBack"][this._type],this._model=[u.GodRideModel.inst,h.GodWeaponModel.inst,p.GodPetModel.inst,d.GodSkinModel.inst,l.GodBackModel.inst][this._type],this.txtTitle.string="\u3010"+s.i18nMgr.getLabel(this._str+"/name"+this._info.lv)+"\u3011",this.loadBundleRes("Prefabs",this._model.getPrefabUrl(this._info.lv),cc.Prefab,function(t,e){var n=cc.instantiate(e);o.icon.destroyAllChildren(),o.icon.addChild(n)}),1==this._type?(this.icon.setScale(1,1),this.icon.y=-42):4==this._type?(this.icon.setScale(1,1),this.icon.y=-42):(this.icon.setScale(1.2,1.2),this.icon.y=-202)},r([y(cc.Node)],e.prototype,"icon",void 0),r([y(cc.Label)],e.prototype,"txtTitle",void 0),r([_],e)}(c.default);o.default=g,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel"}],GodMenuNew:[function(t,e,o){"use strict";cc._RF.push(e,"c6a1ePduwxL87P3yJuwtnT5","GodMenuNew");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Audio/AudioMgr"),s=t("../../../Framework/i18n/i18nMgr"),c=t("../../../Framework/UIBase"),l=t("../../../Model/GodBackModel"),p=t("../../../Model/GodPetModel"),u=t("../../../Model/GodRideModel"),d=t("../../../Model/GodSkinModel"),h=t("../../../Model/GodWeaponModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.txtTitle=null,e.txtName=null,e._type=-1,e._str=null,e._model=null,e._info=null,e}return i(e,t),e.prototype.onOpen=function(t,e){var o=this;a.AudioMgr.inst.playEffectByName("unlockRide"),this._info=e.info,this._type=e.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin","GodBack"][this._type],this._model=[u.GodRideModel.inst,h.GodWeaponModel.inst,p.GodPetModel.inst,d.GodSkinModel.inst,l.GodBackModel.inst][this._type],this.txtTitle.string=s.i18nMgr.getLabel(this._str+"New/tittl"),this.txtName.string="\u3010"+s.i18nMgr.getLabel(this._str+"/name"+this._info.lv)+"\u3011",this.loadBundleRes("Prefabs",this._model.getPrefabUrl(this._info.lv),cc.Prefab,function(t,e){var n=cc.instantiate(e);o.icon.destroyAllChildren(),o.icon.addChild(n)}),1==this._type?(this.icon.setScale(1,1),this.icon.y=-42):4==this._type?(this.icon.setScale(1,1),this.icon.y=-42):(this.icon.setScale(1.2,1.2),this.icon.y=-202)},r([y(cc.Node)],e.prototype,"icon",void 0),r([y(cc.Label)],e.prototype,"txtTitle",void 0),r([y(cc.Label)],e.prototype,"txtName",void 0),r([_],e)}(c.default);o.default=g,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel"}],GodMenuViewItem:[function(t,e,o){"use strict";cc._RF.push(e,"7c9a023PhxC15dSa1u1MhzH","GodMenuViewItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtLevel=null,e.txtName=null,e.txtState=null,e.txtDesc=null,e.btnEquip=null,e.btnUnEquip=null,e.btnTip=null,e}return i(e,t),r([c(cc.Label)],e.prototype,"txtLevel",void 0),r([c(cc.Label)],e.prototype,"txtName",void 0),r([c(cc.Label)],e.prototype,"txtState",void 0),r([c(cc.Label)],e.prototype,"txtDesc",void 0),r([c(cc.Button)],e.prototype,"btnEquip",void 0),r([c(cc.Button)],e.prototype,"btnUnEquip",void 0),r([c(cc.Button)],e.prototype,"btnTip",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],GodMenuView:[function(t,e,o){"use strict";cc._RF.push(e,"ce338pTB1NEjptX7nQnsW4r","GodMenuView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/TableMgr"),s=t("../../../Define/EventId"),c=t("../../../Define/UIDefs"),l=t("../../../Framework/Audio/AudioMgr"),p=t("../../../Framework/Event/EventMgr"),u=t("../../../Framework/i18n/i18nMgr"),d=t("../../../Framework/List/List"),h=t("../../../Framework/UI/UIFacade"),f=t("../../../Framework/UI/UIMgr"),_=t("../../../Framework/UIBase"),y=t("../../../Model/GodBackModel"),g=t("../../../Model/GodPetModel"),m=t("../../../Model/GodRideModel"),v=t("../../../Model/GodSkinModel"),M=t("../../../Model/GodWeaponModel"),b=t("./GodMenuViewItem"),E=cc._decorator,O=E.ccclass,I=E.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e.txtTitle=null,e._type=-1,e._str=null,e._model=null,e._select=-1,e._infos=null,e}return i(e,t),e.prototype.onOpen=function(t,e){l.AudioMgr.inst.playEffectByName("ui_open"),this._type=e.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin","GodBack"][this._type],this._model=[m.GodRideModel.inst,M.GodWeaponModel.inst,g.GodPetModel.inst,v.GodSkinModel.inst,y.GodBackModel.inst][this._type],this.txtTitle.string=u.i18nMgr.getLabel(this._str+"View/tittle"),this._infos=a.TABLE.getTable(this._str).filter(function(t){return 1==t.star}),this.list.numItems=this._infos.length},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.onListRender=function(t,e){var o=this,n=t.getComponent(b.default),i=this._infos[e],r=e+1;if(null==i)return n.btnEquip.node.active=!1,n.btnUnEquip.node.active=!1,n.txtState.string="\uff1f\uff1f\uff1f",void(n.txtName.string=r+"\u9636 \uff1f\uff1f\uff1f");if(i.lv!=e+1){var a=this._model.unlock.includes(i.lv);r=i.lv,n.btnTip.node.active=!0,n.btnEquip.node.active=this._model.curIdx!=r&&a,n.btnUnEquip.node.active=this._model.curIdx==i.lv,n.txtState.string=a?"\u5df2\u89e3\u9501":"\u672a\u89e3\u9501",n.txtDesc.string=a?"":"\u5728\u5546\u5e97\u4e2d\u5151\u6362\u83b7\u5f97",n.txtLevel.string="",n.txtName.string=""+u.i18nMgr.getLabel(this._str+"/name"+i.lv)}else n.btnTip.node.active=!1,n.btnEquip.node.active=this._model.curIdx!=r&&this._model.curLv>=r,n.btnUnEquip.node.active=this._model.curIdx==r,n.txtDesc.string="",n.txtState.string=this._model.curLv>=r?"\u5df2\u89e3\u9501":"\u672a\u89e3\u9501",n.txtLevel.string=r+"\u9636",n.txtName.string=""+u.i18nMgr.getLabel(this._str+"/name"+i.lv);var d=function(){h.UIFacade.showToast("\u5916\u5f62\u5207\u6362\u6210\u529f"),l.AudioMgr.inst.playEffectByName("talentSelect"),o._model.curIdx==r?o._model.curIdx=0:o._model.curIdx=r,o.list.updateAll(),p.EVENT.emit(s.EventId.ON_REFRESH_ROLE)};n.btnEquip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnUnEquip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnEquip.node.on(cc.Node.EventType.TOUCH_END,d),n.btnUnEquip.node.on(cc.Node.EventType.TOUCH_END,d),n.btnTip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnTip.node.on(cc.Node.EventType.TOUCH_END,function(){f.default.inst.open(c.UIType.GodMenuInfo,{info:o._model.getInfo(i.lv),type:o._type})})},r([I(d.default)],e.prototype,"list",void 0),r([I(cc.Label)],e.prototype,"txtTitle",void 0),r([O],e)}(_.default);o.default=S,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel","./GodMenuViewItem":"GodMenuViewItem"}],GodMenu:[function(t,e,o){"use strict";cc._RF.push(e,"326b1II54ZGyb2vCLypVI1z","GodMenu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/Define"),s=t("../../../Define/EventId"),c=t("../../../Define/UIDefs"),l=t("../../../Framework/Event/EventMgr"),p=t("../../../Framework/i18n/i18nMgr"),u=t("../../../Framework/UI/UIMgr"),d=t("../../../Framework/UIBase"),h=t("../../../Model/UserModel"),f=t("../../../Model/GodPetModel"),_=t("../../../Model/AchievementModel"),y=t("../../../Framework/Utils/Utils"),g=t("../../../Framework/Audio/AudioMgr"),m=t("../../../Controller/ItemMgr"),v=t("../../../Model/GodWeaponModel"),M=t("../../../Model/GodRideModel"),b=t("../../../Model/GodSkinModel"),E=t("../../../Model/GodBackModel"),O=t("../../../Framework/UI/UIFacade"),I=t("../../../Framework/Event/RedDotHandler"),S=t("../../../Controller/AdMgr"),w=cc._decorator,P=w.ccclass,R=w.property,A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toggles=null,e.icon=null,e.moneyIcon=null,e.star=[],e.starSf=[],e.starNode=null,e.next=null,e.max=null,e.txtTitle=null,e.attributeTxt=null,e.attribute1Txt=null,e.attribute2Txt=null,e.attribute3Txt=null,e.attribute4Txt=null,e.txtNum=null,e.txtNext=null,e.txtLevelUp=null,e.btnRight=null,e.btnLeft=null,e.btnView=null,e.btnLevelUp=null,e.pbLevel=null,e.txtLevel=null,e.pbLevelBar=null,e.redDotLevelUp=null,e.GodRideBan=null,e.GodWeaponBan=null,e.GodPetBan=null,e.GodSkinBan=null,e.GodBackBan=null,e._type=-1,e._str=null,e._model=null,e._curIdx=0,e._pageIdx=0,e._iconIdx=0,e}return i(e,t),e.prototype.onOpen=function(t,e){var o=this;g.AudioMgr.inst.playEffectByName("ui_open"),this._type=e.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin","GodBack"][this._type],this._model=[M.GodRideModel.inst,v.GodWeaponModel.inst,f.GodPetModel.inst,b.GodSkinModel.inst,E.GodBackModel.inst][this._type],this.redDotLevelUp.setKey(this._str),this.moneyIcon.spriteFrame=null,this.loadBundleRes("Textures",a.MONEY_ICON_URL[this._model.getInfo(1).item],cc.SpriteFrame,function(t,e){o.moneyIcon.spriteFrame=e}),this.toggles.toggleItems[this._type].interactable=!1,this.star.forEach(function(t){return t.node.children[0].active=!1}),this.pbLevel.node.active=!1,this.pbLevelBar.active=!1,this.updateStage(h.UserModel.inst.curStage),this.refresh(),this.refreshLeftRight()},e.prototype.close=function(){this._playAni||t.prototype.close.call(this)},e.prototype.refresh=function(t){var e,o,n=this;void 0===t&&(t=this._model.cur||this._model.next);var i=this._model.cur||this._model.next,r=this._model.getState();i.lv<t.lv?(this.btnLevelUp.node.active=!1,this.next.active=!0,this.max.active=!1,this.txtNext.string=""+p.i18nMgr.getLabel(this._str+"/next",[p.i18nMgr.getLabel(this._str+"/name"+(t.lv-1))])):i.lv>t.lv||r==a.UnlockType.Max?(this.btnLevelUp.node.active=!1,this.next.active=!1,this.max.active=!0):i.lv==t.lv&&(this.btnLevelUp.node.active=!0,this.next.active=!1,this.max.active=!1,r==a.UnlockType.NotUnlock?(this.starNode.active=!1,this.pbLevel.node.active=!1):(this.starNode.active=!0,this.pbLevel.node.active=!0,this.star.forEach(function(t,e){return t.spriteFrame=e>=n._model.curStar?n.starSf[0]:n.starSf[1]}))),0==this._type?(this.icon.y=60,this.icon.scale=1,this.attributeTxt.node.active=!1,this.attribute1Txt.node.active=!0,this.attribute2Txt.node.active=!1,this.attribute3Txt.node.active=!0,this.attribute4Txt.node.active=!1,this.attribute1Txt.node.x=-100,this.attribute3Txt.node.x=110,this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodRide/attribute1",[""+(null==i?void 0:i.atk)]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodRide/attribute3",[""+(null==i?void 0:i.speed)])):1==this._type?(this.icon.y=280,this.icon.scale=.7,this.attributeTxt.node.active=!0,this.attribute1Txt.node.active=!1,this.attribute2Txt.node.active=!0,this.attribute3Txt.node.active=!0,this.attribute4Txt.node.active=!1,this.attributeTxt.node.x=-250,this.attribute2Txt.node.x=-35,this.attribute3Txt.node.x=200,this.attributeTxt.string="\u53ec\u5524\u9668\u77f3",this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodWeapon/attribute2",[""+((null==i?void 0:i.hp)||0)]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodWeapon/attribute3",[""+Math.floor(100*((null==i?void 0:i.crit)||0))])):2==this._type?(this.icon.y=60,this.icon.scale=1.2,this.attributeTxt.node.active=!1,this.attribute1Txt.node.active=!0,this.attribute2Txt.node.active=!0,this.attribute3Txt.node.active=!0,this.attribute4Txt.node.active=!1,this.attribute1Txt.node.x=-180,this.attribute2Txt.node.x=20,this.attribute3Txt.node.x=210,this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute1",[""+Math.floor(100*((null==i?void 0:i.atk)||0))]),this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute2",[""+Math.floor(100*((null==i?void 0:i.crit)||0))]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute3",[""+Math.floor(100*((null==i?void 0:i.critDamage)||0))])):3==this._type?(this.icon.y=60,this.icon.scale=1,this.attributeTxt.node.active=!1,this.attribute1Txt.node.active=!1,this.attribute2Txt.node.active=!0,this.attribute3Txt.node.active=!0,this.attribute4Txt.node.active=!1,this.attribute2Txt.node.x=-100,this.attribute3Txt.node.x=110,this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodSkin/attribute2",[""+((null==i?void 0:i.hp)||0)]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodSkin/attribute3",[""+Math.floor(100*((null==i?void 0:i.reduce)||0))])):4==this._type&&(this.icon.y=180,this.icon.scale=1.2,this.attributeTxt.node.active=!1,this.attribute1Txt.node.active=!0,this.attribute2Txt.node.active=!0,this.attribute3Txt.node.active=!1,this.attribute4Txt.node.active=!1,this.attribute1Txt.node.x=-100,this.attribute2Txt.node.x=110,this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodBack/attribute1",[""+((null==i?void 0:i.atk)||0)]),this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodBack/attribute2",[""+((null==i?void 0:i.hp)||0)])),this.txtTitle.string=i.lv+this._pageIdx+"\u9636 "+p.i18nMgr.getLabel(this._str+"/name"+t.lv),this.txtNum.string=h.UserModel.inst[null===(e=this._model.next)||void 0===e?void 0:e.item]+"/"+(null===(o=this._model.next)||void 0===o?void 0:o.count),this.btnView.node.active=null!=this._model.cur,this.txtLevelUp.string=null==this._model.cur?""+p.i18nMgr.getLabel(this._str+"/levelUp1"):""+p.i18nMgr.getLabel(this._str+"/levelUp2"),this.setIcon(t.lv),this.updateExp()},e.prototype.refreshLeftRight=function(){this.btnRight.node.active=null!=this._model.getSiblingInfo(this._pageIdx+1),this.btnLeft.node.active=null!=this._model.getSiblingInfo(this._pageIdx-1)},e.prototype.setIcon=function(t){var e=this;if(this._iconIdx!=t)this._iconIdx=t,this.loadBundleRes("Prefabs",this._model.getPrefabUrl(t),cc.Prefab,function(o,n){if(e._iconIdx==t){var i=cc.instantiate(n);e.icon.destroyAllChildren(),e.icon.addChild(i),e._pageIdx>0||0==e._model.curLv&&0==e._model.curStar?e.changeMatBlack(i):e.changeMatNormal(i)}});else{var o=this.icon.children[0];this._pageIdx>0||0==this._model.curLv&&0==this._model.curStar?this.changeMatBlack(o):this.changeMatNormal(o)}},e.prototype.changeMatNormal=function(t){t.color=cc.color(255,255,255)},e.prototype.changeMatBlack=function(t){t.color=cc.color(0,0,0)},e.prototype.updateStage=function(t){this.GodRideBan.active=t<=h.UserModel.inst.rideOpenStage,this.GodWeaponBan.active=t<=h.UserModel.inst.godWeaponOpenStage,this.GodPetBan.active=t<=h.UserModel.inst.godPetOpenStage,this.GodSkinBan.active=t<=h.UserModel.inst.godSkinOpenStage,this.GodBackBan.active=t<=h.UserModel.inst.godBackOpenStage},e.prototype.onClickRight=function(){this._playAni||(this.refresh(this._model.getSiblingInfo(++this._pageIdx)),this.refreshLeftRight())},e.prototype.onClickLeft=function(){this._playAni||(this.refresh(this._model.getSiblingInfo(--this._pageIdx)),this.refreshLeftRight())},e.prototype.onClickLevelUp=function(){if(!this._playAni)return this._model.canLevelUp()?void this.onExpUp():("rMoney"==this._model.getInfo(1).item?u.default.inst.open(c.UIType.GetMoney,{type:this._type,cb:this.refresh.bind(this)}):"g1Money"==this._model.getInfo(1).item?u.default.inst.open(c.UIType.GetG1Money,{type:this._type,cb:this.refresh.bind(this)}):u.default.inst.showToast("\u8d27\u5e01\u4e0d\u8db3"),void g.AudioMgr.inst.playEffectByName("ui_not"))},e.prototype.onClickToggles=function(t){var e=this;if(!this._playAni){var o=t.node.getSiblingIndex();if(this._curIdx!=o){switch(o){case 1:if(h.UserModel.inst.curStage<=h.UserModel.inst.godWeaponOpenStage)return g.AudioMgr.inst.playEffectByName("ui_not"),O.UIFacade.showToast("\u901a\u5173\u7b2c"+h.UserModel.inst.godWeaponOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u5175\u7cfb\u7edf\u3011"),void this.toggles.toggleItems.forEach(function(t,o){return t.isChecked=o==e._curIdx});break;case 2:if(h.UserModel.inst.curStage<=h.UserModel.inst.godPetOpenStage)return g.AudioMgr.inst.playEffectByName("ui_not"),O.UIFacade.showToast("\u901a\u5173\u7b2c"+h.UserModel.inst.godPetOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u517d\u7cfb\u7edf\u3011"),void this.toggles.toggleItems.forEach(function(t,o){return t.isChecked=o==e._curIdx});break;case 3:if(h.UserModel.inst.curStage<=h.UserModel.inst.godSkinOpenStage)return g.AudioMgr.inst.playEffectByName("ui_not"),O.UIFacade.showToast("\u901a\u5173\u7b2c"+h.UserModel.inst.godSkinOpenStage+"\u5173\u89e3\u9501\u3010\u65f6\u88c5\u7cfb\u7edf\u3011"),void this.toggles.toggleItems.forEach(function(t,o){return t.isChecked=o==e._curIdx});break;case 4:if(h.UserModel.inst.curStage<=h.UserModel.inst.godBackOpenStage)return g.AudioMgr.inst.playEffectByName("ui_not"),O.UIFacade.showToast("\u901a\u5173\u7b2c"+h.UserModel.inst.godBackOpenStage+"\u5173\u89e3\u9501\u3010\u80cc\u9970\u7cfb\u7edf\u3011"),void this.toggles.toggleItems.forEach(function(t,o){return t.isChecked=o==e._curIdx})}this.toggles.toggleItems.forEach(function(t,e){t.isChecked=e==o,t.interactable=!0}),this._curIdx=o,this._pageIdx=0,this._iconIdx=-1,this.icon.destroyAllChildren(),this.onOpen(null,{type:o})}}},e.prototype.updateExp=function(){var t=this._model.cur;if(null!=t){var e=t.expLen,o=this._model.exp,n=t.addExp,i=0,r=0;e.forEach(function(t,e){r+=t*n,e<o&&(i+=t*n)}),this.pbLevel.progress=i/r,this.txtLevel.string=i+"/"+r}},e.prototype.onExpUp=function(){var t,e,o=this,n=this._model.cur,i=this._model.next;if(this._model.exp++,h.UserModel.inst[i.item]-=i.count,this.txtNum.string=h.UserModel.inst[null===(t=this._model.next)||void 0===t?void 0:t.item]+"/"+(null===(e=this._model.next)||void 0===e?void 0:e.count),null==n)return this.onLevelUp(),void this.updateExp();var r=n.expLen,a=this._model.exp,s=this._model.exp+1,c=n.addExp,l=0,p=0,d=0;switch(r.forEach(function(t,e){d+=t*c,e<a&&(l+=t*c),e<s&&(p+=t*c)}),this._playAni=!0,this.pbLevelBar.active=!0,cc.tween(this.pbLevel).to(.3,{progress:p/d}).start(),u.default.inst.delayUIWaitAnim(1),u.default.inst.showUIWaitAnim(),y.default.rollNum(l,p,function(t){o.txtLevel.string=Math.floor(t)+"/"+d},function(){o._playAni=!1,o.pbLevelBar.active=!1,u.default.inst.hideUIWaitAnim(),p==d&&(o._model.exp=-1,o.onLevelUp())},.3),r[a]){case 1:g.AudioMgr.inst.playEffectByName("scoreNormal");break;case 2:g.AudioMgr.inst.playEffectByName("scoreDouble"),m.default.inst.generateDouble(this.pbLevel.node.convertToWorldSpaceAR(cc.Vec2.ZERO));break;case 3:g.AudioMgr.inst.playEffectByName("scoreTriple"),m.default.inst.generateTreble(this.pbLevel.node.convertToWorldSpaceAR(cc.Vec2.ZERO))}},e.prototype.onLevelUp=function(){var t,e=this,o=this._model.cur,n=this._model.next;this._model.curLevel++;var i=this._model.curStar-1;0==this._model.curStar&&this._model.curLevel>0&&(i=4);var r=null===(t=this.star[i])||void 0===t?void 0:t.getComponentInChildren(sp.Skeleton),p=function(){e.refresh(),e.refreshLeftRight(),(null==o?void 0:o.lv)!=n.lv&&(e._model.curIdx=n.lv,l.EVENT.emit(s.EventId.ON_REFRESH_ROLE),u.default.inst.open(c.UIType.GodMenuNew,{info:n,type:e._type}));var t=[5,6,7,8,null][e._type];t&&_.AchievementModel.inst.updatePoint(t,n.lv)};switch(r?(u.default.inst.delayUIWaitAnim(1),u.default.inst.showUIWaitAnim(),this._playAni=!0,this.starNode.active=!0,this.star.forEach(function(t,o){return t.spriteFrame=o>i?e.starSf[0]:e.starSf[1]}),r.node.active=!0,r.setAnimation(0,r.defaultAnimation,!1),r.setCompleteListener(function(){r.node.active=!1,e._playAni=!1,u.default.inst.hideUIWaitAnim(),p()})):p(),this._model.curStar){case 0:g.AudioMgr.inst.playEffectByName("ridestar5");break;case 1:case 2:g.AudioMgr.inst.playEffectByName("ridestar12");break;case 3:case 4:g.AudioMgr.inst.playEffectByName("ridestar34")}switch(a.Config.abTestType){case 1:case 2:case 3:this._model.curLv>=2&&(2==this._model.curStar||4==this._model.curStar)&&S.default.inst.showAdInterstitial("\u5347\u661f\u63d2\u5c4f")}},e.prototype.onClickView=function(){u.default.inst.open(c.UIType.GodMenuView,{type:this._type})},r([R(cc.ToggleContainer)],e.prototype,"toggles",void 0),r([R(cc.Node)],e.prototype,"icon",void 0),r([R(cc.Sprite)],e.prototype,"moneyIcon",void 0),r([R([cc.Sprite])],e.prototype,"star",void 0),r([R([cc.SpriteFrame])],e.prototype,"starSf",void 0),r([R(cc.Node)],e.prototype,"starNode",void 0),r([R(cc.Node)],e.prototype,"next",void 0),r([R(cc.Node)],e.prototype,"max",void 0),r([R(cc.Label)],e.prototype,"txtTitle",void 0),r([R(cc.Label)],e.prototype,"attributeTxt",void 0),r([R(cc.Label)],e.prototype,"attribute1Txt",void 0),r([R(cc.Label)],e.prototype,"attribute2Txt",void 0),r([R(cc.Label)],e.prototype,"attribute3Txt",void 0),r([R(cc.Label)],e.prototype,"attribute4Txt",void 0),r([R(cc.Label)],e.prototype,"txtNum",void 0),r([R(cc.Label)],e.prototype,"txtNext",void 0),r([R(cc.Label)],e.prototype,"txtLevelUp",void 0),r([R(cc.Button)],e.prototype,"btnRight",void 0),r([R(cc.Button)],e.prototype,"btnLeft",void 0),r([R(cc.Button)],e.prototype,"btnView",void 0),r([R(cc.Button)],e.prototype,"btnLevelUp",void 0),r([R(cc.ProgressBar)],e.prototype,"pbLevel",void 0),r([R(cc.Label)],e.prototype,"txtLevel",void 0),r([R(cc.Node)],e.prototype,"pbLevelBar",void 0),r([R(I.RedDotHandler)],e.prototype,"redDotLevelUp",void 0),r([R(cc.Node)],e.prototype,"GodRideBan",void 0),r([R(cc.Node)],e.prototype,"GodWeaponBan",void 0),r([R(cc.Node)],e.prototype,"GodPetBan",void 0),r([R(cc.Node)],e.prototype,"GodSkinBan",void 0),r([R(cc.Node)],e.prototype,"GodBackBan",void 0),r([P],e)}(d.default);o.default=A,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/ItemMgr":"ItemMgr","../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/Event/RedDotHandler":"RedDotHandler","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/AchievementModel":"AchievementModel","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel","../../../Model/UserModel":"UserModel"}],GodPetModel:[function(t,e,o){"use strict";cc._RF.push(e,"4b0815ISa9MermNbm/zzpPC","GodPetModel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodPetModel=void 0;var r=t("../Controller/TableMgr"),a=t("../Define/Define"),s=t("../Framework/Storage/LocalStorageMgr"),c=t("./GodBase"),l=t("./UserModel"),p=function(t){function e(){var e=t.call(this)||this;return e.table=null,e.info=null,e._curIdx=Number(s.LocalStorageMgr.getItem("GodPet_curIdx"))||0,e._curLevel=Number(s.LocalStorageMgr.getItem("GodPet_curLevel"))||0,e._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodPet_unlock")||"[]"),e._exp=Number(s.LocalStorageMgr.getItem("GodPet_exp"))||0,e.table=r.TABLE.getTable("GodPet"),e.info=e.table.filter(function(t){return t.lv<100}),e.curLevel>e.info.length&&(e.curLevel=e.info.length),e._refreshInfo(),e}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curIdx",{get:function(){return this._curIdx},set:function(t){this._curIdx=t,s.LocalStorageMgr.setItem("GodPet_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLv",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStar",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLevel",{get:function(){return this._curLevel},set:function(t){this._curLevel=t,this._refreshInfo(),s.LocalStorageMgr.setItem("GodPet_curLevel",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp=t,s.LocalStorageMgr.setItem("GodPet_exp",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unlock",{get:function(){return this._unlock},set:function(t){this._unlock=t,s.LocalStorageMgr.setItem("GodPet_unlock",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),e.prototype._refreshInfo=function(){var t=this.info;return this._curLevel>t.length?(this._cur=t[t.length-1],this._next=t[t.length-2]):(this._cur=t[this._curLevel-1],this._next=t[this._curLevel]),this._cur},e.prototype.getInfo=function(t){return this.table.find(function(e){return e.lv==t})},e.prototype.getSiblingInfo=function(t){var e=this.curLv;return 0==e&&(e=1),this.getInfo(e+t)},e.prototype.getPrefabUrl=function(t){return"/Game/GodPet/"+this.getInfo(t).name},e.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},e.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godPetOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},e._inst=null,e}(c.GodBase);o.GodPetModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodRideModel:[function(t,e,o){"use strict";cc._RF.push(e,"b2c0bPJ7JBDhboykgK6djNH","GodRideModel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodRideModel=void 0;var r=t("../Controller/TableMgr"),a=t("../Define/Define"),s=t("../Framework/Storage/LocalStorageMgr"),c=t("./GodBase"),l=t("./UserModel"),p=function(t){function e(){var e=t.call(this)||this;return e.table=null,e.info=null,e._curIdx=Number(s.LocalStorageMgr.getItem("GodRide_curIdx"))||0,e._curLevel=Number(s.LocalStorageMgr.getItem("GodRide_curLevel"))||0,e._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodRide_unlock")||"[]"),e._exp=Number(s.LocalStorageMgr.getItem("GodRide_exp"))||0,e.table=r.TABLE.getTable("GodRide"),e.info=e.table.filter(function(t){return t.lv<100}),e.curLevel>e.info.length&&(e.curLevel=e.info.length),e._refreshInfo(),e}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curIdx",{get:function(){return this._curIdx},set:function(t){this._curIdx=t,s.LocalStorageMgr.setItem("GodRide_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLv",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStar",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLevel",{get:function(){return this._curLevel},set:function(t){this._curLevel=t,this._refreshInfo(),s.LocalStorageMgr.setItem("GodRide_curLevel",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp=t,s.LocalStorageMgr.setItem("GodRide_exp",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unlock",{get:function(){return this._unlock},set:function(t){this._unlock=t,s.LocalStorageMgr.setItem("GodRide_unlock",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),e.prototype._refreshInfo=function(){var t=this.info;return this._curLevel>t.length?(this._cur=t[t.length-1],this._next=t[t.length-2]):(this._cur=t[this._curLevel-1],this._next=t[this._curLevel]),this._cur},e.prototype.getInfo=function(t){return this.table.find(function(e){return e.lv==t})},e.prototype.getSiblingInfo=function(t){var e=this.curLv;return 0==e&&(e=1),this.getInfo(e+t)},e.prototype.getPrefabUrl=function(t){return"/Game/GodRide/"+this.getInfo(t).name},e.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},e.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.rideOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},e.prototype.getAttr=function(){var t=this,e=r.TABLE.getTable("GodRide"),o=0,n=0,i=0,a=this._cur;return a&&(o+=a.speed,n+=a.atk,i+=a.hp),e.forEach(function(e){t._unlock.includes(e.lv)&&(o+=e.speed,n+=e.atk,i+=e.hp)}),{speed:o,atk:n,hp:i}},e._inst=null,e}(c.GodBase);o.GodRideModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodSkinModel:[function(t,e,o){"use strict";cc._RF.push(e,"cc8c3z4EX1DyYfhEMUYgm9e","GodSkinModel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodSkinModel=void 0;var r=t("../Controller/TableMgr"),a=t("../Define/Define"),s=t("../Framework/Storage/LocalStorageMgr"),c=t("./GodBase"),l=t("./UserModel"),p=function(t){function e(){var e=t.call(this)||this;return e.table=null,e.info=null,e._curIdx=Number(s.LocalStorageMgr.getItem("GodSkin_curIdx"))||0,e._curLevel=Number(s.LocalStorageMgr.getItem("GodSkin_curLevel"))||0,e._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodSkin_unlock")||"[]"),e._exp=Number(s.LocalStorageMgr.getItem("GodSkin_exp"))||0,e.table=r.TABLE.getTable("GodSkin"),e.info=e.table.filter(function(t){return t.lv<100}),e.curLevel>e.info.length&&(e.curLevel=e.info.length),e._refreshInfo(),e}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curIdx",{get:function(){return this._curIdx},set:function(t){this._curIdx=t,s.LocalStorageMgr.setItem("GodSkin_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLv",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStar",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLevel",{get:function(){return this._curLevel},set:function(t){this._curLevel=t,this._refreshInfo(),s.LocalStorageMgr.setItem("GodSkin_curLevel",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp=t,s.LocalStorageMgr.setItem("GodSkin_exp",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unlock",{get:function(){return this._unlock},set:function(t){this._unlock=t,s.LocalStorageMgr.setItem("GodSkin_unlock",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),e.prototype._refreshInfo=function(){var t=this.info;return this._curLevel>t.length?(this._cur=t[t.length-1],this._next=t[t.length-2]):(this._cur=t[this._curLevel-1],this._next=t[this._curLevel]),this._cur},e.prototype.getInfo=function(t){return this.table.find(function(e){return e.lv==t})},e.prototype.getSiblingInfo=function(t){var e=this.curLv;return 0==e&&(e=1),this.getInfo(e+t)},e.prototype.getPrefabUrl=function(t){return"/Game/GodSkin/"+this.getInfo(t).name},e.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},e.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godSkinOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},e.prototype.getAttr=function(){var t=this,e=r.TABLE.getTable("GodSkin"),o=0,n=0,i=0,a=this._cur;return a&&(o+=a.atk,n+=a.hp,i+=a.reduce),e.forEach(function(e){t._unlock.includes(e.lv)&&(o+=e.atk,n+=e.hp,i+=e.reduce)}),{atk:o,hp:n,reduce:i}},e._inst=null,e}(c.GodBase);o.GodSkinModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodWeaponModel:[function(t,e,o){"use strict";cc._RF.push(e,"0bc5eDnRHdMb6ch44YYQeTn","GodWeaponModel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodWeaponModel=void 0;var r=t("../Controller/TableMgr"),a=t("../Define/Define"),s=t("../Framework/Storage/LocalStorageMgr"),c=t("./GodBase"),l=t("./UserModel"),p=function(t){function e(){var e=t.call(this)||this;return e.table=null,e.info=null,e._isUnlock=Number(s.LocalStorageMgr.getItem("GodWeapon_isUnlock"))||0,e._curIdx=Number(s.LocalStorageMgr.getItem("GodWeapon_curIdx"))||0,e._curLevel=Number(s.LocalStorageMgr.getItem("GodWeapon_curLevel"))||0,e._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodWeapon_unlock")||"[]"),e._exp=Number(s.LocalStorageMgr.getItem("GodWeapon_exp"))||0,e.table=r.TABLE.getTable("GodWeapon"),e.info=e.table.filter(function(t){return t.lv<100}),e.curLevel>e.info.length&&(e.curLevel=e.info.length),e._refreshInfo(),e}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUnlock",{get:function(){return this._isUnlock},set:function(t){this._isUnlock=t,s.LocalStorageMgr.setItem("GodWeapon_isUnlock",""+this._isUnlock)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curIdx",{get:function(){return this._curIdx},set:function(t){this._curIdx=t,s.LocalStorageMgr.setItem("GodWeapon_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLv",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStar",{get:function(){var t;return(null===(t=this._cur)||void 0===t?void 0:t.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLevel",{get:function(){return this._curLevel},set:function(t){this._curLevel=t,this._refreshInfo(),s.LocalStorageMgr.setItem("GodWeapon_curLevel",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(t){this._exp=t,s.LocalStorageMgr.setItem("GodWeapon_exp",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unlock",{get:function(){return this._unlock},set:function(t){this._unlock=t,s.LocalStorageMgr.setItem("GodWeapon_unlock",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),e.prototype._refreshInfo=function(){var t=this.info;return this._curLevel>t.length?(this._cur=t[t.length-1],this._next=t[t.length-2]):(this._cur=t[this._curLevel-1],this._next=t[this._curLevel]),this._cur},e.prototype.getInfo=function(t){return this.table.find(function(e){return e.lv==t})},e.prototype.getSiblingInfo=function(t){var e=this.curLv;return 0==e&&(e=1),this.getInfo(e+t)},e.prototype.getPrefabUrl=function(t){return 0==t?"/Game/GodWeapon/magic0":"/Game/GodWeapon/"+this.getInfo(t).name},e.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},e.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godWeaponOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},e._inst=null,e}(c.GodBase);o.GodWeaponModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodWeaponReward:[function(t,e,o){"use strict";cc._RF.push(e,"e3015zR4JVBu5+gHEaBXVDL","GodWeaponReward");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Framework/i18n/i18nMgr"),c=t("../../../Framework/UI/UIFacade"),l=t("../../../Framework/UIBase"),p=t("../../../Model/UserModel"),u=t("../../../Model/GodWeaponModel"),d=t("../../../Framework/Event/EventMgr"),h=t("../../../Define/EventId"),f=t("../../../Guide/GodGuide"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e.desc2=null,e.desc5=null,e.moneyNode=null,e}return i(e,t),e.prototype.onOpen=function(){this.refresh()},e.prototype.refresh=function(){this.desc2.string=""+s.i18nMgr.getLabel("GodWeaponReward/desc2",[""+p.UserModel.inst.godWeaponsRewardOpenStage,""+(p.UserModel.inst.curStage-1),""+p.UserModel.inst.godWeaponsRewardOpenStage]),this.desc5.string="x"+p.UserModel.inst.godWeaponsRewardMoney},e.prototype.onClickGet=function(){p.UserModel.inst.curStage<p.UserModel.inst.godWeaponsRewardOpenStage?c.UIFacade.showToast(s.i18nMgr.getLabel("GodWeaponReward/err")):this.onReward()},e.prototype.onClickAD=function(){var t=this;a.default.inst.showAd("\u9886\u53d6\u795e\u5175",function(){t.onReward()})},e.prototype.onReward=function(){u.GodWeaponModel.inst.isUnlock=1,p.UserModel.inst.rMoney+=p.UserModel.inst.godWeaponsRewardMoney;var t=this.moneyNode.convertToWorldSpaceAR(cc.Vec2.ZERO);d.EVENT.emit(h.EventId.ON_UI_MAIN_FLY_ICON,t,"RMoney"),f.default.inst.run(),this.close()},r([g(sp.Skeleton)],e.prototype,"spine",void 0),r([g(cc.Label)],e.prototype,"desc2",void 0),r([g(cc.Label)],e.prototype,"desc5",void 0),r([g(cc.Node)],e.prototype,"moneyNode",void 0),r([y],e)}(l.default);o.default=m,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Guide/GodGuide":"GodGuide","../../../Model/GodWeaponModel":"GodWeaponModel","../../../Model/UserModel":"UserModel"}],GuideCollider:[function(t,e,o){"use strict";cc._RF.push(e,"89f5cxbqBtKnKC6j1IXWpFL","GuideCollider");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onBeginContact=function(t,e,o){this._tag&&this._tag==o.node&&(this._enterCb&&this._enterCb(),this._enterCb=null,this._tag=null)},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],GuideTask1:[function(t,e,o){"use strict";cc._RF.push(e,"0d224FBPAVDxLd3o6YUTwk4","GuideTask1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/GameItemMgr"),s=t("../../Define/EventId"),c=t("../../Framework/Event/EventMgr"),l=t("../../Game/PlayerCtrl"),p=t("../../Model/GameModel"),u=t("../GuideCollider"),d=t("../GuideText"),h=t("./Task"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.finger=null,e.spfinger=null,e.tips=[],e.steps=[{path:"UIRoot/PopLayer/UIMain/BtnStartGame",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.tips[e.index].getComponentInChildren(d.default)._endCb=function(){e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle5",!0)},e.scheduleOnce(function(){return t()},.35)}},{path:"UIRoot/PopLayer/StageMap/BtnStart",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,c.EVENT.once(s.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=e.tips[e.index].getComponentInChildren(d.default),n=cc.find(e.steps[e.index].path);o._endCb=function(){e.finger.setParent(n),e.finger.group=n.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle7",!0)},t()},e)}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),c.EVENT.once(s.EventId.ON_GAME_LOADED,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)}),e.tips[e.index].getComponentInChildren(d.default).close.active=!1;var o=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default);e.scheduleOnce(function(){o._player.setRoleAnimation(0,"idle",!0),t()},1)})}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(t,o){o.input=!0,e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)}),e.tips[e.index].getComponentInChildren(d.default).close.active=!1;var n=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default),i=e.tips[e.index].getComponentInChildren(u.default);i._tag=n._player.node,i._enterCb=function(){t(),o.nextStage()}}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(t,o){o.input=!0,e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)}),e.tips[e.index].getComponentInChildren(d.default).close.active=!1;var n=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default);e.tips[e.index].getComponentsInChildren(u.default).forEach(function(e){a.default.inst.generateExp(e.node.position),e._tag=n._player.node,e._enterCb=function(){t(),o.nextStage()}})}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)}),cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default).joystick.onTouchEnd(null),t()}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default);e.scheduleOnce(function(){o._player.setRoleAnimation(0,"idle",!0)}),t()}}],e}return i(e,t),e.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1,p.GameModel.inst.isGuide=!0},e.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy(),p.GameModel.inst.isGuide=!1},r([y(cc.Node)],e.prototype,"finger",void 0),r([y(sp.Skeleton)],e.prototype,"spfinger",void 0),r([y(cc.Node)],e.prototype,"tips",void 0),r([_],e)}(h.default);o.default=g,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Game/PlayerCtrl":"PlayerCtrl","../../Model/GameModel":"GameModel","../GuideCollider":"GuideCollider","../GuideText":"GuideText","./Task":"Task"}],GuideTask2:[function(t,e,o){"use strict";cc._RF.push(e,"0e031xRJmJGnJ8bQvYmJW8b","GuideTask2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/EventId"),s=t("../../Define/UIDefs"),c=t("../../Framework/Event/EventMgr"),l=t("../../Framework/UI/UIMgr"),p=t("./Task"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.finger=null,e.spfinger=null,e.tips=[],e.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnGodRide",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),e.scheduleOnce(function(){return t()},.35)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,c.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle2",!0),t()},e)}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,c.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle3",!0),t()},e)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle4",!0),t()}}],e}return i(e,t),e.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},e.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy(),cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&l.default.inst.open(s.UIType.StoreReview)},r([h(cc.Node)],e.prototype,"finger",void 0),r([h(sp.Skeleton)],e.prototype,"spfinger",void 0),r([h(cc.Node)],e.prototype,"tips",void 0),r([d],e)}(p.default);o.default=f,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UI/UIMgr":"UIMgr","./Task":"Task"}],GuideTask3:[function(t,e,o){"use strict";cc._RF.push(e,"7b34fCXubxK3rLESoN2LBRD","GuideTask3");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/EventId"),s=t("../../Framework/Event/EventMgr"),c=t("../GuideText"),l=t("./Task"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.finger=null,e.spfinger=null,e.tips=[],e.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnTalent",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),e.scheduleOnce(function(){return t()},.35)}},{path:"UIRoot/PopLayer/Talent/List/content/TalentItem",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path),n=e.node;e.finger.setParent(n),e.finger.group=o.group,e.finger.setPosition(n.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.Vec2.ZERO))),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),t()},e)}},{path:"UIRoot/PopLayer/Talent/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),t()}},{path:"UIRoot/PopLayer/Talent/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)}),e.finger.parent=null,e.finger.active=!1,e.tips[e.index].getComponentInChildren(c.default)._endCb=function(){var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle4",!0),t()}}}],e}return i(e,t),e.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},e.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([d(cc.Node)],e.prototype,"finger",void 0),r([d(sp.Skeleton)],e.prototype,"spfinger",void 0),r([d(cc.Node)],e.prototype,"tips",void 0),r([u],e)}(l.default);o.default=h,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../GuideText":"GuideText","./Task":"Task"}],GuideTask4:[function(t,e,o){"use strict";cc._RF.push(e,"16121W6YohAu6EOmYyBYV6+","GuideTask4");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/EventId"),s=t("../../Framework/Event/EventMgr"),c=t("../GuideText"),l=t("./Task"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.finger=null,e.spfinger=null,e.tips=[],e.steps=[{path:"Canvas/menu/btns/btnEquip",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),e.scheduleOnce(function(){return t()},.35)}},{path:"UIRoot/PopLayer/winEquip/middle/equip/view/content/0",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path),n=e.node;e.finger.setParent(n),e.finger.group=o.group,e.finger.setPosition(n.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.Vec2.ZERO))),e.finger.active=!0,e.spfinger.setAnimation(0,"idle10",!0),t()},e)}},{path:"UIRoot/PopLayer/winEquipTips/btnEquip",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle11",!0),t()},e)}},{path:"UIRoot/PopLayer/winEquip/bottom/btnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)}),e.finger.parent=null,e.finger.active=!1,e.tips[e.index].getComponentInChildren(c.default)._endCb=function(){var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle4",!0),t()}}},{path:"Canvas/menu/btnStartGame",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle5",!0),t()}}],e}return i(e,t),e.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},e.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([d(cc.Node)],e.prototype,"finger",void 0),r([d(sp.Skeleton)],e.prototype,"spfinger",void 0),r([d(cc.Node)],e.prototype,"tips",void 0),r([u],e)}(l.default);o.default=h,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../GuideText":"GuideText","./Task":"Task"}],GuideTask5:[function(t,e,o){"use strict";cc._RF.push(e,"f42620whHxAGa0riHOiV+I5","GuideTask5");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/EventId"),s=t("../../Framework/Event/EventMgr"),c=t("./Task"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.finger=null,e.spfinger=null,e.tips=[],e.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnGodRide",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),e.scheduleOnce(function(){return t()},.35)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/ToggleContainer/BtnGodWeapon",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),t()},e)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle2",!0),t()}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle3",!0),t()},e)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle4",!0),t()}}],e}return i(e,t),e.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},e.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([u(cc.Node)],e.prototype,"finger",void 0),r([u(sp.Skeleton)],e.prototype,"spfinger",void 0),r([u(cc.Node)],e.prototype,"tips",void 0),r([p],e)}(c.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./Task":"Task"}],GuideTask6:[function(t,e,o){"use strict";cc._RF.push(e,"704e8Ac9N9EIJDVP3r5+uBI","GuideTask6");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/EventId"),s=t("../../Framework/Event/EventMgr"),c=t("./Task"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.finger=null,e.spfinger=null,e.tips=[],e.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnGodRide",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),e.scheduleOnce(function(){return t()},.35)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/ToggleContainer/BtnGodPet",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),t()},e)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle2",!0),t()}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle3",!0),t()},e)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle4",!0),t()}}],e}return i(e,t),e.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},e.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([u(cc.Node)],e.prototype,"finger",void 0),r([u(sp.Skeleton)],e.prototype,"spfinger",void 0),r([u(cc.Node)],e.prototype,"tips",void 0),r([p],e)}(c.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./Task":"Task"}],GuideTask7:[function(t,e,o){"use strict";cc._RF.push(e,"c8c8fzD44hPHIbq27w9k49b","GuideTask7");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/EventId"),s=t("../../Framework/Event/EventMgr"),c=t("./Task"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.finger=null,e.spfinger=null,e.tips=[],e.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnGodRide",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),e.scheduleOnce(function(){return t()},.35)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/ToggleContainer/BtnGodSkin",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle1",!0),t()},e)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle2",!0),t()}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t){return t&&(t.active=!1)}),e.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle3",!0),t()},e)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(t){e.tips.forEach(function(t,o){return t&&(t.active=o==e.index)});var o=cc.find(e.steps[e.index].path);e.finger.setParent(o),e.finger.group=o.group,e.finger.setPosition(cc.Vec2.ZERO),e.finger.active=!0,e.spfinger.setAnimation(0,"idle4",!0),t()}}],e}return i(e,t),e.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},e.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([u(cc.Node)],e.prototype,"finger",void 0),r([u(sp.Skeleton)],e.prototype,"spfinger",void 0),r([u(cc.Node)],e.prototype,"tips",void 0),r([p],e)}(c.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./Task":"Task"}],GuideText:[function(t,e,o){"use strict";cc._RF.push(e,"a3213YCdtRC5bbnNil8AEY0","GuideText");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Framework/i18n/i18nLabel"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb=null,e.sp=null,e.close=null,e.isTypewriter=!0,e}return i(e,t),e.prototype.init=function(t,e){this._godGuide=t,this._step=e,this.lb.string=e.path},e.prototype.start=function(){this.isTypewriter?(this.typewriter(this.lb.string),this.close.active=!0):this.close.active=!1},e.prototype.typewriter=function(t){this._str=t,this._idx=0,this._writing=!0,this.lb.string=this._str[0],this.schedule(this.write,.05)},e.prototype.write=function(){this._idx>=this._str.length?this.writeEnd():(this._idx++,this.lb.string=this._str.substring(0,this._idx))},e.prototype.writeEnd=function(){this.close.active=!1,this._writing=!1,this.unscheduleAllCallbacks(),this.lb.string=this._str,this._endCb&&this._endCb()},e.prototype.onClick=function(){this.writeEnd()},r([l(a.i18nLabel)],e.prototype,"lb",void 0),r([l(cc.Sprite)],e.prototype,"sp",void 0),r([l(cc.Node)],e.prototype,"close",void 0),r([l],e.prototype,"isTypewriter",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Framework/i18n/i18nLabel":"i18nLabel"}],HpBar:[function(t,e,o){"use strict";cc._RF.push(e,"48f28Q250NOk4VG8Zp9gq8G","HpBar");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/GameItemBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pb=null,e._target=null,e._offsetY=0,e}return i(e,t),e.prototype.setTarget=function(t,e){this._target=t,this._offsetY=e;var o=this._target.node;this.node.setPosition(o.x,o.y+this._offsetY)},e.prototype.update=function(){if(null!=this._target)if(this._target.hp<=0)this.recycle();else{var t=this._target.node;this.node.setPosition(t.x,t.y+this._offsetY),this.pb.progress=this._target.hp/this._target.maxHp}},r([l(cc.ProgressBar)],e.prototype,"pb",void 0),r([c],e)}(a.GameItemBase);o.default=p,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase"}],IconItem:[function(t,e,o){"use strict";cc._RF.push(e,"cb395Fh0ohFMKEp9jUGSbBb","IconItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/Define"),s=t("../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return i(e,t),e.prototype.setIcon=function(t){var e=this;this.icon.spriteFrame=null,this.releaseAutoRes(),this.loadBundleRes("Textures",a.MONEY_ICON_URL[t],cc.SpriteFrame,function(t,o){e.icon.spriteFrame=o})},r([p(cc.Sprite)],e.prototype,"icon",void 0),r([l],e)}(s.default);o.default=u,cc._RF.pop()},{"../../Define/Define":"Define","../../Framework/Res/ResKeeper":"ResKeeper"}],ItemMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f795ehsMAJJYaV/zO2fPlcc","ItemMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../Framework/Res/ResKeeperAddition"),c=t("../Framework/UI/UIMgr"),l=cc._decorator,p=l.ccclass;l.property,function(t){t[t.ScoreFloatDouble=0]="ScoreFloatDouble",t[t.ScoreFloatTreble=1]="ScoreFloatTreble"}(a||(a={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return this._inst||(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.loadItemPool(a.ScoreFloatDouble,"Prefabs","Effect/ScoreFloatDouble"),this.loadItemPool(a.ScoreFloatTreble,"Prefabs","Effect/ScoreFloatTreble")},e.prototype.generateDouble=function(t){var e=this,o=a.ScoreFloatDouble,n=this.get(o);n.setParent(c.default.inst.topLayer),n.setPosition(n.parent.convertToNodeSpaceAR(t));var i=n.getComponent(cc.Animation);i.play("ScoreFloatAnim"),i.once(cc.Animation.EventType.FINISHED,function(){e.put(o,n)})},e.prototype.generateTreble=function(t){var e=this,o=a.ScoreFloatTreble,n=this.get(o);n.setParent(c.default.inst.topLayer),n.setPosition(n.parent.convertToNodeSpaceAR(t));var i=n.getComponent(cc.Animation);i.play("ScoreFloatAnim"),i.once(cc.Animation.EventType.FINISHED,function(){e.put(o,n)})},r([p],e)}(s.default);o.default=u,cc._RF.pop()},{"../Framework/Res/ResKeeperAddition":"ResKeeperAddition","../Framework/UI/UIMgr":"UIMgr"}],Joystick:[function(t,e,o){"use strict";cc._RF.push(e,"e2259RZGDZHkpBfwGyDy6LR","Joystick");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.stick=null,e.radius=100,e._isTouch=!1,e._moveCallback=function(){},e._stopCallback=function(){},e}return i(e,t),e.prototype.start=function(){this._isTouch=!1,this.content.active=!1},e.prototype.setMoveCallback=function(t){this._moveCallback=t},e.prototype.setStopCallback=function(t){this._stopCallback=t},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.onTouchStart=function(t){this._isTouch=!0;var e=t.getLocation();this.content.active=!0,this.content.setPosition(this.content.parent.convertToNodeSpaceAR(e)),this.stick.setPosition(cc.Vec2.ZERO)},e.prototype.onTouchMove=function(t){if(this._isTouch){var e=t.getStartLocation(),o=t.getLocation(),n=cc.Vec2.subtract(o,o,e),i=n.len()/this.radius;i>1&&(i=1);var r=n.normalizeSelf(),a=i*this.radius;this.stick.setPosition(r.x*a,r.y*a),this._moveCallback(r,i)}},e.prototype.onTouchEnd=function(){this._isTouch=!1,this.content.active=!1,this._stopCallback()},r([c(cc.Node)],e.prototype,"content",void 0),r([c(cc.Node)],e.prototype,"stick",void 0),r([c],e.prototype,"radius",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],LayerMgr:[function(t,e,o){"use strict";cc._RF.push(e,"68cacZipe9P7LOegPC/atfX","LayerMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.LayerMgr=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BottomLayer=null,e.BloodLayer=null,e.EffectLayer=null,e.ItemLayer=null,e.WarnLayer=null,e.BulletLayer=null,e.RoleLayer=null,e.RoleHitLayer=null,e.RoleStopLayer=null,e.BuildingLayer=null,e.PlayerLayer=null,e.BulletLayer2=null,e.PlayerBulletLayer=null,e.PlayerBulletLayer2=null,e.EquipLayer=null,e.Equip1Layer=null,e.Equip2Layer=null,e.HpLayer=null,e.NumberLayer=null,e.TopLayer=null,e}var o;return i(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return this._inst?this._inst:(cc.error("LayerMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._inst=this},e.prototype.onDestroy=function(){o._inst=null},r([c({type:cc.Node,tooltip:"\u5e95\u5c42"})],e.prototype,"BottomLayer",void 0),r([c({type:cc.Node,tooltip:"\u8840\u8ff9\u5c42"})],e.prototype,"BloodLayer",void 0),r([c({type:cc.Node,tooltip:"\u7279\u6027\u5c42"})],e.prototype,"EffectLayer",void 0),r([c({type:cc.Node,tooltip:"\u9053\u5177\u5c42"})],e.prototype,"ItemLayer",void 0),r([c({type:cc.Node,tooltip:"\u9884\u8b66\u5c42"})],e.prototype,"WarnLayer",void 0),r([c({type:cc.Node,tooltip:"\u5b50\u5f39\u5c421"})],e.prototype,"BulletLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5c42"})],e.prototype,"RoleLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u53d7\u51fb\u5c42"})],e.prototype,"RoleHitLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u505c\u6b62\u5c42"})],e.prototype,"RoleStopLayer",void 0),r([c({type:cc.Node,tooltip:"\u5efa\u7b51\u5c42"})],e.prototype,"BuildingLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5c42"})],e.prototype,"PlayerLayer",void 0),r([c({type:cc.Node,tooltip:"\u5b50\u5f39\u5c422"})],e.prototype,"BulletLayer2",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5b50\u5f39\u5c421"})],e.prototype,"PlayerBulletLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5b50\u5f39\u5c422"})],e.prototype,"PlayerBulletLayer2",void 0),r([c({type:cc.Node,tooltip:"\u88c5\u5907\u5c42"})],e.prototype,"EquipLayer",void 0),r([c({type:cc.Node,tooltip:"\u88c5\u5907\u5c42"})],e.prototype,"Equip1Layer",void 0),r([c({type:cc.Node,tooltip:"\u88c5\u5907\u5c42"})],e.prototype,"Equip2Layer",void 0),r([c({type:cc.Node,tooltip:"\u7075\u9b42\u5c42"})],e.prototype,"HpLayer",void 0),r([c({type:cc.Node,tooltip:"\u6570\u5b57\u5c42"})],e.prototype,"NumberLayer",void 0),r([c({type:cc.Node,tooltip:"\u9876\u5c42"})],e.prototype,"TopLayer",void 0),o=r([s],e)}(cc.Component);o.LayerMgr=l,cc._RF.pop()},{}],ListItem:[function(t,e,o){"use strict";cc._RF.push(e,"06feetG3s5K2LivmkDXp16c","ListItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property,p=s.disallowMultiple,u=s.menu,d=s.executionOrder,h=t("../Res/ResKeeper");(function(t){t[t.NONE=0]="NONE",t[t.TOGGLE=1]="TOGGLE",t[t.SWITCH=2]="SWITCH"})(a||(a={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.selectedMode=a.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}return i(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case a.TOGGLE:this.selectedFlag.active=t;break;case a.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(this.selectedMode==a.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame}},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},e.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},e.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},e.prototype.createEvt=function(t,e,o){if(void 0===o&&(o=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new cc.Component.EventHandler;return n.target=o||t.node,n.component=t.comName,n.handler=e,n}},e.prototype.showAni=function(t,e,o){var n,i=this;switch(t){case 0:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:2*i.node.height});break;case 1:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:2*i.node.width});break;case 2:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:-2*i.node.height});break;case 3:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:-2*i.node.width});break;default:n=cc.tween(i.node).to(.3,{scale:.1})}(e||o)&&n.call(function(){if(o){i.list._delSingleItem(i.node);for(var t=i.list.displayData.length-1;t>=0;t--)if(i.list.displayData[t].id==i.listId){i.list.displayData.splice(t,1);break}}e()}),n.start()},e.prototype.onClickThis=function(){this.list.selectedId=this.listId},r([l({type:cc.Node,tooltip:!1})],e.prototype,"title",void 0),r([l({type:cc.Enum(a),tooltip:!1})],e.prototype,"selectedMode",void 0),r([l({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>a.NONE}})],e.prototype,"selectedFlag",void 0),r([l({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==a.SWITCH}})],e.prototype,"selectedSpriteFrame",void 0),r([l({tooltip:!1})],e.prototype,"adaptiveSize",void 0),r([c,p(),u("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),d(-5001)],e)}(h.default);o.default=f,cc._RF.pop()},{"../Res/ResKeeper":"ResKeeper"}],List:[function(t,e,o){"use strict";cc._RF.push(e,"b754aCCwAJCqJF5E4E4fWzU","List");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s,c,l=cc._decorator,p=l.ccclass,u=l.property,d=l.disallowMultiple,h=l.menu,f=l.executionOrder,_=l.requireComponent,y=t("./ListItem");(function(t){t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB"})(a||(a={})),function(t){t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE"}(s||(s={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(c||(c={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=a.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=s.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=c.NONE,e.repeatEventSingle=!1,e.selectedEvent=new cc.Component.EventHandler,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return i(e,t),Object.defineProperty(e.prototype,"slideMode",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e,o=this;switch(o.selectedMode){case c.SINGLE:if(!o.repeatEventSingle&&t==o._selectedId)return;e=o.getItemByListId(t);var n=void 0;if(o._selectedId>=0?o._lastSelectedId=o._selectedId:o._lastSelectedId=null,o._selectedId=t,e&&((n=e.getComponent(y.default)).selected=!0),o._lastSelectedId>=0&&o._lastSelectedId!=o._selectedId){var i=o.getItemByListId(o._lastSelectedId);i&&(i.getComponent(y.default).selected=!1)}o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],e,t%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems);break;case c.MULT:if(!(e=o.getItemByListId(t)))return;n=e.getComponent(y.default),o._selectedId>=0&&(o._lastSelectedId=o._selectedId),o._selectedId=t;var r=!n.selected;n.selected=r;var a=o.multSelected.indexOf(t);r&&a<0?o.multSelected.push(t):!r&&a>=0&&o.multSelected.splice(a,1),o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],e,t%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems,r)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=s.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);var o=e.content.getComponent(cc.Layout);if(o&&(o.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var n=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,i=0;i<n;i++)e._createOrUpdateItem2(i);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(i=0;i<e._numItems;i++)e._createOrUpdateItem2(i);e.displayItemNum=e._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._init()},e.prototype.onDestroy=function(){var t=this;cc.isValid(t._itemTmp)&&t._itemTmp.destroy(),cc.isValid(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()},e.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},e.prototype.onDisable=function(){this._unregisterEvent()},e.prototype._registerEvent=function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._unregisterEvent=function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(cc.instantiate(t.templateType==a.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=s.ADHERING&&t._slideMode!=s.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!")},e.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var o=e-1;e=o*o*o*o*o+1}var n=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),i=this._scrollView.getScrollEndedEventTiming(),r=Math.abs(e-1)<=i;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),r&&(this._scrollView._autoScrolling=!1);var a=n.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(a),r),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},e.prototype.setTemplateItem=function(t){if(t){var e=this;e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=cc.size(t.width,t.height);var o=t.getComponent(y.default),n=!1;switch(o||(n=!0),n&&(e.selectedMode=c.NONE),(o=t.getComponent(cc.Widget))&&o.enabled&&(e._needUpdateWidget=!0),e.selectedMode==c.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=e.content.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((i+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var r=e.content.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((r+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},e.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},e.prototype._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:if(e._customSize){var o=e._getFixedSize(null);t=e._leftGap+o.val+e._itemSize.width*(e._numItems-o.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:e._customSize?(o=e._getFixedSize(null),t=e._topGap+o.val+e._itemSize.height*(e._numItems-o.count)+e._lineGap*(e._numItems-1)+e._bottomGap):t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*n+e._lineGap*(n-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var i=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*i+e._columnGap*(i-1)+e._rightGap}}var r=e.content.getComponent(cc.Layout);if(r&&(r.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var a=e._sizeType?e.node.height:e.node.width;e._cyclicPos1=0,a-=e._cyclicPos1,e._cyclicNum=Math.ceil(a/e._allItemSizeNoEdge)+1;var s=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+s,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+s*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=s*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var c=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e.node.height:e.node.width)-c:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e.content.height=l:e.content.width=l},e.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var o=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),n=this._sizeType?cc.v2(0,o):cc.v2(o,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)))}}var i,r,a,s;if(this._calcViewPos(),this._sizeType?(i=this.viewTop,a=this.viewBottom):(r=this.viewRight,s=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,l=0,p=this._numItems-1;if(this._customSize)for(var u=!1;l<=p&&!u;l++)switch(c=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=i&&c.top>=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=i&&c.top>=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0)}}else{var d=this._itemSize.width+this._columnGap,h=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(s-this._leftGap)/d,p=(r-this._leftGap)/d;break;case 2:l=(-r-this._rightGap)/d,p=(-s-this._rightGap)/d;break;case 3:l=(-i-this._topGap)/h,p=(-a-this._topGap)/h;break;case 4:l=(a-this._bottomGap)/h,p=(i-this._bottomGap)/h}for(l=Math.floor(l)*this._colLineNum,p=Math.ceil(p)*this._colLineNum,l<0&&(l=0),--p>=this._numItems&&(p=this._numItems-1);l<=p;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var f=this._lastDisplayData.length,_=this.displayItemNum!=f;if(_&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e}),_=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[f-1]),this._forceUpdate||_)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var y=0;y<this.displayItemNum;y++)this._createOrUpdateItem(this.displayData[y]);this._forceUpdate=!1}this._calcNearestItem()}}},e.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},e.prototype._calcItemPos=function(t){var e,o,n,i,r,a,s,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(t);r=this._leftGap+(this._itemSize.width+this._columnGap)*(t-l.count)+(l.val+this._columnGap*l.count),e=(p=this._customSize[t])>0?p:this._itemSize.width}else r=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;return this.lackCenter&&(r-=this._leftGap,r+=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,left:r,right:a=r+e,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(t),a=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),e=(p=this._customSize[t])>0?p:this._itemSize.width):(a=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width),this.lackCenter&&(a+=this._rightGap,a-=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,right:a,left:r=a-e,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(t),n=-this._topGap-(this._itemSize.height+this._lineGap)*(t-l.count)-(l.val+this._lineGap*l.count),o=(p=this._customSize[t])>0?p:this._itemSize.height):(n=-this._topGap-(this._itemSize.height+this._lineGap)*t,o=this._itemSize.height),this.lackCenter&&(n+=this._topGap,n-=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:n,bottom:i=n-o,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*o};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var p;if(this._customSize)l=this._getFixedSize(t),i=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-l.count)+(l.val+this._lineGap*l.count),o=(p=this._customSize[t])>0?p:this._itemSize.height;else i=this._bottomGap+(this._itemSize.height+this._lineGap)*t,o=this._itemSize.height;return this.lackCenter&&(i-=this._bottomGap,i+=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:n=i+o,bottom:i,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*o}}case cc.Layout.Type.GRID:var u=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(i=(n=-this._topGap-(this._itemSize.height+this._lineGap)*u)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:n=(i=this._bottomGap+(this._itemSize.height+this._lineGap)*u)+this._itemSize.height,c=i+this._itemTmp.anchorY*this._itemSize.height}switch(s=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s+=this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s+=(1-this._itemTmp.anchorX)*this._itemSize.width,s-=(1-this.content.anchorX)*this.content.width,s*=-1}return{id:t,top:n,bottom:i,x:s,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a=(r=this._leftGap+(this._itemSize.width+this._columnGap)*u)+this._itemSize.width,s=r+this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s=(r=(a=-this._rightGap-(this._itemSize.width+this._columnGap)*u)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,s+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:t,left:r,right:a,x:s,y:c}}}},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var o={id:t,x:e.x,y:e.y};return this._sizeType?(o.top=e.y+e.height*(1-e.anchorY),o.bottom=e.y-e.height*e.anchorY):(o.left=e.x-e.width*e.anchorX,o.right=e.x+e.width*(1-e.anchorX)),o},e.prototype.getItemPos=function(t){return this._virtual?this._calcItemPos(t):this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},e.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,o=0;for(var n in this._customSize)parseInt(n)<t&&(e+=this._customSize[n],o++);return{val:e,count:o}},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},e.prototype._onScrollEnded=function(){var t=this;if(t.curScrollIsTouch=!1,null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&cc.tween(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=s.ADHERING||t.adhering?t._slideMode==s.PAGE&&(null!=t._beganPos&&t.curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()},e.prototype._onTouchStart=function(t,e){if(!this._scrollView.hasNestedViewGroup(t,e)&&(this.curScrollIsTouch=!0,t.eventPhase!==cc.Event.AT_TARGET||t.target!==this.node)){for(var o=t.target;null==o._listId&&o.parent;)o=o.parent;this._scrollItem=null!=o._listId?o:t.target}},e.prototype._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==s.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==s.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},e.prototype._onTouchCancelled=function(t,e){var o=this;o._scrollView.hasNestedViewGroup(t,e)||t.simulate||(o._scrollPos=null,o._slideMode==s.ADHERING?(o.adhering&&(o._adheringBarrier=!0),o.adhere()):o._slideMode==s.PAGE&&(null!=o._beganPos?o._pageAdhere():o.adhere()),this._scrollItem=null)},e.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},e.prototype._onItemAdaptive=function(t){if(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height){this._customSize||(this._customSize=Object.create(null));var e=this._sizeType?t.height:t.width;this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},e.prototype._pageAdhere=function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,o=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>o)switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},e.prototype.adhere=function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.node.height:t.node.width);t.scrollTo(t.nearestListId,.7,e)}},e.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var o=this.displayData[e];o&&this._createOrUpdateItem(o)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)},e.prototype._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var o=this._pool.size()>0;if(e=o?this._pool.get():cc.instantiate(this._itemTmp),o&&cc.isValid(e)||(e=cc.instantiate(this._itemTmp),o=!1),e._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),o&&this._needUpdateWidget){var n=e.getComponent(cc.Widget);n&&n.updateAlignment()}e.setSiblingIndex(this.content.childrenCount-1);var i=e.getComponent(y.default);e.listItem=i,i&&(i.listId=t.id,i.list=this,i._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},e.prototype._createOrUpdateItem2=function(t){var e,o=this.content.children[t];o?this._forceUpdate&&this.renderEvent&&(o._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,t%this._actualNumItems)):((o=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(o),e=o.getComponent(y.default),o.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>c.NONE){var e=t.node;switch(this.selectedMode){case c.SINGLE:t.selected=this.selectedId==e._listId;break;case c.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},e.prototype._resetItemSize=function(){},e.prototype._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),o=this.getItemPos(e._listId);e.setPosition(o.x,o.y)},e.prototype.setMultSelected=function(t,e){var o=this;if(o.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)o.multSelected=t;else{var n=void 0,i=void 0;if(e)for(var r=t.length-1;r>=0;r--)n=t[r],(i=o.multSelected.indexOf(n))<0&&o.multSelected.push(n);else for(r=t.length-1;r>=0;r--)n=t[r],(i=o.multSelected.indexOf(n))>=0&&o.multSelected.splice(i,1)}o._forceUpdate=!0,o._onScrolling()}},e.prototype.getMultSelected=function(){return this.multSelected},e.prototype.hasMultSelected=function(t){return this.multSelected&&this.multSelected.indexOf(t)>=0},e.prototype.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,o=t.length;e<o;e++){var n=t[e],i=this.getItemByListId(n);i&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,n%this._actualNumItems)}}},e.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},e.prototype.getItemByListId=function(t){if(this.content)for(var e=this.content.childrenCount-1;e>=0;e--){var o=this.content.children[e];if(o._listId==t)return o}},e.prototype._getOutsideItem=function(){for(var t,e=[],o=this.content.childrenCount-1;o>=0;o--)t=this.content.children[o],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var o=t[e];if(!this._scrollItem||o._listId!=this._scrollItem._listId){o.isCached=!0,this._pool.put(o);for(var n=this._lastDisplayData.length-1;n>=0;n--)if(this._lastDisplayData[n]==o._listId){this._lastDisplayData.splice(n,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},e.prototype.aniDelItem=function(t,e,o){var n=this;if(!n.checkInited()||n.cyclic||!n._virtual)return cc.error("This function is not allowed to be called!");if(!e)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(n._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var i,r=n.getItemByListId(t);if(r){i=r.getComponent(y.default),n._aniDelRuning=!0,n._aniDelCB=e,n._aniDelItem=r,n._aniDelBeforePos=r.position,n._aniDelBeforeScale=r.scale;var a=n.displayData[n.displayData.length-1].id,s=i.selected;i.showAni(o,function(){var o,i,l;if(a<n._numItems-2&&(o=a+1),null!=o){var p=n._calcItemPos(o);n.displayData.push(p),n._virtual?n._createOrUpdateItem(p):n._createOrUpdateItem2(o)}else n._numItems--;if(n.selectedMode==c.SINGLE)s?n._selectedId=-1:n._selectedId-1>=0&&n._selectedId--;else if(n.selectedMode==c.MULT&&n.multSelected.length){var u=n.multSelected.indexOf(t);u>=0&&n.multSelected.splice(u,1);for(var d=n.multSelected.length-1;d>=0;d--)(_=n.multSelected[d])>=t&&n.multSelected[d]--}if(n._customSize){n._customSize[t]&&delete n._customSize[t];var h=Object.create(null),f=void 0;for(var _ in n._customSize){f=n._customSize[_];var y=parseInt(_);h[y-(y>=t?1:0)]=f}n._customSize=h}for(d=null!=o?o:a;d>=t+1;d--)if(r=n.getItemByListId(d)){var g=n._calcItemPos(d-1);i=cc.tween(r).to(.2333,{position:cc.v2(g.x,g.y)}),d<=t+1&&(l=!0,i.call(function(){n._aniDelRuning=!1,e(t),delete n._aniDelCB})),i.start()}l||(n._aniDelRuning=!1,e(t),n._aniDelCB=null)},!0)}else e(t)},e.prototype.scrollTo=function(t,e,o,n){void 0===e&&(e=.5),void 0===o&&(o=null),void 0===n&&(n=!1);var i=this;if(i.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=i._numItems&&(t=i._numItems-1),!i._virtual&&i._layout&&i._layout.enabled&&i._layout.updateLayout();var r,a,s=i.getItemPos(t);if(!s)return!1;switch(i._alignCalcType){case 1:r=s.left,r-=null!=o?i.node.width*o:i._leftGap,s=cc.v2(r,0);break;case 2:r=s.right-i.node.width,r+=null!=o?i.node.width*o:i._rightGap,s=cc.v2(r+i.content.width,0);break;case 3:a=s.top,a+=null!=o?i.node.height*o:i._topGap,s=cc.v2(0,-a);break;case 4:a=s.bottom+i.node.height,a-=null!=o?i.node.height*o:i._bottomGap,s=cc.v2(0,-a+i.content.height)}var c=i.content.getPosition();c=Math.abs(i._sizeType?c.y:c.x);var l=i._sizeType?s.y:s.x;Math.abs((null!=i._scrollPos?i._scrollPos:c)-l)>.5&&(i._scrollView.scrollToOffset(s,e),i._scrollToListId=t,i._scrollToEndTime=(new Date).getTime()/1e3+e,i._scrollToSo=i.scheduleOnce(function(){if(i._adheringBarrier||(i.adhering=i._adheringBarrier=!1),i._scrollPos=i._scrollToListId=i._scrollToEndTime=i._scrollToSo=null,n){var e=i.getItemByListId(t);e&&cc.tween(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},e+.1),e<=0&&i._onScrolling())}},e.prototype._calcNearestItem=function(){var t,e,o,n,i,r,a=this;a.nearestListId=null,a._virtual&&a._calcViewPos(),o=a.viewTop,n=a.viewRight,i=a.viewBottom,r=a.viewLeft;for(var s=!1,c=0;c<a.content.childrenCount&&!s;c+=a._colLineNum)if(t=a._virtual?a.displayData[c]:a._calcExistItemPos(c))switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:t.right>=r&&(a.nearestListId=t.id,r>e&&(a.nearestListId+=a._colLineNum),s=!0);break;case 2:t.left<=n&&(a.nearestListId=t.id,n<e&&(a.nearestListId+=a._colLineNum),s=!0);break;case 3:t.bottom<=o&&(a.nearestListId=t.id,o<e&&(a.nearestListId+=a._colLineNum),s=!0);break;case 4:t.top>=i&&(a.nearestListId=t.id,i>e&&(a.nearestListId+=a._colLineNum),s=!0)}if((t=a._virtual?a.displayData[a.displayItemNum-1]:a._calcExistItemPos(a._numItems-1))&&t.id==a._numItems-1)switch(e=a._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,a._alignCalcType){case 1:n>e&&(a.nearestListId=t.id);break;case 2:r<e&&(a.nearestListId=t.id);break;case 3:i<e&&(a.nearestListId=t.id);break;case 4:o>e&&(a.nearestListId=t.id)}},e.prototype.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},e.prototype.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},e.prototype.skipPage=function(t,e){var o=this;if(o.checkInited())return o._slideMode!=s.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=o._numItems||o.curPageNum!=t&&(o.curPageNum=t,o.pageChangeEvent&&cc.Component.EventHandler.emitEvents([o.pageChangeEvent],t),o.scrollTo(t,e)))},e.prototype.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize=Object.create(null);var o=cc.instantiate(e._itemTmp);e.content.addChild(o);for(var n=0;n<t;n++)cc.Component.EventHandler.emitEvents([e.renderEvent],o,n),o.height==e._itemSize.height&&o.width==e._itemSize.width||(e._customSize[n]=e._sizeType?o.height:o.width);return Object.keys(e._customSize).length||(e._customSize=null),o.removeFromParent(),o.destroy&&o.destroy(),e._customSize}},r([u({type:cc.Enum(a),tooltip:!1})],e.prototype,"templateType",void 0),r([u({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==a.NODE}})],e.prototype,"tmpNode",void 0),r([u({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==a.PREFAB}})],e.prototype,"tmpPrefab",void 0),r([u()],e.prototype,"_slideMode",void 0),r([u({type:cc.Enum(s),tooltip:!1})],e.prototype,"slideMode",null),r([u({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==s.PAGE}})],e.prototype,"pageDistance",void 0),r([u({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==s.PAGE}})],e.prototype,"pageChangeEvent",void 0),r([u()],e.prototype,"_virtual",void 0),r([u({type:cc.Boolean,tooltip:!1})],e.prototype,"virtual",null),r([u({tooltip:!1,visible:function(){var t=this.slideMode==s.NORMAL;return t||(this.cyclic=!1),t}})],e.prototype,"cyclic",void 0),r([u({tooltip:!1,visible:function(){return this.virtual}})],e.prototype,"lackCenter",void 0),r([u({tooltip:!1,visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],e.prototype,"lackSlide",void 0),r([u({type:cc.Integer})],e.prototype,"_updateRate",void 0),r([u({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],e.prototype,"updateRate",null),r([u({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],e.prototype,"frameByFrameRenderNum",void 0),r([u({type:cc.Component.EventHandler,tooltip:!1})],e.prototype,"renderEvent",void 0),r([u({type:cc.Enum(c),tooltip:!1})],e.prototype,"selectedMode",void 0),r([u({tooltip:!1,visible:function(){return this.selectedMode==c.SINGLE}})],e.prototype,"repeatEventSingle",void 0),r([u({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>c.NONE}})],e.prototype,"selectedEvent",void 0),r([u({serializable:!1})],e.prototype,"_numItems",void 0),r([p,d(),h("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),_(cc.ScrollView),f(-5e3)],e)}(cc.Component);o.default=g,cc._RF.pop()},{"./ListItem":"ListItem"}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"7dc748ZYolDSqbPZgpxd+Tv","Loading");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Framework/UIBase"),s=t("../../Define/EventId"),c=t("../../Framework/Event/EventMgr"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTip=null,e.lblProgress=null,e.progress=null,e}return i(e,t),e.prototype.onLoad=function(){this.lblProgress.string=""},e.prototype.start=function(){},e.prototype.onOpen=function(){this.progress.progress=0},e.prototype.onEnable=function(){c.EVENT.on(s.EventId.ON_UPDATE_LOADING_TTP,this.onUpdateTip,this),c.EVENT.on(s.EventId.ON_UPDATE_LOADING_PROGRESS,this.onUpdateProgress,this),c.EVENT.on(s.EventId.ON_UPDATE_LOADING_END,this.onUpdateEnd,this)},e.prototype.onDisable=function(){c.EVENT.off(s.EventId.ON_UPDATE_LOADING_TTP,this.onUpdateTip,this),c.EVENT.off(s.EventId.ON_UPDATE_LOADING_PROGRESS,this.onUpdateProgress,this),c.EVENT.off(s.EventId.ON_UPDATE_LOADING_END,this.onUpdateEnd,this)},e.prototype.onUpdateTip=function(t){this.lblTip.string=t},e.prototype.onUpdateProgress=function(t,e){var o=t/e;o>this.progress.progress&&(this.progress.progress=o,this.lblProgress.string=Math.floor(t/e*100)+"%")},e.prototype.onUpdateEnd=function(){this.progress.node.active=!1,this.close()},e.prototype.close=function(){t.prototype.close.call(this),this.progress.node.active=!1},r([u(cc.Label)],e.prototype,"lblTip",void 0),r([u(cc.Label)],e.prototype,"lblProgress",void 0),r([u(cc.ProgressBar)],e.prototype,"progress",void 0),r([p],e)}(a.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase"}],LocalKey:[function(t,e,o){"use strict";cc._RF.push(e,"d7c60hHZixC2KEMWvtpS6f3","LocalKey"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalKey=void 0;var n=function(){function t(){}return t.SoundVolum="LocalKey.SoundVolum",t.TestLocalAccount="LocalKey.TestLocalAccount",t.GuideStep="LocalKey.GuideStep",t.AudioVolumeMusic="LocalKey.AudioVolumeMusic",t.AudioVolumeMusicMute="LocalKey.AudioVolumeMute",t.AudioVolumeEffect="LocalKey.AudioVolumeEffect",t.AudioVolumeEffectMute="LocalKey.AudioVolumeEffectMute",t.GamePower="Localkey.GamePower",t.GameLevel="Localkey.GameLevel",t.NewPlayer="Localkey.NewPlayer",t.GameLeaveTime="Localkey.GameLeaveTime",t.GameEnterTime="Localkey.GameEnterTime",t}();o.LocalKey=n,cc._RF.pop()},{}],LocalStorageMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cffcemub7tG4LuvC9orVgxn","LocalStorageMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStorageMgr=void 0;var n=function(){function t(){}return t.setHashID=function(e){t.hashID=e,t.setItem("hashID",e,!0)},t.getHashID=function(){return t.getItem("hashID",!0)},t.setItem=function(e,o,n){void 0===n&&(n=!1),n?cc.sys.localStorage.setItem(e,o):cc.sys.localStorage.setItem(t.hashID+"_"+e,o)},t.getItem=function(e,o){return void 0===o&&(o=!1),o?cc.sys.localStorage.getItem(e):cc.sys.localStorage.getItem(t.hashID+"_"+e)},t.removeItem=function(e,o){void 0===o&&(o=!1),o?cc.sys.localStorage.removeItem(e):cc.sys.localStorage.removeItem(t.hashID+"_"+e)},t.clearAll=function(){cc.sys.localStorage.clear()},t}();o.LocalStorageMgr=n,cc._RF.pop()},{}],MagnetModel:[function(t,e,o){"use strict";cc._RF.push(e,"a33fburA2BNhYvf+kV6fJAg","MagnetModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.MagnetModel=void 0;var n=t("../Controller/TableMgr"),i=t("../Framework/Storage/LocalStorageMgr"),r=function(){function t(){this._active=!1,this._stageTime=0,this._endTime=0,this._free=6e5,this._fristAd=216e5,this._nextAd=36e5,this._max=432e5,this._count=0,this._free=Number(n.TABLE.getGlobal("CiXiXiaoYing_free")),this._fristAd=Number(n.TABLE.getGlobal("CiXiXiaoYing_fristAd")),this._nextAd=Number(n.TABLE.getGlobal("CiXiXiaoYing_nextAd")),this._max=Number(n.TABLE.getGlobal("CiXiXiaoYing_max")),this._count=Number(i.LocalStorageMgr.getItem("CiXiXiaoYing_count"))||0,this._endTime=Number(i.LocalStorageMgr.getItem("CiXiXiaoYing_endTime"))||0}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stageTime",{get:function(){return this._stageTime},set:function(t){this._stageTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this._endTime},set:function(t){this._endTime=t,i.LocalStorageMgr.setItem("CiXiXiaoYing_endTime",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"free",{get:function(){return this._free},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fristAd",{get:function(){return this._fristAd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextAd",{get:function(){return this._nextAd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},set:function(t){this._count=t,i.LocalStorageMgr.setItem("CiXiXiaoYing_count",""+t)},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this._active},t.prototype.isActiveStage=function(){return this._active},t._inst=null,t}();o.MagnetModel=r,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr"}],Magnet:[function(t,e,o){"use strict";cc._RF.push(e,"3de38KPKf5Eo5yHJ/hIr2JP","Magnet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Define/EventId"),c=t("../../../Framework/Audio/AudioMgr"),l=t("../../../Framework/Event/EventMgr"),p=t("../../../Framework/i18n/i18nMgr"),u=t("../../../Framework/UI/UIFacade"),d=t("../../../Framework/UIBase"),h=t("../../../Model/MagnetModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeNode=null,e.freeNode=null,e.adNode=null,e.adTxt=null,e.freeTxt=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.onOpen=function(){this.refresh(),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},e.prototype.onClose=function(){l.EVENT.emit(s.EventId.ON_GAME_RESUME)},e.prototype.refresh=function(){h.MagnetModel.inst.isActive()?(this.activeNode.active=!0,this.freeNode.active=!1,this.adNode.active=!1):(this.activeNode.active=!1,this.freeNode.active=0==h.MagnetModel.inst.count,this.adNode.active=0!=h.MagnetModel.inst.count)},e.prototype.onClickFree=function(){h.MagnetModel.inst.active=!0,h.MagnetModel.inst.count++,u.UIFacade.showToast(p.i18nMgr.getLabel("CiXiXiaoYing/active1")),c.AudioMgr.inst.playEffectByName("ui_tips"),this.close()},e.prototype.onClickAd=function(){var t=this;a.default.inst.showAd("\u78c1\u5438\u6548\u5e94",function(){h.MagnetModel.inst.active=!0,h.MagnetModel.inst.count++,u.UIFacade.showToast(p.i18nMgr.getLabel("CiXiXiaoYing/active1")),c.AudioMgr.inst.playEffectByName("ui_tips"),t.close()})},r([y(cc.Node)],e.prototype,"activeNode",void 0),r([y(cc.Node)],e.prototype,"freeNode",void 0),r([y(cc.Node)],e.prototype,"adNode",void 0),r([y(cc.Label)],e.prototype,"adTxt",void 0),r([y(cc.Label)],e.prototype,"freeTxt",void 0),r([_],e)}(d.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/MagnetModel":"MagnetModel"}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"94684dGaT9HWLMhvdQlRcUr","Main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../Controller/GameItemMgr"),l=t("../../Controller/TableMgr"),p=t("../../Define/Define"),u=t("../../Define/EventId"),d=t("../../Define/StaticData"),h=t("../../Define/UIDefs"),f=t("../../Framework/Audio/AudioMgr"),_=t("../../Framework/Event/EventMgr"),y=t("../../Framework/Scene/SceneBase"),g=t("../../Framework/UI/UIMgr"),m=t("../../Framework/VM"),v=t("../../Model/GameModel"),M=t("../../Model/MagnetModel"),b=t("../../Model/UserModel"),E=cc._decorator,O=E.ccclass,I=E.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainCamera=null,e.bgCamera=null,e.bg=null,e._bgScale=1,e._bgMt=null,e._bgSize=null,e}return i(e,t),e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(){return cc.PhysicsManager.FIXED_TIME_STEP=1/30,cc.PhysicsManager.VELOCITY_ITERATIONS=5,cc.PhysicsManager.POSITION_ITERATIONS=5,(t=cc.director.getPhysicsManager()).enabled=!0,t.enabledAccumulator=!0,t.gravity=cc.Vec2.ZERO,[2]})})},e.prototype.start=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(){return this._bgScale=Number(l.TABLE.getGlobal("ZhanDouShiYe")),this.mainCamera.zoomRatio=this._bgScale,this.bgCamera.zoomRatio=this._bgScale,t=cc.view.getVisibleSize(),this.bg.node.width=t.width/this._bgScale,this.bg.node.height=t.height/this._bgScale,d.StaticData.maxX=t.width/2/this._bgScale,d.StaticData.maxY=t.height/2/this._bgScale,d.StaticData.minX=-t.width/2/this._bgScale,d.StaticData.minY=-t.height/2/this._bgScale,d.StaticData.radius=100+Math.sqrt(Math.pow(t.width/2,2)+Math.pow(t.height/2,2))/this._bgScale,d.StaticData.mainCamera=this.mainCamera,[2]})})},e.prototype.onEnable=function(){m.VM.bindPath("UserModel._background",this.updateBackground,this),_.EVENT.on(u.EventId.ON_GAME_PAUSE,this.pause,this),_.EVENT.on(u.EventId.ON_GAME_RESUME,this.resume,this),_.EVENT.on(u.EventId.ON_GAME_START,this.gameStart,this),_.EVENT.on(u.EventId.ON_GAME_LOADED,this.gameLoaded,this),_.EVENT.on(u.EventId.ON_GAME_RESULT,this.gameResult,this),_.EVENT.on(u.EventId.ON_GAME_OVER,this.gameOver,this),_.EVENT.on(u.EventId.ON_GAME_UPDATE_ROLE_POS,this.updateCamera,this)},e.prototype.onDisable=function(){m.VM.unbindPath("UserModel._background",this.updateBackground,this),_.EVENT.off(u.EventId.ON_GAME_PAUSE,this.pause,this),_.EVENT.off(u.EventId.ON_GAME_RESUME,this.resume,this),_.EVENT.off(u.EventId.ON_GAME_START,this.gameStart,this),_.EVENT.off(u.EventId.ON_GAME_LOADED,this.gameLoaded,this),_.EVENT.off(u.EventId.ON_GAME_RESULT,this.gameResult,this),_.EVENT.off(u.EventId.ON_GAME_OVER,this.gameOver,this),_.EVENT.off(u.EventId.ON_GAME_UPDATE_ROLE_POS,this.updateCamera,this)},e.prototype.updateBackground=function(t){var e=this;v.GameModel.inst.loadRef++,this.loadBundleRes("Textures",p.BACKGROUND_URL[t],cc.SpriteFrame,function(t,o){v.GameModel.inst.loadRef--;var n=e.bg.spriteFrame;e.bg.spriteFrame=null,e.bg.spriteFrame=o,e.releaseAsset(n),e._bgMt=e.bg.getMaterial(0),e._bgSize=e.bg.spriteFrame.getOriginalSize()})},e.prototype.clearBackground=function(){var t=this.bg.spriteFrame;this.bg.spriteFrame=null,this.releaseAsset(t),this._bgMt=null,this._bgSize=null},e.prototype.pause=function(){v.GameModel.inst.isPause||(v.GameModel.inst.isPause=!0)},e.prototype.resume=function(){v.GameModel.inst.isPause&&(v.GameModel.inst.isPause=!1)},e.prototype.gameStart=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return g.default.inst.delayUIWaitAnim(cc.macro.REPEAT_FOREVER),g.default.inst.close(h.UIType.GameStart),g.default.inst.close(h.UIType.UIMain),p.Config.isAdBanner?g.default.inst.open(h.UIType.UIGameB):g.default.inst.open(h.UIType.UIGame),[4,c.default.inst.init()];case 1:return t.sent(),v.GameModel.inst.isLoad=!0,M.MagnetModel.inst.active=!1,this.mainCamera.node.setPosition(0,0),this.updateBackground(b.UserModel.inst.background),_.EVENT.emit(u.EventId.ON_GAME_LOAD),[2]}})})},e.prototype.gameLoaded=function(){v.GameModel.inst.isLoad=!1,g.default.inst.close(h.UIType.Loading),f.AudioMgr.inst.playBgm("bg1"),_.EVENT.emit(u.EventId.ON_GAME_RESUME)},e.prototype.gameResult=function(){g.default.inst.open(h.UIType.GameOver)},e.prototype.gameOver=function(){g.default.inst.delayUIWaitAnim(cc.macro.REPEAT_FOREVER),p.Config.isAdBanner?g.default.inst.close(h.UIType.UIGameB):g.default.inst.close(h.UIType.UIGame),g.default.inst.open(h.UIType.GameStart),g.default.inst.open(h.UIType.UIMain),f.AudioMgr.inst.playBgm("bgMenu"),c.default.inst.releaseAutoRes(),_.EVENT.emit(u.EventId.ON_GAME_PAUSE),this.clearBackground()},e.prototype.updateCamera=function(t){var e=this.mainCamera.node.getPosition(),o=t,n=e.x+.1*(o.x-e.x),i=e.y+.1*(o.y-e.y);this.mainCamera.node.setPosition(n,i);var r=cc.v2(n/this._bgSize.width,-i/this._bgSize.height);this._bgMt&&this._bgMt.setProperty("uOffset",r)},e.prototype.update=function(t){var e=v.GameModel.inst;e.isPause||e.isGuide||(e.time+=t)},r([I(cc.Camera)],e.prototype,"mainCamera",void 0),r([I(cc.Camera)],e.prototype,"bgCamera",void 0),r([I(cc.Sprite)],e.prototype,"bg",void 0),r([O],e)}(y.default);o.default=S,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Controller/TableMgr":"TableMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/StaticData":"StaticData","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Scene/SceneBase":"SceneBase","../../Framework/UI/UIMgr":"UIMgr","../../Framework/VM":"VM","../../Model/GameModel":"GameModel","../../Model/MagnetModel":"MagnetModel","../../Model/UserModel":"UserModel"}],ModuleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"79e58bG+AhGR4cWmLwls6v2","ModuleMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ModuleMgr=void 0;var r=t("../Framework/Utils/Singleton"),a=t("./NewYear/index"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){a.NewYear.inst.init()},e}(r.Singleton());o.ModuleMgr=s,cc._RF.pop()},{"../Framework/Utils/Singleton":"Singleton","./NewYear/index":"index"}],MonsterCircle:[function(t,e,o){"use strict";cc._RF.push(e,"a9d9ftUbJRH0LmXD4T1Y0KA","MonsterCircle");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Component/MonsterComponent"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeDur=0,e}return i(e,t),e.prototype.updateMonster=function(e,o){t.prototype.updateMonster.call(this,e,o),this._lifeDur=e.lifeMax;var n=o*Math.floor(360/e.count),i=e.radMin,r=cc.math.toRadian(n),a=Math.cos(r)*i,s=Math.sin(r)*i,c=this._game.player.node.getPosition();c.x+=a,c.y+=s,this.node.setPosition(c)},e.prototype.updatePos=function(t){if(!this._isPauseMove&&!(this._stopTime>0||this.hp<=0)){this._orientation.x=t.x-this.node.x,this._orientation.y=t.y-this.node.y,this._orientation.normalizeSelf(),(this._orientation.x<0&&this.node.scaleX<0||this._orientation.x>0&&this.node.scaleX>0)&&(this.node.scaleX*=-1);var e=this.moveSpeed;this._linearVelocity.x=this._orientation.x*e,this._linearVelocity.y=this._orientation.y*e,this._rBody.linearVelocity=this._linearVelocity}},e.prototype.update=function(e){t.prototype.update.call(this,e),this._lifeDur-=e,this._lifeDur<=0&&this.recycle()},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"../Component/MonsterComponent":"MonsterComponent"}],MonsterComponent:[function(t,e,o){"use strict";cc._RF.push(e,"110c2wNm8dGb5z46gzi+5EA","MonsterComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/GameItemMgr"),s=t("../../Controller/LayerMgr"),c=t("../../Controller/TableMgr"),l=t("../../Define/EventId"),p=t("../../Define/StaticData"),u=t("../../Framework/Audio/AudioMgr"),d=t("../../Framework/Event/EventMgr"),h=t("../../Framework/Utils/Utils"),f=t("../../Model/GameModel"),_=t("../../Model/WeaponModel"),y=t("../NpcBase"),g=cc._decorator,m=g.ccclass,v=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rBody=null,e._collider=null,e._info=null,e._spr=null,e._ani=null,e._spine=null,e._stopTime=0,e._hitTime=0,e._repel=0,e._isPauseMove=!1,e._material=[],e._materialVariants=[],e._orientation=cc.v2(),e._linearVelocity=cc.v2(),e._v3=cc.v3(),e._game=f.GameModel.inst,e._siblingIndex=0,e}return i(e,t),Object.defineProperty(e.prototype,"sprite",{get:function(){return this._spr},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spine",{get:function(){return this._spine},enumerable:!1,configurable:!0}),e.prototype.setMaterials=function(t){0==this._materialVariants.length&&(this._material=t,null!=this._spr?this._materialVariants=[cc.MaterialVariant.create(t[0],this._spr),cc.MaterialVariant.create(t[0],this._spr),cc.MaterialVariant.create(t[0],this._spr)]:this._materialVariants=[cc.MaterialVariant.create(t[1],this._spine),cc.MaterialVariant.create(t[1],this._spine),cc.MaterialVariant.create(t[1],this._spine)],this._materialVariants[1].define("IS_HIT",!0),this._materialVariants[2].define("IS_STOP",!0),this.setDefaultMaterial())},e.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider),this._spr=this.node.getComponentInChildren(cc.Sprite),this._ani=this.node.getComponentInChildren(cc.Animation),this._spine=this.node.getComponentInChildren(sp.Skeleton)},e.prototype.onEnable=function(){this.node.on("hit",this.onHit,this),this.node.on("stop",this.onStop,this),this.node.on("repel",this.onRepel,this),this.node.on("pauseMove",this.onPauseMove,this),this.node.on("resumeMove",this.onResumeMove,this),d.EVENT.on(l.EventId.ON_GAME_PAUSE,this.pause,this),d.EVENT.on(l.EventId.ON_GAME_RESUME,this.resume,this),d.EVENT.on(l.EventId.ON_GAME_UPDATE_ROLE_POS,this.updatePos,this),d.EVENT.on(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},e.prototype.onDisable=function(){this.node.off("hit",this.onHit,this),this.node.off("stop",this.onStop,this),this.node.off("repel",this.onRepel,this),this.node.off("pauseMove",this.onPauseMove,this),this.node.off("resumeMove",this.onResumeMove,this),d.EVENT.off(l.EventId.ON_GAME_PAUSE,this.pause,this),d.EVENT.off(l.EventId.ON_GAME_RESUME,this.resume,this),d.EVENT.off(l.EventId.ON_GAME_UPDATE_ROLE_POS,this.updatePos,this),d.EVENT.off(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},e.prototype.pause=function(){this._rBody.awake=!1},e.prototype.resume=function(){this._rBody.awake=!0},e.prototype.onHit=function(t){if(!(this.hp<=0)){this._v3.x=this.node.x,this._v3.y=this.node.y+40;var e=t.damage.damage;t.damage.crit?a.default.inst.generateHitNumC(this._v3,e):a.default.inst.generateHitNum(this._v3,e),a.default.inst.generateHitEffect(this._v3),u.AudioMgr.inst.playEffectByName("hit"),this.hp-=e,this.hp<=0&&this.onDead(),this._stopTime<=0&&(this._hitTime=.5,this.setHitMaterial())}},e.prototype.onStop=function(t){this._stopTime=t,this._rBody.linearVelocity=cc.Vec2.ZERO,this.setStopMaterial()},e.prototype.onRepel=function(t){this._repel=t},e.prototype.onPauseMove=function(){this._isPauseMove=!0,this._rBody.linearVelocity=cc.Vec2.ZERO},e.prototype.onResumeMove=function(){this._isPauseMove=!1},e.prototype.onDead=function(){var t=this;this._stopTime=0,this._rBody.linearVelocity=cc.Vec2.ZERO,this.scheduleOnce(function(){return t._rBody.active=!1}),this.onDeathAni(this.recycle.bind(this)),this.node.emit("dead"),a.default.inst.generateExp(this.node.position);var e=_.WeaponModel.inst.magicAttrs.a_expball_p;e>0&&e>Math.random()&&((i=this.node.position).x+=cc.math.randomRange(-50,50),i.y+=cc.math.randomRange(-50,50),a.default.inst.generateExp(i));var o=this._info.fProb;if(o>0){var n=_.WeaponModel.inst.magicAttrs.a_drop_p;n>0&&(o+=n),o>Math.random()&&((i=this.node.position).x+=cc.math.randomRange(-50,50),i.y+=cc.math.randomRange(-50,50),a.default.inst.generateFood(i))}this._info.tElite>0&&((i=this.node.position).x+=cc.math.randomRange(-50,50),i.y+=cc.math.randomRange(-50,50),a.default.inst.generateBox(i));var i,r=this.getEquip();r&&((i=this.node.position).x+=cc.math.randomRange(-50,50),i.y+=cc.math.randomRange(-50,50),a.default.inst.generateEquip(i,r))},e.prototype.getEquip=function(){var t=this._info.dorpFightEquip;if(0!=t.length){var e=h.default.getRandWeightIndex(t);if(0!=e){var o=e-1,n=c.TABLE.getTable("FightEquip").filter(function(t){if(f.GameModel.inst.fightList.find(function(e){return e&&e.type==t.type&&e.quality>=t.quality}))return!1;if(t.quality==o&&t.skill){var e=_.WeaponModel.inst.weaponInfos[t.skill];return!!(e&&e.getLevel()>=t.skillLevel)}return t.quality==o}),i=h.default.RandomSome(n,1)[0];if(null!=i)return i}}},e.prototype.onDeathAni=function(t){var e,o,n,i,r,a,s=this,c=[];if([null===(e=this._spine)||void 0===e?void 0:e.findAnimation("death1"),null===(o=this._spine)||void 0===o?void 0:o.findAnimation("death2"),null===(n=this._spine)||void 0===n?void 0:n.findAnimation("death3"),null===(i=this._spine)||void 0===i?void 0:i.findAnimation("death10a"),null===(r=this._spine)||void 0===r?void 0:r.findAnimation("death10b"),null===(a=this._spine)||void 0===a?void 0:a.findAnimation("die")].forEach(function(t){return t&&c.push(t)}),c.length>0){var l=c[Math.floor(Math.random()*c.length)];this._spine.setAnimation(0,l.name,!1),this._spine.setCompleteListener(function(){s._spine.setCompleteListener(function(){}),t&&t()})}else cc.tween(this.node).to(.5,{opacity:0}).call(t).start();return null},e.prototype.setDefaultMaterial=function(){this._stopTime=0,this._hitTime=0,null!=this._spr?(this._ani.play(),this._spr.setMaterial(0,this._materialVariants[0])):(this._spine.timeScale=1,this._spine.setMaterial(0,this._materialVariants[0])),this.node.parent!=s.LayerMgr.inst.RoleLayer&&(this.node.setParent(s.LayerMgr.inst.RoleLayer),this.node.setSiblingIndex(this._siblingIndex))},e.prototype.setHitMaterial=function(){if(!(this._stopTime>0)){if(null!=this._spr){if(this._spr.getMaterial(0)==this._materialVariants[1])return;this._spr.setMaterial(0,this._materialVariants[1])}else{if(this._spine.getMaterial(0)==this._materialVariants[1])return;this._spine.setMaterial(0,this._materialVariants[1])}this.node.parent!=s.LayerMgr.inst.RoleHitLayer&&(this.node.setParent(s.LayerMgr.inst.RoleHitLayer),this.node.setSiblingIndex(this._siblingIndex))}},e.prototype.setStopMaterial=function(){if(null!=this._spr){if(this._spr.getMaterial(0)==this._materialVariants[2])return;this._ani.pause(),this._spr.setMaterial(0,this._materialVariants[2])}else{if(this._spine.getMaterial(0)==this._materialVariants[2])return;this._spine.timeScale=0,this._spine.setMaterial(0,this._materialVariants[2])}this.node.parent!=s.LayerMgr.inst.RoleStopLayer&&(this.node.setParent(s.LayerMgr.inst.RoleStopLayer),this.node.setSiblingIndex(this._siblingIndex))},e.prototype.updatePos=function(t){if(!this._isPauseMove&&!(this._stopTime>0||this.hp<=0)){if(this._orientation.x=t.x-this.node.x,this._orientation.y=t.y-this.node.y,this._orientation.len()>p.StaticData.radius){var e=cc.math.randomRange(this._info.radMin,this._info.radMax),o=new cc.Vec2(e,0),n=cc.math.randomRange(0,2*Math.PI);return o.rotateSelf(n),o.x+=this._game.player.node.x,o.y+=this._game.player.node.y,this.node.setPosition(o),this.node.opacity=0,void cc.tween(this.node).to(.2,{opacity:255}).start()}this._orientation.normalizeSelf(),(this._orientation.x<0&&this.node.scaleX<0||this._orientation.x>0&&this.node.scaleX>0)&&(this.node.scaleX*=-1);var i=this.moveSpeed-this._repel;this._linearVelocity.x=this._orientation.x*i,this._linearVelocity.y=this._orientation.y*i,this._rBody.linearVelocity=this._linearVelocity}},e.prototype.updateMonster=function(t){this._info=t,this.hp=this._info.hp,this.crit=0,this.critDmg=2,this.reduce=0,this.touchDelta=0,this.node.scale=this._info.scale,this._siblingIndex=this._info.mid,this._stopTime=0,this._hitTime=0,this._repel=0,this._isPauseMove=!1,this._spine&&this._spine.setAnimation(0,this._spine.defaultAnimation,!0),t.tElite&&(this._siblingIndex+=100,a.default.inst.generateHpBar(this,t.hpHeight*t.scale)),this._rBody.active=!0,this._rBody.gravityScale=10,this._collider.tag=this.atk,this.setDefaultMaterial(),this.updateAttrs()},e.prototype.updateAttrs=function(){this.moveSpeed=this._info.speed,this.maxHp=this._info.hp,this.atk=this._info.atk;var t=_.WeaponModel.inst.magicAttrs.s_espeed_p;t>0&&(this.moveSpeed-=t*this._info.speed);var e=_.WeaponModel.inst.magicAttrs.s_ehp_p;e>0&&(this.maxHp-=e*this._info.hp),this.hp>this.maxHp&&(this.hp=this.maxHp)},e.prototype.update=function(t){if(!this._game.isPause){if(this._repel>0&&(this._repel-=t*this.moveSpeed*2,this._rBody.active||(this.node.x-=this._orientation.x*this._repel*t,this.node.y-=this._orientation.y*this._repel*t)),this._stopTime>0)return this._stopTime-=t,void(this._stopTime<=0&&this.setDefaultMaterial());this._hitTime>0&&(this._hitTime-=t,this._hitTime<=0&&this.setDefaultMaterial())}},e.prototype.recycle=function(){},r([m],e)}(y.NpcBase));o.default=v,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Define/StaticData":"StaticData","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Utils/Utils":"Utils","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","../NpcBase":"NpcBase"}],MonsterCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"83b7dTRJ+1BzbSMcP42uJg4","MonsterCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Controller/GameBase"),s=t("../Controller/LayerMgr"),c=t("../Controller/TableMgr"),l=t("../Controller/TimeMgr"),p=t("../Define/EventId"),u=t("../Define/UIDefs"),d=t("../Framework/Event/EventMgr"),h=t("../Framework/UI/UIMgr"),f=t("../Model/GameModel"),_=t("../Model/UserModel"),y=t("./Component/MonsterComponent"),g=t("./Monster/Weapon/MonsterWeapon"),m=cc._decorator,v=m.ccclass,M=m.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprMaterial=null,e.spineMaterial=null,e._stageInfos=Object.create(null),e._stageMonsters=Object.create(null),e._execDelay=[],e._loadList=Object.create(null),e._curTime=0,e._nextTime=0,e._keyTime=[],e._timeStamp=0,e._monsterMax=120,e._batcher=null,e._game=f.GameModel.inst,e._inactiveStamp=0,e._inactiveInterval=30,e}return i(e,t),e.prototype.start=function(){this._monsterMax=Number(c.TABLE.getGlobal("StageMonsterMax"))},e.prototype.gameStart=function(){var t=this,e=c.TABLE.getTable("stage_"+_.UserModel.inst.selectStage);null==e&&(e=c.TABLE.getTable("stage_1")),this._timeStamp=0,this._curTime=-1,this._nextTime=0,this._keyTime.length=0,this._stageInfos=Object.create(null),this._stageMonsters=Object.create(null),e.forEach(function(e){null==t._stageInfos[e.time]&&(t._stageInfos[e.time]=[],t._keyTime.push(e.time)),t._stageInfos[e.time].push(e),t._stageMonsters[""+e.type+e.mid]="/Game/Monster/"+e.type+e.mid,f.GameModel.inst.waveMax=e.wave})},e.prototype.gameResult=function(){},e.prototype.gameOver=function(){this._execDelay.length=0,this.recycle(),this.releaseAutoRes()},e.prototype.generateMonster=function(t,e){var o=this,n=""+t.type+t.mid;if(null!=this._prefabList[n]){var i=this.get(n),r=cc.math.randomRange(t.radMin,t.radMax),a=new cc.Vec2(r,0),c=cc.math.randomRange(0,2*Math.PI);a.rotateSelf(c),a.x+=f.GameModel.inst.player.node.x,a.y+=f.GameModel.inst.player.node.y,i.setPosition(a),i.setSiblingIndex(t.mid),i.setParent(s.LayerMgr.inst.RoleLayer);var l=i.getComponent(y.default);null==l&&(l=i.addComponent(y.default));var p=i.getComponent(g.default);if(null!=p&&(p.level=t.level),this._batcher){var u=null;l.sprite&&(u=l.sprite.spriteFrame.getTexture()),l.spine&&(u=l.spine.skeletonData.textures[0]);var d=this._batcher.requsetMaterial(u);l.setMaterials([d,d])}else l.setMaterials([this.sprMaterial,this.spineMaterial]);l.updateMonster(t,e),l.recycle=function(){o._game.monsterList.splice(o._game.monsterList.indexOf(l),1),o.put(n,i)},this._game.monsterList.push(l),i.opacity=0,cc.Tween.stopAllByTarget(i),cc.tween(i).to(.2,{opacity:255}).start()}else this.loadMonster(t,e)},e.prototype.loadMonster=function(t,e){var o=this,n=""+t.type+t.mid;if(null==this._loadList[n]){this._loadList[n]=[this.generateMonster.bind(this,t,e)];var i=this._stageMonsters[n];this.loadBundleRes("Prefabs",i,cc.Prefab,function(t,e){o.addItemPool(n,e),o._execDelay=o._execDelay.concat(o._loadList[n]),delete o._loadList[n]})}else this._loadList[n].push(this.generateMonster.bind(this,t,e))},e.prototype.get=function(e){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];var i=t.prototype.get.call(this,e,o);return this._game.monster++,i},e.prototype.put=function(e,o){var n=this;t.prototype.put.call(this,e,o),this._game.monster--,this._nextTime>=this._keyTime.length&&0==this._game.monster&&this.scheduleOnce(function(){n._game.isFinished=!0,h.default.inst.closeToUI(u.UIType.UIGame,null),d.EVENT.emit(p.EventId.ON_GAME_RESULT)},1)},e.prototype.checkInactive=function(){var t=l.default.inst.now();for(var e in this._nodePools){var o=this._nodePools[e],n=this._nodeList[e];if(o&&o.size()>0&&0==n.length&&t-this._timeList[e]>3e4){if(this._batcher){var i=o.get(0).getComponent(y.default),r=null;i.sprite&&(r=i.sprite.spriteFrame.getTexture()),i.spine&&(r=i.spine.skeletonData.textures[0]),r.unlinkMaterial(),i.node.destroy()}o.clear(),this.releaseAsset(this._prefabList[e]),delete this._prefabList[e]}}},e.prototype.update=function(t){if(!this._game.isPause&&!(this._game.isGuide||(this._inactiveStamp+=t,this._inactiveStamp>=this._inactiveInterval&&(this._inactiveStamp=0,this.checkInactive()),this._game.monster>=this._monsterMax)))if(this._curTime!=this._nextTime){this._timeStamp+=t;var e=this._keyTime[this._nextTime];if(this._timeStamp>=e){this._curTime=this._nextTime;for(var o=this._stageInfos[e],n=0,i=o;n<i.length;n++){for(var r=i[n],a=0;a<r.count;a++)this._execDelay.push(this.generateMonster.bind(this,r,a));Math.random()<r.drawOdds&&h.default.inst.open(u.UIType.DrawSkill),this._game.money+=r.money,this._game.rMoney+=r.rMoney,this._game.g1Money+=r.g1Money,this._game.fu+=r.dorpFu}this._game.wave=o[0].wave}}else this._execDelay.length>0?this._execDelay.pop()():this._nextTime++},r([M(cc.Material)],e.prototype,"sprMaterial",void 0),r([M(cc.Material)],e.prototype,"spineMaterial",void 0),r([v],e)}(a.GameBase);o.default=b,cc._RF.pop()},{"../Controller/GameBase":"GameBase","../Controller/LayerMgr":"LayerMgr","../Controller/TableMgr":"TableMgr","../Controller/TimeMgr":"TimeMgr","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/UI/UIMgr":"UIMgr","../Model/GameModel":"GameModel","../Model/UserModel":"UserModel","./Component/MonsterComponent":"MonsterComponent","./Monster/Weapon/MonsterWeapon":"MonsterWeapon"}],MonsterGroup:[function(t,e,o){"use strict";cc._RF.push(e,"7065awwrJxOh6ZI7ytyhO7g","MonsterGroup");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Component/MonsterComponent"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lifeDur=0,e._radian=0,e}return i(e,t),e.prototype.updateMonster=function(e,o){t.prototype.updateMonster.call(this,e,o),this._lifeDur=e.lifeMax,this._radian=Math.atan2(-e.radMax,-e.radMin);var n=this._collider,i=n.size.width*this.node.scaleX,r=n.size.height*this.node.scaleY,a=Math.sqrt(e.count),s=Math.floor(o/a)-Math.floor(a/2),c=o%a-Math.floor(a/2),l=e.radMin+s*i,p=e.radMax+c*r,u=this._game.player.node.getPosition();u.x+=l,u.y+=p,this.node.setPosition(u)},e.prototype.updatePos=function(){if(!this._isPauseMove&&!(this._stopTime>0||this.hp<=0)){var t=this._radian;this._orientation.x=Math.cos(t),this._orientation.y=Math.sin(t),this._orientation.normalizeSelf(),(this._orientation.x<0&&this.node.scaleX<0||this._orientation.x>0&&this.node.scaleX>0)&&(this.node.scaleX*=-1);var e=this.moveSpeed;this._linearVelocity.x=this._orientation.x*e,this._linearVelocity.y=this._orientation.y*e,this._rBody.linearVelocity=this._linearVelocity}},e.prototype.update=function(e){t.prototype.update.call(this,e),this._lifeDur-=e,this._lifeDur<=0&&this.recycle()},r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"../Component/MonsterComponent":"MonsterComponent"}],MonsterWeapon:[function(t,e,o){"use strict";cc._RF.push(e,"771faC+OARMCotjRU7mHixd","MonsterWeapon");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/LayerMgr"),s=t("../../Component/MonsterComponent"),c=t("../../Warn/WarnBase"),l=t("../../Weapon/Bullet/BulletBase"),p=t("../../Weapon/WeaponBase"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfWarn=[],e.monster=null,e._level=0,e._isStart=!1,e._ref=0,e}return i(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t,this._weaponInfo&&(this._weaponInfo.levels=[t],this._isStart=t>0,this.updateAttrs())},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){this.node.on("dead",this.onDead,this)},e.prototype.onDisable=function(){this.node.off("dead",this.onDead,this)},e.prototype.onLoad=function(){for(var t in this._waterLevel=10,this.pfWarn)this.addItemPool("warn"+t,this.pfWarn[t]);for(var t in this.pfBullet)this.addItemPool(Number(t),this.pfBullet[t]);for(var t in this.pfSeniorBullet)this.addItemPool(Number(t)+3,this.pfSeniorBullet[t]);this._weaponInfo=new p.WeaponInfo(this.id),this._weaponInfo.getAttrFromCfg(),this.level=this._level},e.prototype.warn=function(t,e){var o=this;if(void 0===e&&(e=0),!(this.monster.hp<=0)){var n="warn"+e,i=this.get(n);if(null!=i){i.setParent(a.LayerMgr.inst.WarnLayer),t.pos=t.pos||this.monster.node.getPosition(),t.radian=t.radian||0,t.width=t.width||this._weaponInfo.weaponAttrs[e].warnWidth,t.range=t.range||this._weaponInfo.weaponAttrs[e].warnRange,t.dur=t.dur||this._weaponInfo.weaponAttrs[e].warnInterval,t.width*=t.aoeRange||this._weaponInfo.weaponAttrs[e].aoeRange||1;var r=i.getComponent(c.default);r.setWarn({dur:t.dur,range:t.range,pos:t.pos,radian:t.radian,width:t.width},function(){o.put(n,r.node),o.fire(t,e),o._ref--,o.onEnd(e)}),this.onStart(e),this._ref++}}},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=e,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(e));var r=i.getComponent(l.BulletBase);t.type=e,t.attrs=this._weaponInfo.weaponAttrs[e],t.weapon=this._weaponInfo,t.monster=this.monster,r.fire(t,function(){o.put(n,r.node)})}},e.prototype.onStart=function(){this.monster.node.emit("pauseMove")},e.prototype.onEnd=function(){this.monster.node.emit("resumeMove")},e.prototype.onDead=function(){for(var t in this.pfWarn)for(var e="warn"+t,o=this._nodeList[e];o.length>0;)this.put(e,o[0]);this._isStart=!1},r([h([cc.Prefab])],e.prototype,"pfWarn",void 0),r([h(s.default)],e.prototype,"monster",void 0),r([h],e.prototype,"_level",void 0),r([h],e.prototype,"level",null),r([d],e)}(p.WeaponBase);o.default=f,cc._RF.pop()},{"../../../Controller/LayerMgr":"LayerMgr","../../Component/MonsterComponent":"MonsterComponent","../../Warn/WarnBase":"WarnBase","../../Weapon/Bullet/BulletBase":"BulletBase","../../Weapon/WeaponBase":"WeaponBase"}],NativeAD:[function(t,e,o){"use strict";cc._RF.push(e,"4ae47JkcitNOrMXsFfzemYA","NativeAD");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Define/EventId"),s=t("../Framework/Event/EventMgr"),c=t("./AdMgr"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon_Ad=null,e}return i(e,t),e.prototype.start=function(){this.icon_Ad&&(this.icon_Ad.active=!0);var t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.default.inst.showAdNative("\u5546\u5e97\u539f\u751f",t.x,t.y),s.EVENT.on(a.EventId.ON_AD_NATIVE_COMPLETE,this.onNativeAd,this)},e.prototype.onDestroy=function(){c.default.inst.removeAdNative(),s.EVENT.off(a.EventId.ON_AD_NATIVE_COMPLETE,this.onNativeAd,this)},e.prototype.onNativeAd=function(){this.icon_Ad&&(this.icon_Ad.active=!1)},r([u(cc.Node)],e.prototype,"icon_Ad",void 0),r([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","./AdMgr":"AdMgr"}],NativeMgr:[function(t,e,o){"use strict";cc._RF.push(e,"29c30Iz+xJGhrLquXb6JA+M","NativeMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Define/Define"),a=t("../Define/EventId"),s=t("../Framework/Event/EventMgr"),c=t("../Framework/Platform/BytedanceSDK"),l=t("../Framework/UI/UIFacade"),p=t("../Framework/UI/UIMgr"),u=t("../Framework/Utils/Singleton"),d=t("../Guide/GodGuide"),h=t("../Model/UserModel"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._appname="",e._version="0.0.1",e}return i(e,t),e.prototype.appname=function(t){this._appname=t},e.prototype.version=function(t){this._version=t},e.prototype.debug=function(t){r.Config.debug=t,console.log("-------\x3e debug: ",t)},e.prototype.debugAD=function(t){r.Config.debugAD=t,console.log("-------\x3e debugAD: ",t)},e.prototype.abTest=function(t){r.Config.abTest=t,console.log("-------\x3e abTest: ",t)},e.prototype.updateAbTest=function(t){if(cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID)switch(t){default:case"zstb_ctrl_group":r.Config.abTestType=0;break;case"zstb_test_1group":r.Config.abTestType=1;break;case"zstb_test_2group":r.Config.abTestType=2;break;case"zstb_test_3group":r.Config.abTestType=3}else if(cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS)switch(t){default:case"zstb_ios_control_group":r.Config.abTestType=0;break;case"zstb_ios_test_group1":r.Config.abTestType=1;break;case"zstb_ios_test_group2":r.Config.abTestType=2;break;case"zstb_ios_test_group3":r.Config.abTestType=3}switch(r.Config.abTestType){default:case 0:r.Config.isAdBanner=!1,r.Config.isAdInterstitial=!1,r.Config.isAdNative=!1;break;case 1:r.Config.isAdBanner=null!=cc.sys.localStorage.getItem("Guide0")&&d.default.inst&&"Guide0"!=d.default.inst.name,r.Config.isAdInterstitial=h.UserModel.inst.curStage>=3,r.Config.isAdNative=!1,r.Config.refreshAdBanner=180;case 2:r.Config.isAdBanner=null!=cc.sys.localStorage.getItem("Guide0")&&d.default.inst&&"Guide0"!=d.default.inst.name,r.Config.isAdInterstitial=h.UserModel.inst.curStage>=3,r.Config.isAdNative=!1,r.Config.refreshAdBanner=120;case 3:r.Config.isAdBanner=null!=cc.sys.localStorage.getItem("Guide0")&&d.default.inst&&"Guide0"!=d.default.inst.name,r.Config.isAdInterstitial=h.UserModel.inst.curStage>=3,r.Config.isAdNative=!1,r.Config.refreshAdBanner=60}},e.prototype.showToast=function(t){p.default.inst.showToast(t)},e.prototype.networkErr=function(){l.UIFacade.showConfirm("","\u7f51\u7edc\u5f02\u5e38","\u786e\u5b9a").then(function(){return cc.game.end()})},e.prototype.antiAddiction=function(){l.UIFacade.showToast("\u89e6\u53d1\u9632\u6c89\u8ff7\u9000\u51fa"),setTimeout(function(){cc.game.end()},2e3)},e.prototype.realnameRewards=function(){if(!h.UserModel.inst.isRealNameReward){l.UIFacade.showToast("\u5b9e\u540d\u5956\u52b1\u53d1\u653e");var t=cc.view.getVisibleSize(),e=cc.v2(t.width/2,t.height/2);s.EVENT.emit(a.EventId.ON_UI_MAIN_FLY_ICON,e,"RMoney",function(){h.UserModel.inst.rMoney+=h.UserModel.inst.realNameReward}),h.UserModel.inst.isRealNameReward=1}},e.prototype.gameInit=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&(cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.gameInit():cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","gameInit","()V"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","gameInit"))},e.prototype.gameStart=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&(cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.gameStart():cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","gameStart","()V"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","gameStart"))},e.prototype.logEvent=function(t,e){void 0===e&&(e={}),cc.sys.platform!=cc.sys.WECHAT_GAME&&(cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.logEvent(t,e):cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","logEvent","(Ljava/lang/String;Ljava/lang/String;)V",t,JSON.stringify(e)):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","logEvent:Params:",t,JSON.stringify(e)))},e.prototype.openUserProtocol=function(){cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","openUserProtocol","()V"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","openUserProtocol"):cc.sys.openURL("https://www.ohayoo.cn/sdkWeb/privacySetting/userAgreement?package=com.inkflame.zstb.android&stash_no=k7VJGXEX8o&os=1")},e.prototype.openPrivacyProtocol=function(){cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","openPrivacyProtocol","()V"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","openPrivacyProtocol"):cc.sys.openURL("https://www.ohayoo.cn/sdkWeb/privacySetting/privacyPolicy?package=com.inkflame.zstb.android&stash_no=tMVDrqxMcB&os=1")},e.prototype.cancelAccount=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","cancelAccount","()V"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","cancelAccount"))},e.prototype.openUserFeedback=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","openUserFeedback","()V"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","openUserFeedback"))},e.prototype.joinQQGroup=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&(cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","joinQQGroup","()V"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","joinQQGroup"):cc.sys.openURL("https://qm.qq.com/cgi-bin/qm/qr?k=h5rc2l4BHOGgjWUFwXzBZDj8Kyph5DNI&jump_from=webapi&authKey=VN7SC93CXQ8nYwXywzGAyUh2EQ8p0IzN0t3OiP7Q6xgwR5MGIn2ojzvgkKhG4Xs9"))},e.prototype.storeReview=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","storeReview","()V"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","storeReview"))},e.prototype.getActivityTime=function(){return cc.sys.platform==cc.sys.WECHAT_GAME?Date.now():cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.now():cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?Number(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/TimerUtil","getRealTime","()Ljava/lang/String;")):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS?Number(jsb.reflection.callStaticMethod("AppController","getRealTime")):Date.now()},e.prototype.getWebTime=function(){return cc.sys.platform==cc.sys.WECHAT_GAME?Date.now():cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.now():cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/TimerUtil","getWebTime","()Ljava/lang/String;"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","getWebTime"):Date.now()},e.prototype.checkDeviceRealName=function(){cc.sys.platform!=cc.sys.WECHAT_GAME&&cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","checkDeviceRealName","()V"):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","checkDeviceRealName"))},e}(u.Singleton());o.default=f,window.Native=f.inst,cc._RF.pop()},{"../Define/Define":"Define","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Platform/BytedanceSDK":"BytedanceSDK","../Framework/UI/UIFacade":"UIFacade","../Framework/UI/UIMgr":"UIMgr","../Framework/Utils/Singleton":"Singleton","../Guide/GodGuide":"GodGuide","../Model/UserModel":"UserModel"}],NewYearEnter:[function(t,e,o){"use strict";cc._RF.push(e,"767fexAZ3dIJbiBBWOOnq0p","NewYearEnter");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../Define/UIDefs"),s=t("../../../../Framework/UI/UIMgr"),c=t("../../../../Framework/VM"),l=t("../../../../Framework/components/tweens/jelly-tween"),p=t("../Model/NewYearModel"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dot=null,e.jellyTween=null,e}return i(e,t),e.prototype.onEnable=function(){c.VM.bindPath("UserModel._fu",this.onUpdateCoin,this)},e.prototype.onDisable=function(){c.VM.unbindPath("UserModel._fu",this.onUpdateCoin,this)},e.prototype.onLoad=function(){this.onUpdateCoin(null)},e.prototype.onUpdateCoin=function(){p.NewYearModel.inst.checkUnlock()?(this.dot.active=!0,this.jellyTween.play()):(this.dot.active=!1,this.jellyTween.stop())},e.prototype.onClick=function(){s.default.inst.open(a.UIType.NewYearMenu)},r([h(cc.Node)],e.prototype,"dot",void 0),r([h(l.default)],e.prototype,"jellyTween",void 0),r([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../Define/UIDefs":"UIDefs","../../../../Framework/UI/UIMgr":"UIMgr","../../../../Framework/VM":"VM","../../../../Framework/components/tweens/jelly-tween":"jelly-tween","../Model/NewYearModel":"NewYearModel"}],NewYearItem:[function(t,e,o){"use strict";cc._RF.push(e,"825305b+9BFF4L9hNKDTNmk","NewYearItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../Controller/AdMgr"),l=t("../../../../Define/Define"),p=t("../../../../Define/EventId"),u=t("../../../../Framework/Audio/AudioMgr"),d=t("../../../../Framework/Event/EventMgr"),h=t("../../../../Framework/UI/UIFacade"),f=t("../../../../Framework/UI/UIMgr"),_=t("../../../../Framework/UIBase"),y=t("../../../../Model/GodBackModel"),g=t("../../../../Model/GodPetModel"),m=t("../../../../Model/GodRideModel"),v=t("../../../../Model/GodSkinModel"),M=t("../../../../Model/GodWeaponModel"),b=t("../../../../Model/StoreModel"),E=t("../../../../Model/UserModel"),O=cc._decorator,I=O.ccclass,S=O.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.txtName=null,e.txtType=null,e.txtDesc=null,e.txtMoney=null,e._model=null,e}return i(e,t),e.prototype.onOpen=function(t,e){return a(this,void 0,void 0,function(){var t,o,n;return s(this,function(i){switch(i.label){case 0:return t=e,o=["\u5efa\u9020\u7c7b\u6280\u80fd","\u89d2\u8272\u6280\u80fd","\u5750\u9a91","\u795e\u5175","\u795e\u517d","\u65f6\u88c5","\u80cc\u9970","\u5730\u56fe"],this._model=[null,null,m.GodRideModel.inst,M.GodWeaponModel.inst,g.GodPetModel.inst,v.GodSkinModel.inst,y.GodBackModel.inst,null][t.type],this.txtName.string=""+t.name,this.txtType.string=""+o[t.type],this.txtDesc.string=""+t.desc,this.txtMoney.string=""+Math.floor(t.money),n=this.icon,[4,this.asyncLoadBundleRes("Textures",t.icon,cc.SpriteFrame)];case 1:return n.spriteFrame=i.sent(),l.Config.isAdBanner&&c.default.inst.pauseAdNative(),[2]}})})},e.prototype.onClickGet=function(){var t=this._para,e=t.moneyType,o=Math.floor(t.money);switch(t.type){case l.EXCHANGE_TYPE.Weapon:if(E.UserModel.inst.curStage<=E.UserModel.inst.godWeaponOpenStage)return u.AudioMgr.inst.playEffectByName("ui_not"),void h.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+E.UserModel.inst.godWeaponOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u5175\u7cfb\u7edf\u3011");break;case l.EXCHANGE_TYPE.Pet:if(E.UserModel.inst.curStage<=E.UserModel.inst.godPetOpenStage)return u.AudioMgr.inst.playEffectByName("ui_not"),void h.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+E.UserModel.inst.godPetOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u517d\u7cfb\u7edf\u3011");break;case l.EXCHANGE_TYPE.Skin:if(E.UserModel.inst.curStage<=E.UserModel.inst.godSkinOpenStage)return u.AudioMgr.inst.playEffectByName("ui_not"),void h.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+E.UserModel.inst.godSkinOpenStage+"\u5173\u89e3\u9501\u3010\u65f6\u88c5\u7cfb\u7edf\u3011");break;case l.EXCHANGE_TYPE.Back:if(E.UserModel.inst.curStage<=E.UserModel.inst.godBackOpenStage)return u.AudioMgr.inst.playEffectByName("ui_not"),void h.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+E.UserModel.inst.godBackOpenStage+"\u5173\u89e3\u9501\u3010\u80cc\u9970\u7cfb\u7edf\u3011")}if(E.UserModel.inst[e]<o)return u.AudioMgr.inst.playEffectByName("ui_not"),void f.default.inst.showToast("\u798f\u5b57\u4e0d\u8db3");u.AudioMgr.inst.playEffectByName("achievement"),f.default.inst.showToast("\u5151\u6362\u6210\u529f"),E.UserModel.inst[e]-=o,b.StoreModel.inst.exchange_listed.push(t.id),b.StoreModel.inst.exchange_listed=b.StoreModel.inst.exchange_listed,d.EVENT.emit(p.EventId.ON_REFUSE_STORE),this._model&&(this._model.unlock.push(Number(t.lv)),this._model.unlock=this._model.unlock,this._model.curIdx=Number(t.lv),d.EVENT.emit(p.EventId.ON_REFRESH_ROLE)),t.type==l.EXCHANGE_TYPE.Background&&(E.UserModel.inst.background=Number(t.lv)),t.type==l.EXCHANGE_TYPE.Skill_1&&(l.SKILL_NAME[t.lv]=t.name,l.SKILL_ICON_URL[t.lv]=t.icon),this.close()},r([S(cc.Sprite)],e.prototype,"icon",void 0),r([S(cc.Label)],e.prototype,"txtName",void 0),r([S(cc.Label)],e.prototype,"txtType",void 0),r([S(cc.Label)],e.prototype,"txtDesc",void 0),r([S(cc.Label)],e.prototype,"txtMoney",void 0),r([I],e)}(_.default);o.default=w,cc._RF.pop()},{"../../../../Controller/AdMgr":"AdMgr","../../../../Define/Define":"Define","../../../../Define/EventId":"EventId","../../../../Framework/Audio/AudioMgr":"AudioMgr","../../../../Framework/Event/EventMgr":"EventMgr","../../../../Framework/UI/UIFacade":"UIFacade","../../../../Framework/UI/UIMgr":"UIMgr","../../../../Framework/UIBase":"UIBase","../../../../Model/GodBackModel":"GodBackModel","../../../../Model/GodPetModel":"GodPetModel","../../../../Model/GodRideModel":"GodRideModel","../../../../Model/GodSkinModel":"GodSkinModel","../../../../Model/GodWeaponModel":"GodWeaponModel","../../../../Model/StoreModel":"StoreModel","../../../../Model/UserModel":"UserModel"}],NewYearMenuItem:[function(t,e,o){"use strict";cc._RF.push(e,"3883bO0AV5Bm6akmHIdAMy6","NewYearMenuItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../../Define/UIDefs"),l=t("../../../../../Framework/List/ListItem"),p=t("../../../../../Framework/List/RenderToTarget"),u=t("../../../../../Framework/UI/UIMgr"),d=t("../../../../../Model/StoreModel"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.txtMoney=null,e.nodeSold=null,e._info=null,e}return i(e,t),e.prototype.setDate=function(t){return a(this,void 0,void 0,function(){var e,o,n;return s(this,function(i){switch(i.label){case 0:return this._info=t,null==t?(this.node.getComponent(p.default).getChildren().forEach(function(t){return t.active=!1}),[2]):(this.icon.spriteFrame=null,e=this.icon,[4,this.asyncLoadBundleRes("Textures",t.icon,cc.SpriteFrame)]);case 1:return e.spriteFrame=i.sent(),this.txtMoney.string=""+Math.floor(t.money),o=d.StoreModel.inst,n=o.exchange_listed.includes(t.id),this.nodeSold.active=n,[2]}})})},e.prototype.onClick=function(){u.default.inst.open(c.UIType.NewYearItem,this._info)},r([_(cc.Sprite)],e.prototype,"icon",void 0),r([_(cc.Label)],e.prototype,"txtMoney",void 0),r([_({type:cc.Node})],e.prototype,"nodeSold",void 0),r([f],e)}(l.default);o.default=y,cc._RF.pop()},{"../../../../../Define/UIDefs":"UIDefs","../../../../../Framework/List/ListItem":"ListItem","../../../../../Framework/List/RenderToTarget":"RenderToTarget","../../../../../Framework/UI/UIMgr":"UIMgr","../../../../../Model/StoreModel":"StoreModel"}],NewYearMenu:[function(t,e,o){"use strict";cc._RF.push(e,"969e3GKYR1Gpam7nq/EBrAw","NewYearMenu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../Define/Define"),s=t("../../../../Define/EventId"),c=t("../../../../Framework/Event/EventMgr"),l=t("../../../../Framework/List/List"),p=t("../../../../Framework/UI/UIFacade"),u=t("../../../../Framework/UIBase"),d=t("../../../../Framework/VM"),h=t("../../../../Model/UserModel"),f=t("../Model/NewYearModel"),_=t("./Menu/NewYearMenuItem"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e.spine=null,e.content=null,e.btnStart=null,e.lbCoin0=null,e.lbCoin1=null,e.tipAni=null,e}return i(e,t),e.prototype.onLoad=function(){d.VM.bindPath("UserModel._fu",this.updateMoney,this),c.EVENT.on(s.EventId.ON_REFUSE_STORE,this.onRefuse,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),d.VM.unbindPath("UserModel._fu",this.updateMoney,this),c.EVENT.off(s.EventId.ON_REFUSE_STORE,this.onRefuse,this)},e.prototype.onOpen=function(){this.tipAni.node.active=!1;var t=f.NewYearModel.inst;if(this.list.numItems=12,t.active)this.spine.setAnimation(0,"idle3",!0),this.content.active=!0,this.btnStart.node.active=!1;else if(this.spine.setAnimation(0,"idle1",!0),this.content.active=!1,this.btnStart.node.active=!0,a.Config.debug){var e=h.UserModel.inst;e.fu<t.unlock&&(e.fu+=t.unlock)}this.updateMoney(h.UserModel.inst.fu)},e.prototype.onListRender=function(t,e){var o=f.NewYearModel.inst;t.getComponent(_.default).setDate(o.table[e])},e.prototype.onRefuse=function(){this.list.updateAll()},e.prototype.updateMoney=function(t){this.lbCoin0.string=""+t,this.lbCoin1.string=t+"/"+f.NewYearModel.inst.unlock},e.prototype.onClickStart=function(){var t=this,e=f.NewYearModel.inst,o=h.UserModel.inst;if(o.fu<e.unlock)p.UIFacade.showToast("\u9700\u8981\u51fb\u8d25\u5173\u5361BOSS\u6536\u96c6\u66f4\u591a\u3010\u798f\u5b57\u3011");else{o.fu-=e.unlock,e.active=!0;var n=this.spine.setAnimation(0,"idle2",!1);this.spine.setTrackCompleteListener(n,function(){t.spine.setAnimation(0,"idle3",!0)}),this.scheduleOnce(function(){return t.content.active=!0},1),this.btnStart.node.active=!1}},e.prototype.onClickTipOpen=function(){this.tipAni.node.active=!0,this.tipAni.play("TipOpen")},e.prototype.onClickTipClose=function(){var t=this;this.tipAni.play("TipClose"),this.tipAni.once(cc.Animation.EventType.FINISHED,function(){t.tipAni.node.active=!1})},e.prototype.onClickCoin=function(){a.Config.debug&&(h.UserModel.inst.fu+=1e3)},r([m(l.default)],e.prototype,"list",void 0),r([m(sp.Skeleton)],e.prototype,"spine",void 0),r([m(cc.Node)],e.prototype,"content",void 0),r([m(cc.Button)],e.prototype,"btnStart",void 0),r([m(cc.Label)],e.prototype,"lbCoin0",void 0),r([m(cc.Label)],e.prototype,"lbCoin1",void 0),r([m(cc.Animation)],e.prototype,"tipAni",void 0),r([g],e)}(u.default);o.default=v,cc._RF.pop()},{"../../../../Define/Define":"Define","../../../../Define/EventId":"EventId","../../../../Framework/Event/EventMgr":"EventMgr","../../../../Framework/List/List":"List","../../../../Framework/UI/UIFacade":"UIFacade","../../../../Framework/UIBase":"UIBase","../../../../Framework/VM":"VM","../../../../Model/UserModel":"UserModel","../Model/NewYearModel":"NewYearModel","./Menu/NewYearMenuItem":"NewYearMenuItem"}],NewYearModel:[function(t,e,o){"use strict";cc._RF.push(e,"1430cljea9CQJcuDEHLYzt1","NewYearModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.NewYearModel=void 0;var n=t("../../../../Controller/TableMgr"),i=t("../../../../Define/Define"),r=t("../../../../Define/UIDefs"),a=t("../../../../Framework/Storage/LocalStorageMgr"),s=t("../../../../Framework/VM"),c=t("../../../../Model/StoreModel"),l=t("../../../../Model/UserModel"),p=function(){function t(){this.table=null,this.unlock=10,this._active=!1,this._data=[],this.table=n.TABLE.getTable("NewYearExchange"),this._active=!!a.LocalStorageMgr.getItem("NewYear_active");for(var t=c.StoreModel.inst,e=0,o=this.table;e<o.length;e++){var r=o[e];t.exchange_listed.includes(r.id)&&r.type==i.EXCHANGE_TYPE.Skill_1&&(i.SKILL_NAME[r.lv]=r.name,i.SKILL_ICON_URL[r.lv]=r.icon)}this.checkActive(),s.VM.add(this,"NewYearModel")}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t,this.checkActive(),a.LocalStorageMgr.setItem("NewYear_active",""+(t?1:0))},enumerable:!1,configurable:!0}),t.prototype.checkActive=function(){var t,e;this._active?((t=r.UIDataInfo.getUIData(r.UIType.UIGame)).uiBundle="NewYear",t.uiPath="/UIPrefab/UIGame",(e=r.UIDataInfo.getUIData(r.UIType.UIGameB)).uiBundle="NewYear",e.uiPath="/UIPrefab/UIGameB"):((t=r.UIDataInfo.getUIData(r.UIType.UIGame)).uiBundle="Prefabs",t.uiPath="/UIGame",(e=r.UIDataInfo.getUIData(r.UIType.UIGameB)).uiBundle="Prefabs",e.uiPath="/UIGameB")},t.prototype.checkUnlock=function(){var t=l.UserModel.inst;if(this._active){for(var e=c.StoreModel.inst,o=0,n=this.table;o<n.length;o++){var i=n[o];if(!e.exchange_listed.includes(i.id)&&t.fu>=i.money)return!0}return!1}return t.fu>=this.unlock},t._inst=null,t}();o.NewYearModel=p,cc._RF.pop()},{"../../../../Controller/TableMgr":"TableMgr","../../../../Define/Define":"Define","../../../../Define/UIDefs":"UIDefs","../../../../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../../../../Framework/VM":"VM","../../../../Model/StoreModel":"StoreModel","../../../../Model/UserModel":"UserModel"}],NodePool:[function(t,e,o){"use strict";cc._RF.push(e,"040c9gg3vJDmYzBE+Z6ypRm","NodePool");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NodePool=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isReady=!1,e._createCount=0,e._warterMark=10,e._res=null,e._nodes=new Array,e}return i(e,t),e.prototype.isReady=function(){return this._isReady},e.prototype.init=function(){var t=this;if(this._isReady)cc.error("already inited!");else{var e=arguments[0],o=null;if(2==arguments.length&&"function"==typeof arguments[1]&&(o=arguments[1]),e instanceof cc.Prefab)return this._res=e,this._isReady=!0,void(o&&o(null,this));"string"!=typeof arguments[0]?console.error("NodePool init error "+arguments[0]):this.loadBundleRes("Prefabs",arguments[0],cc.Prefab,function(e,n){e||(t._res=n,t._isReady=!0),o&&o(e,t)})}},e.prototype.prepareNode=function(t){if(this.isReady)for(var e=0;e<t;++e){var o=cc.instantiate(this._res);this._createCount++,this._nodes.push(o)}else cc.error("node pool not ready!")},e.prototype.getNode=function(){return this.isReady?this._nodes.length>0?this._nodes.pop():(this._createCount++,cc.instantiate(this._res)):null},e.prototype.freeNode=function(t){if(!t||!cc.isValid(t))return cc.error("[ERROR] PrefabPool: freePrefab: isValid node"),void this._createCount--;this._nodes.length>this._warterMark?(this._createCount--,t.destroy()):(t.removeFromParent(!0),t.uuid,t.getParent(),t.cleanup(),this._nodes.push(t))},e.prototype.setWaterMark=function(t){this._warterMark=t},e.prototype.isUnuse=function(){return this._nodes.length>this._createCount&&cc.error("PrefabPool: _nodes.length > _createCount"),this._nodes.length==this._createCount},e.prototype.clear=function(){for(var t=0,e=this._nodes;t<e.length;t++)e[t].destroy();this._createCount-=this._nodes.length,this._nodes.length=0,this._res.decRef()},e}(t("../../Framework/Res/ResKeeper").default);o.NodePool=r,cc._RF.pop()},{"../../Framework/Res/ResKeeper":"ResKeeper"}],NpcBase:[function(t,e,o){"use strict";cc._RF.push(e,"6c7ecraPg5G9plV0DJmbusa","NpcBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NpcBase=void 0;var a=t("../Framework/Res/ResKeeper"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveSpeed=0,e.maxHp=100,e.hp=100,e.atk=10,e.crit=0,e.critDmg=2,e.reduce=0,e.touchDelta=.1,e.pickRadius=100,e}return i(e,t),r([l({tooltip:"\u79fb\u52a8\u901f\u5ea6"})],e.prototype,"moveSpeed",void 0),r([l({tooltip:"\u6700\u5927\u751f\u547d\u503c"})],e.prototype,"maxHp",void 0),r([l({tooltip:"\u5f53\u524d\u751f\u547d\u503c"})],e.prototype,"hp",void 0),r([l({tooltip:"\u653b\u51fb\u529b"})],e.prototype,"atk",void 0),r([l({tooltip:"\u66b4\u51fb\u7387"})],e.prototype,"crit",void 0),r([l({tooltip:"\u66b4\u51fb\u4f24\u5bb3"})],e.prototype,"critDmg",void 0),r([l({tooltip:"\u4f24\u5bb3\u51cf\u514d"})],e.prototype,"reduce",void 0),r([l({tooltip:"\u4f24\u5bb3\u95f4\u9694"})],e.prototype,"touchDelta",void 0),r([l({tooltip:"\u62fe\u53d6\u534a\u5f84"})],e.prototype,"pickRadius",void 0),r([c],e)}(a.default);o.NpcBase=p,cc._RF.pop()},{"../Framework/Res/ResKeeper":"ResKeeper"}],PetComponent:[function(t,e,o){"use strict";cc._RF.push(e,"4978enomA5Li7LOnxyWcndh","PetComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../../Define/EventId"),c=t("../../Framework/Audio/AudioMgr"),l=t("../../Framework/Event/EventMgr"),p=t("../../Model/GameModel"),u=t("../NpcBase"),d=cc._decorator,h=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.game=p.GameModel.inst,e.spPet=null,e.spRideState=null,e.search=cc.v2(0,0),e.atkSpeed=0,e.atkOffset=cc.v2(0,0),e._stateMachine=null,e._state=null,e._weapon=null,e}return i(e,t),Object.defineProperty(e.prototype,"weapon",{get:function(){return this._weapon},set:function(t){this._weapon=t},enumerable:!1,configurable:!0}),e.prototype.start=function(){var t;this._stateMachine=((t={})[a.Idle]=new y(this),t[a.Atk]=new g(this),t),this._state=this._stateMachine[a.Idle],this.spPet=this.getComponent(sp.Skeleton),this.spRideState=this.spPet.getState(),this.spRideState&&(this.spRideState.data.defaultMix=.2)},e.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_PAUSE,this.pause,this),l.EVENT.on(s.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_PAUSE,this.pause,this),l.EVENT.off(s.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.spPet&&(this.spPet.timeScale=0)},e.prototype.resume=function(){this.spPet&&(this.spPet.timeScale=1)},e.prototype.switchState=function(t){this._state&&this._state.onEnd(),this._state=this._stateMachine[t],this._state.onStart()},e.prototype.playAnimation=function(t,e,o){if(void 0===e&&(e=!0),t!=this.spPet.animation){var n=this.spPet.setAnimation(0,t,e);return o&&this.spPet.setTrackCompleteListener(n,o),n}},e.prototype.updateScale=function(t){var e=this.node;t>0&&e.scaleX>0?e.scaleX*=-1:t<0&&e.scaleX<0&&(e.scaleX*=-1)},e.prototype.update=function(t){this.game.isPause||this._state.update(t)},r([h],e)}(u.NpcBase));o.default=f,function(t){t[t.Idle=0]="Idle",t[t.Atk=1]="Atk"}(a||(a={}));var _=function(t){this.pet=null,this.pet=t},y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=a.Idle,e._v2=cc.v2(),e._dur_atk=0,e._dur_idle=0,e}return i(e,t),e.prototype.onStart=function(){},e.prototype.onEnd=function(){},e.prototype.update=function(t){var e=this.pet.node.getPosition(),o=this.pet.game.player.node.getPosition(),n=cc.Vec2.subtract(this._v2,o,e),i=n.len();if(i>150){this._dur_idle=0;var r=this.pet.moveSpeed*t;i>500?r*=1.2:i<300&&(r*=.8);var s=-n.signAngle(cc.Vec2.RIGHT),c=Math.cos(s)*r,l=Math.sin(s)*r;this.pet.node.x+=c,this.pet.node.y+=l,this.pet.updateScale(c,l),this.pet.playAnimation("run")}else this._dur_idle+=t,this._dur_idle>.2&&this.pet.playAnimation("idle");this._dur_atk+=t,this._dur_atk>=this.pet.atkSpeed&&(this._dur_atk=0,this.pet.switchState(a.Atk))},e}(_),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=a.Atk,e._v2=cc.v2(),e._target=null,e._atking=!1,e}return i(e,t),e.prototype.onStart=function(){var t=this;this.searchTarget(),this.pet.spPet.setEventListener(function(e,o){"atk"==o.data.name&&t.fire()}),this.pet.spPet.setCompleteListener(function(e){"attack"==e.animation.name&&t.atkEnd()})},e.prototype.onEnd=function(){},e.prototype.atk=function(){c.AudioMgr.inst.playEffectByName("fire"),this._atking=!0,this.pet.spPet.setAnimation(0,"attack",!1)},e.prototype.atkEnd=function(){this._atking=!1,this._target=null,this.searchTarget()},e.prototype.searchTarget=function(){if(this._target=this.pet.game.findNearMonsters(1)[0],null!=this._target&&null!=this._target.parent){var t=this.pet.game.player.node,e=this._target,o=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);o>this.pet.search.x&&n>this.pet.search.y&&this.pet.switchState(a.Idle)}else this.pet.switchState(a.Idle)},e.prototype.fire=function(){var t=this,e=cc.v2(this.pet.node.scaleX<0?1:-1);this.pet.weapon.fire({target:this.pet.node,direct:e,atkEnd:function(){t.atkEnd()}})},e.prototype.update=function(t){if(!this._atking)if(null!=this._target&&null!=this._target.parent){var e=this.pet.node,o=this._target;if(this._v2.x=o.x-e.x+(e.x>o.x?this.pet.atkOffset.x:-this.pet.atkOffset.x),this._v2.y=o.y-e.y+this.pet.atkOffset.y,this._v2.len()<20)return this.pet.updateScale(o.x-e.x,0),void this.atk();var n=this.pet.moveSpeed*t,i=Math.atan2(this._v2.y,this._v2.x),r=Math.cos(i)*n,s=Math.sin(i)*n;this.pet.node.x+=r,this.pet.node.y+=s,this.pet.updateScale(r,s),this.pet.playAnimation("run")}else this.pet.switchState(a.Idle)},e}(_);cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Model/GameModel":"GameModel","../NpcBase":"NpcBase"}],PickUpBase:[function(t,e,o){"use strict";cc._RF.push(e,"13c7aEDElZFI5ajF3qSypez","PickUpBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/GameItemBase"),s=t("../../../Define/StaticData"),c=t("../../../Model/GameModel"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._game=c.GameModel.inst,e._moveSpeed=200,e._moveSpeedMax=500,e._isPick=!1,e._v2=cc.v2(),e}return i(e,t),e.prototype.reuse=function(){this._moveSpeed=200,this._isPick=!1},e.prototype.onPickUp=function(){},e.prototype.start=function(){this.schedule(this.updatePick.bind(this),.2)},e.prototype.updatePick=function(){if(!this._isPick){var t=this._game.player.node,e=this.node,o=this._game.player.pickRadius;cc.Vec2.distance(t,e)<o&&(this._isPick=!0)}},e.prototype.update=function(t){if(!this._game.isPause)if(this._v2.x=this.node.x-s.StaticData.mainCamera.node.x,this._v2.y=this.node.y-s.StaticData.mainCamera.node.y,this._v2.x>s.StaticData.maxX||this._v2.x<s.StaticData.minX||this._v2.y>s.StaticData.maxY||this._v2.y<s.StaticData.minY)this.node.opacity=0;else if(this.node.opacity=255,this._isPick){var e=this._game.player.node,o=this.node;if(cc.Vec2.distance(e,o)<25)return this.onPickUp(),void this.recycle();var n=Math.atan2(e.y-o.y,e.x-o.x),i=this._moveSpeed*t,r=Math.cos(n)*i,a=Math.sin(n)*i;this.node.x+=r,this.node.y+=a,this._moveSpeed+=300*t,this._moveSpeed>this._moveSpeedMax&&(this._moveSpeed=this._moveSpeedMax)}},r([p],e)}(a.GameItemBase));o.default=u,cc._RF.pop()},{"../../../Controller/GameItemBase":"GameItemBase","../../../Define/StaticData":"StaticData","../../../Model/GameModel":"GameModel"}],PickUpBox:[function(t,e,o){"use strict";cc._RF.push(e,"5646fhnwTNBC6XiEINsoVmZ","PickUpBox");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Define/UIDefs"),c=t("../../../Framework/Event/EventMgr"),l=t("../../../Framework/UI/UIMgr"),p=t("./PickUpBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onPickUp=function(){c.EVENT.emit(a.EventId.ON_GAME_PAUSE),l.default.inst.open(s.UIType.EliteBox)},r([d],e)}(p.default));o.default=h,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","./PickUpBase":"PickUpBase"}],PickUpEquip:[function(t,e,o){"use strict";cc._RF.push(e,"5d2dfp1TOdADbJHC2e/mO+5","PickUpEquip");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/EventId"),s=t("../../../Define/UIDefs"),c=t("../../../Framework/Audio/AudioMgr"),l=t("../../../Framework/Event/EventMgr"),p=t("../../../Framework/UI/UIMgr"),u=t("./PickUpBase"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e._sid=-1,e._icon=-1,e._quality=-1,e}return i(e,t),e.prototype.init=function(t){this._sid=t.id,this._icon=t.icon,this._quality=t.quality,this.spine.setSkin("zbtb"+this._icon);var e=this._quality+1;e>5&&(e=5),this.spine.setAnimation(0,"idle"+e,!0)},e.prototype.onPickUp=function(){l.EVENT.emit(a.EventId.ON_GAME_PAUSE),c.AudioMgr.inst.playEffectByName("getEequip"),p.default.inst.open(s.UIType.FightEquip,this._sid)},r([f(sp.Skeleton)],e.prototype,"spine",void 0),r([h],e)}(u.default);o.default=_,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","./PickUpBase":"PickUpBase"}],PickUpExp:[function(t,e,o){"use strict";cc._RF.push(e,"f3ad2ply5FF/YWg/ZbYnwOm","PickUpExp");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Audio/AudioMgr"),s=t("../../../Model/MagnetModel"),c=t("./PickUpBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.addExp=1,e}return i(e,t),e.prototype.updatePick=function(){if(!this._isPick)if(s.MagnetModel.inst.isActive())this._isPick=!0;else{var t=this._game.player.node,e=this.node,o=this._game.player.pickRadius;cc.Vec2.distance(t,e)<o&&(this._isPick=!0)}},e.prototype.onPickUp=function(){a.AudioMgr.inst.playEffectByName("getExp"),this._game.exp+=this.addExp},r([u],e.prototype,"addExp",void 0),r([p],e)}(c.default);o.default=d,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Model/MagnetModel":"MagnetModel","./PickUpBase":"PickUpBase"}],PickUpFood:[function(t,e,o){"use strict";cc._RF.push(e,"9f1d0lpFWpKuKQDbRgtcp3Q","PickUpFood");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Model/WeaponModel"),s=t("./PickUpBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.addHp=.15,e}return i(e,t),e.prototype.onPickUp=function(){var t=this.addHp*this._game.player.maxHp,e=a.WeaponModel.inst.magicAttrs.a_foodhp_p;e>0&&(t+=t*e),this._game.player.hp+=t},r([p],e.prototype,"addHp",void 0),r([l],e)}(s.default);o.default=u,cc._RF.pop()},{"../../../Model/WeaponModel":"WeaponModel","./PickUpBase":"PickUpBase"}],PickUpLbs:[function(t,e,o){"use strict";cc._RF.push(e,"a70c0Rlb79GUITESKd7yAfI","PickUpLbs");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/Audio/AudioMgr"),s=t("../../../Model/MagnetModel"),c=t("./PickUpBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.addExp=1,e}return i(e,t),e.prototype.updatePick=function(){if(!this._isPick)if(s.MagnetModel.inst.isActive())this._isPick=!0;else{var t=this._game.player.node,e=this.node,o=this._game.player.pickRadius;cc.Vec2.distance(t,e)<o&&(this._isPick=!0)}},e.prototype.onPickUp=function(){a.AudioMgr.inst.playEffectByName("getExp"),this._game.g1Money+=this.addExp},r([u],e.prototype,"addExp",void 0),r([p],e)}(c.default);o.default=d,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Model/MagnetModel":"MagnetModel","./PickUpBase":"PickUpBase"}],PlayerComponent:[function(t,e,o){"use strict";cc._RF.push(e,"f8e01rnNtZNs7Yq0nnXEQZo","PlayerComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SpineAnimation=o.TrackIndex=void 0;var a,s,c=t("../../Controller/GameItemMgr"),l=t("../../Controller/LayerMgr"),p=t("../../Controller/TableMgr"),u=t("../../Define/EventId"),d=t("../../Framework/Audio/AudioMgr"),h=t("../../Framework/Event/EventMgr"),f=t("../../Framework/VM"),_=t("../../Model/GameModel"),y=t("../../Model/GodPetModel"),g=t("../../Model/GodRideModel"),m=t("../../Model/GodSkinModel"),v=t("../../Model/GodWeaponModel"),M=t("../../Model/WeaponModel"),b=t("../NpcBase"),E=t("./PetComponent"),O=t("../Weapon/WeaponBase"),I=t("../../Model/GodBackModel"),S=t("../Weapon/ComWeaponCommonPet"),w=cc._decorator,P=w.ccclass,R=w.property;(function(t){t[t.normal=1]="normal",t[t.move=0]="move",t[t.dead=2]="dead"})(a=o.TrackIndex||(o.TrackIndex={})),function(t){t.Idle="idle",t.Run="run",t.Attack="attack1b",t.Dead="die"}(s=o.SpineAnimation||(o.SpineAnimation={}));var A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delta=[],e.deltaRideType=[],e.deltaNormal=null,e.material=null,e._rBody=null,e._collider=null,e._basis=null,e._materialVariants=[],e._nodePet=null,e._spRole=null,e._spRoleState=null,e._spRide=null,e._spRideState=null,e._rideType=0,e._nodeWeapon=null,e._nodeBack=null,e._attack_stamp=0,e._attack_interval=0,e._velocity=cc.v2(),e._v3=cc.v3(),e._game=_.GameModel.inst,e._offset=cc.v2(0,-40),e._revive=0,e._hps=0,e._hlu=0,e._hpm3=0,e._nmHps=0,e._dodgP=0,e._dodgbyhit=0,e._sDamage=0,e._aSpeed=0,e._touchStamp=0,e._reviveStamp=0,e._hpsStamp=0,e._hpm3Stamp=0,e._nmHpsStamp=0,e._dodgStamp=0,e._hitTime=0,e._weapon=null,e._contact_monster_atk=0,e._v2=cc.v2(),e}return i(e,t),e.prototype.onLoad=function(){this._nodeWeapon=new cc.Node("weapon"),this._nodeBack=new cc.Node("back"),this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider),this._basis={moveSpeed:this.moveSpeed,maxHp:this.maxHp,hp:this.hp,atk:this.atk,crit:this.crit,critDmg:this.critDmg,reduce:this.reduce,touchDelta:this.touchDelta,pickRadius:this.pickRadius},this._attack_interval=Number(p.TABLE.getGlobal("Attack_interval"))},e.prototype.onBeginContact=function(t,e,o){var n=o.tag;this.onHit(n),this._contact_monster_atk+=n},e.prototype.onEndContact=function(t,e,o){var n=o.tag;this._contact_monster_atk-=n},e.prototype.onEnable=function(){f.VM.bindPath("GameModel._level",this.updateLevel,this),h.EVENT.on(u.EventId.ON_GAME_PAUSE,this.pause,this),h.EVENT.on(u.EventId.ON_GAME_RESUME,this.resume,this),h.EVENT.on(u.EventId.ON_GAME_PLAYER_REVIVE,this.onRevive,this),h.EVENT.on(u.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},e.prototype.onDisable=function(){f.VM.unbindPath("GameModel._level",this.updateLevel,this),h.EVENT.off(u.EventId.ON_GAME_PAUSE,this.pause,this),h.EVENT.off(u.EventId.ON_GAME_RESUME,this.resume,this),h.EVENT.off(u.EventId.ON_GAME_PLAYER_REVIVE,this.onRevive,this),h.EVENT.off(u.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},e.prototype.pause=function(){this._spRole&&(this._spRole.timeScale=0),this._spRide&&(this._spRide.timeScale=0)},e.prototype.resume=function(){this._spRole&&(this._spRole.timeScale=1),this._spRide&&(this._spRide.timeScale=1)},e.prototype.setHp=function(t){t>this.maxHp&&(t=this.maxHp),this.hp=t},e.prototype.setDefaultMaterial=function(){this._spRole.setMaterial(0,this._materialVariants[0])},e.prototype.setHitMaterial=function(){this._spRole.getMaterial(0)!=this._materialVariants[1]&&this._spRole.setMaterial(0,this._materialVariants[1])},e.prototype.onHit=function(t,e){if(void 0===e&&(e=!1),!this._game.isGuide&&!(this._game.immune>0||t<=0)){if(this._v3.x=this.node.x,this._v3.y=this.node.y,Math.random()<this._dodgP+this._dodgStamp)return this._dodgStamp=0,void c.default.inst.generateHitMiss(this._v3);this._dodgbyhit>0&&(this._dodgStamp+=this._dodgbyhit);var o=this.reduce+this._sDamage;t-=Math.round(o*t),this.setHp(this.hp-t),this.hp<=0&&this.onDead(),this._hitTime=.5,this.setHitMaterial(),e?c.default.inst.generateHitEffect(this._v3):c.default.inst.generateHitBeEffect(this._v3),h.EVENT.emit(u.EventId.ON_GAME_PLAYER_HIT)}},e.prototype.onDead=function(){var t=this;h.EVENT.emit(u.EventId.ON_GAME_PAUSE),this._spRole&&(this._spRole.timeScale=1),this._spRide&&(this._spRide.timeScale=1),this.setRoleAnimation(a.dead,s.Dead,!1),this.scheduleOnce(function(){t._revive>0&&t._reviveStamp<t._revive?t.onRevive():h.EVENT.emit(u.EventId.ON_GAME_RESULT)},1.75)},e.prototype.onRevive=function(){var t=this;d.AudioMgr.inst.playEffectByName("revive"),this._revive>0&&this._reviveStamp<this._revive?(this.hp=.5*this.maxHp,this._reviveStamp++):(this.hp=this.maxHp,_.GameModel.inst.revive++),c.default.inst.generateRevive(function(){c.default.inst.generateHpBar2(t,-60),_.GameModel.inst.immune++,cc.tween(t.node).then(cc.tween().to(.2,{opacity:0},{easing:"sineOut"}).to(.2,{opacity:255},{easing:"sineIn"})).repeat(5).call(function(){_.GameModel.inst.immune--}).start(),t._spRoleState.setEmptyAnimation(a.dead,.2),t.setRoleAnimation(a.normal,s.Idle,!0,!1),h.EVENT.emit(u.EventId.ON_GAME_RESUME)})},e.prototype.updateLevel=function(){this._hlu>0&&this.setHp(this.hp+this._hlu)},e.prototype.updateAttrs=function(){this.atk=this._basis.atk,this.maxHp=this._basis.maxHp,this.moveSpeed=this._basis.moveSpeed,this.pickRadius=this._basis.pickRadius;var t=M.WeaponModel.inst,e=t.magicAttrs.a_atk_p;e>0&&(this.atk+=this.atk*e);var o=t.magicAttrs.a_atk_v;o>0&&(this.atk+=o);var n=t.magicAttrs.a_hp_p;n>0&&(this.maxHp+=this.maxHp*n);var i=t.magicAttrs.a_hp_v;i>0&&(this.maxHp+=i);var r=t.magicAttrs.a_movespeed_v;r>0&&(this.moveSpeed+=r);var a=t.magicAttrs.a_pickrange_p;a>0&&(this.pickRadius*=1+a);var s=g.GodRideModel.inst.getAttr();this.moveSpeed+=s.speed,this.atk+=s.atk,this.maxHp+=s.hp;var c=m.GodSkinModel.inst.getAttr();this.atk+=c.atk,this.maxHp+=c.hp,this.reduce+=c.reduce;var l=I.GodBackModel.inst.getAttr();this.atk+=l.atk,this.maxHp+=l.hp,this._revive=t.magicAttrs.a_revive_p||0,this._hps=t.magicAttrs.a_hps_p||0,this._hlu=t.magicAttrs.a_hlu_p||0,this._hpm3=t.magicAttrs.a_hpm3_p||0,this._nmHps=t.magicAttrs.a_nm_hps_p||0,this._dodgP=t.magicAttrs.a_dodg_p||0,this._dodgbyhit=t.magicAttrs.a_dodgbyhit_p||0,this._sDamage=t.magicAttrs.s_damage_p||0,this._aSpeed=((t.magicAttrs.a_speed_hp||0)+1)*this.moveSpeed},e.prototype.updateVelocity=function(t,e){this._velocity.x=t,this._velocity.y=e,t<0?this.node.scaleX=1:t>0&&(this.node.scaleX=-1)},e.prototype.updatePlayer=function(){var t=this;_.GameModel.inst.loadRef++,this.loadBundleRes("Prefabs","/Game/GodSkin/skin0",function(e,o){var n=cc.instantiate(o);if(n.setParent(t.node),t._spRole=n.getComponent(sp.Skeleton),m.GodSkinModel.inst.curIdx>0){var i=m.GodSkinModel.inst.getInfo(m.GodSkinModel.inst.curIdx);t._spRole.setSkin("suit"+i.name.match(/\d+/g))}else t._spRole.setSkin("suit0");t._spRole.defaultAnimation=s.Idle,t._spRoleState=t._spRole.getState(),t._spRoleState.data.defaultMix=.2,t._spRoleState.setAnimation(a.normal,s.Idle,!0),t._materialVariants=[cc.MaterialVariant.create(t.material,t._spRole),cc.MaterialVariant.create(t.material,t._spRole)],t._materialVariants[1].define("IS_HIT",!0),t._spRole.setMaterial(0,t._materialVariants[0]);var r=t._spRole.attachUtil;if(r.generateAllAttachedNodes(),r.getAttachedNodes("target_lram")[0].addChild(t._nodeWeapon),t.loadBundleRes("Prefabs",v.GodWeaponModel.inst.getPrefabUrl(v.GodWeaponModel.inst.curIdx),cc.Prefab,function(e,o){var n=cc.instantiate(o);n.setParent(t._nodeWeapon);var i=n.getComponent(sp.Skeleton);i.setAnimation(0,"idle1",!0),i.defaultAnimation="idle1"}),I.GodBackModel.inst.curIdx>0){var l=r.getAttachedNodes("beishi")[0];t._nodeBack.setParent(n.parent),t._nodeBack.setSiblingIndex(0),t._nodeBack.scale=1,t.schedule(function(){var e=n.x,o=n.y;e+=l._bone.worldX*t._nodeBack.scale,o+=l._bone.worldY*t._nodeBack.scale,n.parent._bone&&(e+=n.parent._bone.worldX*t._nodeBack.scale,o+=n.parent._bone.worldY*t._nodeBack.scale+t._offset.y),t._nodeBack.setPosition(e,o),t._nodeBack.angle=l._bone.getWorldRotationX()}),t.loadBundleRes("Prefabs",I.GodBackModel.inst.getPrefabUrl(I.GodBackModel.inst.curIdx),cc.Prefab,function(e,o){var n=cc.instantiate(o),i=n.getComponent(sp.Skeleton);i.setAnimation(0,"idle",!0),i.defaultAnimation="idle",t._nodeBack.addChild(n)})}var u=t.deltaNormal;g.GodRideModel.inst.curIdx>0?(_.GameModel.inst.loadRef++,t.loadBundleRes("Prefabs",g.GodRideModel.inst.getPrefabUrl(g.GodRideModel.inst.curIdx),cc.Prefab,function(e,o){_.GameModel.inst.loadRef--;var n=cc.instantiate(o);n.setParent(t.node),t._spRide=n.getComponent(sp.Skeleton),t._spRideState=t._spRide.getState(),t._spRideState.data.defaultMix=.2,t._spRole.node.removeFromParent(),t._rideType=t.deltaRideType[g.GodRideModel.inst.curIdx-1],null==t._rideType&&(t._rideType=t.deltaRideType[0]),u=t.delta[t._rideType],t._spRole.node.setPosition(0,0,1),t._spRole.node.scale=1,t._spRole.node.angle=u.z,t.setRoleAnimation(a.move,"ride"+t._rideType,!0),n.scale=u.w,t._nodeBack.scale*=u.w;var i=t._spRide.attachUtil;i.generateAllAttachedNodes();var r=i.generateAttachedNodes("ride")[0];r.addChild(t._spRole.node),t.scheduleOnce(function(){if(cc.sys.isNative){var e=t._nodeWeapon.convertToWorldSpaceAR(cc.Vec2.ZERO);e.x+=r._bone.worldX*u.w,e.y+=r._bone.worldY*u.w;var o=t._nodeWeapon.parent.convertToNodeSpaceAR(e);t._nodeWeapon.setPosition(o)}t._offset.y+=u.y-r._bone.worldY*u.w,t._offset.x+=u.x,t._spRide.node.setPosition(t._offset.x,t._offset.y),c.default.inst.generateHpBar2(t,t._offset.y-20)})})):(t._nodeBack.scale*=u.w,t._spRole.node.parent=t.node,t._spRole.node.scale=u.w,t._spRole.node.angle=u.z,t._offset.y+=u.y,t._offset.x+=u.x,t._spRole.node.setPosition(t._offset.x,+t._offset.y),c.default.inst.generateHpBar2(t,t._offset.y-20)),y.GodPetModel.inst.curIdx>0&&(_.GameModel.inst.loadRef++,t.loadBundleRes("Prefabs",y.GodPetModel.inst.getPrefabUrl(y.GodPetModel.inst.curIdx),cc.Prefab,function(e,o){_.GameModel.inst.loadRef--,t._nodePet=cc.instantiate(o),t._nodePet.setParent(t.node.parent),t._nodePet.setSiblingIndex(0);var n=t._nodePet.addComponent(E.default);n.search=cc.v2(Number(p.TABLE.getGlobal("GodPet_SearchMaxX")),Number(p.TABLE.getGlobal("GodPet_SearchMaxY"))),n.atkSpeed=Number(p.TABLE.getGlobal("GodPet_AtkSpeed")),n.atkOffset=cc.v2(100,-60),n.moveSpeed=y.GodPetModel.inst.cur.speed,t.loadBundleRes("Prefabs","/Game/Weapon/weaponCommonPet",cc.Prefab,function(t,e){var o=cc.instantiate(e),i=o.getComponent(S.ComWeaponCommonPet);i.damage=Number(p.TABLE.getGlobal("GodPet_Damage")),i.lifeTime=Number(p.TABLE.getGlobal("GodPet_LifeTime")),i.effectInterval=Number(p.TABLE.getGlobal("GodPet_EffectInterval")),n.weapon=i,o.setParent(n.node)});var i=t.delta[0];t._nodePet.setPosition(i.x+100,i.y+-40),t._nodePet.scale=i.w})),_.GameModel.inst.loadRef--}),_.GameModel.inst.loadRef++,this.loadBundleRes("Prefabs","/Game/Weapon/weaponCommon",cc.Prefab,function(e,o){_.GameModel.inst.loadRef--;var n=cc.instantiate(o);n.setParent(t.node),n.setSiblingIndex(0),t._weapon=n.getComponent(O.WeaponBase)}),this.updateAttrs(),this.hp=this.maxHp},e.prototype.clearPlayer=function(){this._contact_monster_atk=0,this._nodeWeapon.removeFromParent(),this._nodeWeapon.destroyAllChildren(),this._nodeBack.removeFromParent(),this._nodeBack.destroyAllChildren(),this.node.destroyAllChildren(),this._nodePet&&this._nodePet.destroy(),this._weapon.destroy(),this.unscheduleAllCallbacks(),this.releaseAutoRes()},e.prototype.setRoleAnimation=function(t,e,o,n){if(void 0===n&&(n=!0),n){var i=this._spRole.getCurrent(t);if(i&&i.animation.name==e)return i}return this._spRole.setAnimation(t,e,o)},e.prototype.setRideAnimation=function(t,e,o,n){if(void 0===n&&(n=!0),n){var i=this._spRide.getCurrent(t);if(i&&i.animation.name==e)return i}return this._spRide.setAnimation(t,e,o)},e.prototype.update=function(t){var e=this;if(!(_.GameModel.inst.isPause||null==this._spRole||this.hp<=0)){if(this._attack_stamp+=t,this._attack_stamp>=this._attack_interval){this._attack_stamp-=this._attack_interval;var o;o=null==this._spRide?this.setRoleAnimation(a.normal,s.Attack,!1,!1):this.setRoleAnimation(a.normal,"attack"+(this._rideType+1)+"b",!1,!1),this._spRole.setTrackCompleteListener(o,function(){e._spRoleState.clearTrack(a.normal)}),this._weapon.fire({target:this.node})}var n=this.hp>this.maxHp/2?this.moveSpeed:this._aSpeed;0!=this._velocity.x&&(this.node.x+=n*this._velocity.x*t),0!=this._velocity.y&&(this.node.y+=n*this._velocity.y*t);var i=this.node.getPosition(this._v2),r=l.LayerMgr.inst;r.PlayerBulletLayer.setPosition(i.x,i.y),r.PlayerBulletLayer2.setPosition(i.x,i.y),h.EVENT.emit(u.EventId.ON_GAME_UPDATE_ROLE_POS,i);var c=this._velocity.len()>.1;if(c?null==this._spRide?this.setRoleAnimation(a.move,s.Run,!0):this.setRideAnimation(a.move,s.Run,!0):null==this._spRide?this.setRoleAnimation(a.move,s.Idle,!0):this.setRideAnimation(a.move,s.Idle,!0),this._touchStamp+=t,this._touchStamp>=this.touchDelta&&(this._touchStamp-=this.touchDelta,this._contact_monster_atk>0&&this.onHit(this._contact_monster_atk,!0)),this._hps>0&&(this._hpsStamp+=t,this._hpsStamp>=1&&(this._hpsStamp-=1,this.setHp(this.hp+this._hps))),this._hpm3>0&&(this._hpm3Stamp+=t,this._hpm3Stamp>=60&&(this._hpm3Stamp-=60,this.setHp(this.hp+this._hpm3))),this._nmHps>0)if(c)this._nmHpsStamp=0;else if(this._nmHpsStamp+=t,this._nmHpsStamp>1){var p=this._nmHps*this.maxHp*t;this.setHp(this.hp+p)}this._hitTime>0&&(this._hitTime-=t,this._hitTime<=0&&this.setDefaultMaterial()),this._game.buildGCD>0&&(this._game.buildGCD-=t)}},r([R([cc.Vec4])],e.prototype,"delta",void 0),r([R([cc.Integer])],e.prototype,"deltaRideType",void 0),r([R(cc.Vec4)],e.prototype,"deltaNormal",void 0),r([R(cc.Material)],e.prototype,"material",void 0),r([P],e)}(b.NpcBase);o.default=A,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/VM":"VM","../../Model/GameModel":"GameModel","../../Model/GodBackModel":"GodBackModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel","../../Model/WeaponModel":"WeaponModel","../NpcBase":"NpcBase","../Weapon/ComWeaponCommonPet":"ComWeaponCommonPet","../Weapon/WeaponBase":"WeaponBase","./PetComponent":"PetComponent"}],PlayerCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"08253TD6CNFPrzd48/7fvCO","PlayerCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Controller/GameBase"),l=t("../Controller/LayerMgr"),p=t("../Model/GameModel"),u=t("./Component/PlayerComponent"),d=t("./Joystick"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.joystick=null,e._player=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.pause=function(){this.joystick.node.active=!1,this.joystick.onTouchEnd(null),this.onJoystickStop()},e.prototype.resume=function(){this.joystick.node.active=!0},e.prototype.gameStart=function(){return a(this,void 0,void 0,function(){return s(this,function(){return this._player=cc.instantiate(this.player).getComponent(u.default),this._player.node.setParent(l.LayerMgr.inst.PlayerLayer),this.joystick.setMoveCallback(this.onJoystickMove.bind(this)),this.joystick.setStopCallback(this.onJoystickStop.bind(this)),p.GameModel.inst.isLoad=!0,p.GameModel.inst.player=this._player,[2]})})},e.prototype.gameLoad=function(){this._player.updatePlayer()},e.prototype.gameOver=function(){this._player.clearPlayer(),this._player.node.destroy(),this._player=null},e.prototype.onJoystickMove=function(t,e){var o=t.x*e,n=t.y*e;this._player.updateVelocity(o,n);var i=p.GameModel.inst;i.orientation.x=t.x,i.orientation.y=t.y},e.prototype.onJoystickStop=function(){this._player&&this._player.updateVelocity(0,0)},r([_(cc.Prefab)],e.prototype,"player",void 0),r([_(d.default)],e.prototype,"joystick",void 0),r([f],e)}(c.GameBase);o.default=y,cc._RF.pop()},{"../Controller/GameBase":"GameBase","../Controller/LayerMgr":"LayerMgr","../Model/GameModel":"GameModel","./Component/PlayerComponent":"PlayerComponent","./Joystick":"Joystick"}],RTAudioSourceMgr:[function(t,e,o){"use strict";cc._RF.push(e,"a3748F5c/NKObWAfRds2HSR","RTAudioSourceMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./RTAudioSource"),s=t("../Storage/LocalStorageMgr"),c=t("../../Define/LocalKey"),l=t("../Utils/Singleton"),p=cc._decorator,u=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._allAudios=[],e._audioVolum=new Map,e._audioSwitch=new Map,e}return i(e,t),e.prototype.init=function(){c.LocalKey;var t=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffect,!0);t&&this._audioVolum.set(a.RTAudioSourceType.Effect,parseInt(t));var e=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffectMute,!0);e&&this._audioSwitch.set(a.RTAudioSourceType.Effect,"yes"==e);var o=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusic,!0);o&&this._audioVolum.set(a.RTAudioSourceType.Music,parseInt(o));var n=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusicMute,!0);n&&this._audioSwitch.set(a.RTAudioSourceType.Music,"yes"==n)},e.prototype.registerAudio=function(t){this._allAudios.push(t);var e=this._audioVolum.get(t.audioType);e&&(t.volume=e);var o=this._audioSwitch.get(t.audioType);this._muteOne(t,o)},e.prototype.unregisterAudio=function(t){for(var e=0;e<this._allAudios.length;++e)if(this._allAudios[e]==t){this._allAudios.splice(e,1);break}},e.prototype.setMusicVolume=function(t,e){void 0===e&&(e=!1),this._setVolume(t,a.RTAudioSourceType.Music),this._audioVolum.set(a.RTAudioSourceType.Music,t),e&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeMusic,t.toString(),!0)},e.prototype.setEffectVolume=function(t,e){void 0===e&&(e=!1),this._setVolume(t,a.RTAudioSourceType.Effect),this._audioVolum.set(a.RTAudioSourceType.Effect,t),e&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeEffect,t.toString(),!0)},e.prototype.muteAllMusic=function(t,e){void 0===e&&(e=!1),this._audioSwitch.set(a.RTAudioSourceType.Music,t),this._mute(a.RTAudioSourceType.Music,t),e&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeMusicMute,t?"yes":"no",!0)},e.prototype.muteAllEffect=function(t,e){void 0===e&&(e=!1),this._audioSwitch.set(a.RTAudioSourceType.Effect,t),this._mute(a.RTAudioSourceType.Effect,t),e&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeEffectMute,t?"yes":"no",!0)},e.prototype.isMusicMute=function(){return this._audioSwitch.get(a.RTAudioSourceType.Music)},e.prototype.isEffectMute=function(){return this._audioSwitch.get(a.RTAudioSourceType.Effect)},e.prototype._mute=function(t,e){for(var o=0;o<this._allAudios.length;++o){var n=this._allAudios[o];n.audioType==t&&this._muteOne(n,e)}},e.prototype._muteOne=function(t,e){t.mute=e},e.prototype._setVolume=function(t,e){for(var o=0;o<this._allAudios.length;++o){var n=this._allAudios[o];n.audioType==e&&(n.volume=t)}},r([u],e)}(l.Singleton()));o.default=d,cc._RF.pop()},{"../../Define/LocalKey":"LocalKey","../Storage/LocalStorageMgr":"LocalStorageMgr","../Utils/Singleton":"Singleton","./RTAudioSource":"RTAudioSource"}],RTAudioSource:[function(t,e,o){"use strict";cc._RF.push(e,"f9b1cddJtZEEIUJhsBjDbYY","RTAudioSource");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RTAudioSourceType=void 0;var a,s=t("./RTAudioSourceMgr"),c=cc._decorator,l=c.ccclass,p=c.property;(function(t){t[t.Effect=0]="Effect",t[t.Music=1]="Music"})(a=o.RTAudioSourceType||(o.RTAudioSourceType={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioType=a.Effect,e}return i(e,t),e.prototype.onEnable=function(){t.prototype.onEnable.call(this),s.default.inst.registerAudio(this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),s.default.inst.unregisterAudio(this)},r([p({type:cc.Enum(a)})],e.prototype,"audioType",void 0),r([l],e)}(cc.AudioSource);o.default=u,cc._RF.pop()},{"./RTAudioSourceMgr":"RTAudioSourceMgr"}],RTClickSound:[function(t,e,o){"use strict";cc._RF.push(e,"54c377Q0zFDrbqStjZfjCne","RTClickSound");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./RTAudioSourceMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.soundEffect=null,e.soundVolume=1,e}return i(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},e.prototype.onTouch=function(){a.default.inst.isEffectMute()||cc.audioEngine.play(this.soundEffect,!1,this.soundVolume)},r([l(cc.AudioClip)],e.prototype,"soundEffect",void 0),r([l({slide:!0,min:0,max:1,step:.1})],e.prototype,"soundVolume",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./RTAudioSourceMgr":"RTAudioSourceMgr"}],RedDotHandler:[function(t,e,o){"use strict";cc._RF.push(e,"69c52E9GEdK6oiPRR2xKuI7","RedDotHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RedDotHandler=void 0;var a=t("./RedDot"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="",e}return i(e,t),e.prototype.onLoad=function(){this.onRedDot(a.RedDot.inst.getRedDot(this.key))},e.prototype.onEnable=function(){this.onRedDot(a.RedDot.inst.getRedDot(this.key)),a.RedDot.inst.on(this.key,this.onRedDot,this)},e.prototype.onDisable=function(){a.RedDot.inst.off(this.key,this.onRedDot,this)},e.prototype.onRedDot=function(t){this.node.opacity=t>0?255:0},e.prototype.setKey=function(t){a.RedDot.inst.off(this.key,this.onRedDot,this),this.key=t,this.onRedDot(a.RedDot.inst.getRedDot(this.key)),a.RedDot.inst.on(this.key,this.onRedDot,this)},r([l],e.prototype,"key",void 0),r([c],e)}(cc.Component);o.RedDotHandler=p,cc._RF.pop()},{"./RedDot":"RedDot"}],RedDotKey:[function(t,e,o){"use strict";cc._RF.push(e,"449fd4+GeRNf4Pm9HrtzgOO","RedDotKey"),Object.defineProperty(o,"__esModule",{value:!0}),o.RedDotKey=void 0;var n=function(){function t(){}return t.DailyTask="DailyTask",t.GodWeaponReward="GodWeaponReward",t.GodRide="GodRide",t.GodWeapon="GodWeapon",t.GodPet="GodPet",t.GodSkin="GodSkin",t.GodBack="GodBack",t.GodMenu="GodMenu",t.Talent="Talent",t.XiuLian="XiuLian",t.Achievement="Achievement",t}();o.RedDotKey=n,cc._RF.pop()},{}],RedDot:[function(t,e,o){"use strict";cc._RF.push(e,"19b027KVP5EWLORajsj1TOa","RedDot");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.RedDot=o.HEAD=void 0;var r=t("../../Define/RedDotKey"),a=t("../VM");o.HEAD="DOT";var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._RedDotMap=Object.create(null),e}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return this._inst||(this._inst=new e),this._inst},enumerable:!1,configurable:!0}),e.prototype.init=function(){for(var t in r.RedDotKey)this._RedDotMap[t]=0;a.VM.add(this._RedDotMap,o.HEAD)},e.prototype.getRedDot=function(t){return this._RedDotMap[t]||0},e.prototype.setRedDot=function(t,e){this._RedDotMap[t]=e,this.emit(t,e)},e.prototype.addRef=function(t){var e=this.getRedDot(t)+1;this.setRedDot(t,e),this.emit(t,e)},e.prototype.decRef=function(t){var e=this.getRedDot(t)-1;this.setRedDot(t,e),this.emit(t,e),e<0&&cc.warn("\u7ea2\u70b9\u8ba1\u6570\u5c0f\u4e8e0\u68c0\u67e5\u903b\u8f91, PATH:",t)},e}(cc.EventTarget);o.RedDot=s,cc._RF.pop()},{"../../Define/RedDotKey":"RedDotKey","../VM":"VM"}],RenderToTarget:[function(t,e,o){"use strict";cc._RF.push(e,"f857861KlhDEqAbWFYgu3tg","RenderToTarget");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.menu,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._target=null,e._renderTarget=null,e.offsetIndex=0,e._childrenMap=new Map,e._childrenOffsetMap=new Map,e._lastPos=null,e}var o;return i(e,t),o=e,Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t,this.node.activeInHierarchy&&this.onEnable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderTarget",{get:function(){return this._renderTarget},set:function(t){this._renderTarget=t,this.node.activeInHierarchy&&this.onEnable()},enumerable:!1,configurable:!0}),e.prototype.getChildren=function(){return this._childrenMap},e.prototype.onLoad=function(){this.target||(this.target=this.node)},e.prototype.onDestroy=function(){this._childrenMap.clear(),this._childrenOffsetMap.clear()},e.prototype.onEnable=function(){var t=this;null!=this.renderTarget&&(0==this._childrenMap.size&&this._moveOutside(),this._childrenMap.forEach(function(t){t.getComponent(o)?t.active=!0:t.opacity=255}),this.scheduleOnce(function(){t._lastPos=t.renderTarget.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),t.updateChildrenPosition()}),this.target.on(cc.Node.EventType.POSITION_CHANGED,this.updatePosition,this),this.target.on(cc.Node.EventType.SCALE_CHANGED,this.updateScale,this))},e.prototype.onDisable=function(){this._childrenMap.forEach(function(t){t.getComponent(o)?t.active=!1:t.opacity=0}),this.target.off(cc.Node.EventType.POSITION_CHANGED,this.updatePosition,this),this.target.off(cc.Node.EventType.SCALE_CHANGED,this.updateScale,this)},e.prototype.updateScale=function(){var t=this;this._childrenMap.forEach(function(e){return e.setScale(t.node.scale)})},e.prototype.updateChildrenPosition=function(){var t=this,e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.renderTarget.convertToNodeSpaceAR(e);this._childrenMap.forEach(function(e,n){var i=t._childrenOffsetMap.get(n);e.setPosition(o.x+i.x*t.node.scaleX,o.y+i.y*t.node.scaleY)})},e.prototype.updatePosition=function(){var t=this;this.scheduleOnce(function(){var e=t.renderTarget.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),o=e.sub(t._lastPos);t._childrenMap.forEach(function(t){t.x+=o.x,t.y+=o.y}),t._lastPos=e})},e.prototype._moveOutside=function(){for(var t,e=this.offsetIndex;this.node.childrenCount>0;){var o={x:(t=this.node.children[0]).x,y:t.y};this._childrenOffsetMap.set(e,o),t.scaleX*=this.node.scaleX,t.scaleY*=this.node.scaleY,t.parent=this.renderTarget,this._childrenMap.set(e,t),t.getComponent(cc.Label)?t.zIndex=100+e:t.zIndex=e,e++}this.updateChildrenPosition()},e.prototype.recoverChildren=function(){var t=this;this._childrenMap.forEach(function(e,o){e.parent!=t.node&&(e.scaleX/=t.node.scaleX,e.scaleY/=t.node.scaleY),e.parent=t.node;var n=t._childrenOffsetMap.get(o);e.setPosition(n.x,n.y)}),this._childrenMap.clear(),this._childrenOffsetMap.clear()},r([c({type:cc.Node,tooltip:"\u76d1\u542c\u79fb\u52a8\u7684\u8282\u70b9 \u5982\u679c\u6ca1\u6709\u5219\u76d1\u542c\u6302\u70b9"})],e.prototype,"_target",void 0),r([c({type:cc.Node,tooltip:"\u76d1\u542c\u79fb\u52a8\u7684\u8282\u70b9 \u5982\u679c\u6ca1\u6709\u5219\u76d1\u542c\u6302\u70b9"})],e.prototype,"target",null),r([c({type:cc.Node,tooltip:"\u79fb\u52a8\u540e\u7684\u7236\u8282\u70b9\uff08\u4e0d\u586b\u9ed8\u8ba4\u4e3a\u8be5\u8282\u70b9\u7684\u7236\u8282\u70b9,\u4e0d\u80fd\u4e3a\u5f53\u524d\u8282\u70b9\uff09"})],e.prototype,"_renderTarget",void 0),r([c({type:cc.Node,tooltip:"\u79fb\u52a8\u540e\u7684\u7236\u8282\u70b9\uff08\u4e0d\u586b\u9ed8\u8ba4\u4e3a\u8be5\u8282\u70b9\u7684\u7236\u8282\u70b9,\u4e0d\u80fd\u4e3a\u5f53\u524d\u8282\u70b9\uff09"})],e.prototype,"renderTarget",null),r([c({type:cc.Integer,tooltip:"\u521d\u59cbzIndex\u503c(\u9ed8\u8ba4\u4e3a:0)"})],e.prototype,"offsetIndex",void 0),o=r([s,l("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/RenderToTarget")],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],ResKeeperAddition:[function(t,e,o){"use strict";cc._RF.push(e,"4b0d4zhK7lOWb9jaa+EGYf5","ResKeeperAddition");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Controller/TimeMgr"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._prefabList=Object.create(null),e._nodeList=Object.create(null),e._nodePools=Object.create(null),e._timeList=Object.create(null),e._waterLevel=20,e}return i(e,t),e.prototype.loadItemPool=function(t,e,o,n,i){return void 0===i&&(i=1),r(this,void 0,Promise,function(){var r=this;return a(this,function(){return[2,new Promise(function(a){r.loadBundleRes(e,o,cc.Prefab,function(e,o){r.addItemPool(t,o,n||o.data.name,i),a()})})]})})},e.prototype.addItemPool=function(t,e,o,n){void 0===n&&(n=1),null==o&&(o=e.name),this._prefabList[t]=e,this._nodeList[t]=[],this._nodePools[t]=new cc.NodePool(o),this._timeList[t]=s.default.inst.now();for(var i=0;i<n;i++)this._nodePools[t].put(cc.instantiate(e))},e.prototype.getNodeList=function(t){return this._nodeList[t]},e.prototype.get=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=this._nodePools[t];if(null==n)return null;var i=n.get(0);if(null==i){var r=this._prefabList[t];if(null==r)return null;var a=(i=cc.instantiate(this._prefabList[t])).getComponent(n.poolHandlerComp);a&&a.reuse&&a.reuse.apply(a,e)}return this._nodeList[t].push(i),this._timeList[t]=s.default.inst.now(),i},e.prototype.put=function(t,e){var o=this._nodePools[t],n=this._nodeList[t],i=n.indexOf(e);n.splice(i,1),e.removeFromParent(),o.size()<this._waterLevel?o.put(e):e.destroy()},e.prototype.recycle=function(){for(var t in this._nodeList)for(var e=this._nodeList[t];e.length>0;)this.put(t,e[0])},e.prototype.clear=function(){for(var t in this._nodePools)this._nodePools[t].clear(),delete this._nodePools[t]},e.prototype.releaseAutoRes=function(){this.recycle(),this.clear(),this._prefabList=Object.create(null),this._nodeList=Object.create(null),this._nodePools=Object.create(null),this._timeList=Object.create(null),t.prototype.releaseAutoRes.call(this)},e}(t("./ResKeeper").default);o.default=c,cc._RF.pop()},{"../../Controller/TimeMgr":"TimeMgr","./ResKeeper":"ResKeeper"}],ResKeeper:[function(t,e,o){"use strict";cc._RF.push(e,"eb6467RtCVGxrVRKYRJLXOh","ResKeeper");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.autoRes=[],e}return i(e,t),e.prototype.loadRes=function(){var t=this,e=arguments[0],o=this.parseLoadResArgs(arguments[1],arguments[2],arguments[3]),n=o.onComplete;o.onComplete=function(e,o){if(!e&&t.isValid){if(o instanceof cc.Asset)o.addRef(),t.autoRes.push(o);else for(var i=0,r=o;i<r.length;i++){var a=r[i];a.addRef(),t.autoRes.push(a)}n&&n(e,o)}else cc.error(e)},cc.resources.load(e,o.type,o.onProgress,o.onComplete)},e.prototype.loadBundleRes=function(){var t=this,e=arguments[0],o=arguments[1],n=this.parseLoadResArgs(arguments[2],arguments[3],arguments[4]),i=cc.assetManager.getBundle(e);if(null!=i){var r=n.onComplete;n.onComplete=function(e,o){if(!e&&t.isValid){if(o instanceof cc.Asset)o.addRef(),t.autoRes.push(o);else for(var n=0,i=o;n<i.length;n++){var a=i[n];a.addRef(),t.autoRes.push(a)}r&&r(e,o)}else cc.error(e)},i.load(o,n.type,n.onProgress,n.onComplete)}else n.onComplete&&n.onComplete(null,null)},e.prototype.loadRemoteRes=function(t,e){var o=this;cc.assetManager.loadRemote(t,{ext:".png"},function(t,n){!t&&o.isValid?(n.addRef(),o.autoRes.push(n),e&&e(t,n)):cc.error(t)})},e.prototype.parseLoadResArgs=function(t,e,o){if(void 0===o){var n=cc.js.isChildClassOf(t,cc.Asset);e?(o=e,n&&(e=null)):void 0!==e||n||(o=t,e=null,t=null),void 0===e||n||(e=t,t=null)}return{type:t,onProgress:e,onComplete:o}},e.prototype.onDestroy=function(){this.releaseAutoRes()},e.prototype.releaseAutoRes=function(){for(var t=0;t<this.autoRes.length;t++)this.autoRes[t].decRef();this.autoRes.length=0},e.prototype.autoReleaseRes=function(t){t.addRef(),this.autoRes.push(t)},e.prototype.releaseAsset=function(t){var e=this.autoRes.indexOf(t);-1!=e&&(t.decRef(),this.autoRes.splice(e,1))},e.prototype.asyncLoadBundleRes=function(t,e,o){return a(this,void 0,Promise,function(){var n=this;return s(this,function(){return[2,new Promise(function(i,r){n.loadBundleRes(t,e,o,function(t,e){t?r(t):i(e)})})]})})},r([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],ResLoader:[function(t,e,o){"use strict";cc._RF.push(e,"2c138b9XzhOv5MyS5387lTH","ResLoader"),Object.defineProperty(o,"__esModule",{value:!0}),o.resLoader=void 0;var n=function(){function t(){}return t.prototype.loadRes=function(){cc.resources.load.apply(cc.resources,arguments)},t.prototype.loadResDir=function(){cc.resources.loadDir.apply(cc.resources,arguments)},t.prototype.loadRemoteRes=function(){cc.assetManager.loadRemote.apply(cc.assetManager,arguments)},t.prototype.releaseArray=function(t){for(var e=0;e<t.length;++e)this.releaseAsset(t[e])},t.prototype.releaseAsset=function(t){t.decRef()},t.prototype.getResItem=function(t,e){return cc.resources.get(t,e)},t}();o.default=n,o.resLoader=new n,cc._RF.pop()},{}],SceneBase:[function(t,e,o){"use strict";cc._RF.push(e,"5768aCJyVpKzp5YnbW0LQry","SceneBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Res/ResKeeper"),s=t("../../Define/SceneDef"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneType=s.SceneType.$Start,e}return i(e,t),r([p({type:cc.Enum(s.SceneType),displayName:"\u573a\u666f\u7c7b\u578b"})],e.prototype,"sceneType",void 0),r([l],e)}(a.default);o.default=u,cc._RF.pop()},{"../../Define/SceneDef":"SceneDef","../Res/ResKeeper":"ResKeeper"}],SceneDef:[function(t,e,o){"use strict";var n;cc._RF.push(e,"7e24c8vfn5L1oSlp04O4jsu","SceneDef"),Object.defineProperty(o,"__esModule",{value:!0}),o.SceneDataInfo=o.SceneType=void 0,function(t){t[t.$Start=0]="$Start",t[t.NONE=1]="NONE",t[t.Bootstrap=2]="Bootstrap",t[t.Main=3]="Main",t[t.Game=4]="Game",t[t.Test=5]="Test",t[t.$End=6]="$End"}(n=o.SceneType||(o.SceneType={}));var i=function(){function t(t,e,o){void 0===o&&(o=[]),this.extraloadRes=[],this.sceneType=t,this.sceneName=e,this.extraloadRes=o}return t.getSceneData=function(t){for(var e=0;e<this._sceneDataList.length;++e)if(this._sceneDataList[e].sceneType==t)return this._sceneDataList[e];return null},t._sceneDataList=[new t(n.Bootstrap,"BootStrap"),new t(n.Main,"Main"),new t(n.Game,"Game"),new t(n.Test,"Test")],t}();o.SceneDataInfo=i,cc._RF.pop()},{}],SceneMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0df942ksWpO84lCpHxevraf","SceneMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.SceneMgr=void 0;var c=t("../UI/UIFacade"),l=t("../UI/UIMgr"),p=t("../../Define/EventId"),u=t("../../Define/SceneDef"),d=t("../Event/EventMgr"),h=t("../Utils/Singleton"),f=cc._decorator,_=(f.ccclass,f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastSceneType=u.SceneType.NONE,e._currentSceneType=u.SceneType.NONE,e._loadingSceneType=u.SceneType.NONE,e}return i(e,t),e.prototype.getLastScene=function(){return this._lastSceneType},e.prototype.getCurrentScene=function(){return this._currentSceneType},Object.defineProperty(e.prototype,"sceneParams",{get:function(){return this._sceneParams},enumerable:!1,configurable:!0}),e.prototype.loadScene=function(t,e){void 0===e&&(e={}),this._loadingSceneType!=t?this._currentSceneType!=t?(this._sceneParams=e,this._loadScene(t)):cc.error("Scene: "+u.SceneType[t]+", is already loaded!"):cc.error("Scene: "+u.SceneType[t]+", is current being loading!")},e.prototype._loadScene=function(t,e){void 0===e&&(e=3),this._loadingSceneType=t;var o=u.SceneDataInfo.getSceneData(t);o?this._doLoadScene(o):cc.error("Scene not registerd, load scene faild!")},e.prototype._doLoadScene=function(t,e){var o=this;void 0===e&&(e=3);var n=this;cc.director.preloadScene(t.sceneName,function(t,e){d.EVENT.emit(p.EventId.ON_UPDATE_LOADING_PROGRESS,t,e)},function(i){i?(cc.error("\u573a\u666f\u52a0\u8f7d\u5931\u8d25",i),e>=0?(d.EVENT.emit(p.EventId.ON_UPDATE_LOADING_TTP,"\u7f51\u7edc\u4f3c\u4e4e\u4e0d\u592a\u597d"),setTimeout(function(){o._loadScene(t.sceneType,e-1)},1e3)):(e=3,setTimeout(function(){return r(o,void 0,void 0,function(){return a(this,function(o){switch(o.label){case 0:return[4,c.UIFacade.showConfirm("\u8bf7\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u8bd5","\u91cd\u8bd5","\u8fd4\u56de")];case 1:return o.sent()?this._loadScene(t.sceneType,e-1):cc.error("\u7528\u6237\u9009\u62e9\u9000\u51fa\u6e38\u620f"),[2]}})})},1e3))):cc.director.loadScene(t.sceneName,function(t){t?cc.error("\u573a\u666f\u5207\u6362\u5931\u8d25",t):n._loadSceneEnd()})})},e.prototype._loadSceneEnd=function(){this._lastSceneType=this._currentSceneType,this._currentSceneType=this._loadingSceneType,this._loadingSceneType=u.SceneType.NONE,this.reviveWnd()},e.prototype.pushReviveWnd=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this._reciveInfo||(this._reciveInfo={sceneType:this._currentSceneType,uis:[]}),this._reciveInfo.uis.push({type:t,args:e})},e.prototype.reviveWnd=function(){var t;if(this.needReviveWnds()){for(var e=this._reciveInfo.uis,o=e.length-1;o>=0;--o){var n=e[o];n.args[0]=n.args[0]||{},n.args[0].isReciver=!0,(t=l.default.inst).open.apply(t,s([n.type],n.args))}this._reciveInfo=void 0}},e.prototype.clearReviveWnds=function(){this._reciveInfo=void 0},e.prototype.needReviveWnds=function(){return this._reciveInfo&&this._reciveInfo.sceneType==this._currentSceneType},e}(h.Singleton()));o.SceneMgr=_,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/SceneDef":"SceneDef","../Event/EventMgr":"EventMgr","../UI/UIFacade":"UIFacade","../UI/UIMgr":"UIMgr","../Utils/Singleton":"Singleton"}],SelectWeaponItem:[function(t,e,o){"use strict";cc._RF.push(e,"5e41fwEh0JEQ7/9zOMoXLYv","SelectWeaponItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/Define"),s=t("../../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtName=null,e.txtLevel=null,e.txtDesc=null,e.spIcon=null,e._sid=null,e._info=null,e}return i(e,t),e.prototype.setInfo=function(t){var e=this;this._sid=t.id,this._info=t.info,1==this._info.lv?(this.txtLevel.string="\u65b0",this.txtLevel.node.color=new cc.Color(0,0,255)):(this.txtLevel.string="",this.txtLevel.node.color=new cc.Color(0,0,0)),this.txtName.string=""+a.SKILL_NAME[this._sid],this.txtDesc.string=""+this._info.desc,this.loadBundleRes("Textures",a.SKILL_ICON_URL[this._sid],cc.SpriteFrame,function(t,o){e.spIcon.spriteFrame=o})},r([p(cc.Label)],e.prototype,"txtName",void 0),r([p(cc.Label)],e.prototype,"txtLevel",void 0),r([p(cc.Label)],e.prototype,"txtDesc",void 0),r([p(cc.Sprite)],e.prototype,"spIcon",void 0),r([l],e)}(s.default);o.default=u,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/Res/ResKeeper":"ResKeeper"}],SelectWeapon:[function(t,e,o){"use strict";cc._RF.push(e,"8f257BbA+FG8ZCh+I4VHe2L","SelectWeapon");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Define/EventId"),c=t("../../../Define/UIDefs"),l=t("../../../Framework/Audio/AudioMgr"),p=t("../../../Framework/Event/EventMgr"),u=t("../../../Framework/UI/UIMgr"),d=t("../../../Framework/UIBase"),h=t("../../../Model/UserModel"),f=t("../../../Model/WeaponModel"),_=t("./SelectWeaponItem"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectWeapons=[],e.txtFree=null,e.btnRefreshFree=null,e.btnRefresh=null,e.btnGetAll=null,e.nodeTittle=null,e.layout=null,e._skillList=[],e}return i(e,t),e.prototype.onOpen=function(){for(var t in l.AudioMgr.inst.playEffectByName("ui_weaponSelect"),this.selectWeapons)this.selectWeapons[t].node.on(cc.Node.EventType.TOUCH_END,this.onClickItem,this);this.refresh(),p.EVENT.emit(s.EventId.ON_GAME_PAUSE)},e.prototype.refresh=function(){h.UserModel.inst.curStage>=h.UserModel.inst.quanDouYao?this.btnGetAll.node.active=!0:this.btnGetAll.node.active=!1,h.UserModel.inst.curStage>=h.UserModel.inst.huanYiPi?(h.UserModel.inst.switchNum>0?(this.txtFree.string="(\u5269\u4f59\u6b21\u6570\uff1a"+h.UserModel.inst.switchNum+")",this.btnRefresh.node.active=!1,this.btnRefreshFree.node.active=!0):(this.btnRefresh.node.active=!0,this.btnRefreshFree.node.active=!1),this.btnGetAll.node.x=180):(this.btnRefresh.node.active=!1,this.btnRefreshFree.node.active=!1,this.btnGetAll.node.x=0),this.getWeapon(),4==this._skillList.length?(this.nodeTittle.y=453,this.layout.node.y=20,this.layout.node.height=730,this.layout.spacingX=86,this.layout.spacingY=90,this.btnRefreshFree.node.y=-468,this.btnRefresh.node.y=-468,this.btnGetAll.node.y=-468):(this.nodeTittle.y=370,this.layout.node.y=60,this.layout.node.height=340,this.layout.spacingX=20,this.layout.spacingY=60,this.btnRefreshFree.node.y=-380,this.btnRefresh.node.y=-380,this.btnGetAll.node.y=-380)},e.prototype.getWeapon=function(){var t=3,e=f.WeaponModel.inst.magicAttrs.a_lucky_p;Math.random()<e&&(t=4);for(var o=f.WeaponModel.inst.getRandom(t),n=o.length,i=0;i<n;i++){var r=o[i];(a=this.selectWeapons[i]).node.active=!0,a.setInfo(r)}for(;i<this.selectWeapons.length;i++){var a;(a=this.selectWeapons[i]).node.active=!1}this._skillList=o},e.prototype.onClose=function(){u.default.inst.isUIOpen(c.UIType.FightEquip)||u.default.inst.isUIOpen(c.UIType.EliteBox)||u.default.inst.isUIOpen(c.UIType.DrawSkill)||u.default.inst.isUIOpen(c.UIType.DrawSkill)||p.EVENT.emit(s.EventId.ON_GAME_RESUME)},e.prototype.onClickItem=function(t){var e=t.target,o=e.getSiblingIndex(),n=this._skillList[o],i=e.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP,n.id,n.info.lv),p.EVENT.emit(s.EventId.ON_UI_GAME_FLY_SKILL,i,n.id),f.WeaponModel.inst.skillPoint--,f.WeaponModel.inst.skillPoint>0?this.refresh():this.close()},e.prototype.onClickSelectAll=function(){var t=this;a.default.inst.showAd("\u5c40\u5185\u5929\u8d4b\u5168\u9009",function(){for(var e=0;e<t._skillList.length;e++){var o=t._skillList[e],n=t.layout.node.children[e].convertToWorldSpaceAR(cc.Vec2.ZERO);o&&(p.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP,o.id,o.info.lv),p.EVENT.emit(s.EventId.ON_UI_GAME_FLY_SKILL,n,o.id))}f.WeaponModel.inst.skillPoint--,f.WeaponModel.inst.skillPoint>0?t.refresh():t.close()})},e.prototype.onClickRefresh=function(){var t=this;a.default.inst.showAd("\u5c40\u5185\u5237\u65b0\u5929\u8d4b",function(){h.UserModel.inst.switchNum+=9,t.refresh()})},e.prototype.onClickRefreshFree=function(){h.UserModel.inst.switchNum--,this.refresh()},r([m([_.default])],e.prototype,"selectWeapons",void 0),r([m(cc.Label)],e.prototype,"txtFree",void 0),r([m(cc.Button)],e.prototype,"btnRefreshFree",void 0),r([m(cc.Button)],e.prototype,"btnRefresh",void 0),r([m(cc.Button)],e.prototype,"btnGetAll",void 0),r([m(cc.Node)],e.prototype,"nodeTittle",void 0),r([m(cc.Layout)],e.prototype,"layout",void 0),r([g],e)}(d.default);o.default=v,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel","../../../Model/WeaponModel":"WeaponModel","./SelectWeaponItem":"SelectWeaponItem"}],Setting:[function(t,e,o){"use strict";cc._RF.push(e,"654a5azPSVAxItoP9nJTHw4","Setting");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Controller/NativeMgr"),s=t("../../Define/EventId"),c=t("../../Define/LocalKey"),l=t("../../Define/SceneDef"),p=t("../../Framework/Audio/RTAudioSourceMgr"),u=t("../../Framework/Event/EventMgr"),d=t("../../Framework/Event/RedDot"),h=t("../../Framework/Scene/SceneMgr"),f=t("../../Framework/Storage/LocalStorageMgr"),_=t("../../Framework/UI/UIFacade"),y=t("../../Framework/UI/UIMgr"),g=t("../../Framework/UIBase"),m=t("../../Framework/VM"),v=t("../../Model/AchievementModel"),M=t("../../Model/MagnetModel"),b=t("../../Model/GameModel"),E=t("../../Model/GodPetModel"),O=t("../../Model/GodRideModel"),I=t("../../Model/GodWeaponModel"),S=t("../../Model/StoreModel"),w=t("../../Model/UserModel"),P=t("../../Model/WeaponModel"),R=t("../../Model/XiuLianModel"),A=t("../../Model/GodSkinModel"),T=t("../../Model/GodBackModel"),L=t("../../Controller/TableMgr"),C=t("../../Define/Define"),B=t("../../Module/NewYear/Script/Model/NewYearModel"),k=cc._decorator,N=k.ccclass,D=k.property,x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicSprite=null,e.effectSprite=null,e.openFrame=null,e.closeFrame=null,e.bgSwitch=null,e.versionTxt=null,e}return i(e,t),e.prototype.onOpen=function(){var t=this,e=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusicMute,!0);this.changeState(this.musicSprite,"yes"==e,0);var o=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffectMute,!0);this.changeState(this.effectSprite,"yes"==o,0),this.bgSwitch.toggleItems.forEach(function(t,e){return t.isChecked=w.UserModel.inst.background==e}),this.versionTxt.string=a.default.inst._version,L.TABLE.getTable("StoreExchange").forEach(function(e){e.type==C.EXCHANGE_TYPE.Background&&(t.bgSwitch.toggleItems[e.lv].node.active=S.StoreModel.inst.exchange_listed.includes(e.id))}),u.EVENT.emit(s.EventId.ON_GAME_PAUSE)},e.prototype.onClose=function(){},e.prototype.onClickMusic=function(){var t=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusicMute,!0);p.default.inst.muteAllMusic("yes"!=t,!0),this.changeState(this.musicSprite,"yes"!=t)},e.prototype.onClickEffect=function(){var t=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffectMute,!0);p.default.inst.muteAllEffect("yes"!=t,!0),this.changeState(this.effectSprite,"yes"!=t)},e.prototype.changeState=function(t,e,o){void 0===o&&(o=.1);var n=t.node.getChildByName("point"),i=t.node.getChildByName("stateTxt").getComponent(cc.Label);t.spriteFrame=e?this.closeFrame:this.openFrame,i.string=e?"\u5173":"\u5f00",i.node.x=e?18:-18,cc.Tween.stopAllByTarget(n),cc.tween(n).to(o,{x:e?-42:42}).start()},e.prototype.onClickCancel=function(){u.EVENT.emit(s.EventId.ON_GAME_RESUME),this.close()},e.prototype.onClickExit=function(){u.EVENT.emit(s.EventId.ON_GAME_RESUME),u.EVENT.emit(s.EventId.ON_GAME_OVER,1),this.close()},e.prototype.onClickSwitch=function(t){w.UserModel.inst.background=t.node.getSiblingIndex()},e.prototype.onClickYongHuXieYi=function(){a.default.inst.openUserProtocol()},e.prototype.onClickYingSiXieYi=function(){a.default.inst.openPrivacyProtocol()},e.prototype.onClickJoinQQGroup=function(){a.default.inst.joinQQGroup()},e.prototype.onClickUserFeedback=function(){a.default.inst.openUserFeedback()},e.prototype.onClickClearData=function(){_.UIFacade.showConfirm("\u63d0\u793a","\u4f60\u786e\u5b9a\u8981\u5220\u9664\u6e38\u620f\u7684\u6240\u6709\u6570\u636e\u5417\uff1f","\u786e\u8ba4","\u53d6\u6d88").then(function(){d.RedDot._inst=null,b.GameModel._inst=null,P.WeaponModel._inst=null,w.UserModel._inst=null,E.GodPetModel._inst=null,I.GodWeaponModel._inst=null,O.GodRideModel._inst=null,A.GodSkinModel._inst=null,T.GodBackModel._inst=null,v.AchievementModel._inst=null,M.MagnetModel._inst=null,S.StoreModel._inst=null,R.XiuLianModel._inst=null,B.NewYearModel._inst=null,m.VM.removeAll(),y.default.inst.closeAll(),f.LocalStorageMgr.clearAll(),h.SceneMgr.inst.loadScene(l.SceneType.Bootstrap)})},r([D(cc.Sprite)],e.prototype,"musicSprite",void 0),r([D(cc.Sprite)],e.prototype,"effectSprite",void 0),r([D(cc.SpriteFrame)],e.prototype,"openFrame",void 0),r([D(cc.SpriteFrame)],e.prototype,"closeFrame",void 0),r([D(cc.ToggleContainer)],e.prototype,"bgSwitch",void 0),r([D(cc.Label)],e.prototype,"versionTxt",void 0),r([N],e)}(g.default);o.default=x,cc._RF.pop()},{"../../Controller/NativeMgr":"NativeMgr","../../Controller/TableMgr":"TableMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/LocalKey":"LocalKey","../../Define/SceneDef":"SceneDef","../../Framework/Audio/RTAudioSourceMgr":"RTAudioSourceMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Event/RedDot":"RedDot","../../Framework/Scene/SceneMgr":"SceneMgr","../../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UI/UIMgr":"UIMgr","../../Framework/UIBase":"UIBase","../../Framework/VM":"VM","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/GodBackModel":"GodBackModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel","../../Model/MagnetModel":"MagnetModel","../../Model/StoreModel":"StoreModel","../../Model/UserModel":"UserModel","../../Model/WeaponModel":"WeaponModel","../../Model/XiuLianModel":"XiuLianModel","../../Module/NewYear/Script/Model/NewYearModel":"NewYearModel"}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"5206eq0hLtHnra87eJbW17V","Singleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.Singleton=void 0,o.Singleton=function(){return function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return null==t._inst&&(t._inst=new this),t._inst},enumerable:!1,configurable:!0}),t._inst=null,t}()},cc._RF.pop()},{}],SkillDrawUI:[function(t,e,o){"use strict";cc._RF.push(e,"6f01etvksVOWLRoNQlOCz05","SkillDrawUI");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Model/GameModel"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphics=null,e.txtTime=null,e._dur=0,e._width=20,e._color=cc.color(0,0,0),e._tempDrawPointsAll=null,e._tempDrawColorsAll=null,e}return i(e,t),e.prototype.setDraw=function(t,e,o){this._tempDrawPointsAll=t,this._tempDrawColorsAll=e,this._dur=o,this.draw()},e.prototype.draw=function(){if(null!=this.graphics){var t=this.graphics,e=this._tempDrawPointsAll.concat();for(var o in e){var n=e[o],i=this._tempDrawColorsAll[o];this._color=cc.color(i.x,i.y,i.z);for(var r=[],a=0,s=n;a<s.length;a++){var c=s[a];r.push({x:c.x,y:c.y});var l=r.length;if(l<=1)t.circle(c.x,c.y,this._width/2),t.fill();else{var p=r[l-2],u=r[l-1];t.moveTo(p.x,p.y),t.lineTo(u.x,u.y),t.lineWidth=this._width,t.lineCap=cc.Graphics.LineCap.ROUND,t.lineJoin=cc.Graphics.LineJoin.ROUND,t.strokeColor=this._color,t.stroke()}}}}},e.prototype.update=function(t){a.GameModel.inst.isPause||this._dur>0&&(this._dur-=t,this.txtTime.string=Math.floor(this._dur)+"s",this._dur<0&&this.node.destroy())},r([l(cc.Graphics)],e.prototype,"graphics",void 0),r([l(cc.Label)],e.prototype,"txtTime",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel"}],SkillItem:[function(t,e,o){"use strict";cc._RF.push(e,"2417e+TDeZIep5DYn0dJcqD","SkillItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/Define"),s=t("../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e}return i(e,t),e.prototype.setIcon=function(t){var e=this;this.icon.spriteFrame=null,this.releaseAutoRes(),this.loadBundleRes("Textures",a.SKILL_ICON_URL[t],cc.SpriteFrame,function(t,o){e.icon.spriteFrame=o})},r([p(cc.Sprite)],e.prototype,"icon",void 0),r([l],e)}(s.default);o.default=u,cc._RF.pop()},{"../../Define/Define":"Define","../../Framework/Res/ResKeeper":"ResKeeper"}],SkillUI:[function(t,e,o){"use strict";cc._RF.push(e,"2993d/o0KRBQ7GfJiSUik3k","SkillUI");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Framework/List/RenderToTarget"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.txtLevel=null,e.render=null,e}return i(e,t),e.prototype.start=function(){},r([l(cc.Sprite)],e.prototype,"icon",void 0),r([l(cc.Label)],e.prototype,"txtLevel",void 0),r([l(a.default)],e.prototype,"render",void 0),r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Framework/List/RenderToTarget":"RenderToTarget"}],StageBoxItem:[function(t,e,o){"use strict";cc._RF.push(e,"42fbcVt2LRMs57VZS9rDki8","StageBoxItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/Define"),s=t("../../../Define/UIDefs"),c=t("../../../Framework/Res/ResKeeper"),l=t("../../../Framework/UI/UIMgr"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.txtNum=null,e.type="",e.id="",e.count=0,e.desc="",e}return i(e,t),e.prototype.start=function(){},e.prototype.setInfo=function(t,e,o,n){var i=this;switch(this.type=t,this.id=e,this.count=o,this.desc=n,t){case"skill":this.loadBundleRes("Textures",a.TALENT_ICON_URL_BY_ID[e],cc.SpriteFrame,function(t,n){i.icon.spriteFrame=n,"_p"==e.slice(-2)?i.txtNum.string="+"+100*o+"%":i.txtNum.string="+"+o});break;default:this.loadBundleRes("Textures",a.MONEY_ICON_URL[t],cc.SpriteFrame,function(t,e){i.icon.spriteFrame=e,i.txtNum.string="x"+o})}},e.prototype.btnCb=function(){l.default.inst.open(s.UIType.StageBoxTips,{str:this.desc,pos:this.node.parent.convertToWorldSpaceAR(this.node.position)})},r([d(cc.Sprite)],e.prototype,"icon",void 0),r([d(cc.Label)],e.prototype,"txtNum",void 0),r([u],e)}(c.default);o.default=h,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Define/UIDefs":"UIDefs","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/UI/UIMgr":"UIMgr"}],StageBoxTips:[function(t,e,o){"use strict";cc._RF.push(e,"9e2f4dRwA1MX4vXI6oX7csP","StageBoxTips");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.text=null,e.maxWidth=320,e}return i(e,t),e.prototype.onOpen=function(t,e){this.setTips(e.str,e.pos)},e.prototype.setTips=function(t,e){var o=this.node.parent.convertToNodeSpaceAR(e);o.x<=0?this.text.node.anchorX=0:this.text.node.anchorX=1,t=t.replace("\\n","\n"),this.text.string=t,t.length*this.text.fontSize>=this.maxWidth?this.text.overflow=cc.Label.Overflow.RESIZE_HEIGHT:this.text.overflow=cc.Label.Overflow.NONE,this.text._forceUpdateRenderData(),this.content.position=o},r([l(cc.Node)],e.prototype,"content",void 0),r([l(cc.Label)],e.prototype,"text",void 0),r([l],e.prototype,"maxWidth",void 0),r([c],e)}(a.default);o.default=p,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],StageBox:[function(t,e,o){"use strict";cc._RF.push(e,"8dbebUVB2NILrhc/knj22NW","StageBox");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Controller/TableMgr"),c=t("../../../Framework/Audio/AudioMgr"),l=t("../../../Framework/UI/UIFacade"),p=t("../../../Framework/UIBase"),u=t("../../../Model/UserModel"),d=t("./StageBoxItem"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfCommon=null,e.nodeReward=null,e.nodeAdReward=null,e.nodeBtnGet=null,e.nodeBGet=null,e.nodeBtnGetAd=null,e.nodeBGetAd=null,e.id=0,e.com=null,e}return i(e,t),e.prototype.onOpen=function(t,e){c.AudioMgr.inst.playEffectByName("ui_open"),this.id=e.id,this.com=e.com,this.refresh(this.id)},e.prototype.refresh=function(t){this.nodeReward.destroyAllChildren(),this.nodeAdReward.destroyAllChildren(),this.id=t;var e=s.TABLE.getTableInfo("stageBox","id",this.id);e&&(""!=e.rType1&&this.addReward(this.nodeReward,e.rType1,e.rId1,e.rVal1,e.desc1),""!=e.rType2&&this.addReward(this.nodeReward,e.rType2,e.rId2,e.rVal2,e.desc2),""!=e.adType1&&this.addReward(this.nodeAdReward,e.adType1,e.adId1,e.adVal1,e.adDesc1),""!=e.adType2&&this.addReward(this.nodeAdReward,e.adType2,e.adId2,e.adVal2,e.adDesc2),this.updateBtnSt())},e.prototype.updateBtnSt=function(){var t=u.UserModel.inst.stageBoxGet[this.id];1==(1&t)?(this.nodeBtnGet.active=!1,this.nodeBGet.active=!0):(this.nodeBtnGet.active=!0,this.nodeBGet.active=!1),2==(2&t)?(this.nodeBtnGetAd.active=!1,this.nodeBGetAd.active=!0):(this.nodeBtnGetAd.active=!0,this.nodeBGetAd.active=!1)},e.prototype.addReward=function(t,e,o,n,i){var r=cc.instantiate(this.pfCommon);r.getComponent(d.default).setInfo(e,o,n,i),t.addChild(r)},e.prototype.getItem=function(t,e,o){switch(t){case"money":u.UserModel.inst.money+=o;break;case"rMoney":u.UserModel.inst.rMoney+=o;break;case"g1Money":u.UserModel.inst.g1Money+=o;break;case"g2Money":u.UserModel.inst.g2Money+=o;break;case"g3Money":u.UserModel.inst.g3Money+=o;break;case"skill":u.UserModel.inst.stageBoxSkill[e]||(u.UserModel.inst.stageBoxSkill[e]=0),u.UserModel.inst.stageBoxSkill[e]+=o,u.UserModel.inst.stageBoxSkill=u.UserModel.inst.stageBoxSkill}},e.prototype.getReward=function(){if(1!=(1&u.UserModel.inst.stageBoxGet[this.id])){u.UserModel.inst.stageBoxGet[this.id]||(u.UserModel.inst.stageBoxGet[this.id]=0);var t=s.TABLE.getTableInfo("stageBox","id",this.id);t&&(u.UserModel.inst.stageBoxGet[this.id]|=1,u.UserModel.inst.stageBoxGet=u.UserModel.inst.stageBoxGet,""!=t.rType1&&this.getItem(t.rType1,t.rId1,t.rVal1),""!=t.rType2&&this.getItem(t.rType2,t.rId2,t.rVal2),this.updateBtnSt(),this.com.init(),c.AudioMgr.inst.playEffectByName("ui_tips"),l.UIFacade.showToast("\u9886\u53d6\u6210\u529f"))}},e.prototype.getRewardAd=function(){var t=this;if(2!=(2&u.UserModel.inst.stageBoxGet[this.id])){var e=s.TABLE.getTableInfo("stageBox","id",this.id);e&&a.default.inst.showAd("\u5b9d\u7bb1\u5e7f\u544a",function(){u.UserModel.inst.stageBoxGet[t.id]||(u.UserModel.inst.stageBoxGet[t.id]=0),u.UserModel.inst.stageBoxGet[t.id]|=2,u.UserModel.inst.stageBoxGet=u.UserModel.inst.stageBoxGet,""!=e.adType1&&t.getItem(e.adType1,e.adId1,e.adVal1),""!=e.adType2&&t.getItem(e.adType2,e.adId2,e.adVal2),t.updateBtnSt(),t.com.init(),c.AudioMgr.inst.playEffectByName("ui_tips"),l.UIFacade.showToast("\u9886\u53d6\u6210\u529f")})}},r([_(cc.Prefab)],e.prototype,"pfCommon",void 0),r([_(cc.Node)],e.prototype,"nodeReward",void 0),r([_(cc.Node)],e.prototype,"nodeAdReward",void 0),r([_(cc.Node)],e.prototype,"nodeBtnGet",void 0),r([_(cc.Node)],e.prototype,"nodeBGet",void 0),r([_(cc.Node)],e.prototype,"nodeBtnGetAd",void 0),r([_(cc.Node)],e.prototype,"nodeBGetAd",void 0),r([f],e)}(p.default);o.default=y,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TableMgr":"TableMgr","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel","./StageBoxItem":"StageBoxItem"}],StageMapBox:[function(t,e,o){"use strict";cc._RF.push(e,"143a6/aoOpKt5QLEGh/5xw6","StageMapBox");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/TableMgr"),s=t("../../../Define/UIDefs"),c=t("../../../Framework/UI/UIMgr"),l=t("../../../Model/UserModel"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sp=null,e.sfIcon=[],e.spine=null,e._id=-1,e._state=0,e}return i(e,t),e.prototype.start=function(){this.init()},e.prototype.init=function(){this._id=parseInt(this.node.name);var t=a.TABLE.getTableInfo("stageBox","id",this._id);if(t)if(this.sp.node.active=!0,this.spine.node.active=!1,l.UserModel.inst.curStage<=t.stage)this.sp.spriteFrame=this.sfIcon[0],this._state=0;else{var e=l.UserModel.inst.stageBoxGet[this._id];e?3==e?(this.sp.spriteFrame=this.sfIcon[3],this._state=3):(this._state=2,this.sp.node.active=!1,this.spine.node.active=!0,this.spine.setAnimation(0,"idle2",!0)):(this._state=1,this.sp.node.active=!1,this.spine.node.active=!0,this.spine.setAnimation(0,"idle1",!0))}else this.spine.node.active=!1},e.prototype.onClick=function(){0!=this._state&&c.default.inst.open(s.UIType.StageBox,{id:this._id,com:this})},r([d(cc.Sprite)],e.prototype,"sp",void 0),r([d([cc.SpriteFrame])],e.prototype,"sfIcon",void 0),r([d(sp.Skeleton)],e.prototype,"spine",void 0),r([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/UIDefs":"UIDefs","../../../Framework/UI/UIMgr":"UIMgr","../../../Model/UserModel":"UserModel"}],StageMapItem:[function(t,e,o){"use strict";cc._RF.push(e,"47b5aQxMh1JmIwRGW7gLb9V","StageMapItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../../../Define/Define"),c=t("../../../Framework/Res/ResKeeper"),l=cc._decorator,p=l.ccclass,u=l.property;(function(t){t[t.cc1=0]="cc1",t[t.cc2=1]="cc2",t[t.cc3=2]="cc3",t[t.cc4=3]="cc4",t[t.cc5=4]="cc5",t[t.cc6=5]="cc6",t[t.cc7=6]="cc7",t[t.cc8=7]="cc8",t[t.cc9=8]="cc9",t[t.cc1b=9]="cc1b",t[t.ccFinish=10]="ccFinish"})(a||(a={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spIcon=null,e._ccType=a.cc1,e._isPass=!1,e}return i(e,t),Object.defineProperty(e.prototype,"ccType",{get:function(){return this._ccType},set:function(t){this._ccType=t},enumerable:!1,configurable:!0}),e.prototype.setPass=function(t){this._isPass=t,this.updateIcon()},e.prototype.updateIcon=function(){var t=this;this._isPass&&(this._ccType==a.cc1?(this._ccType=a.cc1b,this.loadBundleRes("Textures",s.STAGE_ICON_URL[this._ccType],cc.SpriteFrame,function(e,o){t.spIcon.spriteFrame=o})):this.loadBundleRes("Textures",s.STAGE_ICON_URL[a.ccFinish],cc.SpriteFrame,function(e,o){var n=new cc.Node("passed");n.addComponent(cc.Sprite).spriteFrame=o,n.scaleX=t.node.scaleX,n.setParent(t.node)}))},r([u(cc.Sprite)],e.prototype,"spIcon",void 0),r([u({type:cc.Enum(a)})],e.prototype,"_ccType",void 0),r([u({type:cc.Enum(a),displayName:"\u5173\u5361\u7c7b\u578b"})],e.prototype,"ccType",null),r([p],e)}(c.default);o.default=d,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/Res/ResKeeper":"ResKeeper"}],StageMap:[function(t,e,o){"use strict";cc._RF.push(e,"e0882goNnJM5Z7uMq+x2mpQ","StageMap");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/NativeMgr"),s=t("../../../Controller/TableMgr"),c=t("../../../Controller/TimeMgr"),l=t("../../../Define/EventId"),p=t("../../../Define/SceneDef"),u=t("../../../Define/UIDefs"),d=t("../../../Framework/Audio/AudioMgr"),h=t("../../../Framework/Event/EventMgr"),f=t("../../../Framework/UI/UIFacade"),_=t("../../../Framework/UI/UIMgr"),y=t("../../../Framework/UIBase"),g=t("../../../Model/MagnetModel"),m=t("../../../Model/GameModel"),v=t("../../../Model/UserModel"),M=t("./StageMapBox"),b=t("./StageMapItem"),E=cc._decorator,O=E.ccclass,I=E.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeStage=null,e.nodeMap=null,e.nodeTips=null,e.nodeArrow=null,e.numTxt=null,e.nodeBoxes=null,e._stageList=[],e._boxList=[],e._curCom=null,e._isMove=!1,e._slideDis=10,e._selectStage=0,e._tmp1=cc.v2(),e._tmp2=cc.v2(),e}return i(e,t),e.prototype.onOpen=function(){var t=this;d.AudioMgr.inst.playEffectByName("ui_winMap"),this._selectStage=v.UserModel.inst.curStage,v.UserModel.inst.curStage>this.nodeTips.childrenCount&&(this._selectStage=this.nodeTips.childrenCount),this.nodeTips.children.forEach(function(e,o){return e.active=o==t._selectStage-1}),this.nodeStage.children.forEach(function(e){return e.on(cc.Node.EventType.TOUCH_END,t.onClickStage,t)}),this.numTxt.string=""+this._selectStage,this.refresh(),this.updatePos()},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onMove,this)},e.prototype.startCB=function(){},e.prototype.onTouchEnd=function(){this._isMove=!1},e.prototype.onMove=function(t){var e=t.getLocation(),o=t.getStartLocation(),n=cc.Vec2.distance(e,o);if(this._isMove||n>=this._slideDis){this._isMove=!0;var i=t.getDelta();this.slideCb(i)}},e.prototype.slideCb=function(t){this.nodeMap.x+=t.x,this.nodeMap.y+=t.y;var e=-this.nodeMap.width/2+this.node.width/2,o=this.nodeMap.width/2-this.node.width/2,n=-this.nodeMap.height/2+this.node.height/2,i=this.nodeMap.height/2-this.node.height/2;this.nodeMap.x<e&&(this.nodeMap.x=e),this.nodeMap.x>o&&(this.nodeMap.x=o),this.nodeMap.y<n&&(this.nodeMap.y=n),this.nodeMap.y>i&&(this.nodeMap.y=i)},e.prototype.refresh=function(){for(var t=this.nodeStage.children,e=0;e<t.length;e++){var o=this.nodeStage.getChildByName(""+(e+1));if(o){var n=o.getComponent(b.default);e+1<v.UserModel.inst.curStage?n.setPass(!0):(n.setPass(!1),e+1==v.UserModel.inst.curStage&&(this._curCom=n))}}for(t=this.nodeBoxes.children,this._boxList.length=0,e=0;e<t.length;e++){var i=this.nodeBoxes.getChildByName(""+(e+1));i&&(n=i.getComponent(M.default),this._boxList.push(n),n.init())}},e.prototype.updatePos=function(){for(var t=this.nodeStage.children,e=0;e<t.length;e++){var o=this.nodeStage.getChildByName(""+(e+1));if(o){var n=o.getComponent(b.default);e+1==this._selectStage&&(this._curCom=n)}}this.nodeMap.x=0,this.nodeMap.y=0;var i=this._curCom.node.position,r=this._curCom.node.parent.convertToWorldSpaceAR(i),a=this.nodeMap.parent.convertToNodeSpaceAR(r);this.nodeMap.x=-a.x,this.nodeMap.y=-a.y,this.slideCb(cc.v2(0,0));var s=this._curCom.node.convertToWorldSpaceAR(cc.v2(-4,100));this.nodeArrow.setPosition(this.nodeArrow.parent.convertToNodeSpaceAR(s))},e.prototype.movePos=function(){for(var t=this.nodeStage.children,e=0;e<t.length;e++){var o=this.nodeStage.getChildByName(""+(e+1));if(o){var n=o.getComponent(b.default);e+1==this._selectStage&&(this._curCom=n)}}var i=this.nodeMap.getPosition(this._tmp1);this.nodeMap.x=0,this.nodeMap.y=0;var r=this._curCom.node.getPosition(this._tmp2),a=this._curCom.node.parent.convertToWorldSpaceAR(r),s=this.nodeMap.parent.convertToNodeSpaceAR(a),c=-this.nodeMap.width/2+this.node.width/2,l=this.nodeMap.width/2-this.node.width/2,p=-this.nodeMap.height/2+this.node.height/2,u=this.nodeMap.height/2-this.node.height/2;s.x<c&&(s.x=c),s.x>l&&(s.x=l),s.y<p&&(s.y=p),s.y>u&&(s.y=u),this.nodeMap.setPosition(i),cc.tween(this.nodeMap).to(.2,{x:-s.x,y:-s.y},{easing:"cubicOut"}).start();var d=this._curCom.node.convertToWorldSpaceAR(cc.v2(-4,100));this.nodeArrow.setPosition(this.nodeArrow.parent.convertToNodeSpaceAR(d))},e.prototype.onClickStart=function(){if(null==s.TABLE.getTable("stage_"+this._selectStage))return f.UIFacade.showToast("\u5173\u5361\u5c1a\u672a\u5f00\u653e\uff0c\u656c\u8bf7\u671f\u5f85"),void d.AudioMgr.inst.playEffectByName("ui_not");m.GameModel.inst.clear(),m.GameModel.inst.stage=this._selectStage,v.UserModel.inst.selectStage=this._selectStage,g.MagnetModel.inst.stageTime=c.default.inst.now(),a.default.inst.logEvent("ohayoo_game_battlemap",{battletype:"\u666e\u901a\u6a21\u5f0f",mapid:v.UserModel.inst.selectStage,battleresult:0}),d.AudioMgr.inst.playEffectByName("ui_winMap"),_.default.inst.delayUIWaitAnim(cc.macro.REPEAT_FOREVER),_.default.inst.open(u.UIType.Loading,p.SceneType.Main),this.close(),h.EVENT.emit(l.EventId.ON_GAME_START)},e.prototype.onClickStage=function(t){var e=this;if(!(cc.Vec2.distance(t.getStartLocation(),t.getLocation())>10)){var o=t.target,n=Number(o.name);if(n>v.UserModel.inst.curStage)return f.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u524d\u7f6e\u5173\u5361"),void d.AudioMgr.inst.playEffectByName("ui_not");d.AudioMgr.inst.playEffectByName("talentSelect"),this._selectStage=n,this.nodeTips.children.forEach(function(t,o){return t.active=o==e._selectStage-1}),this.numTxt.string=""+this._selectStage,this.movePos()}},r([I(cc.Node)],e.prototype,"nodeStage",void 0),r([I(cc.Node)],e.prototype,"nodeMap",void 0),r([I(cc.Node)],e.prototype,"nodeTips",void 0),r([I(cc.Node)],e.prototype,"nodeArrow",void 0),r([I(cc.Label)],e.prototype,"numTxt",void 0),r([I(cc.Node)],e.prototype,"nodeBoxes",void 0),r([O],e)}(y.default);o.default=S,cc._RF.pop()},{"../../../Controller/NativeMgr":"NativeMgr","../../../Controller/TableMgr":"TableMgr","../../../Controller/TimeMgr":"TimeMgr","../../../Define/EventId":"EventId","../../../Define/SceneDef":"SceneDef","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/GameModel":"GameModel","../../../Model/MagnetModel":"MagnetModel","../../../Model/UserModel":"UserModel","./StageMapBox":"StageMapBox","./StageMapItem":"StageMapItem"}],StaticData:[function(t,e,o){"use strict";cc._RF.push(e,"bbb253g4ExFTqHUa4YXBYzk","StaticData"),Object.defineProperty(o,"__esModule",{value:!0}),o.StaticData=void 0;var n=function(){function t(){}return t.mainCamera=null,t.designResolutionSize=null,t.visibleSize=null,t.center=null,t.scale=1,t.minX=1,t.maxX=1,t.minY=1,t.maxY=1,t.radius=1,t}();o.StaticData=n,cc._RF.pop()},{}],StoreModel:[function(t,e,o){"use strict";cc._RF.push(e,"f4ad4wh/DlGdI0kOg75vpjW","StoreModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.StoreModel=void 0;var n=t("../Controller/TableMgr"),i=t("../Controller/TimeMgr"),r=t("../Define/EventId"),a=t("../Framework/Event/EventMgr"),s=t("../Framework/Storage/LocalStorageMgr"),c=t("../Framework/Utils/Utils"),l=function(){function t(){var t;this.rMoneyNum=60,this.g1MoneyNum=60,this.rMoney_cd=60,this.rMoney_freecd=144e5,this._rMoney_time=0,this._rMoney_freetime=0,this._money_free=[],this._exchange_list=[],this._exchange_listed=[],this.rMoneyNum=Number(n.TABLE.getGlobal("LiangCaoBuJi_rMoney")),this.g1MoneyNum=Number(n.TABLE.getGlobal("LiangCaoBuJi_g1Money")),this.rMoney_cd=Number(n.TABLE.getGlobal("LiangCaoBuJi_cd")),this.rMoney_freecd=Number(n.TABLE.getGlobal("LiangCaoBuJi_freecd")),this._rMoney_time=Number(s.LocalStorageMgr.getItem("LiangCaoBuJi_time2"))||0,this._rMoney_freetime=Number(s.LocalStorageMgr.getItem("LiangCaoBuJi_freetime2"))||0;var e=null===(t=s.LocalStorageMgr.getItem("LiangCaoBuJi_money_time2"))||void 0===t?void 0:t.split(",");if(e)for(var o in e)this._money_free[o]=Number(e[o]);else this._money_free=[0,0,0,0];this._exchange_list=JSON.parse(s.LocalStorageMgr.getItem("Store_exchange_list")||"[]"),this._exchange_listed=JSON.parse(s.LocalStorageMgr.getItem("Store_exchange_listed")||"[]"),0==this._exchange_list.length&&this.refreshExchange()}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rMoney_time",{get:function(){return this._rMoney_time},set:function(t){this._rMoney_time=t,s.LocalStorageMgr.setItem("LiangCaoBuJi_time2",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rMoney_freetime",{get:function(){return this._rMoney_freetime},set:function(t){this._rMoney_freetime=t,s.LocalStorageMgr.setItem("LiangCaoBuJi_freetime2",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"money_free",{get:function(){return this._money_free},set:function(t){this._money_free=t,s.LocalStorageMgr.setItem("LiangCaoBuJi_money_time2",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exchange_list",{get:function(){return this._exchange_list},set:function(t){this._exchange_list=t,s.LocalStorageMgr.setItem("Store_exchange_list",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exchange_listed",{get:function(){return this._exchange_listed},set:function(t){this._exchange_listed=t,s.LocalStorageMgr.setItem("Store_exchange_listed",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),t.prototype.getTime=function(){return this.rMoney_cd-(i.default.inst.now()-this._rMoney_time)},t.prototype.getFreeTime=function(){return this.rMoney_freecd-(i.default.inst.now()-this._rMoney_freetime)},t.prototype.refreshExchange=function(){var t=this,e=n.TABLE.getTable("StoreExchange"),o=[],i=[];e.forEach(function(e){t._exchange_listed.includes(e.id)||(o.push(e),i.push(e.widget))});var s=cc.math.randomRangeInt(5,9);this._exchange_list.length=0;for(var l=0;l<s&&0!=i.length;l++){var p=c.default.getRandWeightIndex(i);this._exchange_list.push(o[p].id),i.splice(p,1),o.splice(p,1)[0]}return a.EVENT.emit(r.EventId.ON_REFUSE_STORE),this.exchange_list=this._exchange_list},t.prototype.refreshFree=function(){if(this.getFreeTime()>0)return!1;for(;this.getFreeTime()<=0;)this.rMoney_freetime+=this.rMoney_freecd;return this._money_free[0]=1,this.money_free=this._money_free,this.refreshExchange(),!0},t._inst=null,t}();o.StoreModel=l,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Controller/TimeMgr":"TimeMgr","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../Framework/Utils/Utils":"Utils"}],StoreReview:[function(t,e,o){"use strict";cc._RF.push(e,"bde13UN3OlHJ4v/Y5GFOPY8","StoreReview");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/NativeMgr"),s=t("../../../Define/EventId"),c=t("../../../Framework/Event/EventMgr"),l=t("../../../Framework/UIBase"),p=t("../../../Model/UserModel"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeReward=null,e.txtReward=null,e}return i(e,t),e.prototype.onOpen=function(){this.txtReward.string="x"+p.UserModel.inst.storeReviewReward},e.prototype.onClickConfirm=function(){var t=this.nodeReward.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,t,"RMoney",function(){p.UserModel.inst.rMoney+=p.UserModel.inst.storeReviewReward}),a.default.inst.storeReview(),this.close()},e.prototype.onClickCancel=function(){this.close()},r([h(cc.Node)],e.prototype,"nodeReward",void 0),r([h(cc.Label)],e.prototype,"txtReward",void 0),r([d],e)}(l.default);o.default=f,cc._RF.pop()},{"../../../Controller/NativeMgr":"NativeMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel"}],Store_ExchangeInfo:[function(t,e,o){"use strict";cc._RF.push(e,"0ea3cuHRVRI6rla3H2ROAUV","Store_ExchangeInfo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Define/Define"),c=t("../../../Define/EventId"),l=t("../../../Framework/Audio/AudioMgr"),p=t("../../../Framework/Event/EventMgr"),u=t("../../../Framework/List/List"),d=t("../../../Framework/UI/UIFacade"),h=t("../../../Framework/UI/UIMgr"),f=t("../../../Framework/UIBase"),_=t("../../../Model/GodBackModel"),y=t("../../../Model/GodPetModel"),g=t("../../../Model/GodRideModel"),m=t("../../../Model/GodSkinModel"),v=t("../../../Model/GodWeaponModel"),M=t("../../../Model/StoreModel"),b=t("../../../Model/UserModel"),E=cc._decorator,O=E.ccclass,I=E.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.iconMoney=null,e.txtName=null,e.txtType=null,e.txtDesc=null,e.discount=null,e.txtDiscount=null,e.txtMoney=null,e.layout=null,e.list1=null,e.list2=null,e._model=null,e}return i(e,t),e.prototype.onOpen=function(t,e){var o=this,n=e;this._model=[null,null,g.GodRideModel.inst,v.GodWeaponModel.inst,y.GodPetModel.inst,m.GodSkinModel.inst,_.GodBackModel.inst,null][n.type],this.txtName.string=""+n.name,this.txtType.string=""+["\u5efa\u9020\u7c7b\u6280\u80fd","\u89d2\u8272\u6280\u80fd","\u5750\u9a91","\u795e\u5175","\u795e\u517d","\u65f6\u88c5","\u80cc\u9970","\u5730\u56fe"][n.type],this.txtDesc.string=""+n.desc,this.txtMoney.string=""+Math.floor(n.money*n.discount),1==n.discount?(this.discount.active=!1,this.txtDiscount.node.active=!1):(this.discount.active=!0,this.txtDiscount.node.active=!0,this.txtDiscount.string=Math.floor(10*n.discount)+"\u6298"),this.loadBundleRes("Textures",s.MONEY_ICON_URL[n.moneyType],cc.SpriteFrame,function(t,e){o.iconMoney.spriteFrame=e}),this.loadBundleRes("Textures",n.icon,cc.SpriteFrame,function(t,e){o.icon.spriteFrame=e}),this.layout.node.active=!1,s.Config.isAdBanner&&a.default.inst.pauseAdNative()},e.prototype.onClose=function(){s.Config.isAdBanner&&a.default.inst.resumeAdNative()},e.prototype.onClickGet=function(){var t=this._para,e=t.moneyType,o=Math.floor(t.money*t.discount);switch(t.type){case s.EXCHANGE_TYPE.Weapon:if(b.UserModel.inst.curStage<=b.UserModel.inst.godWeaponOpenStage)return l.AudioMgr.inst.playEffectByName("ui_not"),void d.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+b.UserModel.inst.godWeaponOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u5175\u7cfb\u7edf\u3011");break;case s.EXCHANGE_TYPE.Pet:if(b.UserModel.inst.curStage<=b.UserModel.inst.godPetOpenStage)return l.AudioMgr.inst.playEffectByName("ui_not"),void d.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+b.UserModel.inst.godPetOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u517d\u7cfb\u7edf\u3011");break;case s.EXCHANGE_TYPE.Skin:if(b.UserModel.inst.curStage<=b.UserModel.inst.godSkinOpenStage)return l.AudioMgr.inst.playEffectByName("ui_not"),void d.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+b.UserModel.inst.godSkinOpenStage+"\u5173\u89e3\u9501\u3010\u65f6\u88c5\u7cfb\u7edf\u3011");break;case s.EXCHANGE_TYPE.Back:if(b.UserModel.inst.curStage<=b.UserModel.inst.godBackOpenStage)return l.AudioMgr.inst.playEffectByName("ui_not"),void d.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+b.UserModel.inst.godBackOpenStage+"\u5173\u89e3\u9501\u3010\u80cc\u9970\u7cfb\u7edf\u3011")}if(b.UserModel.inst[e]<o)return l.AudioMgr.inst.playEffectByName("ui_not"),void h.default.inst.showToast("\u84dd\u5b9d\u77f3\u4e0d\u8db3");l.AudioMgr.inst.playEffectByName("achievement"),h.default.inst.showToast("\u5151\u6362\u6210\u529f"),b.UserModel.inst[e]-=o,M.StoreModel.inst.exchange_listed.push(t.id),M.StoreModel.inst.exchange_listed=M.StoreModel.inst.exchange_listed,p.EVENT.emit(c.EventId.ON_REFUSE_STORE),this._model&&(this._model.unlock.push(Number(t.lv)),this._model.unlock=this._model.unlock,this._model.curIdx=Number(t.lv),p.EVENT.emit(c.EventId.ON_REFRESH_ROLE)),t.type==s.EXCHANGE_TYPE.Background&&(b.UserModel.inst.background=Number(t.lv)),this.close()},e.prototype.onListRender=function(t){var e=t.getComponentsInChildren(cc.Label);e[0].string="",e[1].string="",e[2].string=""},e.prototype.onList2Render=function(t){var e=t.getComponentsInChildren(cc.Label);e[0].string="",e[1].string="",e[2].string=""},r([I(cc.Sprite)],e.prototype,"icon",void 0),r([I(cc.Sprite)],e.prototype,"iconMoney",void 0),r([I(cc.Label)],e.prototype,"txtName",void 0),r([I(cc.Label)],e.prototype,"txtType",void 0),r([I(cc.Label)],e.prototype,"txtDesc",void 0),r([I(cc.Node)],e.prototype,"discount",void 0),r([I(cc.Label)],e.prototype,"txtDiscount",void 0),r([I(cc.Label)],e.prototype,"txtMoney",void 0),r([I(cc.Layout)],e.prototype,"layout",void 0),r([I(u.default)],e.prototype,"list1",void 0),r([I(u.default)],e.prototype,"list2",void 0),r([O],e)}(f.default);o.default=S,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],Store_ExchangeItem:[function(t,e,o){"use strict";cc._RF.push(e,"307c0GYt+5IYoukBLrgoqch","Store_ExchangeItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.iconMoney=null,e.discount=null,e.txtDiscount=null,e.txtNum=null,e.txtMoney=null,e.nodeSold=null,e}return i(e,t),e.prototype.start=function(){},r([c(cc.Sprite)],e.prototype,"icon",void 0),r([c(cc.Sprite)],e.prototype,"iconMoney",void 0),r([c(cc.Node)],e.prototype,"discount",void 0),r([c(cc.Label)],e.prototype,"txtDiscount",void 0),r([c(cc.Label)],e.prototype,"txtNum",void 0),r([c(cc.Label)],e.prototype,"txtMoney",void 0),r([c(cc.Node)],e.prototype,"nodeSold",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Store_Exchange:[function(t,e,o){"use strict";cc._RF.push(e,"bde7djB7RVBuptdFqC78y3d","Store_Exchange");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/TableMgr"),s=t("../../../Define/Define"),c=t("../../../Define/EventId"),l=t("../../../Define/UIDefs"),p=t("../../../Framework/Event/EventMgr"),u=t("../../../Framework/List/List"),d=t("../../../Framework/Res/ResKeeper"),h=t("../../../Framework/UI/UIMgr"),f=t("../../../Model/StoreModel"),_=t("../../../Model/UserModel"),y=t("./Store_ExchangeItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e.txtTime=null,e._table=null,e._icons=[],e._iconMoneys=[],e}return i(e,t),e.prototype.onEnable=function(){p.EVENT.on(c.EventId.ON_REFUSE_STORE,this.refresh,this)},e.prototype.onDisable=function(){p.EVENT.off(c.EventId.ON_REFUSE_STORE,this.refresh,this)},e.prototype.start=function(){var t=this;this._table=a.TABLE.getTable("StoreExchange");var e=this._table.map(function(t){return t.icon});this.loadBundleRes("Textures",e,cc.SpriteFrame,function(e,o){t._icons=o,t.list.updateAll()}),this.loadBundleRes("Textures",Object.values(s.MONEY_ICON_URL),cc.SpriteFrame,function(e,o){t._iconMoneys=o,t.list.updateAll()}),this.refresh()},e.prototype.refresh=function(){this.list.numItems=f.StoreModel.inst.exchange_list.length},e.prototype.onListRender=function(t,e){var o=f.StoreModel.inst.exchange_list,n=f.StoreModel.inst.exchange_listed,i=this._table.findIndex(function(t){return t.id==o[e]}),r=this._table[i];if(null!=r){var a=t.getComponent(y.default);a.icon.spriteFrame=null,a.icon.spriteFrame=this._icons[i],a.iconMoney.spriteFrame=this._iconMoneys[Object.keys(s.MONEY_ICON_URL).indexOf(r.moneyType)],a.txtMoney.string=""+Math.floor(r.discount*r.money),r.discount<1?(a.discount.active=!0,a.txtDiscount.string=10*r.discount+"\u6298"):(a.discount.active=!1,a.txtDiscount.string=""),r.num>1?a.txtNum.string="x"+r.num:a.txtNum.string="";var c=n.includes(r.id);a.nodeSold.active=c,t.targetOff(cc.Node.EventType.TOUCH_END),t.on(cc.Node.EventType.TOUCH_END,function(){return h.default.inst.open(l.UIType.StoreExchangeInfo,r)},this)}},e.prototype.onClickRefresh=function(){_.UserModel.inst.g1Money<5?h.default.inst.showToast("\u84dd\u5b9d\u77f3\u4e0d\u8db3"):(_.UserModel.inst.g1Money-=5,f.StoreModel.inst.refreshExchange())},r([v(u.default)],e.prototype,"list",void 0),r([v(cc.Label)],e.prototype,"txtTime",void 0),r([m],e)}(d.default);o.default=M,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/UI/UIMgr":"UIMgr","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel","./Store_ExchangeItem":"Store_ExchangeItem"}],Store_Money:[function(t,e,o){"use strict";cc._RF.push(e,"52c05tJwPVPkILtRe2UkX22","Store_Money");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Controller/TimeMgr"),c=t("../../../Define/EventId"),l=t("../../../Framework/Audio/AudioMgr"),p=t("../../../Framework/Event/EventMgr"),u=t("../../../Framework/i18n/i18nMgr"),d=t("../../../Framework/Res/ResKeeper"),h=t("../../../Framework/Utils/Utils"),f=t("../../../Model/StoreModel"),_=t("../../../Model/UserModel"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iconNode=null,e.icon2Node=null,e.btnAd=null,e.btnFree=null,e.btnTime=null,e.numTxt=null,e.num2Txt=null,e.timeTxt=null,e._h="\u65f6",e._m="\u5206",e._s="\u79d2",e._idx=0,e}return i(e,t),e.prototype.onEnable=function(){p.EVENT.on(c.EventId.ON_REFUSE_STORE,this.refresh,this)},e.prototype.onDisable=function(){p.EVENT.off(c.EventId.ON_REFUSE_STORE,this.refresh,this)},e.prototype.start=function(){this._h=u.i18nMgr.getLabel("h"),this._m=u.i18nMgr.getLabel("m"),this._s=u.i18nMgr.getLabel("s"),this.btnTime.node.active=!1,this.refresh(),this.numTxt.string="x"+f.StoreModel.inst.rMoneyNum,this.num2Txt.string="x"+f.StoreModel.inst.g1MoneyNum},e.prototype.setState=function(t){0==t?(this.btnAd.node.active=!0,this.btnFree.node.active=!1):1==t&&(this.btnAd.node.active=!1,this.btnFree.node.active=!0)},e.prototype.refresh=function(){this.setState(f.StoreModel.inst.money_free[this._idx])},e.prototype.onClickAd=function(){var t=this;a.default.inst.showAd("\u7cae\u8349\u8865\u7ed9\u8d27\u5e01",function(){t.onReward()})},e.prototype.onClickAd2=function(){var t=this;a.default.inst.showAd("\u9886\u53d6\u84dd\u5b9d\u77f3",function(){t.onReward2()})},e.prototype.onClickFree=function(){f.StoreModel.inst.money_free[this._idx]=0,f.StoreModel.inst.money_free=f.StoreModel.inst.money_free,this.onReward()},e.prototype.onReward=function(){l.AudioMgr.inst.playEffectByName("achievement");var t=this.iconNode.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,t,"RMoney",function(){_.UserModel.inst.rMoney+=f.StoreModel.inst.rMoneyNum}),f.StoreModel.inst.rMoney_time=s.default.inst.now(),this.refresh()},e.prototype.onReward2=function(){l.AudioMgr.inst.playEffectByName("achievement");var t=this.icon2Node.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,t,"G1Money",function(){_.UserModel.inst.g1Money+=f.StoreModel.inst.g1MoneyNum})},e.prototype.update=function(){var t=f.StoreModel.inst.getTime();t>0?(this.btnTime.node.active=!0,this.timeTxt.string=t>36e5?h.default.formatTime(t,"hh"+this._h+"mm"+this._m):t>6e4?h.default.formatTime(t,"mm"+this._m+"ss"+this._s):t>1e4?h.default.formatTime(t,"ss"+this._s):h.default.formatTime(t,"s"+this._s)):this.btnTime.node.active=!1},r([m(cc.Node)],e.prototype,"iconNode",void 0),r([m(cc.Node)],e.prototype,"icon2Node",void 0),r([m(cc.Button)],e.prototype,"btnAd",void 0),r([m(cc.Button)],e.prototype,"btnFree",void 0),r([m(cc.Button)],e.prototype,"btnTime",void 0),r([m(cc.Label)],e.prototype,"numTxt",void 0),r([m(cc.Label)],e.prototype,"num2Txt",void 0),r([m(cc.Label)],e.prototype,"timeTxt",void 0),r([g],e)}(d.default);o.default=v,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TimeMgr":"TimeMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/Utils/Utils":"Utils","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],Store:[function(t,e,o){"use strict";cc._RF.push(e,"c2b93fH+ihLE6farj1W0ILv","Store");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Framework/UIBase"),s=t("../../../Framework/Utils/Utils"),c=t("../../../Framework/VM"),l=t("../../../Model/StoreModel"),p=t("../../../Model/UserModel"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtMoney=null,e.txtRMoney=null,e.txtG1Money=null,e.txtFreeTime=null,e.txtFree2Time=null,e.tipAni=null,e._aniPlay=!1,e}return i(e,t),e.prototype.onOpen=function(){this.tipAni.node.active=!1,this.updateMoney(p.UserModel.inst.money),this.updateRMoney(p.UserModel.inst.rMoney),this.updateG1Money(p.UserModel.inst.g1Money)},e.prototype.onEnable=function(){c.VM.bindPath("UserModel._money",this.updateMoney,this),c.VM.bindPath("UserModel._rMoney",this.updateRMoney,this),c.VM.bindPath("UserModel._g1Money",this.updateG1Money,this)},e.prototype.onDisable=function(){c.VM.unbindPath("UserModel._money",this.updateMoney,this),c.VM.unbindPath("UserModel._rMoney",this.updateRMoney,this),c.VM.unbindPath("UserModel._g1Money",this.updateG1Money,this)},e.prototype.updateMoney=function(t){this.txtMoney.string=""+t},e.prototype.updateRMoney=function(t){this.txtRMoney.string=""+t},e.prototype.updateG1Money=function(t){this.txtG1Money.string=""+t},e.prototype.onClickTipOpen=function(){this._aniPlay||(this.tipAni.node.active=!0,this.tipAni.play("TipOpen"))},e.prototype.onClickTipClose=function(){var t=this;this.tipAni.play("TipClose"),this.tipAni.once(cc.Animation.EventType.FINISHED,function(){t.tipAni.node.active=!1})},e.prototype.update=function(){var t=l.StoreModel.inst.getFreeTime();t>0?(this.txtFreeTime.string=s.default.formatTime(t,"hh:mm:ss"),this.txtFree2Time.string=s.default.formatTime(t,"hh:mm:ss")):(l.StoreModel.inst.refreshFree(),this.txtFreeTime.string="00:00:00",this.txtFree2Time.string="00:00:00")},r([h(cc.Label)],e.prototype,"txtMoney",void 0),r([h(cc.Label)],e.prototype,"txtRMoney",void 0),r([h(cc.Label)],e.prototype,"txtG1Money",void 0),r([h(cc.Label)],e.prototype,"txtFreeTime",void 0),r([h(cc.Label)],e.prototype,"txtFree2Time",void 0),r([h(cc.Animation)],e.prototype,"tipAni",void 0),r([d],e)}(a.default);o.default=f,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Framework/VM":"VM","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],TableMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cb107J2UoNKnJqcdLyLleqf","TableMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TABLE=void 0;var s=t("../Framework/Sys/TeMap"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isLoaded=!1,e._iTotalLoad=0,e._iLoadNum=0,e._ConfigTable=new s.default,e._GlobalResInfo=new s.default,e._StageSkResInfo=new s.default,e._PlayerLevel=[],e}return i(e,t),e.prototype.loadTableRes=function(){return r(this,void 0,Promise,function(){var t=this;return a(this,function(){return this._isLoaded?[2]:(this._isLoaded=!0,[2,new Promise(function(e){t._loadTableRes(function(){return e()})})])})})},e.prototype.loadTable=function(t,e){var o=this;cc.assetManager.getBundle("Config").load(t,cc.JsonAsset,function(n,i){if(n)cc.error("failed to load "+t+": "+n);else if(e)try{e(null,i)}catch(r){cc.error("loadTable->",r+" res:"+t)}o._onInitOver()})},e.prototype._onInitOver=function(){this._iLoadNum>=this._iTotalLoad?console.error("\u8d44\u6e90\u52a0\u8f7d\u6570\u91cf\u5bf9\u4e0d\u4e0a\u4e86\uff0c\u6ce8\u610f\u4fee\u6539"):(this._iLoadNum++,this._iLoadNum>=this._iTotalLoad&&this._completeCallback&&this._completeCallback())},e.prototype._loadTableRes=function(t){this._completeCallback=t;var e=[];e.push(this._ConfigResData),this._iTotalLoad=e.length;for(var o=0;o<e.length;o++)e[o].apply(this)},e.prototype._ConfigResData=function(){var t=this;this.loadTable("/config",function(e,o){for(var n=Object.keys(o.json),i=0;i<n.length;i++){var r=o.json[n[i]];t._ConfigTable.set(n[i],r)}var a=t._ConfigTable.get("global");for(i=0;i<a.length;i++){var s=a[i];t._GlobalResInfo.set(s.key,s.value)}for(i=1;;i++){var c=t._ConfigTable.get("stage_sk_"+i);if(null==c)break;t._StageSkResInfo.set(i,c)}var l=t._ConfigTable.get("playerLevel");for(i=0;i<l.length;i++)s=l[i],t._PlayerLevel[s.num]=s.money})},e.prototype.getTable=function(t){return this._ConfigTable.get(t)},e.prototype.getTableInfo=function(t,e,o){var n=this.getTable(t);return n?n.find(function(t){return t[e]==o}):null},e.prototype.getGlobal=function(t){return this._GlobalResInfo.get(t)},e.prototype.getStageSk=function(){return this._StageSkResInfo},e.prototype.getPlayerLevel=function(){return this._PlayerLevel},e}(t("../Framework/Utils/Singleton").Singleton());o.TABLE=c.inst,cc._RF.pop()},{"../Framework/Sys/TeMap":"TeMap","../Framework/Utils/Singleton":"Singleton"}],TalentItem:[function(t,e,o){"use strict";cc._RF.push(e,"379f5UsuE9K0r0fQ43wyGeM","TalentItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ani=null,e.icon=null,e.txtName=null,e.nodeLevel=null,e.nodeLevelBar1=null,e.nodeLevelBar2=null,e._bar1=[],e._bar2=[],e}return i(e,t),e.prototype.setLevel=function(t,e){if(this._bar1.length<e){this._bar1=[this.nodeLevelBar1],this._bar2=[this.nodeLevelBar2];for(var o=0;o<e-1;o++){var n=cc.instantiate(this.nodeLevelBar1),i=cc.instantiate(this.nodeLevelBar2);n.setParent(this.nodeLevel),i.setParent(this.nodeLevel),this._bar1.push(n),this._bar2.push(i)}}for(o=0;o<e;o++)o<t?(this._bar1[o].opacity=255,this._bar1[o].width=this.nodeLevel.width/e-this.nodeLevelBar2.width):this._bar1[o].opacity=0;this._bar2[e-1].active=!1},r([c(cc.Animation)],e.prototype,"ani",void 0),r([c(cc.Sprite)],e.prototype,"icon",void 0),r([c(cc.Label)],e.prototype,"txtName",void 0),r([c(cc.Node)],e.prototype,"nodeLevel",void 0),r([c(cc.Node)],e.prototype,"nodeLevelBar1",void 0),r([c(cc.Node)],e.prototype,"nodeLevelBar2",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Talent:[function(t,e,o){"use strict";cc._RF.push(e,"9722f7zuX9Fj5WGeEuSSnTa","Talent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Controller/TableMgr"),c=t("../../../Define/Define"),l=t("../../../Framework/Audio/AudioMgr"),p=t("../../../Framework/List/List"),u=t("../../../Framework/UI/UIFacade"),d=t("../../../Framework/UIBase"),h=t("../../../Framework/VM"),f=t("../../../Model/AchievementModel"),_=t("../../../Model/UserModel"),y=t("./TalentItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e.icon=null,e.iconFrame=null,e.txtName=null,e.txtDesc=null,e.txtLevelUp=null,e.txtMoney=null,e.btnRefesh=null,e.btns=[],e._select=-1,e._map=Object.create(null),e._icons=[],e}return i(e,t),e.prototype.onOpen=function(){var t=this;l.AudioMgr.inst.playEffectByName("ui_open"),s.TABLE.getTable("talent").forEach(function(e){null==t._map[e.id]&&(t._map[e.id]=[]),t._map[e.id].push(e)}),cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(this.btnRefesh.getComponent(cc.Widget).top+=60,this.btnRefesh.getComponent(cc.Widget).updateAlignment()),this.list.numItems=Object.keys(this._map).length,this.loadBundleRes("Textures",Object.values(c.TALENT_ICON_URL),cc.SpriteFrame,function(e,o){t._icons=o,t.list.updateAll()}),this.refresh(),this.updateMoney(_.UserModel.inst.money)},e.prototype.onEnable=function(){h.VM.bindPath("UserModel._money",this.updateMoney,this)},e.prototype.onDisable=function(){h.VM.unbindPath("UserModel._money",this.updateMoney,this)},e.prototype.updateMoney=function(t){this.txtMoney.string=""+t},e.prototype.refresh=function(){this.txtName.string="",this.txtDesc.string="",this.icon.spriteFrame=null,this.iconFrame.node.active=!1,this.btns[0].node.active=!1,this.btns[1].node.active=!1,this.txtLevelUp.string=""+_.UserModel.inst.getTalentMoney()},e.prototype.onListRender=function(t,e){var o=this,n=Object.keys(this._map)[e],i=this._map[n],r=_.UserModel.inst.talent[n]||0,a=i.length,s=i[r]||i[0],c=t.getComponent(y.default);c.txtName.string=""+s.name,c.icon.spriteFrame=this._icons[s.iconIdx],c.setLevel(r,a),c.ani.node.active=this._select==e,t.targetOff(cc.Node.EventType.TOUCH_END),t.on(cc.Node.EventType.TOUCH_END,function(){l.AudioMgr.inst.playEffectByName("talentSelect"),o._select=e,o.txtName.string=s.name+"|Lv."+r,o.txtDesc.string=""+s.desc,o.txtLevelUp.string=""+_.UserModel.inst.getTalentMoney(),o.icon.spriteFrame=o._icons[s.iconIdx],o.iconFrame.node.active=!0,o.btns[0].node.active=r<a,o.btns[1].node.active=r>=a,o.list.updateAll(),c.ani.node.active=!0,c.ani.play()})},e.prototype.onClickLevelUp=function(){var t=_.UserModel.inst.getTalentMoney();if(_.UserModel.inst.money<t)return l.AudioMgr.inst.playEffectByName("ui_not"),void u.UIFacade.showToast("\u94dc\u94b1\u4e0d\u8db3");l.AudioMgr.inst.playEffectByName("talentLevelUp"),f.AchievementModel.inst.addPoint(4);var e=Object.keys(this._map)[this._select],o=this._map[e],n=_.UserModel.inst.talent[e]||0,i=o.length;_.UserModel.inst.talent[e]=n+=1,_.UserModel.inst.talent=_.UserModel.inst.talent,_.UserModel.inst.money-=t,this.btns[0].node.active=n<i,this.btns[1].node.active=n>=i;var r=o[n-1];this.txtName.string=r.name+"|Lv."+n,this.txtDesc.string=""+r.desc,this.txtLevelUp.string=""+_.UserModel.inst.getTalentMoney(),this.onListRender(this.list.getItemByListId(this._select),this._select)},e.prototype.onClickRefreshTalent=function(){var t=this;0!=_.UserModel.inst.getTalentCount()?u.UIFacade.showConfirmAD("","\u4f60\u786e\u5b9a\u8981\u91cd\u7f6e\u5929\u8d4b\u5417\uff1f","\u786e\u5b9a","\u53d6\u6d88").then(function(){a.default.inst.showAd("\u83dc\u5355\u91cd\u7f6e\u5929\u8d4b",function(){var e=_.UserModel.inst.getTalentCount(),o=s.TABLE.getTable("talentLevelUpMoney"),n=0;o.forEach(function(t){t.num<e&&(n+=t.money)}),_.UserModel.inst.talent=Object.create(null),_.UserModel.inst.money+=n,t._select=-1,t.list.updateAll(),t.refresh()})}):u.UIFacade.showToast("\u8fd8\u6ca1\u70b9\u5929\u8d4b")},r([v(p.default)],e.prototype,"list",void 0),r([v(cc.Sprite)],e.prototype,"icon",void 0),r([v(cc.Sprite)],e.prototype,"iconFrame",void 0),r([v(cc.Label)],e.prototype,"txtName",void 0),r([v(cc.Label)],e.prototype,"txtDesc",void 0),r([v(cc.Label)],e.prototype,"txtLevelUp",void 0),r([v(cc.Label)],e.prototype,"txtMoney",void 0),r([v(cc.Button)],e.prototype,"btnRefesh",void 0),r([v(cc.Button)],e.prototype,"btns",void 0),r([m],e)}(d.default);o.default=M,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TableMgr":"TableMgr","../../../Define/Define":"Define","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/List/List":"List","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/VM":"VM","../../../Model/AchievementModel":"AchievementModel","../../../Model/UserModel":"UserModel","./TalentItem":"TalentItem"}],TaskModel:[function(t,e,o){"use strict";cc._RF.push(e,"31efa3j0yFF/4U+8ydGS806","TaskModel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.TaskModel=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._taskData=null,e}return i(e,t),Object.defineProperty(e.prototype,"TaskData",{get:function(){return this._taskData},set:function(t){this._taskData=t},enumerable:!1,configurable:!0}),e}(t("../Framework/Utils/Singleton").Singleton());o.TaskModel=r,cc._RF.pop()},{"../Framework/Utils/Singleton":"Singleton"}],Task:[function(t,e,o){"use strict";cc._RF.push(e,"6c7e7q3PxVKxox4RbtjDIHz","Task");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._index=0,e.steps=[],e}return i(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetNode",{get:function(){return this._targetNode},set:function(t){this._targetNode=t},enumerable:!1,configurable:!0}),r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],TeMap:[function(t,e,o){"use strict";cc._RF.push(e,"447f2WtSARLxbL0VCqFrwvW","TeMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this._data=Object.create(null),t&&(this._data=t)}return t.prototype.has=function(t){return null!=t&&null!=t&&!!this._data[t]},t.prototype.get=function(t){return null==t||null==t?null:this._data[t.toString()]},t.prototype.set=function(t,e){this._data[t.toString()]=e},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this._data)},enumerable:!1,configurable:!0}),t.prototype.get_keys=function(){return this.keys},t.prototype.del=function(t){delete this._data[t.toString()]},t.prototype.rand=function(){var t=this.keys,e=t[Math.floor(Math.random()*t.length)];return this.get(e)},t.prototype.clear=function(){this._data=Object.create(null)},t.prototype.getLength=function(){return this.keys.length},t}();o.default=n,cc._RF.pop()},{}],TestMonster:[function(t,e,o){"use strict";cc._RF.push(e,"06ac1QHXJ1JF6TE6Xlkw3HT","TestMonster");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Controller/LayerMgr"),s=t("../Controller/TableMgr"),c=t("../Define/EventId"),l=t("../Framework/Event/EventMgr"),p=t("../Framework/List/List"),u=t("../Framework/List/ListItem"),d=t("../Game/Component/MonsterComponent"),h=t("../Game/Monster/Weapon/MonsterWeapon"),f=t("../Model/GameModel"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.monster=[],e.sprMaterial=null,e.spineMaterial=null,e.ebScale=null,e.list=null,e._game=f.GameModel.inst,e._monsterList=[],e._isStop=!1,e._isOpen=!1,e}return i(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){l.EVENT.on(c.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.on(c.EventId.ON_GAME_OVER,this.gameOver,this)},e.prototype.onDisable=function(){l.EVENT.off(c.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.off(c.EventId.ON_GAME_OVER,this.gameOver,this)},e.prototype.gameLoaded=function(){this.list.numItems=this.monster.length},e.prototype.gameOver=function(){for(;this._monsterList.length>0;)this._monsterList.shift().destroy()},e.prototype.onListRender=function(t,e){var o=this;t.getComponent(u.default).title.getComponent(cc.Label).string=this.monster[e].name,t.targetOff(cc.Node.EventType.TOUCH_END),t.on(cc.Node.EventType.TOUCH_END,function(){var t=s.TABLE.getTable("stage_1")[0];(t=Object.assign({},t)).scale=Number(o.ebScale.string)||1;var n=t.mid,i=cc.instantiate(o.monster[e]),r=cc.math.randomRange(t.radMin,t.radMax),c=new cc.Vec2(r,0),l=cc.math.randomRange(0,2*Math.PI);c.rotateSelf(l),c.x+=f.GameModel.inst.player.node.x,c.y+=f.GameModel.inst.player.node.y,i.setPosition(c),i.setSiblingIndex(n),i.setParent(a.LayerMgr.inst.RoleLayer);var p=i.getComponent(d.default);null==p&&(p=i.addComponent(d.default));var u=i.getComponent(h.default);null!=u&&(u.level=1),p.setMaterials([o.sprMaterial,o.spineMaterial]),p.updateMonster(t,0),p.recycle=function(){o._game.monsterList.splice(o._game.monsterList.indexOf(p),1),o._monsterList.push(p.node),p.node.removeFromParent()},o._game.monsterList.push(p),i.opacity=0,cc.Tween.stopAllByTarget(i),cc.tween(i).to(.2,{opacity:255}).start()})},e.prototype.onClickStop=function(){var t=Number(s.TABLE.getGlobal("StageMonsterMax"));f.GameModel.inst.monster<t?f.GameModel.inst.monster+=t:f.GameModel.inst.monster-=t},e.prototype.onClickOpen=function(){cc.tween(this.node).to(.2,{x:this._isOpen?820:620}).start(),this._isOpen=!this._isOpen},r([g(cc.Prefab)],e.prototype,"monster",void 0),r([g(cc.Material)],e.prototype,"sprMaterial",void 0),r([g(cc.Material)],e.prototype,"spineMaterial",void 0),r([g(cc.EditBox)],e.prototype,"ebScale",void 0),r([g(p.default)],e.prototype,"list",void 0),r([y],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../Controller/LayerMgr":"LayerMgr","../Controller/TableMgr":"TableMgr","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/List/List":"List","../Framework/List/ListItem":"ListItem","../Game/Component/MonsterComponent":"MonsterComponent","../Game/Monster/Weapon/MonsterWeapon":"MonsterWeapon","../Model/GameModel":"GameModel"}],TestWeapon:[function(t,e,o){"use strict";cc._RF.push(e,"289eem1B3dA8KFSpNxbRUTy","TestWeapon");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Define/Define"),s=t("../Define/EventId"),c=t("../Define/UIDefs"),l=t("../Framework/Event/EventMgr"),p=t("../Framework/List/List"),u=t("../Framework/List/ListItem"),d=t("../Framework/UI/UIMgr"),h=t("../Model/GameModel"),f=t("../Model/WeaponModel"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e.ebEquip=null,e._isOpen=!1,e}return i(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.on(s.EventId.ON_GAME_OVER,this.gameOver,this),l.EVENT.on(s.EventId.ON_GAME_SKILL_REFUSE,this.onListUpdate,this)},e.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.off(s.EventId.ON_GAME_OVER,this.gameOver,this),l.EVENT.off(s.EventId.ON_GAME_SKILL_REFUSE,this.onListUpdate,this)},e.prototype.gameLoaded=function(){var t=Object.keys(f.WeaponModel.inst.weaponList);this.list.numItems=t.length},e.prototype.gameOver=function(){this.list.numItems=0},e.prototype.onListUpdate=function(){if(null==this.list.numItems){var t=Object.keys(f.WeaponModel.inst.weaponList);this.list.numItems=t.length}else this.list.updateAll()},e.prototype.onListRender=function(t,e){var o,n=t.getComponent(u.default).title.getComponent(cc.Label),i=Object.keys(f.WeaponModel.inst.weaponList)[e],r=(null===(o=f.WeaponModel.inst.weaponInfos[i])||void 0===o?void 0:o.getLevel())||0;n.string=a.SKILL_NAME[i]+" | Lv."+r,t.targetOff(cc.Node.EventType.TOUCH_END),t.on(cc.Node.EventType.TOUCH_END,function(){var t,e=(null===(t=f.WeaponModel.inst.weaponInfos[i])||void 0===t?void 0:t.getLevel())||0;l.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP,i,e+1)})},e.prototype.onClickResult=function(){h.GameModel.inst.isFinished=!0,l.EVENT.emit(s.EventId.ON_GAME_RESULT)},e.prototype.onClickLevelUp=function(){h.GameModel.inst.level++,f.WeaponModel.inst.skillPoint++},e.prototype.onClickGM=function(){a.Config.debug=!a.Config.debug},e.prototype.onClickEquip=function(){d.default.inst.open(c.UIType.FightEquip,this.ebEquip.string)},e.prototype.onClickOpen=function(){cc.tween(this.node).to(.2,{x:this._isOpen?-100:100}).start(),this._isOpen=!this._isOpen},r([g(p.default)],e.prototype,"list",void 0),r([g(cc.EditBox)],e.prototype,"ebEquip",void 0),r([y],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../Define/Define":"Define","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/List/List":"List","../Framework/List/ListItem":"ListItem","../Framework/UI/UIMgr":"UIMgr","../Model/GameModel":"GameModel","../Model/WeaponModel":"WeaponModel"}],TimeMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b6d081+/f1AwbCsWJal8mLb","TimeMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Framework/Utils/Singleton"),a=t("./NativeMgr"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this._localtime=Date.now(),this._webtime=a.default.inst.getWebTime(),this._webtime?(t(!0),this._difference=this._webtime-this._localtime,cc.game.on(cc.game.EVENT_SHOW,this._gameShow,this),cc.game.on(cc.game.EVENT_HIDE,this._gameHide,this)):t(!1)},e.prototype.now=function(){return Date.now()+this._difference},e.prototype._gameShow=function(){var t=Date.now()-this._lastLocaltime,e=a.default.inst.getActivityTime()-this._lastActivity-t;Math.abs(e)>10&&(this._difference+=e)},e.prototype._gameHide=function(){this._lastLocaltime=Date.now(),this._lastActivity=a.default.inst.getActivityTime()},e.prototype.isSameDay=function(t,e){return new Date(t).setHours(0,0,0,0)===new Date(e).setHours(0,0,0,0)},e.prototype.getCurToZero=function(){return new Date(this.now()).setHours(24,0,0,0)-this.now()},e}(r.Singleton());o.default=s,cc._RF.pop()},{"../Framework/Utils/Singleton":"Singleton","./NativeMgr":"NativeMgr"}],UIBase:[function(t,e,o){"use strict";cc._RF.push(e,"e0585CZW5BBgK519LYoyYnN","UIBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.UIShowTypes=void 0;var a,s=t("../Define/UIDefs"),c=t("./UI/UIMgr"),l=t("./Res/ResKeeperAddition"),p=cc._decorator,u=p.ccclass,d=p.property;(function(t){t[t.UIFullScreen=0]="UIFullScreen",t[t.UIAddition=1]="UIAddition",t[t.UISingle=2]="UISingle"})(a=o.UIShowTypes||(o.UIShowTypes={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showType=a.UISingle,e.quickClose=!0,e.showLayer=s.LayerType.Pop,e.maskOpacity=255,e._para=null,e.isPlayOpenAni=!1,e.UIid=0,e}return i(e,t),e.prototype.close=function(){c.default.inst.close(this.uiType)},e.prototype.init=function(t,e){this._para=Object.assign({},t),this.uiType=e},e.prototype.onOpen=function(){},e.prototype.onOpenAniOver=function(){},e.prototype.onClose=function(){},e.prototype.onTop=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o]},r([d({type:cc.Enum(a),displayName:"\u663e\u793a\u7c7b\u578b"})],e.prototype,"showType",void 0),r([d()],e.prototype,"quickClose",void 0),r([d({type:cc.Enum(s.LayerType)})],e.prototype,"showLayer",void 0),r([d()],e.prototype,"maskOpacity",void 0),r([u],e)}(l.default);o.default=h,cc._RF.pop()},{"../Define/UIDefs":"UIDefs","./Res/ResKeeperAddition":"ResKeeperAddition","./UI/UIMgr":"UIMgr"}],UICloseAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"0a83aI6odRAhpOnBMcQ6/en","UICloseAnimation");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),r([s],e)}(cc.Animation));o.default=c,cc._RF.pop()},{}],UIDefs:[function(t,e,o){"use strict";var n;cc._RF.push(e,"cfbd74GR/NOr782467+09nO","UIDefs"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIDataInfo=o.UIType=o.LayerType=void 0,function(t){t[t.GUI=0]="GUI",t[t.Pop=1]="Pop",t[t.Tip=2]="Tip",t[t.Top=3]="Top"}(o.LayerType||(o.LayerType={})),function(t){t[t.$Start=0]="$Start",t[t.UIMain=1]="UIMain",t[t.UIGame=2]="UIGame",t[t.UIGameB=3]="UIGameB",t[t.Confirm=4]="Confirm",t[t.ConfirmAD=5]="ConfirmAD",t[t.Loading=6]="Loading",t[t.Setting=7]="Setting",t[t.Stop=8]="Stop",t[t.GameStart=9]="GameStart",t[t.GameOver=10]="GameOver",t[t.GamePause=11]="GamePause",t[t.AgeTips=12]="AgeTips",t[t.StoreReview=13]="StoreReview",t[t.Talent=14]="Talent",t[t.StageMap=15]="StageMap",t[t.StageBox=16]="StageBox",t[t.StageBoxTips=17]="StageBoxTips",t[t.SelectWeapon=18]="SelectWeapon",t[t.Magnet=19]="Magnet",t[t.Supply=20]="Supply",t[t.GodMenu=21]="GodMenu",t[t.GodMenuInfo=22]="GodMenuInfo",t[t.GodMenuNew=23]="GodMenuNew",t[t.GodMenuView=24]="GodMenuView",t[t.GodWeaponReward=25]="GodWeaponReward",t[t.EliteBox=26]="EliteBox",t[t.FightEquip=27]="FightEquip",t[t.FightEquipTips=28]="FightEquipTips",t[t.FightEquipGuide=29]="FightEquipGuide",t[t.FightEquipGuideB=30]="FightEquipGuideB",t[t.Achievement=31]="Achievement",t[t.XiuLian=32]="XiuLian",t[t.XiuLianTip=33]="XiuLianTip",t[t.XiuLianAD=34]="XiuLianAD",t[t.XiuLianResult=35]="XiuLianResult",t[t.DrawSkill=36]="DrawSkill",t[t.GetMoney=37]="GetMoney",t[t.GetG1Money=38]="GetG1Money",t[t.Store=39]="Store",t[t.StoreB=40]="StoreB",t[t.StoreExchangeInfo=41]="StoreExchangeInfo",t[t.NewYearMenu=42]="NewYearMenu",t[t.NewYearItem=43]="NewYearItem",t[t.$End=44]="$End"}(n=o.UIType||(o.UIType={}));var i=function(){function t(t,e,o,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1),this.preventTouch=!0,this.cache=!1,this.uiType=t,this.uiBundle=e,this.uiPath=o,this.preventTouch=n,this.cache=i}return Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.uiPath},enumerable:!1,configurable:!0}),t.getUIData=function(t){for(var e=0;e<this._uiDataList.length;++e)if(this._uiDataList[e].uiType==t)return this._uiDataList[e];return null},t._uiDataList=[new t(n.Loading,"Prefabs","/Loading"),new t(n.UIMain,"Prefabs","/UIMain",!1),new t(n.UIGame,"Prefabs","/UIGame",!1),new t(n.UIGameB,"Prefabs","/UIGameB",!1),new t(n.StoreReview,"Prefabs","/UIPrefab/Pop/StoreReview"),new t(n.AgeTips,"Prefabs","/UIPrefab/Pop/AgeTips"),new t(n.Setting,"Prefabs","/UIPrefab/Setting"),new t(n.Stop,"Prefabs","/UIPrefab/Stop"),new t(n.Confirm,"Prefabs","/UIPrefab/Confirm"),new t(n.ConfirmAD,"Prefabs","/UIPrefab/ConfirmAD"),new t(n.GameStart,"Prefabs","/UIPrefab/GameStart"),new t(n.GamePause,"Prefabs","/UIPrefab/GamePause"),new t(n.GameOver,"Prefabs","/UIPrefab/GameOver"),new t(n.Talent,"Prefabs","/UIPrefab/Talent"),new t(n.StageMap,"Prefabs","/UIPrefab/StageMap"),new t(n.StageBox,"Prefabs","/UIPrefab/StageBox"),new t(n.StageBoxTips,"Prefabs","/UIPrefab/StageBoxTips"),new t(n.SelectWeapon,"Prefabs","/UIPrefab/SelectWeapon"),new t(n.Magnet,"Prefabs","/UIPrefab/Magnet"),new t(n.Supply,"Prefabs","/UIPrefab/Supply"),new t(n.GodMenu,"Prefabs","/UIPrefab/GodMenu"),new t(n.GodMenuInfo,"Prefabs","/UIPrefab/GodMenuInfo"),new t(n.GodMenuNew,"Prefabs","/UIPrefab/GodMenuNew"),new t(n.GodMenuView,"Prefabs","/UIPrefab/GodMenuView"),new t(n.GodWeaponReward,"Prefabs","/UIPrefab/GodWeaponReward"),new t(n.GetMoney,"Prefabs","/UIPrefab/GetMoney"),new t(n.GetG1Money,"Prefabs","/UIPrefab/GetG1Money"),new t(n.EliteBox,"Prefabs","/UIPrefab/EliteBox"),new t(n.FightEquip,"Prefabs","/UIPrefab/FightEquip"),new t(n.FightEquipTips,"Prefabs","/UIPrefab/FightEquipTips"),new t(n.FightEquipGuide,"Prefabs","/UIPrefab/FightEquipGuide"),new t(n.FightEquipGuideB,"Prefabs","/UIPrefab/FightEquipGuideB"),new t(n.DrawSkill,"Prefabs","/UIPrefab/DrawSkill"),new t(n.Achievement,"Prefabs","/UIPrefab/Achievement"),new t(n.XiuLian,"Prefabs","/UIPrefab/XiuLian"),new t(n.XiuLianTip,"Prefabs","/UIPrefab/XiuLianTip"),new t(n.XiuLianAD,"Prefabs","/UIPrefab/XiuLianAD"),new t(n.XiuLianResult,"Prefabs","/UIPrefab/XiuLianResult"),new t(n.Store,"Prefabs","/UIPrefab/Store"),new t(n.StoreB,"Prefabs","/UIPrefab/StoreB"),new t(n.StoreExchangeInfo,"Prefabs","/UIPrefab/StoreExchangeInfo"),new t(n.NewYearMenu,"NewYear","/UIPrefab/NewYearMenu"),new t(n.NewYearItem,"NewYear","/UIPrefab/NewYearItem")],t}();o.UIDataInfo=i,cc._RF.pop()},{}],UIFacade:[function(t,e,o){"use strict";cc._RF.push(e,"16e3aBpWmhDeZYUzLRkyJpM","UIFacade");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UIFacade=void 0;var r=t("./UIMgr"),a=t("../../Define/UIDefs"),s=function(){function t(){}return t.showToast=function(t){r.default.inst.showToast(t)},t.showConfirm=function(t,e,o,s,c,l,p){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(n,i){r.default.inst.open(a.UIType.Confirm,{text:[t,e,o,s],dot:[c,l],close:p,confirm:o?n:null,cancel:s?i:null})})]})})},t.showConfirmAD=function(t,e,o,s,c,l,p){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(n,i){r.default.inst.open(a.UIType.ConfirmAD,{text:[t,e,o,s],dot:[c,l],close:p,confirm:o?n:null,cancel:s?i:null})})]})})},t}();o.UIFacade=s,cc._RF.pop()},{"../../Define/UIDefs":"UIDefs","./UIMgr":"UIMgr"}],UIGame_NewYear:[function(t,e,o){"use strict";cc._RF.push(e,"2fe4eGSQApEwZW5oC8nPWJk","UIGame_NewYear");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../View/UI/UIGame"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),r([c],e)}(a.default));o.default=l,cc._RF.pop()},{"../../../../View/UI/UIGame":"UIGame"}],UIGame:[function(t,e,o){"use strict";cc._RF.push(e,"73818IatEVFkaM15Krp5VHS","UIGame");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../../Controller/AdMgr"),c=t("../../Controller/NativeMgr"),l=t("../../Define/Define"),p=t("../../Define/EventId"),u=t("../../Define/UIDefs"),d=t("../../Framework/Event/EventMgr"),h=t("../../Framework/List/List"),f=t("../../Framework/UI/UIMgr"),_=t("../../Framework/UIBase"),y=t("../../Framework/Utils/Utils"),g=t("../../Framework/VM"),m=t("../../Guide/GodGuide"),v=t("../../Model/GameModel"),M=t("../../Model/MagnetModel"),b=t("../../Model/WeaponModel"),E=t("../Items/SkillDrawUI"),O=t("../Items/SkillItem"),I=t("../Items/SkillUI"),S=t("./Event/FightEquipItem"),w=cc._decorator,P=w.ccclass,R=w.property;(function(t){t[t.equip=0]="equip",t[t.skill=1]="skill"})(a||(a={}));var A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.equipItem=null,e.skillItem=null,e.listSkillDraw=null,e.listSkill=null,e.renderSkill=null,e.txtMonster=null,e.txtMoney=null,e.txtWave=null,e.txtTime=null,e.txtLevel=null,e.pbExp=null,e.spExp=null,e.btnStop=null,e.btnFightEquip=null,e.Magnet=null,e.MagnetSpine=null,e.MagnetSprite=null,e.MagnetImgs=[],e.MagnetArrow=null,e._icons=[],e._first=!1,e._skills=[],e._refreshAdBanner=0,e._stampAdBanner=0,e}return i(e,t),e.prototype.onOpen=function(){var t=this;this._first=m.default.inst.node.active,this.listSkill.numItems=10,this.spExp.node.active=!1,cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(this.btnStop.getComponent(cc.Widget).top+=60,this.btnStop.getComponent(cc.Widget).updateAlignment()),this.addItemPool(a.equip,this.equipItem),this.addItemPool(a.skill,this.skillItem),this.updateMonster(v.GameModel.inst.monster),this.updateMoney(v.GameModel.inst.money),this.updateWave(v.GameModel.inst.wave),this.updateTime(v.GameModel.inst.time),this.updateExp(v.GameModel.inst.exp),this.updateLevel(v.GameModel.inst.level),this.loadBundleRes("Textures",Object.values(l.SKILL_ICON_URL),cc.SpriteFrame,function(e,o){t._icons=o,t.listSkill.updateAll()}),l.Config.isAdBanner&&(this._refreshAdBanner=this._stampAdBanner=l.Config.refreshAdBanner,s.default.inst.showAdBanner("\u6218\u6597\u9875banner"))},e.prototype.onClose=function(){l.Config.isAdBanner&&s.default.inst.removeAdBanner()},e.prototype.onLoad=function(){g.VM.bindPath("GameModel._monster",this.updateMonster,this),g.VM.bindPath("GameModel._money",this.updateMoney,this),g.VM.bindPath("GameModel._wave",this.updateWave,this),g.VM.bindPath("GameModel._time",this.updateTime,this),g.VM.bindPath("GameModel._exp",this.updateExp,this),g.VM.bindPath("GameModel._level",this.updateLevel,this),d.EVENT.on(p.EventId.ON_UI_GAME_FLY_EQUIP,this.onFlyEquip,this),d.EVENT.on(p.EventId.ON_UI_GAME_FLY_SKILL,this.onFlySkill,this),d.EVENT.on(p.EventId.ON_GAME_SKILL_REFUSE,this.onListSkillUpdate,this),d.EVENT.on(p.EventId.ON_GAME_DRAW_SKILL_REFUSE,this.onListSkillDrawUpdate,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),g.VM.unbindPath("GameModel._monster",this.updateMonster,this),g.VM.unbindPath("GameModel._money",this.updateMoney,this),g.VM.unbindPath("GameModel._wave",this.updateWave,this),g.VM.unbindPath("GameModel._time",this.updateTime,this),g.VM.unbindPath("GameModel._exp",this.updateExp,this),g.VM.unbindPath("GameModel._level",this.updateLevel,this),d.EVENT.off(p.EventId.ON_UI_GAME_FLY_EQUIP,this.onFlyEquip,this),d.EVENT.off(p.EventId.ON_UI_GAME_FLY_SKILL,this.onFlySkill,this),d.EVENT.off(p.EventId.ON_GAME_SKILL_REFUSE,this.onListSkillUpdate,this),d.EVENT.off(p.EventId.ON_GAME_DRAW_SKILL_REFUSE,this.onListSkillDrawUpdate,this)},e.prototype.onListSkillUpdate=function(t){var e=this,o=Object.keys(b.WeaponModel.inst.weaponInfos),n=Object.keys(b.WeaponModel.inst.weaponList);this._skills.length=0,o.forEach(function(t){return n.includes(t)&&e._skills.push(t)}),this._skills.length<10?this.listSkill.numItems=10:this._skills.length>10&&this.listSkill.numItems!=this._skills.length&&(this.listSkill.numItems=this._skills.length),this.listSkill.updateItem(this._skills.indexOf(t))},e.prototype.onListSkillDrawUpdate=function(){var t=Object.keys(b.WeaponModel.inst.weaponDrawCom);this.listSkillDraw.numItems!=t.length?this.listSkillDraw.numItems=t.length:this.listSkillDraw.updateAll()},e.prototype.onListSkillRender=function(t,e){var o,n=this._skills[e],i=t.getComponent(I.default);if(null==n)return i.icon.spriteFrame=null,void(i.txtLevel.string="");var r=(null===(o=b.WeaponModel.inst.weaponInfos[n])||void 0===o?void 0:o.getLevel())||0;i.icon.spriteFrame=this._icons[Object.keys(l.SKILL_ICON_URL).indexOf(n)],i.txtLevel.string="Lv."+r,null==i.render.renderTarget&&(i.render.target=this.listSkill.content,i.render.renderTarget=this.renderSkill)},e.prototype.onListSkillDrawRender=function(t,e){var o=Object.keys(b.WeaponModel.inst.weaponDrawCom),n=b.WeaponModel.inst.weaponDrawCom[o[e]],i=t.getComponent(E.default),r=n.getDrawInfo();i.setDraw(r.points,r.colors,r.dur)},e.prototype.updateMonster=function(t){this.txtMonster.string=""+t},e.prototype.updateMoney=function(t){this.txtMoney.string=""+t},e.prototype.updateWave=function(t){this.txtWave.string="\u7b2c"+t+"/"+v.GameModel.inst.waveMax+"\u6ce2"},e.prototype.updateTime=function(t){this.txtTime.string=""+y.default.formatTime(1e3*t,"mm:ss")},e.prototype.updateExp=function(t){var e=this;this.spExp.node.active=!0,cc.Tween.stopAllByTarget(this.pbExp),cc.tween(this.pbExp).to(.2,{progress:t/v.GameModel.inst.getLevelExp()}).call(function(){e.spExp.node.active=!1}).start()},e.prototype.updateLevel=function(t){this.txtLevel.string=""+(t+1)},e.prototype.onFlyNode=function(t,e,o,n,i){var r=f.default.inst.topLayer,a=r.convertToNodeSpaceAR(e),s=r.convertToNodeSpaceAR(o),c=(null==i?void 0:i.speed)||1e3,l=(null==i?void 0:i.scale)||.8,p=(null==i?void 0:i.scale2)||.5,u=(null==i?void 0:i.scale3)||.4,d=(null==i?void 0:i.delay)||.5;t.setScale(l),t.setParent(r),t.setPosition(a);var h=a.sub(s),_=h.len()/c,y=Math.random(),g=a,m=cc.v2(a.x-.4*h.x+y*h.len()-h.len()/2,a.y-.4*h.y+y*h.len()-h.len()/2),v=s;t.opacity=0,cc.tween(t).to(.1,{opacity:255}).start(),cc.tween(t).delay(d).parallel(cc.tween().to(_,{scale:p},{easing:"sineIn"}),cc.tween().bezierTo(_,g,m,v)).to(.3,{scale:u,opacity:0}).call(n).start()},e.prototype.onFlyEquip=function(t,e,o,n){var i=this,r=this.get(a.equip);r.getComponent(S.default).setData(e);var s=this.btnFightEquip.node.convertToWorldSpaceAR(cc.Vec2.ZERO);this.onFlyNode(r,t,s,function(){i.put(a.equip,r),o&&o()},n)},e.prototype.onFlySkill=function(t,e,o,n){var i=this,r=this._skills.indexOf(e),s=this.get(a.skill);s.getComponent(O.default).setIcon(e);var c,l=this.listSkill.getItemByListId(r);c=null==l?(l=this.listSkill.node).convertToWorldSpaceAR(cc.v2(l.width/2,0)):l.convertToWorldSpaceAR(cc.Vec2.ZERO),this.onFlyNode(s,t,c,function(){i.put(a.skill,s),o&&o()},n)},e.prototype.onClickStop=function(){v.GameModel.inst.isGuide||v.GameModel.inst.isPause||(d.EVENT.emit(p.EventId.ON_GAME_PAUSE),f.default.inst.open(u.UIType.Stop))},e.prototype.onClickFight=function(){v.GameModel.inst.isGuide||v.GameModel.inst.isPause||(d.EVENT.emit(p.EventId.ON_GAME_PAUSE),f.default.inst.open(u.UIType.FightEquip))},e.prototype.onClickMagnet=function(){v.GameModel.inst.isGuide||v.GameModel.inst.isPause||(d.EVENT.emit(p.EventId.ON_GAME_PAUSE),f.default.inst.open(u.UIType.Magnet))},e.prototype.onClickUserFeedback=function(){c.default.inst.openUserFeedback()},e.prototype.onClickMoney=function(){l.Config.debug&&f.default.inst.open(u.UIType.DrawSkill)},e.prototype.checkMagnet=function(){if(this._first&&1==v.GameModel.inst.stage&&v.GameModel.inst.wave<3)return this.Magnet.active=!1,void(this.MagnetArrow.active=!1);M.MagnetModel.inst.isActive()?(this.Magnet.active=!1,this.MagnetArrow.active=!1):(this.Magnet.active=!0,this.MagnetArrow.active=0==M.MagnetModel.inst.count&&!m.default.inst.node.active,this.MagnetSpine.node.active=!1,this.MagnetSprite.spriteFrame!=this.MagnetImgs[1]&&(this.MagnetSprite.spriteFrame=this.MagnetImgs[1]))},e.prototype.updateBanner=function(t){l.Config.isAdBanner&&0!=this._refreshAdBanner&&(this._stampAdBanner<0&&(this._stampAdBanner=this._refreshAdBanner,s.default.inst.showAdBanner("\u5237\u65b0Banner")),this._stampAdBanner-=t,this._stampAdBanner<0&&s.default.inst.removeAdBanner())},e.prototype.update=function(t){this.checkMagnet(t),this.updateBanner(t)},r([R(cc.Prefab)],e.prototype,"equipItem",void 0),r([R(cc.Prefab)],e.prototype,"skillItem",void 0),r([R(h.default)],e.prototype,"listSkillDraw",void 0),r([R(h.default)],e.prototype,"listSkill",void 0),r([R(cc.Node)],e.prototype,"renderSkill",void 0),r([R(cc.Label)],e.prototype,"txtMonster",void 0),r([R(cc.Label)],e.prototype,"txtMoney",void 0),r([R(cc.Label)],e.prototype,"txtWave",void 0),r([R(cc.Label)],e.prototype,"txtTime",void 0),r([R(cc.Label)],e.prototype,"txtLevel",void 0),r([R(cc.ProgressBar)],e.prototype,"pbExp",void 0),r([R(sp.Skeleton)],e.prototype,"spExp",void 0),r([R(cc.Button)],e.prototype,"btnStop",void 0),r([R(cc.Button)],e.prototype,"btnFightEquip",void 0),r([R({type:cc.Node,tooltip:"\u78c1\u5438\u6548\u5e94"})],e.prototype,"Magnet",void 0),r([R({type:sp.Skeleton,tooltip:"\u78c1\u5438\u6548\u5e94Spine"})],e.prototype,"MagnetSpine",void 0),r([R({type:cc.Sprite,tooltip:"\u78c1\u5438\u6548\u5e94\u56fe\u7247"})],e.prototype,"MagnetSprite",void 0),r([R({type:[cc.SpriteFrame],tooltip:"\u78c1\u5438\u6548\u5e94\u66ff\u6362\u56fe\u7247"})],e.prototype,"MagnetImgs",void 0),r([R({type:cc.Node,tooltip:"\u78c1\u5438\u6548\u5e94\u7bad\u5934"})],e.prototype,"MagnetArrow",void 0),r([P],e)}(_.default);o.default=A,cc._RF.pop()},{"../../Controller/AdMgr":"AdMgr","../../Controller/NativeMgr":"NativeMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../../Framework/Event/EventMgr":"EventMgr","../../Framework/List/List":"List","../../Framework/UI/UIMgr":"UIMgr","../../Framework/UIBase":"UIBase","../../Framework/Utils/Utils":"Utils","../../Framework/VM":"VM","../../Guide/GodGuide":"GodGuide","../../Model/GameModel":"GameModel","../../Model/MagnetModel":"MagnetModel","../../Model/WeaponModel":"WeaponModel","../Items/SkillDrawUI":"SkillDrawUI","../Items/SkillItem":"SkillItem","../Items/SkillUI":"SkillUI","./Event/FightEquipItem":"FightEquipItem"}],UIMain_NewYear:[function(t,e,o){"use strict";cc._RF.push(e,"114bfOviRpGvaIBcCisNPNZ","UIMain_NewYear");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../../Framework/VM"),s=t("../../../../View/UI/UIMain"),c=t("../Model/NewYearModel"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeNewYear=[],e.Fu=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.updateActive(),a.VM.bindPath("NewYearModel._active",this.updateActive,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),a.VM.unbindPath("NewYearModel._active",this.updateActive,this)},e.prototype.updateActive=function(){var t=c.NewYearModel.inst;this.nodeNewYear.forEach(function(e){return e.active=t.active})},r([u([cc.Node])],e.prototype,"nodeNewYear",void 0),r([u(cc.Node)],e.prototype,"Fu",void 0),r([p],e)}(s.default);o.default=d,cc._RF.pop()},{"../../../../Framework/VM":"VM","../../../../View/UI/UIMain":"UIMain","../Model/NewYearModel":"NewYearModel"}],UIMain:[function(t,e,o){"use strict";cc._RF.push(e,"64dc2vxx9NF7rh3Un1/4iJ5","UIMain");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../../Controller/NativeMgr"),c=t("../../Controller/TimeMgr"),l=t("../../Define/Define"),p=t("../../Define/EventId"),u=t("../../Define/RedDotKey"),d=t("../../Define/UIDefs"),h=t("../../Framework/Audio/AudioMgr"),f=t("../../Framework/Event/EventMgr"),_=t("../../Framework/Event/RedDot"),y=t("../../Framework/UI/UIFacade"),g=t("../../Framework/UI/UIMgr"),m=t("../../Framework/UIBase"),v=t("../../Framework/VM"),M=t("../../Guide/GodGuide"),b=t("../../Model/AchievementModel"),E=t("../../Model/GameModel"),O=t("../../Model/GodBackModel"),I=t("../../Model/GodPetModel"),S=t("../../Model/GodRideModel"),w=t("../../Model/GodSkinModel"),P=t("../../Model/GodWeaponModel"),R=t("../../Model/StoreModel"),A=t("../../Model/UserModel"),T=t("../../Model/XiuLianModel"),L=t("../Items/IconItem"),C=cc._decorator,B=C.ccclass,k=C.property;(function(t){t[t.icon=0]="icon"})(a||(a={}));var N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iconItem=null,e.txtMoney=null,e.txtRMoney=null,e.txtG1Money=null,e.btnSetting=null,e.Money=null,e.RMoney=null,e.G1Money=null,e.Achievement=null,e.GodRide=null,e.Talent=null,e.XiuLian=null,e.GodRideBan=null,e.GodTalentBan=null,e.GodXiulianBan=null,e.GodStoreBan=null,e}return i(e,t),e.prototype.onOpen=function(){M.default.inst.run(),cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(this.btnSetting.getComponent(cc.Widget).top+=60,this.btnSetting.getComponent(cc.Widget).updateAlignment()),0==A.UserModel.inst.isRealNameReward&&s.default.inst.checkDeviceRealName(),b.AchievementModel.inst.checkGet(),this.addItemPool(a.icon,this.iconItem),this.updateStage(A.UserModel.inst.curStage),this.updateMoney(A.UserModel.inst.money),this.updateRMoney(A.UserModel.inst.rMoney),this.updateG1Money(A.UserModel.inst.g1Money)},e.prototype.onLoad=function(){v.VM.bindPath("UserModel._money",this.updateMoney,this),v.VM.bindPath("UserModel._rMoney",this.updateRMoney,this),v.VM.bindPath("UserModel._g1Money",this.updateG1Money,this),v.VM.bindPath("UserModel._curStage",this.updateStage,this),f.EVENT.on(p.EventId.ON_GAME_START,this.gameStart,this),f.EVENT.on(p.EventId.ON_GAME_OVER,this.gameOver,this),f.EVENT.on(p.EventId.ON_UI_MAIN_FLY_ICON,this.onFlyIcon,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),v.VM.unbindPath("UserModel._money",this.updateMoney,this),v.VM.unbindPath("UserModel._rMoney",this.updateRMoney,this),v.VM.unbindPath("UserModel._g1Money",this.updateG1Money,this),v.VM.unbindPath("UserModel._curStage",this.updateStage,this),f.EVENT.off(p.EventId.ON_GAME_START,this.gameStart,this),f.EVENT.off(p.EventId.ON_GAME_OVER,this.gameOver,this),f.EVENT.off(p.EventId.ON_UI_MAIN_FLY_ICON,this.onFlyIcon,this)},e.prototype.updateMoney=function(t){this.txtMoney.string=""+t,_.RedDot.inst.setRedDot(u.RedDotKey.Talent,A.UserModel.inst.canTalentBuy()?1:0)},e.prototype.updateRMoney=function(t){this.txtRMoney.string=""+t,_.RedDot.inst.setRedDot(u.RedDotKey.GodRide,S.GodRideModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodWeapon,P.GodWeaponModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodPet,I.GodPetModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodMenu,_.RedDot.inst.getRedDot(u.RedDotKey.GodRide)+_.RedDot.inst.getRedDot(u.RedDotKey.GodWeapon)+_.RedDot.inst.getRedDot(u.RedDotKey.GodPet)+_.RedDot.inst.getRedDot(u.RedDotKey.GodSkin)+_.RedDot.inst.getRedDot(u.RedDotKey.GodBack)),this.scheduleOnce(function(){return b.AchievementModel.inst.checkGet()})},e.prototype.updateG1Money=function(t){this.txtG1Money.string=""+t,_.RedDot.inst.setRedDot(u.RedDotKey.GodSkin,w.GodSkinModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodBack,O.GodBackModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodMenu,_.RedDot.inst.getRedDot(u.RedDotKey.GodRide)+_.RedDot.inst.getRedDot(u.RedDotKey.GodWeapon)+_.RedDot.inst.getRedDot(u.RedDotKey.GodPet)+_.RedDot.inst.getRedDot(u.RedDotKey.GodSkin)+_.RedDot.inst.getRedDot(u.RedDotKey.GodBack))},e.prototype.updateStage=function(t){this.GodRideBan.active=t<=A.UserModel.inst.rideOpenStage,this.GodTalentBan.active=t<=A.UserModel.inst.talentOpenStage,this.GodXiulianBan.active=t<=A.UserModel.inst.xiuLianOpenStage,this.GodStoreBan.active=t<=A.UserModel.inst.storeOpenStage,t>A.UserModel.inst.storeOpenStage&&0==R.StoreModel.inst.rMoney_freetime&&(R.StoreModel.inst.rMoney_freetime=c.default.inst.now()),_.RedDot.inst.setRedDot(u.RedDotKey.GodWeaponReward,t>=A.UserModel.inst.godWeaponsRewardOpenStage?1:0),s.default.inst.updateAbTest(l.Config.abTest)},e.prototype.updateXiuLian=function(){A.UserModel.inst.curStage>A.UserModel.inst.xiuLianOpenStage?_.RedDot.inst.setRedDot(u.RedDotKey.XiuLian,T.XiuLianModel.inst.money+T.XiuLianModel.inst.forecastMoney()>T.XiuLianModel.inst.getMoney()?1:0):_.RedDot.inst.setRedDot(u.RedDotKey.XiuLian,0)},e.prototype.gameStart=function(){},e.prototype.gameOver=function(){},e.prototype.onFlyIcon=function(t,e,o,n){var i=this,r=(null==n?void 0:n.target)||this[""+e];if(null!=r){var s=this.get(a.icon);s.getComponent(L.default).setIcon(e);var c=g.default.inst.topLayer,l=c.convertToNodeSpaceAR(t),p=c.convertToNodeSpaceAR(r.convertToWorldSpaceAR(cc.Vec2.ZERO)),u=(null==n?void 0:n.scale)||.8,d=(null==n?void 0:n.scale2)||.5,h=(null==n?void 0:n.scale3)||.4,f=(null==n?void 0:n.delay)||.5;s.setScale(u),s.setParent(c),s.setPosition(l);var _=l.sub(p),y=_.len()/1e3,m=Math.random(),v=l,M=cc.v2(l.x-.4*_.x+m*_.len()-_.len()/2,l.y-.4*_.y+m*_.len()-_.len()/2),b=p;s.opacity=0,cc.tween(s).to(.1,{opacity:255}).start(),cc.tween(s).delay(f).parallel(cc.tween().to(y,{scale:d},{easing:"sineIn"}),cc.tween().bezierTo(y,v,M,b)).call(o).to(.3,{scale:h,opacity:0}).call(function(){return i.put(a.icon,s)}).start()}else console.error("target err: "+e)},e.prototype.onClickPause=function(){g.default.inst.open(d.UIType.GamePause)},e.prototype.onClickExit=function(){f.EVENT.emit(p.EventId.ON_GAME_OVER,1),g.default.inst.open(d.UIType.GameStart)},e.prototype.onClickGodWeaponReward=function(){g.default.inst.open(d.UIType.GodWeaponReward)},e.prototype.onClickTalent=function(){if(A.UserModel.inst.curStage<=A.UserModel.inst.talentOpenStage)return h.AudioMgr.inst.playEffectByName("ui_not"),void y.UIFacade.showToast("\u901a\u5173\u7b2c"+A.UserModel.inst.talentOpenStage+"\u5173\u89e3\u9501\u3010\u5929\u8d4b\u7cfb\u7edf\u3011");g.default.inst.open(d.UIType.Talent)},e.prototype.onClickXiuLian=function(){if(A.UserModel.inst.curStage<=A.UserModel.inst.xiuLianOpenStage)return h.AudioMgr.inst.playEffectByName("ui_not"),void y.UIFacade.showToast("\u901a\u5173\u7b2c"+A.UserModel.inst.xiuLianOpenStage+"\u5173\u89e3\u9501\u3010\u4fee\u70bc\u7cfb\u7edf\u3011");g.default.inst.open(d.UIType.XiuLian)},e.prototype.onClickRide=function(){if(A.UserModel.inst.curStage<=A.UserModel.inst.rideOpenStage)return h.AudioMgr.inst.playEffectByName("ui_not"),void y.UIFacade.showToast("\u901a\u5173\u7b2c"+A.UserModel.inst.rideOpenStage+"\u5173\u89e3\u9501\u3010\u5750\u9a91\u7cfb\u7edf\u3011");g.default.inst.open(d.UIType.GodMenu,{type:0})},e.prototype.onClickStore=function(){if(A.UserModel.inst.curStage<=A.UserModel.inst.storeOpenStage)return h.AudioMgr.inst.playEffectByName("ui_not"),void y.UIFacade.showToast("\u901a\u5173\u7b2c"+A.UserModel.inst.storeOpenStage+"\u5173\u89e3\u9501\u3010\u5546\u5e97\u3011");l.Config.isAdNative?g.default.inst.open(d.UIType.StoreB,{type:0}):g.default.inst.open(d.UIType.Store,{type:0})},e.prototype.onClickAchievement=function(){g.default.inst.open(d.UIType.Achievement)},e.prototype.onClickMap=function(){g.default.inst.open(d.UIType.StageMap)},e.prototype.onClickSetting=function(){g.default.inst.open(d.UIType.Setting)},e.prototype.onClickStop=function(){E.GameModel.inst.isGuide||g.default.inst.open(d.UIType.Stop)},e.prototype.onClickFight=function(){E.GameModel.inst.isGuide||g.default.inst.open(d.UIType.FightEquip)},e.prototype.onClickMagnet=function(){E.GameModel.inst.isGuide||g.default.inst.open(d.UIType.Magnet)},e.prototype.onClickUserFeedback=function(){s.default.inst.openUserFeedback()},e.prototype.onClickMoney=function(){l.Config.debug&&(A.UserModel.inst.money+=1e3,M.default.inst.run())},e.prototype.onClickRMoney=function(){l.Config.debug&&(A.UserModel.inst.rMoney+=100,M.default.inst.run())},e.prototype.onClickG1Money=function(){l.Config.debug&&(A.UserModel.inst.g1Money+=100,M.default.inst.run())},r([k(cc.Prefab)],e.prototype,"iconItem",void 0),r([k(cc.Label)],e.prototype,"txtMoney",void 0),r([k(cc.Label)],e.prototype,"txtRMoney",void 0),r([k(cc.Label)],e.prototype,"txtG1Money",void 0),r([k(cc.Button)],e.prototype,"btnSetting",void 0),r([k(cc.Node)],e.prototype,"Money",void 0),r([k(cc.Node)],e.prototype,"RMoney",void 0),r([k(cc.Node)],e.prototype,"G1Money",void 0),r([k(cc.Node)],e.prototype,"Achievement",void 0),r([k(cc.Node)],e.prototype,"GodRide",void 0),r([k(cc.Node)],e.prototype,"Talent",void 0),r([k(cc.Node)],e.prototype,"XiuLian",void 0),r([k(cc.Node)],e.prototype,"GodRideBan",void 0),r([k(cc.Node)],e.prototype,"GodTalentBan",void 0),r([k(cc.Node)],e.prototype,"GodXiulianBan",void 0),r([k(cc.Node)],e.prototype,"GodStoreBan",void 0),r([B],e)}(m.default);o.default=N,cc._RF.pop()},{"../../Controller/NativeMgr":"NativeMgr","../../Controller/TimeMgr":"TimeMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/RedDotKey":"RedDotKey","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Event/RedDot":"RedDot","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UI/UIMgr":"UIMgr","../../Framework/UIBase":"UIBase","../../Framework/VM":"VM","../../Guide/GodGuide":"GodGuide","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/GodBackModel":"GodBackModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel","../../Model/StoreModel":"StoreModel","../../Model/UserModel":"UserModel","../../Model/XiuLianModel":"XiuLianModel","../Items/IconItem":"IconItem"}],UIMgr:[function(t,e,o){"use strict";cc._RF.push(e,"e5f7aIPaPFCQK9zX5+7Hh5H","UIMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.eOrientation=void 0;var a=t("../../Define/UIDefs"),s=t("../UIBase"),c=t("./CommonToast"),l=t("../../Define/EventId"),p=t("../Res/ResLoader"),u=t("./UIOpenAnimation"),d=t("./UICloseAnimation"),h=t("../Event/EventMgr"),f=t("../Sys/TeMap"),_=cc._decorator,y=_.ccclass,g=_.property;(function(t){t[t.Landscape=0]="Landscape",t[t.Portrait=1]="Portrait"})(o.eOrientation||(o.eOrientation={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.guiLayer=null,e.popLayer=null,e.tipLayer=null,e.topLayer=null,e.uiWaitAni=null,e.uiWaitMask=null,e.tipsNode=null,e.uiBack=null,e._tipComponnet=null,e.BackGroundUI=0,e.isClosing=!1,e.isOpening=!1,e.UICache=Object.create(null),e.UIStack=[],e.UIOpenQueue=[],e.UICloseQueue=[],e.uiOpenBeforeDelegate=null,e.uiOpenDelegate=null,e.uiCloseDelegate=null,e.windowRes=new f.default,e}var o;return i(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return o._inst?o._inst:(cc.error("UIMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.uiWaitAni&&(this.uiWaitAni.active=!1),this.uiWaitMask&&(this.uiWaitMask.active=!1),this.resetWinSize(),o._inst=this},e.prototype.open=function(t,e,o){var n=this,i={uiType:t,uiArgs:e,uiView:null};if(this.isOpening||this.isClosing)return cc.log("open <"+a.UIType[t]+"> ui action push into a queue!"),void this.UIOpenQueue.push(i);-1==this.getUIIndex(t)?(i.zOrder=this.UIStack.length+1,this.UIStack.push(i),a.UIDataInfo.getUIData(t).preventTouch&&(i.preventNode=this.preventTouch(i.zOrder)),this.isOpening=!0,this.showUIWaitAnim(),this.getOrCreateUI(t,o,function(o){if(n.hideUIWaitAnim(),i.isClose||null==o)return cc.log("getOrCreateUI "+t+" faile! close state : "+i.isClose+" , uiView : "+o,"%s"),n.isOpening=!1,i.preventNode&&(i.preventNode.destroy(),i.preventNode=null),void h.EVENT.emit(l.EventId.ON_UI_OPEN_FAIL,t);n.onUIOpen(t,o,i,e),n.isOpening=!1,n.autoExecNextUI()},e)):this.closeToUI(t,e)},e.prototype.closeToUI=function(t,e,o){void 0===o&&(o=!0);var n=this.getUIIndex(t);if(-1!=n){n=o?n:n+1;for(var i=this.UIStack.length-1;i>=n;--i){var r=this.UIStack.pop(),s=r.uiType,c=r.uiView;r.isClose=!0,r.preventNode&&(r.preventNode.destroy(),r.preventNode=null),this.uiCloseDelegate&&this.uiCloseDelegate(s),c&&(c.onClose(),a.UIDataInfo.getUIData(s).cache?(this.UICache[s]=c,c.node.removeFromParent()):c.node.destroy())}this.updateUI(),this.UIOpenQueue=[],o&&this.open(t,e)}},e.prototype.resetWinSize=function(){this._winSize=cc.view.getVisibleSize()},e.prototype.getLayer=function(t){var e=null;switch(t){case a.LayerType.GUI:e=this.guiLayer;break;case a.LayerType.Pop:e=this.popLayer;break;case a.LayerType.Tip:e=this.tipLayer;break;case a.LayerType.Top:e=this.topLayer;break;default:cc.error("Unkonw layer type!","%s")}return e},e.prototype.add2Layer=function(t,e){if(e){var o=this.getLayer(t);o?e.setParent(o):cc.error("add to layer is not found!","%s")}else cc.error("node is not valid!","%s")},e.prototype.closeAll=function(t){void 0===t&&(t=a.UIType.Loading);for(var e=this.UIStack.length-1;e>=0;--e){var o=this.UIStack[e];o.uiType!=t&&this.close(o.uiType,!1)}this.UIOpenQueue=[],this.isOpening=!1,this.isClosing=!1},e.prototype.createCache=function(){var t=this,e=function(e){var n=a.UIType[""+e],i=a.UIDataInfo.getUIData(n);if(i&&i.cache){var r=i.fullPath;o.loadBundleRes(n,"Prefabs",r,cc.Prefab,null,function(e,o){if(e){cc.log("getOrCreateUI loadRes "+n+" faile, path: "+r);try{cc.error(e)}catch(_){}}else{var i=cc.instantiate(o);if(null==i)return cc.log("getOrCreateUI instantiate "+n+" faile, path: "+r),void p.resLoader.releaseAsset(o);var a=i.getComponent(s.default);if(null==a)return cc.log("getOrCreateUI getComponent "+n+" faile, path: "+r),i.destroy(),void p.resLoader.releaseAsset(o);o.addRef(),t.UICache[n]=a}})}},o=this;for(var n in a.UIType)e(n)},e.prototype.clearCache=function(){for(var t in this.UICache){var e=this.UICache[t];cc.isValid(e.node)&&e.node.destroy()}this.UICache=Object.create(null)},e.prototype.isTopUI=function(t){return 0!=this.UIStack.length&&this.UIStack[this.UIStack.length-1].uiType==t},e.prototype.getUI=function(t){for(var e=0;e<this.UIStack.length;e++){var o=this.UIStack[e];if(t==o.uiType)return o.uiView}return null},e.prototype.isUIOpen=function(t){return null!=this.getUI(t)},e.prototype.getTopUI=function(){return this.UIStack.length>0?this.UIStack[this.UIStack.length-1].uiView:null},e.prototype.showUIWaitAnim=function(){this.uiWaitAni&&(this.uiWaitAni.active=!0),this.uiWaitMask&&(this.uiWaitMask.active=!0)},e.prototype.hideUIWaitAnim=function(){this.uiWaitAni.opacity=255,cc.Tween.stopAllByTarget(this.uiWaitAni),this.uiWaitAni&&(this.uiWaitAni.active=!1),this.uiWaitMask&&(this.uiWaitMask.active=!1)},e.prototype.delayUIWaitAnim=function(t){void 0===t&&(t=1),this.uiWaitAni.opacity=0,cc.Tween.stopAllByTarget(this.uiWaitAni),cc.tween(this.uiWaitAni).delay(t).to(.3,{opacity:255}).start()},e.prototype.showUIWaitMask=function(){this.uiWaitMask&&(this.uiWaitMask.active=!0)},e.prototype.hideUIWaitMask=function(){this.uiWaitMask&&(this.uiWaitMask.active=!1)},e.prototype.showToast=function(t){if(null!=t&&null!=t){if(!this._tipComponnet){var e=cc.instantiate(this.tipsNode).getComponent(c.default);e.node.parent=this.getLayer(a.LayerType.Tip),e.node.name="_tip_",this._tipComponnet=e}this._tipComponnet.showTips(t)}},Object.defineProperty(e.prototype,"winSize",{get:function(){return this._winSize},enumerable:!1,configurable:!0}),e.prototype.close=function(t,e){var o=this;void 0===e&&(e=!0),cc.log("close ui <"+a.UIType[t]+">");var n,i=this.UIStack.length,r={uiType:t,playAnim:e};if(t>a.UIType.$Start&&t<a.UIType.$End){if(i<1||this.isOpening||this.isClosing)return cc.log("<"+a.UIType[t]+"> can not be close in this period of time"),void this.UICloseQueue.push(r);if(this.isUIOpen(t)){for(var s=this.UIStack.length-1;s>=0;s--){var c=this.UIStack[s];if(c.uiType===t){n=c,this.UIStack.splice(s,1);break}}if(void 0!==n){this.isClosing=!0;var u=n.uiType,f=n.uiView;if(n.isClose=!0,n.preventNode&&(n.preventNode.destroy(),n.preventNode=null),null!=f){var _=this.UIStack[i-2];this.updateUI();var y=function(){_&&_.uiView&&o.isTopUI(_.uiType)?(_.uiView.node.active=!0,_.uiView.onTop(u,f.onClose())):f.onClose(),o.uiCloseDelegate&&o.uiCloseDelegate(u),a.UIDataInfo.getUIData(t).cache?(o.UICache[u]=f,f.node.removeFromParent(),cc.log("uiView removeFromParent "+n.uiType)):(f.node.destroy(),p.resLoader.releaseAsset(f.__prefab__),cc.log("uiView destroy <"+a.UIType[n.uiType]+">")),o.isClosing=!1,o.autoExecNextUI();var e=o.windowRes.get(t);e&&(e.decRef(),o.windowRes.del(t)),h.EVENT.emit(l.EventId.ON_UI_CLOSE,t)},g=f.node.getComponent(d.default);e&&g&&f.node.active?(f.isPlayOpenAni=!0,this.uiWaitMask.active=!0,g.play().wrapMode==cc.WrapMode.Loop&&cc.error("UI close animation should be a loop animation!","%s"),g.once(cc.Animation.EventType.FINISHED,function(){o.uiWaitMask.active=!1,y()},this)):y()}else this.isClosing=!1}}else cc.log("<"+a.UIType[t]+"> not has open")}else cc.error("unknown ui type to close!","%s")},e.prototype.getOpenUICount=function(){return this.UIStack.length},e.prototype.replace=function(t,e){this.close(this.UIStack[this.UIStack.length-1].uiType),this.open(t,e)},e.prototype.getUIIndex=function(t){for(var e=0;e<this.UIStack.length;e++)if(t==this.UIStack[e].uiType)return e;return-1},e.prototype.preventTouch=function(t){var e=cc.instantiate(this.uiBack);return this.getLayer(a.LayerType.Pop).addChild(e),e.name="preventTouch",e.setContentSize(this.winSize),e.on(cc.Node.EventType.TOUCH_START,function(){},e),e.setSiblingIndex(t),e},e.prototype.autoExecNextUI=function(){if(this.UIOpenQueue.length>0){var t=this.UIOpenQueue[0];return this.UIOpenQueue.splice(0,1),void this.open(t.uiType,t.uiArgs)}this.UICloseQueue.length>0&&(t=this.UICloseQueue[0],this.UICloseQueue.splice(0,1),this.close(t.uiType,t.playAnim))},e.prototype.updateUI=function(){for(var t=0,e=this.UIStack.length-1;e>=0;--e){var o=this.UIStack[e].uiView.showType;if(this.UIStack[e].uiView.node.active=!0,s.UIShowTypes.UIFullScreen==o)break;if(s.UIShowTypes.UISingle==o){for(var n=0;n<this.BackGroundUI;++n)this.UIStack[n]&&(this.UIStack[n].uiView.node.active=!0);t=this.BackGroundUI;break}}for(var i=t;i<e;++i)this.UIStack[i].uiView.node.active=!1},e.prototype.getOrCreateUI=function(t,e,n,i){var r=this.UICache[t];if(r)n(r);else{var c=a.UIDataInfo.getUIData(t);if(!c||!c.fullPath)return cc.log("getOrCreateUI "+t+" faile, prefab conf not found!"),void n(null);var l=c.fullPath,u=c.uiBundle;this.loadBundleRes(t,u,l,cc.Prefab,e,function(e,a){if(e){cc.log("getOrCreateUI loadRes "+t+" faile, path: "+l),n(null);try{cc.error(e)}catch(_){}}else{var c=cc.instantiate(a);if(null==c)return cc.log("getOrCreateUI instantiate "+t+" faile, path: "+l),n(null),void p.resLoader.releaseAsset(a);if(null==(r=c.getComponent(s.default)))return cc.log("getOrCreateUI getComponent "+t+" faile, path: "+l),c.destroy(),n(null),void p.resLoader.releaseAsset(a);var u=o.inst.getCanvasSize();r.node.width=u.width,r.node.height=u.height,r.__prefab__=a,a.addRef(),r.init(i,t),n(r)}})}},e.prototype.loadBundleRes=function(t,e,o,n,i,r){var a=this,s=cc.assetManager.getBundle(e);s?s.load(o,n,i,function(e,o){!e&&a.isValid&&(o.addRef(),a.windowRes.set(t,o)),r&&r(e,o)}):r&&r(null,null)},e.prototype.preLoadBundleRes=function(t,e,o,n){var i=cc.assetManager.getBundle(t);i?i.preload(e,o,function(t,e){n&&n(t,e)}):n&&n(null,null)},e.prototype.getCanvasSize=function(){return new cc.Size(this.node.width,this.node.height)},e.prototype.onUIOpen=function(t,e,o,n){var i=this;if(null!=e){if(o.uiView=e,e.node.active=!0,e.node.setSiblingIndex(o.zOrder||this.UIStack.length),o.preventNode&&(o.preventNode.opacity=e.maskOpacity,o.preventNode.setSiblingIndex(o.zOrder||this.UIStack.length),this.add2Layer(e.showLayer,o.preventNode)),e.quickClose){var r=e.node.getChildByName("background");r||((r=new cc.Node).name="background",r.setParent(e.node),r.setContentSize(this.winSize),r.setSiblingIndex(0)),r.targetOff(cc.Node.EventType.TOUCH_START),r.on(cc.Node.EventType.TOUCH_END,function(){cc.log("touch close <"+a.UIType[t]+">"),i.close(t)},r)}this.add2Layer(e.showLayer,e.node),this.updateUI();var s=0;this.UIStack.length>1&&(s=this.UIStack[this.UIStack.length-2].uiType),this.uiOpenBeforeDelegate&&this.uiOpenBeforeDelegate(t,s),e.onOpen(s,n);var c=function(){e.isPlayOpenAni=!1,e.onOpenAniOver(),i.uiOpenDelegate&&i.uiOpenDelegate(t,s),h.EVENT.emit(l.EventId.ON_UI_OPEN,t)},p=e.node.getComponent(u.default);p?(e.isPlayOpenAni=!0,this.uiWaitMask.active=!0,p.play().wrapMode==cc.WrapMode.Loop&&cc.error("UI open animation should not be a loop animation!"),p.once(cc.Animation.EventType.FINISHED,function(){i.uiWaitMask.active=!1,c()},this)):c()}},e.prototype.getOpenQueueCount=function(){return this.UIOpenQueue.length},r([g(cc.Node)],e.prototype,"guiLayer",void 0),r([g(cc.Node)],e.prototype,"popLayer",void 0),r([g(cc.Node)],e.prototype,"tipLayer",void 0),r([g(cc.Node)],e.prototype,"topLayer",void 0),r([g(cc.Node)],e.prototype,"uiWaitAni",void 0),r([g(cc.Node)],e.prototype,"uiWaitMask",void 0),r([g(cc.Prefab)],e.prototype,"tipsNode",void 0),r([g(cc.Prefab)],e.prototype,"uiBack",void 0),o=r([y],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../Event/EventMgr":"EventMgr","../Res/ResLoader":"ResLoader","../Sys/TeMap":"TeMap","../UIBase":"UIBase","./CommonToast":"CommonToast","./UICloseAnimation":"UICloseAnimation","./UIOpenAnimation":"UIOpenAnimation"}],UIOpenAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"2f4fe0wTRVJ/6kG1ktMX+6i","UIOpenAnimation");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),r([s],e)}(cc.Animation));o.default=c,cc._RF.pop()},{}],UserModel:[function(t,e,o){"use strict";cc._RF.push(e,"e501c+jJ31An6gtHlv8+VQu","UserModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.UserModel=void 0;var n=t("../Controller/TableMgr"),i=t("../Define/Define"),r=t("../Framework/Storage/LocalStorageMgr"),a=t("../Framework/VM"),s=function(){function t(){this.storeOpenStage=0,this.talentOpenStage=0,this.rideOpenStage=0,this.godWeaponOpenStage=0,this.godPetOpenStage=0,this.godSkinOpenStage=0,this.godBackOpenStage=0,this.godWeaponsRewardShowStage=0,this.godWeaponsRewardOpenStage=0,this.godWeaponsRewardMoney=0,this.xiuLianOpenStage=0,this.storeReviewReward=10,this.realNameReward=10,this.quanDouYao=0,this.huanYiPi=0,this._isRealNameReward=0,this._curStage=0,this._selectStage=0,this._background=0,this._money=0,this._rMoney=0,this._g1Money=0,this._g2Money=0,this._g3Money=0,this._fu=0,this._switchNum=0,this._talent=Object.create(null),this._stageBoxGet=Object.create(null),this._stageBoxSkill=Object.create(null),i.Config.debug?(this.storeOpenStage=0,this.talentOpenStage=0,this.rideOpenStage=0,this.godWeaponOpenStage=0,this.godPetOpenStage=0,this.godSkinOpenStage=0,this.godBackOpenStage=0,this.godWeaponsRewardShowStage=0,this.godWeaponsRewardOpenStage=0,this.godWeaponsRewardMoney=5,this.xiuLianOpenStage=0,this.quanDouYao=0,this.huanYiPi=0):(this.storeOpenStage=Number(n.TABLE.getGlobal("StoreOpenStage")),this.talentOpenStage=Number(n.TABLE.getGlobal("TalentOpenStage")),this.rideOpenStage=Number(n.TABLE.getGlobal("RideOpenStage")),this.godWeaponOpenStage=Number(n.TABLE.getGlobal("GodWeaponOpenStage")),this.godPetOpenStage=Number(n.TABLE.getGlobal("GodPetOpenStage")),this.godSkinOpenStage=Number(n.TABLE.getGlobal("GodSkinOpenStage")),this.godBackOpenStage=Number(n.TABLE.getGlobal("GodBackOpenStage")),this.godWeaponsRewardShowStage=Number(n.TABLE.getGlobal("GodWeaponsRewardShowStage")),this.godWeaponsRewardOpenStage=Number(n.TABLE.getGlobal("GodWeaponsRewardOpenStage")),this.godWeaponsRewardMoney=Number(n.TABLE.getGlobal("GodWeaponsRewardMoney")),this.realNameReward=Number(n.TABLE.getGlobal("RealNameReward")),this.storeReviewReward=Number(n.TABLE.getGlobal("StoreReviewReward")),this.xiuLianOpenStage=Number(n.TABLE.getGlobal("XiuLianOpenStage")),this.quanDouYao=Number(n.TABLE.getGlobal("QuanDouYao")),this.huanYiPi=Number(n.TABLE.getGlobal("HuanYiPi"))),this._isRealNameReward=Number(r.LocalStorageMgr.getItem("isRealNameReward")),this._curStage=Number(r.LocalStorageMgr.getItem("curStage")||1),this._money=Number(r.LocalStorageMgr.getItem("money")),this._rMoney=Number(r.LocalStorageMgr.getItem("rMoney")),this._g1Money=Number(r.LocalStorageMgr.getItem("g1Money")),this._g2Money=Number(r.LocalStorageMgr.getItem("g2Money")),this._g3Money=Number(r.LocalStorageMgr.getItem("g3Money")),this._fu=Number(r.LocalStorageMgr.getItem("fu")),this._background=Number(r.LocalStorageMgr.getItem("background")),this._switchNum=Number(r.LocalStorageMgr.getItem("switchNum"));var t={talent:r.LocalStorageMgr.getItem("talent",!0),stageBoxGet:r.LocalStorageMgr.getItem("stageBoxGet",!0),stageBoxSkill:r.LocalStorageMgr.getItem("stageBoxSkill",!0)};t.talent&&(r.LocalStorageMgr.removeItem("talent",!0),r.LocalStorageMgr.setItem("talent",t.talent)),t.stageBoxGet&&(r.LocalStorageMgr.removeItem("stageBoxGet",!0),r.LocalStorageMgr.setItem("stageBoxGet",t.stageBoxGet)),t.stageBoxSkill&&(r.LocalStorageMgr.removeItem("stageBoxSkill",!0),r.LocalStorageMgr.setItem("stageBoxSkill",t.stageBoxSkill)),this._talent=JSON.parse(r.LocalStorageMgr.getItem("talent")||"{}"),this._stageBoxGet=JSON.parse(r.LocalStorageMgr.getItem("stageBoxGet")||"{}"),this._stageBoxSkill=JSON.parse(r.LocalStorageMgr.getItem("stageBoxSkill")||"{}"),"object"!=typeof this._stageBoxGet&&(this._stageBoxGet=Object.create(null)),"object"!=typeof this._stageBoxSkill&&(this._stageBoxSkill=Object.create(null)),a.VM.add(this,"UserModel")}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRealNameReward",{get:function(){return this._isRealNameReward},set:function(t){this._isRealNameReward=t,r.LocalStorageMgr.setItem("isRealNameReward",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStage",{get:function(){return this._curStage},set:function(t){this._curStage=t,r.LocalStorageMgr.setItem("curStage",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectStage",{get:function(){return this._selectStage},set:function(t){this._selectStage=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(t){this._background=t,r.LocalStorageMgr.setItem("background",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"money",{get:function(){return this._money},set:function(t){this._money=t,r.LocalStorageMgr.setItem("money",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rMoney",{get:function(){return this._rMoney},set:function(t){this._rMoney=t,r.LocalStorageMgr.setItem("rMoney",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g1Money",{get:function(){return this._g1Money},set:function(t){this._g1Money=t,r.LocalStorageMgr.setItem("g1Money",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g2Money",{get:function(){return this._g2Money},set:function(t){this._g2Money=t,r.LocalStorageMgr.setItem("g2Money",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g3Money",{get:function(){return this._g3Money},set:function(t){this._g3Money=t,r.LocalStorageMgr.setItem("g3Money",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fu",{get:function(){return this._fu},set:function(t){this._fu=t,r.LocalStorageMgr.setItem("fu",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"switchNum",{get:function(){return this._switchNum},set:function(t){this._switchNum=t,r.LocalStorageMgr.setItem("switchNum",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"talent",{get:function(){return this._talent},set:function(t){this._talent=t,r.LocalStorageMgr.setItem("talent",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stageBoxGet",{get:function(){return this._stageBoxGet},set:function(t){this._stageBoxGet=t,r.LocalStorageMgr.setItem("stageBoxGet",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stageBoxSkill",{get:function(){return this._stageBoxSkill},set:function(t){this._stageBoxSkill=t,r.LocalStorageMgr.setItem("stageBoxSkill",""+JSON.stringify(t))},enumerable:!1,configurable:!0}),t.prototype.canTalentBuy=function(){if(t.inst.curStage<=this.talentOpenStage)return!1;var e=this.getTalentCount(),o=n.TABLE.getTable("talentLevelUpMoney");if(!(e>Object.keys(o).length)){var i=n.TABLE.getTableInfo("talentLevelUpMoney","num",e).money||cc.macro.REPEAT_FOREVER;return!(t.inst.money<i)}},t.prototype.getTalentCount=function(){for(var t=0,e=0,o=Object.values(this._talent);e<o.length;e++)t+=o[e];return t},t.prototype.getTalentMoney=function(){var t=n.TABLE.getTableInfo("talentLevelUpMoney","num",this.getTalentCount()),e=0;return t&&(e=t.money),e},t._inst=null,t}();o.UserModel=s,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../Framework/VM":"VM"}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"6917a72WWFM9ZEwVneeYPE1","Utils"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Define/UIDefs"),i=function(){function t(){}return t.verifyNode=function(t){return null!=t&&t.isValid},t.verifyComponent=function(t){return null!=t&&!!t.isValid&&!!t.node&&!!t.node.isValid},t.isComponentLive=function(t){return!!(t&&t.node&&t.node.isValid&&t.isValid)},t.getUrlParams=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(e);return null!=o?decodeURIComponent(o[2]):null},t.containsPointPolygon=function(t,e,o){for(var n=t,i=t.length,r=i-2,a=!1,s=0;s<i;s+=2){var c=n[s+1],l=n[r+1];if(c<o&&l>=o||l<o&&c>=o){var p=n[s];p+(o-c)/(l-c)*(n[r]-p)<e&&(a=!a)}r=s}return a},t.getBoundingBoxAMPolygon=function(t,e,o){var n,i=e.findSlot(o);if(i){var r=i.getAttachment();if(r&&r instanceof sp.spine.BoundingBoxAttachment){var a=r;n=sp.spine.Utils.newFloatArray(a.worldVerticesLength),a.computeWorldVertices(i,0,a.worldVerticesLength,n,0,2);for(var s=n.length,c=0;c<s;c+=2){var l=t.convertToWorldSpaceAR(new cc.Vec2(n[c],n[c+1]));n[c]=l.x,n[c+1]=l.y}}}return n},t.stopSpineAtFrame=function(t,e,o){if(t&&e&&t.findAnimation(e)){t.paused=!1;var n=t.setAnimation(0,e,!1);n&&(t.timeScale=0,n.trackTime=o)}},t.deepCopy=function(t){for(var e=Object.create(null),o=0,n=Object.keys(t);o<n.length;o++){var i=n[o];e[i]="object"==typeof t[i]?this.deepCopy(t[i]):t[i]}return e},t.arrDeepCopy=function(t){var e=[];for(var o in t)e[o]=t[o];return e},t.formatDate=function(t,e){var o=new Date(t),n={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),"S+":Math.floor(o.getMilliseconds()/10)};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e},t.formatTime=function(t,e){var o=new Date(t),n={"h+":Math.floor(o.getTime()/36e5),"m+":o.getUTCMinutes(),"s+":o.getUTCSeconds(),S:o.getUTCMilliseconds()};for(var i in n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e},t.getFormatTime=function(t){if(t>0)return(t=((new Date).getTime()-t)/1e3)<0?"\u521a\u521a":t>=0&&t<60?Math.floor(t)+"\u79d2\u524d":t<3600?Math.floor(t/60)+"\u5206\u949f\u524d":t<86400?Math.floor(t/60/60)+"\u5c0f\u65f6\u524d":t<31536e3?Math.floor(t/60/60/24)+"\u5929\u524d":Math.floor(t/60/60/24/365)+"\u5e74\u524d"},t.getFormatTimeCur=function(t){if(t>0)return(t=((new Date).getTime()-t)/1e3)<3600?"\u521a\u521a":t<86400?Math.floor(t/60/60)+"\u5c0f\u65f6\u524d":t<31536e3?Math.floor(t/60/60/24)+"\u5929\u524d":Math.floor(t/60/60/24/365)+"\u5e74\u524d"},t.getCurTimeDays=function(t){var e=new Date(t);return 365*(e.getFullYear()-2020)+12*e.getMonth()+e.getDate()},t.getTimedifference=function(t,e){return this.getCurTimeDays(t)-this.getCurTimeDays(e)},t.overAddArr=function(t){if(!t||t.length<=0)return[];for(var e=[],o=0;o<t.length;o++)e[o]=0==o?t[o]:e[o-1]+t[o];return e},t.getRandomIndex=function(t,e){var o=0;if(t<=e[0])return 0;if(t>=e[e.length-1])return e.length-1;for(var n=0;n<e.length;n++)if(t<=e[n])o=n;else{if(t>e[n]&&t<=e[n+1]){o=n+1;break}if(t>e[n]&&t<=e[n+1]){o=n+1;break}}return o},t.getRandToArray=function(t){return t[Math.floor(Math.random()*t.length)]},t.getRandWeightIndex=function(t){var e=(t=this.overAddArr(t))[t.length-1],o=Math.random()*e;return this.getRandomIndex(o,t)},t.getRanInter=function(t,e){var o=t+Math.random()*(e-t);return Math.floor(o)},t.RandomSome=function(t,e){var o=this.fisherYatesShuffle(t.concat());return o.length>e&&(o.length=e),o},t.fisherYatesShuffle=function(t){for(var e=t.length;e;){var o=Math.floor(Math.random()*e--),n=t[e];t[e]=t[o],t[o]=n}return t},t.formatCNY=function(t,e){var o,n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"}],i="";for(o=n.length-1;o>0&&!(t>=n[o].value);o--);return(i=t>=1e9?"999.9M":(t/n[o].value).toFixed(e).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[o].symbol).length>5&&(i=i.slice(0,5)+n[o].symbol),i},t.initServerTime=function(t){this._initServerTime=t,this._initLocalTime=Date.now()},t.getServerTime=function(){return this._initServerTime+(Date.now()-this._initLocalTime)},t.clone=function(t){var e;if("object"==typeof t)if(null===t)e=null;else if(t instanceof Array){e=[];for(var o=0,n=t.length;o<n;o++)e.push(this.clone(t[o]))}else for(var i in e=Object.create(null),t)e[i]=this.clone(t[i]);else e=t;return e},t.getViewType=function(t){for(var e=n.UIType.$Start+1;e<n.UIType.$End;++e)if(n.UIType[e]==t)return e},t.createMatrix=function(t,e,o){void 0===o&&(o=0);for(var n=new Array,i=0;i<t;++i){n[i]=new Array;for(var r=0;r<e;++r)n[i][r]=o}return n},t.map2Obj=function(t){var e=Object.create(null);return t.forEach(function(t,o){e[o]=t}),e},t.obj2map=function(t){for(var e=new Map,o=0,n=Object.keys(t);o<n.length;o++){var i=n[o];e.set(i,t[i])}return e},t.arab2char=function(t){var e=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],o=["","\u5341","\u767e","\u5343","\u4e07"],n=function(t){for(var n=t.toString().split("").reverse(),i="",r=0;r<n.length;r++)i=(0==r&&0==n[r]?"":r>0&&0==n[r]&&0==n[r-1]?"":e[n[r]]+(0==n[r]?o[0]:o[r]))+i;return i},i=Math.floor(t/1e4),r=t%1e4,a="";return r.toString().length<4&&(a="0"+r),i?n(i)+"\u4e07"+n(a):n(t)},t.NumToChinaBigNum=function(t){return t<0||t>10?"":["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"][t]},t.updatePolygonCollider=function(t,e){var o=t.points,n=t.world.points;n.length=o.length;for(var i=cc.v2(),r=1e6,a=1e6,s=-1e6,c=-1e6,l=0,p=o.length;l<p;l++){n[l]||(n[l]=cc.v2()),i.x=o[l].x+e.x,i.y=o[l].y+e.y;var u=i.x,d=i.y;n[l].x=u,n[l].y=d,u>s&&(s=u),u<r&&(r=u),d>c&&(c=d),d<a&&(a=d)}},t.limitWorldNum=function(t,e){return void 0===e&&(e=6),t.length>e&&(t=t.slice(0,e),t+="..."),t},t.getRanByEnum=function(t){var e=Object.keys(t);return t[e[this.getRanInter(0,e.length)]]},t.getIndexByEnum=function(t,e){for(var o=Object.keys(t),n=0;n<o.length;n++)if(t[o[n]]==e)return n;return-1},t.getColor=function(){return cc.Color.RED},t.getColorHex=function(){return""},t.rollNum=function(t,e,o,n,i){void 0===i&&(i=.5);var r={num:t,_num:t};return Object.defineProperty(r,"num",{get:function(){return r._num},set:function(t){r._num=t,o&&o(r._num)}}),cc.tween(r).to(i,{num:e}).call(n).start()},t._initServerTime=0,t._initLocalTime=0,t}();o.default=i,cc._RF.pop()},{"../../Define/UIDefs":"UIDefs"}],VM:[function(t,e,o){"use strict";function n(t,e,o,n){void 0===n&&(n="");for(var i=e.split("."),r=0;r<i.length;r++){var a=i[r];if(a in t==0){console.error("["+a+"] not find in "+n+"."+e);break}r==i.length-1?t[a]=o:t=t[a]}}function i(t,e,o,n){void 0===n&&(n="");for(var i=e.split("."),r=0;r<i.length;r++){var a=i[r];if(a in t==0)return console.error("["+a+"] not find in "+n+"."+e),o;t=t[a]}return null==t&&(t=o),t}cc._RF.push(e,"51d52KvG4VHyK1TQxqVUljk","VM"),Object.defineProperty(o,"__esModule",{value:!0}),o.VM=void 0;var r=function(){function t(t,e){this._tag=null,this.active=!0,this.emitToRootPath=!1,new p(t,this._callback.bind(this)),this.$data=t,this._tag=e}return t.prototype._callback=function(t,e,o){if(1==this.active){var n="VC:"+this._tag+"."+o.join(".");if(cc.director.emit(n,t,e,[this._tag].concat(o)),this.emitToRootPath&&cc.director.emit("VC:"+this._tag,t,e,o),o.length>=2)for(var i=0;i<o.length-1;i++)o[i]}},t.prototype.setValue=function(t,e){n(this.$data,t,e,this._tag)},t.prototype.getValue=function(t,e){return i(this.$data,t,e,this._tag)},t}(),a=function(){function t(){this._mvs=new Map,this.setObjValue=n,this.getObjValue=i}return t.prototype.add=function(t,e,o){void 0===e&&(e="global"),void 0===o&&(o=!1);var n=new r(t,e),i=this._mvs.get(e);e.includes(".")?console.error("cant write . in tag:",e):i?console.error("already set VM tag:"+e):(n.emitToRootPath=o,this._mvs.set(e,n))},t.prototype.remove=function(t){this._mvs.delete(t)},t.prototype.removeAll=function(){this._mvs.clear()},t.prototype.get=function(t){return this._mvs.get(t)},t.prototype.addValue=function(t,e){var o=(t=t.trim()).split(".");o.length<2&&console.error("Cant find path:"+t);var n=this.get(o[0]);if(n){var i=o.slice(1).join(".");n.setValue(i,n.getValue(i)+e)}else console.error("Cant Set VM:"+o[0])},t.prototype.getValue=function(t,e){var o=(t=t.trim()).split(".");if(o.length<2)console.error("Get Value Cant find path:"+t);else{var n=this.get(o[0]);if(n)return n.getValue(o.slice(1).join("."),e);console.error("Cant Get VM:"+o[0])}},t.prototype.setValue=function(t,e){var o=(t=t.trim()).split(".");if(o.length<2)console.error("Set Value Cant find path:"+t);else{var n=this.get(o[0]);n?n.setValue(o.slice(1).join("."),e):console.error("Cant Set VM:"+o[0])}},t.prototype.bindPath=function(t,e,o,n){""!=(t=t.trim())?"*"!==t.split(".")[0]?cc.director.on("VC:"+t,e,o,n):console.error(t,"\u8def\u5f84\u4e0d\u5408\u6cd5,\u53ef\u80fd\u9519\u8bef\u8986\u76d6\u4e86 VMParent \u7684onLoad \u65b9\u6cd5, \u6216\u8005\u7236\u8282\u70b9\u5e76\u672a\u6302\u8f7d VMParent \u76f8\u5173\u7684\u7ec4\u4ef6\u811a\u672c"):console.error(o.node.name,"\u8282\u70b9\u7ed1\u5b9a\u7684\u8def\u5f84\u4e3a\u7a7a")},t.prototype.unbindPath=function(t,e,o){"*"!==(t=t.trim()).split(".")[0]?cc.director.off("VC:"+t,e,o):console.error(t,"\u8def\u5f84\u4e0d\u5408\u6cd5,\u53ef\u80fd\u9519\u8bef\u8986\u76d6\u4e86 VMParent \u7684onLoad \u65b9\u6cd5, \u6216\u8005\u7236\u8282\u70b9\u5e76\u672a\u6302\u8f7d VMParent \u76f8\u5173\u7684\u7ec4\u4ef6\u811a\u672c")},t.prototype.inactive=function(){this._mvs.forEach(function(t){t.active=!1})},t.prototype.active=function(){this._mvs.forEach(function(t){t.active=!1})},t}(),s=Object.prototype,c={obj:"[object Object]",array:"[object Array]"},l=["push","pop","shift","unshift","sort","reverse","splice"],p=function(){function t(t,e){s.toString.call(t)!==c.obj&&s.toString.call(t)!==c.array&&console.error("\u8bf7\u4f20\u5165\u4e00\u4e2a\u5bf9\u8c61\u6216\u6570\u7ec4"),this._callback=e,this.observe(t)}return t.prototype.observe=function(t,e){var o=this;Object.keys(t).forEach(function(n){var i=o,r=t[n],a=e&&e.slice();a?a.push(n):a=[n],Object.defineProperty(t,n,{get:function(){return r},set:function(t){r!==t&&("[object Object]"===s.toString.call(t)&&i.observe(t,a),r=t,i._callback(t,r,a))}})},this)},t.prototype.overrideArrayProto=function(t,e){var o,n=Array.prototype,i=Object.create(Array.prototype),r=this;l.forEach(function(t){Object.defineProperty(i,t,{value:function(){var i=this.slice();return o=n[t].apply(this,arguments),r.observe(this,e),r._callback(this,i,e),o}})}),t.__proto__=i},t}();o.VM=new a,cc._RF.pop()},{}],VectorUtil:[function(t,e,o){"use strict";cc._RF.push(e,"2bf4fYMdL9EjpnauAnjJp5U","VectorUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.VectorUtil=void 0;var n=function(){function t(){}return t.getAddRay=function(t,e,o){void 0===o&&(o=1);var n=this.getRay(e,o);return{x:t.x+n.x,y:t.y+n.y}},t.getSubRay=function(t,e,o){void 0===o&&(o=1);var n=this.getRay(e,o);return{x:t.x-n.x,y:t.y-n.y}},t.getRay=function(t,e){return void 0===e&&(e=1),{x:Math.cos(t)*e,y:Math.sin(t)*e}},t.segmentsIntersect=function(t,e,o,n){var i=(t.x-o.x)*(e.y-o.y)-(t.y-o.y)*(e.x-o.x),r=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x);if(i*r>=0)return null;var a=(o.x-t.x)*(n.y-t.y)-(o.y-t.y)*(n.x-t.x);if(a*(a+i-r)>=0)return null;var s=a/(r-i),c=s*(e.x-t.x),l=s*(e.y-t.y);return{x:t.x+c,y:t.y+l}},t.angle=function(t,e,o){var n=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2)),i=Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2)),r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));return Math.acos((i*i+n*n-r*r)/(2*i*n))},t.pointLineMirror=function(t,e,o){var n=o.y-e.y,i=e.x-o.x;if(Math.abs(n)<1e-8&&Math.abs(i)<1e-8)return null;var r=o.x*e.y-e.x*o.y,a=n*n+i*i,s=(i*i*t.x-n*i*t.y-n*r)/a,c=(-n*i*t.x+n*n*t.y-i*r)/a;return{x:2*s-t.x,y:2*c-t.y}},t.pointLineVertical=function(t,e,o){var n=o.x-e.x,i=o.y-e.y,r=n*n+i*i,a=((t.x-e.x)*n+(t.y-e.y)*i)/r;return r?a<0?e:a>1?o:cc.v2(e.x+a*n,e.y+a*i):e},t.pointLineDistance=function(t,e,o){return cc.Vec2.distance(t,this.pointLineVertical(t,e,o))},t.checkNear=function(t,e){for(var o=[],n=0;n<e.length;n++){var i=cc.macro.REPEAT_FOREVER;e[n]&&(i=cc.Vec2.distance(t,e[n])),o.push({idx:n,len:i})}return o.length>0?(o.sort(function(t,e){return t.len-e.len}),o[0].idx):null},t.checkFar=function(t,e){for(var o=[],n=0;n<e.length;n++){var i=0;e[n]&&(i=cc.Vec2.distance(t,e[n])),o.push({idx:n,len:i})}return o.length>0?(o.sort(function(t,e){return e.len-t.len}),o[0].idx):null},t.triangleType=function(t,e,o){return t+e>o&&t+o>e&&e+o>t&&t>0&&e>0&&o>0?t*t+e*e==o*o||t*t+o*o==e*e||e*e+o*o==t*t?1:t==e||t==o||e==o?2:t==e&&t==o&&e==o?3:0:-1},t}();o.VectorUtil=n,cc._RF.pop()},{}],WarnBase:[function(t,e,o){"use strict";cc._RF.push(e,"3f5f5tRDbFOF7FJ0IlgeCKQ","WarnBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../Define/EventId"),s=t("../../Framework/Event/EventMgr"),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setWarn=function(t,e){this._info=t,this._callback=e},e.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},e.prototype.pause=function(){this.node.pauseAllActions()},e.prototype.resume=function(){this.node.resumeAllActions()},r([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr"}],WeaponBase:[function(t,e,o){"use strict";cc._RF.push(e,"ef48908T0BJyb1mCuTHrRqp","WeaponBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.WeaponInfo=o.WeaponBase=void 0;var a=t("../../Controller/LayerMgr"),s=t("../../Controller/TableMgr"),c=t("../../Framework/Res/ResKeeperAddition"),l=t("../../Model/GameModel"),p=t("../../Model/WeaponModel"),u=t("../../Model/XiuLianModel"),d=t("./Bullet/BulletBase"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfBullet=[],e.pfSeniorBullet=[],e.id="",e._weaponInfo=null,e._game=l.GameModel.inst,e}return i(e,t),e.prototype.onLoad=function(){for(var t in this._waterLevel=10,this.pfBullet)this.addItemPool(Number(t),this.pfBullet[t]);for(var t in this.pfSeniorBullet)this.addItemPool(3+Number(t),this.pfSeniorBullet[t]);this._weaponInfo=p.WeaponModel.inst.weaponInfos[this.id],null!=this._weaponInfo?this._weaponInfo.getAttrFromCfg():cc.warn("\u6ca1\u6709\u6280\u80fd\u6570\u636e id:",this.id)},e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=this._weaponInfo.getSenior()?3+e:e,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(e)),this.setParam(t,e);var r=i.getComponent(d.BulletBase);r.fire(t,function(t){o.onFireAfter(t,e,n,r.node)})}},e.prototype.onFireAfter=function(t,e,o,n){this.put(o,n),this.fire(t,++e)},e.prototype.setParam=function(t,e){t.type=e,t.attrs=this._weaponInfo.weaponAttrs[e],t.weapon=this._weaponInfo},e.prototype.updateAttrs=function(){this._weaponInfo.updateAttrs()},e.prototype.getBulletParent=function(t){switch(void 0===t&&(t=0),t){case 0:case 1:case 2:return a.LayerMgr.inst.BulletLayer}},r([_([cc.Prefab])],e.prototype,"pfBullet",void 0),r([_([cc.Prefab])],e.prototype,"pfSeniorBullet",void 0),r([_],e.prototype,"id",void 0),r([f],e)}(c.default);o.WeaponBase=y;var g=function(){function t(t){this.id="",this.levels=[],this.levels_extra=[],this.maxLevel=0,this.skillInfo=[],this.weaponAttrs=[],this.id=t}return t.prototype.getAttrFromCfg=function(){this.skillInfo=[s.TABLE.getTable("sk_"+this.id),s.TABLE.getTable("sk_"+this.id+"_zi"),s.TABLE.getTable("sk_"+this.id+"_zi2")],this.skillInfo[0]&&(this.weaponAttrs[0]=new p.WeaponAttrs),this.skillInfo[1]&&(this.weaponAttrs[1]=new p.WeaponAttrs),this.skillInfo[2]&&(this.weaponAttrs[2]=new p.WeaponAttrs),this.maxLevel=this.skillInfo[0].length},t.prototype.updateAttrs=function(){for(var t in 0==this.skillInfo.length&&this.getAttrFromCfg(),this.weaponAttrs){var e=this.skillInfo[t],o=this.weaponAttrs[t];for(var n in o)o[n]=0;for(var i=0,r=this.levels;i<r.length;i++){var a=e[r[i]-1];for(var s in a)o[s]+=Number(a[s])}}if(this.levels_extra.length>0)for(var t in this.weaponAttrs){e=this.skillInfo[t],o=this.weaponAttrs[t];for(var c=0,l=this.levels_extra;c<l.length;c++)for(var p in a=e[l[c]-1])o[p]+=Number(a[p])}},t.prototype.levelUp=function(t){this.levels.push(t),this.updateAttrs()},t.prototype.extraLevelUp=function(t){this.levels_extra.push(t),this.updateAttrs()},t.prototype.getBulletCount=function(t){void 0===t&&(t=0);var e=this.weaponAttrs[t].bulletCount,o=p.WeaponModel.inst.magicAttrs.a_bulletcount_v||0;o>0&&(e+=o);var n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_bulletcount_v"]||0;return n>0&&(e+=n),e},t.prototype.getInterval=function(t){void 0===t&&(t=0);var e=this.weaponAttrs[t].interval,o=p.WeaponModel.inst.magicAttrs.s_cd_p||0;return o>0&&(e-=e*o),e<.2&&(e=.2),e},t.prototype.getMoveSpeed=function(t){void 0===t&&(t=0);var e=this.weaponAttrs[t].moveSpeed,o=p.WeaponModel.inst.magicAttrs.a_bspeed_p||0,n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_moveSpeed_p"]||0;return o+n>0&&(e+=(e+n)*o),e},t.prototype.getAoeRange=function(t){void 0===t&&(t=0);var e=this.weaponAttrs[t].aoeRange,o=p.WeaponModel.inst.magicAttrs.a_range_p||0,n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_aoerange_p"]||0;return o+n>0&&(e+=e*(o+n)),e},t.prototype.getDamage=function(t){return void 0===t&&(t=0),this.weaponAttrs[t].damage+u.XiuLianModel.inst.getInfo(this.id).damage*u.XiuLianLevelValue.damage},t.prototype.getCrit=function(){return l.GameModel.inst.player.crit+(p.WeaponModel.inst.magicAttrs.a_crit_p||0)+u.XiuLianModel.inst.getInfo(this.id).critRate*u.XiuLianLevelValue.critRate},t.prototype.getCritDamage=function(){return 2+(p.WeaponModel.inst.magicAttrs.a_critdmg_p||0)},t.prototype.getDuration=function(t){void 0===t&&(t=0);var e=this.weaponAttrs[t].duration,o=p.WeaponModel.inst.magicAttrs.a_time_p||0,n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_duration_p"]||0;return o+n>0&&(e+=e*(o+n)),n>0&&(e+=e*o),e},t.prototype.getAngulaspeed=function(t){void 0===t&&(t=0);var e=this.weaponAttrs[t].angularSpeed,o=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_angulaspeed_p"]||0;return o>0&&(e=1/(1/e*(1+o))),e},t.prototype.getStopTime=function(t){void 0===t&&(t=0);var e=this.weaponAttrs[t].stopTime,o=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_stoptime_v"]||0;return o>0&&(e+=o),e},t.prototype.getHitCount=function(t){void 0===t&&(t=0);var e=this.weaponAttrs[t].hitCount,o=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_hitCount"]||0;return o>0&&(e+=o),e},t.prototype.getSenior=function(){return(p.WeaponModel.inst.magicAttrs["a_"+this.id+"_senior"]||0)>0},t.prototype.getLevel=function(){return this.levels.length+this.levels_extra.length},t.prototype.getLevelInfo=function(){return this.levels},t.prototype.getSkillInfo=function(){return this.skillInfo},t.prototype.canLevelUp=function(){return this.levels.length<this.maxLevel},t}();o.WeaponInfo=g,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Framework/Res/ResKeeperAddition":"ResKeeperAddition","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","../../Model/XiuLianModel":"XiuLianModel","./Bullet/BulletBase":"BulletBase"}],WeaponCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"797e4ZxUUpM8ZjDriBtHPjD","WeaponCtrl");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Controller/GameBase"),s=t("../Controller/TableMgr"),c=t("../Define/Define"),l=t("../Define/EventId"),p=t("../Define/UIDefs"),u=t("../Framework/Event/EventMgr"),d=t("../Framework/UI/UIMgr"),h=t("../Framework/VM"),f=t("../Model/GameModel"),_=t("../Model/GodWeaponModel"),y=t("../Model/StoreModel"),g=t("../Model/UserModel"),m=t("../Model/WeaponModel"),v=t("./Weapon/WeaponBase"),M=cc._decorator,b=M.ccclass,E=(M.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),h.VM.bindPath("WeaponModel._skillPoint",this.updateSkill,this),u.EVENT.on(l.EventId.ON_GAME_LOADED,this.gameLoaded,this),u.EVENT.on(l.EventId.ON_GAME_SKILL_LEVEL_UP,this.onSkillLevelUp,this),u.EVENT.on(l.EventId.ON_GAME_SKILL_LEVEL_UP_EXTRA,this.onSkillLevelUpExtra,this),u.EVENT.on(l.EventId.ON_GAME_DRAW_SKILL_LEVEL_UP,this.onSkillDrawLevelUp,this),u.EVENT.on(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateMagicAttrs,this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),h.VM.unbindPath("WeaponModel._skillPoint",this.updateSkill,this),u.EVENT.off(l.EventId.ON_GAME_LOADED,this.gameLoaded,this),u.EVENT.off(l.EventId.ON_GAME_SKILL_LEVEL_UP,this.onSkillLevelUp,this),u.EVENT.off(l.EventId.ON_GAME_SKILL_LEVEL_UP_EXTRA,this.onSkillLevelUpExtra,this),u.EVENT.off(l.EventId.ON_GAME_DRAW_SKILL_LEVEL_UP,this.onSkillDrawLevelUp,this),u.EVENT.off(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateMagicAttrs,this)},e.prototype.gameLoaded=function(){this.updateMagicAttrs();var t=m.WeaponModel.inst.magicAttrs.a_slevel_v;t>0&&(f.GameModel.inst.level+=t,m.WeaponModel.inst.skillPoint+=t)},e.prototype.updateSkill=function(t){if(t>0){if(d.default.inst.isUIOpen(p.UIType.SelectWeapon))return;if(!m.WeaponModel.inst.canWeaponLevelUp())return void(m.WeaponModel.inst.skillPoint=0);u.EVENT.emit(l.EventId.ON_GAME_PAUSE),d.default.inst.open(p.UIType.SelectWeapon)}},e.prototype.gameStart=function(){var t=m.WeaponModel.inst,e=s.TABLE.getStageSk(),o=e.get(g.UserModel.inst.selectStage);for(var n in null==o&&(o=e.get(e.getLength()-1)),o){var i=o[n].id;t.weaponList[i]=s.TABLE.getTable("sk_"+i)}var r=s.TABLE.getTable("StoreExchange"),a=y.StoreModel.inst.exchange_listed;if(r.forEach(function(e){!a.includes(e.id)||e.type!=c.EXCHANGE_TYPE.Skill_0&&e.type!=c.EXCHANGE_TYPE.Skill_1||(t.weaponList[e.lv]=s.TABLE.getTable("sk_"+e.lv))}),c.Config.debug,t.weapon2List.freezeAll=s.TABLE.getTable("sk_freezeAll"),t.weaponDrawList.draw1=s.TABLE.getTable("sk_draw1"),t.weaponDrawList.draw2=s.TABLE.getTable("sk_draw2"),t.weaponDrawList.draw3=s.TABLE.getTable("sk_draw3"),_.GodWeaponModel.inst.cur)for(var l=0;l<_.GodWeaponModel.inst.curLevel;l++)this.onSkillLevelUp("yunshi",l+1)},e.prototype.gameOver=function(){for(m.WeaponModel.inst.clear();this.node.children.length>0;)this.node.children.pop().destroy();this.releaseAutoRes()},e.prototype.onSkillLevelUp=function(t,e,o){var n=this,i=m.WeaponModel.inst.weaponInfos[t],r=m.WeaponModel.inst.weaponCom[t];if(null==r&&null==i){(i=m.WeaponModel.inst.weaponInfos[t]=new v.WeaponInfo(t)).levelUp(e);var a=t+"",s=a.substring(0,1).toUpperCase()+a.substring(1,a.length);this.loadBundleRes("Prefabs","/Game/Weapon/weapon"+s,cc.Prefab,function(e,i){var a=cc.instantiate(i);a.setParent(n.node),(r=m.WeaponModel.inst.weaponCom[t]=a.getComponent(v.WeaponBase)).updateAttrs(),o&&o()}),u.EVENT.emit(l.EventId.ON_GAME_SKILL_REFUSE,t)}else i.levelUp(e),r&&r.updateAttrs(),u.EVENT.emit(l.EventId.ON_GAME_SKILL_REFUSE,t),o&&o()},e.prototype.onSkillLevelUpExtra=function(t,e,o){var n=m.WeaponModel.inst.weaponInfos[t],i=m.WeaponModel.inst.weaponCom[t];null!=i&&null!=n?(n.extraLevelUp(e),i&&i.updateAttrs(),u.EVENT.emit(l.EventId.ON_GAME_SKILL_REFUSE,t),o&&o()):console.warn("\u4e0d\u80fd\u989d\u5916\u5347\u7ea7 \u6ca1\u6709\u5b66\u4e60\u7684\u6280\u80fd:",t)},e.prototype.onSkill2LevelUp=function(t,e){var o=this,n=m.WeaponModel.inst.weaponInfos[t],i=m.WeaponModel.inst.weapon2Com[t];if(null==i&&null==n){(n=m.WeaponModel.inst.weaponInfos[t]=new v.WeaponInfo(t)).levelUp(e);var r=t+"",a=r.substring(0,1).toUpperCase()+r.substring(1,r.length);this.loadBundleRes("Prefabs","/Game/Weapon/weapon"+a,cc.Prefab,function(e,n){var r=cc.instantiate(n);r.setParent(o.node),(i=m.WeaponModel.inst.weapon2Com[t]=r.getComponent(v.WeaponBase)).updateAttrs()})}else n.levelUp(e),i&&i.updateAttrs()},e.prototype.onSkillDrawLevelUp=function(t,e){var o=this,n=m.WeaponModel.inst.weaponInfos[t],i=m.WeaponModel.inst.weaponDrawCom[t];if(null==i&&null==n){(n=m.WeaponModel.inst.weaponInfos[t]=new v.WeaponInfo(t)).levelUp(e);var r=t+"",a=r.substring(0,1).toUpperCase()+r.substring(1,r.length);this.loadBundleRes("Prefabs","/Game/Weapon/weapon"+a,cc.Prefab,function(e,n){var r=cc.instantiate(n);r.setParent(o.node),(i=m.WeaponModel.inst.weaponDrawCom[t]=r.getComponent(v.WeaponBase)).updateAttrs(),u.EVENT.emit(l.EventId.ON_GAME_DRAW_SKILL_REFUSE,t)})}else n.levelUp(e),i&&i.updateAttrs(),u.EVENT.emit(l.EventId.ON_GAME_DRAW_SKILL_REFUSE,t)},e.prototype.onClearSkill=function(t){var e=m.WeaponModel.inst,o=e.weaponCom[t];null!=o&&(delete e.weaponInfos[t],delete e.weaponCom[t],o.node.destroy())},e.prototype.onClearSkill2=function(t){var e=m.WeaponModel.inst,o=e.weapon2Com[t];null!=o&&(delete e.weaponInfos[t],delete e.weapon2Com[t],o.node.destroy())},e.prototype.onClearSkillDraw=function(t){var e=m.WeaponModel.inst,o=e.weaponDrawCom[t];null!=o&&(delete e.weaponInfos[t],delete e.weaponDrawCom[t],o.node.destroy())},e.prototype.updateMagicAttrs=function(){var t,e=m.WeaponModel.inst;e.magicAttrs=Object.create(null);for(var o=0,n=f.GameModel.inst.fightList;o<n.length;o++){var i=n[o];if(null!=i)for(var r in i.magic){var a=i.magic[r],c=i.value[r];e.addMagic(a,c)}}var l=function(t){var o=g.UserModel.inst.talent[t],n=s.TABLE.getTable("talent").find(function(e){return e.id==t&&e.lv==o});if(null==n)return"continue";e.addMagic(n.magic,n.value)};for(var p in g.UserModel.inst.talent)l(p);for(var p in g.UserModel.inst.stageBoxSkill)c=g.UserModel.inst.stageBoxSkill[p],e.addMagic(p,c);if(e.magicAttrs.sk_freezeAll_lv>0){if(1==(null===(t=m.WeaponModel.inst.weaponInfos.freezeAll)||void 0===t?void 0:t.getLevel()))return;this.onSkill2LevelUp("freezeAll",1)}else this.onClearSkill2("freezeAll");for(var u=0,d=Object.values(m.WeaponModel.inst.weaponCom);u<d.length;u++)d[u].updateAttrs()},r([b],e)}(a.GameBase));o.default=E,cc._RF.pop()},{"../Controller/GameBase":"GameBase","../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/UI/UIMgr":"UIMgr","../Framework/VM":"VM","../Model/GameModel":"GameModel","../Model/GodWeaponModel":"GodWeaponModel","../Model/StoreModel":"StoreModel","../Model/UserModel":"UserModel","../Model/WeaponModel":"WeaponModel","./Weapon/WeaponBase":"WeaponBase"}],WeaponDrawBase:[function(t,e,o){"use strict";cc._RF.push(e,"d3b1f0jyMxFQZY6ANV0TaX2","WeaponDrawBase");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.WeaponDrawBase=void 0;var a=t("../../Model/WeaponModel"),s=t("./Bullet/BulletDrawBase"),c=t("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._activeTime=0,e._tempDrawPointsAll=null,e._tempDrawColorsAll=null,e._drawSkillUI=null,e}return i(e,t),e.prototype.fire=function(t,e){var o=this;void 0===e&&(e=0);var n=this._weaponInfo.getSenior(),i=this.get(n?3+e:e);if(null!=i){var r=i.getComponent(s.BulletDrawBase);null!=r&&(i.setParent(this.getBulletParent(e)),t.type=e,t.attrs=this._weaponInfo.weaponAttrs[e],t.weapon=this._weaponInfo,r.setDraw(this._tempDrawPointsAll,this._tempDrawColorsAll),r.fire(t,function(t){o.put(e,r.node),o.fire(t,++e)}))}},e.prototype.updateAttrs=function(){this._activeTime=45,this._tempDrawPointsAll=a.WeaponModel.inst.tempDrawPointsAll.concat(),this._tempDrawColorsAll=a.WeaponModel.inst.tempDrawColorsAll.concat(),this._weaponInfo.levels=[1],this._weaponInfo.updateAttrs()},e.prototype.update=function(t){this._game.isPause||this._activeTime>0&&(this._activeTime-=t)},e.prototype.getDrawInfo=function(){return{points:this._tempDrawPointsAll,colors:this._tempDrawColorsAll,dur:this._activeTime}},r([p],e)}(c.WeaponBase));o.WeaponDrawBase=u,cc._RF.pop()},{"../../Model/WeaponModel":"WeaponModel","./Bullet/BulletDrawBase":"BulletDrawBase","./WeaponBase":"WeaponBase"}],WeaponModel:[function(t,e,o){"use strict";cc._RF.push(e,"079d9GbtIpMcI6qSog1EU8L","WeaponModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.WeaponModel=o.WeaponAttrs=void 0;var n=t("../Controller/TableMgr"),i=t("../Framework/Utils/Utils"),r=t("../Framework/VM");o.WeaponAttrs=function(){this.damage=1,this.aoeRange=1,this.bulletCount=1,this.duration=1,this.moveSpeed=1,this.angularSpeed=1,this.interval=1,this.hitCount=0,this.distance=0,this.effectInterval=1,this.stopTime=0,this.repelSpeed=0,this.upPos=0,this.rPos=0,this.upSpeed=0,this.rSpeed=0,this.upCount=0,this.rCount=0,this.hp=0,this.delay=0,this.warnInterval=0,this.warnRange=100,this.warnWidth=100,this.desc=""};var a=function(){function t(){this.weaponWeight=2,this._weaponList=Object.create(null),this._weapon2List=Object.create(null),this._weaponDrawList=Object.create(null),this._weaponCom=Object.create(null),this._weapon2Com=Object.create(null),this._weaponDrawCom=Object.create(null),this._weaponInfos=Object.create(null),this._skillPoint=0,this._tempDrawPointsAll=null,this._tempDrawColorsAll=null,this._magicAttrs=Object.create(null),this.weaponWeight=Number(n.TABLE.getGlobal("WeaponWeight"))||2,r.VM.add(this,"WeaponModel")}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skillPoint",{get:function(){return this._skillPoint},set:function(t){this._skillPoint=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tempDrawPointsAll",{get:function(){return this._tempDrawPointsAll},set:function(t){this._tempDrawPointsAll=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tempDrawColorsAll",{get:function(){return this._tempDrawColorsAll},set:function(t){this._tempDrawColorsAll=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"magicAttrs",{get:function(){return this._magicAttrs},set:function(t){this._magicAttrs=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weaponCom",{get:function(){return this._weaponCom},set:function(t){this._weaponCom=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weapon2Com",{get:function(){return this._weapon2Com},set:function(t){this._weapon2Com=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weaponDrawCom",{get:function(){return this._weaponDrawCom},set:function(t){this._weaponDrawCom=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weaponList",{get:function(){return this._weaponList},set:function(t){this._weaponList=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weapon2List",{get:function(){return this._weapon2List},set:function(t){this._weapon2List=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weaponDrawList",{get:function(){return this._weaponDrawList},set:function(t){this._weaponDrawList=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weaponInfos",{get:function(){return this._weaponInfos},set:function(t){this._weaponInfos=t},enumerable:!1,configurable:!0}),t.prototype.getRandom=function(t){var e=[],o=[];for(var n in this._weaponList){var r=this._weaponList[n],a=this._weaponInfos[n];if(null==a)e.push(1),o.push({id:n,info:r[0]});else{var s=r.length,c=a.getLevelInfo();if(s<=c.length)continue;for(var l=this.weaponWeight/(s-c.length),p=0;p<r.length;p++){var u=r[p];c.indexOf(u.lv)<0&&(e.push(l),o.push({id:n,info:u}))}}}for(var d=[];d.length<t&&o.length>0;){var h=i.default.getRandWeightIndex(e),f=o.splice(h,1)[0];e.splice(h,1),d.push(f)}return d},t.prototype.getRandomExtra=function(t){var e=[];for(var o in this._weaponList){var n=this._weaponList[o];if(null!=this._weaponInfos[o])for(var i=1;i<n.length;i++){var r=n[i];e.push({id:o,info:r})}}for(var a=[];a.length<t&&e.length>0;){var s=cc.math.randomRangeInt(0,e.length),c=e.splice(s,1)[0];a.push(c)}return a},t.prototype.getRandomDraw=function(t){var e=Object.keys(this._weaponDrawList),o=e.indexOf(t);return o>=0&&e.splice(o,1),i.default.RandomSome(e,1)[0]},t.prototype.canWeaponLevelUp=function(){for(var t=0,e=Object.keys(this._weaponList);t<e.length;t++){var o=e[t],n=this._weaponInfos[o];if(null==n)return!0;if(n.canLevelUp())return!0}return!1},t.prototype.addMagic=function(t,e){null==this._magicAttrs[t]&&(this._magicAttrs[t]=0),this._magicAttrs[t]+=e},t.prototype.clear=function(){this._weaponList=Object.create(null),this._weapon2List=Object.create(null),this._weaponDrawList=Object.create(null),this._weaponCom=Object.create(null),this._weapon2Com=Object.create(null),this._weaponDrawCom=Object.create(null),this._weaponInfos=Object.create(null),this._skillPoint=0,this._tempDrawPointsAll=null,this._tempDrawColorsAll=null,this._magicAttrs=Object.create(null)},t._inst=null,t}();o.WeaponModel=a,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Framework/Utils/Utils":"Utils","../Framework/VM":"VM"}],XiuLianAD:[function(t,e,o){"use strict";cc._RF.push(e,"3d72e0NR+dD7I9hr5yVSPJL","XiuLianAD");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Controller/TimeMgr"),c=t("../../../Define/EventId"),l=t("../../../Framework/Audio/AudioMgr"),p=t("../../../Framework/Event/EventMgr"),u=t("../../../Framework/UI/UIMgr"),d=t("../../../Framework/UIBase"),h=t("../../../Model/XiuLianModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtCount=null,e.btnAd=null,e}return i(e,t),e.prototype.onOpen=function(){var t=s.default.inst.now();s.default.inst.isSameDay(s.default.inst.now(),h.XiuLianModel.inst.curDay)||(h.XiuLianModel.inst.curDay=t,h.XiuLianModel.inst.curDayCount=0),this.txtCount.string="\u4eca\u65e5\u5269\u4f59\u6b21\u6570\uff1a"+(h.XiuLianModel.inst.curDayCountMax-h.XiuLianModel.inst.curDayCount)},e.prototype.onClickConfirm=function(){var t=this;h.XiuLianModel.inst.curDayCount>=h.XiuLianModel.inst.curDayCountMax?u.default.inst.showToast("\u4eca\u65e5\u7684\u5feb\u901f\u4fee\u70bc\u6b21\u6570\u5df2\u7528\u5b8c"):a.default.inst.showAd("\u5feb\u901f\u4fee\u70bc",function(){l.AudioMgr.inst.playEffectByName("achievement"),h.XiuLianModel.inst.money+=Math.floor(h.XiuLianModel.inst.adTime/6e4*(h.XiuLianModel.inst.speed/60)),h.XiuLianModel.inst.curDayCount++,t.txtCount.string="\u4eca\u65e5\u5269\u4f59\u6b21\u6570\uff1a"+(h.XiuLianModel.inst.curDayCountMax-h.XiuLianModel.inst.curDayCount);var e=t.btnAd.node.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_XIULIAN,e,"RMoney"),t.close()})},e.prototype.onClickCancel=function(){this.close()},r([y(cc.Label)],e.prototype,"txtCount",void 0),r([y(cc.Button)],e.prototype,"btnAd",void 0),r([_],e)}(d.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TimeMgr":"TimeMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLianItem:[function(t,e,o){"use strict";cc._RF.push(e,"0bc45EUpKFDnptZo+0flLX9","XiuLianItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/UIDefs"),s=t("../../../Framework/Res/ResKeeper"),c=t("../../../Framework/UI/UIMgr"),l=t("../../../Model/XiuLianModel"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.txtNum=null,e.nodeNum=null,e.frame1=null,e.frame2=null,e.skillId="",e}return i(e,t),e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},e.prototype.onClick=function(){c.default.inst.open(a.UIType.XiuLianTip,this.skillId)},e.prototype.updateLevel=function(){var t=l.XiuLianModel.inst.getLevel(this.skillId);t>0?(this.txtNum.string=""+t,this.nodeNum.active=!0):(this.txtNum.string="",this.nodeNum.active=!1),this.frame1.active=t<2*l.XiuLianModel.inst.levelMax,this.frame2.active=t>=2*l.XiuLianModel.inst.levelMax},r([d(cc.Sprite)],e.prototype,"icon",void 0),r([d(cc.Label)],e.prototype,"txtNum",void 0),r([d(cc.Node)],e.prototype,"nodeNum",void 0),r([d(cc.Node)],e.prototype,"frame1",void 0),r([d(cc.Node)],e.prototype,"frame2",void 0),r([d],e.prototype,"skillId",void 0),r([u],e)}(s.default);o.default=h,cc._RF.pop()},{"../../../Define/UIDefs":"UIDefs","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/UI/UIMgr":"UIMgr","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLianModel:[function(t,e,o){"use strict";cc._RF.push(e,"67e06df6DtI8IlqHuOkNEXK","XiuLianModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.XiuLianModel=o.XiuLianLevelValue=void 0;var n=t("../Controller/TableMgr"),i=t("../Controller/TimeMgr"),r=t("../Framework/Storage/LocalStorageMgr");o.XiuLianLevelValue={damage:.02,critRate:.005},Object.freeze(o.XiuLianLevelValue);var a=function(){function t(){this._money=0,this._starTime=0,this._levels=Object.create(null),this._levelMax=10,this._speed=200,this._curDayCount=0,this._curDayCountMax=3,this._curDay=0,this._adTime=72e5,this._offlineTime=144e5,this._money=Number(r.LocalStorageMgr.getItem("XiuLian_money"))||Number(n.TABLE.getGlobal("XiuLianMoney")),this._starTime=Number(r.LocalStorageMgr.getItem("XiuLian_starTime")),this._levels=JSON.parse(r.LocalStorageMgr.getItem("XiuLian_levels")||"{}"),this._curDay=Number(r.LocalStorageMgr.getItem("XiuLian_curDay")),this._curDayCount=Number(r.LocalStorageMgr.getItem("XiuLian_curDayCount")),this._speed=Number(n.TABLE.getGlobal("XiuLianSpeed")),this._curDayCountMax=Number(n.TABLE.getGlobal("XiuLiancurDayCountMax")),this._adTime=Number(n.TABLE.getGlobal("XiuLianAdTime")),this._offlineTime=Number(n.TABLE.getGlobal("XiuLianOfflineTime")),this._money<0&&(this._money=0)}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"money",{get:function(){return this._money},set:function(t){this._money=t,r.LocalStorageMgr.setItem("XiuLian_money",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"starTime",{get:function(){return this._starTime},set:function(t){this._starTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},set:function(t){this._levels=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levelMax",{get:function(){return this._levelMax},set:function(t){this._levelMax=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curDayCount",{get:function(){return this._curDayCount},set:function(t){this._curDayCount=t,r.LocalStorageMgr.setItem("XiuLian_curDayCount",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curDay",{get:function(){return this._curDay},set:function(t){this._curDay=t,r.LocalStorageMgr.setItem("XiuLian_curDay",""+t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curDayCountMax",{get:function(){return this._curDayCountMax},set:function(t){this._curDayCountMax=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adTime",{get:function(){return this._adTime},set:function(t){this._adTime=t},enumerable:!1,configurable:!0}),t.prototype.getCount=function(){var t=0;for(var e in this._levels)for(var o=this._levels[e],n=0,i=Object.keys(o);n<i.length;n++)t+=o[i[n]];return t},t.prototype.getMoney=function(){var t=n.TABLE.getTableInfo("XiuLianLevelUpMoney","num",this.getCount()),e=0;return t&&(e=t.money),e},t.prototype.forecastMoney=function(){var t=i.default.inst.now();if(0==this._starTime||null==this._starTime)return this._starTime=t,0;var e=t-this._starTime;e>this._offlineTime&&(e=this._offlineTime);var o=Math.floor(e/6e4);return 0==o?0:Math.floor(o*this._speed/60)},t.prototype.saveMoney=function(){var t=i.default.inst.now();if(0==this._starTime||null==this._starTime)return this._starTime=t,0;var e=t-this._starTime;e>this._offlineTime&&(e=this._offlineTime);var o=Math.floor(e/6e4);if(0==o)return 0;var n=6e4*o;return e==this._offlineTime?this._starTime=t:this._starTime+=n,this._money+=Math.floor(o*(this._speed/60)),r.LocalStorageMgr.setItem("XiuLian_money",""+this._money),r.LocalStorageMgr.setItem("XiuLian_starTime",""+this._starTime),n},t.prototype.saveLevel=function(){r.LocalStorageMgr.setItem("XiuLian_levels",""+JSON.stringify(this._levels))},t.prototype.getLevel=function(t){var e=this._levels[t];if(null==e)return 0;for(var o=0,n=0,i=Object.keys(e);n<i.length;n++)o+=e[i[n]];return o},t.prototype.getInfo=function(t){var e=this._levels[t];return null==e&&(e=this._levels[t]={damage:0,critRate:0}),e},t._inst=null,t}();o.XiuLianModel=a,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Controller/TimeMgr":"TimeMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr"}],XiuLianResult:[function(t,e,o){"use strict";cc._RF.push(e,"3bc5fqIJINJdJJdPS70y931","XiuLianResult");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Controller/AdMgr"),s=t("../../../Define/EventId"),c=t("../../../Framework/Audio/AudioMgr"),l=t("../../../Framework/Event/EventMgr"),p=t("../../../Framework/UI/UIFacade"),u=t("../../../Framework/UIBase"),d=t("../../../Framework/Utils/Utils"),h=t("../../../Model/XiuLianModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtMsg=null,e.btnAd=null,e._money=0,e}return i(e,t),e.prototype.onOpen=function(t,e){var o=e.money,n=e.time;this._money=o,this.txtMsg.string=n>36e5?"\u5df2\u4fee\u70bc"+d.default.formatTime(n,"h\u5c0f\u65f6mm\u5206\u949f")+"\uff0c\u5171\n\u83b7\u5f97\u5185\u529b: "+o:n>6e5?"\u5df2\u4fee\u70bc"+d.default.formatTime(n,"mm\u5206\u949f")+"\uff0c\u5171\n\u83b7\u5f97\u5185\u529b: "+o:"\u5df2\u4fee\u70bc"+d.default.formatTime(n,"m\u5206\u949f")+"\uff0c\u5171\n\u83b7\u5f97\u5185\u529b: "+o},e.prototype.onClick=function(){c.AudioMgr.inst.playEffectByName("achievement");var t=this.btnAd.node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_XIULIAN,t,"RMoney"),this.close()},e.prototype.onClickAd=function(){var t=this;a.default.inst.showAd("\u4fee\u70bc\u989d\u5916\u9886\u53d6",function(){c.AudioMgr.inst.playEffectByName("achievement"),h.XiuLianModel.inst.money+=2*t._money,p.UIFacade.showToast("\u83b7\u5f97\u989d\u5916\u5185\u529b\uff1a"+2*t._money);var e=t.btnAd.node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_XIULIAN,e,"RMoney"),t.close()})},r([y(cc.Label)],e.prototype,"txtMsg",void 0),r([y(cc.Button)],e.prototype,"btnAd",void 0),r([_],e)}(u.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLianTip:[function(t,e,o){"use strict";cc._RF.push(e,"3bb83tX32BElJp84bCUZu9Z","XiuLianTip");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/Define"),s=t("../../../Framework/UIBase"),c=t("../../../Model/XiuLianModel"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.txtName=null,e.txtDamage=null,e.txtCritRate=null,e}return i(e,t),e.prototype.onOpen=function(t,e){var o=this,n=e,i=c.XiuLianModel.inst.getLevel(n),r=c.XiuLianModel.inst.getInfo(n);this.txtName.string=a.SKILL_NAME[n]+" | "+i+"\u7ea7",this.loadBundleRes("Textures",a.SKILL_ICON_URL[n],cc.SpriteFrame,function(t,e){o.icon.spriteFrame=e});var s=r.damage*c.XiuLianLevelValue.damage*100,l=r.critRate*c.XiuLianLevelValue.critRate*100;s=Math.floor(10*s)/10,l=Math.floor(10*l)/10,this.txtDamage.string="\u6280\u80fd\u4f24\u5bb3: +"+s+"%",this.txtCritRate.string="\u6280\u80fd\u66b4\u51fb\u7387: +"+l+"%"},r([u(cc.Sprite)],e.prototype,"icon",void 0),r([u(cc.Label)],e.prototype,"txtName",void 0),r([u(cc.Label)],e.prototype,"txtDamage",void 0),r([u(cc.Label)],e.prototype,"txtCritRate",void 0),r([p],e)}(s.default);o.default=d,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/UIBase":"UIBase","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLian:[function(t,e,o){"use strict";cc._RF.push(e,"5d5eaU4AJtMBYS90AW+l/1w","XiuLian");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Define/Define"),s=t("../../../Define/EventId"),c=t("../../../Define/UIDefs"),l=t("../../../Framework/Audio/AudioMgr"),p=t("../../../Framework/Event/EventMgr"),u=t("../../../Framework/UI/UIFacade"),d=t("../../../Framework/UI/UIMgr"),h=t("../../../Framework/UIBase"),f=t("../../../Framework/Utils/Utils"),_=t("../../../Model/XiuLianModel"),y=t("./XiuLianItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtMoney=null,e.txtMoneyLevelUp=null,e.txtSpeed=null,e.layout=null,e.nodeSelect=null,e.tipAni=null,e._items=[],e._aniPlay=!1,e._money=0,e._dt=0,e}return i(e,t),e.prototype.onOpen=function(){l.AudioMgr.inst.playEffectByName("ui_open"),this._items=this.layout.getComponentsInChildren(y.default),this._money=_.XiuLianModel.inst.getMoney(),this.txtMoneyLevelUp.string=""+this._money,this.txtMoney.string=""+_.XiuLianModel.inst.money,this.txtSpeed.string=_.XiuLianModel.inst.speed+"/\u65f6",this.nodeSelect.active=!1,this.tipAni.node.active=!1,this.updateItem();var t=_.XiuLianModel.inst.saveMoney(),e=t/6e4;if(e>=5){var o=Math.floor(e*(_.XiuLianModel.inst.speed/60));d.default.inst.open(c.UIType.XiuLianResult,{money:o,time:t})}},e.prototype.onEnable=function(){p.EVENT.on(s.EventId.ON_UI_MAIN_FLY_XIULIAN,this.onIconFly,this)},e.prototype.onDisable=function(){p.EVENT.off(s.EventId.ON_UI_MAIN_FLY_XIULIAN,this.onIconFly,this)},e.prototype.onClose=function(){l.AudioMgr.inst.playEffectByName("ui_close")},e.prototype.onClickLevelUp=function(){var t=this;if(!this._aniPlay)if(_.XiuLianModel.inst.money<this._money)u.UIFacade.showToast("\u5185\u529b\u4e0d\u8db3");else{var e=[];if(this._items.forEach(function(t){var o=t.skillId;_.XiuLianModel.inst.getLevel(o)<2*_.XiuLianModel.inst.levelMax&&e.push(o)}),0!=e.length){var o=f.default.getRandToArray(e),n=_.XiuLianModel.inst.getInfo(o),i=Object.keys(n).filter(function(t){return n[t]<_.XiuLianModel.inst.levelMax});n[f.default.getRandToArray(i)]+=1,this._money=_.XiuLianModel.inst.getMoney(),this.txtMoneyLevelUp.string=""+this._money,_.XiuLianModel.inst.saveLevel(),_.XiuLianModel.inst.money-=this._money,this._aniPlay=!0;var r=5.1,a=.5,s=0,c=this._items.length,p=Math.floor(Math.random()*c),d=function(e){if(r-=e,(a-=e/10)<.15&&(a=.15),!((s+=e)<a)){if(r<=0){var n=t._items.find(function(t){return t.skillId==o}).node;return t.nodeSelect.setParent(n),t.nodeSelect.setSiblingIndex(2),t.updateItem(),t.unschedule(d),t._aniPlay=!1,void l.AudioMgr.inst.playEffectByName("talentLevelUp")}s-=a;for(var i=p;i==p;)p=Math.floor(Math.random()*c);var u=t._items[p].node;t.nodeSelect.setParent(u),t.nodeSelect.setSiblingIndex(2),l.AudioMgr.inst.playEffectByName("talentSelect")}};this.schedule(d);var h=this._items[p].node;this.nodeSelect.active=!0,this.nodeSelect.setParent(h),this.nodeSelect.setSiblingIndex(2)}else u.UIFacade.showToast("\u6280\u80fd\u5df2\u7ecf\u5168\u90e8\u4fee\u70bc\u6ee1\u4e86")}},e.prototype.onClickAD=function(){this._aniPlay||d.default.inst.open(c.UIType.XiuLianAD)},e.prototype.onClickTipOpen=function(){this._aniPlay||(this.tipAni.node.active=!0,this.tipAni.play("TipOpen"))},e.prototype.onClickTipClose=function(){var t=this;this.tipAni.play("TipClose"),this.tipAni.once(cc.Animation.EventType.FINISHED,function(){t.tipAni.node.active=!1})},e.prototype.onClickMoney=function(){a.Config.debug&&(_.XiuLianModel.inst.money+=1e3,this.txtMoney.string=""+_.XiuLianModel.inst.money)},e.prototype.onIconFly=function(t){p.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,t,"XiuLian",null,{target:this.txtMoney.node})},e.prototype.updateItem=function(){this._items.forEach(function(t){return t.updateLevel()})},e.prototype.update=function(t){this._dt+=t,this._dt>1&&(this._dt-=1,_.XiuLianModel.inst.saveMoney(),this.txtMoney.string=""+_.XiuLianModel.inst.money)},r([v(cc.Label)],e.prototype,"txtMoney",void 0),r([v(cc.Label)],e.prototype,"txtMoneyLevelUp",void 0),r([v(cc.Label)],e.prototype,"txtSpeed",void 0),r([v(cc.Layout)],e.prototype,"layout",void 0),r([v(cc.Node)],e.prototype,"nodeSelect",void 0),r([v(cc.Animation)],e.prototype,"tipAni",void 0),r([m],e)}(h.default);o.default=M,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Model/XiuLianModel":"XiuLianModel","./XiuLianItem":"XiuLianItem"}],"arc-progress-bar":[function(t,e,o){"use strict";cc._RF.push(e,"98f67lDkWtEJrCRAU80eGTD","arc-progress-bar");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.requireComponent,p=a.executeInEditMode,u=a.help,d=a.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.graphics=null,e._radius=100,e._clockwise=!0,e._startAngle=90,e._range=180,e._lineWidth=20,e._progress=.4,e._lineCap=cc.Graphics.LineCap.ROUND,e._backgroundColor=new cc.Color(255,255,255,255),e._progressColor=new cc.Color(50,101,246,255),e.curStartAngle=0,e.curStartRadians=0,e.curEndRadians=0,e.curTween=null,e.curTweenRes=null,e}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwise",{get:function(){return this._clockwise},set:function(t){this._clockwise=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(t){this._range=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},set:function(t){this.updateProgress(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineCap",{get:function(){return this._lineCap},set:function(t){this._lineCap=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"progressColor",{get:function(){return this._progressColor},set:function(t){this._progressColor=t,this.updateProperties()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.init()},e.prototype.resetInEditor=function(){this.init()},e.prototype.init=function(){this.graphics||(this.graphics=this.getComponent(cc.Graphics)),this.updateProperties()},e.prototype.show=function(){var t=this;return new Promise(function(e){var o=t.graphics.node;o.opacity=0,o.active=!0,cc.tween(o).to(.1,{opacity:255}).call(e).start()})},e.prototype.hide=function(){var t=this;return new Promise(function(e){var o=t.graphics.node;cc.tween(o).to(.1,{opacity:0}).set({active:!1}).call(e).start()})},e.prototype.updateProperties=function(){var t=this.graphics;t.lineWidth=this._lineWidth,t.lineCap=this._lineCap,this.curStartAngle=this._startAngle+90,this.curStartRadians=this.angleToRadians(this.curStartAngle);var e=this.curStartAngle+(this._clockwise?-this._range:this._range);this.curEndRadians=this.angleToRadians(e),this.updateProgress(this._progress)},e.prototype.updateProgress=function(t){t<0?t=0:t>1&&(t=1),this._progress=t;var e=this.graphics;e.clear(),e.strokeColor=this._backgroundColor,e.arc(0,0,this._radius,this.curStartRadians,this.curEndRadians,!this._clockwise),e.stroke();var o=this._clockwise?-this._range:this._range,n=this.curStartAngle+o*t,i=this.angleToRadians(n);e.strokeColor=this._progressColor,e.arc(0,0,this._radius,this.curStartRadians,i,!this._clockwise),e.stroke()},e.prototype.to=function(t,e){var o=this;return new Promise(function(n){o.stop(),o.curTweenRes=n,o.curTween=cc.tween(o).to(t,{progress:e}).call(function(){o.curTween=null,o.curTweenRes=null}).call(n).start()})},e.prototype.stop=function(){this.curTween&&(this.curTween.stop(),this.curTween=null),this.curTweenRes&&(this.curTweenRes(),this.curTweenRes=null)},e.prototype.angleToRadians=function(t){return Math.PI/180*t},r([c(cc.Graphics)],e.prototype,"graphics",void 0),r([c()],e.prototype,"_radius",void 0),r([c({tooltip:!1})],e.prototype,"radius",null),r([c()],e.prototype,"_clockwise",void 0),r([c({tooltip:!1})],e.prototype,"clockwise",null),r([c()],e.prototype,"_startAngle",void 0),r([c({tooltip:!1})],e.prototype,"startAngle",null),r([c()],e.prototype,"_range",void 0),r([c({tooltip:!1})],e.prototype,"range",null),r([c()],e.prototype,"_lineWidth",void 0),r([c({tooltip:!1})],e.prototype,"lineWidth",null),r([c()],e.prototype,"_progress",void 0),r([c({range:[0,1],step:.01,tooltip:!1})],e.prototype,"progress",null),r([c()],e.prototype,"_lineCap",void 0),r([c({type:cc.Graphics.LineCap,tooltip:!1})],e.prototype,"lineCap",null),r([c()],e.prototype,"_backgroundColor",void 0),r([c({type:cc.Color,tooltip:!1})],e.prototype,"backgroundColor",null),r([c()],e.prototype,"_progressColor",void 0),r([c({type:cc.Color,tooltip:!1})],e.prototype,"progressColor",null),r([s,l(cc.Graphics),p,u("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/charts/ArcProgressBar.ts"),d("eazax/\u56fe\u8868\u7ec4\u4ef6/ArcProgressBar")],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],"bounce-move-tween":[function(t,e,o){"use strict";cc._RF.push(e,"ff128oR02pKzpYDl4aOGAV2","bounce-move-tween");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frequency=4,e.decay=2,e.tween=null,e}return i(e,t),e.prototype.start=function(){this.play(cc.v2(0,0),.5)},e.prototype.play=function(t,e){var o=this;this.stop();var n=this.node.getPosition(),i=t.sub(n).normalize(),r=cc.Vec2.distance(n,t)/e;this.tween=cc.tween(this.node),cc.tween(this.node).to(e,{x:t.x,y:t.y},{easing:"quadIn"}).to(.75,{position:{value:cc.v3(t.x,t.y),progress:function(t,e,n,a){var s=i.mul(-o.getDifference(r,a));return cc.v3(s.x,s.y)}}}).start()},e.prototype.stop=function(){this.tween&&this.tween.stop()},e.prototype.getDifference=function(t,e){var o=this.frequency*Math.PI*2;return t*(Math.sin(e*o)/Math.exp(this.decay*e)/o)},r([c({tooltip:!1})],e.prototype,"frequency",void 0),r([c({tooltip:!1})],e.prototype,"decay",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"bounce-scale-tween":[function(t,e,o){"use strict";cc._RF.push(e,"81c047x0qdLEYaHsA5oawzT","bounce-scale-tween");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frequency=4,e.decay=2,e.targetScale=1,e.totalTime=1,e.interval=1,e.playOnLoad=!1,e.originalScale=1,e.tween=null,e}return i(e,t),e.prototype.start=function(){this.originalScale=this.node.scale,this.playOnLoad&&this.play(this.targetScale)},e.prototype.play=function(t,e){var o=this,n=null!=e&&e>0?e:1,i=.25*this.totalTime,r=.75*this.totalTime,a=(t-this.originalScale)/i;this.tween=cc.tween(this.node).repeat(n,cc.tween().set({scale:this.originalScale}).to(i,{scale:t}).to(r,{scale:{value:t,progress:function(t,e,n,i){return e+o.getDifference(a,i)}}}).delay(this.interval)).start()},e.prototype.stop=function(){this.tween&&this.tween.stop(),this.node.setScale(this.originalScale)},e.prototype.getDifference=function(t,e){var o=this.frequency*Math.PI*2;return t*(Math.sin(e*o)/Math.exp(this.decay*e)/o)},r([c({tooltip:!1})],e.prototype,"frequency",void 0),r([c({tooltip:!1})],e.prototype,"decay",void 0),r([c({tooltip:!1})],e.prototype,"targetScale",void 0),r([c({tooltip:!1})],e.prototype,"totalTime",void 0),r([c({tooltip:!1})],e.prototype,"interval",void 0),r([c({tooltip:!1})],e.prototype,"playOnLoad",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],counter:[function(t,e,o){"use strict";cc._RF.push(e,"b2e0dj2+KhPP67BPYxKmgUG","counter");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.requireComponent,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=1,e.keepInteger=!0,e.label=null,e._value=0,e.tween=null,e.lastTarget=0,e}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.keepInteger&&(t=Math.floor(t)),this._value=t,this.label.string=t.toString()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.label=this.getComponent(cc.Label),this.value=0},e.prototype.setValue=function(t){this.value=t},e.prototype.setTime=function(t){this.time=t},e.prototype.to=function(t,e,o){var n=this;return void 0===e&&(e=null),new Promise(function(i){n.tween&&(n.tween.stop(),n.tween=null),null!==e&&(n.time=e),n.lastTarget=t,n.tween=cc.tween(n).to(n.time,{value:t}).call(function(){o&&o(),n.tween=null,i()}).start()})},e.prototype.by=function(t,e,o){var n=this;return void 0===e&&(e=null),new Promise(function(i){n.tween&&(n.tween.stop(),n.tween=null,n.value=n.lastTarget),null!==e&&(n.time=e),n.lastTarget=n.value+t,n.tween=cc.tween(n).to(n.time,{value:n.lastTarget}).call(function(){o&&o(),n.tween=null,i()}).start()})},r([c({tooltip:!1})],e.prototype,"time",void 0),r([c({tooltip:!1})],e.prototype,"keepInteger",void 0),r([s,l(cc.Label)],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],draggable:[function(t,e,o){"use strict";cc._RF.push(e,"605aaJtYBJGqr4X10gAKTwA","draggable");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property,p=s.help,u=s.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragThreshold=1,e.touchStartPos=null,e.dragOffset=null,e.isDragging=!1,e}return i(e,t),Object.defineProperty(e,"EventType",{get:function(){return a},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.registerEvent()},e.prototype.onDestroy=function(){this.unregisterEvent()},e.prototype.registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.unregisterEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){this.touchStartPos=t.getLocation();var e=this.node.getParent().convertToNodeSpaceAR(t.getLocation());this.dragOffset=e.sub(this.node.getPosition())},e.prototype.onTouchMove=function(t){if(this.dragOffset){var e=t.getLocation(),o=this.node.getParent().convertToNodeSpaceAR(e);if(!this.isDragging&&0!==this.dragThreshold){if(cc.Vec2.distance(this.touchStartPos,e)<this.dragThreshold)return;this.dragOffset=o.sub(this.node.getPosition())}this.node.setPosition(o.sub(this.dragOffset)),this.isDragging?this.onDragMove():(this.isDragging=!0,this.onDragStart())}},e.prototype.onTouchCancel=function(t){this.onTouchEnd(t)},e.prototype.onTouchEnd=function(){this.dragOffset&&(this.touchStartPos=null,this.dragOffset=null,this.isDragging&&(this.isDragging=!1,this.onDragEnd()))},e.prototype.onDragStart=function(){},e.prototype.onDragMove=function(){},e.prototype.onDragEnd=function(){},r([l({tooltip:!1})],e.prototype,"dragThreshold",void 0),r([c,p("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/interaction/Draggable.ts"),u("eazax/\u4ea4\u4e92\u7ec4\u4ef6/Draggable")],e)}(cc.Component);o.default=d,function(t){t.DRAG_START="drag-start",t.DRAG_MOVE="drag-move",t.DRAG_END="drag-end"}(a||(a={})),cc._RF.pop()},{}],"gradient-color":[function(t,e,o){"use strict";cc._RF.push(e,"d5ac5RcUQVBror1g6/6iahJ","gradient-color");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.requireComponent,p=a.disallowMultiple,u=a.executeInEditMode,d=a.help,h=a.menu,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._colors=[cc.Color.RED,cc.Color.BLUE,cc.Color.RED,cc.Color.BLUE],e}return i(e,t),Object.defineProperty(e.prototype,"colors",{get:function(){return this._colors},set:function(t){t.length>4&&(t.length=4),this._colors=t,this.markForRender()},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){this.replaceFunction()},e.prototype.onDisable=function(){this.restoreFunction()},e.prototype.resetInEditor=function(){this.markForRender()},e.prototype.replaceFunction=function(){var t=this,e=this.getComponent(cc.RenderComponent);if(e){var o=e._assembler;o instanceof cc.Assembler2D&&(o.updateColor=function(){var e=o._renderData.uintVDatas[0];if(e)for(var n=o.floatsPerVert,i=o.colorOffset,r=t.node.color,a=0,s=i,c=e.length;s<c;s+=n)e[s]=(t.colors[a++]||r)._val},this.markForRender())}},e.prototype.restoreFunction=function(){var t=this.getComponent(cc.RenderComponent);if(t){var e=t._assembler;e instanceof cc.Assembler2D&&(e.updateColor=cc.Assembler2D.prototype.updateColor,this.markForRender())}},e.prototype.markForRender=function(){this.node._renderFlag|=cc.RenderFlow.FLAG_COLOR},r([c()],e.prototype,"_colors",void 0),r([c({type:[cc.Color],tooltip:!1})],e.prototype,"colors",null),r([s,l(cc.RenderComponent),p,u,d("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/renderers/GradientColor.ts"),h("eazax/\u6e32\u67d3\u7ec4\u4ef6/GradientColor")],e)}(cc.Component);o.default=f,cc._RF.pop()},{}],i18nLabel:[function(t,e,o){"use strict";cc._RF.push(e,"bdd3f9Ro3BLUZ5panwzcqm4","i18nLabel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nLabel=void 0;var a=t("./i18nMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=s.inspector,u=s.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._i18n_code="",e._i18n_params=[],e}return i(e,t),Object.defineProperty(e.prototype,"i18nCode",{get:function(){return this._i18n_code},set:function(t){this._i18n_code=t,this.setValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"i18nParams",{get:function(){return this._i18n_params},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"params",{set:function(t){this._i18n_params=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){a.i18nMgr._addOrDelLabel(this,!0),this.resetValue()},e.prototype.onDestroy=function(){a.i18nMgr._addOrDelLabel(this,!1)},e.prototype.setString=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this._i18n_code=t,this._i18n_params=e,this.setValue()},e.prototype.setValue=function(){var t=a.i18nMgr.getLabel(this._i18n_code,this._i18n_params);null!=t&&(this.string=t)},e.prototype.resetValue=function(){this.setValue()},r([l({visible:!1})],e.prototype,"_i18n_code",void 0),r([l({type:cc.String})],e.prototype,"i18nCode",null),r([l({visible:!1})],e.prototype,"_i18n_params",void 0),r([l({type:[cc.String]})],e.prototype,"i18nParams",null),r([c,u("i18n:MAIN_MENU.component.renderers/i18nLabel"),p("packages://module/inspectors/i18nLabel.js")],e)}(cc.Label);o.i18nLabel=d,cc._RF.pop()},{"./i18nMgr":"i18nMgr"}],i18nMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0c6cckje/1Ci44bE4J+753g","i18nMgr");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.i18nMgr=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"inst",{get:function(){return this._inst||(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),e.checkInit=function(){this.language||this.setLanguage("zh")},e.setLanguage=function(t){this.language!==t&&(this.language=t,this.reloadLabel(),this.reloadSprite())},e.getLanguage=function(){return this.language},e._addOrDelLabel=function(t,e){if(this.checkInit(),e)this.labelArr.push(t);else{var o=this.labelArr.indexOf(t);-1!==o&&this.labelArr.splice(o,1)}},e.addOrDelSprite=function(t,e){if(e)this.spriteArr.push(t);else{var o=this.spriteArr.indexOf(t);-1!==o&&this.spriteArr.splice(o,1)}},e.getLabel=function(t,e){var o=this.labelData[t];return null==o?null:null==e||0===e.length?o:this.placeholder(o,e)},e.placeholder=function(t,e){for(var o=0;o<e.length;o++){var n=new RegExp("\\{"+o+"\\}+","g");t=t.replace(n,e[o])}return t},e.reloadLabel=function(){var t=this,e="Language/"+this.language;cc.resources.load(e,cc.JsonAsset,function(e,o){e?(console.error(e),t.labelData=Object.create(null)):t.labelData=o.json;for(var n=0,i=t.labelArr;n<i.length;n++)i[n].resetValue()})},e.reloadSprite=function(){for(var t=0,e=this.spriteArr;t<e.length;t++)e[t].resetValue()},e.language="",e.labelArr=[],e.labelData=Object.create(null),e.spriteArr=[],e}(t("../Res/ResKeeper").default);o.i18nMgr=r,cc._RF.pop()},{"../Res/ResKeeper":"ResKeeper"}],i18nSprite:[function(t,e,o){"use strict";cc._RF.push(e,"c5883VlXcdPzoiL5F0hH3os","i18nSprite");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nSprite=void 0;var a=t("./i18nMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=s.inspector,u=s.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._i18n_code="",e}return i(e,t),Object.defineProperty(e.prototype,"i18nCode",{get:function(){return this._i18n_code},set:function(t){this._i18n_code=t,this.resetValue()},enumerable:!1,configurable:!0}),e.prototype.start=function(){a.i18nMgr.addOrDelSprite(this,!0),this.resetValue()},e.prototype.onDestroy=function(){a.i18nMgr.addOrDelSprite(this,!1),this.spriteFrame&&this.spriteFrame.decRef()},e.prototype.resetValue=function(){var t=this;this._getSprite(this._i18n_code,function(e){t.spriteFrame=e})},e.prototype._getSprite=function(t){var e=this,o=a.i18nMgr.getLanguage();if(null!=o){var n="i18n/sprite/"+o+"/"+t;Editor?cc.resources.load(n,cc.SpriteFrame,function(t,o){t?cc.error("i18n load :"+n+" fail!"):cc.isValid(e.node)&&(e.spriteFrame=o)}):cc.resources.load(n,cc.SpriteFrame,function(t,o){if(t)cc.error("i18n load :"+n+" fail!");else if(cc.isValid(e.node)){var i=e.spriteFrame;e.spriteFrame=null,e.spriteFrame=o,e.spriteFrame.addRef(),i&&i.decRef()}})}},r([l({visible:!1})],e.prototype,"_i18n_code",void 0),r([l({type:cc.String})],e.prototype,"i18nCode",null),r([c,u("i18n:MAIN_MENU.component.renderers/i18nSprite"),p("packages://module/inspectors/i18nSprite.js")],e)}(cc.Sprite);o.i18nSprite=d,cc._RF.pop()},{"./i18nMgr":"i18nMgr"}],index:[function(t,e,o){"use strict";cc._RF.push(e,"476a4wP95FKi5Q98Mw32cQO","index");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NewYear=void 0;var r=t("../../Define/Define"),a=t("../../Define/EventId"),s=t("../../Define/UIDefs"),c=t("../../Framework/Audio/AudioMgr"),l=t("../../Framework/Event/EventMgr"),p=t("../../Framework/UI/UIFacade"),u=t("../../Framework/UI/UIMgr"),d=t("../../Framework/Utils/Singleton"),h=t("../../Framework/i18n/i18nMgr"),f=t("../../Game/MonsterCtrl"),_=t("../../Game/Weapon/WeaponBase"),y=t("../../Game/WeaponCtrl"),g=t("../../Model/StoreModel"),m=t("../../Model/WeaponModel"),v=t("../../View/UI/GodMenu/GodMenuView"),M=t("../../View/UI/GodMenu/GodMenuViewItem"),b=t("./Script/Model/NewYearModel"),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){var t=s.UIDataInfo.getUIData(s.UIType.UIMain);t.uiBundle="NewYear",t.uiPath="/UIPrefab/UIMain",r.BundleNames.push("NewYear"),y.default.prototype.onSkillLevelUp=function(t,e,o){var n=this,i=m.WeaponModel.inst.weaponInfos[t],r=m.WeaponModel.inst.weaponCom[t];if(null==r&&null==i){(i=m.WeaponModel.inst.weaponInfos[t]=new _.WeaponInfo(t)).levelUp(e);for(var s=t+"",c=s.substring(0,1).toUpperCase()+s.substring(1,s.length),p=b.NewYearModel.inst,u=g.StoreModel.inst,d="Prefabs",h="/Game/Weapon/weapon"+c,f=0,y=p.table;f<y.length;f++){var v=y[f];if(v.lv==t&&u.exchange_listed.includes(v.id)){d="NewYear",h="/Game/Weapon/weapon"+c;break}}this.loadBundleRes(d,h,cc.Prefab,function(e,i){var a=cc.instantiate(i);a.setParent(n.node),(r=m.WeaponModel.inst.weaponCom[t]=a.getComponent(_.WeaponBase)).updateAttrs(),o&&o()}),l.EVENT.emit(a.EventId.ON_GAME_SKILL_REFUSE,t)}else i.levelUp(e),r&&r.updateAttrs(),l.EVENT.emit(a.EventId.ON_GAME_SKILL_REFUSE,t),o&&o()};var e=[14,46,59,60,61,62];f.default.prototype.loadMonster=function(t,o){var n=this,i=""+t.type+t.mid;if(null==this._loadList[i]){this._loadList[i]=[this.generateMonster.bind(this,t,o)];var r="Prefabs",a=this._stageMonsters[i];e.includes(t.mid)&&(r="NewYear"),this.loadBundleRes(r,a,cc.Prefab,function(t,e){n.addItemPool(i,e),n._execDelay=n._execDelay.concat(n._loadList[i]),delete n._loadList[i]})}else this._loadList[i].push(this.generateMonster.bind(this,t,o))},v.default.prototype.onListRender=function(t,e){var o=this,n=t.getComponent(M.default),i=this._infos[e],r=e+1;if(null==i)return n.btnEquip.node.active=!1,n.btnUnEquip.node.active=!1,n.txtState.string="\uff1f\uff1f\uff1f",void(n.txtName.string=r+"\u9636 \uff1f\uff1f\uff1f");if(i.lv!=e+1){var d=this._model.unlock.includes(i.lv);r=i.lv,n.btnTip.node.active=!0,n.btnEquip.node.active=this._model.curIdx!=r&&d,n.btnUnEquip.node.active=this._model.curIdx==i.lv,n.txtState.string=d?"\u5df2\u89e3\u9501":"\u672a\u89e3\u9501",n.txtDesc.string=d?"":"\u5728\u5546\u5e97\u4e2d\u5151\u6362\u83b7\u5f97";for(var f=[-1,-1,0,1,2,3,4],_=0,y=b.NewYearModel.inst.table;_<y.length;_++){var g=y[_];if(g.lv==i.lv&&f[g.type]==this._type){n.txtDesc.string=d?"":"\u5728\u6625\u8282\u6d3b\u52a8\u754c\u9762\u4e2d\u5151\u6362";break}}n.txtLevel.string="",n.txtName.string=""+h.i18nMgr.getLabel(this._str+"/name"+i.lv)}else n.btnTip.node.active=!1,n.btnEquip.node.active=this._model.curIdx!=r&&this._model.curLv>=r,n.btnUnEquip.node.active=this._model.curIdx==r,n.txtDesc.string="",n.txtState.string=this._model.curLv>=r?"\u5df2\u89e3\u9501":"\u672a\u89e3\u9501",n.txtLevel.string=r+"\u9636",n.txtName.string=""+h.i18nMgr.getLabel(this._str+"/name"+i.lv);var m=function(){p.UIFacade.showToast("\u5916\u5f62\u5207\u6362\u6210\u529f"),c.AudioMgr.inst.playEffectByName("talentSelect"),o._model.curIdx==r?o._model.curIdx=0:o._model.curIdx=r,o.list.updateAll(),l.EVENT.emit(a.EventId.ON_REFRESH_ROLE)};n.btnEquip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnUnEquip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnEquip.node.on(cc.Node.EventType.TOUCH_END,m),n.btnUnEquip.node.on(cc.Node.EventType.TOUCH_END,m),n.btnTip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnTip.node.on(cc.Node.EventType.TOUCH_END,function(){u.default.inst.open(s.UIType.GodMenuInfo,{info:o._model.getInfo(i.lv),type:o._type})})}},e.prototype.remove=function(){},e}(d.Singleton());o.NewYear=E,cc._RF.pop()},{"../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UI/UIMgr":"UIMgr","../../Framework/Utils/Singleton":"Singleton","../../Framework/i18n/i18nMgr":"i18nMgr","../../Game/MonsterCtrl":"MonsterCtrl","../../Game/Weapon/WeaponBase":"WeaponBase","../../Game/WeaponCtrl":"WeaponCtrl","../../Model/StoreModel":"StoreModel","../../Model/WeaponModel":"WeaponModel","../../View/UI/GodMenu/GodMenuView":"GodMenuView","../../View/UI/GodMenu/GodMenuViewItem":"GodMenuViewItem","./Script/Model/NewYearModel":"NewYearModel"}],"jelly-tween":[function(t,e,o){"use strict";cc._RF.push(e,"b3d58ztlKJD7aTdpTvBGse6","jelly-tween");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frequency=4,e.decay=2,e.pressScale=.2,e.totalTime=1,e.interval=1,e.playOnLoad=!1,e.originalScale=1,e.tween=null,e}return i(e,t),e.prototype.start=function(){this.originalScale=this.node.scale,this.playOnLoad&&this.play()},e.prototype.play=function(t){var e=this,o=null!=t&&t>0?t:1e9,n=.2*this.totalTime,i=.15*this.totalTime,r=.65*this.totalTime,a=this.pressScale/i;this.tween=cc.tween(this.node).repeat(o,cc.tween().to(n,{scaleX:this.originalScale+this.pressScale,scaleY:this.originalScale-this.pressScale},{easing:"sineOut"}).to(i,{scaleX:this.originalScale,scaleY:this.originalScale}).to(r,{scaleX:{value:this.originalScale,progress:function(t,o,n,i){return o-e.getDifference(a,i)}},scaleY:{value:this.originalScale,progress:function(t,o,n,i){return o+e.getDifference(a,i)}}}).delay(this.interval)).start()},e.prototype.stop=function(){this.tween&&this.tween.stop(),this.node.setScale(this.originalScale)},e.prototype.getDifference=function(t,e){var o=this.frequency*Math.PI*2;return t*(Math.sin(e*o)/Math.exp(this.decay*e)/o)},r([c({tooltip:!1})],e.prototype,"frequency",void 0),r([c({tooltip:!1})],e.prototype,"decay",void 0),r([c({tooltip:!1})],e.prototype,"pressScale",void 0),r([c({tooltip:!1})],e.prototype,"totalTime",void 0),r([c({tooltip:!1})],e.prototype,"interval",void 0),r([c({tooltip:!1})],e.prototype,"playOnLoad",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"long-press":[function(t,e,o){"use strict";cc._RF.push(e,"9b8bdFO4NdES5XqUyK0qgcE","long-press");var n,i,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TriggerWay=o.LONG_PRESS=void 0,o.LONG_PRESS="longpress",function(t){t[t.Immediately=1]="Immediately",t[t.AfterLoosing=2]="AfterLoosing"}(i=o.TriggerWay||(o.TriggerWay={}));var s=cc._decorator,c=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.trggerTime=2,e.trggerWay=i.Immediately,e.longPressEvents=[],e.hasAccomplished=!1,e}return r(e,t),e.prototype.onEnable=function(){this.registerNodeEvent()},e.prototype.onDisable=function(){this.unregisterNodeEvent()},e.prototype.registerNodeEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.unregisterNodeEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.onTouchStart=function(){this.hasAccomplished=!1,this.scheduleOnce(this.onPressAccomplished.bind(this),this.trggerTime)},e.prototype.onTouchEnd=function(){this.hasAccomplished&&(this.hasAccomplished=!1,this.trigger()),this.unscheduleAllCallbacks()},e.prototype.onTouchCancel=function(){this.hasAccomplished&&(this.hasAccomplished=!1,this.trigger()),this.unscheduleAllCallbacks()},e.prototype.onPressAccomplished=function(){this.trggerWay===i.Immediately?this.trigger():this.trggerWay===i.AfterLoosing&&(this.hasAccomplished=!0)},e.prototype.trigger=function(){cc.Component.EventHandler.emitEvents(this.longPressEvents,this),this.node.emit(o.LONG_PRESS,this)},a([l({tooltip:!1})],e.prototype,"trggerTime",void 0),a([l({type:cc.Enum(i),tooltip:!1})],e.prototype,"trggerWay",void 0),a([l({type:cc.Component.EventHandler,tooltip:!1})],e.prototype,"longPressEvents",void 0),a([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],marquee:[function(t,e,o){"use strict";cc._RF.push(e,"232c8YhUahIIYbA2bb+9/FY","marquee");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.view=null,e.label=null,e.texts=[],e.speed=1,e.loop=!1,e.playOnLoad=!1,e.index=0,e.isPlaying=!1,e.endCallback=null,e}return i(e,t),e.prototype.onLoad=function(){this.init(),this.playOnLoad&&this.play(0,this.loop)},e.prototype.update=function(){this.isPlaying&&0!==this.texts.length&&this.updatePosition()},e.prototype.init=function(){this.label.node.anchorX=0,this.setLabel("")},e.prototype.updatePosition=function(){this.label.node.x-=this.speed,this.label.node.x<=-(this.view.width/2+this.label.node.width)&&this.next()},e.prototype.setLabel=function(t){this.label.string=t,this.label.node.x=this.view.width/2},e.prototype.next=function(){this.index++,this.index>=this.texts.length?this.loop?(this.index=0,this.setLabel(this.texts[0])):(this.endCallback&&(this.endCallback(),this.endCallback=null),this.clean()):this.setLabel(this.texts[this.index])},e.prototype.push=function(t){var e;Array.isArray(t)?(e=this.texts).push.apply(e,t):this.texts.push(t)},e.prototype.play=function(t,e,o){void 0===t&&(t=0),void 0===e&&(e=!1),void 0===o&&(o=null),0!==this.texts.length&&(this.index=t<this.texts.length?t:0,this.setLabel(this.texts[this.index]),this.loop=e,this.endCallback=o,this.isPlaying=!0)},e.prototype.stop=function(){this.isPlaying=!1,this.index=0},e.prototype.pause=function(){this.isPlaying=!1},e.prototype.resume=function(){this.isPlaying=!0},e.prototype.clean=function(){this.stop(),this.index=0,this.texts=[],this.endCallback=null},r([c({type:cc.Node,tooltip:!1})],e.prototype,"view",void 0),r([c({type:cc.RichText,tooltip:!1})],e.prototype,"label",void 0),r([c({tooltip:"\u6587\u672c\u961f\u5217"})],e.prototype,"texts",void 0),r([c({tooltip:!1})],e.prototype,"speed",void 0),r([c({tooltip:!1})],e.prototype,"loop",void 0),r([c({tooltip:!1})],e.prototype,"playOnLoad",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"radar-chart":[function(t,e,o){"use strict";cc._RF.push(e,"68c16Q81oJO/5UuHZLAfybl","radar-chart");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.executeInEditMode,p=(a.executionOrder,a.help),u=a.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e._axisLength=200,e._axes=6,e._axisScales=3,e._drawAxes=!0,e._gridLineWidth=4,e._innerGridLineWidth=4,e._gridLineColor=cc.Color.GRAY,e._gridFillColor=cc.color(100,100,100,100),e._dataValuesStrings=["0.8,0.5,0.6,0.5,0.8,0.6","0.5,0.9,0.5,0.8,0.5,0.9"],e._dataLineWidths=[5,5],e._dataLineColors=[cc.Color.BLUE,cc.Color.RED],e._dataFillColors=[cc.color(120,120,180,100),cc.color(180,120,120,100)],e._dataJoinColors=[],e._drawDataJoin=!0,e.graphics=null,e.keepUpdating=!1,e.angles=null,e._curDatas=[],e.curTweenRes=null,e}return i(e,t),Object.defineProperty(e.prototype,"axisLength",{get:function(){return this._axisLength},set:function(t){this._axisLength=t,this.draw(this.curDatas)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"axes",{get:function(){return this._axes},set:function(t){this._axes=Math.floor(t>=3?t:3),this.draw(this.curDatas)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"axisScales",{get:function(){return this._axisScales},set:function(t){this._axisScales=Math.floor(t>=1?t:1),this.draw(this.curDatas)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"drawAxes",{get:function(){return this._drawAxes},set:function(t){this._drawAxes=t,this.draw(this.curDatas)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gridLineWidth",{get:function(){return this._gridLineWidth},set:function(t){this._gridLineWidth=t,this.draw(this.curDatas)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerGridLineWidth",{get:function(){return this._innerGridLineWidth},set:function(t){this._innerGridLineWidth=t,this.draw(this.curDatas)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gridLineColor",{get:function(){return this._gridLineColor},set:function(t){this._gridLineColor=t,this.draw(this.curDatas)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gridFillColor",{get:function(){return this._gridFillColor},set:function(t){this._gridFillColor=t,this.draw(this.curDatas)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataValuesStrings",{get:function(){return this._dataValuesStrings},set:function(t){this._dataValuesStrings=t,this.drawWithProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataLineWidths",{get:function(){return this._dataLineWidths},set:function(t){this._dataLineWidths=t,this.drawWithProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataLineColors",{get:function(){return this._dataLineColors},set:function(t){this._dataLineColors=t,this.drawWithProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataFillColors",{get:function(){return this._dataFillColors},set:function(t){this._dataFillColors=t,this.drawWithProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataJoinColors",{get:function(){return this._dataJoinColors},set:function(t){this._dataJoinColors=t,this.drawWithProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"drawDataJoin",{get:function(){return this._drawDataJoin},set:function(t){this._drawDataJoin=t,this.draw(this.curDatas)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curDatas",{get:function(){return this._curDatas},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.init(),this.drawWithProperties()},e.prototype.update=function(){this.keepUpdating&&0!==this._curDatas.length&&this.draw(this._curDatas)},e.prototype.init=function(){this.target||(this.target=this.node),this.graphics=this.target.getComponent(cc.Graphics)||this.target.addComponent(cc.Graphics),this.graphics.lineJoin=cc.Graphics.LineJoin.ROUND,this.graphics.lineCap=cc.Graphics.LineCap.ROUND},e.prototype.drawWithProperties=function(){for(var t=[],e=this.dataValuesStrings,o=this._dataLineWidths,n=this._dataLineColors,i=this._dataFillColors,r=this._dataJoinColors,a=0;a<e.length;a++)t.push({values:this.processValuesString(e[a]),lineWidth:o[a]||h.lineWidth,lineColor:n[a]||h.lineColor,fillColor:i[a]||h.fillColor,joinColor:r[a]||h.joinColor});this.draw(t)},e.prototype.processValuesString=function(t){for(var e=t.split(","),o=[],n=0;n<e.length;n++){var i=parseFloat(e[n]);o.push(isNaN(i)?0:i)}return o},e.prototype.drawBase=function(){var t=this.graphics;t.lineWidth=this._gridLineWidth,t.strokeColor=this._gridLineColor,t.fillColor=this._gridFillColor;for(var e=this.angles=[],o=360/this.axes,n=0;n<this.axes;n++)e.push(o*n);var i=[],r=this._axisLength,a=this._axisScales,s=r/a;for(n=0;n<a;n++){for(var c=[],l=r-s*n,p=0,u=this.angles.length;p<u;p++){var d=Math.PI/180*this.angles[p];c.push(cc.v2(l*Math.cos(d),l*Math.sin(d)))}i.push(c)}var h=i[0];if(this._drawAxes)for(n=0;n<h.length;n++)t.moveTo(0,0),t.lineTo(h[n].x,h[n].y);for(t.moveTo(h[0].x,h[0].y),n=1;n<h.length;n++)t.lineTo(h[n].x,h[n].y);if(t.close(),t.fill(),t.stroke(),i.length>1){for(t.lineWidth=this._innerGridLineWidth,n=1;n<i.length;n++){var f=i[n];for(t.moveTo(f[0].x,f[0].y),p=1;p<f.length;p++)t.lineTo(f[p].x,f[p].y);t.close()}t.stroke()}},e.prototype.draw=function(t){var e=this.graphics;e.clear(),this.drawBase();var o=Array.isArray(t)?t:[t];this._curDatas=o,this.resizeCurDatasValues(0);for(var n=this.axes,i=this.axisLength,r=this.angles,a=0;a<o.length;a++){var s=o[a];e.strokeColor=s.lineColor||h.lineColor,e.fillColor=s.fillColor||h.fillColor,e.lineWidth=s.lineWidth||h.lineWidth;for(var c=[],l=0;l<n;l++){var p=(s.values[l]>1?1:s.values[l])*i,u=Math.PI/180*r[l];c.push(cc.v2(p*Math.cos(u),p*Math.sin(u)))}for(e.moveTo(c[0].x,c[0].y),l=1;l<c.length;l++)e.lineTo(c[l].x,c[l].y);if(e.close(),e.fill(),e.stroke(),this._drawDataJoin)for(l=0;l<c.length;l++){var d=c[l];e.strokeColor=s.lineColor||h.lineColor,e.circle(d.x,d.y,2),e.stroke(),e.strokeColor=s.joinColor||h.joinColor,e.circle(d.x,d.y,.65),e.stroke()}}},e.prototype.to=function(t,e){var o=this;return new Promise(function(n){var i;o.unscheduleAllCallbacks(),o.curTweenRes&&o.curTweenRes(),o.curTweenRes=n;var r=Array.isArray(t)?t:[t];o.keepUpdating=!0;for(var a=0;a<r.length;a++){var s=o._curDatas[a];if(s){for(var c=r[a],l=0;l<s.values.length;l++)cc.tween(s.values).to(e,(i={},i[l]=c.values[l]>1?1:c.values[l],i)).start();cc.tween(s).to(e,{lineWidth:c.lineWidth||s.lineWidth,lineColor:c.lineColor||s.lineColor,fillColor:c.fillColor||s.fillColor,joinColor:c.joinColor||s.joinColor}).start()}}o.scheduleOnce(function(){o.keepUpdating=!1,o.curTweenRes(),o.curTweenRes=null},e)})},e.prototype.resizeCurDatasValues=function(t){void 0===t&&(t=0);for(var e=this._curDatas,o=0;o<e.length;o++){var n=e[o];if(n.values.length<this._axes)for(var i=this._axes-n.values.length,r=0;r<i;r++)n.values.push(t)}},r([c({type:cc.Node,tooltip:!1})],e.prototype,"target",void 0),r([c()],e.prototype,"_axisLength",void 0),r([c({tooltip:!1})],e.prototype,"axisLength",null),r([c()],e.prototype,"_axes",void 0),r([c({tooltip:!1})],e.prototype,"axes",null),r([c()],e.prototype,"_axisScales",void 0),r([c({tooltip:!1})],e.prototype,"axisScales",null),r([c()],e.prototype,"_drawAxes",void 0),r([c({tooltip:!1})],e.prototype,"drawAxes",null),r([c()],e.prototype,"_gridLineWidth",void 0),r([c({tooltip:!1})],e.prototype,"gridLineWidth",null),r([c()],e.prototype,"_innerGridLineWidth",void 0),r([c({tooltip:!1})],e.prototype,"innerGridLineWidth",null),r([c()],e.prototype,"_gridLineColor",void 0),r([c({tooltip:!1})],e.prototype,"gridLineColor",null),r([c()],e.prototype,"_gridFillColor",void 0),r([c({tooltip:!1})],e.prototype,"gridFillColor",null),r([c()],e.prototype,"_dataValuesStrings",void 0),r([c({type:[cc.String],tooltip:!1})],e.prototype,"dataValuesStrings",null),r([c()],e.prototype,"_dataLineWidths",void 0),r([c({type:[cc.Integer],tooltip:!1})],e.prototype,"dataLineWidths",null),r([c()],e.prototype,"_dataLineColors",void 0),r([c({type:[cc.Color],tooltip:!1})],e.prototype,"dataLineColors",null),r([c()],e.prototype,"_dataFillColors",void 0),r([c({type:[cc.Color],tooltip:!1})],e.prototype,"dataFillColors",null),r([c()],e.prototype,"_dataJoinColors",void 0),r([c({type:[cc.Color],tooltip:!1})],e.prototype,"dataJoinColors",null),r([c()],e.prototype,"_drawDataJoin",void 0),r([c({tooltip:!1})],e.prototype,"drawDataJoin",null),r([s,l,p("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/chart/RadarChart.ts"),u("eazax/\u56fe\u8868\u7ec4\u4ef6/RadarChart")],e)}(cc.Component);o.default=d;var h={lineWidth:5,lineColor:cc.Color.BLUE,fillColor:cc.color(120,120,180,100),joinColor:cc.Color.WHITE};cc._RF.pop()},{}],"rotate-around":[function(t,e,o){"use strict";cc._RF.push(e,"ee377ORnvlJa4/sSlPLVNNv","rotate-around");var n,i,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Axis=void 0,function(t){t[t.PositiveX=0]="PositiveX",t[t.PositiveY=1]="PositiveY",t[t.NegativeX=2]="NegativeX",t[t.NegativeY=3]="NegativeY"}(i=o.Axis||(o.Axis={}));var s=cc._decorator,c=s.ccclass,l=s.property,p=s.help,u=s.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.clockwise=!0,e.timePerRound=10,e.faceToTarget=!1,e.faceAxis=i.NegativeY,e.autoStart=!1,e.angle=0,e.radius=0,e.isRotating=!1,e}return r(e,t),e.prototype.start=function(){this.autoStart&&this.run()},e.prototype.update=function(t){if(this.isRotating&&this.target){var e=this.angle,o=Math.PI/180*e,n=this.node,r=this.target,a=this.radius;if(n.x=r.x+a*Math.cos(o),n.y=r.y+a*Math.sin(o),this.faceToTarget)switch(this.faceAxis){case i.PositiveX:n.angle=e+180;break;case i.PositiveY:n.angle=e+90;break;case i.NegativeX:n.angle=e;break;case i.NegativeY:n.angle=e-90}var s=t*(360/this.timePerRound);(e=this.angle+=this.clockwise?-s:s)>=720?this.angle%=360:e<=-720&&(this.angle%=-360)}},e.prototype.run=function(t,e,o,n,i){if(null!=t&&(this.target=t),null!=e&&(this.clockwise=e),null!=o&&(this.timePerRound=o),null!=n&&(this.faceToTarget=n),null!=i&&(this.faceAxis=i),this.target){var r=this.target.getPosition(),a=this.node.getPosition();this.angle=this.getAngle(r,a),this.radius=this.getDistance(r,a),this.isRotating=!0}else cc.warn("[RotateAround]","No target!")},e.prototype.stop=function(){this.isRotating=!1},e.prototype.getAngle=function(t,e){return Math.atan((e.y-t.y)/(e.x-t.x))},e.prototype.getDistance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},a([l({type:cc.Node,tooltip:!1})],e.prototype,"target",void 0),a([l({tooltip:!1})],e.prototype,"clockwise",void 0),a([l({tooltip:!1})],e.prototype,"timePerRound",void 0),a([l({tooltip:!1})],e.prototype,"faceToTarget",void 0),a([l({type:cc.Enum(i),visible:function(){return this.faceToTarget},tooltip:!1})],e.prototype,"faceAxis",void 0),a([l({tooltip:!1})],e.prototype,"autoStart",void 0),a([c,p("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/RotateAround.ts"),u("eazax/\u5176\u4ed6\u7ec4\u4ef6/RotateAround")],e)}(cc.Component);o.default=d,cc._RF.pop()},{}],"runIn-background":[function(t,e,o){"use strict";cc._RF.push(e,"6078fAGpvFFLY/R/8sHk2cr","runIn-background");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.executionOrder,p=a.help,u=a.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.url="/worker.js",e.worker=null,e}return i(e,t),e.prototype.onLoad=function(){this.init(),this.registerEvent()},e.prototype.onDestroy=function(){this.unregisterEvent()},e.prototype.registerEvent=function(){this.onVisibilityChange=this.onVisibilityChange.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange)},e.prototype.unregisterEvent=function(){document.removeEventListener("visibilitychange",this.onVisibilityChange)},e.prototype.init=function(){},e.prototype.onVisibilityChange=function(){"hidden"===document.visibilityState?(cc.game.isPaused()&&cc.game.resume(),this.worker=new Worker(this.url),this.worker.onmessage=function(){cc.director.mainLoop()}):"visible"===document.visibilityState&&this.worker&&(this.worker.terminate(),this.worker=null)},r([c({displayName:!1,tooltip:!1})],e.prototype,"url",void 0),r([s,l(-1),p("https://gitee.com/ifaswind/eazax-ccc/blob/master/components/RunInBackground.ts"),u("eazax/\u5176\u4ed6\u7ec4\u4ef6/RunInBackground")],e)}(cc.Component);o.default=d,cc._RF.pop()},{}],subtitle:[function(t,e,o){"use strict";cc._RF.push(e,"221d3xHS3BO7qxrXV6Twy4y","subtitle");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.queen=[],e.curIndex=0,e.interval=1.5,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o.instance=this},e.print=function(t,e){void 0===e&&(e=1.5),this.instance.print(t,e)},e.clear=function(){this.instance.clear()},e.prototype.print=function(t,e){void 0===e&&(e=1.5),0!==t.length&&(this.unscheduleAllCallbacks(),this.queen=t,this.interval=e,this.curIndex=-1,this.next())},e.prototype.next=function(){var t=this;this.curIndex++,this.curIndex>=this.queen.length?this.unscheduleAllCallbacks():(this.label.string=this.queen[this.curIndex],this.scheduleOnce(function(){return t.next()},this.interval))},e.prototype.clear=function(){this.unscheduleAllCallbacks(),this.queen=[],this.curIndex=0,this.label.string=""},e.instance=null,r([c(cc.Label)],e.prototype,"label",void 0),o=r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"touch-blocker2":[function(t,e,o){"use strict";cc._RF.push(e,"3865aKF7UxJbriYi76tBKcm","touch-blocker2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allowList=[],e.blocked=!1,e.persist=!1,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){this.init(),this.registerEvent()},e.prototype.onDestroy=function(){this.unregisterEvent(),o.instance=null},e.prototype.init=function(){this.persist&&(this.node.setParent(cc.Canvas.instance.node),this.node.setSiblingIndex(cc.macro.MAX_ZINDEX),cc.game.addPersistRootNode(this.node)),o.instance=this},e.prototype.registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onEvent,this),this.setSwallowTouches(!1)},e.prototype.unregisterEvent=function(){this.node.targetOff(this)},e.prototype.onEvent=function(t){this.blocked&&!this.clickOnAnyTarget(t.getLocation())&&t.stopPropagationImmediate()},e.prototype.clickOnAnyTarget=function(t){for(var e=0;e<this.allowList.length;e++)if(this.allowList[e].getBoundingBoxToWorld().contains(t))return!0;return!1},e.prototype.setSwallowTouches=function(t){this.node._touchListener.setSwallowTouches(t)},e.addTargets=function(t){var e;Array.isArray(t)?(e=this.instance.allowList).push.apply(e,t):this.instance.allowList.push(t)},e.setTarget=function(t){this.clearTargets(),this.instance.allowList.push(t)},e.clearTargets=function(){this.instance.allowList.length=0},e.on=function(){this.instance.blocked=!0},e.off=function(){this.instance.blocked=!1},e.instance=null,r([c({type:[cc.Node],tooltip:!1})],e.prototype,"allowList",void 0),r([c({tooltip:!1})],e.prototype,"blocked",void 0),r([c({tooltip:!1})],e.prototype,"persist",void 0),o=r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"touch-blocker":[function(t,e,o){"use strict";cc._RF.push(e,"6752dY0ofJIiLJXGzt9jrEm","touch-blocker");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.isBlockAll=!1,e.isPassAll=!1,e}return i(e,t),e.prototype.onLoad=function(){this.registerEvent()},e.prototype.start=function(){this.reset()},e.prototype.onDestroy=function(){this.unregisterEvent()},e.prototype.registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEvent,this)},e.prototype.unregisterEvent=function(){this.node.targetOff(this)},e.prototype.reset=function(){this.setSwallowTouches(!1)},e.prototype.onTouchEvent=function(t){this.isPassAll||!this.isBlockAll&&this.target&&this.target.getBoundingBoxToWorld().contains(t.getLocation())||t.stopPropagationImmediate()},e.prototype.blockAll=function(){this.isBlockAll=!0,this.isPassAll=!1},e.prototype.passAll=function(){this.isPassAll=!0,this.isBlockAll=!1},e.prototype.setTarget=function(t){this.target=t,this.isBlockAll=!1,this.isPassAll=!1},e.prototype.setSwallowTouches=function(t){this.node._touchListener&&this.node._touchListener.setSwallowTouches(t)},r([c({type:cc.Node,tooltip:!1})],e.prototype,"target",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"touch-effect":[function(t,e,o){"use strict";cc._RF.push(e,"2e682Ql87pEYpooOTqRyeIx","touch-effect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectPrefab=null,e.effectContainer=null,e.duration=.5,e.interval=.5,e.maxQuantity=20,e.triggerByMoving=!1,e.useNodePool=!1,e.nodePoolLimit=20,e.curCount=0,e.lastTriggerTime=0,e.nodePool=new cc.NodePool,e}return i(e,t),e.prototype.onLoad=function(){this.registerEvent()},e.prototype.onDestroy=function(){this.unregisterEvent()},e.prototype.registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.setSwallowTouches(!1)},e.prototype.unregisterEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.onTouchStart=function(t){this.playEffect(t.getLocation())},e.prototype.onTouchMove=function(t){this.triggerByMoving&&this.playEffect(t.getLocation())},e.prototype.playEffect=function(t){var e=this,o=Date.now();if(!(this.curCount>=this.maxQuantity||this.lastTriggerTime>o-1e3*this.interval)){this.lastTriggerTime=o,this.curCount++;var n=null;n=this.nodePool.size()>0?this.nodePool.get():cc.instantiate(this.effectPrefab);var i=this.effectContainer||this.node;n.setParent(i),n.setPosition(i.convertToNodeSpaceAR(t)),n.opacity=255,cc.tween(n).to(this.duration,{opacity:0}).call(function(){return e.recycleEffect(n)}).start()}},e.prototype.recycleEffect=function(t){this.curCount--,this.useNodePool&&this.nodePool.size()<this.nodePoolLimit?this.nodePool.put(t):t.destroy()},e.prototype.setSwallowTouches=function(t){this.node._touchListener&&this.node._touchListener.setSwallowTouches(t)},r([c({type:cc.Prefab,displayName:!1})],e.prototype,"effectPrefab",void 0),r([c({type:cc.Node,displayName:!1})],e.prototype,"effectContainer",void 0),r([c({displayName:!1})],e.prototype,"duration",void 0),r([c({displayName:!1})],e.prototype,"interval",void 0),r([c({displayName:!1})],e.prototype,"maxQuantity",void 0),r([c({displayName:!1,tooltip:!1})],e.prototype,"triggerByMoving",void 0),r([c({displayName:!1,tooltip:!1})],e.prototype,"useNodePool",void 0),r([c({visible:function(){return this.useNodePool},displayName:!1,tooltip:!1})],e.prototype,"nodePoolLimit",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}]},{},["AdMgr","GameBase","GameItemBase","GameItemMgr","ItemMgr","LayerMgr","NativeAD","NativeMgr","TableMgr","TimeMgr","Define","EventId","LocalKey","RedDotKey","SceneDef","StaticData","UIDefs","AudioMgr","RTAudioSource","RTAudioSourceMgr","RTClickSound","EventMgr","RedDot","RedDotHandler","List","ListItem","RenderToTarget","BytedanceSDK","NodePool","ResKeeper","ResKeeperAddition","ResLoader","SceneBase","SceneMgr","LocalStorageMgr","TeMap","CommonToast","UICloseAnimation","UIFacade","UIMgr","UIOpenAnimation","UIBase","Singleton","Utils","VectorUtil","VM","arc-progress-bar","radar-chart","counter","draggable","long-press","marquee","gradient-color","rotate-around","runIn-background","subtitle","touch-blocker","touch-blocker2","touch-effect","bounce-move-tween","bounce-scale-tween","jelly-tween","i18nLabel","i18nMgr","i18nSprite","MonsterComponent","PetComponent","PlayerComponent","ComHitBeEffect","ComHitEffect","ComHitNum","HpBar","PickUpBase","PickUpBox","PickUpEquip","PickUpExp","PickUpFood","PickUpLbs","Joystick","ComBulletChongfeng","ComBulletDici","ComBulletFeijian","ComBulletLiandao","ComBulletMofadan","ComBulletMofadanZ","ComBulletXialuo","MonsterCircle","MonsterGroup","ComMonsterChongfeng","ComMonsterDici","ComMonsterFeijian","ComMonsterLiandao","ComMonsterMofadan","ComMonsterXialuo","MonsterWeapon","MonsterCtrl","NpcBase","PlayerCtrl","ComWarnBox","ComWarnCircle","WarnBase","BulletBase","BulletDrawBase","ComBulletBanyue","ComBulletBishou","ComBulletChushou","ComBulletChushouZ","ComBulletChushouZ2","ComBulletCommon","ComBulletCommonPet","ComBulletCommonPetLeiyun","ComBulletDasuan","ComBulletDianWang","ComBulletDraw1","ComBulletDraw1Z","ComBulletDraw2","ComBulletDraw3","ComBulletDraw3Z","ComBulletFeidao","ComBulletFeidaoZ","ComBulletFreezeAll","ComBulletGunshi","ComBulletGunshiZ","ComBulletHudun","ComBulletJianYu","ComBulletJianta","ComBulletJiantaZ","ComBulletJiantaZ2","ComBulletJiguang","ComBulletLeidian","ComBulletLeidianSenior","ComBulletLiuxingchui","ComBulletLiuxingchuiSenior","ComBulletMozhua","ComBulletMozhuaZ","ComBulletQiang","ComBulletQuan","ComBulletQuanZ","ComBulletShufu","ComBulletTaijilun","ComBulletTaijilunSenior","ComBulletXuanfeng","ComBulletYunShi","ComBulletYunShiZ","ComBulletZhengguo","ComWeaponBanyue","ComWeaponBishou","ComWeaponChushou","ComWeaponCommon","ComWeaponCommonPet","ComWeaponDasuan","ComWeaponDianwang","ComWeaponDraw1","ComWeaponDraw2","ComWeaponDraw3","ComWeaponFeidao","ComWeaponFreezeAll","ComWeaponGunshi","ComWeaponHudun","ComWeaponJianta","ComWeaponJianyu","ComWeaponJiguang","ComWeaponLeidian","ComWeaponLiuxingchui","ComWeaponMozhua","ComWeaponQiang","ComWeaponQuan","ComWeaponShufu","ComWeaponTaijilun","ComWeaponXuanfeng","ComWeaponYunshi","ComWeaponZhengguo","ComPetLeiyun","WeaponBase","WeaponDrawBase","WeaponCtrl","GodGuide","GuideCollider","GuideText","GuideTask1","GuideTask2","GuideTask3","GuideTask4","GuideTask5","GuideTask6","GuideTask7","Task","AchievementModel","GameModel","GodBackModel","GodBase","GodPetModel","GodRideModel","GodSkinModel","GodWeaponModel","MagnetModel","StoreModel","TaskModel","UserModel","WeaponModel","XiuLianModel","ModuleMgr","NewYearModel","NewYearMenuItem","NewYearEnter","NewYearItem","NewYearMenu","UIGame_NewYear","UIMain_NewYear","ComBulletFeidaoZ_NewYear","index","TestMonster","TestWeapon","IconItem","SkillDrawUI","SkillItem","SkillUI","Bootstrap","Main","Achievement","AchievementItem","Confirm","DrawSkill","EliteBox","FightEquip","FightEquipGuide","FightEquipItem","FightEquipTips","SelectWeapon","SelectWeaponItem","GameOver","GamePause","GameStart","GetG1Money","GetMoney","GodMenu","GodMenuInfo","GodMenuNew","GodMenuView","GodMenuViewItem","GodWeaponReward","Loading","Magnet","AgeTips","StoreReview","Setting","StageBox","StageBoxItem","StageBoxTips","StageMap","StageMapBox","StageMapItem","Store","Store_Exchange","Store_ExchangeInfo","Store_ExchangeItem","Store_Money","Talent","TalentItem","UIGame","UIMain","XiuLian","XiuLianAD","XiuLianItem","XiuLianResult","XiuLianTip"]);