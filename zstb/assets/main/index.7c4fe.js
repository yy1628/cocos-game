window.__require=function e(t,o,n){function i(a,s){if(!o[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=o[a]={exports:{}};t[a][0].call(p.exports,function(e){return i(t[a][1][e]||e)},p,p.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AchievementItem:[function(e,t,o){"use strict";cc._RF.push(t,"502ec5yLPJN8Iv91DYFocve","AchievementItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/i18n/i18nMgr"),s=e("../../../Model/AchievementModel"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.desc1=null,t.desc2=null,t.rNum=null,t.pbNum=null,t.pb=null,t.btns=[],t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.updateDate=function(e){this._dataSource=e;var t=e.id,o=s.AchievementModel.inst.levels[t]||0,n=s.AchievementModel.inst.points[t]||0,i=e.count[o],r=e.rewardNum[o];o>=e.count.length?(this.btns.forEach(function(e,t){return e.node.active=0==t}),this.desc2.string="\u5168\u90e8\u8fbe\u6210",i=e.count[o-1],r=e.rewardNum[o-1]):n>=i?(this.btns.forEach(function(e,t){return e.node.active=1==t}),this.desc2.string="\u9886\u53d6"):(this.btns.forEach(function(e,t){return e.node.active=2==t}),this.desc2.string="\u9886\u53d6"),this.pb.progress=n/i,this.pbNum.string=n+" / "+i,this.rNum.string=""+r,this.desc1.string=a.i18nMgr.placeholder("Lv."+(o+1)+" "+e.desc,[""+i])},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([p(cc.Label)],t.prototype,"desc1",void 0),r([p(cc.Label)],t.prototype,"desc2",void 0),r([p(cc.Label)],t.prototype,"rNum",void 0),r([p(cc.Label)],t.prototype,"pbNum",void 0),r([p(cc.ProgressBar)],t.prototype,"pb",void 0),r([p(cc.Button)],t.prototype,"btns",void 0),r([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/AchievementModel":"AchievementModel"}],AchievementModel:[function(e,t,o){"use strict";cc._RF.push(t,"862b8w7hrJGKYZFo8e69WYS","AchievementModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.AchievementModel=void 0;var n=e("../Controller/TableMgr"),i=e("../Define/RedDotKey"),r=e("../Framework/Event/RedDot"),a=e("../Framework/Storage/LocalStorageMgr"),s=function(){function e(){this._info=[],this._levels=[],this._points=[],this._param={},this._info=n.TABLE.getTable("Achievement"),this._levels=JSON.parse(a.LocalStorageMgr.getItem("Achievement_levels")||"[]"),this._points=JSON.parse(a.LocalStorageMgr.getItem("Achievement_points")||"[]"),this._param=JSON.parse(a.LocalStorageMgr.getItem("Achievement_param")||"{}"),this.sort()}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"info",{get:function(){return this._info},set:function(e){this._info=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},set:function(e){this._levels=e,a.LocalStorageMgr.setItem("Achievement_levels",JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this._points},set:function(e){this._points=e,a.LocalStorageMgr.setItem("Achievement_points",JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"param",{get:function(){return this._param},set:function(e){this._param=e,a.LocalStorageMgr.setItem("Achievement_param",JSON.stringify(e))},enumerable:!1,configurable:!0}),e.prototype.addPoint=function(e,t){void 0===t&&(t=1);var o=this.points[e]||0;this.points[e]=o+t,this.points=this._points,this.sort()},e.prototype.updatePoint=function(e,t){switch(e){case 2:case 22:var o=this.param[e];null==o&&(o=[]),o.indexOf(t)<0&&(o.push(t),this.param[e]=o,this.param=this._param,this.points[e]=o.length,this.points=this._points);break;default:(this.points[e]||0<t)&&(this.points[e]=t,this.points=this._points)}this.sort()},e.prototype.checkGet=function(){var e=this,t=!!this._info.find(function(t){var o=e._points[t.id]||0,n=e._levels[t.id]||0;return o>=t.count[n]});return r.RedDot.inst.setRedDot(i.RedDotKey.Achievement,t?1:0),t},e.prototype.sort=function(){var e=this;this._info.sort(function(t,o){var n=e._points[t.id]||0,i=e._levels[t.id]||0,r=e._points[o.id]||0,a=e._levels[o.id]||0;return n>=t.count[i]&&r>=o.count[a]?t.sort-o.sort:n>=t.count[i]?-1:r>=o.count[a]?1:t.sort-o.sort})},e._inst=null,e}();o.AchievementModel=s,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/RedDotKey":"RedDotKey","../Framework/Event/RedDot":"RedDot","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr"}],Achievement:[function(e,t,o){"use strict";cc._RF.push(t,"08417RKY/RG8Z+54zzJAD6K","Achievement");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Audio/AudioMgr"),c=e("../../../Framework/Event/EventMgr"),l=e("../../../Framework/List/List"),p=e("../../../Framework/UIBase"),u=e("../../../Framework/VM"),d=e("../../../Model/AchievementModel"),h=e("../../../Model/UserModel"),f=e("./AchievementItem"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moneyTxt=null,t.rMoneyTxt=null,t.list=null,t}return i(t,e),t.prototype.onOpen=function(){s.AudioMgr.inst.playEffectByName("ui_open"),this.updateMoney(h.UserModel.inst.money),this.updateRMoney(h.UserModel.inst.rMoney),this.list.numItems=d.AchievementModel.inst.info.length},t.prototype.onEnable=function(){u.VM.bindPath("UserModel._money",this.updateMoney,this),u.VM.bindPath("UserModel._rMoney",this.updateRMoney,this)},t.prototype.onDisable=function(){u.VM.unbindPath("UserModel._money",this.updateMoney,this),u.VM.unbindPath("UserModel._rMoney",this.updateRMoney,this)},t.prototype.onListRender=function(e,t){var o=this,n=e.getComponent(f.default);n.updateDate(d.AchievementModel.inst.info[t]);var i=n.btns[1];i.node.targetOff(cc.Node.EventType.TOUCH_END),i.node.on(cc.Node.EventType.TOUCH_END,function(){s.AudioMgr.inst.playEffectByName("achievement");var e=d.AchievementModel.inst.info[t],i=e.id,r=d.AchievementModel.inst.levels[i]||0,l=e.rewardNum[r],p=n.icon.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(a.EventId.ON_UI_MAIN_FLY_ICON,p,"RMoney",null,{target:o.rMoneyTxt.node}),h.UserModel.inst.rMoney+=l,d.AchievementModel.inst.levels[i]=r+1,d.AchievementModel.inst.levels=d.AchievementModel.inst.levels,d.AchievementModel.inst.sort(),o.list.updateAll()})},t.prototype.updateMoney=function(e){this.moneyTxt.string=""+e},t.prototype.updateRMoney=function(e){this.rMoneyTxt.string=""+e},r([g(cc.Label)],t.prototype,"moneyTxt",void 0),r([g(cc.Label)],t.prototype,"rMoneyTxt",void 0),r([g(l.default)],t.prototype,"list",void 0),r([y],t)}(p.default);o.default=m,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/UIBase":"UIBase","../../../Framework/VM":"VM","../../../Model/AchievementModel":"AchievementModel","../../../Model/UserModel":"UserModel","./AchievementItem":"AchievementItem"}],AdMgr:[function(e,t,o){"use strict";cc._RF.push(t,"2284f7DjJJAlqQaY1Tco2wC","AdMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Define/Define"),a=e("../Define/EventId"),s=e("../Framework/Audio/AudioMgr"),c=e("../Framework/Event/EventMgr"),l=e("../Framework/Platform/BytedanceSDK"),p=e("../Framework/UI/UIFacade"),u=e("../Framework/Utils/Singleton"),d=e("../Model/AchievementModel"),h=e("./TimeMgr"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isPlaying=!1,t._isComplete=!1,t._eventComplete=null,t._eventCancel=null,t._eventClose=null,t._interstitial_time=0,t}return i(t,e),t.prototype.init=function(){this.loadAd(""),this._interstitial_time=h.default.inst.now()+18e4},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),t.prototype._onAdComplete=function(){this._isComplete=!0},t.prototype._onAdCancel=function(){var e=this;this._eventClose(),cc.Canvas.instance.scheduleOnce(function(){return e._eventCancel()})},t.prototype._onAdClose=function(){var e=this;this._eventClose(),this._isComplete&&(this._isComplete=!1,cc.Canvas.instance.scheduleOnce(function(){return e._eventComplete()}),d.AchievementModel.inst.addPoint(20))},t.prototype.loadAd=function(e){cc.sys.platform==cc.sys.BYTEDANCE_GAME?l.default.inst.loadAd():cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdSDK","loadAd","(Ljava/lang/String;)V",e):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdSDK","loadAd:",e)},t.prototype.showAd=function(e,t,o){var n=this,i=function(){n._eventComplete=t,n._eventCancel=function(){},n._eventClose=function(){},n._onAdComplete(),n._onAdClose()};(function(){if(r.Config.debugAD)i();else{var a=!1;if(cc.sys.platform==cc.sys.BYTEDANCE_GAME)l.default.inst.showAd("",e);else if(cc.sys.os===cc.sys.OS_ANDROID)a=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdSDK","showAd","(Ljava/lang/String;Ljava/lang/String;)Z","",e);else{if(cc.sys.os!==cc.sys.OS_IOS)return void i();a=jsb.reflection.callStaticMethod("AdSDK","showAd:AdName:","",e)}if(!a)return p.UIFacade.showToast("\u5e7f\u544a\u8fd8\u6ca1\u51c6\u5907\u597d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),void s.AudioMgr.inst.playEffectByName("ui_not");cc.audioEngine.pauseAll(),n._isPlaying=!0,n._isComplete=!1,n._eventComplete=t,n._eventCancel=o,n._eventClose=function(){n._isPlaying=!1,cc.audioEngine.resumeAll()}}})(),this._interstitial_time=h.default.inst.now()-3e4},t.prototype.showAdBanner=function(e){cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdBannerSDK","showAd","(Ljava/lang/String;Ljava/lang/String;)Z","",e):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdBannerSDK","showAd:AdName:","",e))},t.prototype.removeAdBanner=function(){cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdBannerSDK","removeAd","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdBannerSDK","removeAd"))},t.prototype.showAdInterstitial=function(e){var t=h.default.inst.now();t-this._interstitial_time<6e4||(this._interstitial_time=t,cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdInterstitialSDK","showAd","(Ljava/lang/String;Ljava/lang/String;)Z","",e):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdInterstitialSDK","showAd:AdName:","",e)))},t.prototype.removeAdInterstitial=function(){cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdInterstitialSDK","removeAd","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdInterstitialSDK","removeAd"))},t.prototype.showAdNative=function(e,t,o){cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdNativeSDK","showAd","(Ljava/lang/String;Ljava/lang/String;II)Z","",e,t,o):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdNativeSDK","showAd:AdName:X:Y:","",e,t,o))},t.prototype.removeAdNative=function(){cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdNativeSDK","removeAd","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AdNativeSDK","removeAd"))},t.prototype._onAdNativeComplete=function(){c.EVENT.emit(a.EventId.ON_AD_NATIVE_COMPLETE)},t}(u.Singleton());o.default=f,window.AD=f.inst,cc._RF.pop()},{"../Define/Define":"Define","../Define/EventId":"EventId","../Framework/Audio/AudioMgr":"AudioMgr","../Framework/Event/EventMgr":"EventMgr","../Framework/Platform/BytedanceSDK":"BytedanceSDK","../Framework/UI/UIFacade":"UIFacade","../Framework/Utils/Singleton":"Singleton","../Model/AchievementModel":"AchievementModel","./TimeMgr":"TimeMgr"}],AgeTips:[function(e,t,o){"use strict";cc._RF.push(t,"8b6056toeVJUYEBnNyai8/K","AgeTips");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onOpen=function(){},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"8755al2TJxGM74sdOuBFoCr","AudioMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.AudioMgr=void 0;var a=e("../Audio/RTAudioSource"),s=e("./RTAudioSourceMgr"),c=e("../Res/ResKeeper"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bgmAudio=null,t._effectClips=new Map,t._onceEffect=new Map,t._loopEffect=new Map,t}var o;return i(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return o._inst?o._inst:(cc.error("AudioMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._inst=this},t.prototype.playBgm=function(e,t){var o=this;void 0===e&&(e="bgm"),void 0===t&&(t=0),this._bgmAudio&&this._bgmAudio.node.destroy(),this._bgmAudio=null,this.loadBundleRes("Audio",e,function(n,i){var r=i;if(null!=r){var s=o._bgmAudio;null==s&&((s=(new cc.Node).addComponent(a.default)).audioType=a.RTAudioSourceType.Music,s.node.name=r.name,s.node.setParent(o.node),o._bgmAudio=s),s.isPlaying||(s.playOnLoad=!0,s.loop=!0,s.clip=r,s.setCurrentTime(t),s.play())}else cc.warn("audio: '"+e+"' not found")})},t.prototype.gameShow=function(){var e=this;if(this.setEffectVolume(1),this.setMusicVolume(1),this._bgmAudio){var t=this._bgmAudio.getCurrentTime();this._bgmAudio.stop(),this.scheduleOnce(function(){e._bgmAudio.setCurrentTime(t),e._bgmAudio.play()},.3)}},t.prototype.gameHide=function(){this.setEffectVolume(0),this.setMusicVolume(0)},t.prototype.playEffect=function(e,t){void 0===t&&(t=0),s.default.inst.isEffectMute()||this.scheduleOnce(function(){cc.audioEngine.playEffect(e,!1)},t)},t.prototype.playEffectByName=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=0);var n=this._effectClips.get(e);n&&this.playEffect(n,o)},t.prototype.playLoopEffect=function(e){var t=this._loopEffect.get(e);null==t&&((t=(new cc.Node).addComponent(a.default)).audioType=a.RTAudioSourceType.Effect,t.node.name=e.name,t.node.setParent(this.node),t.playOnLoad=!0,t.clip=e,this._loopEffect.set(e,t)),t.isPlaying||(t.loop=!0,t.play())},t.prototype.playLoopEffectByName=function(e){var t=this._effectClips.get(e);t&&this.playLoopEffect(t)},t.prototype.stopLoopEffect=function(e){var t=this._loopEffect.get(e);t&&t.stop()},t.prototype.stopLoopEffectByName=function(e){var t=this._effectClips.get(e);t&&this.stopLoopEffect(t)},t.prototype.getLoopEffectSourceByName=function(e){var t=this._effectClips.get(e);return this._loopEffect.get(t)},t.prototype.getClipByName=function(e){return this._effectClips.get(e)},t.prototype.stopEffectAll=function(){this._loopEffect.forEach(function(e){return e.stop()})},t.prototype.initClip=function(){var e=this;s.default.inst.init(),cc.assetManager.getBundle("Audio").loadDir("/",cc.AudioClip,function(t,o){for(var n=0;n<o.length;n++){var i=o[n];e._effectClips.set(i.name,i)}})},t.prototype.setMusicVolume=function(e,t){void 0===t&&(t=!1),s.default.inst.setMusicVolume(e,t)},t.prototype.setEffectVolume=function(e,t){void 0===t&&(t=!1),s.default.inst.setEffectVolume(e,t)},t.prototype.muteAllMusic=function(e,t){void 0===t&&(t=!1),s.default.inst.muteAllMusic(e,t)},t.prototype.muteAllEffect=function(e,t){void 0===t&&(t=!1),s.default.inst.muteAllEffect(e,t)},o=r([p],t)}(c.default));o.AudioMgr=u,cc._RF.pop()},{"../Audio/RTAudioSource":"RTAudioSource","../Res/ResKeeper":"ResKeeper","./RTAudioSourceMgr":"RTAudioSourceMgr"}],Bootstrap:[function(e,t,o){"use strict";cc._RF.push(t,"1b9089GT51Gsaycn08Qai4h","Bootstrap");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../Controller/AdMgr"),l=e("../../Controller/NativeMgr"),p=e("../../Controller/TableMgr"),u=e("../../Controller/TimeMgr"),d=e("../../Define/SceneDef"),h=e("../../Define/UIDefs"),f=e("../../Framework/Audio/AudioMgr"),_=e("../../Framework/Event/RedDot"),y=e("../../Framework/i18n/i18nMgr"),g=e("../../Framework/Scene/SceneBase"),m=e("../../Framework/Scene/SceneMgr"),v=e("../../Framework/UI/UIMgr"),M=cc._decorator,b=M.ccclass,E=M.property,I=!1;cc.dynamicAtlasManager.enabled=!0;var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logo=null,t.uiRoot=null,t.audioRoot=null,t.loadPrefabs=[],t._logoEnd=!1,t._initEnd=!1,t}return i(t,e),t.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return s(this,function(){return l.default.inst.gameInit(),[2]})})},t.prototype.start=function(){return a(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return(e=cc.find("PROFILER-NODE/LEFT-PANEL"))&&(e.addComponent(cc.LabelOutline).color=cc.color(0,0,0),e.getComponent(cc.Label).cacheMode=cc.Label.CacheMode.NONE),(t=cc.find("PROFILER-NODE/RIGHT-PANEL"))&&(t.addComponent(cc.LabelOutline).color=cc.color(0,0,0),t.getComponent(cc.Label).cacheMode=cc.Label.CacheMode.NONE),cc.sys.isNative&&(o=cc.find("PROFILER-NODE"))&&(o.scale*=2),y.i18nMgr.setLanguage("zh"),_.RedDot.inst.init(),I?(this._logoEnd=!0,this._initEnd=!0,this.showLogo(),[2]):(I=!0,[4,this.initFramework()]);case 1:return n.sent(),[2]}})})},t.prototype.showLogo=function(){var e=this;cc.tween(this.logo).delay(1).to(1,{opacity:0}).call(function(){v.default.inst.delayUIWaitAnim(60),v.default.inst.open(h.UIType.Loading),e._logoEnd=!0,e.initEnd()}).start()},t.prototype.initFramework=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.rootLoading()];case 1:return e.sent(),[4,this.resoucreLoading()];case 2:return e.sent(),[4,p.TABLE.loadTableRes()];case 3:return e.sent(),this.initGame(),this._initEnd=!0,this.initEnd(),[2]}})})},t.prototype.initGame=function(){return a(this,void 0,void 0,function(){return s(this,function(){return f.AudioMgr.inst.initClip(),v.default.inst.createCache(),[2]})})},t.prototype.initEnd=function(){return a(this,void 0,void 0,function(){return s(this,function(){return this._logoEnd&&this._initEnd?(this.onToGame(),[2]):[2]})})},t.prototype.onToGame=function(){cc.game.targetOff(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,function(){c.default.inst.isPlaying||(f.AudioMgr.inst.gameShow(),cc.game.resume())}),cc.game.targetOff(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,function(){c.default.inst.isPlaying||(f.AudioMgr.inst.gameHide(),cc.game.pause())}),l.default.inst.gameStart(),u.default.inst.init(function(e){e?(cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){v.default.inst.delayUIWaitAnim(1),v.default.inst.open(h.UIType.GameStart),v.default.inst.open(h.UIType.UIMain),v.default.inst.close(h.UIType.Loading),f.AudioMgr.inst.playBgm("bgMenu"),c.default.inst.init()}),m.SceneMgr.inst.loadScene(d.SceneType.Main)):l.default.inst.networkErr()})},t.prototype.rootLoading=function(){return a(this,void 0,void 0,function(){var e=this;return s(this,function(){return[2,new Promise(function(t){cc.assetManager.loadBundle("Prefabs",function(o){if(!o){var n=cc.instantiate(e.uiRoot);cc.director.getScene().addChild(n),cc.game.addPersistRootNode(n);var i=cc.instantiate(e.audioRoot);cc.director.getScene().addChild(i),cc.game.addPersistRootNode(i),e.showLogo(),t()}})})]})})},t.prototype.resoucreLoading=function(){return a(this,void 0,void 0,function(){return s(this,function(){return[2,new Promise(function(e){cc.assetManager.loadBundle("Config",function(t){t||cc.assetManager.loadBundle("Textures",function(t){t||cc.assetManager.loadBundle("Audio",function(t){t||e()})})})})]})})},t.prototype.onClickAgeTip=function(){v.default.inst.open(h.UIType.AgeTips)},t.prototype.onClickUserFeedback=function(){l.default.inst.openUserFeedback()},r([E(cc.Node)],t.prototype,"logo",void 0),r([E(cc.Prefab)],t.prototype,"uiRoot",void 0),r([E(cc.Prefab)],t.prototype,"audioRoot",void 0),r([E({type:cc.Prefab,tooltip:"\u6253\u5305\u65f6\u5f15\u5165\u5230\u521d\u59cb\u573a\u666f"})],t.prototype,"loadPrefabs",void 0),r([b],t)}(g.default);o.default=O,cc._RF.pop()},{"../../Controller/AdMgr":"AdMgr","../../Controller/NativeMgr":"NativeMgr","../../Controller/TableMgr":"TableMgr","../../Controller/TimeMgr":"TimeMgr","../../Define/SceneDef":"SceneDef","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/RedDot":"RedDot","../../Framework/Scene/SceneBase":"SceneBase","../../Framework/Scene/SceneMgr":"SceneMgr","../../Framework/UI/UIMgr":"UIMgr","../../Framework/i18n/i18nMgr":"i18nMgr"}],BulletBase:[function(e,t,o){"use strict";cc._RF.push(t,"e5f27C6qWJBs5BTJoTzt8V9","BulletBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletBase=void 0;var a=e("../../../Model/GameModel"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._dmgRandRange=new cc.Vec2(-.15,.15),t._game=a.GameModel.inst,t._arg=null,t._target=null,t._type=-1,t._attrs=null,t._weapon=null,t._callback=null,t._damage=0,t._crit=0,t._critDamage=0,t}return i(t,e),t.prototype.reuse=function(){},t.prototype.unuse=function(){},t.prototype.fire=function(e,t){this._arg=e,this._target=e.target,this._type=e.type,this._attrs=e.attrs,this._weapon=e.weapon,this._callback=t,this._damage=this._weapon.getDamage(this._type)*this._game.player.atk,this._crit=this._weapon.getCrit(),this._critDamage=this._weapon.getCritDamage()},t.prototype.getDamage=function(){var e=cc.math.randomRange(this._dmgRandRange.x,this._dmgRandRange.y),t=this._damage*(1+e),o=Math.random()<this._crit;return o&&(t*=this._critDamage),{damage:t=Math.round(t),crit:o}},r([c],t)}(cc.Component));o.BulletBase=l,cc._RF.pop()},{"../../../Model/GameModel":"GameModel"}],BulletDrawBase:[function(e,t,o){"use strict";cc._RF.push(t,"c13fbhiklFKUaQgRNadZLiT","BulletDrawBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletDrawBase=void 0;var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphics=null,t._width=20,t._color=cc.color(0,0,0),t._tempDrawPointsAll=null,t._tempDrawColorsAll=null,t}return i(t,e),t.prototype.setDraw=function(e,t){this._tempDrawPointsAll!=e&&this._tempDrawColorsAll!=t&&(this._tempDrawPointsAll=e,this._tempDrawColorsAll=t,this.draw())},t.prototype.draw=function(){if(null!=this.graphics){var e=this.graphics,t=this._tempDrawPointsAll.concat();for(var o in t){var n=t[o],i=this._tempDrawColorsAll[o];this._color=cc.color(i.x,i.y,i.z);for(var r=[],a=0,s=n;a<s.length;a++){var c=s[a];r.push({x:c.x,y:c.y});var l=r.length;if(l<=1)e.circle(c.x,c.y,this._width/2),e.fill();else{var p=r[l-2],u=r[l-1];e.moveTo(p.x,p.y),e.lineTo(u.x,u.y),e.lineWidth=this._width,e.lineCap=cc.Graphics.LineCap.ROUND,e.lineJoin=cc.Graphics.LineJoin.ROUND,e.strokeColor=this._color,e.stroke()}}}}},r([l(cc.Graphics)],t.prototype,"graphics",void 0),r([c],t)}(a.BulletBase);o.BulletDrawBase=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],BytedanceSDK:[function(e,t,o){"use strict";cc._RF.push(t,"e89a4sbLcZMeoGqH4ApMOIe","BytedanceSDK");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Controller/AdMgr"),a=e("../../Controller/TimeMgr"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._adUnitId="hqi4870rap91c2a213",t._rewarededVideoAd=null,t._loading=!1,t._interval=0,t._name="",t}return i(t,e),t.prototype.gameInit=function(){tt.login({force:!0,success:function(e){console.log("login \u8c03\u7528\u6210\u529f"+e.code+" "+e.anonymousCode)},fail:function(){console.log("login \u8c03\u7528\u5931\u8d25")}})},t.prototype.gameStart=function(){},t.prototype.loadAd=function(){var e=this;if(null==this._rewarededVideoAd&&!this._loading){var t=a.default.inst.now();if(!(t-this._interval<1e3)){this._interval=t,this._loading=!0,this.logEvent("ohayoo_game_request",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:this._adUnitId});var o=tt.createRewardedVideoAd({adUnitId:this._adUnitId});o.onLoad(function(){e._loading=!0,e._rewarededVideoAd=o,e.logEvent("ohayoo_game_send",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:e._adUnitId,ad_code:"2000"})}),o.onError(function(t){e._loading=!1,e._rewarededVideoAd=null,r.default.inst._onAdClose(),t.errCode,e.logEvent("ohayoo_game_send",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:e._adUnitId,ad_code:t.errCode})}),o.onClose(function(t){e._rewarededVideoAd=null,t.isEnded&&r.default.inst._onAdComplete(),r.default.inst._onAdClose(),e.loadAd(),e.logEvent("ohayoo_game_show_end",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:e._adUnitId,ad_position:e._name,result:"\u6210\u529f"})}),o.load()}}},t.prototype.showAd=function(e,t){return!this._loading&&(null==this._rewarededVideoAd?(this.loadAd(),!1):(this._name=t,this.logEvent("ohayoo_game_button_click",{ad_type:"\u6fc0\u52b1\u89c6\u9891",rit_id:this._adUnitId,ad_position:this._name}),this._rewarededVideoAd.show(),!0))},t.prototype.logEvent=function(e,t){tt.reportAnalytics(e,t)},t.prototype.now=function(){return tt.getPerformance().now()},t}(e("../Utils/Singleton").Singleton());o.default=s,cc._RF.pop()},{"../../Controller/AdMgr":"AdMgr","../../Controller/TimeMgr":"TimeMgr","../Utils/Singleton":"Singleton"}],ComBulletBanyue:[function(e,t,o){"use strict";cc._RF.push(t,"ce3cd/yAPZAP4ryFuTo9aiL","ComBulletBanyue");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radian=0,t._moveSpeed=0,t._upSpeed=0,t._lifeStamp=0,t._lifeTime=0,t._repelSpeed=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed)},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._target.position;n.y+=40,this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(),this._radian=t.radian,this._moveSpeed=this._weapon.getMoveSpeed(),this._upSpeed=this._attrs.upSpeed,this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._repelSpeed=this._attrs.repelSpeed,this.node.angle=cc.misc.radiansToDegrees(this._radian),this._weapon.getSenior()&&(this._lifeTime*=2)},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.position});else{var t=cc.math.lerp(this._moveSpeed,this._upSpeed,this._lifeStamp/this._lifeTime)*e,o=this._radian,n=Math.cos(o)*t,i=Math.sin(o)*t;this.node.x+=n,this.node.y+=i}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletBishou:[function(e,t,o){"use strict";cc._RF.push(t,"fed86Nit+1LD6gtYefjh2uB","ComBulletBishou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Model/GameModel"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.motionStreak=null,t._rBody=null,t._collider=null,t._delayTime=0,t._offsetAngle=0,t._offsetSpeed=0,t._velocity=cc.v2(),t._direct=cc.v2(),t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.position),this.motionStreak.node.setSiblingIndex(0)},t.prototype.onDisable=function(){this.motionStreak.node.removeFromParent()},t.prototype.onDestroy=function(){this.motionStreak.node.destroy()},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){if(e.prototype.fire.call(this,t,o),this.node.position.equals(cc.Vec3.ZERO)){var n=this._game.player.node.position;this.node.setPosition(n)}this.node.angle=0,this.node.scale=this._attrs.aoeRange,this._velocity=cc.v2(1,0).rotateSelf(cc.math.randomRangeInt(0,360)),this._velocity.multiplyScalar(this._attrs.moveSpeed*(1+this._offsetSpeed)),this._offsetAngle=.5*Math.PI*(Math.random()>.5?1:-1)},t.prototype.update=function(e){if(!this._game.isPause)if(this.node.x+=this._velocity.x*e,this.node.y+=this._velocity.y*e,this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y,this.icon.node.angle-=1/this._attrs.angularSpeed*360*e,this._delayTime>0)this._delayTime-=e;else{0!=this._offsetAngle&&(this._offsetAngle-=.5*this._offsetAngle*e),0!=this._offsetSpeed&&(this._offsetSpeed-=.5*this._offsetSpeed*e),null!=this._target&&null!=this._target.parent||(this._target=a.GameModel.inst.findRandMonster(),this._offsetAngle=.5*Math.PI*(Math.random()>.5?1:-1),this._offsetSpeed=-.5,this._delayTime=1);var t,o=this.node.position;if(t=null!=this._target?this._target.position:this._game.player.node.position,cc.Vec2.subtract(this._direct,t,o),this._direct.len()<=50)this._delayTime=1,this._target=null;else{var n=Math.atan2(this._direct.y,this._direct.x)+this._offsetAngle,i=this._attrs.moveSpeed*(1+this._offsetSpeed);this.node.angle=cc.math.toDegree(n),this._velocity.x=Math.cos(n)*i,this._velocity.y=Math.sin(n)*i}}},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([p(cc.MotionStreak)],t.prototype,"motionStreak",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Model/GameModel":"GameModel","./BulletBase":"BulletBase"}],ComBulletChongfeng:[function(e,t,o){"use strict";cc._RF.push(t,"322c6zEXtJNhIHXHI8IBGTd","ComBulletChongfeng");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._monster=null,t._rBody=null,t._collider=null,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this._monster.node.pauseAllActions()},t.prototype.resume=function(){this._monster.node.resumeAllActions()},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),this._monster=t.monster,this._collider.tag=this._monster.atk*this._attrs.damage;var i=this._monster.spine.setAnimation(0,"attack2",!1);this._monster.spine.setTrackCompleteListener(i,function(){n._monster.spine.setAnimation(0,"run",!0)}),this.node.setParent(this._monster.node),this.node.setPosition(cc.Vec2.ZERO);for(var r=t.radian,a=this._attrs.duration,s=this._attrs.moveSpeed,c=Math.cos(r)*s*a,l=Math.sin(r)*s*a,p=this._monster.node.position,u=p.clone().addSelf(cc.v3(c,l)),d=this._attrs.delay,h=this._attrs.hitCount,f=this._monster.node.scaleX,_=cc.tween(this._monster.node),y=0;y<h;y++)_.to(d,{scaleX:y%2==0?f:-f}),_.to(a,{position:y%2==0?u:p});_.call(function(){n._monster.spine.setAnimation(0,"run",!0),n._monster.node.emit("resumeMove"),o()}),_.start()},t.prototype.update=function(){if(this._monster.hp<0)return cc.Tween.stopAllByTarget(this._monster.node),void this._callback();this.node.setPosition(cc.Vec2.ZERO)},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletChushouZ2:[function(e,t,o){"use strict";cc._RF.push(t,"96e3aCj69NMg593/KUrPOM4","ComBulletChushouZ2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._hitMonsterList=[],t._doubleScale=!1,t}return i(t,e),t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o);var i=t.pos,r=t.doubleScale;this.node.setPosition(i.x,i.y),this.node.scale=this._attrs.aoeRange,r&&(this.node.scale*=2),this._doubleScale=r,this._hitMonsterList.length=0;var a=t.direct;this.node.angle=45+45*-a,this.node.opacity=255;var s=this._attrs.duration;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).delay(.1).call(function(){n._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:n.getDamage()})})}).delay(1*s/4).to(2*s/4,{opacity:0},{easing:"smooth"}).call(function(){n._callback()}).start()},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletChushouZ:[function(e,t,o){"use strict";cc._RF.push(t,"5b1becys6FPUI92lNyG2fHn","ComBulletChushouZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Audio/AudioMgr"),c=e("../../../Framework/Event/EventMgr"),l=e("./BulletBase"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._rBody=null,t._collider=null,t._hitMonsterList=[],t._hitCallback=null,t._doubleScale=!1,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){c.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){c.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions(),this.spine.timeScale=0},t.prototype.resume=function(){this.node.resumeAllActions(),this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node)},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){var n=this;s.AudioMgr.inst.playEffectByName("chushouOut"),e.prototype.fire.call(this,t,o);var i=t.pos,r=t.doubleScale;this.node.setPosition(i.x,i.y),this.node.scale=this._attrs.aoeRange,r&&(this.node.scale*=2),this._doubleScale=r,this._collider.enabled=!0,this._hitMonsterList.length=0,this._hitCallback=t.hitCallback;var a=cc.math.randomRangeInt(0,8);this.spine.setAnimation(0,"idle",!1),cc.tween(this.node).delay(.2).call(function(){n._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:n.getDamage()})}),n._collider.enabled=!1}).delay(.33).call(function(){var e;switch(a){case 0:e="attack1",n.spine.node.scaleX=1;break;case 1:e="attack2",n.spine.node.scaleX=1;break;case 2:e="attack3",n.spine.node.scaleX=1;break;case 3:e="attack4",n.spine.node.scaleX=1;break;case 4:e="attack3",n.spine.node.scaleX=-1;break;case 5:e="attack2",n.spine.node.scaleX=-1;break;case 6:e="attack1",n.spine.node.scaleX=-1;break;case 7:e="attack5",n.spine.node.scaleX=1}s.AudioMgr.inst.playEffectByName("chushouHit"),n.spine.setAnimation(0,e,!1),cc.tween(n.node).delay(.8).call(function(){n._hitCallback({pos:n.node.position,direct:a,doubleScale:n._doubleScale})}).delay(2.2).call(function(){n._callback()}).start()}).start()},r([d(sp.Skeleton)],t.prototype,"spine",void 0),r([u],t)}(l.BulletBase);o.default=h,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletChushou:[function(e,t,o){"use strict";cc._RF.push(t,"9e581NyZl5D87R7FDth6KrF","ComBulletChushou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._doubleScale=!1,t}return i(t,e),t.prototype.onBeginContact=function(){this._lifeStamp=this._lifeTime},t.prototype.fire=function(t,o){var n;if(e.prototype.fire.call(this,t,o),null!=this._target&&null!=this._target.parent){var i=this._game.player.node.position,r=this._target.position;n=cc.Vec2.subtract(cc.v2(),r,i)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));var a=t.doubleScale,s=Math.atan2(n.y,n.x);this.node.setPosition(this._game.player.node.position),this.node.scale=this._attrs.aoeRange,this.node.angle=cc.math.toDegree(s),a&&(this.node.scale*=2),this._doubleScale=a,this._lifeStamp=0,this._lifeTime=this._attrs.duration+.1},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>this._lifeTime){var t=this.node.getPosition();this._callback({pos:t,doubleScale:this._doubleScale})}else{var o=this._attrs.moveSpeed,n=this.node.angle,i=o*e,r=cc.math.toRadian(n),a=Math.cos(r)*i,s=Math.sin(r)*i;this.node.x+=a,this.node.y+=s}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletCommonPet:[function(e,t,o){"use strict";cc._RF.push(t,"720823VxAZOAo3TdVoRyY9t","ComBulletCommonPet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Model/GameModel"),s=e("../../../Model/GodPetModel"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rBody=null,t._collider=null,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider)},t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),t.direct.x<0?(this.node.scaleX=-1*Math.abs(this.node.scaleX),this._collider.offset.x=-1*Math.abs(this._collider.offset.x),this._collider.apply()):(this.node.scaleX=Math.abs(this.node.scaleX),this._collider.offset.x=Math.abs(this._collider.offset.x),this._collider.apply()),this.node.setPosition(0,0),this._damage=t.damage,this._lifeStamp=0,this._lifeTime=t.lifeTime,this._effectStamp=0,this._effectInterval=t.effectInterval,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>this._lifeTime?this._callback():(this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:t.getDamage()})}))))},t.prototype.getDamage=function(){var e=a.GameModel.inst.player,t=s.GodPetModel.inst.cur,o=cc.math.randomRange(this._dmgRandRange.x,this._dmgRandRange.y),n=this._damage*e.atk*(1+o),i=Math.random()<t.crit;return i&&(n*=t.critDamage),{damage:n=Math.round(n),crit:i}},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Model/GameModel":"GameModel","../../../Model/GodPetModel":"GodPetModel","./BulletBase":"BulletBase"}],ComBulletCommon:[function(e,t,o){"use strict";cc._RF.push(t,"5b8390HTLRP6r5CurJP0Rp8","ComBulletCommon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/TableMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Model/WeaponModel"),u=e("./BulletBase"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._rBody=null,t._collider=null,t._repelSpeed=0,t._moveSpeed=0,t._velocity=cc.v2(),t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider),this._repelSpeed=Number(a.TABLE.getGlobal("Attack_repelSpeed")),this._moveSpeed=Number(a.TABLE.getGlobal("Attack_moveSpeed"))},t.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_PAUSE,this.pause,this),l.EVENT.on(s.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_PAUSE,this.pause,this),l.EVENT.off(s.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spine.timeScale=0},t.prototype.resume=function(){this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),c.AudioMgr.inst.playEffectByName("atk1");var i=p.WeaponModel.inst.magicAttrs.a_attack_aoerange_p;this.node.scale=i>0?1+i:1;var r=t.direct;r.x<0?this.node.scaleX=-1*Math.abs(this.node.scaleX):this.node.scaleX=Math.abs(this.node.scaleX),this._velocity.x=r.x*this._moveSpeed,this.node.setPosition(this._target.position);var a=this.spine.setAnimation(0,"attack",!1);this.spine.setTrackEventListener(a,function(){n._collider.enabled=!0}),this.spine.setTrackCompleteListener(a,function(){n._callback()}),this._collider.enabled=!1},t.prototype.update=function(e){this._game.isPause||(this.node.x+=this._velocity.x*e)},r([f(sp.Skeleton)],t.prototype,"spine",void 0),r([h],t)}(u.BulletBase);o.default=_,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletDasuan:[function(e,t,o){"use strict";cc._RF.push(t,"e20c6/zsFdKJLoV+oxkFG+p","ComBulletDasuan");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t._offset=cc.v2(),t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node)},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){if(e.prototype.fire.call(this,t,o),!this._weapon.getSenior()){var n=this._game.player.node.children[this._game.player.node.childrenCount-1];this._offset.y=n.y}var i=this._game.player.node.position;this.node.setPosition(i.x,i.y+this._offset.y),this.node.scale=this._weapon.getAoeRange(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;if(!this._game.isPause){var o=this._game.player.node.position;this.node.setPosition(o.x,o.y+this._offset.y),this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:t.getDamage()})}))}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletDianWang:[function(e,t,o){"use strict";cc._RF.push(t,"d4b66b2e+1Bc4Le4fZ7JUQO","ComBulletDianWang");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node)},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){t.type=0,t.attrs=t.weapon.weaponAttrs[t.type],e.prototype.fire.call(this,t,o),this.node.setPosition(this._target.position),this.node.scale=this._weapon.getAoeRange(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>this._lifeTime?this._callback():(this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:t.getDamage()})}))))},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletDici:[function(e,t,o){"use strict";cc._RF.push(t,"93d0d5Gox1I1550f8YbLtAP","ComBulletDici");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t._rBody=null,t._collider=null,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions(),this.ani.pause()},t.prototype.resume=function(){this.node.resumeAllActions(),this.ani.play()},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o);var i=t.monster;this._collider.tag=i.atk*this._attrs.damage;var r=t.pos,a=t.scale;this.node.setPosition(r),this.node.scale=this._attrs.aoeRange*a,this.ani.play(),this.ani.once(cc.Animation.EventType.FINISHED,function(){o()}),this._rBody.active=!1,cc.tween(this.node).delay(.3).call(function(){n._rBody.active=!0}).delay(.1).call(function(){n._rBody.active=!1}).start()},r([u(cc.Animation)],t.prototype,"ani",void 0),r([p],t)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletDraw1Z:[function(e,t,o){"use strict";cc._RF.push(t,"905cdLMLXhG9ajr+NtVlQcR","ComBulletDraw1Z");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.pos;this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(),this._damage=this._weapon.getDamage(this._type)*this._game.player.atk,this._lifeStamp=0,this._lifeTime=.5},t.prototype.update=function(e){this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime&&this._callback())},r([c],t)}(a.BulletDrawBase));o.default=l,cc._RF.pop()},{"./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw1:[function(e,t,o){"use strict";cc._RF.push(t,"1d891v2fwxEv5SkF5A1+LCR","ComBulletDraw1");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Utils/VectorUtil"),s=e("./BulletDrawBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radian=0,t._lifeStamp=0,t._lifeTime=0,t._moveSpeed=0,t}return i(t,e),t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._game.player.node.position,i=this._target.position,r=n.sub(n.sub(i).multiplyScalar(.9));this.node.setPosition(r),this.node.scale=this._weapon.getAoeRange(),this._radian=cc.math.toRadian(-90),this._lifeStamp=0,this._lifeTime=this._attrs.duration,this._moveSpeed=this._attrs.moveSpeed;var s=cc.Vec2.ZERO,c=a.VectorUtil.getSubRay(s,this._radian,this._moveSpeed*this._lifeTime);this.graphics.node.setPosition(c.x,c.y),this.graphics.node.angle=0},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.position});else{var t=this._moveSpeed*e,o=this._radian,n=Math.cos(o)*t,i=Math.sin(o)*t;this.graphics.node.x+=n,this.graphics.node.y+=i}},r([l],t)}(s.BulletDrawBase));o.default=p,cc._RF.pop()},{"../../../Framework/Utils/VectorUtil":"VectorUtil","./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw2:[function(e,t,o){"use strict";cc._RF.push(t,"9c0b75XZ8lCK4tSebZn/HOd","ComBulletDraw2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radian=0,t._moveSpeed=0,t._lifeStamp=0,t._lifeTime=0,t._repelSpeed=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed)},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._target.position;n.y+=40,this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(),this._radian=t.radian,this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._attrs.duration,this._repelSpeed=this._attrs.repelSpeed,this.node.angle=cc.misc.radiansToDegrees(this._radian)},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.position});else{var t=this._moveSpeed*e,o=this._radian,n=Math.cos(o)*t,i=Math.sin(o)*t;this.node.x+=n,this.node.y+=i}},r([c],t)}(a.BulletDrawBase));o.default=l,cc._RF.pop()},{"./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw3Z:[function(e,t,o){"use strict";cc._RF.push(t,"801bbrZcdpN3amLYRQQM5lA","ComBulletDraw3Z");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("./BulletDrawBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t}return i(t,e),t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spine.timeScale=0},t.prototype.resume=function(){this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o);var i=t.pos;this.node.setPosition(i),this.node.scale=this._weapon.getAoeRange();var r=this.spine.setAnimation(0,this.spine.animation,!1);this.spine.setTrackCompleteListener(r,function(){n._callback()})},r([u(sp.Skeleton)],t.prototype,"spine",void 0),r([p],t)}(c.BulletDrawBase);o.default=d,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw3:[function(e,t,o){"use strict";cc._RF.push(t,"60389nVP1lE2r/zDZt3iI0H","ComBulletDraw3");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("./BulletDrawBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t}return i(t,e),t.prototype.onBeginContact=function(){this._lifeStamp=this._lifeTime},t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),this.node.setPosition(this._target.position),this.node.scale=this._weapon.getAoeRange(),this._lifeStamp=0,this._lifeTime=this._attrs.duration,cc.tween(this.node).to(this._lifeTime/6,{scale:.8}).to(this._lifeTime/6,{scale:1}).to(this._lifeTime/6,{scale:.8}).to(this._lifeTime/6,{scale:1}).to(this._lifeTime/6,{scale:.8}).to(this._lifeTime/6,{scale:1}).start()},t.prototype.update=function(e){if(!this._game.isPause)return this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1?(this._lifeStamp=0,void this._callback({pos:this.node.position})):void 0},r([p],t)}(c.BulletDrawBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","./BulletDrawBase":"BulletDrawBase"}],ComBulletFeidaoZ:[function(e,t,o){"use strict";cc._RF.push(t,"2e028ptXGhBGJm474QZdOB8","ComBulletFeidaoZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NpcBase"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._v2=cc.v2(),t._lifeStamp=0,t._lifeTime=0,t}return i(t,e),t.prototype.fire=function(t,o){if(e.prototype.fire.call(this,t,o),null!=this._target&&null!=this._target.parent){var n=this._target.getComponent(a.NpcBase);if(null==n||n.hp<=0)this._callback();else{var i=t.pos,r=cc.v2(this._target.position.x,this._target.position.y+40),s=cc.Vec2.subtract(this._v2,r,i),c=cc.math.toDegree(Math.atan2(s.y,s.x));this.node.setParent(this._target),this.node.setPosition(0,40,0),this.node.scaleX=1/this._target.scaleX,this.node.scaleY=1/this._target.scaleY,this._target.scaleX<0?this.node.angle=-c:this.node.angle=c,this._lifeStamp=0,this._lifeTime=this._attrs.duration}}else this._callback()},t.prototype.update=function(e){this._game.isPause||(null!=this._target&&null!=this._target.parent?(this._lifeStamp+=e,this._lifeStamp>this._lifeTime&&this._callback()):this._callback())},r([l],t)}(s.BulletBase));o.default=p,cc._RF.pop()},{"../../NpcBase":"NpcBase","./BulletBase":"BulletBase"}],ComBulletFeidao:[function(e,t,o){"use strict";cc._RF.push(t,"ee2dfiQn75DsJmo1AqHULiN","ComBulletFeidao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("../../../Model/GameModel"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.motionStreak=null,t._rBody=null,t._collider=null,t._radian=0,t._moveSpeed=0,t._hitCount=0,t._lifeStamp=0,t._lifeTime=0,t._v2=cc.v2(),t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.position),this.motionStreak.node.setSiblingIndex(0)},t.prototype.onDisable=function(){this.motionStreak.node.removeFromParent()},t.prototype.onDestroy=function(){this.motionStreak.node.destroy()},t.prototype.onBeginContact=function(e,t,o){this._target=o.node,this.hit(o.node)},t.prototype.fire=function(t,o){var n;if(e.prototype.fire.call(this,t,o),a.AudioMgr.inst.playEffectByName("feidao"),null!=this._target&&null!=this._target.parent){var i=this._game.player.node.position,r=cc.v2(this._target.x,this._target.y+40);n=cc.Vec2.subtract(this._v2,r,i)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));this._radian=Math.atan2(n.y,n.x),this.node.setPosition(this._game.player.node.position),this.node.scale=this._attrs.aoeRange,this.node.angle=cc.math.toDegree(this._radian),this._moveSpeed=this._attrs.moveSpeed,this._hitCount=this._weapon.getHitCount(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration()},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime)this._callback({pos:this.node.position,target:this._target});else{var t=this._moveSpeed*e,o=this._radian,n=Math.cos(o)*t,i=Math.sin(o)*t;this.node.x+=n,this.node.y+=i,this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y}},t.prototype.hit=function(e){var t=this;this._hitCount--,this._hitCount>0?(this.scheduleOnce(function(){var e;if(t._target=s.GameModel.inst.findRandMonster(),null!=t._target&&null!=t._target.parent){var o=t._game.player.node.position,n=cc.v2(t._target.x,t._target.y+40);e=cc.Vec2.subtract(t._v2,n,o)}else e=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));t._radian=Math.atan2(e.y,e.x),t.node.angle=cc.math.toDegree(t._radian),t._rBody.syncRotation(!1)}),this._lifeStamp=0):this._lifeStamp=this._lifeTime,e.emit("hit",{damage:this.getDamage()})},r([u(cc.MotionStreak)],t.prototype,"motionStreak",void 0),r([p],t)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Model/GameModel":"GameModel","./BulletBase":"BulletBase"}],ComBulletFeijian:[function(e,t,o){"use strict";cc._RF.push(t,"ed84dFG/eJO4ZzzbLf1yFdu","ComBulletFeijian");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Weapon/Bullet/BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rBody=null,t._collider=null,t._velocity=cc.v2(),t._lifeStamp=0,t._lifeTime=0,t._moveSpeed=0,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.monster;this._collider.tag=n.atk*this._attrs.damage;var i=n.node.position;this.node.setPosition(i);var r=t.radian;this.node.angle=cc.math.toDegree(r),this.node.scale=this._attrs.aoeRange,this._moveSpeed=this._attrs.moveSpeed;var a=Math.cos(r)*this._moveSpeed,s=Math.sin(r)*this._moveSpeed;this._velocity=cc.v2(a,s),this._lifeStamp=0,this._lifeTime=this._attrs.duration},t.prototype.update=function(e){this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1&&this._callback({pos:this.node.position}),this.node.x+=this._velocity.x*e,this.node.y+=this._velocity.y*e)},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletFreezeAll:[function(e,t,o){"use strict";cc._RF.push(t,"5a6b1RsjW5MZ7+iyuIR4rnM","ComBulletFreezeAll");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._hitMonsterList=[],t._stopTime=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node)},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),this.node.setPosition(this._game.player.node.position),this._hitMonsterList.length=0,this._stopTime=this._attrs.stopTime,this.scheduleOnce(function(){n._hitMonsterList.forEach(function(e){return e.emit("stop",n._stopTime)}),n._callback()})},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletGunshiZ:[function(e,t,o){"use strict";cc._RF.push(t,"083d0XlUJNKNbzwm2BwK84Q","ComBulletGunshiZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._rBody=null,t._collider=null,t._effectStamp=0,t._effectInterval=1,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spine.timeScale=0},t.prototype.resume=function(){this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){var n=this;t.type=0,t.attrs=t.weapon.weaponAttrs[t.type],e.prototype.fire.call(this,t,o);var i=t.pos;this.node.setPosition(i.x+100*Math.random()-50,i.y+100*Math.random()-50),this.node.scale=this._weapon.getAoeRange(this._type),this.spine.setAnimation(0,"idle2",!1),this.spine.setCompleteListener(function(){n._callback()}),this._collider.enabled=!1},t.prototype.update=function(e){this._game.isPause||(this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._collider.enabled=!0))},r([u(sp.Skeleton)],t.prototype,"spine",void 0),r([p],t)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletGunshi:[function(e,t,o){"use strict";cc._RF.push(t,"a7e21aiMdNK9KjELLnu0GsT","ComBulletGunshi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/StaticData"),s=e("../../../Model/WeaponModel"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t._stopTime=0,t._moveSpeed=0,t._hitCallback=null,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){-1==this._hitMonsterList.indexOf(o.node)&&(this._hitMonsterList.push(o.node),this._stopTime>0&&o.node.emit("stop",this._stopTime),o.node.emit("hit",{damage:this.getDamage()}))},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.direct,i=cc.v2(),r=0,c=0;0==n?(i.x=cc.math.randomRange(a.StaticData.minX,a.StaticData.maxX),i.y=this._attrs.upPos,r=this._attrs.upSpeed,c=2*Math.abs(i.y)/r,this.node.angle=-90):1==n&&(i.x=this._attrs.rPos,i.y=cc.math.randomRange(a.StaticData.minY+200,a.StaticData.maxY-200),r=this._attrs.rSpeed,c=2*Math.abs(i.x)/r,this.node.angle=180),i.x+=this._game.player.node.x,i.y+=this._game.player.node.y,this.node.setPosition(i),this.node.scale=this._weapon.getAoeRange(),this._stopTime=this._attrs.stopTime+(s.WeaponModel.inst.magicAttrs.sp_gunshi||0),this._lifeStamp=0,this._lifeTime=c,this._effectStamp=Math.random()*this._attrs.effectInterval,this._effectInterval=this._attrs.effectInterval,this._moveSpeed=r,this._hitCallback=t.hitCallback,this._hitMonsterList.length=0},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>this._lifeTime)this._callback();else{this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitCallback({pos:this.node.position}));var t=this._moveSpeed,o=this.node.angle,n=t*e,i=cc.misc.degreesToRadians(o),r=Math.cos(i)*n,a=Math.sin(i)*n;this.node.x+=r,this.node.y+=a}},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/StaticData":"StaticData","../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletHudun:[function(e,t,o){"use strict";cc._RF.push(t,"4ab7cAmEjBBXJPsb6DQpC9n","ComBulletHudun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Model/WeaponModel"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._maxDunCount=0,t._curDunCount=0,t}return i(t,e),t.prototype.onBeginContact=function(){this.setDunAndDo()},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),this._lifeTime=this._attrs.duration+(a.WeaponModel.inst.magicAttrs.a_hudun_duration_v||0),this._maxDunCount=this._curDunCount=this._attrs.hitCount,this._effectInterval=this._attrs.effectInterval,this._game.immune+=this._maxDunCount,this.updateDun()},t.prototype.updateDun=function(){this._curDunCount<=0?this.spine.node.active=!1:(this.spine.node.active=!0,1==this._curDunCount?this.spine.setAnimation(0,"idle1",!0):2==this._curDunCount?this.spine.setAnimation(0,"idle2",!0):3==this._curDunCount&&this.spine.setAnimation(0,"idle3",!0))},t.prototype.addDun=function(){this._curDunCount++,this._game.immune++,this.updateDun()},t.prototype.subDun=function(){this._curDunCount--,this._game.immune--,this.updateDun()},t.prototype.setDunAndDo=function(){return 0==this._curDunCount?this._curDunCount:(0==this._lifeStamp&&(this._lifeStamp=this._lifeTime,this._effectStamp=0),this._curDunCount)},t.prototype.update=function(e){this._game.isPause||(this.node.setPosition(this._game.player.node.position),0==this._lifeStamp?this._curDunCount<this._maxDunCount&&(this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this.addDun())):(this._lifeStamp-=e,this._lifeStamp<=0&&(this.subDun(),this._lifeStamp=0)))},r([p(sp.Skeleton)],t.prototype,"spine",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletJiantaZ:[function(e,t,o){"use strict";cc._RF.push(t,"47b01tj1a5IxYoRuMdQcDY6","ComBulletJiantaZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._moveSpeed=0,t._v3=cc.v3(),t._targetPos=null,t}return i(t,e),t.prototype.fire=function(t,o){t.type=0,t.attrs=t.weapon.weaponAttrs[t.type],e.prototype.fire.call(this,t,o);var n=t.pos;this.node.setPosition(n),this._moveSpeed=this._weapon.weaponAttrs[0].moveSpeed},t.prototype.update=function(e){if(!this._game.isPause){var t,o=this.node.position;null!=this._target.parent?(t=this._target.position,this._targetPos=t):t=this._targetPos;var n=cc.Vec3.subtract(this._v3,t,o),i=Math.atan2(n.y,n.x),r=this._moveSpeed*e,a=Math.cos(i)*r,s=Math.sin(i)*r;this.node.x+=a,this.node.y+=s,this.node.angle=cc.math.toDegree(i),cc.Vec2.distance(o,t)<=50&&(null!=this._target.parent&&this._target.emit("hit",{damage:this.getDamage()}),this._callback({pos:o}))}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletJianta:[function(e,t,o){"use strict";cc._RF.push(t,"f78a08T1bJP3J5i3gBtUmcm","ComBulletJianta");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Model/GameModel"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitCount=0,t._hitCallback=null,t._distance=0,t._hp=0,t._hpMax=0,t._v3=cc.v3(),t}return i(t,e),t.prototype.onEnable=function(){this.node.on("update",this.onUpdate,this)},t.prototype.onDisable=function(){this.node.off("update",this.onUpdate,this)},t.prototype.onHit=function(e){e<=0||(this._hp-=e,this._hp<=0&&(this._lifeStamp=this._lifeTime))},t.prototype.onUpdate=function(){this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitCount=this._attrs.hitCount,this._distance=this._attrs.distance,this._hp=this._hpMax=this._attrs.hp},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._target.getPosition();n.x+=50*Math.random()-25,n.y+=50*Math.random()-25,this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitCount=this._attrs.hitCount,this._hitCallback=t.hitCallback,this._distance=this._attrs.distance,this._hp=this._hpMax=this._attrs.hp,this.ani.play("jianta1")},t.prototype.update=function(e){var t=this;if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>this._lifeTime)this._callback();else if(this._effectStamp+=e,this._effectStamp>=this._effectInterval){this._effectStamp-=this._effectInterval;var o=a.GameModel.inst.findDistanceNearMonsters(this._hitCount,this._distance,this.node.position);if(0==o.length)return;var n=this.node.position;n.y+=60;var i=o[0].position,r=n;cc.Vec3.subtract(this._v3,r,i);var s,c=Math.atan2(this._v3.y,this._v3.x);s=c>.7853981633974483&&c<2.356194490192345?"jianta4":c<-.7853981633974483&&c>-2.356194490192345?"jianta3":"jianta2",Math.abs(c)>1.5707963267948966?this.node.scaleX=Math.abs(this.node.scaleX):this.node.scaleX=-1*Math.abs(this.node.scaleX),this.ani.play(s),this.ani.once(cc.Animation.EventType.FINISHED,function(){t.ani.play("jianta1")}),this.scheduleOnce(function(){for(var e=t._hitCount,i=0;i<e;i++){var r=o[i];null!=r&&null!=r.parent&&t._hitCallback({target:r,pos:n})}},.16)}},r([p(cc.Animation)],t.prototype,"ani",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Model/GameModel":"GameModel","./BulletBase":"BulletBase"}],ComBulletJiguang:[function(e,t,o){"use strict";cc._RF.push(t,"6a14fdvR2RH8KrKaQV/Alf/","ComBulletJiguang");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("../../../Model/WeaponModel"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t._angularSpeed=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){var n;if(e.prototype.fire.call(this,t,o),a.AudioMgr.inst.playEffectByName("jiguang"),null!=this._target&&null!=this._target.parent){var i=this._game.player.node.position,r=cc.v2(this._target.x,this._target.y+40);n=cc.Vec2.subtract(cc.v2(),r,i)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));var c=Math.atan2(n.y,n.x);this.node.angle=cc.math.toDegree(c),this.node.setPosition(this._game.player.node.position),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._angularSpeed=this._attrs.angularSpeed+(s.WeaponModel.inst.magicAttrs.sp_jiguang||0),this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime?this._callback():(this.node.setPosition(this._game.player.node.position),this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:t.getDamage()})})),this._angularSpeed>0&&(this.node.angle-=1/this._angularSpeed*360*e)))},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletLeidian:[function(e,t,o){"use strict";cc._RF.push(t,"277a46QsJtEQ4hzdZ+jkVa6","ComBulletLeidian");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t}return i(t,e),t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),a.AudioMgr.inst.playEffectByName("leidian"),this.node.setPosition(this._target.position),this.spine.setAnimation(0,"idle",!1),this.spine.setCompleteListener(function(){n._callback()}),this.scheduleOnce(function(){n._target.emit("hit",{damage:n.getDamage()})},.2)},r([p(sp.Skeleton)],t.prototype,"spine",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","./BulletBase":"BulletBase"}],ComBulletLiandao:[function(e,t,o){"use strict";cc._RF.push(t,"58a026wE8FILq2Mh+22IdNH","ComBulletLiandao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Weapon/Bullet/BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.motionStreak=null,t._radian=0,t._moveSpeed=0,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._delayStamp=0,t._delay=0,t._hitMonsterList=[],t._v3=cc.v3(),t._rBody=null,t._collider=null,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.position),this.motionStreak.node.setSiblingIndex(0)},t.prototype.onDisable=function(){this.motionStreak.node.removeFromParent()},t.prototype.onDestroy=function(){this.motionStreak.node.destroy()},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.monster;this._collider.tag=n.atk*this._attrs.damage,this._target=n.node;var i=n.node.position;this.node.setPosition(i),this.node.scale=this._attrs.aoeRange,this._radian=t.radian,this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._delayStamp=0,this._delay=this._attrs.delay,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;if(!this._game.isPause){if(this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y,this._lifeStamp+=e,this._lifeStamp<this._lifeTime){var o=this._moveSpeed*e,n=this._radian,i=Math.cos(n)*o,r=Math.sin(n)*o;return this.node.x+=i,void(this.node.y+=r)}if(this._delayStamp+=e,this._delayStamp>this._delay){var a=this.node.position,s=this._target.position,c=cc.Vec3.subtract(this._v3,s,a);return n=Math.atan2(c.y,c.x),o=this._moveSpeed*e,i=Math.cos(n)*o,r=Math.sin(n)*o,this.node.x+=i,this.node.y+=r,void(cc.Vec2.distance(a,s)<=50&&this._callback())}this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:t.getDamage()})}))}},r([l(cc.MotionStreak)],t.prototype,"motionStreak",void 0),r([c],t)}(a.BulletBase);o.default=p,cc._RF.pop()},{"../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletLiuxingchuiSenior:[function(e,t,o){"use strict";cc._RF.push(t,"47834NUZDFF1qSi/I3d2Lv6","ComBulletLiuxingchuiSenior");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rBody=null,t._collider=null,t._angle=0,t._effectSpeed=1,t._effectStamp=0,t._angularSpeed=0,t._startDistance=0,t._endDistance=0,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCircleCollider)},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.startAngle,i=this._weapon.getAoeRange();this._angle=n,this.node.scale=i,this._collider.radius=70*i,this._collider.apply(),this._angularSpeed=this._attrs.angularSpeed,this._startDistance=1.2*this._attrs.distance,this._endDistance=this._weapon.getSkillInfo()[0][0].distance/2,this._effectStamp=0,this._effectSpeed=1,this._angularSpeed<1&&(this._angularSpeed=1)},t.prototype.update=function(e){if(!this._game.isPause){this._angle-=1/this._angularSpeed*360*e,this._effectStamp+=e*this._effectSpeed,this._effectStamp>1?(this._effectStamp=1,this._effectSpeed*=-1):this._effectStamp<0&&(this._effectStamp=0,this._effectSpeed*=-1);var t=cc.math.lerp(this._startDistance,this._endDistance,this._effectStamp),o=cc.math.toRadian(this._angle),n=Math.cos(o)*t,i=Math.sin(o)*t;this.node.setPosition(n,i,0)}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletLiuxingchui:[function(e,t,o){"use strict";cc._RF.push(t,"46e7b4l6mlIFZ9oCAKLxJXL","ComBulletLiuxingchui");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rBody=null,t._collider=null,t._angle=0,t._effectSpeed=1,t._effectStamp=0,t._angularSpeed=0,t._startDistance=0,t._endDistance=0,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCircleCollider)},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._weapon.getAoeRange();this.node.setScale(n),this._collider.radius=70*n,this._collider.apply(),this._angle=t.startAngle,this._angularSpeed=this._attrs.angularSpeed,this._startDistance=this._attrs.distance,this._endDistance=this._attrs.distance,this._effectStamp=0,this._effectSpeed=1,this._angularSpeed<1&&(this._angularSpeed=1)},t.prototype.update=function(e){if(!this._game.isPause){this._angle-=1/this._angularSpeed*360*e,this._effectStamp+=e*this._effectSpeed,this._effectStamp>1?(this._effectStamp=1,this._effectSpeed*=-1):this._effectStamp<0&&(this._effectStamp=0,this._effectSpeed*=-1);var t=cc.math.lerp(this._startDistance,this._endDistance,this._effectStamp),o=cc.math.toRadian(this._angle),n=Math.cos(o)*t,i=Math.sin(o)*t;this.node.setPosition(n,i,0),this._rBody.syncPosition(!1)}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletMofadanZ:[function(e,t,o){"use strict";cc._RF.push(t,"56a96A+rcFM67aN1UgCXeIk","ComBulletMofadanZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t._rBody=null,t._collider=null,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},t.prototype.fire=function(t,o){t.type=0,t.attrs=t.weapon.weaponAttrs[t.type],e.prototype.fire.call(this,t,o);var n=t.monster;this._collider.tag=n.atk*this._attrs.damage;var i=t.pos;this.node.setPosition(i),this.node.scale=this._attrs.aoeRange,this.ani.play(),this.ani.once(cc.Animation.EventType.FINISHED,function(){o()})},r([u(cc.Animation)],t.prototype,"ani",void 0),r([p],t)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletMofadan:[function(e,t,o){"use strict";cc._RF.push(t,"098c36KxqFBaLUWsyVQ3q2I","ComBulletMofadan");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t}return i(t,e),t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.pos;t.aoeRange,this.node.setPosition(n),this.node.scale=this._attrs.aoeRange,this._lifeStamp=0,this._lifeTime=this._attrs.warnInterval},t.prototype.update=function(e){this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1&&this._callback({pos:this.node.position}))},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletMozhuaZ:[function(e,t,o){"use strict";cc._RF.push(t,"d6894u3TXRIWru5Pq2TqJF4","ComBulletMozhuaZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.pos;this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(this._type),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(this._type),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1?this._callback():(this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:t.getDamage()})}))))},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletMozhua:[function(e,t,o){"use strict";cc._RF.push(t,"91b1fhOdIFL97bIlqDQNAoW","ComBulletMozhua");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Audio/AudioMgr"),c=e("../../../Framework/Event/EventMgr"),l=e("../../../Model/WeaponModel"),p=e("./BulletBase"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.motionStreak=null,t._rBody=null,t._collider=null,t._lifeStamp=0,t._lifeTime=0,t._angularSpeed=0,t._v3=cc.v3(),t._targetPos=null,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.position),this.motionStreak.node.setSiblingIndex(0),c.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){this.motionStreak.node.removeFromParent(),c.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDestroy=function(){this.motionStreak.node.destroy()},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),s.AudioMgr.inst.playEffectByName("mozhua"),this.node.setPosition(this._game.player.node.position);var n=this.node.position,i=this._target.position,r=cc.Vec3.subtract(cc.v3(),n,i),a=Math.atan2(r.y,r.x);this.node.angle=cc.math.toDegree(a);var c=l.WeaponModel.inst.magicAttrs.sp_mozhua||0;this._collider.enabled=c>0,this._attrs.damage=c,this._angularSpeed=Math.random()>.5?1:-1,this._targetPos=this._target.getPosition(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration()},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.position});else{var t=this.node.position,o=this._targetPos,n=cc.Vec3.subtract(this._v3,o,t),i=Math.atan2(n.y,n.x)-cc.math.lerp(this._angularSpeed,0,this._lifeStamp/(this._lifeTime/2)),r=this._attrs.moveSpeed*e,a=Math.cos(i)*r,s=Math.sin(i)*r;this.node.x+=a,this.node.y+=s,this.node.angle=cc.math.toDegree(i),this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y,this.motionStreak.node.angle=this.node.angle,cc.Vec2.distance(t,o)<=50&&this._callback({pos:t})}},r([h(cc.MotionStreak)],t.prototype,"motionStreak",void 0),r([d],t)}(p.BulletBase);o.default=f,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletQiang:[function(e,t,o){"use strict";cc._RF.push(t,"180e2i+8XZOxIYZQI3w8g8m","ComBulletQiang");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._hp=0,t._hpMax=0,t._contact_monster_atk=0,t._touchStamp=0,t._touchDelta=.1,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){var n=o.tag;this.onHit(n),this._contact_monster_atk+=n},t.prototype.onEndContact=function(e,t,o){var n=o.tag;this._contact_monster_atk-=n},t.prototype.onHit=function(e){e<=0||(this._hp-=e,this._hp<=0&&(this._lifeStamp=this._lifeTime))},t.prototype.fire=function(t,o){t.type=0,t.attrs=t.weapon.weaponAttrs[t.type],e.prototype.fire.call(this,t,o);var n=t.pos;this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._hp=this._hpMax=this._attrs.hp,this._contact_monster_atk=0},t.prototype.update=function(e){this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>this._lifeTime?this._callback():(this._touchStamp+=e,this._touchStamp>=this._touchDelta&&(this._touchStamp-=this._touchDelta,this._contact_monster_atk>0&&this.onHit(this._contact_monster_atk))))},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletQuanZ:[function(e,t,o){"use strict";cc._RF.push(t,"88e718hBV9L+qFeIZ7SHgQ3","ComBulletQuanZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._radians=0,t._lifeStamp=0,t._lifeTime=0,t._moveSpeed=0,t._rBody=null,t._collider=null,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){var n,i=this;if(e.prototype.fire.call(this,t,o),null!=this._target&&null!=this._target.parent){var r=this._game.player.node.position,a=cc.v2(this._target.x,this._target.y+40);n=cc.Vec2.subtract(cc.v2(),a,r)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));var s=Math.atan2(n.y,n.x);this.node.angle=cc.math.toDegree(s)+cc.math.randomRange(-25,25),this.node.setPosition(this._game.player.node.position),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._collider.enabled=!0,this.spine.setAnimation(0,this.spine.defaultAnimation,!1),this.spine.setCompleteListener(function(){i._callback()}),this.spine.setEventListener(function(){i._collider.enabled=!0}),this._collider.enabled=!1},r([l(sp.Skeleton)],t.prototype,"spine",void 0),r([c],t)}(a.BulletBase);o.default=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletQuan:[function(e,t,o){"use strict";cc._RF.push(t,"c3a38eYk15GYLQOFo6R2UqB","ComBulletQuan");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._rBody=null,t._collider=null,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),a.AudioMgr.inst.playEffectByName("quan");var i=this._game.player.node.position,r=this._target.position,s=i.sub(i.sub(r));this.node.setPosition(s),this.node.scale=this._weapon.getAoeRange(),this.spine.setAnimation(0,this.spine.defaultAnimation,!1),this.spine.setCompleteListener(function(){n._callback()}),this.spine.setEventListener(function(){n._collider.enabled=!0}),this._collider.enabled=!1},r([p(sp.Skeleton)],t.prototype,"spine",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","./BulletBase":"BulletBase"}],ComBulletShufu:[function(e,t,o){"use strict";cc._RF.push(t,"49d0a0Gl8RCAa6IBVffDpJ+","ComBulletShufu");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Audio/AudioMgr"),c=e("../../../Framework/Event/EventMgr"),l=e("./BulletBase"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._stopTime=0,t}return i(t,e),t.prototype.onEnable=function(){c.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){c.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spine.timeScale=0},t.prototype.resume=function(){this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){o.node.emit("stop",this._stopTime)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),s.AudioMgr.inst.playEffectByName("ice");var i=t.radian;this.node.angle=cc.math.toDegree(i),this.node.setPosition(0,0);var r=this.spine.setAnimation(0,"idle1",!1);this.spine.setTrackCompleteListener(r,function(){n._callback()}),this._stopTime=this._attrs.stopTime},r([d(sp.Skeleton)],t.prototype,"spine",void 0),r([u],t)}(l.BulletBase);o.default=h,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletTaijilun:[function(e,t,o){"use strict";cc._RF.push(t,"98eec+b6WFPgr2lmQ8UrKYo","ComBulletTaijilun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shadow=null,t._radian=0,t._moveSpeed=0,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._delayStamp=0,t._delay=0,t._hitMonsterList=[],t._v3=cc.v3(),t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.onEnable=function(){this.shadow.setPosition(this.node.position),this.shadow.setSiblingIndex(0)},t.prototype.onDisable=function(){this.shadow.removeFromParent()},t.prototype.onDestroy=function(){this.shadow.destroy()},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),this.shadow.setParent(t.shadow),this._radian=t.radian,this.node.setPosition(this._game.player.node.position),this.node.setScale(this._weapon.getAoeRange()),this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._delayStamp=0,this._delay=this._attrs.delay,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;if(!this._game.isPause){if(this.shadow.x=this.node.x,this.shadow.y=this.node.y,this._lifeStamp+=e,this._lifeStamp<this._lifeTime){var o=this._moveSpeed*e,n=this._radian,i=Math.cos(n)*o,r=Math.sin(n)*o;return this.node.x+=i,void(this.node.y+=r)}if(this._delayStamp+=e,this._delayStamp>this._delay){var a=this.node.position,s=this._game.player.node.position,c=cc.Vec3.subtract(this._v3,s,a);return n=Math.atan2(c.y,c.x),o=this._moveSpeed*e,i=Math.cos(n)*o,r=Math.sin(n)*o,this.node.x+=i,this.node.y+=r,void(cc.Vec2.distance(a,s)<=50&&this._callback())}this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:t.getDamage()})}))}},r([l(cc.Node)],t.prototype,"shadow",void 0),r([c],t)}(a.BulletBase);o.default=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletXialuo:[function(e,t,o){"use strict";cc._RF.push(t,"33909MKYaRIQJOroSp9sf+d","ComBulletXialuo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("../../Weapon/Bullet/BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._monster=null,t._rBody=null,t._collider=null,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),this._monster=t.monster,this._collider.tag=this._monster.atk*this._attrs.damage,this.node.setParent(this._monster.node),this.node.setPosition(cc.Vec2.ZERO);var i=this._monster.getComponent(cc.RigidBody);i.active=!1,this._rBody.active=!1;var r=t.pos;this._monster.node.setPosition(r);var a=this._monster.spine.setAnimation(0,"attack2",!1);this._monster.spine.setTrackCompleteListener(a,function(){n._monster.spine.setAnimation(0,"run",!0),n._monster.node.emit("resumeMove"),o()}),this._monster.spine.setTrackEventListener(a,function(){i.active=!0,n._rBody.active=!0})},t.prototype.update=function(){if(this._monster.hp<0)return cc.Tween.stopAllByTarget(this._monster.node),void this._callback();this.node.setPosition(cc.Vec2.ZERO)},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../Weapon/Bullet/BulletBase":"BulletBase"}],ComBulletXuanfeng:[function(e,t,o){"use strict";cc._RF.push(t,"73d6c0pnFFLh6K/MjClWcVQ","ComBulletXuanfeng");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._hitMonsterList=[],t._lifeStamp=0,t._lifeTime=0,t._radian=0,t._friction=.7,t._moveSpeed=0,t._repelSpeed=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){-1==this._hitMonsterList.indexOf(o.node)&&(this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed))},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._weapon.getAoeRange();this.node.setScale(n),this.node.setPosition(this._game.player.node.position),this._radian=Math.random()*Math.PI*2,this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._attrs.duration,this._repelSpeed=this._attrs.repelSpeed,this._hitMonsterList.length=0},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.position});else{var t=this._radian,o=this._moveSpeed*e,n=Math.cos(t)*o,i=Math.sin(t)*o;this.node.x+=n,this.node.y+=i,this._moveSpeed-=this._friction*this._moveSpeed*e,this._moveSpeed<0&&(this._moveSpeed=0)}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletYunShiZ:[function(e,t,o){"use strict";cc._RF.push(t,"539459kLKVL6o8TRNfiU0na","ComBulletYunShiZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.aniHit=null,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o);var i=t.pos;this.node.setPosition(i),this.node.scale=this._weapon.getAoeRange(this._type),this.ani.play("yunshi3"),this.ani.on(cc.Animation.EventType.FINISHED,function(){n.ani.play("yunshi4")}),this.aniHit.node.active=!0,this.aniHit.play("yunshi2"),this.aniHit.on(cc.Animation.EventType.FINISHED,function(){n.aniHit.node.active=!1}),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(this._type),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;if(!this._game.isPause){if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime)return this._lifeStamp=-cc.macro.REPEAT_FOREVER,void cc.tween(this.ani.node).to(.3,{opacity:0}).call(function(){t.ani.node.opacity=255,t._callback()}).start();this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{damage:t.getDamage()})}))}},r([l(cc.Animation)],t.prototype,"ani",void 0),r([l(cc.Animation)],t.prototype,"aniHit",void 0),r([c],t)}(a.BulletBase);o.default=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletYunShi:[function(e,t,o){"use strict";cc._RF.push(t,"063894SO+JCM51RAjcYQ0e/","ComBulletYunShi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Utils/VectorUtil"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t._radians=0,t._lifeStamp=0,t._lifeTime=0,t._moveSpeed=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._game.player.node.position,i=this._target.position,r=n.sub(n.sub(i).multiplyScalar(.8));this.node.setPosition(r),this.node.scale=this._weapon.getAoeRange(),this._radians=cc.math.toRadian(-100),this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._attrs.duration;var s=this.ani.node.height,c=cc.Vec2.ZERO,l=a.VectorUtil.getSubRay(c,this._radians,this._moveSpeed*this._lifeTime+s/2);this.ani.node.setPosition(l.x,l.y),this.ani.node.angle=-10},t.prototype.update=function(e){if(!this._game.isPause){this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1&&this._callback({pos:this.node.position});var t=this._moveSpeed*e,o=this._radians,n=Math.cos(o)*t,i=Math.sin(o)*t;this.ani.node.x+=n,this.ani.node.y+=i}},r([p(cc.Animation)],t.prototype,"ani",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Framework/Utils/VectorUtil":"VectorUtil","./BulletBase":"BulletBase"}],ComBulletZhengguo:[function(e,t,o){"use strict";cc._RF.push(t,"d19daOqPZZEJpebdP1aU9Wz","ComBulletZhengguo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Model/WeaponModel"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.icons=[],t.ani=null,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._distance=0,t._addHp=0,t._hp=0,t._hpMax=0,t._contact_monster_atk=0,t._touchStamp=0,t._touchDelta=.1,t._isComplete=!1,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){var n=o.tag;this.onHit(n),this._contact_monster_atk+=n},t.prototype.onEndContact=function(e,t,o){var n=o.tag;this._contact_monster_atk-=n},t.prototype.onHit=function(e){e<=0||(this._hp-=e,this._hp<=0&&(this._lifeStamp=this._lifeTime))},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._target.getPosition();n.x+=50*Math.random()-25,n.y+=50*Math.random()-25,this.node.setPosition(n),this.node.scale=this._attrs.aoeRange,this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._distance=this._attrs.distance,this._addHp=this._attrs.damage,this._hp=this._hpMax=this._attrs.hp,this._isComplete=!1,this._contact_monster_atk=0,this.switchState()},t.prototype.switchState=function(){this.icon.spriteFrame=this.icons[this._isComplete?1:0],this.ani.node.active=this._isComplete},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime)this._callback({pos:this.node.position,target:this._target});else{if(this._touchStamp+=e,this._touchStamp>=this._touchDelta&&(this._touchStamp-=this._touchDelta,this._contact_monster_atk>0&&this.onHit(this._contact_monster_atk)),!this._isComplete)return this._effectStamp+=e,void(this._effectStamp>this._effectInterval&&(this._isComplete=!0,this.switchState()));var t=this.node.position,o=this._game.player.node.position;if(cc.Vec2.distance(t,o)<this._distance){this._effectStamp=0,this._isComplete=!1,this.switchState();var n=this._addHp*this._game.player.maxHp,i=a.WeaponModel.inst.magicAttrs.a_foodhp_p;i>0&&(n+=n*i),this._game.player.hp+=n}}},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([p(cc.SpriteFrame)],t.prototype,"icons",void 0),r([p(cc.Animation)],t.prototype,"ani",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComHitBeEffect:[function(e,t,o){"use strict";cc._RF.push(t,"b811cE5y0JO/aRYtLplZ96G","ComHitBeEffect");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComHitBeEffect=void 0;var a=e("../../Controller/GameItemBase"),s=e("../../Model/GameModel"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t}var o;return i(t,e),o=t,t.prototype.playAnim=function(){var e=this,t=Date.now(),n="hit1";t-o.lastTime<1e3*s.GameModel.inst.player.touchDelta&&(n="hit2"),o.lastTime=t,this.node.active=!0,this.spine.setAnimation(0,n,!1),this.scheduleOnce(function(){e.recycle()},.5)},t.lastTime=0,r([p(sp.Skeleton)],t.prototype,"spine",void 0),o=r([l],t)}(a.GameItemBase);o.ComHitBeEffect=u,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase","../../Model/GameModel":"GameModel"}],ComHitEffect:[function(e,t,o){"use strict";cc._RF.push(t,"d8ca2OCBghMHLrByrMt1yRC","ComHitEffect");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComHitEffect=void 0;var a=e("../../Controller/GameItemBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animHit=null,t}return i(t,e),t.prototype.playAnim=function(){var e=this;this.node.active=!0,this.animHit.play(),this.animHit.once(cc.Animation.EventType.FINISHED,function(){e.recycle()})},r([l(cc.Animation)],t.prototype,"animHit",void 0),r([c],t)}(a.GameItemBase);o.ComHitEffect=p,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase"}],ComHitNum:[function(e,t,o){"use strict";cc._RF.push(t,"83c7bxoZcRLLaeW6Kfv6Dbj","ComHitNum");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/GameItemBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelHp=null,t.animShow=null,t.bj=null,t.bjImgs=[],t}return i(t,e),t.prototype.play=function(e){var t=this;this.node.active=!0,this.labelHp.string=e,this.animShow.play(),this.animShow.once(cc.Animation.EventType.FINISHED,function(){t.recycle()}),this.bj&&(e>1e5?this.bj.spriteFrame=this.bjImgs[4]:e>1e3?this.bj.spriteFrame=this.bjImgs[3]:e>100?this.bj.spriteFrame=this.bjImgs[2]:e>10?this.bj.spriteFrame=this.bjImgs[1]:e>0&&(this.bj.spriteFrame=this.bjImgs[0]))},r([l(cc.Label)],t.prototype,"labelHp",void 0),r([l(cc.Animation)],t.prototype,"animShow",void 0),r([l(cc.Sprite)],t.prototype,"bj",void 0),r([l([cc.SpriteFrame])],t.prototype,"bjImgs",void 0),r([c],t)}(a.GameItemBase);o.default=p,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase"}],ComMonsterChongfeng:[function(e,t,o){"use strict";cc._RF.push(t,"0d71cdGKuFEW6sEBK42YHzy","ComMonsterChongfeng");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./MonsterWeapon"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._distance=0,t._interval=0,t._bulletCount=0,t._v2=cc.v2(),t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount},t.prototype.warn=function(t,o){if(void 0===o&&(o=0),!(this.monster.hp<=0)){var n=this.monster.node.position,i=this._game.player.node.position,r=cc.Vec2.subtract(this._v2,i,n),a=Math.atan2(r.y,r.x);t.radian=a,e.prototype.warn.call(this,t,o)}},t.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!0),this.monster.node.emit("pauseMove"))},t.prototype.onEnd=function(){},t.prototype.update=function(e){if(!this._game.isPause&&this._isStart&&!(this._ref>0)){this._fireStamp+=e;var t=this.monster.node.position,o=this._game.player.node.position;if(!(cc.Vec2.distance(t,o)>this._distance)){var n=this._interval;this._fireStamp>=n&&(this._fireStamp=0,this.warn({target:this._game.player.node}))}}},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./MonsterWeapon":"MonsterWeapon"}],ComMonsterDici:[function(e,t,o){"use strict";cc._RF.push(t,"0fec0jFiZ9GM7FyfX7/3q8K","ComMonsterDici");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/LayerMgr"),s=e("../../Warn/WarnBase"),c=e("./MonsterWeapon"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curWarnStamp=0,t._bulletCount=0,t._distance=0,t._interval=0,t._warnInterval=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount,this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._warnInterval=this._weaponInfo.weaponAttrs[0].warnInterval},t.prototype.warn=function(e,t){var o=this;if(void 0===t&&(t=0),!(this.monster.hp<=0)){var n="warn"+t,i=this.get(n);if(null!=i){i.setParent(a.LayerMgr.inst.WarnLayer);var r=this.monster.node.getPosition(),c=Math.random()*Math.PI*2,l=Math.random()*this._weaponInfo.weaponAttrs[0].rPos;r.x+=Math.cos(c)*l,r.y+=Math.sin(c)*l,e.pos=r,e.scale=cc.math.randomRange(.5,1.5),e.range=this._weaponInfo.weaponAttrs[0].warnRange*e.scale,e.radian=e.radian||0,e.dur=e.dur||this._weaponInfo.weaponAttrs[t].warnInterval,e.width*=e.aoeRange||this._weaponInfo.weaponAttrs[t].aoeRange||1;var p=i.getComponent(s.default);p.setWarn({dur:e.dur,range:e.range,pos:e.pos,radian:e.radian,width:e.width},function(){o.put(n,p.node),o.fire(e,t)})}}},t.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!0),this.monster.node.emit("pauseMove"))},t.prototype.onEnd=function(){var e=this;if(!(this.monster.hp<=0||this._ref>0)){var t=this.monster.spine.setAnimation(0,"attack2",!1);this.monster.spine.setTrackCompleteListener(t,function(){e.monster.spine.setAnimation(0,"run",!0),e.monster.node.emit("resumeMove")})}},t.prototype.update=function(e){if(!this._game.isPause&&this._isStart){if(0==this._curFireCount&&0==this._ref){this._fireStamp+=e;var t=this.monster.node.position,o=this._game.player.node.position;if(cc.Vec2.distance(t,o)>this._distance)return;var n=this._interval;if(this._fireStamp>=n){this._fireStamp=0;var i=this._bulletCount;this._curFireCount=i,this.onStart(0),this._ref++}}this._curFireCount>0&&(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.warn({target:this._game.player.node}))),this._ref>0&&(this._curWarnStamp+=e,this._curWarnStamp>=this._warnInterval-.3&&(this._curWarnStamp=0,this._ref--,this.onEnd(0)))}},t.prototype.onDead=function(){this._isStart=!1,this._ref=0,this._curFireCount=0},r([p],t)}(c.default));o.default=u,cc._RF.pop()},{"../../../Controller/LayerMgr":"LayerMgr","../../Warn/WarnBase":"WarnBase","./MonsterWeapon":"MonsterWeapon"}],ComMonsterFeijian:[function(e,t,o){"use strict";cc._RF.push(t,"a47d2Dets1CN7fzYIsBAANL","ComMonsterFeijian");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./MonsterWeapon"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._distance=0,t._interval=0,t._bulletCount=0,t._hitCount=0,t._angularSpeed=0,t._v2=cc.v2(),t._fireArg=[],t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount,this._hitCount=this._weaponInfo.weaponAttrs[0].hitCount,this._angularSpeed=this._weaponInfo.weaponAttrs[0].angularSpeed},t.prototype.warn=function(t,o){if(void 0===o&&(o=0),!(this.monster.hp<=0)){for(var n=this.monster.node.position,i=this._game.player.node.position,r=cc.Vec2.subtract(this._v2,i,n),a=Math.atan2(r.y,r.x),s=this._bulletCount,c=0;c<s;c++){var l=Object.assign({},t);l.radian=a+cc.math.toRadian(c*this._angularSpeed-Math.floor(s/2)*this._angularSpeed),e.prototype.warn.call(this,l,o)}this._fireArg.length=0}},t.prototype.fire=function(e,t){void 0===t&&(t=0),this._fireArg.push(e)},t.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!0),this.monster.node.emit("pauseMove"))},t.prototype.onEnd=function(){var t=this;if(!(this.monster.hp<=0||this._ref>0)){var o=this._hitCount,n=this.monster.spine.setAnimation(0,"attack2",!0);this.monster.spine.setTrackEventListener(n,function(){o--;for(var n=0,i=t._fireArg;n<i.length;n++){var r=i[n];e.prototype.fire.call(t,r)}}),this.monster.spine.setTrackCompleteListener(n,function(){0==o&&(t.monster.spine.setAnimation(0,"run",!0),t.monster.node.emit("resumeMove"))})}},t.prototype.update=function(e){if(!this._game.isPause&&this._isStart&&!(this._ref>0)){this._fireStamp+=e;var t=this.monster.node.position,o=this._game.player.node.position;if(!(cc.Vec2.distance(t,o)>this._distance)){var n=this._interval;this._fireStamp>=n&&(this._fireStamp=0,this.warn({target:this._game.player.node}))}}},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./MonsterWeapon":"MonsterWeapon"}],ComMonsterLiandao:[function(e,t,o){"use strict";cc._RF.push(t,"86b4fFmZqNO8Y2RynrJJTns","ComMonsterLiandao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./MonsterWeapon"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._bulletCount=0,t._distance=0,t._interval=0,t._v2=cc.v2(),t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount},t.prototype.warn=function(t,o){if(void 0===o&&(o=0),!(this.monster.hp<=0))for(var n=this._bulletCount,i=this.monster.node.position,r=this._game.player.node.position,a=cc.Vec2.subtract(this._v2,r,i),s=Math.atan2(a.y,a.x),c=0;c<n;c++){var l=Object.assign({},t);l.radian=s+cc.math.toRadian(c*Math.floor(360/n)),e.prototype.warn.call(this,l,o)}},t.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack",!0),this.monster.node.emit("pauseMove"))},t.prototype.onEnd=function(){var e=this;if(!(this.monster.hp<=0||this._ref>0)){var t=this.monster.spine.setAnimation(0,"attack2",!1);this.monster.spine.setTrackCompleteListener(t,function(){e.monster.spine.setAnimation(0,"run",!0),e.monster.node.emit("resumeMove")})}},t.prototype.update=function(e){if(!this._game.isPause&&this._isStart&&!(this._ref>0)){this._fireStamp+=e;var t=this.monster.node.position,o=this._game.player.node.position;if(!(cc.Vec2.distance(t,o)>this._distance)){var n=this._interval;this._fireStamp>=n&&(this._fireStamp=0,this.warn({target:this._game.player.node}))}}},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./MonsterWeapon":"MonsterWeapon"}],ComMonsterMofadan:[function(e,t,o){"use strict";cc._RF.push(t,"2111aUlwddBqY1+jhC5FWDB","ComMonsterMofadan");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/LayerMgr"),s=e("../../Warn/WarnBase"),c=e("./MonsterWeapon"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.4,t._curFireCount=0,t._curWarnStamp=0,t._bulletCount=0,t._distance=0,t._interval=0,t._warnInterval=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._bulletCount=this._weaponInfo.weaponAttrs[0].bulletCount,this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval,this._curFireStampDelta=this._weaponInfo.weaponAttrs[0].delay,this._warnInterval=this._curFireStampDelta*this._bulletCount},t.prototype.warn=function(e,t){var o=this;if(void 0===t&&(t=0),!(this.monster.hp<=0)){var n="warn"+t,i=this.get(n);if(null!=i){i.setParent(a.LayerMgr.inst.WarnLayer),e.pos=e.pos||this.monster.node.position,e.radian=e.radian||0,e.aoeRange=this._weaponInfo.weaponAttrs[t].aoeRange,e.range=this._weaponInfo.weaponAttrs[t].warnRange*this._weaponInfo.weaponAttrs[t].aoeRange,e.dur=this._weaponInfo.weaponAttrs[t].warnInterval,e.width*=e.aoeRange||this._weaponInfo.weaponAttrs[t].aoeRange||1;var r=i.getComponent(s.default);r.setWarn({dur:e.dur,range:e.range,pos:e.pos,radian:e.radian,width:e.width},function(){o.put(n,r.node),o.fire(e,t+1)}),this.fire(e,t)}}},t.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!0),this.monster.node.emit("pauseMove"))},t.prototype.onEnd=function(){var e=this;if(!(this.monster.hp<=0||this._ref>0)){var t=this.monster.spine.setAnimation(0,"attack2",!1);this.monster.spine.setTrackCompleteListener(t,function(){e.monster.spine.setAnimation(0,"run",!0),e.monster.node.emit("resumeMove")})}},t.prototype.update=function(e){if(!this._game.isPause&&this._isStart){if(0==this._curFireCount&&0==this._ref){this._fireStamp+=e;var t=this.monster.node.position,o=this._game.player.node.position;if(cc.Vec2.distance(t,o)>this._distance)return;var n=this._interval;if(this._fireStamp>=n){this._fireStamp=0;var i=this._bulletCount;this._curFireCount=i,this.onStart(0),this._ref++}}if(this._curFireCount>0&&(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta)){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var r=this.monster.node.getPosition(),a=Math.random()*Math.PI*2,s=Math.random()*this._weaponInfo.weaponAttrs[0].rPos;r.x+=Math.cos(a)*s,r.y+=Math.sin(a)*s,this.warn({target:this._game.player.node,pos:r})}this._ref>0&&(this._curWarnStamp+=e,this._curWarnStamp>=this._warnInterval&&(this._curWarnStamp=0,this._ref--,this.onEnd(0)))}},t.prototype.onDead=function(){this._isStart=!1,this._ref=0,this._curFireCount=0},r([p],t)}(c.default));o.default=u,cc._RF.pop()},{"../../../Controller/LayerMgr":"LayerMgr","../../Warn/WarnBase":"WarnBase","./MonsterWeapon":"MonsterWeapon"}],ComMonsterXialuo:[function(e,t,o){"use strict";cc._RF.push(t,"c2e428EolFFSJEedNwnxJAP","ComMonsterXialuo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./MonsterWeapon"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._distance=0,t._interval=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._distance=this._weaponInfo.weaponAttrs[0].distance,this._interval=this._weaponInfo.weaponAttrs[0].interval},t.prototype.warn=function(t,o){void 0===o&&(o=0),this.monster.hp<=0||(t.pos=this._game.player.node.getPosition(),e.prototype.warn.call(this,t,o))},t.prototype.onStart=function(){this.monster.hp<=0||this._ref>0||(this.monster.spine.setAnimation(0,"attack1",!1),this.monster.node.emit("pauseMove"),this.monster.getComponent(cc.RigidBody).active=!1)},t.prototype.onEnd=function(){},t.prototype.update=function(e){if(!this._game.isPause&&this._isStart&&!(this._ref>0)){this._fireStamp+=e;var t=this.monster.node.position,o=this._game.player.node.position;if(!(cc.Vec2.distance(t,o)>this._distance)){var n=this._interval;this._fireStamp>=n&&(this._fireStamp=0,this.warn({target:this._game.player.node}))}}},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./MonsterWeapon":"MonsterWeapon"}],ComWarnBox:[function(e,t,o){"use strict";cc._RF.push(t,"1cbe3eKsOlLJLcbGCnB3hAO","ComWarnBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./WarnBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.box1=null,t.box2=null,t}return i(t,e),t.prototype.setWarn=function(t,o){var n=this;e.prototype.setWarn.call(this,t,o),this.node.setPosition(t.pos),this.node.angle=cc.math.toDegree(t.radian),this.box1.width=t.width,this.box1.height=t.range,this.box2.width=t.width,this.box2.height=0;var i=t.dur;cc.tween(this.box2).to(i,{height:t.range}).call(function(){o(),n._info=null,n._callback=null}).start()},t.prototype.pause=function(){this.box2.pauseAllActions()},t.prototype.resume=function(){this.box2.resumeAllActions()},r([l(cc.Node)],t.prototype,"box1",void 0),r([l(cc.Node)],t.prototype,"box2",void 0),r([c],t)}(a.default);o.default=p,cc._RF.pop()},{"./WarnBase":"WarnBase"}],ComWarnCircle:[function(e,t,o){"use strict";cc._RF.push(t,"90961K19gJLsYtWMdVNu8Zu","ComWarnCircle");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./WarnBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.circle1=null,t.circle2=null,t}return i(t,e),t.prototype.setWarn=function(t,o){var n=this;e.prototype.setWarn.call(this,t,o),this.node.setPosition(t.pos);var i=2*t.range;this.circle1.width=i,this.circle1.height=i,this.circle2.width=0,this.circle2.height=0;var r=t.dur;cc.tween(this.circle2).to(r,{height:i,width:i}).call(function(){o(),n._info=null,n._callback=null}).start()},t.prototype.pause=function(){this.circle2.pauseAllActions()},t.prototype.resume=function(){this.circle2.resumeAllActions()},r([l(cc.Node)],t.prototype,"circle1",void 0),r([l(cc.Node)],t.prototype,"circle2",void 0),r([c],t)}(a.default);o.default=p,cc._RF.pop()},{"./WarnBase":"WarnBase"}],ComWeaponBanyue:[function(e,t,o){"use strict";cc._RF.push(t,"4a8b1mc0wZCmYefw2OIIn3V","ComWeaponBanyue");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.2,t._curFireCount=0,t._radian=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer)},t.prototype.fire=function(t,o){void 0===o&&(o=0),t.radian=this._radian,e.prototype.fire.call(this,t,o)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),this._curFireStampDelta=this._weaponInfo.weaponAttrs[0].delay,s.AchievementModel.inst.updatePoint(25,this._weaponInfo.getLevel())},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._curFireCount=o}}else this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this._radian=Math.atan2(this._game.orientation.y,this._game.orientation.x),this.fire({target:this._game.player.node}))},r([p],t)}(c.WeaponBase));o.default=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","./WeaponBase":"WeaponBase"}],ComWeaponBishou:[function(e,t,o){"use strict";cc._RF.push(t,"e2164eX5flHl6NUbEtuBQO1","ComWeaponBishou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponBishou=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:c.GameModel.inst.player.node}),s.AchievementModel.inst.updatePoint(9,this._weaponInfo.getLevel())},t.prototype.fire=function(t,o){void 0===o&&(o=0);for(var n=this._weaponInfo.getBulletCount(),i=0;i<n;i++)e.prototype.fire.call(this,t,o)},r([u],t)}(l.WeaponBase));o.ComWeaponBishou=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponChushou:[function(e,t,o){"use strict";cc._RF.push(t,"2cd6bn5czFHL7xVvPKeTGIV","ComWeaponChushou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("../../Model/WeaponModel"),p=e("./Bullet/BulletBase"),u=e("./WeaponBase"),d=cc._decorator,h=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire3Layer=new cc.Node,this._fire3Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy(),this._fire3Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return this._fire3Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),s.AchievementModel.inst.updatePoint(15,this._weaponInfo.getLevel())},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this._weaponInfo.getSenior(),i=this.get(n?3+t:t);if(null!=i){i.setParent(this.getBulletParent(t));var r=!1,a=l.WeaponModel.inst.magicAttrs.sp_chushou;a&&a>Math.random()&&(r=!0);var s=i.getComponent(p.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[t],e.doubleScale=r,e.weapon=this._weaponInfo,s.fire(e,function(e){o.put(t,s.node),o.fire2(e,++t)})}},t.prototype.fire2=function(e,t){var o=this;void 0===t&&(t=0);var n=this._weaponInfo.getSenior(),i=this.get(n?3+t:t);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(p.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[t],e.weapon=this._weaponInfo,e.hitCallback=function(e){o.fire3(e,t+1)},r.fire(e,function(){o.put(t,r.node)})}},t.prototype.fire3=function(e,t){var o=this;void 0===t&&(t=0);var n=this._weaponInfo.getSenior()?3+t:t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(p.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[t],e.weapon=this._weaponInfo,r.fire(e,function(){o.put(n,r.node)})}},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findRandMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([h],t)}(u.WeaponBase));o.default=f,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponCommonPet:[function(e,t,o){"use strict";cc._RF.push(t,"9710fRm3oxJcZSfGw9tcpwO","ComWeaponCommonPet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponCommonPet=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Controller/TableMgr"),c=e("../../Model/GodPetModel"),l=e("./Bullet/BulletBase"),p=e("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._damage=0,t._lifeTime=0,t._effectInterval=0,t}return i(t,e),t.prototype.onLoad=function(){for(var e in this._waterLevel=10,this.pfBullet)this.addItemPool(Number(e),this.pfBullet[e]);for(var e in this.pfSeniorBullet)this.addItemPool(3+Number(e),this.pfSeniorBullet[e]);this._damage=Number(s.TABLE.getGlobal("GodPet_Damage")),this._lifeTime=Number(s.TABLE.getGlobal("GodPet_LifeTime")),this._effectInterval=Number(s.TABLE.getGlobal("GodPet_EffectInterval"))},t.prototype.getAttrFromCfg=function(){},t.prototype.updateAttrs=function(){},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this.node.parent;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this.get(t);if(null!=n){n.setParent(this.getBulletParent(t));var i=n.getComponent(l.BulletBase);e.weapon=this,e.damage=this._damage,e.lifeTime=this._lifeTime,e.effectInterval=this._effectInterval,i.fire(e,function(){o.put(t,i.node)})}},t.prototype.getDamage=function(e){return void 0===e&&(e=0),c.GodPetModel.inst.cur.atk},t.prototype.getCrit=function(){return c.GodPetModel.inst.cur.crit},t.prototype.getCritDamage=function(){return c.GodPetModel.inst.cur.critDamage},r([d],t)}(p.WeaponBase));o.ComWeaponCommonPet=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Model/GodPetModel":"GodPetModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponCommon:[function(e,t,o){"use strict";cc._RF.push(t,"1d1584mYMxHWLohm88ipI/x","ComWeaponCommon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponCommon=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("../../Model/WeaponModel"),l=e("./Bullet/BulletBase"),p=e("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){for(var e in this._waterLevel=10,this.pfBullet)this.addItemPool(Number(e),this.pfBullet[e]);for(var e in this.pfSeniorBullet)this.addItemPool(3+Number(e),this.pfSeniorBullet[e])},t.prototype.updateAttrs=function(){},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.BulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this.get(t);if(null!=n){n.setParent(this.getBulletParent(t));var i=n.getComponent(l.BulletBase);e.weapon=this,e.direct=cc.v2(this._game.orientation.x>0?1:-1,0),i.fire(e,function(){o.put(t,i.node)}),(c.WeaponModel.inst.magicAttrs.a_patk2_v||0)<=0||this.scheduleOnce(function(){var n=o.get(t);if(null!=n){n.setParent(o.getBulletParent(t));var i=n.getComponent(l.BulletBase);e.weapon=o,e.direct=cc.v2(o._game.orientation.x>0?-1:1,0),i.fire(e,function(){o.put(t,i.node)})}},.3)}},t.prototype.getDamage=function(e){return void 0===e&&(e=0),1},t.prototype.getCrit=function(){return s.GameModel.inst.player.crit+(c.WeaponModel.inst.magicAttrs.a_crit_p||0)},t.prototype.getCritDamage=function(){return 2+(c.WeaponModel.inst.magicAttrs.a_critdmg_p||0)},r([d],t)}(p.WeaponBase));o.ComWeaponCommon=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponDasuan:[function(e,t,o){"use strict";cc._RF.push(t,"99800PN4FpAn60/baU0kit5","ComWeaponDasuan");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponDasuan=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./Bullet/BulletBase"),p=e("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:c.GameModel.inst.player.node}),s.AchievementModel.inst.updatePoint(17,this._weaponInfo.getLevel())},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.BulletLayer;case 1:return a.LayerMgr.inst.BulletLayer2;case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this._weaponInfo.getSenior(),i=n?3+t:t,r=this.get(i);if(null!=r){r.setParent(this.getBulletParent(n?1:0));var a=r.getComponent(l.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[t],e.weapon=this._weaponInfo,a.fire(e,function(e){o.put(i,a.node),o.fire(e,++t)})}},r([d],t)}(p.WeaponBase));o.ComWeaponDasuan=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponDianwang:[function(e,t,o){"use strict";cc._RF.push(t,"a77d27zkWhLiotpQLf7+jVZ","ComWeaponDianwang");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("./Bullet/BulletBase"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.build=function(e){var t=0,o=Math.atan2(this._game.orientation.y,this._game.orientation.x);(o>.7853981633974483&&o<2.356194490192345||o<-.7853981633974483&&o>-2.356194490192345)&&(t=1);for(var n=this._bulletCount,i=0;i<n;i++){var r=Object.assign({},e);r.pos=this._game.player.node.getPosition(),0==t?r.pos.x+=150*i-150*Math.floor(n/2):r.pos.y+=150*i-150*Math.floor(n/2),this.fire(r,t)}},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(c.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[0],e.weapon=this._weaponInfo,r.fire(e,function(){o.put(n,r.node)})}},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},t.prototype.update=function(e){this._game.isPause||this._game.buildGCD>0||(this._fireStamp+=e,this._fireStamp>=this._interval&&(this._fireStamp=0,this._game.buildGCD=1,this.build({target:s.GameModel.inst.player.node})))},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponDraw1:[function(e,t,o){"use strict";cc._RF.push(t,"b5d17a7LmpGIpeWoko1oPr3","ComWeaponDraw1");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/GameModel"),s=e("./WeaponDrawBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},t.prototype.update=function(e){if(!this._game.isPause&&this._activeTime>0)if(this._activeTime-=e,0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=a.GameModel.inst.findRandMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([l],t)}(s.WeaponDrawBase));o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel","./WeaponDrawBase":"WeaponDrawBase"}],ComWeaponDraw2:[function(e,t,o){"use strict";cc._RF.push(t,"6db30fAB6pLMpBROV7bZdwQ","ComWeaponDraw2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./WeaponDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},t.prototype.fire=function(t,o){void 0===o&&(o=0);var n=this._bulletCount,i=this._curTargetIdx,r=Math.atan2(this._game.orientation.y,this._game.orientation.x);r-=cc.math.toRadian(30*i-30*Math.floor(n/2)),t.radian=r,e.prototype.fire.call(this,t,o)},t.prototype.update=function(e){if(!this._game.isPause&&this._activeTime>0)if(this._activeTime-=e,0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._curTargetIdx=0,this._curFireCount=o}}else this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.fire({target:this._game.player.node}),this._curTargetIdx++)},r([c],t)}(a.WeaponDrawBase));o.default=l,cc._RF.pop()},{"./WeaponDrawBase":"WeaponDrawBase"}],ComWeaponDraw3:[function(e,t,o){"use strict";cc._RF.push(t,"077e5tukx9By7Vmi2uptM4U","ComWeaponDraw3");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./WeaponDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},t.prototype.update=function(e){if(!this._game.isPause&&this._activeTime>0)if(this._activeTime-=e,0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._curTargetIdx=0,this._curFireCount=o}}else this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.fire({target:this._game.player.node}))},r([c],t)}(a.WeaponDrawBase));o.default=l,cc._RF.pop()},{"./WeaponDrawBase":"WeaponDrawBase"}],ComWeaponFeidao:[function(e,t,o){"use strict";cc._RF.push(t,"5acc4mG6zFBBZ9UnZi7Y5GP","ComWeaponFeidao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),s.AchievementModel.inst.updatePoint(12,this._weaponInfo.getLevel())},t.prototype.update=function(e){if(!this._game.isPause){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0;for(var n=0;n<o;n++){var i=this._targetList[this._curTargetIdx++];null!=i&&null!=i.parent&&this.fire({target:i})}}}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponFreezeAll:[function(e,t,o){"use strict";cc._RF.push(t,"d6ca9hdNf9OLq2YhKVOx7X9","ComWeaponFreezeAll");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/GameModel"),s=e("./WeaponBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._interval=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval()},t.prototype.update=function(e){this._game.isPause||(this._fireStamp+=e,this._fireStamp>=this._interval&&(this._fireStamp=0,this.fire({target:a.GameModel.inst.player.node})))},r([l],t)}(s.WeaponBase));o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponGunshi:[function(e,t,o){"use strict";cc._RF.push(t,"3e0a6JUnfJHMr8vowhD+tnw","ComWeaponGunshi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Framework/Audio/AudioMgr"),c=e("../../Model/AchievementModel"),l=e("../../Model/GameModel"),p=e("../../Model/WeaponModel"),u=e("./Bullet/BulletBase"),d=e("./WeaponBase"),h=cc._decorator,f=h.ccclass,_=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curFireCount2=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t._bulletCount2=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.weaponAttrs[0].upCount,this._bulletCount2=this._weaponInfo.weaponAttrs[0].rCount+(p.WeaponModel.inst.magicAttrs.a_gunshi_rcount_v||0),c.AchievementModel.inst.updatePoint(13,this._weaponInfo.getLevel())},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this._weaponInfo.getSenior()?3+t:t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(u.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[t],e.weapon=this._weaponInfo,e.hitCallback=function(e){o.fire(e,t+1)},r.fire(e,function(){o.put(n,r.node)})}},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount&&0==this._curFireCount2){this._fireStamp+=e;var t=this._interval;this._fireStamp>=t&&(this._fireStamp=0,this._curTargetIdx=0,this._curFireCount=this._bulletCount,this._curFireCount2=this._bulletCount2,s.AudioMgr.inst.playEffectByName("gunshi"))}else this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount>0&&(this._curFireCount--,this.fire({target:l.GameModel.inst.player.node,direct:0})),this._curFireCount2>0&&(this._curFireCount2--,this.fire({target:l.GameModel.inst.player.node,direct:1})))},r([f],t)}(d.WeaponBase));o.default=_,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Framework/Audio/AudioMgr":"AudioMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponHudun:[function(e,t,o){"use strict";cc._RF.push(t,"394b2JrewBOvaM0DPzGHGrn","ComWeaponHudun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponHudun=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:s.GameModel.inst.player.node})},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.BulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},r([p],t)}(c.WeaponBase));o.ComWeaponHudun=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponJianta:[function(e,t,o){"use strict";cc._RF.push(t,"12e9f8SfetIgautvbuymPC6","ComWeaponJianta");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("./Bullet/BulletBase"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._interval=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){for(var t in e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._nodeList)this._nodeList[t].forEach(function(e){return e.emit("update")})},t.prototype.fire=function(t,o){var n=this;void 0===o&&(o=0);var i=this._weaponInfo.getSenior()?3+o:o,r=this.get(i);if(null!=r){r.setParent(this.getBulletParent(o));var a=r.getComponent(c.BulletBase);t.type=o,t.attrs=this._weaponInfo.weaponAttrs[o],t.weapon=this._weaponInfo,t.hitCallback=function(t){e.prototype.fire.call(n,t,o+1)},a.fire(t,function(){n.put(i,a.node)})}},t.prototype.update=function(e){this._game.isPause||this._game.buildGCD>0||(this._fireStamp+=e,this._fireStamp>=this._interval&&(this._fireStamp=0,this._game.buildGCD=1,this.fire({target:s.GameModel.inst.player.node})))},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponJiguang:[function(e,t,o){"use strict";cc._RF.push(t,"f59395VKUBL2ZFJAUXDOpmC","ComWeaponJiguang");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),s.AchievementModel.inst.updatePoint(19,this._weaponInfo.getLevel())},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponLeidian:[function(e,t,o){"use strict";cc._RF.push(t,"7fdd4MhvVBFsK0HM/czXL2s","ComWeaponLeidian");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),s.AchievementModel.inst.updatePoint(23,this._weaponInfo.getLevel())},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponLiuxingchui:[function(e,t,o){"use strict";cc._RF.push(t,"dfc8bt9HHVJpaIUvEx/FBQE","ComWeaponLiuxingchui");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponLiuxingchui=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bulletCount=0,t}return i(t,e),t.prototype.fire=function(t,o){void 0===o&&(o=0);for(var n=this._bulletCount,i=0;i<n;i++)t.startAngle=i*Math.floor(360/n),e.prototype.fire.call(this,t,o)},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._bulletCount=this._weaponInfo.getBulletCount(),this.recycle(),this.fire({target:c.GameModel.inst.player.node}),s.AchievementModel.inst.updatePoint(10,this._weaponInfo.getLevel())},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.PlayerBulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},r([u],t)}(l.WeaponBase));o.ComWeaponLiuxingchui=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponMozhua:[function(e,t,o){"use strict";cc._RF.push(t,"faaeeZ0+iNNwIu0JyUqAFEB","ComWeaponMozhua");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),s.AchievementModel.inst.updatePoint(16,this._weaponInfo.getLevel())},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponQiang:[function(e,t,o){"use strict";cc._RF.push(t,"005e7fZnqdDoZ+NbbXq4Sim","ComWeaponQiang");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("./Bullet/BulletBase"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.build=function(e){var t=0,o=Math.atan2(this._game.orientation.y,this._game.orientation.x);(o>.7853981633974483&&o<2.356194490192345||o<-.7853981633974483&&o>-2.356194490192345)&&(t=1);for(var n=this._bulletCount,i=0;i<n;i++){var r=Object.assign({},e);r.pos=this._game.player.node.getPosition(),0==t?r.pos.x+=200*i-200*Math.floor(n/2):r.pos.y+=200*i-200*Math.floor(n/2),this.fire(r,t)}},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(c.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[0],e.weapon=this._weaponInfo,r.fire(e,function(){o.put(n,r.node)})}},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},t.prototype.update=function(e){this._game.isPause||this._game.buildGCD>0||(this._fireStamp+=e,this._fireStamp>=this._interval&&(this._fireStamp=0,this._game.buildGCD=1,this.build({target:s.GameModel.inst.player.node})))},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponQuan:[function(e,t,o){"use strict";cc._RF.push(t,"1b910szer5Ob7hnFpzdFoNk","ComWeaponQuan");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./Bullet/BulletBase"),p=e("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._seniorStamp=cc.macro.REPEAT_FOREVER,t._curSeniorStamp=0,t._curSeniorStampDelta=.1,t._curSeniorCount=0,t._curSeniorIdx=0,t._interval=0,t._bulletCount=0,t._senior=!1,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),this._senior=this._weaponInfo.getSenior(),s.AchievementModel.inst.updatePoint(26,this._weaponInfo.getLevel())},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this._weaponInfo.getSenior()?3+t:t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(l.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[t],e.weapon=this._weaponInfo,r.fire(e,function(){o.put(n,r.node)})}},t.prototype.update=function(e){var t=this;if(!this._game.isPause){if(0==this._curFireCount){this._fireStamp+=e;var o=this._interval;if(this._fireStamp>=o){this._fireStamp=0;var n=this._bulletCount;this._targetList=c.GameModel.inst.findRandMonsters(n),this._curTargetIdx=0,this._curFireCount=n}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var i=this._targetList[this._curTargetIdx++];null!=i&&null!=i.parent&&this.fire({target:i})}if(this._senior)if(0==this._curSeniorCount)this._seniorStamp+=e,o=this._interval,this._seniorStamp>=o&&(this._seniorStamp=0,n=this._bulletCount,this._targetList=c.GameModel.inst.findNearMonsters(n),this._curSeniorIdx=0,this._curSeniorCount=n);else if(this._curSeniorStamp+=e,this._curSeniorStamp>=this._curSeniorStampDelta){this._curSeniorStamp-=this._curSeniorStampDelta,this._curSeniorCount--;var r=this._targetList[this._curSeniorIdx++];if(null!=r&&null!=r.parent){n=this._weaponInfo.weaponAttrs[1].hitCount;for(var a=0;a<n;a++)this.scheduleOnce(function(){return t.fire({target:r},1)},.2*a)}}}},r([d],t)}(p.WeaponBase));o.default=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponShufu:[function(e,t,o){"use strict";cc._RF.push(t,"68ab7OZHc9Nl6ukEVjeDcNj","ComWeaponShufu");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t._curFireIdx=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.PlayerBulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.update=function(e){if(!this._game.isPause){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=s.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0;for(var n=0;n<o;n++){var i=this._targetList[this._curTargetIdx++];if(i){var r=2*-Math.PI/12*this._curFireIdx++;this.fire({target:i,radian:r})}}}}},r([p],t)}(c.WeaponBase));o.default=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponTaijilun:[function(e,t,o){"use strict";cc._RF.push(t,"67253uY+wlNQ5GkIGU6/zPz","ComWeaponTaijilun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Framework/Audio/AudioMgr"),c=e("../../Model/AchievementModel"),l=e("../../Model/GameModel"),p=e("./Bullet/BulletBase"),u=e("./WeaponBase"),d=cc._decorator,h=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._interval=0,t._bulletCount=0,t._isStart=!1,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);for(var n=this._bulletCount,i=function(e,t){var n=o._weaponInfo.getSenior()?3+t:t,i=o.get(n);if(null!=i){i.setParent(o.getBulletParent(t));var r=i.getComponent(p.BulletBase);e.type=t,e.attrs=o._weaponInfo.weaponAttrs[t],e.weapon=o._weaponInfo,e.shadow=o._fire2Layer,r.fire(e,function(){o.put(n,r.node),o._isStart=!1}),o._isStart=!0}},r=Math.atan2(this._game.orientation.y,this._game.orientation.x),a=0;a<n;a++)e.radian=r+cc.math.toRadian(a*Math.floor(360/n)),i(e,t)},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount(),c.AchievementModel.inst.updatePoint(24,this._weaponInfo.getLevel())},t.prototype.update=function(e){this._game.isPause||this._isStart||(this._fireStamp+=e,this._fireStamp>=this._interval&&(this._fireStamp=0,s.AudioMgr.inst.playEffectByName("taijilun"),this.fire({target:l.GameModel.inst.player.node})))},r([h],t)}(u.WeaponBase));o.default=f,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Framework/Audio/AudioMgr":"AudioMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponXuanfeng:[function(e,t,o){"use strict";cc._RF.push(t,"79845LHMAJKO4NWifxApegX","ComWeaponXuanfeng");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Define/EventId"),c=e("../../Framework/Audio/AudioMgr"),l=e("../../Framework/Event/EventMgr"),p=e("../../Model/AchievementModel"),u=e("../../Model/GameModel"),d=e("../../Model/WeaponModel"),h=e("./WeaponBase"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._hitFireStamp=0,t._hitFireInterval=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_PLAYER_HIT,this.onHit,this)},t.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_PLAYER_HIT,this.onHit,this)},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount();var t=d.WeaponModel.inst.magicAttrs.sp_xuanfeng;this._hitFireInterval=t||0,p.AchievementModel.inst.updatePoint(14,this._weaponInfo.getLevel())},t.prototype.onHit=function(){0!=this._hitFireInterval&&0==this._hitFireStamp&&(this._hitFireStamp=this._hitFireInterval,this.fire({target:u.GameModel.inst.player.node}))},t.prototype.update=function(e){if(!this._game.isPause)if(this._hitFireStamp>0&&(this._hitFireStamp-=e,this._hitFireStamp<0&&(this._hitFireStamp=0)),0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._curFireCount=o,c.AudioMgr.inst.playEffectByName("xuanfeng")}}else this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.fire({target:u.GameModel.inst.player.node}))},r([_],t)}(h.WeaponBase));o.default=y,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","./WeaponBase":"WeaponBase"}],ComWeaponYunshi:[function(e,t,o){"use strict";cc._RF.push(t,"cf654JZp5hPZ5/zyYP0YH4W","ComWeaponYunshi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer),this._fire3Layer=new cc.Node,this._fire3Layer.setParent(a.LayerMgr.inst.EffectLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy(),this._fire3Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return this._fire3Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval(),this._bulletCount=this._weaponInfo.getBulletCount()},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=s.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([p],t)}(c.WeaponBase));o.default=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponZhengguo:[function(e,t,o){"use strict";cc._RF.push(t,"6a115KF2XBGMI2TpslUm4oo","ComWeaponZhengguo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._interval=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BuildingLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this._weaponInfo.getInterval()},t.prototype.update=function(e){this._game.isPause||this._game.buildGCD>0||(this._fireStamp+=e,this._fireStamp>=this._interval&&(this._fireStamp=0,this._game.buildGCD=1,this.fire({target:s.GameModel.inst.player.node})))},r([p],t)}(c.WeaponBase));o.default=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],CommonToast:[function(e,t,o){"use strict";cc._RF.push(t,"c2ba2y6ZDtG7ZP9ddIgV9aw","CommonToast");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t._isOpening=!1,t._runTime=0,t._tipList=[],t.openTime=0,t.minOpenTime=1,t.maxOpenTime=8,t.isOpeningCount=!1,t.showingNext=!1,t.nowItem=null,t.lastItem=null,t.label=null,t}return i(t,e),Object.defineProperty(t.prototype,"isOpening",{get:function(){return this._isOpening},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.item.active=!1},t.prototype.showTips=function(e){try{if(this.freshWidth(e),this._tipList.push(e),1==this._tipList.length&&0==this._isOpening)this.showingNext=!0,this.item.width=40*e.length+20,this._showNext();else{if(this._tipList.length>2)for(var t={},o=0;o<this._tipList.length;o++)if(t[this._tipList[o]]||this.label&&this._tipList[o]==this.label.string){if(this._tipList.splice(o,1),this._tipList.length<=2)break;o--}else t[this._tipList[o]]=1;this._tipList.length>0&&0==this._isOpening&&0==this.isOpeningCount&&0==this.showingNext&&(this.showingNext=!0,this._showNext())}}catch(n){this.node&&(this.node.active=!1),cc.log("ShowTips",n)}},t.prototype.freshWidth=function(e){this.item.width=40*e.length+20},t.prototype._showNext=function(){this.nowItem?(cc.log("tip\u5b58\u5728"),this.showingNext=!1):(this.nowItem=cc.instantiate(this.item),this.nowItem.parent=this.node,this.nowItem.active=!0,this._showOneTip(this._tipList[0])&&(this._tipList.shift(),this.openTime=0),this.showingNext=!1)},t.prototype._showOneTip=function(e){if(cc.log("ShowOneTip"),this._isOpening)return cc.log("\u4e0d\u80fd\u540c\u65f6\u6253\u5f00\u591a\u4e2a\u63d0\u793a"),!1;if(!this.nowItem)return cc.log("\u5f53\u524dtip\u5df2\u9500\u6bc1"),!1;this.isOpeningCount=!0,this._isOpening=!0;var t=this.nowItem.getChildByName("Label");if(t){var o=t.getComponent(cc.Label);o?(this.label=o,o.string=e):cc.log("tip   \u627e\u4e0d\u5230label")}else cc.log("tip   \u627e\u4e0d\u5230 node   label");return this.nowItem.opacity=0,cc.tween(this.nowItem).to(.8,{opacity:255}).start(),cc.tween(this.nowItem).by(.15,{position:cc.v3(0,60)}).start(),!0},t.prototype._removeTips=function(){this.lastItem&&(cc.Tween.stopAllByTarget(this.lastItem),this.lastItem.destroy()),this.lastItem=this.nowItem,this.nowItem=null,this.lastItem&&(cc.tween(this.lastItem).delay(.35).to(.8,{opacity:0},{easing:"quadIn"}).call(this.lastItem.removeFromParent.bind(this)).start(),cc.tween(this.lastItem).by(.25,{position:cc.v3(0,80)}).start()),this._isOpening=!1,this._tipList.length>0&&(this.showingNext=!0,this._showNext())},t.prototype.update=function(e){if(this._runTime+=e,!(this._runTime<.1)&&(this._runTime=0,this._isOpening&&this.isOpeningCount)){if(this.openTime++,this.openTime>this.maxOpenTime)return this.isOpeningCount=!1,void this._removeTips();if(this._tipList.length>0&&this.openTime>this.minOpenTime)return this.isOpeningCount=!1,void this._removeTips()}},r([c(cc.Node)],t.prototype,"item",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Confirm:[function(e,t,o){"use strict";cc._RF.push(t,"ba72fAeNg9IibgU7eIBYR7c","Confirm");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txts=[],t.btnConfirm=null,t.btnCancel=null,t.btnClose=null,t._confirm=null,t._cancel=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=t.text,n=t.confirm,i=t.cancel,r=t.close;t.autoClose,null==i&&(this.btnCancel.node.active=!1,this.btnConfirm.node.setPosition(0,this.btnConfirm.node.position.y),this.btnConfirm.node.width=270),this.btnClose.node.active=r,this.txts.forEach(function(e,t){return e.string=""+o[t]}),this._confirm=n,this._cancel=i},t.prototype.onClickConfirm=function(){this._confirm&&this._confirm(),this.close()},t.prototype.onClickCancel=function(){this._cancel&&this._cancel(),this.close()},r([l(cc.Label)],t.prototype,"txts",void 0),r([l(cc.Button)],t.prototype,"btnConfirm",void 0),r([l(cc.Button)],t.prototype,"btnCancel",void 0),r([l(cc.Button)],t.prototype,"btnClose",void 0),r([c],t)}(a.default);o.default=p,cc._RF.pop()},{"../../Framework/UIBase":"UIBase"}],Define:[function(e,t,o){"use strict";cc._RF.push(t,"9d4e4ZPBHxBDr1UOayG7XXC","Define"),Object.defineProperty(o,"__esModule",{value:!0}),o.EXCHANGE_TYPE=o.BACKGROUND_URL=o.STAGE_ICON_URL=o.SKILL_NAME=o.SKILL_ICON_URL=o.EQUIP_ICON_URL=o.EQUIP_QUALITY_ICON_URL=o.TALENT_ICON_URL_BY_ID=o.TALENT_ICON_URL=o.MONEY_ICON_URL=o.BubbleItemTag=o.ItemId=o.ItemTag=o.StoreExchangeType=o.UnlockType=o.Config=void 0,o.Config={debug:!1,debugAD:!1,isAdBanner:!1,isAdNative:!1,isAdInterstitial:!1,abTestType:1,abTest:{}},function(e){e[e.Idle=0]="Idle",e[e.NotUnlock=1]="NotUnlock",e[e.Max=2]="Max"}(o.UnlockType||(o.UnlockType={})),function(e){e[e.BuildSkill=0]="BuildSkill",e[e.Skill=1]="Skill",e[e.Ride=2]="Ride",e[e.Weapon=3]="Weapon",e[e.Pet=4]="Pet",e[e.Skin=5]="Skin",e[e.Back=6]="Back",e[e.Map=7]="Map"}(o.StoreExchangeType||(o.StoreExchangeType={})),function(e){e[e.ScoreFloatItem=99]="ScoreFloatItem"}(o.ItemTag||(o.ItemTag={})),o.ItemId||(o.ItemId={}),o.BubbleItemTag||(o.BubbleItemTag={}),o.MONEY_ICON_URL={money:"/Common/UI/ui_hb1",Money:"/Common/UI/ui_hb1",rMoney:"/Common/UI/ui_hb2",RMoney:"/Common/UI/ui_hb2",g1Money:"/Common/UI/ui_lbs",G1Money:"/Common/UI/ui_lbs",XiuLian:"/View/XiuLian/img/ui_xljm3"},o.TALENT_ICON_URL={0:"/Common/Icon/talentIcon/tb_tf1",1:"/Common/Icon/talentIcon/tb_tf2",2:"/Common/Icon/talentIcon/tb_tf3",3:"/Common/Icon/talentIcon/tb_tf4",4:"/Common/Icon/talentIcon/tb_tf5",5:"/Common/Icon/talentIcon/tb_tf6",6:"/Common/Icon/talentIcon/tb_tf7",7:"/Common/Icon/talentIcon/tb_tf8",8:"/Common/Icon/talentIcon/tb_tf9",9:"/Common/Icon/talentIcon/tb_tf10",10:"/Common/Icon/talentIcon/tb_tf11",11:"/Common/Icon/talentIcon/tb_tf12",12:"/Common/Icon/talentIcon/tb_tf13",13:"/Common/Icon/talentIcon/tb_tf14",14:"/Common/Icon/talentIcon/tb_tf15",15:"/Common/Icon/talentIcon/tb_tf16",16:"/Common/Icon/talentIcon/tb_tf17",17:"/Common/Icon/talentIcon/tb_tf18",18:"/Common/Icon/talentIcon/tb_tf19",19:"/Common/Icon/talentIcon/tb_tf20",20:"/Common/Icon/talentIcon/tb_tf21",21:"/Common/Icon/talentIcon/tb_tf22"},o.TALENT_ICON_URL_BY_ID={a_slevel_v:"/Common/Icon/talentIcon/tb_tf1",s_damage_p:"/Common/Icon/talentIcon/tb_tf2",a_crit_p:"/Common/Icon/talentIcon/tb_tf3",a_dodg_p:"/Common/Icon/talentIcon/tb_tf4",s_cd_p:"/Common/Icon/talentIcon/tb_tf5",a_bspeed_p:"/Common/Icon/talentIcon/tb_tf6",a_range_p:"/Common/Icon/talentIcon/tb_tf7",a_time_p:"/Common/Icon/talentIcon/tb_tf8",s_ehp_p:"/Common/Icon/talentIcon/tb_tf9",a_hps_p:"/Common/Icon/talentIcon/tb_tf10",a_hpm3_p:"/Common/Icon/talentIcon/tb_tf11",a_hlu_p:"/Common/Icon/talentIcon/tb_tf12",a_lucky_p:"/Common/Icon/talentIcon/tb_tf13",a_drop_p:"/Common/Icon/talentIcon/tb_tf14",a_exp_p:"/Common/Icon/talentIcon/tb_tf15",a_pickrange_p:"/Common/Icon/talentIcon/tb_tf16",a_hp_v:"/Common/Icon/talentIcon/tb_tf17",a_hp_p:"/Common/Icon/talentIcon/tb_tf18",a_atk_v:"/Common/Icon/talentIcon/tb_tf19",a_atk_p:"/Common/Icon/talentIcon/tb_tf20",a_critdmg_p:"/Common/Icon/talentIcon/tb_tf21",a_movespeed_v:"/Common/Icon/talentIcon/tb_tf22"},o.EQUIP_QUALITY_ICON_URL={0:"/Common/Icon/equipIcon/ui_itemk1",1:"/Common/Icon/equipIcon/ui_itemk2",2:"/Common/Icon/equipIcon/ui_itemk3",3:"/Common/Icon/equipIcon/ui_itemk4",4:"/Common/Icon/equipIcon/ui_itemk5",5:"/Common/Icon/equipIcon/ui_itemk6",6:"/Common/Icon/equipIcon/ui_itemk7"},o.EQUIP_ICON_URL={0:"/Common/Icon/equipIcon/tb_zb1",1:"/Common/Icon/equipIcon/tb_zb2",2:"/Common/Icon/equipIcon/tb_zb3",3:"/Common/Icon/equipIcon/tb_zb4",4:"/Common/Icon/equipIcon/tb_zb5",5:"/Common/Icon/equipIcon/tb_zb6",6:"/Common/Icon/equipIcon/tb_zb7",7:"/Common/Icon/equipIcon/tb_zb8",8:"/Common/Icon/equipIcon/tb_zb9",9:"/Common/Icon/equipIcon/tb_zb10",10:"/Common/Icon/equipIcon/tb_zb11",11:"/Common/Icon/equipIcon/tb_zb12",12:"/Common/Icon/equipIcon/tb_zb13",13:"/Common/Icon/equipIcon/tb_zb14",14:"/Common/Icon/equipIcon/tb_zb15",15:"/Common/Icon/equipIcon/tb_zb16",16:"/Common/Icon/equipIcon/tb_zb17",17:"/Common/Icon/equipIcon/tb_zb18",18:"/Common/Icon/equipIcon/tb_zb19",19:"/Common/Icon/equipIcon/tb_zb20",20:"/Common/Icon/equipIcon/tb_zb21",21:"/Common/Icon/equipIcon/tb_zb22",22:"/Common/Icon/equipIcon/tb_zb23",23:"/Common/Icon/equipIcon/tb_zb24",24:"/Common/Icon/equipIcon/tb_zb25",25:"/Common/Icon/equipIcon/tb_zb26",26:"/Common/Icon/equipIcon/tb_zb27",27:"/Common/Icon/equipIcon/tb_zb28",28:"/Common/Icon/equipIcon/tb_zb29",29:"/Common/Icon/equipIcon/tb_zb30"},o.SKILL_ICON_URL={dasuan:"/Common/Icon/skillIcon/tb_skill1",liuxingchui:"/Common/Icon/skillIcon/tb_skill2",zhadao:"/Common/Icon/skillIcon/tb_skill3",mozhua:"/Common/Icon/skillIcon/tb_skill4",xuanfeng:"/Common/Icon/skillIcon/tb_skill5",xuedizi:"/Common/Icon/skillIcon/tb_skill6",shufu:"/Common/Icon/skillIcon/tb_skill7",chushou:"/Common/Icon/skillIcon/tb_skill8",hudun:"/Common/Icon/skillIcon/tb_skill9",jiguang:"/Common/Icon/skillIcon/tb_skill10",gunshi:"/Common/Icon/skillIcon/tb_skill11",yunshi:"/Common/Icon/skillIcon/tb_skill12",huojian:"/Common/Icon/skillIcon/tb_skill13",feidao:"/Common/Icon/skillIcon/tb_skill14",bishou:"/Common/Icon/skillIcon/tb_skill15",leidian:"/Common/Icon/skillIcon/tb_skill16",jianta:"/Common/Icon/exchangeIcon/tb_dhjz1",zhengguo:"/Common/Icon/exchangeIcon/tb_dhjz4",qiang:"/Common/Icon/exchangeIcon/tb_dhjz3",dianwang:"/Common/Icon/exchangeIcon/tb_dhjz2",taijilun:"/Common/Icon/skillIcon/tb_skill18",banyue:"/Common/Icon/skillIcon/tb_skill20",quan:"/Common/Icon/skillIcon/tb_skill21"},o.SKILL_NAME={dasuan:"\u6c14\u573a",liuxingchui:"\u6d41\u661f\u9524",zhadao:"\u95f8\u5200",mozhua:"\u9b54\u722a",xuanfeng:"\u65cb\u98ce",xuedizi:"\u8840\u6ef4\u5b50",shufu:"\u5bd2\u51b0",chushou:"\u89e6\u624b",hudun:"\u62a4\u76fe",jiguang:"\u6307",gunshi:"\u6eda\u77f3",yunshi:"\u9668\u77f3",huojian:"\u706b\u7bad",feidao:"\u98de\u5200",bishou:"\u56de\u65cb\u9556",leidian:"\u96f7\u51fb",jianta:"\u4ed9\u4eba\u638c",zhengguo:"\u84b8\u9505",qiang:"\u5899",dianwang:"\u7535\u7f51",taijilun:"\u592a\u6781\u8f6e",banyue:"\u65b0\u6708",quan:"\u62f3"},o.STAGE_ICON_URL={0:"/View/StageMap/stageObj/cc1",1:"/View/StageMap/stageObj/cc2",2:"/View/StageMap/stageObj/cc3",3:"/View/StageMap/stageObj/cc4",4:"/View/StageMap/stageObj/cc5",5:"/View/StageMap/stageObj/cc6",6:"/View/StageMap/stageObj/cc7",7:"/View/StageMap/stageObj/cc8",8:"/View/StageMap/stageObj/cc9",9:"/View/StageMap/stageObj/cc1b",10:"/View/StageMap/stageObj/ui_tgyz"},o.BACKGROUND_URL=["/Bg/map1","/Bg/map2","/Bg/map3","/Bg/map4"],function(e){e[e.Skill_0=0]="Skill_0",e[e.Skill_1=1]="Skill_1",e[e.Ride=2]="Ride",e[e.Weapon=3]="Weapon",e[e.Pet=4]="Pet",e[e.Skin=5]="Skin",e[e.Back=6]="Back",e[e.Background=7]="Background"}(o.EXCHANGE_TYPE||(o.EXCHANGE_TYPE={})),cc._RF.pop()},{}],DrawSkill:[function(e,t,o){"use strict";cc._RF.push(t,"54b24nSrC1Pt67ZoBZ36WN7","DrawSkill");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/UI/UIFacade"),u=e("../../../Framework/UI/UIMgr"),d=e("../../../Framework/UIBase"),h=e("../../../Model/WeaponModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pages=[],t.toggles=null,t.graphics=null,t.graphics2=null,t.txtDesc=null,t._pageIdx=0,t._width=20,t._color=cc.color(0,0,0),t._tempDrawPoints=[],t._tempDrawPointsAll=[],t._tempDrawColorsAll=[],t._box=null,t._drawId=null,t}return i(t,e),t.prototype.onOpen=function(){var e=this;this.pages.forEach(function(t,o){return t.active=o==e._pageIdx}),this._box=this.graphics.node.getBoundingBoxToWorld(),this.graphics.strokeColor=this._color,this.graphics.node.on(cc.Node.EventType.TOUCH_START,this.onClickDraw,this),this.graphics.node.on(cc.Node.EventType.TOUCH_END,this.onClickDraw,this),this.graphics.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onClickDraw,this),this.graphics.node.on(cc.Node.EventType.TOUCH_MOVE,this.onClickDraw,this),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){u.default.inst.isUIOpen(c.UIType.SelectWeapon)||u.default.inst.isUIOpen(c.UIType.EliteBox)||u.default.inst.isUIOpen(c.UIType.FightEquip)||l.EVENT.emit(s.EventId.ON_GAME_RESUME)},t.prototype.onClickDraw=function(e){switch(e.type){case cc.Node.EventType.TOUCH_START:break;case cc.Node.EventType.TOUCH_END:case cc.Node.EventType.TOUCH_CANCEL:this._tempDrawColorsAll.push({x:this._color.r,y:this._color.g,z:this._color.b}),this._tempDrawPointsAll.push(this._tempDrawPoints),this._tempDrawPoints=[];break;case cc.Node.EventType.TOUCH_MOVE:var t=e.getLocation();t.x>this._box.xMax&&(t.x=this._box.xMax),t.x<this._box.xMin&&(t.x=this._box.xMin),t.y>this._box.yMax&&(t.y=this._box.yMax),t.y<this._box.yMin&&(t.y=this._box.yMin);var o=this.graphics.node.convertToNodeSpaceAR(t);this.draw(o,this.graphics)}},t.prototype.onClickToggle=function(e){switch(e.node.getSiblingIndex()){case 0:this._color=cc.Color.BLACK;break;case 1:this._color=cc.Color.RED;break;case 2:this._color=cc.Color.YELLOW;break;case 3:this._color=cc.Color.BLUE;break;case 4:this._color=cc.Color.GREEN}this.graphics.strokeColor=this._color},t.prototype.onClickSwitch=function(){var e=this;a.default.inst.showAd("\u6362\u4e2a\u6548\u679c",function(){e._drawId=h.WeaponModel.inst.getRandomDraw(e._drawId),e.txtDesc.string=h.WeaponModel.inst.weaponDrawList[e._drawId][0].desc})},t.prototype.onClickNext=function(){var e=this;switch(this._pageIdx){case 1:if(0==this._tempDrawPointsAll.length)return void p.UIFacade.showToast("\u4f60\u8fd8\u6ca1\u753b\u5462\uff01");h.WeaponModel.inst.tempDrawPointsAll=this._tempDrawPointsAll,h.WeaponModel.inst.tempDrawColorsAll=this._tempDrawColorsAll,this._drawId=h.WeaponModel.inst.getRandomDraw(),this.txtDesc.string=h.WeaponModel.inst.weaponDrawList[this._drawId][0].desc,this.recovery();break;case 2:return l.EVENT.emit(s.EventId.ON_GAME_DRAW_SKILL_LEVEL_UP,this._drawId,1),void this.close()}this._pageIdx++,this.pages.forEach(function(t,o){return t.active=o==e._pageIdx})},t.prototype.draw=function(e,t){var o=this._tempDrawPoints.length;if(this._tempDrawPoints.push({x:e.x,y:e.y}),o<=1)t.circle(e.x,e.y,this._width/2),t.fill();else{var n=this._tempDrawPoints[o-2],i=this._tempDrawPoints[o-1];t.moveTo(n.x,n.y),t.lineTo(i.x,i.y),t.lineWidth=this._width,t.lineCap=cc.Graphics.LineCap.ROUND,t.lineJoin=cc.Graphics.LineJoin.ROUND,t.strokeColor=this._color,t.stroke()}},t.prototype.recovery=function(){var e=this._tempDrawPointsAll.concat();for(var t in e){var o=e[t],n=this._tempDrawColorsAll[t];this._color=cc.color(n.x,n.y,n.z);for(var i=0,r=o;i<r.length;i++){var a=r[i];this.draw(a,this.graphics2)}this._tempDrawPoints=[]}},r([y([cc.Node])],t.prototype,"pages",void 0),r([y(cc.ToggleContainer)],t.prototype,"toggles",void 0),r([y(cc.Graphics)],t.prototype,"graphics",void 0),r([y(cc.Graphics)],t.prototype,"graphics2",void 0),r([y(cc.Label)],t.prototype,"txtDesc",void 0),r([_],t)}(d.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/WeaponModel":"WeaponModel"}],EliteBox:[function(e,t,o){"use strict";cc._RF.push(t,"b20b265LaRFdZJuujuwtNm2","EliteBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/UI/UIMgr"),u=e("../../../Framework/UIBase"),d=e("../../../Model/WeaponModel"),h=e("./SelectWeaponItem"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectWeapons=[],t.spine=null,t.content=null,t.ani=null,t._skillList=[],t}return i(t,e),t.prototype.onOpen=function(){var e=this;this.content.active=!1;var t=this.spine.setAnimation(0,"idle2",!1);this.spine.setTrackCompleteListener(t,function(){e.spine.setAnimation(0,"idle3",!0)}),this.spine.setTrackEventListener(t,function(){e.content.active=!0,e.ani.play()}),this.getWeapon(),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){p.default.inst.isUIOpen(c.UIType.SelectWeapon)||p.default.inst.isUIOpen(c.UIType.EliteBox)||p.default.inst.isUIOpen(c.UIType.FightEquip)||p.default.inst.isUIOpen(c.UIType.DrawSkill)||l.EVENT.emit(s.EventId.ON_GAME_RESUME)},t.prototype.getWeapon=function(){for(var e=d.WeaponModel.inst.getRandomExtra(1),t=e.length,o=0;o<t;o++){var n=e[o];(i=this.selectWeapons[o]).node.active=!0,i.setInfo(n)}for(;o<this.selectWeapons.length;o++){var i;(i=this.selectWeapons[o]).node.active=!1}this._skillList=e},t.prototype.getWeaponLevelUp=function(){for(var e=0;e<this._skillList.length;e++){var t=this._skillList[e],o=this.selectWeapons[e].node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP_EXTRA,t.id,t.info.lv),l.EVENT.emit(s.EventId.ON_UI_GAME_FLY_SKILL,o,t.id)}},t.prototype.onClickGet=function(){this.getWeaponLevelUp(),this.close()},t.prototype.onClickGetAD=function(){var e=this;a.default.inst.showAd("\u7cbe\u82f1\u5b9d\u7bb1",function(){e.getWeaponLevelUp(),e.getWeaponLevelUp(),e.close()})},r([y([h.default])],t.prototype,"selectWeapons",void 0),r([y(sp.Skeleton)],t.prototype,"spine",void 0),r([y(cc.Node)],t.prototype,"content",void 0),r([y(cc.Animation)],t.prototype,"ani",void 0),r([_],t)}(u.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/WeaponModel":"WeaponModel","./SelectWeaponItem":"SelectWeaponItem"}],EventId:[function(e,t,o){"use strict";cc._RF.push(t,"11b6fpZP7FGr7WF79E8hZzj","EventId"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventId=void 0,o.EventId={ON_NODE_POOL_REUSE:"EventId.ON_NODE_POOL_REUSE",ON_NODE_POOL_UNUSE:"EventId.ON_NODE_POOL_UNUSE",CHANGE_SCENE:"EventId.CHANGE_SCENE",EVENT_CONFIRM:"EventId.EVENT_CONFIRM",ON_ORIENTATION_CHANGE:"EventId.ON_ORIENTATION_CHANGE",ON_UI_OPEN:"EventId.EVENT_ON_UI_OPEN",ON_UI_CLOSE:"EventId.EVENT_ON_UI_CLOSE",ON_UI_OPEN_FAIL:"EventId.ON_UI_OPEN_FAIL",ON_UI_MAIN_FLY_ICON:"EventId.ON_UI_MAIN_FLY_ICON",ON_UI_MAIN_FLY_XIULIAN:"EventId.ON_UI_MAIN_FLY_XIULIAN",ON_UI_GAME_FLY_EQUIP:"EventId.ON_UI_GAME_FLY_EQUIP",ON_UI_GAME_FLY_SKILL:"EventId.ON_UI_GAME_FLY_SKILL",ON_LOGIN_RET:"EventId.ON_LOGIN_RET",ON_UPDATE_LOADING_PROGRESS:"EventId.ON_UPDATE_LOADING_PROGRESS",ON_UPDATE_LOADING_END:"EventId.ON_UPDATE_LOADING_END",ON_UPDATE_LOADING_TTP:"EventId.ON_UPDATE_LOADING_TTP",ON_REFUSE_ITEM_NUM:"ON_REFUSE_ITEM_NUM",ON_REFUSE_STORE:"ON_REFUSE_STORE",ON_REFUSE_TASK:"ON_REFUSE_TASK",ON_GAME_PAUSE:"ON_GAME_PAUSE",ON_GAME_RESUME:"ON_GAME_RESUME",ON_GAME_START:"ON_GAME_START",ON_GAME_LOAD:"ON_GAME_LOAD",ON_GAME_LOADED:"ON_GAME_LOADED",ON_GAME_RESULT:"ON_GAME_RESULT",ON_GAME_OVER:"ON_GAME_OVER",ON_GAME_READY_START:"ON_GAME_READY_START",ON_GAME_READY_END:"ON_GAME_READY_END",ON_GAME_ROUND_START:"ON_GAME_ROUND_START",ON_GAME_ROUND_END:"ON_GAME_ROUND_END",ON_GAME_SKILL_LEVEL_UP:"ON_GAME_SKILL_LEVEL_UP",ON_GAME_SKILL_LEVEL_UP_EXTRA:"ON_GAME_SKILL_LEVEL_UP_EXTRA",ON_GAME_DRAW_SKILL_LEVEL_UP:"ON_GAME_DRAW_SKILL_LEVEL_UP",ON_GAME_SKILL_REFUSE:"ON_GAME_SKILL_REFUSE",ON_GAME_DRAW_SKILL_REFUSE:"ON_GAME_DRAW_SKILL_REFUSE",ON_GAME_PLAYER_HIT:"ON_GAME_PLAYER_HIT",ON_GAME_PLAYER_REVIVE:"ON_GAME_PLAYER_REVIVE",ON_REFRESH_ROLE:"ON_REFRESH_ROLE",ON_REFRESH_RIDE:"ON_REFRESH_RIDE",ON_REFRESH_PET:"ON_REFRESH_PET",ON_REFRESH_SKIN:"ON_REFRESH_SKIN",ON_REFRESH_FIGHT_EQUIP:"ON_REFRESH_FIGHT_EQUIP",ON_GAME_UPDATE_ROLE_POS:"ON_GAME_ROLE_POS",ON_AD_NATIVE_COMPLETE:"EventId.ON_AD_NATIVE_COMPLETE"},cc._RF.pop()},{}],EventMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0b580U6y3NDDoFSQ+d5eIuN","EventMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT=void 0;var r=function(e){function t(){return e.call(this)||this}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return t._inst||(t._inst=new t)},enumerable:!1,configurable:!0}),t}(cc.EventTarget);o.EVENT=r.inst,cc._RF.pop()},{}],FightEquipGuide:[function(e,t,o){"use strict";cc._RF.push(t,"d3683pd1ppIS7LASNviemXh","FightEquipGuide");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onOpen=function(){},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],FightEquipItem:[function(e,t,o){"use strict";cc._RF.push(t,"78ae864XXpAeLPn2P+Lt29T","FightEquipItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.spQuality=null,t.txtName=null,t.txtMsg=null,t._data=null,t}return i(t,e),t.prototype.setData=function(e){var t=this;if(null==e)this.icon.spriteFrame=null,this.loadBundleRes("Textures",a.EQUIP_QUALITY_ICON_URL[0],cc.SpriteFrame,function(e,o){var n=t.spQuality.spriteFrame;t.spQuality.spriteFrame=null,t.spQuality.spriteFrame=o,t.releaseAsset(n)}),this.txtName.string="",this.txtMsg.string="";else{this.loadBundleRes("Textures",a.EQUIP_ICON_URL[e.icon-1],cc.SpriteFrame,function(e,o){var n=t.icon.spriteFrame;t.icon.spriteFrame=null,t.icon.spriteFrame=o,t.releaseAsset(n)}),this.loadBundleRes("Textures",a.EQUIP_QUALITY_ICON_URL[e.quality+1],cc.SpriteFrame,function(e,o){var n=t.spQuality.spriteFrame;t.spQuality.spriteFrame=null,t.spQuality.spriteFrame=o,t.releaseAsset(n)});for(var o="",n=0,i=e.desc;n<i.length;n++)o+=i[n]+"\n";switch(this.txtName.string=""+e.name,this.txtMsg.string=""+o,e.quality){case 0:this.txtName.node.color=cc.color(30,255,30),this.txtMsg.node.color=cc.color(30,255,30);break;case 1:this.txtName.node.color=cc.color(0,168,255),this.txtMsg.node.color=cc.color(0,168,255);break;case 2:this.txtName.node.color=cc.color(255,0,255),this.txtMsg.node.color=cc.color(255,0,255);break;case 3:this.txtName.node.color=cc.color(255,155,12),this.txtMsg.node.color=cc.color(255,155,12);break;case 4:this.txtName.node.color=cc.color(255,255,0),this.txtMsg.node.color=cc.color(255,255,0);break;case 5:this.txtName.node.color=cc.color(255,0,0),this.txtMsg.node.color=cc.color(255,0,0)}}this._data=e},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([p(cc.Sprite)],t.prototype,"spQuality",void 0),r([p(cc.Label)],t.prototype,"txtName",void 0),r([p(cc.Label)],t.prototype,"txtMsg",void 0),r([l],t)}(s.default);o.default=u,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/Res/ResKeeper":"ResKeeper"}],FightEquipTips:[function(e,t,o){"use strict";cc._RF.push(t,"869774O8/5O/a8f2KVOcOP9","FightEquipTips");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("../../../Framework/UIBase"),l=e("../../../Model/GameModel"),p=e("./FightEquipItem"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t._data=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=t;this.item.setData(o),this._data=o},t.prototype.onClickUnEquip=function(){var e=this,t=l.GameModel.inst.fightList.findIndex(function(t){return t&&t.type==e._data.type});delete l.GameModel.inst.fightList[t],s.EVENT.emit(a.EventId.ON_REFRESH_FIGHT_EQUIP),this.close()},r([h(p.default)],t.prototype,"item",void 0),r([d],t)}(c.default);o.default=f,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/GameModel":"GameModel","./FightEquipItem":"FightEquipItem"}],FightEquip:[function(e,t,o){"use strict";cc._RF.push(t,"514823GuQVGAJX7rAws7joM","FightEquip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/TableMgr"),s=e("../../../Define/Define"),c=e("../../../Define/EventId"),l=e("../../../Define/UIDefs"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/UI/UIFacade"),d=e("../../../Framework/UI/UIMgr"),h=e("../../../Framework/UIBase"),f=e("../../../Model/AchievementModel"),_=e("../../../Model/GameModel"),y=e("./FightEquipItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cur=null,t.new=null,t.list=[],t.txtEquip=null,t.btnEquip=null,t.btnUnEquip=null,t.btnClose=null,t._data=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=this,n=t;if(null==n)this.cur.node.active=!1,this.new.node.active=!1,this.btnEquip.node.active=!1,this.btnUnEquip.node.active=!1,this.btnClose.node.active=!0;else{this.btnClose.node.active=!1;var i=a.TABLE.getTable("FightEquip").find(function(e){return e.id==n});this.new.setData(i),this._data=i;for(var r=0,s=_.GameModel.inst.fightList;r<s.length;r++){var l=s[r];if(null!=l&&l.type==i.type){l.quality<i.quality&&(this.txtEquip.string="\u5347\u7ea7");break}}}this.list.forEach(function(e){return e.node.on(cc.Node.EventType.TOUCH_END,o.onClickItem,o)}),this.updateFightList(),p.EVENT.emit(c.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){d.default.inst.isUIOpen(l.UIType.SelectWeapon)||d.default.inst.isUIOpen(l.UIType.EliteBox)||d.default.inst.isUIOpen(l.UIType.DrawSkill)||d.default.inst.isUIOpen(l.UIType.DrawSkill)||p.EVENT.emit(c.EventId.ON_GAME_RESUME)},t.prototype.onEnable=function(){p.EVENT.on(c.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateFightList,this)},t.prototype.onDisable=function(){p.EVENT.off(c.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateFightList,this)},t.prototype.updateFightList=function(){for(var e=0;e<this.list.length;e++)this.list[e].setData(_.GameModel.inst.fightList[e])},t.prototype.onClickItem=function(e){var t=e.target.getSiblingIndex();null!=_.GameModel.inst.fightList[t]&&d.default.inst.open(l.UIType.FightEquipTips,_.GameModel.inst.fightList[t])},t.prototype.onClickEquip=function(){var e=this,t=_.GameModel.inst.fightList.findIndex(function(e){return null==e}),o=_.GameModel.inst.fightList.findIndex(function(t){return t&&t.type==e._data.type});if(o>=0)_.GameModel.inst.fightList[o]=this._data;else{if(!(t>=0))return void u.UIFacade.showToast("\u9053\u5177\u680f\u5df2\u6ee1");_.GameModel.inst.fightList[t]=this._data}f.AchievementModel.inst.updatePoint(2,this._data.id),null!=this._data.skill&&""!=this._data.skill&&f.AchievementModel.inst.updatePoint(22,this._data.id),p.EVENT.emit(c.EventId.ON_REFRESH_FIGHT_EQUIP);var n=this.cur.node.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(c.EventId.ON_UI_GAME_FLY_EQUIP,n,this._data),this.close()},t.prototype.onClickUnEquip=function(){this.close()},t.prototype.onClickEquipGuide=function(){s.Config.isAdBanner?d.default.inst.open(l.UIType.FightEquipGuideB):d.default.inst.open(l.UIType.FightEquipGuide)},r([v(y.default)],t.prototype,"cur",void 0),r([v(y.default)],t.prototype,"new",void 0),r([v([y.default])],t.prototype,"list",void 0),r([v(cc.Label)],t.prototype,"txtEquip",void 0),r([v(cc.Button)],t.prototype,"btnEquip",void 0),r([v(cc.Button)],t.prototype,"btnUnEquip",void 0),r([v(cc.Button)],t.prototype,"btnClose",void 0),r([m],t)}(h.default);o.default=M,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/AchievementModel":"AchievementModel","../../../Model/GameModel":"GameModel","./FightEquipItem":"FightEquipItem"}],GameBase:[function(e,t,o){"use strict";cc._RF.push(t,"bc33cnjl0dCSavtH+OorQYU","GameBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameBase=void 0;var a=e("../Define/EventId"),s=e("../Framework/Event/EventMgr"),c=e("../Framework/Res/ResKeeperAddition"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this),s.EVENT.on(a.EventId.ON_GAME_START,this.gameStart,this),s.EVENT.on(a.EventId.ON_GAME_LOAD,this.gameLoad,this),s.EVENT.on(a.EventId.ON_GAME_RESULT,this.gameResult,this),s.EVENT.on(a.EventId.ON_GAME_OVER,this.gameOver,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this),s.EVENT.off(a.EventId.ON_GAME_START,this.gameStart,this),s.EVENT.off(a.EventId.ON_GAME_LOAD,this.gameLoad,this),s.EVENT.off(a.EventId.ON_GAME_RESULT,this.gameResult,this),s.EVENT.off(a.EventId.ON_GAME_OVER,this.gameOver,this)},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.gameStart=function(){},t.prototype.gameLoad=function(){},t.prototype.gameResult=function(){},t.prototype.gameOver=function(){},r([p],t)}(c.default));o.GameBase=u,cc._RF.pop()},{"../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Res/ResKeeperAddition":"ResKeeperAddition"}],GameItemBase:[function(e,t,o){"use strict";cc._RF.push(t,"4eb96tDM/lJcrdWMMo1pI4Y","GameItemBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameItemBase=void 0;var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.init=function(e){this._info=e},t.prototype.recycle=function(){},r([s],t)}(cc.Component));o.GameItemBase=c,cc._RF.pop()},{}],GameItemMgr:[function(e,t,o){"use strict";cc._RF.push(t,"ce113njI2JEMLy6Z50zXB+1","GameItemMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s,c=e("../Framework/Res/ResKeeperAddition"),l=e("../Game/Items/ComHitBeEffect"),p=e("../Game/Items/ComHitEffect"),u=e("../Game/Items/ComHitNum"),d=e("../Game/Items/HpBar"),h=e("../Model/GameModel"),f=e("./GameItemBase"),_=e("./LayerMgr"),y=cc._decorator;y.ccclass,y.property,function(e){e[e.HitBeEffect=0]="HitBeEffect",e[e.HitEffect=1]="HitEffect",e[e.HitMiss=2]="HitMiss",e[e.HitNum=3]="HitNum",e[e.HitNumC=4]="HitNumC",e[e.PickUpBox=5]="PickUpBox",e[e.PickUpEquip=6]="PickUpEquip",e[e.PickUpExp=7]="PickUpExp",e[e.PickUpLbs=8]="PickUpLbs",e[e.PickUpFood=9]="PickUpFood",e[e.Revive=10]="Revive",e[e.HpBar=11]="HpBar",e[e.HpBar2=12]="HpBar2"}(s||(s={}));var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){return r(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.loadItemPool(s.HitBeEffect,"Prefabs","/Game/Items/HitBeEffect",f.GameItemBase)];case 1:return e.sent(),[4,this.loadItemPool(s.HitEffect,"Prefabs","/Game/Items/HitEffect",f.GameItemBase)];case 2:return e.sent(),[4,this.loadItemPool(s.HitMiss,"Prefabs","/Game/Items/HitMiss",f.GameItemBase)];case 3:return e.sent(),[4,this.loadItemPool(s.HitNum,"Prefabs","/Game/Items/HitNum",f.GameItemBase)];case 4:return e.sent(),[4,this.loadItemPool(s.HitNumC,"Prefabs","/Game/Items/HitNumC",f.GameItemBase)];case 5:return e.sent(),[4,this.loadItemPool(s.PickUpBox,"Prefabs","/Game/Items/PickUpBox",f.GameItemBase)];case 6:return e.sent(),[4,this.loadItemPool(s.PickUpEquip,"Prefabs","/Game/Items/PickUpEquip",f.GameItemBase)];case 7:return e.sent(),[4,this.loadItemPool(s.PickUpExp,"Prefabs","/Game/Items/PickUpExp",f.GameItemBase)];case 8:return e.sent(),[4,this.loadItemPool(s.PickUpLbs,"Prefabs","/Game/Items/PickUpLbs",f.GameItemBase)];case 9:return e.sent(),[4,this.loadItemPool(s.PickUpFood,"Prefabs","/Game/Items/PickUpFood",f.GameItemBase)];case 10:return e.sent(),[4,this.loadItemPool(s.Revive,"Prefabs","/Game/Items/Revive")];case 11:return e.sent(),[4,this.loadItemPool(s.HpBar,"Prefabs","/Game/Items/HpBar")];case 12:return e.sent(),[4,this.loadItemPool(s.HpBar2,"Prefabs","/Game/Items/HpBar2")];case 13:return e.sent(),[2]}})})},t.prototype.generateHitNum=function(e,t){var o=this,n=s.HitNum,i=this.get(n),r=_.LayerMgr.inst.TopLayer;i.setParent(r);var a=30*Math.random()-15;i.setPosition(e.x+a,e.y+a);var c=i.getComponent(u.default);return c.play(t),c.recycle=function(){return o.put(n,i)},i},t.prototype.generateHitNumC=function(e,t){var o=this,n=s.HitNumC,i=this.get(n),r=_.LayerMgr.inst.TopLayer;i.setParent(r);var a=30*Math.random()-15;i.setPosition(e.x+a,e.y+a);var c=i.getComponent(u.default);return c.play(t),c.recycle=function(){return o.put(n,i)},i},t.prototype.generateHitMiss=function(e){var t=this,o=s.HitMiss,n=this.get(o),i=_.LayerMgr.inst.TopLayer;n.setParent(i);var r=30*Math.random()-15;n.setPosition(e.x+r,e.y+r);var a=n.getComponent(u.default);return a.play(0),a.recycle=function(){return t.put(o,n)},n},t.prototype.generateHitEffect=function(e){var t=this,o=s.HitEffect,n=this.get(o),i=_.LayerMgr.inst.TopLayer;n.setParent(i),n.setPosition(e.x,e.y);var r=n.getComponent(p.ComHitEffect);return r.playAnim(),r.recycle=function(){return t.put(o,n)},n},t.prototype.generateHitBeEffect=function(e){var t=this,o=s.HitBeEffect,n=this.get(o),i=_.LayerMgr.inst.TopLayer;n.setParent(i),n.setPosition(e.x,e.y);var r=n.getComponent(l.ComHitBeEffect);return r.playAnim(),r.recycle=function(){return t.put(o,n)},n},t.prototype.generateBox=function(e){var t=this,o=s.PickUpBox,n=this.get(o),i=_.LayerMgr.inst.Equip1Layer;return n.setParent(i),n.setPosition(e.x,e.y),n.getComponent(f.GameItemBase).recycle=function(){return t.put(o,n)},n},t.prototype.generateEquip=function(e,t){var o=this,n=s.PickUpEquip,i=this.get(n),r=_.LayerMgr.inst.Equip2Layer;i.setParent(r),i.setPosition(e.x,e.y);var a=i.getComponent(f.GameItemBase);return a.init(t),a.recycle=function(){return o.put(n,i)},i},t.prototype.generateExp=function(e){var t=this,o=s.PickUpExp,n=this.get(o),i=_.LayerMgr.inst.ItemLayer;return n.setParent(i),n.setPosition(e.x,e.y),n.getComponent(f.GameItemBase).recycle=function(){return t.put(o,n)},n},t.prototype.generateLbs=function(e){var t=this,o=s.PickUpLbs,n=this.get(o),i=_.LayerMgr.inst.ItemLayer;return n.setParent(i),n.setPosition(e.x,e.y),n.getComponent(f.GameItemBase).recycle=function(){return t.put(o,n)},n},t.prototype.generateFood=function(e){var t=this,o=s.PickUpFood,n=this.get(o),i=_.LayerMgr.inst.EquipLayer;return n.setParent(i),n.setPosition(e.x,e.y),n.getComponent(f.GameItemBase).recycle=function(){return t.put(o,n)},n},t.prototype.generateRevive=function(e){var t=this,o=s.Revive,n=this.get(o),i=h.GameModel.inst.player.node;n.setParent(i),n.setPosition(0,0);var r=n.getComponent(sp.Skeleton),a=r.setAnimation(0,r.defaultAnimation,!1);r.setTrackCompleteListener(a,function(){t.put(o,n),e&&e()})},t.prototype.generateHpBar=function(e,t){var o=this;void 0===t&&(t=0);var n=s.HpBar,i=this.get(n),r=_.LayerMgr.inst.HpLayer;i.setParent(r);var a=i.getComponent(d.default);return a.setTarget(e,t),a.recycle=function(){return o.put(n,i)},i},t.prototype.generateHpBar2=function(e,t){var o=this;void 0===t&&(t=0);var n=s.HpBar2,i=this.get(n),r=_.LayerMgr.inst.HpLayer;i.setParent(r);var a=i.getComponent(d.default);return a.setTarget(e,t),a.recycle=function(){return o.put(n,i)},i},t}(c.default);o.default=g,cc._RF.pop()},{"../Framework/Res/ResKeeperAddition":"ResKeeperAddition","../Game/Items/ComHitBeEffect":"ComHitBeEffect","../Game/Items/ComHitEffect":"ComHitEffect","../Game/Items/ComHitNum":"ComHitNum","../Game/Items/HpBar":"HpBar","../Model/GameModel":"GameModel","./GameItemBase":"GameItemBase","./LayerMgr":"LayerMgr"}],GameModel:[function(e,t,o){"use strict";cc._RF.push(t,"17d5ceNpfNF3YpAH2oZtTp6","GameModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameModel=void 0;var n=e("../Controller/TableMgr"),i=e("../Define/EventId"),r=e("../Framework/Event/EventMgr"),a=e("../Framework/Utils/Utils"),s=e("../Framework/VM"),c=e("./WeaponModel"),l=function(){function e(){this.isLoad=!1,this._loadRef=0,this.isGuide=!1,this.isPause=!0,this.isFinished=!1,this._money=0,this._rMoney=0,this._g1Money=0,this._stage=0,this._wave=0,this._waveMax=0,this._time=0,this._monster=0,this._monsterList=[],this._exp=0,this._level=0,this._fightList=[null,null,null,null,null,null],this._orientation={x:-1,y:0},this._player=null,this._immune=0,this._revive=0,this._buildGCD=0,s.VM.add(this,"GameModel")}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"money",{get:function(){return this._money},set:function(e){this._money=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rMoney",{get:function(){return this._rMoney},set:function(e){this._rMoney=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fightList",{get:function(){return this._fightList},set:function(e){this._fightList=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},set:function(e){this._stage=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wave",{get:function(){return this._wave},set:function(e){this._wave=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g1Money",{get:function(){return this._g1Money},set:function(e){this._g1Money=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monster",{get:function(){return this._monster},set:function(e){this._monster=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this._time},set:function(e){this._time=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monsterList",{get:function(){return this._monsterList},set:function(e){this._monsterList=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e;var t=n.TABLE.getPlayerLevel()[this._level+1];null!=t&&this._exp>=t&&(this._exp-=t,this._level++,c.WeaponModel.inst.skillPoint++,this.exp=this._exp)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buildGCD",{get:function(){return this._buildGCD},set:function(e){this._buildGCD=e},enumerable:!1,configurable:!0}),e.prototype.getLevelExp=function(){var e=n.TABLE.getPlayerLevel()[this._level+1];return null==e?0:e},Object.defineProperty(e.prototype,"waveMax",{get:function(){return this._waveMax},set:function(e){this._waveMax=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"player",{get:function(){return this._player},set:function(e){this._player=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"immune",{get:function(){return this._immune},set:function(e){this._immune=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"revive",{get:function(){return this._revive},set:function(e){this._revive=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadRef",{get:function(){return this._loadRef},set:function(e){this.isLoad&&(this._loadRef=e,0==this._loadRef&&r.EVENT.emit(i.EventId.ON_GAME_LOADED))},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._money=0,this._rMoney=0,this._stage=0,this._wave=0,this._waveMax=0,this._time=0,this._monster=0,this._monsterList=[],this._exp=0,this._level=0,this._fightList=[null,null,null,null,null,null],this._orientation={x:-1,y:0},this._immune=0,this._revive=0,this.isFinished=!1},e.prototype.findRandMonster=function(){var e=[];return this._monsterList.forEach(function(t){return t.hp>0&&e.push(t.node)}),a.default.getRandToArray(e)},e.prototype.findRandMonsters=function(e){var t=[];return this._monsterList.forEach(function(e){return e.hp>0&&t.push(e.node)}),a.default.RandomSome(t,e)},e.prototype.findNearMonsters=function(e){var t=[];this._monsterList.forEach(function(e){return e.hp>0&&t.push(e.node)});var o=this._player.node.position;t.sort(function(e,t){return cc.Vec2.distance(o,e.position)-cc.Vec2.distance(o,t.position)});for(var n=[],i=0;i<e;i++)t[i]&&n.push(t[i]);return n},e.prototype.findDistanceRandMonsters=function(e,t,o){void 0===t&&(t=100),void 0===o&&(o=this._player.node.position);var n=[];return this._monsterList.forEach(function(e){return e.hp>0&&n.push(e.node)&&cc.Vec2.distance(o,e.node.position)<t}),a.default.RandomSome(n,e)},e.prototype.findDistanceNearMonsters=function(e,t,o){void 0===t&&(t=100),void 0===o&&(o=this._player.node.position);var n=[];this._monsterList.forEach(function(e){return e.hp>0&&n.push(e.node)&&cc.Vec2.distance(o,e.node.position)<t}),n.sort(function(e,t){return cc.Vec2.distance(o,e.position)-cc.Vec2.distance(o,t.position)});for(var i=[],r=0;r<e;r++)n[r]&&i.push(n[r]);return i},e._inst=null,e}();o.GameModel=l,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Utils/Utils":"Utils","../Framework/VM":"VM","./WeaponModel":"WeaponModel"}],GameOver:[function(e,t,o){"use strict";cc._RF.push(t,"06bb1EonLhCn7mtzfrPQNUu","GameOver");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/AdMgr"),s=e("../../Define/Define"),c=e("../../Define/EventId"),l=e("../../Framework/Audio/AudioMgr"),p=e("../../Framework/Event/EventMgr"),u=e("../../Framework/UIBase"),d=e("../../Model/GameModel"),h=e("../../Model/UserModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spineBg=null,t.txtTittle=null,t.nodeMoney=null,t.txtMoney=null,t.nodeRMoney=null,t.txtRMoney=null,t.nodeG1Money=null,t.txtG1Money=null,t.btnRevive=null,t.btnAD=null,t._cbReward=null,t}return i(t,e),t.prototype.onOpen=function(){p.EVENT.emit(c.EventId.ON_GAME_PAUSE),d.GameModel.inst.isFinished||0!=d.GameModel.inst.revive?this.btnRevive.node.active=!1:(this.btnRevive.node.active=!0,this.btnAD.node.active=!1),d.GameModel.inst.isFinished?(h.UserModel.inst.selectStage==h.UserModel.inst.curStage&&h.UserModel.inst.curStage++,l.AudioMgr.inst.playEffectByName("stageFinish"),this.spineBg.setAnimation(0,"idle1",!0),this.txtTittle.string="\u5f53\u524d\n\u5956\u52b1"):(l.AudioMgr.inst.playEffectByName("gameOver"),this.spineBg.setAnimation(0,"idle2",!0),this.txtTittle.string="\u901a\u5173\n\u5956\u52b1"),d.GameModel.inst.money>0?(this.nodeMoney.active=!0,this.txtMoney.string="x"+d.GameModel.inst.money):this.nodeMoney.active=!1,d.GameModel.inst.rMoney>0?(this.nodeRMoney.active=!0,this.txtRMoney.string="x"+d.GameModel.inst.rMoney):this.nodeRMoney.active=!1,d.GameModel.inst.g1Money>0?(this.nodeG1Money.active=!0,this.txtG1Money.string="x"+d.GameModel.inst.g1Money):this.nodeG1Money.active=!1},t.prototype.onClose=function(){this._cbReward&&this._cbReward()},t.prototype.onClickRevive=function(){var e=this;a.default.inst.showAd("\u5c40\u5185\u590d\u6d3b",function(){p.EVENT.emit(c.EventId.ON_GAME_PLAYER_REVIVE),e.close()})},t.prototype.onClickAD=function(){var e=this;a.default.inst.showAd("\u7ed3\u7b97\u5956\u52b1\u591a\u500d",function(){p.EVENT.emit(c.EventId.ON_GAME_OVER),e.onReward(2),e.close()})},t.prototype.onClickExit=function(){s.Config.isAdInterstitial&&a.default.inst.showAdInterstitial("\u7ed3\u7b97\u63d2\u5c4f"),p.EVENT.emit(c.EventId.ON_GAME_OVER),this.onReward(1),this.close()},t.prototype.onReward=function(e){var t=this.nodeMoney.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.nodeRMoney.convertToWorldSpaceAR(cc.Vec2.ZERO),n=this.nodeG1Money.convertToWorldSpaceAR(cc.Vec2.ZERO),i=d.GameModel.inst.money*e,r=d.GameModel.inst.rMoney*e,a=d.GameModel.inst.g1Money*e;this._cbReward=function(){i&&(p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,t,"Money"),e>1&&p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,o,"Money",null,{delay:.6}),h.UserModel.inst.money+=i),r&&(p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,o,"RMoney"),e>1&&p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,o,"RMoney",null,{delay:.6}),h.UserModel.inst.rMoney+=r),a&&(p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,n,"G1Money"),e>1&&p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,n,"G1Money",null,{delay:.6}),h.UserModel.inst.g1Money+=a)}},r([y(sp.Skeleton)],t.prototype,"spineBg",void 0),r([y(cc.Label)],t.prototype,"txtTittle",void 0),r([y(cc.Node)],t.prototype,"nodeMoney",void 0),r([y(cc.Label)],t.prototype,"txtMoney",void 0),r([y(cc.Node)],t.prototype,"nodeRMoney",void 0),r([y(cc.Label)],t.prototype,"txtRMoney",void 0),r([y(cc.Node)],t.prototype,"nodeG1Money",void 0),r([y(cc.Label)],t.prototype,"txtG1Money",void 0),r([y(cc.Button)],t.prototype,"btnRevive",void 0),r([y(cc.Button)],t.prototype,"btnAD",void 0),r([_],t)}(u.default);o.default=g,cc._RF.pop()},{"../../Controller/AdMgr":"AdMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase","../../Model/GameModel":"GameModel","../../Model/UserModel":"UserModel"}],GamePause:[function(e,t,o){"use strict";cc._RF.push(t,"a7f31/CuBpLCoq2AwmY/GLA","GamePause");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GamePause=void 0;var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("../../Framework/UI/UIFacade"),l=e("../../Framework/UIBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onOpen=function(){s.EVENT.emit(a.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){s.EVENT.emit(a.EventId.ON_GAME_RESUME)},t.prototype.onClickExit=function(){var e=this;c.UIFacade.showConfirm("\u63d0\u793a","\u662f\u5426\u9000\u51fa\u6e38\u620f\uff1f","\u786e\u5b9a","\u53d6\u6d88").then(function(){s.EVENT.emit(a.EventId.ON_GAME_OVER),e.close()}).catch(function(){})},t.prototype.update=function(){},r([u],t)}(l.default));o.GamePause=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UIBase":"UIBase"}],GameStart:[function(e,t,o){"use strict";cc._RF.push(t,"a8549cWXPpIab8SvmxFdFNB","GameStart");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("../../Framework/UIBase"),l=e("../../Controller/ItemMgr"),p=e("../../Model/GodPetModel"),u=e("../../Model/GodRideModel"),d=e("../../Model/GodSkinModel"),h=e("../../Model/GodWeaponModel"),f=e("../../Model/GodBackModel"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spRole=null,t.nodeRole=null,t.nodeRide=null,t.nodePet=null,t.nodeWeapon=null,t.nodeBack=null,t._spaceX=180,t}return i(t,e),t.prototype.onOpen=function(){var e=this;l.default.inst.init(),s.EVENT.emit(a.EventId.ON_GAME_PAUSE),this.nodeWeapon.removeFromParent();var t=this.spRole.attachUtil;t.generateAllAttachedNodes(),t.getAttachedNodes("target_lram")[0].addChild(this.nodeWeapon);var o=t.getAttachedNodes("beishi")[0];this.nodeBack.setSiblingIndex(0),this.nodeBack.scale=1,this.schedule(function(){var t=e.nodeRole.position;t.x+=o._bone.worldX,t.y+=o._bone.worldY,e.nodeBack.setPosition(t),e.nodeBack.angle=o._bone.getWorldRotationX()}),this.updatePlayer()},t.prototype.onClose=function(){l.default.inst.releaseAutoRes()},t.prototype.onLoad=function(){s.EVENT.on(a.EventId.ON_REFRESH_ROLE,this.updatePlayer,this),s.EVENT.on(a.EventId.ON_REFRESH_RIDE,this.updatePlayer,this),s.EVENT.on(a.EventId.ON_REFRESH_SKIN,this.updatePlayer,this),s.EVENT.on(a.EventId.ON_REFRESH_PET,this.updatePlayer,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),s.EVENT.off(a.EventId.ON_REFRESH_ROLE,this.updatePlayer,this),s.EVENT.off(a.EventId.ON_REFRESH_RIDE,this.updatePlayer,this),s.EVENT.off(a.EventId.ON_REFRESH_SKIN,this.updatePlayer,this),s.EVENT.off(a.EventId.ON_REFRESH_PET,this.updatePlayer,this)},t.prototype.updatePlayer=function(){var e=this;if(d.GodSkinModel.inst.curIdx>0){var t=d.GodSkinModel.inst.getInfo(d.GodSkinModel.inst.curIdx);this.spRole.setSkin("suit"+t.name.match(/\d+/g))}else this.spRole.setSkin("suit0");this.spRole.setAnimation(0,"idle2",!0),this.spRole.defaultAnimation="idle2",this.loadBundleRes("Prefabs",h.GodWeaponModel.inst.getPrefabUrl(h.GodWeaponModel.inst.curIdx),cc.Prefab,function(t,o){var n=cc.instantiate(o);e.nodeWeapon.removeAllChildren(),e.nodeWeapon.addChild(n);var i=n.getComponent(sp.Skeleton);i.setAnimation(0,"idle1",!0),i.defaultAnimation="idle1"}),f.GodBackModel.inst.curIdx>0?this.loadBundleRes("Prefabs",f.GodBackModel.inst.getPrefabUrl(f.GodBackModel.inst.curIdx),cc.Prefab,function(t,o){var n=cc.instantiate(o);e.nodeBack.removeAllChildren(),e.nodeBack.addChild(n);var i=n.getComponent(sp.Skeleton);i.setAnimation(0,"idle",!0),i.defaultAnimation="idle"}):this.nodeBack.removeAllChildren(),this.nodeRide.active=u.GodRideModel.inst.curIdx>0,this.nodeRide.active&&this.loadBundleRes("Prefabs",u.GodRideModel.inst.getPrefabUrl(u.GodRideModel.inst.curIdx),cc.Prefab,function(t,o){var n=cc.instantiate(o);e.nodeRide.removeAllChildren(),e.nodeRide.addChild(n)}),this.nodePet.active=p.GodPetModel.inst.curIdx>0,this.nodePet.active&&this.loadBundleRes("Prefabs",p.GodPetModel.inst.getPrefabUrl(p.GodPetModel.inst.curIdx),cc.Prefab,function(t,o){var n=cc.instantiate(o);e.nodePet.removeAllChildren(),e.nodePet.addChild(n)}),this.nodeRide.active&&this.nodePet.active?(this.nodeRole.x=-this._spaceX,this.nodeRide.x=0,this.nodePet.x=this._spaceX):this.nodeRide.active?(this.nodeRole.x=-this._spaceX/2,this.nodeRide.x=this._spaceX/2):this.nodePet.active?(this.nodeRole.x=-this._spaceX/2,this.nodePet.x=this._spaceX/2):this.nodeRole.x=0},r([g(sp.Skeleton)],t.prototype,"spRole",void 0),r([g(cc.Node)],t.prototype,"nodeRole",void 0),r([g(cc.Node)],t.prototype,"nodeRide",void 0),r([g(cc.Node)],t.prototype,"nodePet",void 0),r([g(cc.Node)],t.prototype,"nodeWeapon",void 0),r([g(cc.Node)],t.prototype,"nodeBack",void 0),r([y],t)}(c.default);o.default=m,cc._RF.pop()},{"../../Controller/ItemMgr":"ItemMgr","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase","../../Model/GodBackModel":"GodBackModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel"}],GetG1Money:[function(e,t,o){"use strict";cc._RF.push(t,"83b85evnrxBOItU7TWOK5S/","GetG1Money");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Event/EventMgr"),l=e("../../../Framework/UIBase"),p=e("../../../Model/StoreModel"),u=e("../../../Model/UserModel"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtNum=null,t._type=-1,t._cb=null,t}return i(t,e),t.prototype.onOpen=function(e,t){this._type=t.type,this._cb=t.cb,this.txtNum.string=""+p.StoreModel.inst.rMoneyNum},t.prototype.onClickAd=function(){var e=this;a.default.inst.showAd("\u8865\u5145\u5143\u5b9d",function(){u.UserModel.inst.g1Money+=p.StoreModel.inst.g1MoneyNum;var t=e.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,t,"G1Money"),e._cb&&e._cb(),e.close()})},r([f(cc.Label)],t.prototype,"txtNum",void 0),r([h],t)}(l.default);o.default=_,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],GetMoney:[function(e,t,o){"use strict";cc._RF.push(t,"78075HhmCpKqJMVsWh0j2/J","GetMoney");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Event/EventMgr"),l=e("../../../Framework/UIBase"),p=e("../../../Model/StoreModel"),u=e("../../../Model/UserModel"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtNum=null,t._type=-1,t._cb=null,t}return i(t,e),t.prototype.onOpen=function(e,t){this._type=t.type,this._cb=t.cb,this.txtNum.string=""+p.StoreModel.inst.rMoneyNum},t.prototype.onClickAd=function(){var e=this;a.default.inst.showAd("\u8865\u5145\u5143\u5b9d",function(){u.UserModel.inst.rMoney+=p.StoreModel.inst.rMoneyNum;var t=e.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,t,"RMoney"),e._cb&&e._cb(),e.close()})},r([f(cc.Label)],t.prototype,"txtNum",void 0),r([h],t)}(l.default);o.default=_,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],GodBackModel:[function(e,t,o){"use strict";cc._RF.push(t,"d1bb0HuU8pAbZdG0VbBwRqp","GodBackModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodBackModel=void 0;var r=e("../Controller/TableMgr"),a=e("../Define/Define"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("./GodBase"),l=e("./UserModel"),p=function(e){function t(){var t=e.call(this)||this;return t._curIdx=Number(s.LocalStorageMgr.getItem("GodBack_curIdx"))||0,t._curLevel=Number(s.LocalStorageMgr.getItem("GodBack_curLevel"))||0,t._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodBack_unlock")||"[]"),t._exp=Number(s.LocalStorageMgr.getItem("GodBack_exp"))||0,t._refreshInfo(),t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(e){this._curIdx=e,s.LocalStorageMgr.setItem("GodBack_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){this._curLevel=e,this._refreshInfo(),s.LocalStorageMgr.setItem("GodBack_curLevel",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e,s.LocalStorageMgr.setItem("GodBack_exp",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unlock",{get:function(){return this._unlock},set:function(e){this._unlock=e,s.LocalStorageMgr.setItem("GodBack_unlock",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),t.prototype._refreshInfo=function(){var e=r.TABLE.getTable("GodBack");return this._curLevel>e.length?(this._cur=e[e.length-1],this._next=e[e.length-2]):(this._cur=e[this._curLevel-1],this._next=e[this._curLevel]),this._cur},t.prototype.getInfo=function(e){return r.TABLE.getTable("GodBack").find(function(t){return t.lv==e})},t.prototype.getSiblingInfo=function(e){var t=this.curLv;return 0==t&&(t=1),this.getInfo(t+e)},t.prototype.getPrefabUrl=function(e){return"/Game/GodBack/"+this.getInfo(e).name},t.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},t.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godBackOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},t.prototype.getAttr=function(){var e=this,t=r.TABLE.getTable("GodBack"),o=0,n=0,i=this._cur;return i&&(o+=i.atk,n+=i.hp),t.forEach(function(t){e._unlock.includes(t.lv)&&(o+=t.atk,n+=t.hp)}),{atk:o,hp:n}},t._inst=null,t}(c.GodBase);o.GodBackModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodBase:[function(e,t,o){"use strict";cc._RF.push(t,"95b66kQkKNIXpMU8IjaSu3M","GodBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.GodBase=void 0;var n=function(){function e(){this._isUnlock=0,this._curIdx=0,this._curLevel=-1,this._unlock=[],this._exp=0,this._cur=null,this._next=null}return Object.defineProperty(e.prototype,"unlock",{get:function(){return this._unlock},set:function(e){this._unlock=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUnlock",{get:function(){return this._isUnlock},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curIdx",{get:function(){return this._curIdx},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLevel",{get:function(){return this._curLevel},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLv",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStar",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.getInfo=function(){return null},e.prototype.getSiblingInfo=function(){return null},e.prototype.getPrefabUrl=function(){return null},e.prototype.getState=function(){return null},e.prototype.canLevelUp=function(){return!1},e}();o.GodBase=n,cc._RF.pop()},{}],GodGuide:[function(e,t,o){"use strict";cc._RF.push(t,"ece0aKGYQBAObD4jIyXCVFJ","GodGuide");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Controller/NativeMgr"),s=e("../Model/GodSkinModel"),c=e("../Model/GodPetModel"),l=e("../Model/GodWeaponModel"),p=e("./task/Task"),u=e("../Model/GodRideModel"),d=e("../Framework/Res/ResKeeper"),h=e("../Model/UserModel"),f=e("../Framework/UI/UIMgr"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isTest=!1,t.test=null,t.touch=null,t.mask=null,t.mask_sp=null,t._touchValid=0,t}var o;return i(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return o._inst?o._inst:(cc.error("GodGuide not load yet!","%s"),null)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._inst=this,this.test.active=this.isTest},t.prototype.onDestroy=function(){o._inst=null},t.prototype.onEnable=function(){this.touch.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.touch.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},t.prototype.onDisable=function(){this.touch.off(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.touch.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},t.prototype.start=function(){this.isTest||(this.node.active=!1)},t.prototype.run=function(){var e=this;null==cc.sys.localStorage.getItem("Guide0")?(cc.sys.localStorage.setItem("Guide0",1),this.getTask("GuideTask1",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:1,guidedesc:"\u5c11\u4fa0\uff01\u7b49\u4f60\u5f88\u4e45\u4e86\uff01\u654c\u4eba\u65e9\u5df2\u6df1\u5165\u6211\u65b9\u8179\u5730\uff0c\u5feb\u5feb\u968f\u6211\u8fdb\u5165\u6218\u573a\u5427\uff01"})})):null==cc.sys.localStorage.getItem("Guide2")&&h.UserModel.inst.canTalentBuy()?(cc.sys.localStorage.setItem("Guide2",1),this.getTask("GuideTask3",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:3,guidedesc:"\u5b66\u4e60\u5929\u8d4b\u6765\u63d0\u5347\u6218\u529b"}),e.run()})):null==cc.sys.localStorage.getItem("Guide1")&&u.GodRideModel.inst.canLevelUp()&&null==u.GodRideModel.inst.cur?(cc.sys.localStorage.setItem("Guide1",1),this.getTask("GuideTask2",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:2,guidedesc:"\u5750\u9a91\u7cfb\u7edf\u89e3\u9501\u5566\uff01"})})):null==cc.sys.localStorage.getItem("Guide4")&&l.GodWeaponModel.inst.canLevelUp()&&null==l.GodWeaponModel.inst.cur?(cc.sys.localStorage.setItem("Guide4",1),this.getTask("GuideTask5",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:5,guidedesc:"\u795e\u5175\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),e.run()})):null==cc.sys.localStorage.getItem("Guide5")&&c.GodPetModel.inst.canLevelUp()&&null==c.GodPetModel.inst.cur?(cc.sys.localStorage.setItem("Guide5",1),this.getTask("GuideTask6",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:6,guidedesc:"\u795e\u5ba0\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),e.run()})):null==cc.sys.localStorage.getItem("Guide6")&&s.GodSkinModel.inst.canLevelUp()&&null==s.GodSkinModel.inst.cur&&(cc.sys.localStorage.setItem("Guide6",1),this.getTask("GuideTask7",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:7,guidedesc:"\u5957\u88c5\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),e.run()}))},t.prototype.getTask=function(e,t){var o=this;f.default.inst.delayUIWaitAnim(1),f.default.inst.showUIWaitAnim(),this.loadBundleRes("Prefabs","/Guide/task/"+e,cc.Prefab,function(e,n){f.default.inst.hideUIWaitAnim(),e&&cc.error(e),n&&o.execGuideTask(n,function(){o.releaseAsset(n),t&&t()})})},t.prototype.execGuideTask=function(e,t){console.warn("\u5f00\u59cb\u6267\u884c\u4efb\u52a1",e.name),this.node.active=!0;var o=cc.instantiate(e);o.setParent(this.node),this._endCb=t,this._task=o.getComponent(p.default),this.nextStage(!1)},t.prototype.endGuideTask=function(){console.warn("\u4efb\u52a1\u6267\u884c\u7ed3\u675f"),this.node.active=!1,this.mask.node.active=!1,this._task.node&&this._task.node.destroy(),this._task=null,this._endCb&&this._endCb()},t.prototype.nextStage=function(e){var t=this;void 0===e&&(e=!0),e&&this._task.index++,this.input=!1,this.exec=!1,this._task.targetNode=null,this._touchValid=0,this.mask.node.active=!1;var o=this._task.steps[this._task.index];if(o){var n=function(){t.exec=!0,t.input=!0,t._task.targetNode=cc.find(o.path),null==t._task.targetNode&&(t._task.targetNode=t.touch),"finger"==o.type&&t._focusToNode(t._task.targetNode)};o.onStart?o.onStart(n,this):n()}else this.endGuideTask()},t.prototype.onTouch=function(e){var t=e.target;if(!this.input)return console.warn("\u5904\u4e8e\u7981\u6b62\u72b6\u6001\uff0c\u62e6\u622a"),void t._touchListener.setSwallowTouches(!0);if(this._task&&this.exec){var o=this._task.steps[this._task.index];if(e.type==cc.Node.EventType.TOUCH_START)this._touchValid=0,this.checkHit(e.getLocation())&&(this._touchValid++,o.eventType==cc.Node.EventType.TOUCH_START&&this._touchValid++);else if(e.type==cc.Node.EventType.TOUCH_END)this.checkHit(e.getLocation())&&this._touchValid++;else{if(e.type==cc.Node.EventType.TOUCH_MOVE)return void t._touchListener.setSwallowTouches(!0);if(e.type==cc.Node.EventType.TOUCH_CANCEL)return void t._touchListener.setSwallowTouches(!1)}"finger"==o.type&&(1==this._touchValid&&e.type==cc.Node.EventType.TOUCH_START?t._touchListener.setSwallowTouches(!1):2==this._touchValid?(console.warn("\u547d\u4e2d\u76ee\u6807\u8282\u70b9\uff0c\u653e\u884c"),t._touchListener.setSwallowTouches(!1),this.nextStage()):(console.warn("\u672a\u547d\u4e2d\u76ee\u6807\u8282\u70b9\uff0c\u62e6\u622a"),t._touchListener.setSwallowTouches(!0)))}else t._touchListener.setSwallowTouches(!1)},t.prototype.checkHit=function(e){var t=this,o=this._task.targetNode;if(o){var n,i,r=o.getBoundingBox(),a=o.convertToWorldSpaceAR(cc.Vec2.ZERO);return o.group!=this.node.group&&(cc.Camera.cameras.forEach(function(e){e.containsNode(t.node)&&(n=e),e.containsNode(o)&&(i=e)}),n!=i&&a.subSelf(cc.Vec2.subtract(cc.v2(),n.node.getPosition(),i.node.getPosition()))),r.x=a.x-r.width/2,r.y=a.y-r.height/2,!!r.contains(e)}return!0},t.prototype._focusToNode=function(e){var t=this;this.mask.node.active=!0,this.mask._graphics.clear(),this.scheduleOnce(function(){var o,n,i=e.getBoundingBox(),r=e.convertToWorldSpaceAR(cc.Vec2.ZERO);e.group!=t.node.group&&(cc.Camera.cameras.forEach(function(i){i.containsNode(t.node)&&(o=i),i.containsNode(e)&&(n=i)}),o!=n&&r.subSelf(cc.Vec2.subtract(cc.v2(),o.node.getPosition(),n.node.getPosition())));var a=t.node.convertToNodeSpaceAR(r);i.x=a.x-i.width/2,i.y=a.y-i.height/2,t.mask._graphics.fillRect(i.x,i.y,i.width,i.height)})},t.prototype.getNodeFullPath=function(e){var t=cc.director.getScene().name,o=[],n=e;do{o.unshift(n.name),n=n.parent}while(n&&n.name!==t);return o.join("/")},t.prototype.startRecordNodeTouch=function(){if(this._task)cc.warn("\u4efb\u52a1\u5f15\u5bfc\u4e2d\uff0c\u4e0d\u80fd\u5f55\u5236");else{if(this._dispatchEvent)return cc.warn("\u5df2\u7ecf\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f \u505c\u6b62\u5f55\u5236"),void this.stopRecordNodeTouch();cc.warn("\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f"),this._dispatchEvent=cc.Node.prototype.dispatchEvent,this._recordSteps=[],this.input=!0;var e=this;cc.Node.prototype.dispatchEvent=function(t){if(e._dispatchEvent.call(this,t),!e.isGuideNode(t.target)&&t.type===cc.Node.EventType.TOUCH_END){var o=e.getNodeFullPath(this);e._recordSteps.push({path:o,type:"finger",onStart:null})}}}},t.prototype.stopRecordNodeTouch=function(){this._dispatchEvent?(cc.Node.prototype.dispatchEvent=this._dispatchEvent,this._dispatchEvent=null,this.input=!1,cc.warn("\u9000\u51fa\u5f55\u5236\u72b6\u6001")):cc.warn("\u672a\u8fdb\u5165\u5f55\u5236\u72b6\u6001")},t.prototype.execRecordTask=function(){this._task?cc.warn("\u4efb\u52a1\u5f15\u5bfc\u4e2d\uff0c\u4e0d\u80fd\u5f55\u5236"):this._dispatchEvent?cc.warn("\u5df2\u7ecf\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f"):this._recordSteps?(console.log(JSON.stringify(this._recordSteps)),this._recordSteps=null):cc.warn("\u6ca1\u6709\u5f55\u5236\u5185\u5bb9")},t.prototype.clearRecord=function(){this.stopRecordNodeTouch(),this.mask.node.active=!1,this._task=null,this._recordSteps=null},t.prototype.isGuideNode=function(e){var t=e;if(t==this.touch)return!0;for(var o=0,n=this.test.children;o<n.length;o++)if(t==n[o])return!0;return!1},r([g],t.prototype,"isTest",void 0),r([g(cc.Node)],t.prototype,"test",void 0),r([g(cc.Node)],t.prototype,"touch",void 0),r([g(cc.Mask)],t.prototype,"mask",void 0),r([g(cc.Sprite)],t.prototype,"mask_sp",void 0),o=r([y],t)}(d.default);o.default=m,cc._RF.pop()},{"../Controller/NativeMgr":"NativeMgr","../Framework/Res/ResKeeper":"ResKeeper","../Framework/UI/UIMgr":"UIMgr","../Model/GodPetModel":"GodPetModel","../Model/GodRideModel":"GodRideModel","../Model/GodSkinModel":"GodSkinModel","../Model/GodWeaponModel":"GodWeaponModel","../Model/UserModel":"UserModel","./task/Task":"Task"}],GodMenuInfo:[function(e,t,o){"use strict";cc._RF.push(t,"10e6bDWd69GnLvv1ubUHHwe","GodMenuInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("../../../Framework/i18n/i18nMgr"),c=e("../../../Framework/UIBase"),l=e("../../../Model/GodBackModel"),p=e("../../../Model/GodPetModel"),u=e("../../../Model/GodRideModel"),d=e("../../../Model/GodSkinModel"),h=e("../../../Model/GodWeaponModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtTitle=null,t._type=-1,t._str=null,t._model=null,t._info=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=this;a.AudioMgr.inst.playEffectByName("ui_open"),this._info=t.info,this._type=t.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin","GodBack"][this._type],this._model=[u.GodRideModel.inst,h.GodWeaponModel.inst,p.GodPetModel.inst,d.GodSkinModel.inst,l.GodBackModel.inst][this._type],this.txtTitle.string="\u3010"+s.i18nMgr.getLabel(this._str+"/name"+this._info.lv)+"\u3011",this.loadBundleRes("Prefabs",this._model.getPrefabUrl(this._info.lv),cc.Prefab,function(e,t){var n=cc.instantiate(t);o.icon.removeAllChildren(),o.icon.addChild(n)}),1==this._type?(this.icon.setScale(1,1),this.icon.y=-42):4==this._type?(this.icon.setScale(1,1),this.icon.y=-42):(this.icon.setScale(1.2,1.2),this.icon.y=-202)},r([y(cc.Node)],t.prototype,"icon",void 0),r([y(cc.Label)],t.prototype,"txtTitle",void 0),r([_],t)}(c.default);o.default=g,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel"}],GodMenuNew:[function(e,t,o){"use strict";cc._RF.push(t,"c6a1ePduwxL87P3yJuwtnT5","GodMenuNew");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("../../../Framework/i18n/i18nMgr"),c=e("../../../Framework/UIBase"),l=e("../../../Model/GodBackModel"),p=e("../../../Model/GodPetModel"),u=e("../../../Model/GodRideModel"),d=e("../../../Model/GodSkinModel"),h=e("../../../Model/GodWeaponModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtTitle=null,t.txtName=null,t._type=-1,t._str=null,t._model=null,t._info=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=this;a.AudioMgr.inst.playEffectByName("unlockRide"),this._info=t.info,this._type=t.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin","GodBack"][this._type],this._model=[u.GodRideModel.inst,h.GodWeaponModel.inst,p.GodPetModel.inst,d.GodSkinModel.inst,l.GodBackModel.inst][this._type],this.txtTitle.string=s.i18nMgr.getLabel(this._str+"New/tittl"),this.txtName.string="\u3010"+s.i18nMgr.getLabel(this._str+"/name"+this._info.lv)+"\u3011",this.loadBundleRes("Prefabs",this._model.getPrefabUrl(this._info.lv),cc.Prefab,function(e,t){var n=cc.instantiate(t);o.icon.removeAllChildren(),o.icon.addChild(n)}),1==this._type?(this.icon.setScale(1,1),this.icon.y=-42):4==this._type?(this.icon.setScale(1,1),this.icon.y=-42):(this.icon.setScale(1.2,1.2),this.icon.y=-202)},r([y(cc.Node)],t.prototype,"icon",void 0),r([y(cc.Label)],t.prototype,"txtTitle",void 0),r([y(cc.Label)],t.prototype,"txtName",void 0),r([_],t)}(c.default);o.default=g,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel"}],GodMenuViewItem:[function(e,t,o){"use strict";cc._RF.push(t,"7c9a023PhxC15dSa1u1MhzH","GodMenuViewItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtLevel=null,t.txtName=null,t.txtState=null,t.txtDesc=null,t.btnEquip=null,t.btnUnEquip=null,t.btnTip=null,t}return i(t,e),r([c(cc.Label)],t.prototype,"txtLevel",void 0),r([c(cc.Label)],t.prototype,"txtName",void 0),r([c(cc.Label)],t.prototype,"txtState",void 0),r([c(cc.Label)],t.prototype,"txtDesc",void 0),r([c(cc.Button)],t.prototype,"btnEquip",void 0),r([c(cc.Button)],t.prototype,"btnUnEquip",void 0),r([c(cc.Button)],t.prototype,"btnTip",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],GodMenuView:[function(e,t,o){"use strict";cc._RF.push(t,"ce338pTB1NEjptX7nQnsW4r","GodMenuView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/TableMgr"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/i18n/i18nMgr"),d=e("../../../Framework/List/List"),h=e("../../../Framework/UI/UIFacade"),f=e("../../../Framework/UI/UIMgr"),_=e("../../../Framework/UIBase"),y=e("../../../Model/GodBackModel"),g=e("../../../Model/GodPetModel"),m=e("../../../Model/GodRideModel"),v=e("../../../Model/GodSkinModel"),M=e("../../../Model/GodWeaponModel"),b=e("./GodMenuViewItem"),E=cc._decorator,I=E.ccclass,O=E.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=null,t.txtTitle=null,t._type=-1,t._str=null,t._model=null,t._select=-1,t._infos=null,t}return i(t,e),t.prototype.onOpen=function(e,t){l.AudioMgr.inst.playEffectByName("ui_open"),this._type=t.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin","GodBack"][this._type],this._model=[m.GodRideModel.inst,M.GodWeaponModel.inst,g.GodPetModel.inst,v.GodSkinModel.inst,y.GodBackModel.inst][this._type],this.txtTitle.string=u.i18nMgr.getLabel(this._str+"View/tittle"),this._infos=a.TABLE.getTable(this._str).filter(function(e){return 1==e.star}),this.list.numItems=this._infos.length},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.onListRender=function(e,t){var o=this,n=e.getComponent(b.default),i=this._infos[t],r=t+1;if(null==i)return n.btnEquip.node.active=!1,n.btnUnEquip.node.active=!1,n.txtState.string="\uff1f\uff1f\uff1f",void(n.txtName.string=r+"\u9636 \uff1f\uff1f\uff1f");if(i.lv!=t+1){var a=this._model.unlock.includes(i.lv);r=i.lv,n.btnTip.node.active=!0,n.btnEquip.node.active=this._model.curIdx!=r&&a,n.btnUnEquip.node.active=this._model.curIdx==i.lv,n.txtState.string=a?"\u5df2\u89e3\u9501":"\u672a\u89e3\u9501",n.txtDesc.string=a?"":"\u5728\u5546\u5e97\u4e2d\u5151\u6362\u83b7\u5f97",n.txtLevel.string="",n.txtName.string=""+u.i18nMgr.getLabel(this._str+"/name"+i.lv)}else n.btnTip.node.active=!1,n.btnEquip.node.active=this._model.curIdx!=r&&this._model.curLv>=r,n.btnUnEquip.node.active=this._model.curIdx==r,n.txtDesc.string="",n.txtState.string=this._model.curLv>=r?"\u5df2\u89e3\u9501":"\u672a\u89e3\u9501",n.txtLevel.string=r+"\u9636",n.txtName.string=""+u.i18nMgr.getLabel(this._str+"/name"+i.lv);var d=function(){h.UIFacade.showToast("\u5916\u5f62\u5207\u6362\u6210\u529f"),l.AudioMgr.inst.playEffectByName("talentSelect"),o._model.curIdx==r?o._model.curIdx=0:o._model.curIdx=r,o.list.updateAll(),p.EVENT.emit(s.EventId.ON_REFRESH_ROLE)};n.btnEquip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnUnEquip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnEquip.node.on(cc.Node.EventType.TOUCH_END,d),n.btnUnEquip.node.on(cc.Node.EventType.TOUCH_END,d),n.btnTip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnTip.node.on(cc.Node.EventType.TOUCH_END,function(){f.default.inst.open(c.UIType.GodMenuInfo,{info:o._model.getInfo(i.lv),type:o._type})})},r([O(d.default)],t.prototype,"list",void 0),r([O(cc.Label)],t.prototype,"txtTitle",void 0),r([I],t)}(_.default);o.default=S,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel","./GodMenuViewItem":"GodMenuViewItem"}],GodMenu:[function(e,t,o){"use strict";cc._RF.push(t,"326b1II54ZGyb2vCLypVI1z","GodMenu");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/i18n/i18nMgr"),u=e("../../../Framework/UI/UIMgr"),d=e("../../../Framework/UIBase"),h=e("../../../Model/UserModel"),f=e("../../../Model/GodPetModel"),_=e("../../../Model/AchievementModel"),y=e("../../../Framework/Utils/Utils"),g=e("../../../Framework/Audio/AudioMgr"),m=e("../../../Controller/ItemMgr"),v=e("../../../Model/GodWeaponModel"),M=e("../../../Model/GodRideModel"),b=e("../../../Model/GodSkinModel"),E=e("../../../Model/GodBackModel"),I=e("../../../Framework/UI/UIFacade"),O=e("../../../Framework/Event/RedDotHandler"),S=e("../../../Controller/AdMgr"),w=cc._decorator,R=w.ccclass,P=w.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggles=null,t.icon=null,t.moneyIcon=null,t.star=[],t.starSf=[],t.starNode=null,t.next=null,t.max=null,t.txtTitle=null,t.attributeTxt=null,t.attribute1Txt=null,t.attribute2Txt=null,t.attribute3Txt=null,t.attribute4Txt=null,t.txtNum=null,t.txtNext=null,t.txtLevelUp=null,t.btnRight=null,t.btnLeft=null,t.btnView=null,t.btnLevelUp=null,t.pbLevel=null,t.txtLevel=null,t.pbLevelBar=null,t.redDotLevelUp=null,t.GodRideBan=null,t.GodWeaponBan=null,t.GodPetBan=null,t.GodSkinBan=null,t.GodBackBan=null,t._type=-1,t._str=null,t._model=null,t._curIdx=0,t._pageIdx=0,t._iconIdx=0,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=this;g.AudioMgr.inst.playEffectByName("ui_open"),this._type=t.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin","GodBack"][this._type],this._model=[M.GodRideModel.inst,v.GodWeaponModel.inst,f.GodPetModel.inst,b.GodSkinModel.inst,E.GodBackModel.inst][this._type],this.redDotLevelUp.setKey(this._str),this.moneyIcon.spriteFrame=null,this.loadBundleRes("Textures",a.MONEY_ICON_URL[this._model.getInfo(1).item],cc.SpriteFrame,function(e,t){o.moneyIcon.spriteFrame=t}),this.toggles.toggleItems[this._type].interactable=!1,this.star.forEach(function(e){return e.node.children[0].active=!1}),this.pbLevel.node.active=!1,this.pbLevelBar.active=!1,this.updateStage(h.UserModel.inst.curStage),this.refresh(),this.refreshLeftRight()},t.prototype.close=function(){this._playAni||e.prototype.close.call(this)},t.prototype.refresh=function(e){var t,o,n=this;void 0===e&&(e=this._model.cur||this._model.next);var i=this._model.cur||this._model.next,r=this._model.getState();i.lv<e.lv?(this.btnLevelUp.node.active=!1,this.next.active=!0,this.max.active=!1,this.txtNext.string=""+p.i18nMgr.getLabel(this._str+"/next",[p.i18nMgr.getLabel(this._str+"/name"+(e.lv-1))])):i.lv>e.lv||r==a.UnlockType.Max?(this.btnLevelUp.node.active=!1,this.next.active=!1,this.max.active=!0):i.lv==e.lv&&(this.btnLevelUp.node.active=!0,this.next.active=!1,this.max.active=!1,r==a.UnlockType.NotUnlock?(this.starNode.active=!1,this.pbLevel.node.active=!1):(this.starNode.active=!0,this.pbLevel.node.active=!0,this.star.forEach(function(e,t){return e.spriteFrame=t>=n._model.curStar?n.starSf[0]:n.starSf[1]}))),0==this._type?(this.icon.y=60,this.icon.scale=1,this.attributeTxt.node.active=!1,this.attribute1Txt.node.active=!0,this.attribute2Txt.node.active=!1,this.attribute3Txt.node.active=!0,this.attribute4Txt.node.active=!1,this.attribute1Txt.node.x=-100,this.attribute3Txt.node.x=110,this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodRide/attribute1",[""+(null==i?void 0:i.atk)]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodRide/attribute3",[""+(null==i?void 0:i.speed)])):1==this._type?(this.icon.y=280,this.icon.scale=.7,this.attributeTxt.node.active=!0,this.attribute1Txt.node.active=!1,this.attribute2Txt.node.active=!0,this.attribute3Txt.node.active=!0,this.attribute4Txt.node.active=!1,this.attributeTxt.node.x=-250,this.attribute2Txt.node.x=-35,this.attribute3Txt.node.x=200,this.attributeTxt.string="\u53ec\u5524\u9668\u77f3",this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodWeapon/attribute2",[""+((null==i?void 0:i.hp)||0)]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodWeapon/attribute3",[""+Math.floor(100*((null==i?void 0:i.crit)||0))])):2==this._type?(this.icon.y=60,this.icon.scale=1.2,this.attributeTxt.node.active=!1,this.attribute1Txt.node.active=!0,this.attribute2Txt.node.active=!0,this.attribute3Txt.node.active=!0,this.attribute4Txt.node.active=!1,this.attribute1Txt.node.x=-180,this.attribute2Txt.node.x=20,this.attribute3Txt.node.x=210,this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute1",[""+Math.floor(100*((null==i?void 0:i.atk)||0))]),this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute2",[""+Math.floor(100*((null==i?void 0:i.crit)||0))]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute3",[""+Math.floor(100*((null==i?void 0:i.critDamage)||0))])):3==this._type?(this.icon.y=60,this.icon.scale=1,this.attributeTxt.node.active=!1,this.attribute1Txt.node.active=!1,this.attribute2Txt.node.active=!0,this.attribute3Txt.node.active=!0,this.attribute4Txt.node.active=!1,this.attribute2Txt.node.x=-100,this.attribute3Txt.node.x=110,this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodSkin/attribute2",[""+((null==i?void 0:i.hp)||0)]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodSkin/attribute3",[""+Math.floor(100*((null==i?void 0:i.reduce)||0))])):4==this._type&&(this.icon.y=180,this.icon.scale=1.2,this.attributeTxt.node.active=!1,this.attribute1Txt.node.active=!0,this.attribute2Txt.node.active=!0,this.attribute3Txt.node.active=!1,this.attribute4Txt.node.active=!1,this.attribute1Txt.node.x=-100,this.attribute2Txt.node.x=110,this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodBack/attribute1",[""+((null==i?void 0:i.atk)||0)]),this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodBack/attribute2",[""+((null==i?void 0:i.hp)||0)])),this.txtTitle.string=i.lv+this._pageIdx+"\u9636 "+p.i18nMgr.getLabel(this._str+"/name"+e.lv),this.txtNum.string=h.UserModel.inst[null===(t=this._model.next)||void 0===t?void 0:t.item]+"/"+(null===(o=this._model.next)||void 0===o?void 0:o.count),this.btnView.node.active=null!=this._model.cur,this.txtLevelUp.string=null==this._model.cur?""+p.i18nMgr.getLabel(this._str+"/levelUp1"):""+p.i18nMgr.getLabel(this._str+"/levelUp2"),this.setIcon(e.lv),this.updateExp()},t.prototype.refreshLeftRight=function(){this.btnRight.node.active=null!=this._model.getSiblingInfo(this._pageIdx+1),this.btnLeft.node.active=null!=this._model.getSiblingInfo(this._pageIdx-1)},t.prototype.setIcon=function(e){var t=this;if(this._iconIdx!=e)this._iconIdx=e,this.loadBundleRes("Prefabs",this._model.getPrefabUrl(e),cc.Prefab,function(o,n){if(t._iconIdx==e){var i=cc.instantiate(n);t.icon.removeAllChildren(),t.icon.addChild(i),t._pageIdx>0||0==t._model.curLv&&0==t._model.curStar?t.changeMatBlack(i):t.changeMatNormal(i)}});else{var o=this.icon.children[0];this._pageIdx>0||0==this._model.curLv&&0==this._model.curStar?this.changeMatBlack(o):this.changeMatNormal(o)}},t.prototype.changeMatNormal=function(e){e.color=cc.color(255,255,255)},t.prototype.changeMatBlack=function(e){e.color=cc.color(0,0,0)},t.prototype.updateStage=function(e){this.GodRideBan.active=e<=h.UserModel.inst.rideOpenStage,this.GodWeaponBan.active=e<=h.UserModel.inst.godWeaponOpenStage,this.GodPetBan.active=e<=h.UserModel.inst.godPetOpenStage,this.GodSkinBan.active=e<=h.UserModel.inst.godSkinOpenStage,this.GodBackBan.active=e<=h.UserModel.inst.godBackOpenStage},t.prototype.onClickRight=function(){this._playAni||(this.refresh(this._model.getSiblingInfo(++this._pageIdx)),this.refreshLeftRight())},t.prototype.onClickLeft=function(){this._playAni||(this.refresh(this._model.getSiblingInfo(--this._pageIdx)),this.refreshLeftRight())},t.prototype.onClickLevelUp=function(){if(!this._playAni)return this._model.canLevelUp()?void this.onExpUp():("rMoney"==this._model.getInfo(1).item?u.default.inst.open(c.UIType.GetMoney,{type:this._type,cb:this.refresh.bind(this)}):"g1Money"==this._model.getInfo(1).item?u.default.inst.open(c.UIType.GetG1Money,{type:this._type,cb:this.refresh.bind(this)}):u.default.inst.showToast("\u8d27\u5e01\u4e0d\u8db3"),void g.AudioMgr.inst.playEffectByName("ui_not"))},t.prototype.onClickToggles=function(e){var t=this;if(!this._playAni){var o=e.node.getSiblingIndex();if(this._curIdx!=o){switch(o){case 1:if(h.UserModel.inst.curStage<=h.UserModel.inst.godWeaponOpenStage)return g.AudioMgr.inst.playEffectByName("ui_not"),I.UIFacade.showToast("\u901a\u5173\u7b2c"+h.UserModel.inst.godWeaponOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u5175\u7cfb\u7edf\u3011"),void this.toggles.toggleItems.forEach(function(e,o){return e.isChecked=o==t._curIdx});break;case 2:if(h.UserModel.inst.curStage<=h.UserModel.inst.godPetOpenStage)return g.AudioMgr.inst.playEffectByName("ui_not"),I.UIFacade.showToast("\u901a\u5173\u7b2c"+h.UserModel.inst.godPetOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u517d\u7cfb\u7edf\u3011"),void this.toggles.toggleItems.forEach(function(e,o){return e.isChecked=o==t._curIdx});break;case 3:if(h.UserModel.inst.curStage<=h.UserModel.inst.godSkinOpenStage)return g.AudioMgr.inst.playEffectByName("ui_not"),I.UIFacade.showToast("\u901a\u5173\u7b2c"+h.UserModel.inst.godSkinOpenStage+"\u5173\u89e3\u9501\u3010\u65f6\u88c5\u7cfb\u7edf\u3011"),void this.toggles.toggleItems.forEach(function(e,o){return e.isChecked=o==t._curIdx});break;case 4:if(h.UserModel.inst.curStage<=h.UserModel.inst.godBackOpenStage)return g.AudioMgr.inst.playEffectByName("ui_not"),I.UIFacade.showToast("\u901a\u5173\u7b2c"+h.UserModel.inst.godBackOpenStage+"\u5173\u89e3\u9501\u3010\u80cc\u9970\u7cfb\u7edf\u3011"),void this.toggles.toggleItems.forEach(function(e,o){return e.isChecked=o==t._curIdx})}this.toggles.toggleItems.forEach(function(e,t){e.isChecked=t==o,e.interactable=!0}),this._curIdx=o,this._pageIdx=0,this._iconIdx=-1,this.icon.removeAllChildren(),this.onOpen(null,{type:o})}}},t.prototype.updateExp=function(){var e=this._model.cur;if(null!=e){var t=e.expLen,o=this._model.exp,n=e.addExp,i=0,r=0;t.forEach(function(e,t){r+=e*n,t<o&&(i+=e*n)}),this.pbLevel.progress=i/r,this.txtLevel.string=i+"/"+r}},t.prototype.onExpUp=function(){var e,t,o=this,n=this._model.cur,i=this._model.next;if(this._model.exp++,h.UserModel.inst[i.item]-=i.count,this.txtNum.string=h.UserModel.inst[null===(e=this._model.next)||void 0===e?void 0:e.item]+"/"+(null===(t=this._model.next)||void 0===t?void 0:t.count),null==n)return this.onLevelUp(),void this.updateExp();var r=n.expLen,a=this._model.exp,s=this._model.exp+1,c=n.addExp,l=0,p=0,d=0;switch(r.forEach(function(e,t){d+=e*c,t<a&&(l+=e*c),t<s&&(p+=e*c)}),this._playAni=!0,this.pbLevelBar.active=!0,cc.tween(this.pbLevel).to(.3,{progress:p/d}).start(),u.default.inst.delayUIWaitAnim(1),u.default.inst.showUIWaitAnim(),y.default.rollNum(l,p,function(e){o.txtLevel.string=Math.floor(e)+"/"+d},function(){o._playAni=!1,o.pbLevelBar.active=!1,u.default.inst.hideUIWaitAnim(),p==d&&(o._model.exp=-1,o.onLevelUp())},.3),r[a]){case 1:g.AudioMgr.inst.playEffectByName("scoreNormal");break;case 2:g.AudioMgr.inst.playEffectByName("scoreDouble"),m.default.inst.generateDouble(this.pbLevel.node.convertToWorldSpaceAR(cc.Vec2.ZERO));break;case 3:g.AudioMgr.inst.playEffectByName("scoreTriple"),m.default.inst.generateTreble(this.pbLevel.node.convertToWorldSpaceAR(cc.Vec2.ZERO))}},t.prototype.onLevelUp=function(){var e,t=this,o=this._model.cur,n=this._model.next;this._model.curLevel++;var i=this._model.curStar-1;0==this._model.curStar&&this._model.curLevel>0&&(i=4);var r=null===(e=this.star[i])||void 0===e?void 0:e.getComponentInChildren(sp.Skeleton),p=function(){t.refresh(),t.refreshLeftRight(),(null==o?void 0:o.lv)!=n.lv&&(t._model.curIdx=n.lv,l.EVENT.emit(s.EventId.ON_REFRESH_ROLE),u.default.inst.open(c.UIType.GodMenuNew,{info:n,type:t._type}));var e=[5,6,7,8,null][t._type];e&&_.AchievementModel.inst.updatePoint(e,n.lv)};switch(r?(u.default.inst.delayUIWaitAnim(1),u.default.inst.showUIWaitAnim(),this._playAni=!0,this.starNode.active=!0,this.star.forEach(function(e,o){return e.spriteFrame=o>i?t.starSf[0]:t.starSf[1]}),r.node.active=!0,r.setAnimation(0,r.defaultAnimation,!1),r.setCompleteListener(function(){r.node.active=!1,t._playAni=!1,u.default.inst.hideUIWaitAnim(),p()})):p(),this._model.curStar){case 0:g.AudioMgr.inst.playEffectByName("ridestar5");break;case 1:case 2:g.AudioMgr.inst.playEffectByName("ridestar12");break;case 3:case 4:g.AudioMgr.inst.playEffectByName("ridestar34")}switch(a.Config.abTestType){case 1:case 3:2!=this._model.curStar&&4!=this._model.curStar||S.default.inst.showAdInterstitial("\u7ed3\u7b97\u63d2\u5c4f");break;case 2:this._model.curLv>=2&&S.default.inst.showAdInterstitial("\u7ed3\u7b97\u63d2\u5c4f")}},t.prototype.onClickView=function(){u.default.inst.open(c.UIType.GodMenuView,{type:this._type})},r([P(cc.ToggleContainer)],t.prototype,"toggles",void 0),r([P(cc.Node)],t.prototype,"icon",void 0),r([P(cc.Sprite)],t.prototype,"moneyIcon",void 0),r([P([cc.Sprite])],t.prototype,"star",void 0),r([P([cc.SpriteFrame])],t.prototype,"starSf",void 0),r([P(cc.Node)],t.prototype,"starNode",void 0),r([P(cc.Node)],t.prototype,"next",void 0),r([P(cc.Node)],t.prototype,"max",void 0),r([P(cc.Label)],t.prototype,"txtTitle",void 0),r([P(cc.Label)],t.prototype,"attributeTxt",void 0),r([P(cc.Label)],t.prototype,"attribute1Txt",void 0),r([P(cc.Label)],t.prototype,"attribute2Txt",void 0),r([P(cc.Label)],t.prototype,"attribute3Txt",void 0),r([P(cc.Label)],t.prototype,"attribute4Txt",void 0),r([P(cc.Label)],t.prototype,"txtNum",void 0),r([P(cc.Label)],t.prototype,"txtNext",void 0),r([P(cc.Label)],t.prototype,"txtLevelUp",void 0),r([P(cc.Button)],t.prototype,"btnRight",void 0),r([P(cc.Button)],t.prototype,"btnLeft",void 0),r([P(cc.Button)],t.prototype,"btnView",void 0),r([P(cc.Button)],t.prototype,"btnLevelUp",void 0),r([P(cc.ProgressBar)],t.prototype,"pbLevel",void 0),r([P(cc.Label)],t.prototype,"txtLevel",void 0),r([P(cc.Node)],t.prototype,"pbLevelBar",void 0),r([P(O.RedDotHandler)],t.prototype,"redDotLevelUp",void 0),r([P(cc.Node)],t.prototype,"GodRideBan",void 0),r([P(cc.Node)],t.prototype,"GodWeaponBan",void 0),r([P(cc.Node)],t.prototype,"GodPetBan",void 0),r([P(cc.Node)],t.prototype,"GodSkinBan",void 0),r([P(cc.Node)],t.prototype,"GodBackBan",void 0),r([R],t)}(d.default);o.default=A,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/ItemMgr":"ItemMgr","../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/Event/RedDotHandler":"RedDotHandler","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/AchievementModel":"AchievementModel","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel","../../../Model/UserModel":"UserModel"}],GodPetModel:[function(e,t,o){"use strict";cc._RF.push(t,"4b0815ISa9MermNbm/zzpPC","GodPetModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodPetModel=void 0;var r=e("../Controller/TableMgr"),a=e("../Define/Define"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("./GodBase"),l=e("./UserModel"),p=function(e){function t(){var t=e.call(this)||this;return t._curIdx=Number(s.LocalStorageMgr.getItem("GodPet_curIdx"))||0,t._curLevel=Number(s.LocalStorageMgr.getItem("GodPet_curLevel"))||0,t._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodPet_unlock")||"[]"),t._exp=Number(s.LocalStorageMgr.getItem("GodPet_exp"))||0,t._refreshInfo(),t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(e){this._curIdx=e,s.LocalStorageMgr.setItem("GodPet_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){this._curLevel=e,this._refreshInfo(),s.LocalStorageMgr.setItem("GodPet_curLevel",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e,s.LocalStorageMgr.setItem("GodPet_exp",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unlock",{get:function(){return this._unlock},set:function(e){this._unlock=e,s.LocalStorageMgr.setItem("GodPet_unlock",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),t.prototype._refreshInfo=function(){var e=r.TABLE.getTable("GodPet");return this._curLevel>e.length?(this._cur=e[e.length-1],this._next=e[e.length-2]):(this._cur=e[this._curLevel-1],this._next=e[this._curLevel]),this._cur},t.prototype.getInfo=function(e){return r.TABLE.getTable("GodPet").find(function(t){return t.lv==e})},t.prototype.getSiblingInfo=function(e){var t=this.curLv;return 0==t&&(t=1),this.getInfo(t+e)},t.prototype.getPrefabUrl=function(e){return"/Game/GodPet/"+this.getInfo(e).name},t.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},t.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godPetOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},t._inst=null,t}(c.GodBase);o.GodPetModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodRideModel:[function(e,t,o){"use strict";cc._RF.push(t,"b2c0bPJ7JBDhboykgK6djNH","GodRideModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodRideModel=void 0;var r=e("../Controller/TableMgr"),a=e("../Define/Define"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("./GodBase"),l=e("./UserModel"),p=function(e){function t(){var t=e.call(this)||this;return t._curIdx=Number(s.LocalStorageMgr.getItem("GodRide_curIdx"))||0,t._curLevel=Number(s.LocalStorageMgr.getItem("GodRide_curLevel"))||0,t._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodRide_unlock")||"[]"),t._exp=Number(s.LocalStorageMgr.getItem("GodRide_exp"))||0,t._refreshInfo(),t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(e){this._curIdx=e,s.LocalStorageMgr.setItem("GodRide_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){this._curLevel=e,this._refreshInfo(),s.LocalStorageMgr.setItem("GodRide_curLevel",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e,s.LocalStorageMgr.setItem("GodRide_exp",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unlock",{get:function(){return this._unlock},set:function(e){this._unlock=e,s.LocalStorageMgr.setItem("GodRide_unlock",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),t.prototype._refreshInfo=function(){var e=r.TABLE.getTable("GodRide");return this._curLevel>e.length?(this._cur=e[e.length-1],this._next=e[e.length-2]):(this._cur=e[this._curLevel-1],this._next=e[this._curLevel]),this._cur},t.prototype.getInfo=function(e){return r.TABLE.getTable("GodRide").find(function(t){return t.lv==e})},t.prototype.getSiblingInfo=function(e){var t=this.curLv;return 0==t&&(t=1),this.getInfo(t+e)},t.prototype.getPrefabUrl=function(e){return"/Game/GodRide/"+this.getInfo(e).name},t.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},t.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.rideOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},t.prototype.getAttr=function(){var e=this,t=r.TABLE.getTable("GodRide"),o=0,n=0,i=0,a=this._cur;return a&&(o+=a.speed,n+=a.atk,i+=a.hp),t.forEach(function(t){e._unlock.includes(t.lv)&&(o+=t.speed,n+=t.atk,i+=t.hp)}),{speed:o,atk:n,hp:i}},t._inst=null,t}(c.GodBase);o.GodRideModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodSkinModel:[function(e,t,o){"use strict";cc._RF.push(t,"cc8c3z4EX1DyYfhEMUYgm9e","GodSkinModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodSkinModel=void 0;var r=e("../Controller/TableMgr"),a=e("../Define/Define"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("./GodBase"),l=e("./UserModel"),p=function(e){function t(){var t=e.call(this)||this;return t._curIdx=Number(s.LocalStorageMgr.getItem("GodSkin_curIdx"))||0,t._curLevel=Number(s.LocalStorageMgr.getItem("GodSkin_curLevel"))||0,t._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodSkin_unlock")||"[]"),t._exp=Number(s.LocalStorageMgr.getItem("GodSkin_exp"))||0,t._refreshInfo(),t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(e){this._curIdx=e,s.LocalStorageMgr.setItem("GodSkin_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){this._curLevel=e,this._refreshInfo(),s.LocalStorageMgr.setItem("GodSkin_curLevel",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e,s.LocalStorageMgr.setItem("GodSkin_exp",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unlock",{get:function(){return this._unlock},set:function(e){this._unlock=e,s.LocalStorageMgr.setItem("GodSkin_unlock",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),t.prototype._refreshInfo=function(){var e=r.TABLE.getTable("GodSkin");return this._curLevel>e.length?(this._cur=e[e.length-1],this._next=e[e.length-2]):(this._cur=e[this._curLevel-1],this._next=e[this._curLevel]),this._cur},t.prototype.getInfo=function(e){return r.TABLE.getTable("GodSkin").find(function(t){return t.lv==e})},t.prototype.getSiblingInfo=function(e){var t=this.curLv;return 0==t&&(t=1),this.getInfo(t+e)},t.prototype.getPrefabUrl=function(e){return"/Game/GodSkin/"+this.getInfo(e).name},t.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},t.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godSkinOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},t.prototype.getAttr=function(){var e=this,t=r.TABLE.getTable("GodSkin"),o=0,n=0,i=0,a=this._cur;return a&&(o+=a.atk,n+=a.hp,i+=a.reduce),t.forEach(function(t){e._unlock.includes(t.lv)&&(o+=t.atk,n+=t.hp,i+=t.reduce)}),{atk:o,hp:n,reduce:i}},t._inst=null,t}(c.GodBase);o.GodSkinModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodWeaponModel:[function(e,t,o){"use strict";cc._RF.push(t,"0bc5eDnRHdMb6ch44YYQeTn","GodWeaponModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodWeaponModel=void 0;var r=e("../Controller/TableMgr"),a=e("../Define/Define"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("./GodBase"),l=e("./UserModel"),p=function(e){function t(){var t=e.call(this)||this;return t._isUnlock=Number(s.LocalStorageMgr.getItem("GodWeapon_isUnlock"))||0,t._curIdx=Number(s.LocalStorageMgr.getItem("GodWeapon_curIdx"))||0,t._curLevel=Number(s.LocalStorageMgr.getItem("GodWeapon_curLevel"))||0,t._unlock=JSON.parse(s.LocalStorageMgr.getItem("GodWeapon_unlock")||"[]"),t._exp=Number(s.LocalStorageMgr.getItem("GodWeapon_exp"))||0,t._refreshInfo(),t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUnlock",{get:function(){return this._isUnlock},set:function(e){this._isUnlock=e,s.LocalStorageMgr.setItem("GodWeapon_isUnlock",""+this._isUnlock)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(e){this._curIdx=e,s.LocalStorageMgr.setItem("GodWeapon_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){this._curLevel=e,this._refreshInfo(),s.LocalStorageMgr.setItem("GodWeapon_curLevel",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e,s.LocalStorageMgr.setItem("GodWeapon_exp",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unlock",{get:function(){return this._unlock},set:function(e){this._unlock=e,s.LocalStorageMgr.setItem("GodWeapon_unlock",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),t.prototype._refreshInfo=function(){var e=r.TABLE.getTable("GodWeapon");return this._curLevel>e.length?(this._cur=e[e.length-1],this._next=e[e.length-2]):(this._cur=e[this._curLevel-1],this._next=e[this._curLevel]),this._cur},t.prototype.getInfo=function(e){return r.TABLE.getTable("GodWeapon").find(function(t){return t.lv==e})},t.prototype.getSiblingInfo=function(e){var t=this.curLv;return 0==t&&(t=1),this.getInfo(t+e)},t.prototype.getPrefabUrl=function(e){return 0==e?"/Game/GodWeapon/magic0":"/Game/GodWeapon/"+this.getInfo(e).name},t.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},t.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godWeaponOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},t._inst=null,t}(c.GodBase);o.GodWeaponModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodWeaponReward:[function(e,t,o){"use strict";cc._RF.push(t,"e3015zR4JVBu5+gHEaBXVDL","GodWeaponReward");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Framework/i18n/i18nMgr"),c=e("../../../Framework/UI/UIFacade"),l=e("../../../Framework/UIBase"),p=e("../../../Model/UserModel"),u=e("../../../Model/GodWeaponModel"),d=e("../../../Framework/Event/EventMgr"),h=e("../../../Define/EventId"),f=e("../../../Guide/GodGuide"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.desc2=null,t.desc5=null,t.moneyNode=null,t}return i(t,e),t.prototype.onOpen=function(){this.refresh()},t.prototype.refresh=function(){this.desc2.string=""+s.i18nMgr.getLabel("GodWeaponReward/desc2",[""+p.UserModel.inst.godWeaponsRewardOpenStage,""+(p.UserModel.inst.curStage-1),""+p.UserModel.inst.godWeaponsRewardOpenStage]),this.desc5.string="x"+p.UserModel.inst.godWeaponsRewardMoney},t.prototype.onClickGet=function(){p.UserModel.inst.curStage<p.UserModel.inst.godWeaponsRewardOpenStage?c.UIFacade.showToast(s.i18nMgr.getLabel("GodWeaponReward/err")):this.onReward()},t.prototype.onClickAD=function(){var e=this;a.default.inst.showAd("\u9886\u53d6\u795e\u5175",function(){e.onReward()})},t.prototype.onReward=function(){u.GodWeaponModel.inst.isUnlock=1,p.UserModel.inst.rMoney+=p.UserModel.inst.godWeaponsRewardMoney;var e=this.moneyNode.convertToWorldSpaceAR(cc.Vec2.ZERO);d.EVENT.emit(h.EventId.ON_UI_MAIN_FLY_ICON,e,"RMoney"),f.default.inst.run(),this.close()},r([g(sp.Skeleton)],t.prototype,"spine",void 0),r([g(cc.Label)],t.prototype,"desc2",void 0),r([g(cc.Label)],t.prototype,"desc5",void 0),r([g(cc.Node)],t.prototype,"moneyNode",void 0),r([y],t)}(l.default);o.default=m,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Guide/GodGuide":"GodGuide","../../../Model/GodWeaponModel":"GodWeaponModel","../../../Model/UserModel":"UserModel"}],GuideCollider:[function(e,t,o){"use strict";cc._RF.push(t,"89f5cxbqBtKnKC6j1IXWpFL","GuideCollider");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._tag&&this._tag==o.node&&(this._enterCb&&this._enterCb(),this._enterCb=null,this._tag=null)},r([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],GuideTask1:[function(e,t,o){"use strict";cc._RF.push(t,"0d224FBPAVDxLd3o6YUTwk4","GuideTask1");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/GameItemMgr"),s=e("../../Define/EventId"),c=e("../../Framework/Event/EventMgr"),l=e("../../Game/PlayerCtrl"),p=e("../../Model/GameModel"),u=e("../GuideCollider"),d=e("../GuideText"),h=e("./Task"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/PopLayer/UIMain/BtnStartGame",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.tips[t.index].getComponentInChildren(d.default)._endCb=function(){t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle5",!0)},t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/StageMap/BtnStart",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,c.EVENT.once(s.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=t.tips[t.index].getComponentInChildren(d.default),n=cc.find(t.steps[t.index].path);o._endCb=function(){t.finger.setParent(n),t.finger.group=n.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle7",!0)},e()},t)}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),c.EVENT.once(s.EventId.ON_GAME_LOADED,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.tips[t.index].getComponentInChildren(d.default).close.active=!1;var o=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default);t.scheduleOnce(function(){o._player.setRoleAnimation(0,"idle",!0),e()},1)})}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e,o){o.input=!0,t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.tips[t.index].getComponentInChildren(d.default).close.active=!1;var n=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default),i=t.tips[t.index].getComponentInChildren(u.default);i._tag=n._player.node,i._enterCb=function(){e(),o.nextStage()}}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e,o){o.input=!0,t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.tips[t.index].getComponentInChildren(d.default).close.active=!1;var n=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default);t.tips[t.index].getComponentsInChildren(u.default).forEach(function(t){a.default.inst.generateExp(t.node.position),t._tag=n._player.node,t._enterCb=function(){e(),o.nextStage()}})}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default).joystick.onTouchEnd(null),e()}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default);t.scheduleOnce(function(){o._player.setRoleAnimation(0,"idle",!0)}),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1,p.GameModel.inst.isGuide=!0},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy(),p.GameModel.inst.isGuide=!1},r([y(cc.Node)],t.prototype,"finger",void 0),r([y(sp.Skeleton)],t.prototype,"spfinger",void 0),r([y(cc.Node)],t.prototype,"tips",void 0),r([_],t)}(h.default);o.default=g,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Game/PlayerCtrl":"PlayerCtrl","../../Model/GameModel":"GameModel","../GuideCollider":"GuideCollider","../GuideText":"GuideText","./Task":"Task"}],GuideTask2:[function(e,t,o){"use strict";cc._RF.push(t,"0e031xRJmJGnJ8bQvYmJW8b","GuideTask2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Define/UIDefs"),c=e("../../Framework/Event/EventMgr"),l=e("../../Framework/UI/UIMgr"),p=e("./Task"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnGodRide",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,c.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle2",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,c.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle3",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy(),cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&l.default.inst.open(s.UIType.StoreReview)},r([h(cc.Node)],t.prototype,"finger",void 0),r([h(sp.Skeleton)],t.prototype,"spfinger",void 0),r([h(cc.Node)],t.prototype,"tips",void 0),r([d],t)}(p.default);o.default=f,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UI/UIMgr":"UIMgr","./Task":"Task"}],GuideTask3:[function(e,t,o){"use strict";cc._RF.push(t,"7b34fCXubxK3rLESoN2LBRD","GuideTask3");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("../GuideText"),l=e("./Task"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnTalent",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/Talent/List/content/TalentItem",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path),n=t.node;t.finger.setParent(n),t.finger.group=o.group,t.finger.setPosition(n.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.Vec2.ZERO))),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),e()},t)}},{path:"UIRoot/PopLayer/Talent/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),e()}},{path:"UIRoot/PopLayer/Talent/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.finger.parent=null,t.finger.active=!1,t.tips[t.index].getComponentInChildren(c.default)._endCb=function(){var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([d(cc.Node)],t.prototype,"finger",void 0),r([d(sp.Skeleton)],t.prototype,"spfinger",void 0),r([d(cc.Node)],t.prototype,"tips",void 0),r([u],t)}(l.default);o.default=h,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../GuideText":"GuideText","./Task":"Task"}],GuideTask4:[function(e,t,o){"use strict";cc._RF.push(t,"16121W6YohAu6EOmYyBYV6+","GuideTask4");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("../GuideText"),l=e("./Task"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"Canvas/menu/btns/btnEquip",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/winEquip/middle/equip/view/content/0",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path),n=t.node;t.finger.setParent(n),t.finger.group=o.group,t.finger.setPosition(n.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.Vec2.ZERO))),t.finger.active=!0,t.spfinger.setAnimation(0,"idle10",!0),e()},t)}},{path:"UIRoot/PopLayer/winEquipTips/btnEquip",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle11",!0),e()},t)}},{path:"UIRoot/PopLayer/winEquip/bottom/btnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.finger.parent=null,t.finger.active=!1,t.tips[t.index].getComponentInChildren(c.default)._endCb=function(){var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}},{path:"Canvas/menu/btnStartGame",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle5",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([d(cc.Node)],t.prototype,"finger",void 0),r([d(sp.Skeleton)],t.prototype,"spfinger",void 0),r([d(cc.Node)],t.prototype,"tips",void 0),r([u],t)}(l.default);o.default=h,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../GuideText":"GuideText","./Task":"Task"}],GuideTask5:[function(e,t,o){"use strict";cc._RF.push(t,"f42620whHxAGa0riHOiV+I5","GuideTask5");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./Task"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnGodRide",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/ToggleContainer/BtnGodWeapon",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle2",!0),e()}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle3",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([u(cc.Node)],t.prototype,"finger",void 0),r([u(sp.Skeleton)],t.prototype,"spfinger",void 0),r([u(cc.Node)],t.prototype,"tips",void 0),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./Task":"Task"}],GuideTask6:[function(e,t,o){"use strict";cc._RF.push(t,"704e8Ac9N9EIJDVP3r5+uBI","GuideTask6");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./Task"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnGodRide",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/ToggleContainer/BtnGodPet",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle2",!0),e()}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle3",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([u(cc.Node)],t.prototype,"finger",void 0),r([u(sp.Skeleton)],t.prototype,"spfinger",void 0),r([u(cc.Node)],t.prototype,"tips",void 0),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./Task":"Task"}],GuideTask7:[function(e,t,o){"use strict";cc._RF.push(t,"c8c8fzD44hPHIbq27w9k49b","GuideTask7");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./Task"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/PopLayer/UIMain/Btns/BtnGodRide",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/ToggleContainer/BtnGodSkin",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle2",!0),e()}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle3",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenu/Bottom/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([u(cc.Node)],t.prototype,"finger",void 0),r([u(sp.Skeleton)],t.prototype,"spfinger",void 0),r([u(cc.Node)],t.prototype,"tips",void 0),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./Task":"Task"}],GuideText:[function(e,t,o){"use strict";cc._RF.push(t,"a3213YCdtRC5bbnNil8AEY0","GuideText");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Framework/i18n/i18nLabel"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lb=null,t.sp=null,t.close=null,t.isTypewriter=!0,t}return i(t,e),t.prototype.init=function(e,t){this._godGuide=e,this._step=t,this.lb.string=t.path},t.prototype.start=function(){this.isTypewriter?(this.typewriter(this.lb.string),this.close.active=!0):this.close.active=!1},t.prototype.typewriter=function(e){this._str=e,this._idx=0,this._writing=!0,this.lb.string=this._str[0],this.schedule(this.write,.05)},t.prototype.write=function(){this._idx>=this._str.length?this.writeEnd():(this._idx++,this.lb.string=this._str.substring(0,this._idx))},t.prototype.writeEnd=function(){this.close.active=!1,this._writing=!1,this.unscheduleAllCallbacks(),this.lb.string=this._str,this._endCb&&this._endCb()},t.prototype.onClick=function(){this.writeEnd()},r([l(a.i18nLabel)],t.prototype,"lb",void 0),r([l(cc.Sprite)],t.prototype,"sp",void 0),r([l(cc.Node)],t.prototype,"close",void 0),r([l],t.prototype,"isTypewriter",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Framework/i18n/i18nLabel":"i18nLabel"}],HpBar:[function(e,t,o){"use strict";cc._RF.push(t,"48f28Q250NOk4VG8Zp9gq8G","HpBar");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/GameItemBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pb=null,t._target=null,t._offsetY=0,t}return i(t,e),t.prototype.setTarget=function(e,t){this._target=e,this._offsetY=t;var o=this._target.node.position;this.node.setPosition(o.x,o.y+this._offsetY)},t.prototype.update=function(){if(null!=this._target)if(this._target.hp<=0)this.recycle();else{var e=this._target.node.position;this.node.setPosition(e.x,e.y+this._offsetY),this.pb.progress=this._target.hp/this._target.maxHp}},r([l(cc.ProgressBar)],t.prototype,"pb",void 0),r([c],t)}(a.GameItemBase);o.default=p,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase"}],IconItem:[function(e,t,o){"use strict";cc._RF.push(t,"cb395Fh0ohFMKEp9jUGSbBb","IconItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/Define"),s=e("../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t}return i(t,e),t.prototype.setIcon=function(e){var t=this;this.icon.spriteFrame=null,this.releaseAutoRes(),this.loadBundleRes("Textures",a.MONEY_ICON_URL[e],cc.SpriteFrame,function(e,o){t.icon.spriteFrame=o})},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([l],t)}(s.default);o.default=u,cc._RF.pop()},{"../../Define/Define":"Define","../../Framework/Res/ResKeeper":"ResKeeper"}],ItemMgr:[function(e,t,o){"use strict";cc._RF.push(t,"f795ehsMAJJYaV/zO2fPlcc","ItemMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../Framework/Res/ResKeeperAddition"),c=e("../Framework/UI/UIMgr"),l=cc._decorator,p=l.ccclass;l.property,function(e){e[e.ScoreFloatDouble=0]="ScoreFloatDouble",e[e.ScoreFloatTreble=1]="ScoreFloatTreble"}(a||(a={}));var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.loadItemPool(a.ScoreFloatDouble,"Prefabs","Effect/ScoreFloatDouble"),this.loadItemPool(a.ScoreFloatTreble,"Prefabs","Effect/ScoreFloatTreble")},t.prototype.generateDouble=function(e){var t=this,o=a.ScoreFloatDouble,n=this.get(o);n.setParent(c.default.inst.topLayer),n.setPosition(n.parent.convertToNodeSpaceAR(e));var i=n.getComponent(cc.Animation);i.play("ScoreFloatAnim"),i.once(cc.Animation.EventType.FINISHED,function(){t.put(o,n)})},t.prototype.generateTreble=function(e){var t=this,o=a.ScoreFloatTreble,n=this.get(o);n.setParent(c.default.inst.topLayer),n.setPosition(n.parent.convertToNodeSpaceAR(e));var i=n.getComponent(cc.Animation);i.play("ScoreFloatAnim"),i.once(cc.Animation.EventType.FINISHED,function(){t.put(o,n)})},r([p],t)}(s.default);o.default=u,cc._RF.pop()},{"../Framework/Res/ResKeeperAddition":"ResKeeperAddition","../Framework/UI/UIMgr":"UIMgr"}],Joystick:[function(e,t,o){"use strict";cc._RF.push(t,"e2259RZGDZHkpBfwGyDy6LR","Joystick");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.stick=null,t.radius=100,t._isTouch=!1,t._moveCallback=function(){},t._stopCallback=function(){},t}return i(t,e),t.prototype.start=function(){this._isTouch=!1,this.content.active=!1},t.prototype.setMoveCallback=function(e){this._moveCallback=e},t.prototype.setStopCallback=function(e){this._stopCallback=e},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},t.prototype.onTouchStart=function(e){this._isTouch=!0;var t=e.getLocation();this.content.active=!0,this.content.setPosition(this.content.parent.convertToNodeSpaceAR(t)),this.stick.setPosition(cc.Vec2.ZERO)},t.prototype.onTouchMove=function(e){if(this._isTouch){var t=e.getStartLocation(),o=e.getLocation(),n=cc.Vec2.subtract(o,o,t),i=n.len()/this.radius;i>1&&(i=1);var r=n.normalizeSelf(),a=i*this.radius;this.stick.setPosition(r.x*a,r.y*a),this._moveCallback(r,i)}},t.prototype.onTouchEnd=function(){this._isTouch=!1,this.content.active=!1,this._stopCallback()},r([c(cc.Node)],t.prototype,"content",void 0),r([c(cc.Node)],t.prototype,"stick",void 0),r([c],t.prototype,"radius",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],LayerMgr:[function(e,t,o){"use strict";cc._RF.push(t,"68cacZipe9P7LOegPC/atfX","LayerMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.LayerMgr=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.BottomLayer=null,t.BloodLayer=null,t.EffectLayer=null,t.ItemLayer=null,t.WarnLayer=null,t.BulletLayer=null,t.RoleLayer=null,t.RoleHitLayer=null,t.RoleStopLayer=null,t.BuildingLayer=null,t.PlayerLayer=null,t.BulletLayer2=null,t.PlayerBulletLayer=null,t.PlayerBulletLayer2=null,t.EquipLayer=null,t.Equip1Layer=null,t.Equip2Layer=null,t.HpLayer=null,t.NumberLayer=null,t.TopLayer=null,t}var o;return i(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return this._inst?this._inst:(cc.error("LayerMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._inst=this},t.prototype.onDestroy=function(){o._inst=null},r([c({type:cc.Node,tooltip:"\u5e95\u5c42"})],t.prototype,"BottomLayer",void 0),r([c({type:cc.Node,tooltip:"\u8840\u8ff9\u5c42"})],t.prototype,"BloodLayer",void 0),r([c({type:cc.Node,tooltip:"\u7279\u6027\u5c42"})],t.prototype,"EffectLayer",void 0),r([c({type:cc.Node,tooltip:"\u9053\u5177\u5c42"})],t.prototype,"ItemLayer",void 0),r([c({type:cc.Node,tooltip:"\u9884\u8b66\u5c42"})],t.prototype,"WarnLayer",void 0),r([c({type:cc.Node,tooltip:"\u5b50\u5f39\u5c421"})],t.prototype,"BulletLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5c42"})],t.prototype,"RoleLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u53d7\u51fb\u5c42"})],t.prototype,"RoleHitLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u505c\u6b62\u5c42"})],t.prototype,"RoleStopLayer",void 0),r([c({type:cc.Node,tooltip:"\u5efa\u7b51\u5c42"})],t.prototype,"BuildingLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5c42"})],t.prototype,"PlayerLayer",void 0),r([c({type:cc.Node,tooltip:"\u5b50\u5f39\u5c422"})],t.prototype,"BulletLayer2",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5b50\u5f39\u5c421"})],t.prototype,"PlayerBulletLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5b50\u5f39\u5c422"})],t.prototype,"PlayerBulletLayer2",void 0),r([c({type:cc.Node,tooltip:"\u88c5\u5907\u5c42"})],t.prototype,"EquipLayer",void 0),r([c({type:cc.Node,tooltip:"\u88c5\u5907\u5c42"})],t.prototype,"Equip1Layer",void 0),r([c({type:cc.Node,tooltip:"\u88c5\u5907\u5c42"})],t.prototype,"Equip2Layer",void 0),r([c({type:cc.Node,tooltip:"\u7075\u9b42\u5c42"})],t.prototype,"HpLayer",void 0),r([c({type:cc.Node,tooltip:"\u6570\u5b57\u5c42"})],t.prototype,"NumberLayer",void 0),r([c({type:cc.Node,tooltip:"\u9876\u5c42"})],t.prototype,"TopLayer",void 0),o=r([s],t)}(cc.Component);o.LayerMgr=l,cc._RF.pop()},{}],ListItem:[function(e,t,o){"use strict";cc._RF.push(t,"06feetG3s5K2LivmkDXp16c","ListItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property,p=s.disallowMultiple,u=s.menu,d=s.executionOrder;(function(e){e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH"})(a||(a={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.title=null,t.selectedMode=a.NONE,t.selectedFlag=null,t.selectedSpriteFrame=null,t._unselectedSpriteFrame=null,t.adaptiveSize=!1,t._selected=!1,t._eventReg=!1,t}return i(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case a.TOGGLE:this.selectedFlag.active=e;break;case a.SWITCH:var t=this.selectedFlag.getComponent(cc.Sprite);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(this.selectedMode==a.SWITCH){var e=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=e.spriteFrame}},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},t.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},t.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},t.prototype.createEvt=function(e,t,o){if(void 0===o&&(o=null),e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new cc.Component.EventHandler;return n.target=o||e.node,n.component=e.comName,n.handler=t,n}},t.prototype.showAni=function(e,t,o){var n,i=this;switch(e){case 0:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:2*i.node.height});break;case 1:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:2*i.node.width});break;case 2:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:-2*i.node.height});break;case 3:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:-2*i.node.width});break;default:n=cc.tween(i.node).to(.3,{scale:.1})}(t||o)&&n.call(function(){if(o){i.list._delSingleItem(i.node);for(var e=i.list.displayData.length-1;e>=0;e--)if(i.list.displayData[e].id==i.listId){i.list.displayData.splice(e,1);break}}t()}),n.start()},t.prototype.onClickThis=function(){this.list.selectedId=this.listId},r([l({type:cc.Sprite,tooltip:!1})],t.prototype,"icon",void 0),r([l({type:cc.Node,tooltip:!1})],t.prototype,"title",void 0),r([l({type:cc.Enum(a),tooltip:!1})],t.prototype,"selectedMode",void 0),r([l({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>a.NONE}})],t.prototype,"selectedFlag",void 0),r([l({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==a.SWITCH}})],t.prototype,"selectedSpriteFrame",void 0),r([l({tooltip:!1})],t.prototype,"adaptiveSize",void 0),r([c,p(),u("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),d(-5001)],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],List:[function(e,t,o){"use strict";cc._RF.push(t,"b754aCCwAJCqJF5E4E4fWzU","List");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s,c,l=cc._decorator,p=l.ccclass,u=l.property,d=l.disallowMultiple,h=l.menu,f=l.executionOrder,_=l.requireComponent,y=e("./ListItem");(function(e){e[e.NODE=1]="NODE",e[e.PREFAB=2]="PREFAB"})(a||(a={})),function(e){e[e.NORMAL=1]="NORMAL",e[e.ADHERING=2]="ADHERING",e[e.PAGE=3]="PAGE"}(s||(s={})),function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULT=2]="MULT"}(c||(c={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateType=a.NODE,t.tmpNode=null,t.tmpPrefab=null,t._slideMode=s.NORMAL,t.pageDistance=.3,t.pageChangeEvent=new cc.Component.EventHandler,t._virtual=!0,t.cyclic=!1,t.lackCenter=!1,t.lackSlide=!1,t._updateRate=0,t.frameByFrameRenderNum=0,t.renderEvent=new cc.Component.EventHandler,t.selectedMode=c.NONE,t.repeatEventSingle=!1,t.selectedEvent=new cc.Component.EventHandler,t._selectedId=-1,t._forceUpdate=!1,t._updateDone=!0,t._numItems=0,t._inited=!1,t._needUpdateWidget=!1,t._aniDelRuning=!1,t._doneAfterUpdate=!1,t.adhering=!1,t._adheringBarrier=!1,t.curPageNum=0,t}return i(t,e),Object.defineProperty(t.prototype,"slideMode",{get:function(){return this._slideMode},set:function(e){this._slideMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"virtual",{get:function(){return this._virtual},set:function(e){null!=e&&(this._virtual=e),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateRate",{get:function(){return this._updateRate},set:function(e){e>=0&&e<=6&&(this._updateRate=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this._selectedId},set:function(e){var t,o=this;switch(o.selectedMode){case c.SINGLE:if(!o.repeatEventSingle&&e==o._selectedId)return;t=o.getItemByListId(e);var n=void 0;if(o._selectedId>=0?o._lastSelectedId=o._selectedId:o._lastSelectedId=null,o._selectedId=e,t&&((n=t.getComponent(y.default)).selected=!0),o._lastSelectedId>=0&&o._lastSelectedId!=o._selectedId){var i=o.getItemByListId(o._lastSelectedId);i&&(i.getComponent(y.default).selected=!1)}o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],t,e%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems);break;case c.MULT:if(!(t=o.getItemByListId(e)))return;n=t.getComponent(y.default),o._selectedId>=0&&(o._lastSelectedId=o._selectedId),o._selectedId=e;var r=!n.selected;n.selected=r;var a=o.multSelected.indexOf(e);r&&a<0?o.multSelected.push(e):!r&&a>=0&&o.multSelected.splice(a,1),o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],t,e%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems,r)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(e){var t=this;if(t.checkInited(!1))if(null==e||e<0)cc.error("numItems set the wrong::",e);else if(t._actualNumItems=t._numItems=e,t._forceUpdate=!0,t._virtual)t._resizeContent(),t.cyclic&&(t._numItems=t._cyclicNum*t._numItems),t._onScrolling(),t.frameByFrameRenderNum||t.slideMode!=s.PAGE||(t.curPageNum=t.nearestListId);else{t.cyclic&&(t._resizeContent(),t._numItems=t._cyclicNum*t._numItems);var o=t.content.getComponent(cc.Layout);if(o&&(o.enabled=!0),t._delRedundantItem(),t.firstListId=0,t.frameByFrameRenderNum>0){for(var n=t.frameByFrameRenderNum>t._numItems?t._numItems:t.frameByFrameRenderNum,i=0;i<n;i++)t._createOrUpdateItem2(i);t.frameByFrameRenderNum<t._numItems&&(t._updateCounter=t.frameByFrameRenderNum,t._updateDone=!1)}else{for(i=0;i<t._numItems;i++)t._createOrUpdateItem2(i);t.displayItemNum=t._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._init()},t.prototype.onDestroy=function(){var e=this;cc.isValid(e._itemTmp)&&e._itemTmp.destroy(),cc.isValid(e.tmpNode)&&e.tmpNode.destroy(),e._pool&&e._pool.clear()},t.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},t.prototype.onDisable=function(){this._unregisterEvent()},t.prototype._registerEvent=function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.on("touch-up",e._onTouchUp,e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.on("scroll-began",e._onScrollBegan,e,!0),e.node.on("scroll-ended",e._onScrollEnded,e,!0),e.node.on("scrolling",e._onScrolling,e,!0),e.node.on(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._unregisterEvent=function(){var e=this;e.node.off(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.off("touch-up",e._onTouchUp,e),e.node.off(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.off("scroll-began",e._onScrollBegan,e,!0),e.node.off("scroll-ended",e._onScrollEnded,e,!0),e.node.off("scrolling",e._onScrolling,e,!0),e.node.off(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._init=function(){var e=this;if(!e._inited)if(e._scrollView=e.node.getComponent(cc.ScrollView),e.content=e._scrollView.content,e.content){switch(e._layout=e.content.getComponent(cc.Layout),e._align=e._layout.type,e._resizeMode=e._layout.resizeMode,e._startAxis=e._layout.startAxis,e._topGap=e._layout.paddingTop,e._rightGap=e._layout.paddingRight,e._bottomGap=e._layout.paddingBottom,e._leftGap=e._layout.paddingLeft,e._columnGap=e._layout.spacingX,e._lineGap=e._layout.spacingY,e._colLineNum,e._verticalDir=e._layout.verticalDirection,e._horizontalDir=e._layout.horizontalDirection,e.setTemplateItem(cc.instantiate(e.templateType==a.PREFAB?e.tmpPrefab:e.tmpNode)),e._slideMode!=s.ADHERING&&e._slideMode!=s.PAGE||(e._scrollView.inertia=!1,e._scrollView._onMouseWheel=function(){}),e.virtual||(e.lackCenter=!1),e._lastDisplayData=[],e.displayData=[],e._pool=new cc.NodePool,e._forceUpdate=!1,e._updateCounter=0,e._updateDone=!0,e.curPageNum=0,e.cyclic&&(e._scrollView._processAutoScrolling=this._processAutoScrolling.bind(e),e._scrollView._startBounceBackIfNeeded=function(){return!1}),e._align){case cc.Layout.Type.HORIZONTAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}}}e.content.removeAllChildren(),e._inited=!0}else cc.error(e.node.name+"'s cc.ScrollView unset content!")},t.prototype._processAutoScrolling=function(e){this._scrollView._autoScrollAccumulatedTime+=1*e;var t=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var o=t-1;t=o*o*o*o*o+1}var n=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(t)),i=this._scrollView.getScrollEndedEventTiming(),r=Math.abs(t-1)<=i;Math.abs(t-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),r&&(this._scrollView._autoScrolling=!1);var a=n.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(a),r),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},t.prototype.setTemplateItem=function(e){if(e){var t=this;t._itemTmp=e,t._resizeMode==cc.Layout.ResizeMode.CHILDREN?t._itemSize=t._layout.cellSize:t._itemSize=cc.size(e.width,e.height);var o=e.getComponent(y.default),n=!1;switch(o||(n=!0),n&&(t.selectedMode=c.NONE),(o=e.getComponent(cc.Widget))&&o.enabled&&(t._needUpdateWidget=!0),t.selectedMode==c.MULT&&(t.multSelected=[]),t._align){case cc.Layout.Type.HORIZONTAL:t._colLineNum=1,t._sizeType=!1;break;case cc.Layout.Type.VERTICAL:t._colLineNum=1,t._sizeType=!0;break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=t.content.width-t._leftGap-t._rightGap;t._colLineNum=Math.floor((i+t._columnGap)/(t._itemSize.width+t._columnGap)),t._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var r=t.content.height-t._topGap-t._bottomGap;t._colLineNum=Math.floor((r+t._lineGap)/(t._itemSize.height+t._lineGap)),t._sizeType=!1}}}},t.prototype.checkInited=function(e){return void 0===e&&(e=!0),!!this._inited||(e&&cc.error("List initialization not completed!"),!1)},t.prototype._resizeContent=function(){var e,t=this;switch(t._align){case cc.Layout.Type.HORIZONTAL:if(t._customSize){var o=t._getFixedSize(null);e=t._leftGap+o.val+t._itemSize.width*(t._numItems-o.count)+t._columnGap*(t._numItems-1)+t._rightGap}else e=t._leftGap+t._itemSize.width*t._numItems+t._columnGap*(t._numItems-1)+t._rightGap;break;case cc.Layout.Type.VERTICAL:t._customSize?(o=t._getFixedSize(null),e=t._topGap+o.val+t._itemSize.height*(t._numItems-o.count)+t._lineGap*(t._numItems-1)+t._bottomGap):e=t._topGap+t._itemSize.height*t._numItems+t._lineGap*(t._numItems-1)+t._bottomGap;break;case cc.Layout.Type.GRID:switch(t.lackCenter&&(t.lackCenter=!1),t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=Math.ceil(t._numItems/t._colLineNum);e=t._topGap+t._itemSize.height*n+t._lineGap*(n-1)+t._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var i=Math.ceil(t._numItems/t._colLineNum);e=t._leftGap+t._itemSize.width*i+t._columnGap*(i-1)+t._rightGap}}var r=t.content.getComponent(cc.Layout);if(r&&(r.enabled=!1),t._allItemSize=e,t._allItemSizeNoEdge=t._allItemSize-(t._sizeType?t._topGap+t._bottomGap:t._leftGap+t._rightGap),t.cyclic){var a=t._sizeType?t.node.height:t.node.width;t._cyclicPos1=0,a-=t._cyclicPos1,t._cyclicNum=Math.ceil(a/t._allItemSizeNoEdge)+1;var s=t._sizeType?t._lineGap:t._columnGap;t._cyclicPos2=t._cyclicPos1+t._allItemSizeNoEdge+s,t._cyclicAllItemSize=t._allItemSize+t._allItemSizeNoEdge*(t._cyclicNum-1)+s*(t._cyclicNum-1),t._cycilcAllItemSizeNoEdge=t._allItemSizeNoEdge*t._cyclicNum,t._cycilcAllItemSizeNoEdge+=s*(t._cyclicNum-1)}t._lack=!t.cyclic&&t._allItemSize<(t._sizeType?t.node.height:t.node.width);var c=t._lack&&t.lackCenter||!t.lackSlide?.1:0,l=t._lack?(t._sizeType?t.node.height:t.node.width)-c:t.cyclic?t._cyclicAllItemSize:t._allItemSize;l<0&&(l=0),t._sizeType?t.content.height=l:t.content.width=l},t.prototype._onScrolling=function(e){if(void 0===e&&(e=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&e&&"scroll-ended"!=e.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var t=this.content.getPosition();t=this._sizeType?t.y:t.x;var o=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),n=this._sizeType?cc.v2(0,o):cc.v2(o,0);switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):t<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)));break;case 2:t<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):t>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 3:t<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):t>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 4:t>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):t<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)))}}var i,r,a,s;if(this._calcViewPos(),this._sizeType?(i=this.viewTop,a=this.viewBottom):(r=this.viewRight,s=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,l=0,p=this._numItems-1;if(this._customSize)for(var u=!1;l<=p&&!u;l++)switch(c=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=i&&c.top>=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=i&&c.top>=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0)}}else{var d=this._itemSize.width+this._columnGap,h=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(s-this._leftGap)/d,p=(r-this._leftGap)/d;break;case 2:l=(-r-this._rightGap)/d,p=(-s-this._rightGap)/d;break;case 3:l=(-i-this._topGap)/h,p=(-a-this._topGap)/h;break;case 4:l=(a-this._bottomGap)/h,p=(i-this._bottomGap)/h}for(l=Math.floor(l)*this._colLineNum,p=Math.ceil(p)*this._colLineNum,l<0&&(l=0),--p>=this._numItems&&(p=this._numItems-1);l<=p;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var f=this._lastDisplayData.length,_=this.displayItemNum!=f;if(_&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(e,t){return e-t}),_=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[f-1]),this._forceUpdate||_)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var y=0;y<this.displayItemNum;y++)this._createOrUpdateItem(this.displayData[y]);this._forceUpdate=!1}this._calcNearestItem()}}},t.prototype._calcViewPos=function(){var e=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=e.x>0?e.x:0,this.viewLeft=(e.x<0?-e.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=e.x<0?-e.x:0,this.viewRight=(e.x>0?-e.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=e.y<0?Math.abs(e.y):0,this.viewTop=(e.y>0?-e.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=e.y>0?Math.abs(e.y):0,this.viewBottom=(e.y<0?-e.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},t.prototype._calcItemPos=function(e){var t,o,n,i,r,a,s,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(e);r=this._leftGap+(this._itemSize.width+this._columnGap)*(e-l.count)+(l.val+this._columnGap*l.count),t=(p=this._customSize[e])>0?p:this._itemSize.width}else r=this._leftGap+(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width;return this.lackCenter&&(r-=this._leftGap,r+=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,left:r,right:a=r+t,x:r+this._itemTmp.anchorX*t,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(e),a=-this._rightGap-(this._itemSize.width+this._columnGap)*(e-l.count)-(l.val+this._columnGap*l.count),t=(p=this._customSize[e])>0?p:this._itemSize.width):(a=-this._rightGap-(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width),this.lackCenter&&(a+=this._rightGap,a-=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,right:a,left:r=a-t,x:r+this._itemTmp.anchorX*t,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(e),n=-this._topGap-(this._itemSize.height+this._lineGap)*(e-l.count)-(l.val+this._lineGap*l.count),o=(p=this._customSize[e])>0?p:this._itemSize.height):(n=-this._topGap-(this._itemSize.height+this._lineGap)*e,o=this._itemSize.height),this.lackCenter&&(n+=this._topGap,n-=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:n,bottom:i=n-o,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*o};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var p;if(this._customSize)l=this._getFixedSize(e),i=this._bottomGap+(this._itemSize.height+this._lineGap)*(e-l.count)+(l.val+this._lineGap*l.count),o=(p=this._customSize[e])>0?p:this._itemSize.height;else i=this._bottomGap+(this._itemSize.height+this._lineGap)*e,o=this._itemSize.height;return this.lackCenter&&(i-=this._bottomGap,i+=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:n=i+o,bottom:i,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*o}}case cc.Layout.Type.GRID:var u=Math.floor(e/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(i=(n=-this._topGap-(this._itemSize.height+this._lineGap)*u)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:n=(i=this._bottomGap+(this._itemSize.height+this._lineGap)*u)+this._itemSize.height,c=i+this._itemTmp.anchorY*this._itemSize.height}switch(s=this._leftGap+e%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s+=this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s+=(1-this._itemTmp.anchorX)*this._itemSize.width,s-=(1-this.content.anchorX)*this.content.width,s*=-1}return{id:e,top:n,bottom:i,x:s,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a=(r=this._leftGap+(this._itemSize.width+this._columnGap)*u)+this._itemSize.width,s=r+this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s=(r=(a=-this._rightGap-(this._itemSize.width+this._columnGap)*u)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,s+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-e%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:e,left:r,right:a,x:s,y:c}}}},t.prototype._calcExistItemPos=function(e){var t=this.getItemByListId(e);if(!t)return null;var o={id:e,x:t.x,y:t.y};return this._sizeType?(o.top=t.y+t.height*(1-t.anchorY),o.bottom=t.y-t.height*t.anchorY):(o.left=t.x-t.width*t.anchorX,o.right=t.x+t.width*(1-t.anchorX)),o},t.prototype.getItemPos=function(e){return this._virtual?this._calcItemPos(e):this.frameByFrameRenderNum?this._calcItemPos(e):this._calcExistItemPos(e)},t.prototype._getFixedSize=function(e){if(!this._customSize)return null;null==e&&(e=this._numItems);var t=0,o=0;for(var n in this._customSize)parseInt(n)<e&&(t+=this._customSize[n],o++);return{val:t,count:o}},t.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},t.prototype._onScrollEnded=function(){var e=this;if(e.curScrollIsTouch=!1,null!=e.scrollToListId){var t=e.getItemByListId(e.scrollToListId);e.scrollToListId=null,t&&cc.tween(t).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}e._onScrolling(),e._slideMode!=s.ADHERING||e.adhering?e._slideMode==s.PAGE&&(null!=e._beganPos&&e.curScrollIsTouch?this._pageAdhere():e.adhere()):e.adhere()},t.prototype._onTouchStart=function(e,t){if(!this._scrollView.hasNestedViewGroup(e,t)&&(this.curScrollIsTouch=!0,e.eventPhase!==cc.Event.AT_TARGET||e.target!==this.node)){for(var o=e.target;null==o._listId&&o.parent;)o=o.parent;this._scrollItem=null!=o._listId?o:e.target}},t.prototype._onTouchUp=function(){var e=this;e._scrollPos=null,e._slideMode==s.ADHERING?(this.adhering&&(this._adheringBarrier=!0),e.adhere()):e._slideMode==s.PAGE&&(null!=e._beganPos?this._pageAdhere():e.adhere()),this._scrollItem=null},t.prototype._onTouchCancelled=function(e,t){var o=this;o._scrollView.hasNestedViewGroup(e,t)||e.simulate||(o._scrollPos=null,o._slideMode==s.ADHERING?(o.adhering&&(o._adheringBarrier=!0),o.adhere()):o._slideMode==s.PAGE&&(null!=o._beganPos?o._pageAdhere():o.adhere()),this._scrollItem=null)},t.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},t.prototype._onItemAdaptive=function(e){if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});var t=this._sizeType?e.height:e.width;this._customSize[e._listId]!=t&&(this._customSize[e._listId]=t,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},t.prototype._pageAdhere=function(){var e=this;if(e.cyclic||!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){var t=e._sizeType?e.viewTop:e.viewLeft,o=(e._sizeType?e.node.height:e.node.width)*e.pageDistance;if(Math.abs(e._beganPos-t)>o)switch(e._alignCalcType){case 1:case 4:e._beganPos>t?e.prePage(.5):e.nextPage(.5);break;case 2:case 3:e._beganPos<t?e.prePage(.5):e.nextPage(.5)}else e.elasticTop<=0&&e.elasticRight<=0&&e.elasticBottom<=0&&e.elasticLeft<=0&&e.adhere();e._beganPos=null}},t.prototype.adhere=function(){var e=this;if(e.checkInited()&&!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){e.adhering=!0,e._calcNearestItem();var t=(e._sizeType?e._topGap:e._leftGap)/(e._sizeType?e.node.height:e.node.width);e.scrollTo(e.nearestListId,.7,t)}},t.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var e=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++){var o=this.displayData[t];o&&this._createOrUpdateItem(o)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(e=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++)this._createOrUpdateItem2(t);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)},t.prototype._createOrUpdateItem=function(e){var t=this.getItemByListId(e.id);if(t)this._forceUpdate&&this.renderEvent&&(t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems));else{var o=this._pool.size()>0;if(t=o?this._pool.get():cc.instantiate(this._itemTmp),o&&cc.isValid(t)||(t=cc.instantiate(this._itemTmp),o=!1),t._listId!=e.id&&(t._listId=e.id,t.setContentSize(this._itemSize)),t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.content.addChild(t),o&&this._needUpdateWidget){var n=t.getComponent(cc.Widget);n&&n.updateAlignment()}t.setSiblingIndex(this.content.childrenCount-1);var i=t.getComponent(y.default);t.listItem=i,i&&(i.listId=e.id,i.list=this,i._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems)}this._resetItemSize(t),this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e.id)<0&&this._lastDisplayData.push(e.id)},t.prototype._createOrUpdateItem2=function(e){var t,o=this.content.children[e];o?this._forceUpdate&&this.renderEvent&&(o._listId=e,t&&(t.listId=e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,e%this._actualNumItems)):((o=cc.instantiate(this._itemTmp))._listId=e,this.content.addChild(o),t=o.getComponent(y.default),o.listItem=t,t&&(t.listId=e,t.list=this,t._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,e%this._actualNumItems)),this._updateListItem(t),this._lastDisplayData.indexOf(e)<0&&this._lastDisplayData.push(e)},t.prototype._updateListItem=function(e){if(e&&this.selectedMode>c.NONE){var t=e.node;switch(this.selectedMode){case c.SINGLE:e.selected=this.selectedId==t._listId;break;case c.MULT:e.selected=this.multSelected.indexOf(t._listId)>=0}}},t.prototype._resetItemSize=function(){},t.prototype._updateItemPos=function(e){var t=isNaN(e)?e:this.getItemByListId(e),o=this.getItemPos(t._listId);t.setPosition(o.x,o.y)},t.prototype.setMultSelected=function(e,t){var o=this;if(o.checkInited()){if(Array.isArray(e)||(e=[e]),null==t)o.multSelected=e;else{var n=void 0,i=void 0;if(t)for(var r=e.length-1;r>=0;r--)n=e[r],(i=o.multSelected.indexOf(n))<0&&o.multSelected.push(n);else for(r=e.length-1;r>=0;r--)n=e[r],(i=o.multSelected.indexOf(n))>=0&&o.multSelected.splice(i,1)}o._forceUpdate=!0,o._onScrolling()}},t.prototype.getMultSelected=function(){return this.multSelected},t.prototype.hasMultSelected=function(e){return this.multSelected&&this.multSelected.indexOf(e)>=0},t.prototype.updateItem=function(e){if(this.checkInited()){Array.isArray(e)||(e=[e]);for(var t=0,o=e.length;t<o;t++){var n=e[t],i=this.getItemByListId(n);i&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,n%this._actualNumItems)}}},t.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},t.prototype.getItemByListId=function(e){if(this.content)for(var t=this.content.childrenCount-1;t>=0;t--){var o=this.content.children[t];if(o._listId==e)return o}},t.prototype._getOutsideItem=function(){for(var e,t=[],o=this.content.childrenCount-1;o>=0;o--)e=this.content.children[o],this.displayData.find(function(t){return t.id==e._listId})||t.push(e);return t},t.prototype._delRedundantItem=function(){if(this._virtual)for(var e=this._getOutsideItem(),t=e.length-1;t>=0;t--){var o=e[t];if(!this._scrollItem||o._listId!=this._scrollItem._listId){o.isCached=!0,this._pool.put(o);for(var n=this._lastDisplayData.length-1;n>=0;n--)if(this._lastDisplayData[n]==o._listId){this._lastDisplayData.splice(n,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},t.prototype._delSingleItem=function(e){e.removeFromParent(),e.destroy&&e.destroy(),e=null},t.prototype.aniDelItem=function(e,t,o){var n=this;if(!n.checkInited()||n.cyclic||!n._virtual)return cc.error("This function is not allowed to be called!");if(!t)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(n._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var i,r=n.getItemByListId(e);if(r){i=r.getComponent(y.default),n._aniDelRuning=!0,n._aniDelCB=t,n._aniDelItem=r,n._aniDelBeforePos=r.position,n._aniDelBeforeScale=r.scale;var a=n.displayData[n.displayData.length-1].id,s=i.selected;i.showAni(o,function(){var o,i,l;if(a<n._numItems-2&&(o=a+1),null!=o){var p=n._calcItemPos(o);n.displayData.push(p),n._virtual?n._createOrUpdateItem(p):n._createOrUpdateItem2(o)}else n._numItems--;if(n.selectedMode==c.SINGLE)s?n._selectedId=-1:n._selectedId-1>=0&&n._selectedId--;else if(n.selectedMode==c.MULT&&n.multSelected.length){var u=n.multSelected.indexOf(e);u>=0&&n.multSelected.splice(u,1);for(var d=n.multSelected.length-1;d>=0;d--)(_=n.multSelected[d])>=e&&n.multSelected[d]--}if(n._customSize){n._customSize[e]&&delete n._customSize[e];var h={},f=void 0;for(var _ in n._customSize){f=n._customSize[_];var y=parseInt(_);h[y-(y>=e?1:0)]=f}n._customSize=h}for(d=null!=o?o:a;d>=e+1;d--)if(r=n.getItemByListId(d)){var g=n._calcItemPos(d-1);i=cc.tween(r).to(.2333,{position:cc.v2(g.x,g.y)}),d<=e+1&&(l=!0,i.call(function(){n._aniDelRuning=!1,t(e),delete n._aniDelCB})),i.start()}l||(n._aniDelRuning=!1,t(e),n._aniDelCB=null)},!0)}else t(e)},t.prototype.scrollTo=function(e,t,o,n){void 0===t&&(t=.5),void 0===o&&(o=null),void 0===n&&(n=!1);var i=this;if(i.checkInited(!1)){null==t?t=.5:t<0&&(t=0),e<0?e=0:e>=i._numItems&&(e=i._numItems-1),!i._virtual&&i._layout&&i._layout.enabled&&i._layout.updateLayout();var r,a,s=i.getItemPos(e);if(!s)return!1;switch(i._alignCalcType){case 1:r=s.left,r-=null!=o?i.node.width*o:i._leftGap,s=cc.v2(r,0);break;case 2:r=s.right-i.node.width,r+=null!=o?i.node.width*o:i._rightGap,s=cc.v2(r+i.content.width,0);break;case 3:a=s.top,a+=null!=o?i.node.height*o:i._topGap,s=cc.v2(0,-a);break;case 4:a=s.bottom+i.node.height,a-=null!=o?i.node.height*o:i._bottomGap,s=cc.v2(0,-a+i.content.height)}var c=i.content.getPosition();c=Math.abs(i._sizeType?c.y:c.x);var l=i._sizeType?s.y:s.x;Math.abs((null!=i._scrollPos?i._scrollPos:c)-l)>.5&&(i._scrollView.scrollToOffset(s,t),i._scrollToListId=e,i._scrollToEndTime=(new Date).getTime()/1e3+t,i._scrollToSo=i.scheduleOnce(function(){if(i._adheringBarrier||(i.adhering=i._adheringBarrier=!1),i._scrollPos=i._scrollToListId=i._scrollToEndTime=i._scrollToSo=null,n){var t=i.getItemByListId(e);t&&cc.tween(t).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},t+.1),t<=0&&i._onScrolling())}},t.prototype._calcNearestItem=function(){var e,t,o,n,i,r,a=this;a.nearestListId=null,a._virtual&&a._calcViewPos(),o=a.viewTop,n=a.viewRight,i=a.viewBottom,r=a.viewLeft;for(var s=!1,c=0;c<a.content.childrenCount&&!s;c+=a._colLineNum)if(e=a._virtual?a.displayData[c]:a._calcExistItemPos(c))switch(t=a._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,a._alignCalcType){case 1:e.right>=r&&(a.nearestListId=e.id,r>t&&(a.nearestListId+=a._colLineNum),s=!0);break;case 2:e.left<=n&&(a.nearestListId=e.id,n<t&&(a.nearestListId+=a._colLineNum),s=!0);break;case 3:e.bottom<=o&&(a.nearestListId=e.id,o<t&&(a.nearestListId+=a._colLineNum),s=!0);break;case 4:e.top>=i&&(a.nearestListId=e.id,i>t&&(a.nearestListId+=a._colLineNum),s=!0)}if((e=a._virtual?a.displayData[a.displayItemNum-1]:a._calcExistItemPos(a._numItems-1))&&e.id==a._numItems-1)switch(t=a._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,a._alignCalcType){case 1:n>t&&(a.nearestListId=e.id);break;case 2:r<t&&(a.nearestListId=e.id);break;case 3:i<t&&(a.nearestListId=e.id);break;case 4:o>t&&(a.nearestListId=e.id)}},t.prototype.prePage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,e)},t.prototype.nextPage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,e)},t.prototype.skipPage=function(e,t){var o=this;if(o.checkInited())return o._slideMode!=s.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(e<0||e>=o._numItems||o.curPageNum!=e&&(o.curPageNum=e,o.pageChangeEvent&&cc.Component.EventHandler.emitEvents([o.pageChangeEvent],e),o.scrollTo(e,t)))},t.prototype.calcCustomSize=function(e){var t=this;if(t.checkInited()){if(!t._itemTmp)return cc.error("Unset template item!");if(!t.renderEvent)return cc.error("Unset Render-Event!");t._customSize={};var o=cc.instantiate(t._itemTmp);t.content.addChild(o);for(var n=0;n<e;n++)cc.Component.EventHandler.emitEvents([t.renderEvent],o,n),o.height==t._itemSize.height&&o.width==t._itemSize.width||(t._customSize[n]=t._sizeType?o.height:o.width);return Object.keys(t._customSize).length||(t._customSize=null),o.removeFromParent(),o.destroy&&o.destroy(),t._customSize}},r([u({type:cc.Enum(a),tooltip:!1})],t.prototype,"templateType",void 0),r([u({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==a.NODE}})],t.prototype,"tmpNode",void 0),r([u({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==a.PREFAB}})],t.prototype,"tmpPrefab",void 0),r([u()],t.prototype,"_slideMode",void 0),r([u({type:cc.Enum(s),tooltip:!1})],t.prototype,"slideMode",null),r([u({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==s.PAGE}})],t.prototype,"pageDistance",void 0),r([u({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==s.PAGE}})],t.prototype,"pageChangeEvent",void 0),r([u()],t.prototype,"_virtual",void 0),r([u({type:cc.Boolean,tooltip:!1})],t.prototype,"virtual",null),r([u({tooltip:!1,visible:function(){var e=this.slideMode==s.NORMAL;return e||(this.cyclic=!1),e}})],t.prototype,"cyclic",void 0),r([u({tooltip:!1,visible:function(){return this.virtual}})],t.prototype,"lackCenter",void 0),r([u({tooltip:!1,visible:function(){var e=this.virtual&&!this.lackCenter;return e||(this.lackSlide=!1),e}})],t.prototype,"lackSlide",void 0),r([u({type:cc.Integer})],t.prototype,"_updateRate",void 0),r([u({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],t.prototype,"updateRate",null),r([u({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],t.prototype,"frameByFrameRenderNum",void 0),r([u({type:cc.Component.EventHandler,tooltip:!1})],t.prototype,"renderEvent",void 0),r([u({type:cc.Enum(c),tooltip:!1})],t.prototype,"selectedMode",void 0),r([u({tooltip:!1,visible:function(){return this.selectedMode==c.SINGLE}})],t.prototype,"repeatEventSingle",void 0),r([u({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>c.NONE}})],t.prototype,"selectedEvent",void 0),r([u({serializable:!1})],t.prototype,"_numItems",void 0),r([p,d(),h("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),_(cc.ScrollView),f(-5e3)],t)}(cc.Component);o.default=g,cc._RF.pop()},{"./ListItem":"ListItem"}],Loading:[function(e,t,o){"use strict";cc._RF.push(t,"7dc748ZYolDSqbPZgpxd+Tv","Loading");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/UIBase"),s=e("../../Define/EventId"),c=e("../../Framework/Event/EventMgr"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lblTip=null,t.lblProgress=null,t.progress=null,t}return i(t,e),t.prototype.onLoad=function(){this.lblProgress.string=""},t.prototype.start=function(){},t.prototype.onOpen=function(){this.progress.progress=0},t.prototype.onEnable=function(){c.EVENT.on(s.EventId.ON_UPDATE_LOADING_TTP,this.onUpdateTip,this),c.EVENT.on(s.EventId.ON_UPDATE_LOADING_PROGRESS,this.onUpdateProgress,this),c.EVENT.on(s.EventId.ON_UPDATE_LOADING_END,this.onUpdateEnd,this)},t.prototype.onDisable=function(){c.EVENT.off(s.EventId.ON_UPDATE_LOADING_TTP,this.onUpdateTip,this),c.EVENT.off(s.EventId.ON_UPDATE_LOADING_PROGRESS,this.onUpdateProgress,this),c.EVENT.off(s.EventId.ON_UPDATE_LOADING_END,this.onUpdateEnd,this)},t.prototype.onUpdateTip=function(e){this.lblTip.string=e},t.prototype.onUpdateProgress=function(e,t){var o=e/t;o>this.progress.progress&&(this.progress.progress=o,this.lblProgress.string=Math.floor(e/t*100)+"%")},t.prototype.onUpdateEnd=function(){this.progress.node.active=!1,this.close()},t.prototype.close=function(){e.prototype.close.call(this),this.progress.node.active=!1},r([u(cc.Label)],t.prototype,"lblTip",void 0),r([u(cc.Label)],t.prototype,"lblProgress",void 0),r([u(cc.ProgressBar)],t.prototype,"progress",void 0),r([p],t)}(a.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase"}],LocalKey:[function(e,t,o){"use strict";cc._RF.push(t,"d7c60hHZixC2KEMWvtpS6f3","LocalKey"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalKey=void 0;var n=function(){function e(){}return e.SoundVolum="LocalKey.SoundVolum",e.TestLocalAccount="LocalKey.TestLocalAccount",e.GuideStep="LocalKey.GuideStep",e.AudioVolumeMusic="LocalKey.AudioVolumeMusic",e.AudioVolumeMusicMute="LocalKey.AudioVolumeMute",e.AudioVolumeEffect="LocalKey.AudioVolumeEffect",e.AudioVolumeEffectMute="LocalKey.AudioVolumeEffectMute",e.GamePower="Localkey.GamePower",e.GameLevel="Localkey.GameLevel",e.NewPlayer="Localkey.NewPlayer",e.GameLeaveTime="Localkey.GameLeaveTime",e.GameEnterTime="Localkey.GameEnterTime",e}();o.LocalKey=n,cc._RF.pop()},{}],LocalStorageMgr:[function(e,t,o){"use strict";cc._RF.push(t,"cffcemub7tG4LuvC9orVgxn","LocalStorageMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStorageMgr=void 0;var n=function(){function e(){}return e.setHashID=function(t){e.hashID=t,e.setItem("hashID",t,!0)},e.getHashID=function(){return e.getItem("hashID",!0)},e.setItem=function(t,o,n){void 0===n&&(n=!1),n?cc.sys.localStorage.setItem(t,o):cc.sys.localStorage.setItem(e.hashID+"_"+t,o)},e.getItem=function(t,o){return void 0===o&&(o=!1),o?cc.sys.localStorage.getItem(t):cc.sys.localStorage.getItem(e.hashID+"_"+t)},e.removeItem=function(t,o){void 0===o&&(o=!1),o?cc.sys.localStorage.removeItem(t):cc.sys.localStorage.removeItem(e.hashID+"_"+t)},e.clearAll=function(){cc.sys.localStorage.clear()},e}();o.LocalStorageMgr=n,cc._RF.pop()},{}],MagnetModel:[function(e,t,o){"use strict";cc._RF.push(t,"a33fburA2BNhYvf+kV6fJAg","MagnetModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.MagnetModel=void 0;var n=e("../Controller/TableMgr"),i=e("../Framework/Storage/LocalStorageMgr"),r=function(){function e(){this._active=!1,this._stageTime=0,this._endTime=0,this._free=6e5,this._fristAd=216e5,this._nextAd=36e5,this._max=432e5,this._count=0,this._free=Number(n.TABLE.getGlobal("CiXiXiaoYing_free")),this._fristAd=Number(n.TABLE.getGlobal("CiXiXiaoYing_fristAd")),this._nextAd=Number(n.TABLE.getGlobal("CiXiXiaoYing_nextAd")),this._max=Number(n.TABLE.getGlobal("CiXiXiaoYing_max")),this._count=Number(i.LocalStorageMgr.getItem("CiXiXiaoYing_count"))||0,this._endTime=Number(i.LocalStorageMgr.getItem("CiXiXiaoYing_endTime"))||0}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageTime",{get:function(){return this._stageTime},set:function(e){this._stageTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return this._endTime},set:function(e){this._endTime=e,i.LocalStorageMgr.setItem("CiXiXiaoYing_endTime",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"free",{get:function(){return this._free},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fristAd",{get:function(){return this._fristAd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextAd",{get:function(){return this._nextAd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},set:function(e){this._count=e,i.LocalStorageMgr.setItem("CiXiXiaoYing_count",""+e)},enumerable:!1,configurable:!0}),e.prototype.isActive=function(){return this._active},e.prototype.isActiveStage=function(){return this._active},e._inst=null,e}();o.MagnetModel=r,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr"}],Magnet:[function(e,t,o){"use strict";cc._RF.push(t,"3de38KPKf5Eo5yHJ/hIr2JP","Magnet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/i18n/i18nMgr"),u=e("../../../Framework/UI/UIFacade"),d=e("../../../Framework/UIBase"),h=e("../../../Model/MagnetModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeNode=null,t.freeNode=null,t.adNode=null,t.adTxt=null,t.freeTxt=null,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onOpen=function(){this.refresh(),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){l.EVENT.emit(s.EventId.ON_GAME_RESUME)},t.prototype.refresh=function(){h.MagnetModel.inst.isActive()?(this.activeNode.active=!0,this.freeNode.active=!1,this.adNode.active=!1):(this.activeNode.active=!1,this.freeNode.active=0==h.MagnetModel.inst.count,this.adNode.active=0!=h.MagnetModel.inst.count)},t.prototype.onClickFree=function(){h.MagnetModel.inst.active=!0,h.MagnetModel.inst.count++,u.UIFacade.showToast(p.i18nMgr.getLabel("CiXiXiaoYing/active1")),c.AudioMgr.inst.playEffectByName("ui_tips"),this.close()},t.prototype.onClickAd=function(){var e=this;a.default.inst.showAd("\u78c1\u5438\u6548\u5e94",function(){h.MagnetModel.inst.active=!0,h.MagnetModel.inst.count++,u.UIFacade.showToast(p.i18nMgr.getLabel("CiXiXiaoYing/active1")),c.AudioMgr.inst.playEffectByName("ui_tips"),e.close()})},r([y(cc.Node)],t.prototype,"activeNode",void 0),r([y(cc.Node)],t.prototype,"freeNode",void 0),r([y(cc.Node)],t.prototype,"adNode",void 0),r([y(cc.Label)],t.prototype,"adTxt",void 0),r([y(cc.Label)],t.prototype,"freeTxt",void 0),r([_],t)}(d.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/MagnetModel":"MagnetModel"}],Main:[function(e,t,o){"use strict";cc._RF.push(t,"94684dGaT9HWLMhvdQlRcUr","Main");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../Controller/GameItemMgr"),l=e("../../Controller/TableMgr"),p=e("../../Define/Define"),u=e("../../Define/EventId"),d=e("../../Define/StaticData"),h=e("../../Define/UIDefs"),f=e("../../Framework/Audio/AudioMgr"),_=e("../../Framework/Event/EventMgr"),y=e("../../Framework/Scene/SceneBase"),g=e("../../Framework/UI/UIMgr"),m=e("../../Framework/VM"),v=e("../../Model/GameModel"),M=e("../../Model/MagnetModel"),b=e("../../Model/UserModel"),E=cc._decorator,I=E.ccclass,O=E.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainCamera=null,t.bgCamera=null,t.bg=null,t._bgScale=1,t._bgMt=null,t._bgSize=null,t}return i(t,e),t.prototype.onLoad=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(){return cc.PhysicsManager.FIXED_TIME_STEP=1/30,cc.PhysicsManager.VELOCITY_ITERATIONS=5,cc.PhysicsManager.POSITION_ITERATIONS=5,(e=cc.director.getPhysicsManager()).enabled=!0,e.enabledAccumulator=!0,e.gravity=cc.Vec2.ZERO,[2]})})},t.prototype.start=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(){return this._bgScale=Number(l.TABLE.getGlobal("ZhanDouShiYe")),this.mainCamera.zoomRatio=this._bgScale,this.bgCamera.zoomRatio=this._bgScale,e=cc.view.getVisibleSize(),this.bg.node.width=e.width/this._bgScale,this.bg.node.height=e.height/this._bgScale,d.StaticData.maxX=e.width/2/this._bgScale,d.StaticData.maxY=e.height/2/this._bgScale,d.StaticData.minX=-e.width/2/this._bgScale,d.StaticData.minY=-e.height/2/this._bgScale,d.StaticData.radius=100+Math.sqrt(Math.pow(e.width/2,2)+Math.pow(e.height/2,2))/this._bgScale,d.StaticData.mainCamera=this.mainCamera,[2]})})},t.prototype.onEnable=function(){m.VM.bindPath("UserModel._background",this.updateBackground,this),_.EVENT.on(u.EventId.ON_GAME_PAUSE,this.pause,this),_.EVENT.on(u.EventId.ON_GAME_RESUME,this.resume,this),_.EVENT.on(u.EventId.ON_GAME_START,this.gameStart,this),_.EVENT.on(u.EventId.ON_GAME_LOADED,this.gameLoaded,this),_.EVENT.on(u.EventId.ON_GAME_RESULT,this.gameResult,this),_.EVENT.on(u.EventId.ON_GAME_OVER,this.gameOver,this),_.EVENT.on(u.EventId.ON_GAME_UPDATE_ROLE_POS,this.updateCamera,this)},t.prototype.onDisable=function(){m.VM.unbindPath("UserModel._background",this.updateBackground,this),_.EVENT.off(u.EventId.ON_GAME_PAUSE,this.pause,this),_.EVENT.off(u.EventId.ON_GAME_RESUME,this.resume,this),_.EVENT.off(u.EventId.ON_GAME_START,this.gameStart,this),_.EVENT.off(u.EventId.ON_GAME_LOADED,this.gameLoaded,this),_.EVENT.off(u.EventId.ON_GAME_RESULT,this.gameResult,this),_.EVENT.off(u.EventId.ON_GAME_OVER,this.gameOver,this),_.EVENT.off(u.EventId.ON_GAME_UPDATE_ROLE_POS,this.updateCamera,this)},t.prototype.updateBackground=function(e){var t=this;v.GameModel.inst.loadRef++,this.loadBundleRes("Textures",p.BACKGROUND_URL[e],cc.SpriteFrame,function(e,o){v.GameModel.inst.loadRef--;var n=t.bg.spriteFrame;t.bg.spriteFrame=null,t.bg.spriteFrame=o,t.releaseAsset(n),t._bgMt=t.bg.getMaterial(0),t._bgSize=t.bg.spriteFrame.getOriginalSize()})},t.prototype.clearBackground=function(){var e=this.bg.spriteFrame;this.bg.spriteFrame=null,this.releaseAsset(e),this._bgMt=null,this._bgSize=null},t.prototype.pause=function(){v.GameModel.inst.isPause||(v.GameModel.inst.isPause=!0)},t.prototype.resume=function(){v.GameModel.inst.isPause&&(v.GameModel.inst.isPause=!1)},t.prototype.gameStart=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return g.default.inst.delayUIWaitAnim(cc.macro.REPEAT_FOREVER),g.default.inst.close(h.UIType.GameStart),g.default.inst.close(h.UIType.UIMain),p.Config.isAdBanner?g.default.inst.open(h.UIType.UIGameB):g.default.inst.open(h.UIType.UIGame),[4,c.default.inst.init()];case 1:return e.sent(),v.GameModel.inst.isLoad=!0,M.MagnetModel.inst.active=!1,this.mainCamera.node.setPosition(0,0),this.updateBackground(b.UserModel.inst.background),_.EVENT.emit(u.EventId.ON_GAME_LOAD),[2]}})})},t.prototype.gameLoaded=function(){v.GameModel.inst.isLoad=!1,g.default.inst.close(h.UIType.Loading),f.AudioMgr.inst.playBgm("bg1"),_.EVENT.emit(u.EventId.ON_GAME_RESUME)},t.prototype.gameResult=function(){g.default.inst.open(h.UIType.GameOver)},t.prototype.gameOver=function(){g.default.inst.delayUIWaitAnim(cc.macro.REPEAT_FOREVER),p.Config.isAdBanner?g.default.inst.close(h.UIType.UIGameB):g.default.inst.close(h.UIType.UIGame),g.default.inst.open(h.UIType.GameStart),g.default.inst.open(h.UIType.UIMain),f.AudioMgr.inst.playBgm("bgMenu"),c.default.inst.releaseAutoRes(),_.EVENT.emit(u.EventId.ON_GAME_PAUSE),this.clearBackground()},t.prototype.updateCamera=function(e){var t=this.mainCamera.node.getPosition(),o=e,n=t.x+.1*(o.x-t.x),i=t.y+.1*(o.y-t.y);this.mainCamera.node.setPosition(n,i);var r=cc.v2(n/this._bgSize.width,-i/this._bgSize.height);this._bgMt&&this._bgMt.setProperty("uOffset",r)},t.prototype.update=function(e){var t=v.GameModel.inst;t.isPause||t.isGuide||(t.time+=e)},r([O(cc.Camera)],t.prototype,"mainCamera",void 0),r([O(cc.Camera)],t.prototype,"bgCamera",void 0),r([O(cc.Sprite)],t.prototype,"bg",void 0),r([I],t)}(y.default);o.default=S,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Controller/TableMgr":"TableMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/StaticData":"StaticData","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Scene/SceneBase":"SceneBase","../../Framework/UI/UIMgr":"UIMgr","../../Framework/VM":"VM","../../Model/GameModel":"GameModel","../../Model/MagnetModel":"MagnetModel","../../Model/UserModel":"UserModel"}],MonsterCircle:[function(e,t,o){"use strict";cc._RF.push(t,"a9d9ftUbJRH0LmXD4T1Y0KA","MonsterCircle");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Component/MonsterComponent"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeDur=0,t}return i(t,e),t.prototype.updateMonster=function(t,o){e.prototype.updateMonster.call(this,t,o),this._lifeDur=t.lifeMax;var n=o*Math.floor(360/t.count),i=t.radMin,r=cc.math.toRadian(n),a=Math.cos(r)*i,s=Math.sin(r)*i,c=this._game.player.node.getPosition();c.x+=a,c.y+=s,this.node.setPosition(c)},t.prototype.updatePos=function(e){if(!this._isPauseMove&&!(this._stopTime>0||this.hp<=0)){this._orientation.x=e.x-this.node.position.x,this._orientation.y=e.y-this.node.position.y,this._orientation.normalizeSelf(),(this._orientation.x<0&&this.node.scaleX<0||this._orientation.x>0&&this.node.scaleX>0)&&(this.node.scaleX*=-1);var t=this.moveSpeed;this._linearVelocity.x=this._orientation.x*t,this._linearVelocity.y=this._orientation.y*t,this._rBody.linearVelocity=this._linearVelocity}},t.prototype.update=function(t){e.prototype.update.call(this,t),this._lifeDur-=t,this._lifeDur<=0&&this.recycle()},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"../Component/MonsterComponent":"MonsterComponent"}],MonsterComponent:[function(e,t,o){"use strict";cc._RF.push(t,"110c2wNm8dGb5z46gzi+5EA","MonsterComponent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/GameItemMgr"),s=e("../../Controller/LayerMgr"),c=e("../../Controller/TableMgr"),l=e("../../Define/EventId"),p=e("../../Define/StaticData"),u=e("../../Framework/Audio/AudioMgr"),d=e("../../Framework/Event/EventMgr"),h=e("../../Framework/Utils/Utils"),f=e("../../Model/GameModel"),_=e("../../Model/WeaponModel"),y=e("../NpcBase"),g=cc._decorator,m=g.ccclass,v=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rBody=null,t._collider=null,t._info=null,t._spr=null,t._ani=null,t._spine=null,t._stopTime=0,t._hitTime=0,t._repel=0,t._isPauseMove=!1,t._material=[],t._materialVariants=[],t._orientation=cc.v2(),t._linearVelocity=cc.v2(),t._v3=cc.v3(),t._game=f.GameModel.inst,t._siblingIndex=0,t}return i(t,e),Object.defineProperty(t.prototype,"spine",{get:function(){return this._spine},enumerable:!1,configurable:!0}),t.prototype.setMaterials=function(e){0==this._materialVariants.length&&(this._material=e,null!=this._spr?this._materialVariants=[cc.MaterialVariant.create(e[0],this._spr),cc.MaterialVariant.create(e[0],this._spr),cc.MaterialVariant.create(e[0],this._spr)]:this._materialVariants=[cc.MaterialVariant.create(e[1],this._spine),cc.MaterialVariant.create(e[1],this._spine),cc.MaterialVariant.create(e[1],this._spine)],this._materialVariants[1].define("IS_HIT",!0),this._materialVariants[2].define("IS_STOP",!0),this.setDefaultMaterial())},t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider),this._spr=this.node.getComponentInChildren(cc.Sprite),this._ani=this.node.getComponentInChildren(cc.Animation),this._spine=this.node.getComponentInChildren(sp.Skeleton)},t.prototype.onEnable=function(){this.node.on("hit",this.onHit,this),this.node.on("stop",this.onStop,this),this.node.on("repel",this.onRepel,this),this.node.on("pauseMove",this.onPauseMove,this),this.node.on("resumeMove",this.onResumeMove,this),d.EVENT.on(l.EventId.ON_GAME_PAUSE,this.pause,this),d.EVENT.on(l.EventId.ON_GAME_RESUME,this.resume,this),d.EVENT.on(l.EventId.ON_GAME_UPDATE_ROLE_POS,this.updatePos,this),d.EVENT.on(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},t.prototype.onDisable=function(){this.node.off("hit",this.onHit,this),this.node.off("stop",this.onStop,this),this.node.off("repel",this.onRepel,this),this.node.off("pauseMove",this.onPauseMove,this),this.node.off("resumeMove",this.onResumeMove,this),d.EVENT.off(l.EventId.ON_GAME_PAUSE,this.pause,this),d.EVENT.off(l.EventId.ON_GAME_RESUME,this.resume,this),d.EVENT.off(l.EventId.ON_GAME_UPDATE_ROLE_POS,this.updatePos,this),d.EVENT.off(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},t.prototype.pause=function(){this._rBody.awake=!1},t.prototype.resume=function(){this._rBody.awake=!0},t.prototype.onHit=function(e){if(!(this.hp<=0)){this._v3.x=this.node.position.x,this._v3.y=this.node.position.y+40;var t=e.damage.damage;e.damage.crit?a.default.inst.generateHitNumC(this._v3,t):a.default.inst.generateHitNum(this._v3,t),a.default.inst.generateHitEffect(this._v3),u.AudioMgr.inst.playEffectByName("hit"),this.hp-=t,this.hp<=0&&this.onDead(),this._stopTime<=0&&(this._hitTime=.5,this.setHitMaterial())}},t.prototype.onStop=function(e){this._stopTime=e,this._rBody.linearVelocity=cc.Vec2.ZERO,this.setStopMaterial()},t.prototype.onRepel=function(e){this._repel=e},t.prototype.onPauseMove=function(){this._isPauseMove=!0,this._rBody.linearVelocity=cc.Vec2.ZERO},t.prototype.onResumeMove=function(){this._isPauseMove=!1},t.prototype.onDead=function(){var e=this;this._stopTime=0,this._rBody.linearVelocity=cc.Vec2.ZERO,this.scheduleOnce(function(){return e._rBody.active=!1}),this.onDeathAni(this.recycle.bind(this)),this.node.emit("dead"),a.default.inst.generateExp(this.node.position);var t=_.WeaponModel.inst.magicAttrs.a_expball_p;t>0&&t>Math.random()&&((i=this.node.position).x+=cc.math.randomRange(-50,50),i.y+=cc.math.randomRange(-50,50),a.default.inst.generateExp(i));var o=this._info.fProb;if(o>0){var n=_.WeaponModel.inst.magicAttrs.a_drop_p;n>0&&(o+=n),o>Math.random()&&((i=this.node.position).x+=cc.math.randomRange(-50,50),i.y+=cc.math.randomRange(-50,50),a.default.inst.generateFood(i))}this._info.tElite>0&&((i=this.node.position).x+=cc.math.randomRange(-50,50),i.y+=cc.math.randomRange(-50,50),a.default.inst.generateBox(i));var i,r=this.getEquip();r&&((i=this.node.position).x+=cc.math.randomRange(-50,50),i.y+=cc.math.randomRange(-50,50),a.default.inst.generateEquip(i,r))},t.prototype.getEquip=function(){var e=this._info.dorpFightEquip;if(0!=e.length){var t=h.default.getRandWeightIndex(e);if(0!=t){var o=t-1,n=c.TABLE.getTable("FightEquip").filter(function(e){if(f.GameModel.inst.fightList.find(function(t){return t&&t.type==e.type&&t.quality>=e.quality}))return!1;if(e.quality==o&&e.skill){var t=_.WeaponModel.inst.weaponInfos[e.skill];return!!(t&&t.getLevel()>=e.skillLevel)}return e.quality==o}),i=h.default.RandomSome(n,1)[0];if(null!=i)return i}}},t.prototype.onDeathAni=function(e){var t,o,n,i,r,a,s=this,c=[];if([null===(t=this._spine)||void 0===t?void 0:t.findAnimation("death1"),null===(o=this._spine)||void 0===o?void 0:o.findAnimation("death2"),null===(n=this._spine)||void 0===n?void 0:n.findAnimation("death3"),null===(i=this._spine)||void 0===i?void 0:i.findAnimation("death10a"),null===(r=this._spine)||void 0===r?void 0:r.findAnimation("death10b"),null===(a=this._spine)||void 0===a?void 0:a.findAnimation("die")].forEach(function(e){return e&&c.push(e)}),c.length>0){var l=c[Math.floor(Math.random()*c.length)];this._spine.setAnimation(0,l.name,!1),this._spine.setCompleteListener(function(){s._spine.setCompleteListener(function(){}),e&&e()})}else cc.tween(this.node).to(.5,{opacity:0}).call(e).start();return null},t.prototype.setDefaultMaterial=function(){this._stopTime=0,this._hitTime=0,null!=this._spr?(this._ani.play(),this._spr.setMaterial(0,this._materialVariants[0])):(this._spine.timeScale=1,this._spine.setMaterial(0,this._materialVariants[0])),this.node.parent!=s.LayerMgr.inst.RoleLayer&&(this.node.setParent(s.LayerMgr.inst.RoleLayer),this.node.setSiblingIndex(this._siblingIndex))},t.prototype.setHitMaterial=function(){if(!(this._stopTime>0)){if(null!=this._spr){if(this._spr.getMaterial(0)==this._materialVariants[1])return;this._spr.setMaterial(0,this._materialVariants[1])}else{if(this._spine.getMaterial(0)==this._materialVariants[1])return;this._spine.setMaterial(0,this._materialVariants[1])}this.node.parent!=s.LayerMgr.inst.RoleHitLayer&&(this.node.setParent(s.LayerMgr.inst.RoleHitLayer),this.node.setSiblingIndex(this._siblingIndex))}},t.prototype.setStopMaterial=function(){if(null!=this._spr){if(this._spr.getMaterial(0)==this._materialVariants[2])return;this._ani.pause(),this._spr.setMaterial(0,this._materialVariants[2])}else{if(this._spine.getMaterial(0)==this._materialVariants[2])return;this._spine.timeScale=0,this._spine.setMaterial(0,this._materialVariants[2])}this.node.parent!=s.LayerMgr.inst.RoleStopLayer&&(this.node.setParent(s.LayerMgr.inst.RoleStopLayer),this.node.setSiblingIndex(this._siblingIndex))},t.prototype.updatePos=function(e){if(!this._isPauseMove&&!(this._stopTime>0||this.hp<=0)){if(this._orientation.x=e.x-this.node.position.x,this._orientation.y=e.y-this.node.position.y,this._orientation.len()>p.StaticData.radius){var t=cc.math.randomRange(this._info.radMin,this._info.radMax),o=new cc.Vec2(t,0),n=cc.math.randomRange(0,2*Math.PI);return o.rotateSelf(n),o.x+=this._game.player.node.x,o.y+=this._game.player.node.y,this.node.setPosition(o),this.node.opacity=0,void cc.tween(this.node).to(.2,{opacity:255}).start()}this._orientation.normalizeSelf(),(this._orientation.x<0&&this.node.scaleX<0||this._orientation.x>0&&this.node.scaleX>0)&&(this.node.scaleX*=-1);var i=this.moveSpeed-this._repel;this._linearVelocity.x=this._orientation.x*i,this._linearVelocity.y=this._orientation.y*i,this._rBody.linearVelocity=this._linearVelocity}},t.prototype.updateMonster=function(e){this._info=e,this.hp=this._info.hp,this.crit=0,this.critDmg=2,this.reduce=0,this.touchDelta=0,this.node.scale=this._info.scale,this._siblingIndex=this._info.mid,this._stopTime=0,this._hitTime=0,this._repel=0,this._isPauseMove=!1,this._spine&&this._spine.setAnimation(0,this._spine.defaultAnimation,!0),e.tElite&&(this._siblingIndex+=100,a.default.inst.generateHpBar(this,e.hpHeight*e.scale)),this._rBody.active=!0,this._rBody.gravityScale=10,this._collider.tag=this.atk,this.setDefaultMaterial(),this.updateAttrs()},t.prototype.updateAttrs=function(){this.moveSpeed=this._info.speed,this.maxHp=this._info.hp,this.atk=this._info.atk;var e=_.WeaponModel.inst.magicAttrs.s_espeed_p;e>0&&(this.moveSpeed-=e*this._info.speed);var t=_.WeaponModel.inst.magicAttrs.s_ehp_p;t>0&&(this.maxHp-=t*this._info.hp),this.hp>this.maxHp&&(this.hp=this.maxHp)},t.prototype.update=function(e){if(!this._game.isPause){if(this._repel>0&&(this._repel-=e*this.moveSpeed*2,this._rBody.active||(this.node.x-=this._orientation.x*this._repel*e,this.node.y-=this._orientation.y*this._repel*e)),this._stopTime>0)return this._stopTime-=e,void(this._stopTime<=0&&this.setDefaultMaterial());this._hitTime>0&&(this._hitTime-=e,this._hitTime<=0&&this.setDefaultMaterial())}},t.prototype.recycle=function(){},r([m],t)}(y.NpcBase));o.default=v,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Define/StaticData":"StaticData","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Utils/Utils":"Utils","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","../NpcBase":"NpcBase"}],MonsterCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"83b7dTRJ+1BzbSMcP42uJg4","MonsterCtrl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Controller/GameBase"),s=e("../Controller/LayerMgr"),c=e("../Controller/TableMgr"),l=e("../Controller/TimeMgr"),p=e("../Define/EventId"),u=e("../Define/UIDefs"),d=e("../Framework/Event/EventMgr"),h=e("../Framework/UI/UIMgr"),f=e("../Model/GameModel"),_=e("../Model/UserModel"),y=e("./Component/MonsterComponent"),g=e("./Monster/Weapon/MonsterWeapon"),m=cc._decorator,v=m.ccclass,M=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprMaterial=null,t.spineMaterial=null,t._stageInfos={},t._stageMonsters={},t._execDelay=[],t._loadList={},t._curTime=0,t._nextTime=0,t._keyTime=[],t._timeStamp=0,t._monsterMax=120,t._game=f.GameModel.inst,t._inactiveStamp=0,t._inactiveInterval=30,t}return i(t,e),t.prototype.start=function(){this._monsterMax=Number(c.TABLE.getGlobal("StageMonsterMax"))},t.prototype.gameStart=function(){var e=this,t=c.TABLE.getTable("stage_"+_.UserModel.inst.selectStage);null==t&&(t=c.TABLE.getTable("stage_1")),this._timeStamp=0,this._curTime=-1,this._nextTime=0,this._keyTime.length=0,this._stageInfos={},this._stageMonsters={},t.forEach(function(t){null==e._stageInfos[t.time]&&(e._stageInfos[t.time]=[],e._keyTime.push(t.time)),e._stageInfos[t.time].push(t),e._stageMonsters[""+t.type+t.mid]="/Game/Monster/"+t.type+t.mid,f.GameModel.inst.waveMax=t.wave})},t.prototype.gameResult=function(){},t.prototype.gameOver=function(){this._execDelay.length=0,this.recycle(),this.releaseAutoRes()},t.prototype.generateMonster=function(e,t){var o=this,n=""+e.type+e.mid;if(null!=this._prefabList[n]){var i=this.get(n),r=cc.math.randomRange(e.radMin,e.radMax),a=new cc.Vec2(r,0),c=cc.math.randomRange(0,2*Math.PI);a.rotateSelf(c),a.x+=f.GameModel.inst.player.node.x,a.y+=f.GameModel.inst.player.node.y,i.setPosition(a),i.setSiblingIndex(e.mid),i.setParent(s.LayerMgr.inst.RoleLayer);var l=i.getComponent(y.default);null==l&&(l=i.addComponent(y.default));var p=i.getComponent(g.default);null!=p&&(p.level=e.level),l.setMaterials([this.sprMaterial,this.spineMaterial]),l.updateMonster(e,t),l.recycle=function(){o._game.monsterList.splice(o._game.monsterList.indexOf(l),1),o.put(n,i)},this._game.monsterList.push(l),i.opacity=0,cc.Tween.stopAllByTarget(i),cc.tween(i).to(.2,{opacity:255}).start()}else this.loadMonster(e,t)},t.prototype.loadMonster=function(e,t){var o=this,n=""+e.type+e.mid;if(null==this._loadList[n]){this._loadList[n]=[this.generateMonster.bind(this,e,t)];var i=this._stageMonsters[n];this.loadBundleRes("Prefabs",i,cc.Prefab,function(e,t){o.addItemPool(n,t),o._execDelay=o._execDelay.concat(o._loadList[n]),delete o._loadList[n]})}else this._loadList[n].push(this.generateMonster.bind(this,e,t))},t.prototype.get=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];var i=e.prototype.get.call(this,t,o);return this._game.monster++,i},t.prototype.put=function(t,o){var n=this;e.prototype.put.call(this,t,o),this._game.monster--,this._nextTime>=this._keyTime.length&&0==this._game.monster&&this.scheduleOnce(function(){n._game.isFinished=!0,h.default.inst.closeToUI(u.UIType.UIGame,null),d.EVENT.emit(p.EventId.ON_GAME_RESULT)},1)},t.prototype.checkInactive=function(){var e=l.default.inst.now();for(var t in this._nodePools){var o=this._nodePools[t],n=this._nodeList[t];o&&o.size()>0&&0==n.length&&e-this._timeList[t]>3e4&&(o.clear(),this.releaseAsset(this._prefabList[t]),delete this._prefabList[t])}},t.prototype.update=function(e){if(!this._game.isPause&&!(this._game.isGuide||(this._inactiveStamp+=e,this._inactiveStamp>=this._inactiveInterval&&(this._inactiveStamp=0,this.checkInactive()),this._game.monster>=this._monsterMax)))if(this._curTime!=this._nextTime){this._timeStamp+=e;var t=this._keyTime[this._nextTime];if(this._timeStamp>=t){this._curTime=this._nextTime;for(var o=this._stageInfos[t],n=0,i=o;n<i.length;n++){for(var r=i[n],a=0;a<r.count;a++)this._execDelay.push(this.generateMonster.bind(this,r,a));Math.random()<r.drawOdds&&h.default.inst.open(u.UIType.DrawSkill),this._game.money+=r.money,this._game.rMoney+=r.rMoney,this._game.g1Money+=r.g1Money}this._game.wave=o[0].wave}}else this._execDelay.length>0?this._execDelay.pop()():this._nextTime++},r([M(cc.Material)],t.prototype,"sprMaterial",void 0),r([M(cc.Material)],t.prototype,"spineMaterial",void 0),r([v],t)}(a.GameBase);o.default=b,cc._RF.pop()},{"../Controller/GameBase":"GameBase","../Controller/LayerMgr":"LayerMgr","../Controller/TableMgr":"TableMgr","../Controller/TimeMgr":"TimeMgr","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/UI/UIMgr":"UIMgr","../Model/GameModel":"GameModel","../Model/UserModel":"UserModel","./Component/MonsterComponent":"MonsterComponent","./Monster/Weapon/MonsterWeapon":"MonsterWeapon"}],MonsterGroup:[function(e,t,o){"use strict";cc._RF.push(t,"7065awwrJxOh6ZI7ytyhO7g","MonsterGroup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Component/MonsterComponent"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeDur=0,t._radian=0,t}return i(t,e),t.prototype.updateMonster=function(t,o){e.prototype.updateMonster.call(this,t,o),this._lifeDur=t.lifeMax,this._radian=Math.atan2(-t.radMax,-t.radMin);var n=this._collider,i=n.size.width*this.node.scaleX,r=n.size.height*this.node.scaleY,a=Math.sqrt(t.count),s=Math.floor(o/a)-Math.floor(a/2),c=o%a-Math.floor(a/2),l=t.radMin+s*i,p=t.radMax+c*r,u=this._game.player.node.getPosition();u.x+=l,u.y+=p,this.node.setPosition(u)},t.prototype.updatePos=function(){if(!this._isPauseMove&&!(this._stopTime>0||this.hp<=0)){var e=this._radian;this._orientation.x=Math.cos(e),this._orientation.y=Math.sin(e),this._orientation.normalizeSelf(),(this._orientation.x<0&&this.node.scaleX<0||this._orientation.x>0&&this.node.scaleX>0)&&(this.node.scaleX*=-1);var t=this.moveSpeed;this._linearVelocity.x=this._orientation.x*t,this._linearVelocity.y=this._orientation.y*t,this._rBody.linearVelocity=this._linearVelocity}},t.prototype.update=function(t){e.prototype.update.call(this,t),this._lifeDur-=t,this._lifeDur<=0&&this.recycle()},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"../Component/MonsterComponent":"MonsterComponent"}],MonsterWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"771faC+OARMCotjRU7mHixd","MonsterWeapon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/LayerMgr"),s=e("../../Component/MonsterComponent"),c=e("../../Warn/WarnBase"),l=e("../../Weapon/Bullet/BulletBase"),p=e("../../Weapon/WeaponBase"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pfWarn=[],t.monster=null,t._level=0,t._isStart=!1,t._ref=0,t}return i(t,e),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e,this._weaponInfo&&(this._weaponInfo.levels=[e],this._isStart=e>0,this.updateAttrs())},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){this.node.on("dead",this.onDead,this)},t.prototype.onDisable=function(){this.node.off("dead",this.onDead,this)},t.prototype.onLoad=function(){for(var e in this._waterLevel=10,this.pfWarn)this.addItemPool("warn"+e,this.pfWarn[e]);for(var e in this.pfBullet)this.addItemPool(Number(e),this.pfBullet[e]);for(var e in this.pfSeniorBullet)this.addItemPool(Number(e)+3,this.pfSeniorBullet[e]);this._weaponInfo=new p.WeaponInfo(this.id),this._weaponInfo.getAttrFromCfg(),this.level=this._level},t.prototype.warn=function(e,t){var o=this;if(void 0===t&&(t=0),!(this.monster.hp<=0)){var n="warn"+t,i=this.get(n);if(null!=i){i.setParent(a.LayerMgr.inst.WarnLayer),e.pos=e.pos||this.monster.node.position,e.radian=e.radian||0,e.width=e.width||this._weaponInfo.weaponAttrs[t].warnWidth,e.range=e.range||this._weaponInfo.weaponAttrs[t].warnRange,e.dur=e.dur||this._weaponInfo.weaponAttrs[t].warnInterval,e.width*=e.aoeRange||this._weaponInfo.weaponAttrs[t].aoeRange||1;var r=i.getComponent(c.default);r.setWarn({dur:e.dur,range:e.range,pos:e.pos,radian:e.radian,width:e.width},function(){o.put(n,r.node),o.fire(e,t),o._ref--,o.onEnd(t)}),this.onStart(t),this._ref++}}},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(l.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[t],e.weapon=this._weaponInfo,e.monster=this.monster,r.fire(e,function(){o.put(n,r.node)})}},t.prototype.onStart=function(){this.monster.node.emit("pauseMove")},t.prototype.onEnd=function(){this.monster.node.emit("resumeMove")},t.prototype.onDead=function(){for(var e in this.pfWarn)for(var t="warn"+e,o=this._nodeList[t];o.length>0;)this.put(t,o[0]);this._isStart=!1},r([h([cc.Prefab])],t.prototype,"pfWarn",void 0),r([h(s.default)],t.prototype,"monster",void 0),r([h],t.prototype,"_level",void 0),r([h],t.prototype,"level",null),r([d],t)}(p.WeaponBase);o.default=f,cc._RF.pop()},{"../../../Controller/LayerMgr":"LayerMgr","../../Component/MonsterComponent":"MonsterComponent","../../Warn/WarnBase":"WarnBase","../../Weapon/Bullet/BulletBase":"BulletBase","../../Weapon/WeaponBase":"WeaponBase"}],NativeAD:[function(e,t,o){"use strict";cc._RF.push(t,"4ae47JkcitNOrMXsFfzemYA","NativeAD");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Define/EventId"),s=e("../Framework/Event/EventMgr"),c=e("./AdMgr"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon_Ad=null,t}return i(t,e),t.prototype.start=function(){this.icon_Ad&&(this.icon_Ad.active=!0);var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.default.inst.showAdNative("\u5546\u5e97\u539f\u751f",e.x,e.y),s.EVENT.on(a.EventId.ON_AD_NATIVE_COMPLETE,this.onNativeAd,this)},t.prototype.onDestroy=function(){c.default.inst.removeAdNative(),s.EVENT.off(a.EventId.ON_AD_NATIVE_COMPLETE,this.onNativeAd,this)},t.prototype.onNativeAd=function(){this.icon_Ad&&(this.icon_Ad.active=!1)},r([u(cc.Node)],t.prototype,"icon_Ad",void 0),r([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","./AdMgr":"AdMgr"}],NativeMgr:[function(e,t,o){"use strict";cc._RF.push(t,"29c30Iz+xJGhrLquXb6JA+M","NativeMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Define/Define"),a=e("../Define/EventId"),s=e("../Framework/Event/EventMgr"),c=e("../Framework/Platform/BytedanceSDK"),l=e("../Framework/UI/UIFacade"),p=e("../Framework/UI/UIMgr"),u=e("../Framework/Utils/Singleton"),d=e("../Model/UserModel"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._appname="",t._version="0.0.1",t}return i(t,e),t.prototype.appname=function(e){this._appname=e},t.prototype.version=function(e){this._version=e},t.prototype.debug=function(e){r.Config.debug=e},t.prototype.debugAD=function(e){r.Config.debugAD=e},t.prototype.abTest=function(e){if(r.Config.abTest=e,cc.sys.os===cc.sys.OS_ANDROID)switch(e){default:case"zstb_control_group":r.Config.abTestType=0;break;case"zstb_test_group1":r.Config.abTestType=1;break;case"zstb_test_group2":r.Config.abTestType=2;break;case"zstb_test_group3":r.Config.abTestType=3}else if(cc.sys.os===cc.sys.OS_IOS)switch(e){default:case"zstb_ios_control_group":r.Config.abTestType=0;break;case"zstb_ios_test_group1":r.Config.abTestType=1;break;case"zstb_ios_test_group2":r.Config.abTestType=2;break;case"zstb_ios_test_group3":r.Config.abTestType=3}console.log("-------\x3e abTest: ",e)},t.prototype.showToast=function(e){p.default.inst.showToast(e)},t.prototype.networkErr=function(){l.UIFacade.showConfirm("","\u7f51\u7edc\u5f02\u5e38","\u786e\u5b9a").then(function(){return cc.game.end()})},t.prototype.antiAddiction=function(){l.UIFacade.showToast("\u89e6\u53d1\u9632\u6c89\u8ff7\u9000\u51fa"),setTimeout(function(){cc.game.end()},2e3)},t.prototype.realnameRewards=function(){if(!d.UserModel.inst.isRealNameReward){l.UIFacade.showToast("\u5b9e\u540d\u5956\u52b1\u53d1\u653e");var e=cc.view.getVisibleSize(),t=cc.v2(e.width/2,e.height/2);s.EVENT.emit(a.EventId.ON_UI_MAIN_FLY_ICON,t,"RMoney",function(){d.UserModel.inst.rMoney+=d.UserModel.inst.realNameReward}),d.UserModel.inst.isRealNameReward=1}},t.prototype.gameInit=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.gameInit():cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","gameInit","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","gameInit")},t.prototype.gameStart=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.gameStart():cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","gameStart","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","gameStart")},t.prototype.logEvent=function(e,t){void 0===t&&(t={}),cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.logEvent(e,t):cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","logEvent","(Ljava/lang/String;Ljava/lang/String;)V",e,JSON.stringify(t)):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","logEvent:Params:",e,JSON.stringify(t))},t.prototype.openUserProtocol=function(){cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","openUserProtocol","()V"):cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","openUserProtocol"):cc.sys.openURL("https://www.ohayoo.cn/sdkWeb/privacySetting/userAgreement?package=com.inkflame.zstb.android&stash_no=k7VJGXEX8o&os=1")},t.prototype.openPrivacyProtocol=function(){cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","openPrivacyProtocol","()V"):cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","openPrivacyProtocol"):cc.sys.openURL("https://www.ohayoo.cn/sdkWeb/privacySetting/privacyPolicy?package=com.inkflame.zstb.android&stash_no=tMVDrqxMcB&os=1")},t.prototype.cancelAccount=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME||(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","cancelAccount","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","cancelAccount"))},t.prototype.openUserFeedback=function(){cc.sys.platform==cc.sys.BYTEDANCE_GAME||(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","openUserFeedback","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","openUserFeedback"))},t.prototype.joinQQGroup=function(){cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","joinQQGroup","()V"):cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","joinQQGroup"):cc.sys.openURL("https://qm.qq.com/cgi-bin/qm/qr?k=h5rc2l4BHOGgjWUFwXzBZDj8Kyph5DNI&jump_from=webapi&authKey=VN7SC93CXQ8nYwXywzGAyUh2EQ8p0IzN0t3OiP7Q6xgwR5MGIn2ojzvgkKhG4Xs9")},t.prototype.storeReview=function(){cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","storeReview","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","storeReview"))},t.prototype.getActivityTime=function(){return cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.now():cc.sys.os===cc.sys.OS_ANDROID?Number(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/TimerUtil","getRealTime","()Ljava/lang/String;")):cc.sys.os===cc.sys.OS_IOS?Number(jsb.reflection.callStaticMethod("AppController","getRealTime")):Date.now()},t.prototype.getWebTime=function(){return cc.sys.platform==cc.sys.BYTEDANCE_GAME?c.default.inst.now():cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/TimerUtil","getWebTime","()Ljava/lang/String;"):cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","getWebTime"):Date.now()},t.prototype.checkDeviceRealName=function(){cc.sys.platform!=cc.sys.BYTEDANCE_GAME&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","checkDeviceRealName","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","checkDeviceRealName"))},t}(u.Singleton());o.default=h,window.Native=h.inst,cc._RF.pop()},{"../Define/Define":"Define","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Platform/BytedanceSDK":"BytedanceSDK","../Framework/UI/UIFacade":"UIFacade","../Framework/UI/UIMgr":"UIMgr","../Framework/Utils/Singleton":"Singleton","../Model/UserModel":"UserModel"}],NodePool:[function(e,t,o){"use strict";cc._RF.push(t,"040c9gg3vJDmYzBE+Z6ypRm","NodePool");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NodePool=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isReady=!1,t._createCount=0,t._warterMark=10,t._res=null,t._nodes=new Array,t}return i(t,e),t.prototype.isReady=function(){return this._isReady},t.prototype.init=function(){var e=this;if(this._isReady)cc.error("already inited!");else{var t=arguments[0],o=null;if(2==arguments.length&&"function"==typeof arguments[1]&&(o=arguments[1]),t instanceof cc.Prefab)return this._res=t,this._isReady=!0,void(o&&o(null,this));"string"!=typeof arguments[0]?console.error("NodePool init error "+arguments[0]):this.loadBundleRes("Prefabs",arguments[0],cc.Prefab,function(t,n){t||(e._res=n,e._isReady=!0),o&&o(t,e)})}},t.prototype.prepareNode=function(e){if(this.isReady)for(var t=0;t<e;++t){var o=cc.instantiate(this._res);this._createCount++,this._nodes.push(o)}else cc.error("node pool not ready!")},t.prototype.getNode=function(){return this.isReady?this._nodes.length>0?this._nodes.pop():(this._createCount++,cc.instantiate(this._res)):null},t.prototype.freeNode=function(e){if(!e||!cc.isValid(e))return cc.error("[ERROR] PrefabPool: freePrefab: isValid node"),void this._createCount--;this._nodes.length>this._warterMark?(this._createCount--,e.destroy()):(e.removeFromParent(!0),e.uuid,e.getParent(),e.cleanup(),this._nodes.push(e))},t.prototype.setWaterMark=function(e){this._warterMark=e},t.prototype.isUnuse=function(){return this._nodes.length>this._createCount&&cc.error("PrefabPool: _nodes.length > _createCount"),this._nodes.length==this._createCount},t.prototype.clear=function(){for(var e=0,t=this._nodes;e<t.length;e++)t[e].destroy();this._createCount-=this._nodes.length,this._nodes.length=0,this._res.decRef()},t}(e("../../Framework/Res/ResKeeper").default);o.NodePool=r,cc._RF.pop()},{"../../Framework/Res/ResKeeper":"ResKeeper"}],NpcBase:[function(e,t,o){"use strict";cc._RF.push(t,"6c7ecraPg5G9plV0DJmbusa","NpcBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NpcBase=void 0;var a=e("../Framework/Res/ResKeeper"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveSpeed=0,t.maxHp=100,t.hp=100,t.atk=10,t.crit=0,t.critDmg=2,t.reduce=0,t.touchDelta=.1,t.pickRadius=100,t}return i(t,e),r([l({tooltip:"\u79fb\u52a8\u901f\u5ea6"})],t.prototype,"moveSpeed",void 0),r([l({tooltip:"\u6700\u5927\u751f\u547d\u503c"})],t.prototype,"maxHp",void 0),r([l({tooltip:"\u5f53\u524d\u751f\u547d\u503c"})],t.prototype,"hp",void 0),r([l({tooltip:"\u653b\u51fb\u529b"})],t.prototype,"atk",void 0),r([l({tooltip:"\u66b4\u51fb\u7387"})],t.prototype,"crit",void 0),r([l({tooltip:"\u66b4\u51fb\u4f24\u5bb3"})],t.prototype,"critDmg",void 0),r([l({tooltip:"\u4f24\u5bb3\u51cf\u514d"})],t.prototype,"reduce",void 0),r([l({tooltip:"\u4f24\u5bb3\u95f4\u9694"})],t.prototype,"touchDelta",void 0),r([l({tooltip:"\u62fe\u53d6\u534a\u5f84"})],t.prototype,"pickRadius",void 0),r([c],t)}(a.default);o.NpcBase=p,cc._RF.pop()},{"../Framework/Res/ResKeeper":"ResKeeper"}],PetComponent:[function(e,t,o){"use strict";cc._RF.push(t,"4978enomA5Li7LOnxyWcndh","PetComponent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../../Controller/TableMgr"),c=e("../../Define/EventId"),l=e("../../Framework/Audio/AudioMgr"),p=e("../../Framework/Event/EventMgr"),u=e("../../Model/GameModel"),d=e("../../Model/GodPetModel"),h=e("../NpcBase"),f=e("../Weapon/WeaponBase"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game=u.GameModel.inst,t.spPet=null,t.spRideState=null,t._stateMachine=null,t._state=null,t._weapon=null,t}return i(t,e),Object.defineProperty(t.prototype,"weapon",{get:function(){return this._weapon},set:function(e){this._weapon=e},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e,t=this;this._stateMachine=((e={})[a.Idle]=new v(this),e[a.Atk]=new M(this),e),this._state=this._stateMachine[a.Idle],this.loadBundleRes("Prefabs","/Game/Weapon/weaponCommonPet",cc.Prefab,function(e,o){var n=cc.instantiate(o);n.setParent(t.node),t._weapon=n.getComponent(f.WeaponBase)}),this.spPet=this.getComponent(sp.Skeleton),this.spRideState=this.spPet.getState(),this.spRideState.data.defaultMix=.2,this.moveSpeed=d.GodPetModel.inst.cur.speed},t.prototype.onEnable=function(){p.EVENT.on(c.EventId.ON_GAME_PAUSE,this.pause,this),p.EVENT.on(c.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){p.EVENT.off(c.EventId.ON_GAME_PAUSE,this.pause,this),p.EVENT.off(c.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spPet&&(this.spPet.timeScale=0)},t.prototype.resume=function(){this.spPet&&(this.spPet.timeScale=1)},t.prototype.switchState=function(e){this._state&&this._state.onEnd(),this._state=this._stateMachine[e],this._state.onStart()},t.prototype.playAnimation=function(e,t,o){if(void 0===t&&(t=!0),e!=this.spPet.animation){var n=this.spPet.setAnimation(0,e,t);return o&&this.spPet.setTrackCompleteListener(n,o),n}},t.prototype.updateScale=function(e){var t=this.node;e>0&&t.scaleX>0?t.scaleX*=-1:e<0&&t.scaleX<0&&(t.scaleX*=-1)},t.prototype.update=function(e){this.game.isPause||this._state.update(e)},r([y],t)}(h.NpcBase));o.default=g,function(e){e[e.Idle=0]="Idle",e[e.Atk=1]="Atk"}(a||(a={}));var m=function(e){this.pet=null,this.pet=e},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=a.Idle,t._v2=cc.v2(),t._dur_atk=0,t._dur_idle=0,t._atkSpeed=Number(s.TABLE.getGlobal("GodPet_AtkSpeed")),t}return i(t,e),t.prototype.onStart=function(){},t.prototype.onEnd=function(){},t.prototype.update=function(e){var t=this.pet.node.getPosition(),o=this.pet.game.player.node.getPosition(),n=cc.Vec2.subtract(this._v2,o,t),i=n.len();if(i>150){this._dur_idle=0;var r=this.pet.moveSpeed*e;i>500?r*=1.2:i<300&&(r*=.8);var s=-n.signAngle(cc.Vec2.RIGHT),c=Math.cos(s)*r,l=Math.sin(s)*r;this.pet.node.x+=c,this.pet.node.y+=l,this.pet.updateScale(c,l),this.pet.playAnimation("run")}else this._dur_idle+=e,this._dur_idle>.2&&this.pet.playAnimation("idle");this._dur_atk+=e,this._dur_atk>=this._atkSpeed&&(this._dur_atk=0,this.pet.switchState(a.Atk))},t}(m),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=a.Atk,t._v2=cc.v2(),t._target=null,t._atking=!1,t._search=cc.v2(Number(s.TABLE.getGlobal("GodPet_SearchMaxX")),Number(s.TABLE.getGlobal("GodPet_SearchMaxY"))),t}return i(t,e),t.prototype.onStart=function(){var e=this;this.searchTarget(),this.pet.spPet.setEventListener(function(t,o){"atk"==o.data.name&&e.fire()}),this.pet.spPet.setCompleteListener(function(t){"attack"==t.animation.name&&e.atkEnd()})},t.prototype.onEnd=function(){},t.prototype.atk=function(){l.AudioMgr.inst.playEffectByName("fire"),this._atking=!0,this.pet.spPet.setAnimation(0,"attack",!1)},t.prototype.atkEnd=function(){this._atking=!1,this._target=null,this.searchTarget()},t.prototype.searchTarget=function(){if(this._target=this.pet.game.findNearMonsters(1)[0],null!=this._target&&null!=this._target.parent){var e=this.pet.game.player.node.position,t=this._target.position,o=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);o>this._search.x&&n>this._search.y&&this.pet.switchState(a.Idle)}else this.pet.switchState(a.Idle)},t.prototype.fire=function(){var e=this,t=cc.v2(this.pet.node.scaleX<0?1:-1);this.pet.weapon.fire({target:this.pet.node,direct:t,atkEnd:function(){e.atkEnd()}})},t.prototype.update=function(e){if(!this._atking)if(null!=this._target&&null!=this._target.parent){var t=this.pet.node.position,o=this._target.position;if(this._v2.x=o.x-t.x+(t.x>o.x?100:-100),this._v2.y=o.y-t.y-60,this._v2.len()<20)return this.pet.updateScale(o.x-t.x,0),void this.atk();var n=this.pet.moveSpeed*e,i=Math.atan2(this._v2.y,this._v2.x),r=Math.cos(i)*n,s=Math.sin(i)*n;this.pet.node.x+=r,this.pet.node.y+=s,this.pet.updateScale(r,s),this.pet.playAnimation("run")}else this.pet.switchState(a.Idle)},t}(m);cc._RF.pop()},{"../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Model/GameModel":"GameModel","../../Model/GodPetModel":"GodPetModel","../NpcBase":"NpcBase","../Weapon/WeaponBase":"WeaponBase"}],PickUpBase:[function(e,t,o){"use strict";cc._RF.push(t,"13c7aEDElZFI5ajF3qSypez","PickUpBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/GameItemBase"),s=e("../../../Define/StaticData"),c=e("../../../Model/GameModel"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._game=c.GameModel.inst,t._moveSpeed=200,t._moveSpeedMax=500,t._isPick=!1,t._v2=cc.v2(),t}return i(t,e),t.prototype.reuse=function(){this._moveSpeed=200,this._isPick=!1},t.prototype.onPickUp=function(){},t.prototype.start=function(){this.schedule(this.updatePick.bind(this),.2)},t.prototype.updatePick=function(){if(!this._isPick){var e=this._game.player.node.position,t=cc.v2(e.x,e.y),o=this.node.position,n=this._game.player.pickRadius;cc.Vec2.distance(t,o)<n&&(this._isPick=!0)}},t.prototype.update=function(e){if(!this._game.isPause)if(this._v2.x=this.node.x-s.StaticData.mainCamera.node.x,this._v2.y=this.node.y-s.StaticData.mainCamera.node.y,this._v2.x>s.StaticData.maxX||this._v2.x<s.StaticData.minX||this._v2.y>s.StaticData.maxY||this._v2.y<s.StaticData.minY)this.node.opacity=0;else if(this.node.opacity=255,this._isPick){var t=this._game.player.node.position,o=this.node.position;if(cc.Vec2.distance(t,o)<25)return this.onPickUp(),void this.recycle();var n=Math.atan2(t.y-o.y,t.x-o.x),i=this._moveSpeed*e,r=Math.cos(n)*i,a=Math.sin(n)*i;this.node.x+=r,this.node.y+=a,this._moveSpeed+=300*e,this._moveSpeed>this._moveSpeedMax&&(this._moveSpeed=this._moveSpeedMax)}},r([p],t)}(a.GameItemBase));o.default=u,cc._RF.pop()},{"../../../Controller/GameItemBase":"GameItemBase","../../../Define/StaticData":"StaticData","../../../Model/GameModel":"GameModel"}],PickUpBox:[function(e,t,o){"use strict";cc._RF.push(t,"5646fhnwTNBC6XiEINsoVmZ","PickUpBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Define/UIDefs"),c=e("../../../Framework/Event/EventMgr"),l=e("../../../Framework/UI/UIMgr"),p=e("./PickUpBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onPickUp=function(){c.EVENT.emit(a.EventId.ON_GAME_PAUSE),l.default.inst.open(s.UIType.EliteBox)},r([d],t)}(p.default));o.default=h,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","./PickUpBase":"PickUpBase"}],PickUpEquip:[function(e,t,o){"use strict";cc._RF.push(t,"5d2dfp1TOdADbJHC2e/mO+5","PickUpEquip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Define/UIDefs"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/UI/UIMgr"),u=e("./PickUpBase"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._sid=-1,t._icon=-1,t._quality=-1,t}return i(t,e),t.prototype.init=function(e){this._sid=e.id,this._icon=e.icon,this._quality=e.quality,this.spine.setSkin("zbtb"+this._icon);var t=this._quality+1;t>5&&(t=5),this.spine.setAnimation(0,"idle"+t,!0)},t.prototype.onPickUp=function(){l.EVENT.emit(a.EventId.ON_GAME_PAUSE),c.AudioMgr.inst.playEffectByName("getEequip"),p.default.inst.open(s.UIType.FightEquip,this._sid)},r([f(sp.Skeleton)],t.prototype,"spine",void 0),r([h],t)}(u.default);o.default=_,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","./PickUpBase":"PickUpBase"}],PickUpExp:[function(e,t,o){"use strict";cc._RF.push(t,"f3ad2ply5FF/YWg/ZbYnwOm","PickUpExp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("../../../Model/MagnetModel"),c=e("./PickUpBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addExp=1,t}return i(t,e),t.prototype.updatePick=function(){if(!this._isPick)if(s.MagnetModel.inst.isActive())this._isPick=!0;else{var e=this._game.player.node.position,t=cc.v2(e.x,e.y),o=this.node.position,n=this._game.player.pickRadius;cc.Vec2.distance(t,o)<n&&(this._isPick=!0)}},t.prototype.onPickUp=function(){a.AudioMgr.inst.playEffectByName("getExp"),this._game.exp+=this.addExp},r([u],t.prototype,"addExp",void 0),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Model/MagnetModel":"MagnetModel","./PickUpBase":"PickUpBase"}],PickUpFood:[function(e,t,o){"use strict";cc._RF.push(t,"9f1d0lpFWpKuKQDbRgtcp3Q","PickUpFood");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Model/WeaponModel"),s=e("./PickUpBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addHp=.15,t}return i(t,e),t.prototype.onPickUp=function(){var e=this.addHp*this._game.player.maxHp,t=a.WeaponModel.inst.magicAttrs.a_foodhp_p;t>0&&(e+=e*t),this._game.player.hp+=e},r([p],t.prototype,"addHp",void 0),r([l],t)}(s.default);o.default=u,cc._RF.pop()},{"../../../Model/WeaponModel":"WeaponModel","./PickUpBase":"PickUpBase"}],PickUpLbs:[function(e,t,o){"use strict";cc._RF.push(t,"a70c0Rlb79GUITESKd7yAfI","PickUpLbs");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("../../../Model/MagnetModel"),c=e("./PickUpBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addExp=1,t}return i(t,e),t.prototype.updatePick=function(){if(!this._isPick)if(s.MagnetModel.inst.isActive())this._isPick=!0;else{var e=this._game.player.node.position,t=cc.v2(e.x,e.y),o=this.node.position,n=this._game.player.pickRadius;cc.Vec2.distance(t,o)<n&&(this._isPick=!0)}},t.prototype.onPickUp=function(){a.AudioMgr.inst.playEffectByName("getExp"),this._game.g1Money+=this.addExp},r([u],t.prototype,"addExp",void 0),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Model/MagnetModel":"MagnetModel","./PickUpBase":"PickUpBase"}],PlayerComponent:[function(e,t,o){"use strict";cc._RF.push(t,"f8e01rnNtZNs7Yq0nnXEQZo","PlayerComponent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SpineAnimation=o.TrackIndex=void 0;var a,s,c=e("../../Controller/GameItemMgr"),l=e("../../Controller/LayerMgr"),p=e("../../Controller/TableMgr"),u=e("../../Define/EventId"),d=e("../../Framework/Audio/AudioMgr"),h=e("../../Framework/Event/EventMgr"),f=e("../../Framework/VM"),_=e("../../Model/GameModel"),y=e("../../Model/GodPetModel"),g=e("../../Model/GodRideModel"),m=e("../../Model/GodSkinModel"),v=e("../../Model/GodWeaponModel"),M=e("../../Model/WeaponModel"),b=e("../NpcBase"),E=e("./PetComponent"),I=e("../Weapon/WeaponBase"),O=e("../../Model/GodBackModel"),S=cc._decorator,w=S.ccclass,R=S.property;(function(e){e[e.normal=1]="normal",e[e.move=0]="move"})(a=o.TrackIndex||(o.TrackIndex={})),function(e){e.Idle="idle",e.Run="run",e.Attack="attack1b",e.Dead="die"}(s=o.SpineAnimation||(o.SpineAnimation={}));var P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delta=[],t.deltaRideType=[],t.deltaNormal=null,t.material=null,t._rBody=null,t._collider=null,t._basis=null,t._materialVariants=[],t._nodePet=null,t._spRole=null,t._spRoleState=null,t._spRide=null,t._spRideState=null,t._rideType=0,t._nodeWeapon=null,t._nodeBack=null,t._attack_stamp=0,t._attack_interval=0,t._velocity=cc.v2(),t._v3=cc.v3(),t._game=_.GameModel.inst,t._offset=cc.v2(0,-40),t._revive=0,t._hps=0,t._hlu=0,t._hpm3=0,t._nmHps=0,t._dodgP=0,t._dodgbyhit=0,t._sDamage=0,t._aSpeed=0,t._touchStamp=0,t._reviveStamp=0,t._hpsStamp=0,t._hpm3Stamp=0,t._nmHpsStamp=0,t._dodgStamp=0,t._hitTime=0,t._weapon=null,t._contact_monster_atk=0,t}return i(t,e),t.prototype.onLoad=function(){this._nodeWeapon=new cc.Node("weapon"),this._nodeBack=new cc.Node("back"),this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider),this._basis={moveSpeed:this.moveSpeed,maxHp:this.maxHp,hp:this.hp,atk:this.atk,crit:this.crit,critDmg:this.critDmg,reduce:this.reduce,touchDelta:this.touchDelta,pickRadius:this.pickRadius},this._attack_interval=Number(p.TABLE.getGlobal("Attack_interval"))},t.prototype.onBeginContact=function(e,t,o){var n=o.tag;this.onHit(n),this._contact_monster_atk+=n},t.prototype.onEndContact=function(e,t,o){var n=o.tag;this._contact_monster_atk-=n},t.prototype.onEnable=function(){f.VM.bindPath("GameModel._level",this.updateLevel,this),h.EVENT.on(u.EventId.ON_GAME_PAUSE,this.pause,this),h.EVENT.on(u.EventId.ON_GAME_RESUME,this.resume,this),h.EVENT.on(u.EventId.ON_GAME_PLAYER_REVIVE,this.onRevive,this),h.EVENT.on(u.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},t.prototype.onDisable=function(){f.VM.unbindPath("GameModel._level",this.updateLevel,this),h.EVENT.off(u.EventId.ON_GAME_PAUSE,this.pause,this),h.EVENT.off(u.EventId.ON_GAME_RESUME,this.resume,this),h.EVENT.off(u.EventId.ON_GAME_PLAYER_REVIVE,this.onRevive,this),h.EVENT.off(u.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},t.prototype.pause=function(){this._spRole&&(this._spRole.timeScale=0),this._spRide&&(this._spRide.timeScale=0)},t.prototype.resume=function(){this._spRole&&(this._spRole.timeScale=1),this._spRide&&(this._spRide.timeScale=1)},t.prototype.setHp=function(e){e>this.maxHp&&(e=this.maxHp),this.hp=e},t.prototype.setDefaultMaterial=function(){this._spRole.setMaterial(0,this._materialVariants[0])},t.prototype.setHitMaterial=function(){this._spRole.getMaterial(0)!=this._materialVariants[1]&&this._spRole.setMaterial(0,this._materialVariants[1])},t.prototype.onHit=function(e,t){if(void 0===t&&(t=!1),!this._game.isGuide&&!(this._game.immune>0||e<=0)){if(this._v3.x=this.node.position.x,this._v3.y=this.node.position.y,Math.random()<this._dodgP+this._dodgStamp)return this._dodgStamp=0,void c.default.inst.generateHitMiss(this._v3);this._dodgbyhit>0&&(this._dodgStamp+=this._dodgbyhit);var o=this.reduce+this._sDamage;e-=Math.round(o*e),this.setHp(this.hp-e),this.hp<=0&&this.onDead(),this._hitTime=.5,this.setHitMaterial(),t?c.default.inst.generateHitEffect(this._v3):c.default.inst.generateHitBeEffect(this._v3),h.EVENT.emit(u.EventId.ON_GAME_PLAYER_HIT)}},t.prototype.onDead=function(){var e=this;h.EVENT.emit(u.EventId.ON_GAME_PAUSE),this._spRole&&(this._spRole.timeScale=1),this._spRide&&(this._spRide.timeScale=1);var t=this.setRoleAnimation(a.normal,s.Dead,!1);this._spRole.setTrackCompleteListener(t,function(){e._revive>0&&e._reviveStamp<e._revive?e.onRevive():h.EVENT.emit(u.EventId.ON_GAME_RESULT)})},t.prototype.onRevive=function(){var e=this;d.AudioMgr.inst.playEffectByName("revive"),this._revive>0&&this._reviveStamp<this._revive?(this.hp=.5*this.maxHp,this._reviveStamp++):(this.hp=this.maxHp,_.GameModel.inst.revive++),c.default.inst.generateRevive(function(){c.default.inst.generateHpBar2(e,-60),_.GameModel.inst.immune++,cc.tween(e.node).then(cc.tween().to(.2,{opacity:0},{easing:"sineOut"}).to(.2,{opacity:255},{easing:"sineIn"})).repeat(5).call(function(){_.GameModel.inst.immune--}).start(),e.setRoleAnimation(a.normal,s.Idle,!0,!1),h.EVENT.emit(u.EventId.ON_GAME_RESUME)})},t.prototype.updateLevel=function(){this._hlu>0&&this.setHp(this.hp+this._hlu)},t.prototype.updateAttrs=function(){this.atk=this._basis.atk,this.maxHp=this._basis.maxHp,this.moveSpeed=this._basis.moveSpeed,this.pickRadius=this._basis.pickRadius;var e=M.WeaponModel.inst,t=e.magicAttrs.a_atk_p;t>0&&(this.atk+=this.atk*t);var o=e.magicAttrs.a_atk_v;o>0&&(this.atk+=o);var n=e.magicAttrs.a_hp_p;n>0&&(this.maxHp+=this.maxHp*n);var i=e.magicAttrs.a_hp_v;i>0&&(this.maxHp+=i);var r=e.magicAttrs.a_movespeed_v;r>0&&(this.moveSpeed+=r);var a=e.magicAttrs.a_pickrange_p;a>0&&(this.pickRadius*=1+a);var s=g.GodRideModel.inst.getAttr();this.moveSpeed+=s.speed,this.atk+=s.atk,this.maxHp+=s.hp;var c=m.GodSkinModel.inst.getAttr();this.atk+=c.atk,this.maxHp+=c.hp,this.reduce+=c.reduce;var l=O.GodBackModel.inst.getAttr();this.atk+=l.atk,this.maxHp+=l.hp,this._revive=e.magicAttrs.a_revive_p||0,this._hps=e.magicAttrs.a_hps_p||0,this._hlu=e.magicAttrs.a_hlu_p||0,this._hpm3=e.magicAttrs.a_hpm3_p||0,this._nmHps=e.magicAttrs.a_nm_hps_p||0,this._dodgP=e.magicAttrs.a_dodg_p||0,this._dodgbyhit=e.magicAttrs.a_dodgbyhit_p||0,this._sDamage=e.magicAttrs.s_damage_p||0,this._aSpeed=((e.magicAttrs.a_speed_hp||0)+1)*this.moveSpeed},t.prototype.updateVelocity=function(e,t){this._velocity.x=e,this._velocity.y=t,e<0?this.node.scaleX=1:e>0&&(this.node.scaleX=-1)},t.prototype.updatePlayer=function(){var e=this;_.GameModel.inst.loadRef++,this.loadBundleRes("Prefabs","/Game/GodSkin/skin0",function(t,o){var n=cc.instantiate(o);if(n.setParent(e.node),e._spRole=n.getComponent(sp.Skeleton),m.GodSkinModel.inst.curIdx>0){var i=m.GodSkinModel.inst.getInfo(m.GodSkinModel.inst.curIdx);e._spRole.setSkin("suit"+i.name.match(/\d+/g))}else e._spRole.setSkin("suit0");e._spRole.defaultAnimation=s.Idle,e._spRoleState=e._spRole.getState(),e._spRoleState.data.defaultMix=.2,e._spRoleState.setAnimation(a.normal,s.Idle,!0),e._materialVariants=[cc.MaterialVariant.create(e.material,e._spRole),cc.MaterialVariant.create(e.material,e._spRole)],e._materialVariants[1].define("IS_HIT",!0),e._spRole.setMaterial(0,e._materialVariants[0]);var r=e._spRole.attachUtil;if(r.generateAllAttachedNodes(),r.getAttachedNodes("target_lram")[0].addChild(e._nodeWeapon),e.loadBundleRes("Prefabs",v.GodWeaponModel.inst.getPrefabUrl(v.GodWeaponModel.inst.curIdx),cc.Prefab,function(t,o){var n=cc.instantiate(o);n.setParent(e._nodeWeapon);var i=n.getComponent(sp.Skeleton);i.setAnimation(0,"idle1",!0),i.defaultAnimation="idle1"}),O.GodBackModel.inst.curIdx>0){var l=r.getAttachedNodes("beishi")[0];e._nodeBack.setParent(n.parent),e._nodeBack.setSiblingIndex(0),e._nodeBack.scale=1,e.schedule(function(){var t=n.position;t.x+=l._bone.worldX*e._nodeBack.scale,t.y+=l._bone.worldY*e._nodeBack.scale,n.parent._bone&&(t.x+=n.parent._bone.worldX*e._nodeBack.scale,t.y+=n.parent._bone.worldY*e._nodeBack.scale+e._offset.y),e._nodeBack.setPosition(t),e._nodeBack.angle=l._bone.getWorldRotationX()}),e.loadBundleRes("Prefabs",O.GodBackModel.inst.getPrefabUrl(O.GodBackModel.inst.curIdx),cc.Prefab,function(t,o){var n=cc.instantiate(o),i=n.getComponent(sp.Skeleton);i.setAnimation(0,"idle",!0),i.defaultAnimation="idle",e._nodeBack.addChild(n)})}var p=e.deltaNormal;g.GodRideModel.inst.curIdx>0?(_.GameModel.inst.loadRef++,e.loadBundleRes("Prefabs",g.GodRideModel.inst.getPrefabUrl(g.GodRideModel.inst.curIdx),cc.Prefab,function(t,o){_.GameModel.inst.loadRef--;var n=cc.instantiate(o);n.setParent(e.node),e._spRide=n.getComponent(sp.Skeleton),e._spRideState=e._spRide.getState(),e._spRideState.data.defaultMix=.2,e._spRole.node.removeFromParent(),e._rideType=e.deltaRideType[g.GodRideModel.inst.curIdx-1],null==e._rideType&&(e._rideType=e.deltaRideType[0]),p=e.delta[e._rideType],e._spRole.node.position=cc.v3(p.x,p.y,1),e._spRole.node.scale=1,e._spRole.node.angle=p.z,e.setRoleAnimation(a.move,"ride"+e._rideType,!0),n.scale=p.w,e._nodeBack.scale*=p.w;var i=e._spRide.attachUtil;i.generateAllAttachedNodes();var r=i.generateAttachedNodes("ride")[0];r.addChild(e._spRole.node),e.scheduleOnce(function(){if(cc.sys.isNative){var t=e._nodeWeapon.convertToWorldSpaceAR(cc.Vec2.ZERO);t.x+=r._bone.worldX*p.w,t.y+=r._bone.worldY*p.w;var o=e._nodeWeapon.parent.convertToNodeSpaceAR(t);e._nodeWeapon.setPosition(o)}e._offset.y-=r._bone.worldY*p.w,e._spRide.node.setPosition(p.x+e._offset.x,p.y+e._offset.y),c.default.inst.generateHpBar2(e,e._offset.y-20)})})):(e._nodeBack.scale*=p.w,e._spRole.node.parent=e.node,e._spRole.node.scale=p.w,e._spRole.node.angle=p.z,e._spRole.node.setPosition(p.x+e._offset.x,p.y+e._offset.y),c.default.inst.generateHpBar2(e,e._offset.y-20)),y.GodPetModel.inst.curIdx>0&&(_.GameModel.inst.loadRef++,e.loadBundleRes("Prefabs",y.GodPetModel.inst.getPrefabUrl(y.GodPetModel.inst.curIdx),cc.Prefab,function(t,o){_.GameModel.inst.loadRef--,e._nodePet=cc.instantiate(o),e._nodePet.setParent(e.node.parent),e._nodePet.setSiblingIndex(0),e._nodePet.addComponent(E.default);var n=e.delta[0];e._nodePet.setPosition(n.x+100,n.y+-40),e._nodePet.scale=n.w})),_.GameModel.inst.loadRef--}),_.GameModel.inst.loadRef++,this.loadBundleRes("Prefabs","/Game/Weapon/weaponCommon",cc.Prefab,function(t,o){_.GameModel.inst.loadRef--;var n=cc.instantiate(o);n.setParent(e.node),n.setSiblingIndex(0),e._weapon=n.getComponent(I.WeaponBase)}),this.updateAttrs(),this.hp=this.maxHp},t.prototype.clearPlayer=function(){this._contact_monster_atk=0,this._nodeWeapon.removeFromParent(),this._nodeBack.removeFromParent(),this._nodeWeapon.removeAllChildren(),this._nodeBack.removeAllChildren(),this.node.removeAllChildren(),this._nodePet&&this._nodePet.destroy(),this._weapon.destroy(),this.unscheduleAllCallbacks(),this.releaseAutoRes()},t.prototype.setRoleAnimation=function(e,t,o,n){if(void 0===n&&(n=!0),n){var i=this._spRole.getCurrent(e);if(i&&i.animation.name==t)return i}return this._spRole.setAnimation(e,t,o)},t.prototype.setRideAnimation=function(e,t,o,n){if(void 0===n&&(n=!0),n){var i=this._spRide.getCurrent(e);if(i&&i.animation.name==t)return i}return this._spRide.setAnimation(e,t,o)},t.prototype.update=function(e){var t=this;if(!(_.GameModel.inst.isPause||null==this._spRole||this.hp<=0)){if(this._attack_stamp+=e,this._attack_stamp>=this._attack_interval){this._attack_stamp-=this._attack_interval;var o;o=null==this._spRide?this.setRoleAnimation(a.normal,s.Attack,!1,!1):this.setRoleAnimation(a.normal,"attack"+(this._rideType+1)+"b",!1,!1),this._spRole.setTrackCompleteListener(o,function(){t._spRoleState.clearTrack(a.normal)}),this._weapon.fire({target:this.node})}var n=this.hp>this.maxHp/2?this.moveSpeed:this._aSpeed;0!=this._velocity.x&&(this.node.x+=n*this._velocity.x*e),0!=this._velocity.y&&(this.node.y+=n*this._velocity.y*e);var i=this.node.position,r=l.LayerMgr.inst;r.PlayerBulletLayer.setPosition(i.x,i.y),r.PlayerBulletLayer2.setPosition(i.x,i.y),h.EVENT.emit(u.EventId.ON_GAME_UPDATE_ROLE_POS,i);var c=this._velocity.len()>.1;if(c?null==this._spRide?this.setRoleAnimation(a.move,s.Run,!0):this.setRideAnimation(a.move,s.Run,!0):null==this._spRide?this.setRoleAnimation(a.move,s.Idle,!0):this.setRideAnimation(a.move,s.Idle,!0),this._touchStamp+=e,this._touchStamp>=this.touchDelta&&(this._touchStamp-=this.touchDelta,this._contact_monster_atk>0&&this.onHit(this._contact_monster_atk,!0)),this._hps>0&&(this._hpsStamp+=e,this._hpsStamp>=1&&(this._hpsStamp-=1,this.setHp(this.hp+this._hps))),this._hpm3>0&&(this._hpm3Stamp+=e,this._hpm3Stamp>=60&&(this._hpm3Stamp-=60,this.setHp(this.hp+this._hpm3))),this._nmHps>0)if(c)this._nmHpsStamp=0;else if(this._nmHpsStamp+=e,this._nmHpsStamp>1){var p=this._nmHps*this.maxHp*e;this.setHp(this.hp+p)}this._hitTime>0&&(this._hitTime-=e,this._hitTime<=0&&this.setDefaultMaterial()),this._game.buildGCD>0&&(this._game.buildGCD-=e)}},r([R([cc.Vec4])],t.prototype,"delta",void 0),r([R([cc.Integer])],t.prototype,"deltaRideType",void 0),r([R(cc.Vec4)],t.prototype,"deltaNormal",void 0),r([R(cc.Material)],t.prototype,"material",void 0),r([w],t)}(b.NpcBase);o.default=P,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/VM":"VM","../../Model/GameModel":"GameModel","../../Model/GodBackModel":"GodBackModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel","../../Model/WeaponModel":"WeaponModel","../NpcBase":"NpcBase","../Weapon/WeaponBase":"WeaponBase","./PetComponent":"PetComponent"}],PlayerCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"08253TD6CNFPrzd48/7fvCO","PlayerCtrl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../Controller/GameBase"),l=e("../Controller/LayerMgr"),p=e("../Model/GameModel"),u=e("./Component/PlayerComponent"),d=e("./Joystick"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t.joystick=null,t._player=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.pause=function(){this.joystick.node.active=!1,this.joystick.onTouchEnd(null),this.onJoystickStop()},t.prototype.resume=function(){this.joystick.node.active=!0},t.prototype.gameStart=function(){return a(this,void 0,void 0,function(){return s(this,function(){return this._player=cc.instantiate(this.player).getComponent(u.default),this._player.node.setParent(l.LayerMgr.inst.PlayerLayer),this.joystick.setMoveCallback(this.onJoystickMove.bind(this)),this.joystick.setStopCallback(this.onJoystickStop.bind(this)),p.GameModel.inst.isLoad=!0,p.GameModel.inst.player=this._player,[2]})})},t.prototype.gameLoad=function(){this._player.updatePlayer()},t.prototype.gameOver=function(){this._player.clearPlayer(),this._player.node.destroy(),this._player=null},t.prototype.onJoystickMove=function(e,t){var o=e.x*t,n=e.y*t;this._player.updateVelocity(o,n);var i=p.GameModel.inst;i.orientation.x=e.x,i.orientation.y=e.y},t.prototype.onJoystickStop=function(){this._player&&this._player.updateVelocity(0,0)},r([_(cc.Prefab)],t.prototype,"player",void 0),r([_(d.default)],t.prototype,"joystick",void 0),r([f],t)}(c.GameBase);o.default=y,cc._RF.pop()},{"../Controller/GameBase":"GameBase","../Controller/LayerMgr":"LayerMgr","../Model/GameModel":"GameModel","./Component/PlayerComponent":"PlayerComponent","./Joystick":"Joystick"}],RTAudioSourceMgr:[function(e,t,o){"use strict";cc._RF.push(t,"a3748F5c/NKObWAfRds2HSR","RTAudioSourceMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./RTAudioSource"),s=e("../Storage/LocalStorageMgr"),c=e("../../Define/LocalKey"),l=e("../Utils/Singleton"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._allAudios=[],t._audioVolum=new Map,t._audioSwitch=new Map,t}return i(t,e),t.prototype.init=function(){c.LocalKey;var e=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffect,!0);e&&this._audioVolum.set(a.RTAudioSourceType.Effect,parseInt(e));var t=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffectMute,!0);t&&this._audioSwitch.set(a.RTAudioSourceType.Effect,"yes"==t);var o=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusic,!0);o&&this._audioVolum.set(a.RTAudioSourceType.Music,parseInt(o));var n=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusicMute,!0);n&&this._audioSwitch.set(a.RTAudioSourceType.Music,"yes"==n)},t.prototype.registerAudio=function(e){this._allAudios.push(e);var t=this._audioVolum.get(e.audioType);t&&(e.volume=t);var o=this._audioSwitch.get(e.audioType);this._muteOne(e,o)},t.prototype.unregisterAudio=function(e){for(var t=0;t<this._allAudios.length;++t)if(this._allAudios[t]==e){this._allAudios.splice(t,1);break}},t.prototype.setMusicVolume=function(e,t){void 0===t&&(t=!1),this._setVolume(e,a.RTAudioSourceType.Music),this._audioVolum.set(a.RTAudioSourceType.Music,e),t&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeMusic,e.toString(),!0)},t.prototype.setEffectVolume=function(e,t){void 0===t&&(t=!1),this._setVolume(e,a.RTAudioSourceType.Effect),this._audioVolum.set(a.RTAudioSourceType.Effect,e),t&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeEffect,e.toString(),!0)},t.prototype.muteAllMusic=function(e,t){void 0===t&&(t=!1),this._audioSwitch.set(a.RTAudioSourceType.Music,e),this._mute(a.RTAudioSourceType.Music,e),t&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeMusicMute,e?"yes":"no",!0)},t.prototype.muteAllEffect=function(e,t){void 0===t&&(t=!1),this._audioSwitch.set(a.RTAudioSourceType.Effect,e),this._mute(a.RTAudioSourceType.Effect,e),t&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeEffectMute,e?"yes":"no",!0)},t.prototype.isMusicMute=function(){return this._audioSwitch.get(a.RTAudioSourceType.Music)},t.prototype.isEffectMute=function(){return this._audioSwitch.get(a.RTAudioSourceType.Effect)},t.prototype._mute=function(e,t){for(var o=0;o<this._allAudios.length;++o){var n=this._allAudios[o];n.audioType==e&&this._muteOne(n,t)}},t.prototype._muteOne=function(e,t){e.mute=t},t.prototype._setVolume=function(e,t){for(var o=0;o<this._allAudios.length;++o){var n=this._allAudios[o];n.audioType==t&&(n.volume=e)}},r([u],t)}(l.Singleton()));o.default=d,cc._RF.pop()},{"../../Define/LocalKey":"LocalKey","../Storage/LocalStorageMgr":"LocalStorageMgr","../Utils/Singleton":"Singleton","./RTAudioSource":"RTAudioSource"}],RTAudioSource:[function(e,t,o){"use strict";cc._RF.push(t,"f9b1cddJtZEEIUJhsBjDbYY","RTAudioSource");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RTAudioSourceType=void 0;var a,s=e("./RTAudioSourceMgr"),c=cc._decorator,l=c.ccclass,p=c.property;(function(e){e[e.Effect=0]="Effect",e[e.Music=1]="Music"})(a=o.RTAudioSourceType||(o.RTAudioSourceType={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioType=a.Effect,t}return i(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),s.default.inst.registerAudio(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),s.default.inst.unregisterAudio(this)},r([p({type:cc.Enum(a)})],t.prototype,"audioType",void 0),r([l],t)}(cc.AudioSource);o.default=u,cc._RF.pop()},{"./RTAudioSourceMgr":"RTAudioSourceMgr"}],RTClickSound:[function(e,t,o){"use strict";cc._RF.push(t,"54c377Q0zFDrbqStjZfjCne","RTClickSound");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./RTAudioSourceMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundEffect=null,t.soundVolume=1,t}return i(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},t.prototype.onTouch=function(){a.default.inst.isEffectMute()||cc.audioEngine.play(this.soundEffect,!1,this.soundVolume)},r([l(cc.AudioClip)],t.prototype,"soundEffect",void 0),r([l({slide:!0,min:0,max:1,step:.1})],t.prototype,"soundVolume",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./RTAudioSourceMgr":"RTAudioSourceMgr"}],RedDotHandler:[function(e,t,o){"use strict";cc._RF.push(t,"69c52E9GEdK6oiPRR2xKuI7","RedDotHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RedDotHandler=void 0;var a=e("./RedDot"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.key="",t}return i(t,e),t.prototype.onLoad=function(){this.onRedDot(a.RedDot.inst.getRedDot(this.key))},t.prototype.onEnable=function(){this.onRedDot(a.RedDot.inst.getRedDot(this.key)),a.RedDot.inst.on(this.key,this.onRedDot,this)},t.prototype.onDisable=function(){a.RedDot.inst.off(this.key,this.onRedDot,this)},t.prototype.onRedDot=function(e){this.node.opacity=e>0?255:0},t.prototype.setKey=function(e){a.RedDot.inst.off(this.key,this.onRedDot,this),this.key=e,this.onRedDot(a.RedDot.inst.getRedDot(this.key)),a.RedDot.inst.on(this.key,this.onRedDot,this)},r([l],t.prototype,"key",void 0),r([c],t)}(cc.Component);o.RedDotHandler=p,cc._RF.pop()},{"./RedDot":"RedDot"}],RedDotKey:[function(e,t,o){"use strict";cc._RF.push(t,"449fd4+GeRNf4Pm9HrtzgOO","RedDotKey"),Object.defineProperty(o,"__esModule",{value:!0}),o.RedDotKey=void 0;var n=function(){function e(){}return e.DailyTask="DailyTask",e.GodWeaponReward="GodWeaponReward",e.GodRide="GodRide",e.GodWeapon="GodWeapon",e.GodPet="GodPet",e.GodSkin="GodSkin",e.GodBack="GodBack",e.GodMenu="GodMenu",e.Talent="Talent",e.XiuLian="XiuLian",e.Achievement="Achievement",e}();o.RedDotKey=n,cc._RF.pop()},{}],RedDot:[function(e,t,o){"use strict";cc._RF.push(t,"19b027KVP5EWLORajsj1TOa","RedDot");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.RedDot=o.HEAD=void 0;var r=e("../../Define/RedDotKey"),a=e("../VM");o.HEAD="DOT";var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._RedDotMap={},t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){for(var e in r.RedDotKey)this._RedDotMap[e]=0;a.VM.add(this._RedDotMap,o.HEAD)},t.prototype.getRedDot=function(e){return this._RedDotMap[e]||0},t.prototype.setRedDot=function(e,t){this._RedDotMap[e]=t,this.emit(e,t)},t.prototype.addRef=function(e){var t=this.getRedDot(e)+1;this.setRedDot(e,t),this.emit(e,t)},t.prototype.decRef=function(e){var t=this.getRedDot(e)-1;this.setRedDot(e,t),this.emit(e,t),t<0&&cc.warn("\u7ea2\u70b9\u8ba1\u6570\u5c0f\u4e8e0\u68c0\u67e5\u903b\u8f91, PATH:",e)},t}(cc.EventTarget);o.RedDot=s,cc._RF.pop()},{"../../Define/RedDotKey":"RedDotKey","../VM":"VM"}],RenderToTarget:[function(e,t,o){"use strict";cc._RF.push(t,"f857861KlhDEqAbWFYgu3tg","RenderToTarget");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=a.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._target=null,t._renderTarget=null,t.offsetIndex=0,t._childrenMap=new Map,t._childrenOffsetMap=new Map,t._lastPos=null,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(e){this._target=e,this.node.activeInHierarchy&&this.onEnable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderTarget",{get:function(){return this._renderTarget},set:function(e){this._renderTarget=e,this.node.activeInHierarchy&&this.onEnable()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.target||(this.target=this.node)},t.prototype.onDestroy=function(){this._childrenMap.clear(),this._childrenOffsetMap.clear()},t.prototype.onEnable=function(){var e=this;null!=this.renderTarget&&(0==this._childrenMap.size&&this._moveOutside(),this._childrenMap.forEach(function(e){e.getComponent(o)?e.active=!0:e.opacity=255}),this.scheduleOnce(function(){e._lastPos=e.renderTarget.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),e.updateChildrenPosition()}),this.target.on(cc.Node.EventType.POSITION_CHANGED,this.updatePosition,this),this.target.on(cc.Node.EventType.SCALE_CHANGED,this.updateScale,this))},t.prototype.onDisable=function(){this._childrenMap.forEach(function(e){e.getComponent(o)?e.active=!1:e.opacity=0}),this.target.off(cc.Node.EventType.POSITION_CHANGED,this.updatePosition,this),this.target.off(cc.Node.EventType.SCALE_CHANGED,this.updateScale,this)},t.prototype.updateScale=function(){var e=this;this._childrenMap.forEach(function(t){return t.setScale(e.node.scale)})},t.prototype.updateChildrenPosition=function(){var e=this,t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.renderTarget.convertToNodeSpaceAR(t);this._childrenMap.forEach(function(t,n){var i=e._childrenOffsetMap.get(n);t.setPosition(o.x+i.x*e.node.scaleX,o.y+i.y*e.node.scaleY)})},t.prototype.updatePosition=function(){var e=this;this.scheduleOnce(function(){var t=e.renderTarget.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),o=t.sub(e._lastPos);e._childrenMap.forEach(function(e){e.x+=o.x,e.y+=o.y}),e._lastPos=t})},t.prototype._moveOutside=function(){for(var e,t=this.offsetIndex;this.node.childrenCount>0;){var o={x:(e=this.node.children[0]).x,y:e.y};this._childrenOffsetMap.set(t,o),e.scaleX*=this.node.scaleX,e.scaleY*=this.node.scaleY,e.parent=this.renderTarget,this._childrenMap.set(t,e),e.getComponent(cc.Label)?e.zIndex=100+t:e.zIndex=t,t++}this.updateChildrenPosition()},t.prototype.recoverChildren=function(){var e=this;this._childrenMap.forEach(function(t,o){t.parent!=e.node&&(t.scaleX/=e.node.scaleX,t.scaleY/=e.node.scaleY),t.parent=e.node;var n=e._childrenOffsetMap.get(o);t.setPosition(n.x,n.y)}),this._childrenMap.clear(),this._childrenOffsetMap.clear()},r([c({type:cc.Node,tooltip:"\u76d1\u542c\u79fb\u52a8\u7684\u8282\u70b9 \u5982\u679c\u6ca1\u6709\u5219\u76d1\u542c\u6302\u70b9"})],t.prototype,"_target",void 0),r([c({type:cc.Node,tooltip:"\u76d1\u542c\u79fb\u52a8\u7684\u8282\u70b9 \u5982\u679c\u6ca1\u6709\u5219\u76d1\u542c\u6302\u70b9"})],t.prototype,"target",null),r([c({type:cc.Node,tooltip:"\u79fb\u52a8\u540e\u7684\u7236\u8282\u70b9\uff08\u4e0d\u586b\u9ed8\u8ba4\u4e3a\u8be5\u8282\u70b9\u7684\u7236\u8282\u70b9,\u4e0d\u80fd\u4e3a\u5f53\u524d\u8282\u70b9\uff09"})],t.prototype,"_renderTarget",void 0),r([c({type:cc.Node,tooltip:"\u79fb\u52a8\u540e\u7684\u7236\u8282\u70b9\uff08\u4e0d\u586b\u9ed8\u8ba4\u4e3a\u8be5\u8282\u70b9\u7684\u7236\u8282\u70b9,\u4e0d\u80fd\u4e3a\u5f53\u524d\u8282\u70b9\uff09"})],t.prototype,"renderTarget",null),r([c({type:cc.Integer,tooltip:"\u521d\u59cbzIndex\u503c(\u9ed8\u8ba4\u4e3a:0)"})],t.prototype,"offsetIndex",void 0),o=r([s,l("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/RenderToTarget")],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],ResKeeperAddition:[function(e,t,o){"use strict";cc._RF.push(t,"4b0d4zhK7lOWb9jaa+EGYf5","ResKeeperAddition");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../Controller/TimeMgr"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._prefabList={},t._nodeList={},t._nodePools={},t._timeList={},t._waterLevel=20,t}return i(t,e),t.prototype.loadItemPool=function(e,t,o,n,i){return void 0===i&&(i=1),r(this,void 0,Promise,function(){var r=this;return a(this,function(){return[2,new Promise(function(a){r.loadBundleRes(t,o,cc.Prefab,function(t,o){r.addItemPool(e,o,n||o.data.name,i),a()})})]})})},t.prototype.addItemPool=function(e,t,o,n){void 0===n&&(n=1),null==o&&(o=t.name),this._prefabList[e]=t,this._nodeList[e]=[],this._nodePools[e]=new cc.NodePool(o),this._timeList[e]=s.default.inst.now();for(var i=0;i<n;i++)this._nodePools[e].put(cc.instantiate(t))},t.prototype.getNodeList=function(e){return this._nodeList[e]},t.prototype.get=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this._nodePools[e];if(null==n)return null;var i=n.get(0);if(null==i){var r=this._prefabList[e];if(null==r)return null;var a=(i=cc.instantiate(this._prefabList[e])).getComponent(n.poolHandlerComp);a&&a.reuse&&a.reuse.apply(a,t)}return this._nodeList[e].push(i),this._timeList[e]=s.default.inst.now(),i},t.prototype.put=function(e,t){var o=this._nodePools[e],n=this._nodeList[e],i=n.indexOf(t);n.splice(i,1),t.removeFromParent(),o.size()<this._waterLevel?o.put(t):t.destroy()},t.prototype.recycle=function(){for(var e in this._nodeList)for(var t=this._nodeList[e];t.length>0;)this.put(e,t[0])},t.prototype.clear=function(){for(var e in this._nodePools)this._nodePools[e].clear(),delete this._nodePools[e]},t.prototype.releaseAutoRes=function(){this.recycle(),this.clear(),this._prefabList={},this._nodeList={},this._nodePools={},this._timeList={},e.prototype.releaseAutoRes.call(this)},t}(e("./ResKeeper").default);o.default=c,cc._RF.pop()},{"../../Controller/TimeMgr":"TimeMgr","./ResKeeper":"ResKeeper"}],ResKeeper:[function(e,t,o){"use strict";cc._RF.push(t,"eb6467RtCVGxrVRKYRJLXOh","ResKeeper");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoRes=[],t}return i(t,e),t.prototype.loadRes=function(){var e=this,t=arguments[0],o=this.parseLoadResArgs(arguments[1],arguments[2],arguments[3]),n=o.onComplete;o.onComplete=function(t,o){if(!t&&e.isValid){if(o instanceof cc.Asset)o.addRef(),e.autoRes.push(o);else for(var i=0,r=o;i<r.length;i++){var a=r[i];a.addRef(),e.autoRes.push(a)}n&&n(t,o)}else cc.error(t)},cc.resources.load(t,o.type,o.onProgress,o.onComplete)},t.prototype.loadBundleRes=function(){var e=this,t=arguments[0],o=arguments[1],n=this.parseLoadResArgs(arguments[2],arguments[3],arguments[4]),i=cc.assetManager.getBundle(t);if(null!=i){var r=n.onComplete;n.onComplete=function(t,o){if(!t&&e.isValid){if(o instanceof cc.Asset)o.addRef(),e.autoRes.push(o);else for(var n=0,i=o;n<i.length;n++){var a=i[n];a.addRef(),e.autoRes.push(a)}r&&r(t,o)}else cc.error(t)},i.load(o,n.type,n.onProgress,n.onComplete)}else n.onComplete&&n.onComplete(null,null)},t.prototype.loadRemoteRes=function(e,t){var o=this;cc.assetManager.loadRemote(e,{ext:".png"},function(e,n){!e&&o.isValid?(n.addRef(),o.autoRes.push(n),t&&t(e,n)):cc.error(e)})},t.prototype.parseLoadResArgs=function(e,t,o){if(void 0===o){var n=cc.js.isChildClassOf(e,cc.Asset);t?(o=t,n&&(t=null)):void 0!==t||n||(o=e,t=null,e=null),void 0===t||n||(t=e,e=null)}return{type:e,onProgress:t,onComplete:o}},t.prototype.onDestroy=function(){this.releaseAutoRes()},t.prototype.releaseAutoRes=function(){for(var e=0;e<this.autoRes.length;e++)this.autoRes[e].decRef();this.autoRes.length=0},t.prototype.autoReleaseRes=function(e){e.addRef(),this.autoRes.push(e)},t.prototype.releaseAsset=function(e){var t=this.autoRes.indexOf(e);-1!=t&&(e.decRef(),this.autoRes.splice(t,1))},r([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],ResLoader:[function(e,t,o){"use strict";cc._RF.push(t,"2c138b9XzhOv5MyS5387lTH","ResLoader"),Object.defineProperty(o,"__esModule",{value:!0}),o.resLoader=void 0;var n=function(){function e(){}return e.prototype.loadRes=function(){cc.resources.load.apply(cc.resources,arguments)},e.prototype.loadResDir=function(){cc.resources.loadDir.apply(cc.resources,arguments)},e.prototype.loadRemoteRes=function(){cc.assetManager.loadRemote.apply(cc.assetManager,arguments)},e.prototype.releaseArray=function(e){for(var t=0;t<e.length;++t)this.releaseAsset(e[t])},e.prototype.releaseAsset=function(e){e.decRef()},e.prototype.getResItem=function(e,t){return cc.resources.get(e,t)},e}();o.default=n,o.resLoader=new n,cc._RF.pop()},{}],SceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"5768aCJyVpKzp5YnbW0LQry","SceneBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Res/ResKeeper"),s=e("../../Define/SceneDef"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sceneType=s.SceneType.$Start,t}return i(t,e),r([p({type:cc.Enum(s.SceneType),displayName:"\u573a\u666f\u7c7b\u578b"})],t.prototype,"sceneType",void 0),r([l],t)}(a.default);o.default=u,cc._RF.pop()},{"../../Define/SceneDef":"SceneDef","../Res/ResKeeper":"ResKeeper"}],SceneDef:[function(e,t,o){"use strict";var n;cc._RF.push(t,"7e24c8vfn5L1oSlp04O4jsu","SceneDef"),Object.defineProperty(o,"__esModule",{value:!0}),o.SceneDataInfo=o.SceneType=void 0,function(e){e[e.$Start=0]="$Start",e[e.NONE=1]="NONE",e[e.Bootstrap=2]="Bootstrap",e[e.Main=3]="Main",e[e.Game=4]="Game",e[e.Test=5]="Test",e[e.$End=6]="$End"}(n=o.SceneType||(o.SceneType={}));var i=function(){function e(e,t,o){void 0===o&&(o=[]),this.extraloadRes=[],this.sceneType=e,this.sceneName=t,this.extraloadRes=o}return e.getSceneData=function(e){for(var t=0;t<this._sceneDataList.length;++t)if(this._sceneDataList[t].sceneType==e)return this._sceneDataList[t];return null},e._sceneDataList=[new e(n.Bootstrap,"BootStrap"),new e(n.Main,"Main"),new e(n.Game,"Game"),new e(n.Test,"Test")],e}();o.SceneDataInfo=i,cc._RF.pop()},{}],SceneMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0df942ksWpO84lCpHxevraf","SceneMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.SceneMgr=void 0;var c=e("../UI/UIFacade"),l=e("../UI/UIMgr"),p=e("../../Define/EventId"),u=e("../../Define/SceneDef"),d=e("../Event/EventMgr"),h=e("../Utils/Singleton"),f=cc._decorator,_=(f.ccclass,f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastSceneType=u.SceneType.NONE,t._currentSceneType=u.SceneType.NONE,t._loadingSceneType=u.SceneType.NONE,t}return i(t,e),t.prototype.getLastScene=function(){return this._lastSceneType},t.prototype.getCurrentScene=function(){return this._currentSceneType},Object.defineProperty(t.prototype,"sceneParams",{get:function(){return this._sceneParams},enumerable:!1,configurable:!0}),t.prototype.loadScene=function(e,t){void 0===t&&(t={}),this._loadingSceneType!=e?this._currentSceneType!=e?(this._sceneParams=t,this._loadScene(e)):cc.error("Scene: "+u.SceneType[e]+", is already loaded!"):cc.error("Scene: "+u.SceneType[e]+", is current being loading!")},t.prototype._loadScene=function(e,t){void 0===t&&(t=3),this._loadingSceneType=e;var o=u.SceneDataInfo.getSceneData(e);o?this._doLoadScene(o):cc.error("Scene not registerd, load scene faild!")},t.prototype._doLoadScene=function(e,t){var o=this;void 0===t&&(t=3);var n=this;cc.director.preloadScene(e.sceneName,function(e,t){d.EVENT.emit(p.EventId.ON_UPDATE_LOADING_PROGRESS,e,t)},function(i){i?(cc.error("\u573a\u666f\u52a0\u8f7d\u5931\u8d25",i),t>=0?(d.EVENT.emit(p.EventId.ON_UPDATE_LOADING_TTP,"\u7f51\u7edc\u4f3c\u4e4e\u4e0d\u592a\u597d"),setTimeout(function(){o._loadScene(e.sceneType,t-1)},1e3)):(t=3,setTimeout(function(){return r(o,void 0,void 0,function(){return a(this,function(o){switch(o.label){case 0:return[4,c.UIFacade.showConfirm("\u8bf7\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u8bd5","\u91cd\u8bd5","\u8fd4\u56de")];case 1:return o.sent()?this._loadScene(e.sceneType,t-1):cc.error("\u7528\u6237\u9009\u62e9\u9000\u51fa\u6e38\u620f"),[2]}})})},1e3))):cc.director.loadScene(e.sceneName,function(e){e?cc.error("\u573a\u666f\u5207\u6362\u5931\u8d25",e):n._loadSceneEnd()})})},t.prototype._loadSceneEnd=function(){this._lastSceneType=this._currentSceneType,this._currentSceneType=this._loadingSceneType,this._loadingSceneType=u.SceneType.NONE,this.reviveWnd()},t.prototype.pushReviveWnd=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._reciveInfo||(this._reciveInfo={sceneType:this._currentSceneType,uis:[]}),this._reciveInfo.uis.push({type:e,args:t})},t.prototype.reviveWnd=function(){var e;if(this.needReviveWnds()){for(var t=this._reciveInfo.uis,o=t.length-1;o>=0;--o){var n=t[o];n.args[0]=n.args[0]||{},n.args[0].isReciver=!0,(e=l.default.inst).open.apply(e,s([n.type],n.args))}this._reciveInfo=void 0}},t.prototype.clearReviveWnds=function(){this._reciveInfo=void 0},t.prototype.needReviveWnds=function(){return this._reciveInfo&&this._reciveInfo.sceneType==this._currentSceneType},t}(h.Singleton()));o.SceneMgr=_,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/SceneDef":"SceneDef","../Event/EventMgr":"EventMgr","../UI/UIFacade":"UIFacade","../UI/UIMgr":"UIMgr","../Utils/Singleton":"Singleton"}],SelectWeaponItem:[function(e,t,o){"use strict";cc._RF.push(t,"5e41fwEh0JEQ7/9zOMoXLYv","SelectWeaponItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtName=null,t.txtLevel=null,t.txtDesc=null,t.spIcon=null,t._sid=null,t._info=null,t}return i(t,e),t.prototype.setInfo=function(e){var t=this;this._sid=e.id,this._info=e.info,1==this._info.lv?(this.txtLevel.string="\u65b0",this.txtLevel.node.color=new cc.Color(0,0,255)):(this.txtLevel.string="",this.txtLevel.node.color=new cc.Color(0,0,0)),this.txtName.string=""+a.SKILL_NAME[this._sid],this.txtDesc.string=""+this._info.desc,this.loadBundleRes("Textures",a.SKILL_ICON_URL[this._sid],cc.SpriteFrame,function(e,o){t.spIcon.spriteFrame=o})},r([p(cc.Label)],t.prototype,"txtName",void 0),r([p(cc.Label)],t.prototype,"txtLevel",void 0),r([p(cc.Label)],t.prototype,"txtDesc",void 0),r([p(cc.Sprite)],t.prototype,"spIcon",void 0),r([l],t)}(s.default);o.default=u,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/Res/ResKeeper":"ResKeeper"}],SelectWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"8f257BbA+FG8ZCh+I4VHe2L","SelectWeapon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/UI/UIMgr"),d=e("../../../Framework/UIBase"),h=e("../../../Model/UserModel"),f=e("../../../Model/WeaponModel"),_=e("./SelectWeaponItem"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectWeapons=[],t.txtFree=null,t.btnRefreshFree=null,t.btnRefresh=null,t.btnGetAll=null,t.nodeTittle=null,t.layout=null,t._skillList=[],t}return i(t,e),t.prototype.onOpen=function(){for(var e in l.AudioMgr.inst.playEffectByName("ui_weaponSelect"),this.selectWeapons)this.selectWeapons[e].node.on(cc.Node.EventType.TOUCH_END,this.onClickItem,this);this.refresh(),p.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.refresh=function(){h.UserModel.inst.curStage>=h.UserModel.inst.quanDouYao?this.btnGetAll.node.active=!0:this.btnGetAll.node.active=!1,h.UserModel.inst.curStage>=h.UserModel.inst.huanYiPi?(h.UserModel.inst.switchNum>0?(this.txtFree.string="(\u5269\u4f59\u6b21\u6570\uff1a"+h.UserModel.inst.switchNum+")",this.btnRefresh.node.active=!1,this.btnRefreshFree.node.active=!0):(this.btnRefresh.node.active=!0,this.btnRefreshFree.node.active=!1),this.btnGetAll.node.x=180):(this.btnRefresh.node.active=!1,this.btnRefreshFree.node.active=!1,this.btnGetAll.node.x=0),this.getWeapon(),4==this._skillList.length?(this.nodeTittle.y=453,this.layout.node.y=20,this.layout.node.height=730,this.layout.spacingX=86,this.layout.spacingY=90,this.btnRefreshFree.node.y=-468,this.btnRefresh.node.y=-468,this.btnGetAll.node.y=-468):(this.nodeTittle.y=370,this.layout.node.y=60,this.layout.node.height=340,this.layout.spacingX=20,this.layout.spacingY=60,this.btnRefreshFree.node.y=-380,this.btnRefresh.node.y=-380,this.btnGetAll.node.y=-380)},t.prototype.getWeapon=function(){var e=3,t=f.WeaponModel.inst.magicAttrs.a_lucky_p;Math.random()<t&&(e=4);for(var o=f.WeaponModel.inst.getRandom(e),n=o.length,i=0;i<n;i++){var r=o[i];(a=this.selectWeapons[i]).node.active=!0,a.setInfo(r)}for(;i<this.selectWeapons.length;i++){var a;(a=this.selectWeapons[i]).node.active=!1}this._skillList=o},t.prototype.onClose=function(){u.default.inst.isUIOpen(c.UIType.FightEquip)||u.default.inst.isUIOpen(c.UIType.EliteBox)||u.default.inst.isUIOpen(c.UIType.DrawSkill)||u.default.inst.isUIOpen(c.UIType.DrawSkill)||p.EVENT.emit(s.EventId.ON_GAME_RESUME)},t.prototype.onClickItem=function(e){var t=e.target,o=t.getSiblingIndex(),n=this._skillList[o],i=t.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP,n.id,n.info.lv),p.EVENT.emit(s.EventId.ON_UI_GAME_FLY_SKILL,i,n.id),f.WeaponModel.inst.skillPoint--,f.WeaponModel.inst.skillPoint>0?this.refresh():this.close()},t.prototype.onClickSelectAll=function(){var e=this;a.default.inst.showAd("\u5c40\u5185\u5929\u8d4b\u5168\u9009",function(){for(var t=0;t<e._skillList.length;t++){var o=e._skillList[t],n=e.layout.node.children[t].convertToWorldSpaceAR(cc.Vec2.ZERO);o&&(p.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP,o.id,o.info.lv),p.EVENT.emit(s.EventId.ON_UI_GAME_FLY_SKILL,n,o.id))}f.WeaponModel.inst.skillPoint--,f.WeaponModel.inst.skillPoint>0?e.refresh():e.close()})},t.prototype.onClickRefresh=function(){var e=this;a.default.inst.showAd("\u5c40\u5185\u5237\u65b0\u5929\u8d4b",function(){h.UserModel.inst.switchNum+=9,e.refresh()})},t.prototype.onClickRefreshFree=function(){h.UserModel.inst.switchNum--,this.refresh()},r([m([_.default])],t.prototype,"selectWeapons",void 0),r([m(cc.Label)],t.prototype,"txtFree",void 0),r([m(cc.Button)],t.prototype,"btnRefreshFree",void 0),r([m(cc.Button)],t.prototype,"btnRefresh",void 0),r([m(cc.Button)],t.prototype,"btnGetAll",void 0),r([m(cc.Node)],t.prototype,"nodeTittle",void 0),r([m(cc.Layout)],t.prototype,"layout",void 0),r([g],t)}(d.default);o.default=v,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel","../../../Model/WeaponModel":"WeaponModel","./SelectWeaponItem":"SelectWeaponItem"}],Setting:[function(e,t,o){"use strict";cc._RF.push(t,"654a5azPSVAxItoP9nJTHw4","Setting");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/NativeMgr"),s=e("../../Define/EventId"),c=e("../../Define/LocalKey"),l=e("../../Define/SceneDef"),p=e("../../Framework/Audio/RTAudioSourceMgr"),u=e("../../Framework/Event/EventMgr"),d=e("../../Framework/Event/RedDot"),h=e("../../Framework/Scene/SceneMgr"),f=e("../../Framework/Storage/LocalStorageMgr"),_=e("../../Framework/UI/UIFacade"),y=e("../../Framework/UI/UIMgr"),g=e("../../Framework/UIBase"),m=e("../../Framework/VM"),v=e("../../Model/AchievementModel"),M=e("../../Model/MagnetModel"),b=e("../../Model/GameModel"),E=e("../../Model/GodPetModel"),I=e("../../Model/GodRideModel"),O=e("../../Model/GodWeaponModel"),S=e("../../Model/StoreModel"),w=e("../../Model/UserModel"),R=e("../../Model/WeaponModel"),P=e("../../Model/XiuLianModel"),A=e("../../Model/GodSkinModel"),T=e("../../Model/GodBackModel"),L=e("../../Controller/TableMgr"),C=e("../../Define/Define"),B=cc._decorator,k=B.ccclass,D=B.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicSprite=null,t.effectSprite=null,t.openFrame=null,t.closeFrame=null,t.bgSwitch=null,t.versionTxt=null,t}return i(t,e),t.prototype.onOpen=function(){var e=this,t=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusicMute,!0);this.changeState(this.musicSprite,"yes"==t,0);var o=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffectMute,!0);this.changeState(this.effectSprite,"yes"==o,0),this.bgSwitch.toggleItems.forEach(function(e,t){return e.isChecked=w.UserModel.inst.background==t}),this.versionTxt.string=a.default.inst._version,L.TABLE.getTable("StoreExchange").forEach(function(t){t.type==C.EXCHANGE_TYPE.Background&&(e.bgSwitch.toggleItems[t.lv].node.active=S.StoreModel.inst.exchange_listed.includes(t.id))}),u.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){},t.prototype.onClickMusic=function(){var e=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusicMute,!0);p.default.inst.muteAllMusic("yes"!=e,!0),this.changeState(this.musicSprite,"yes"!=e)},t.prototype.onClickEffect=function(){var e=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffectMute,!0);p.default.inst.muteAllEffect("yes"!=e,!0),this.changeState(this.effectSprite,"yes"!=e)},t.prototype.changeState=function(e,t,o){void 0===o&&(o=.1);var n=e.node.getChildByName("point"),i=e.node.getChildByName("stateTxt").getComponent(cc.Label);e.spriteFrame=t?this.closeFrame:this.openFrame,i.string=t?"\u5173":"\u5f00",i.node.x=t?18:-18,cc.Tween.stopAllByTarget(n),cc.tween(n).to(o,{x:t?-42:42}).start()},t.prototype.onClickCancel=function(){u.EVENT.emit(s.EventId.ON_GAME_RESUME),this.close()},t.prototype.onClickExit=function(){u.EVENT.emit(s.EventId.ON_GAME_RESUME),u.EVENT.emit(s.EventId.ON_GAME_OVER,1),this.close()},t.prototype.onClickSwitch=function(e){w.UserModel.inst.background=e.node.getSiblingIndex()},t.prototype.onClickYongHuXieYi=function(){a.default.inst.openUserProtocol()},t.prototype.onClickYingSiXieYi=function(){a.default.inst.openPrivacyProtocol()},t.prototype.onClickJoinQQGroup=function(){a.default.inst.joinQQGroup()},t.prototype.onClickUserFeedback=function(){a.default.inst.openUserFeedback()},t.prototype.onClickClearData=function(){_.UIFacade.showConfirm("\u63d0\u793a","\u4f60\u786e\u5b9a\u8981\u5220\u9664\u6e38\u620f\u7684\u6240\u6709\u6570\u636e\u5417\uff1f","\u786e\u8ba4","\u53d6\u6d88").then(function(){d.RedDot._inst=null,b.GameModel._inst=null,R.WeaponModel._inst=null,w.UserModel._inst=null,w.UserModel._inst=null,E.GodPetModel._inst=null,O.GodWeaponModel._inst=null,I.GodRideModel._inst=null,A.GodSkinModel._inst=null,T.GodBackModel._inst=null,v.AchievementModel._inst=null,M.MagnetModel._inst=null,S.StoreModel._inst=null,P.XiuLianModel._inst=null,m.VM.removeAll(),y.default.inst.closeAll(),f.LocalStorageMgr.clearAll(),h.SceneMgr.inst.loadScene(l.SceneType.Bootstrap)})},r([D(cc.Sprite)],t.prototype,"musicSprite",void 0),r([D(cc.Sprite)],t.prototype,"effectSprite",void 0),r([D(cc.SpriteFrame)],t.prototype,"openFrame",void 0),r([D(cc.SpriteFrame)],t.prototype,"closeFrame",void 0),r([D(cc.ToggleContainer)],t.prototype,"bgSwitch",void 0),r([D(cc.Label)],t.prototype,"versionTxt",void 0),r([k],t)}(g.default);o.default=N,cc._RF.pop()},{"../../Controller/NativeMgr":"NativeMgr","../../Controller/TableMgr":"TableMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/LocalKey":"LocalKey","../../Define/SceneDef":"SceneDef","../../Framework/Audio/RTAudioSourceMgr":"RTAudioSourceMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Event/RedDot":"RedDot","../../Framework/Scene/SceneMgr":"SceneMgr","../../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UI/UIMgr":"UIMgr","../../Framework/UIBase":"UIBase","../../Framework/VM":"VM","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/GodBackModel":"GodBackModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel","../../Model/MagnetModel":"MagnetModel","../../Model/StoreModel":"StoreModel","../../Model/UserModel":"UserModel","../../Model/WeaponModel":"WeaponModel","../../Model/XiuLianModel":"XiuLianModel"}],Singleton:[function(e,t,o){"use strict";cc._RF.push(t,"5206eq0hLtHnra87eJbW17V","Singleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.Singleton=void 0,o.Singleton=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return null==e._inst&&(e._inst=new this),e._inst},enumerable:!1,configurable:!0}),e._inst=null,e}()},cc._RF.pop()},{}],SkillDrawUI:[function(e,t,o){"use strict";cc._RF.push(t,"6f01etvksVOWLRoNQlOCz05","SkillDrawUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/GameModel"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphics=null,t.txtTime=null,t._dur=0,t._width=20,t._color=cc.color(0,0,0),t._tempDrawPointsAll=null,t._tempDrawColorsAll=null,t}return i(t,e),t.prototype.setDraw=function(e,t,o){this._tempDrawPointsAll=e,this._tempDrawColorsAll=t,this._dur=o,this.draw()},t.prototype.draw=function(){if(null!=this.graphics){var e=this.graphics,t=this._tempDrawPointsAll.concat();for(var o in t){var n=t[o],i=this._tempDrawColorsAll[o];this._color=cc.color(i.x,i.y,i.z);for(var r=[],a=0,s=n;a<s.length;a++){var c=s[a];r.push({x:c.x,y:c.y});var l=r.length;if(l<=1)e.circle(c.x,c.y,this._width/2),e.fill();else{var p=r[l-2],u=r[l-1];e.moveTo(p.x,p.y),e.lineTo(u.x,u.y),e.lineWidth=this._width,e.lineCap=cc.Graphics.LineCap.ROUND,e.lineJoin=cc.Graphics.LineJoin.ROUND,e.strokeColor=this._color,e.stroke()}}}}},t.prototype.update=function(e){a.GameModel.inst.isPause||this._dur>0&&(this._dur-=e,this.txtTime.string=Math.floor(this._dur)+"s",this._dur<0&&this.node.destroy())},r([l(cc.Graphics)],t.prototype,"graphics",void 0),r([l(cc.Label)],t.prototype,"txtTime",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel"}],SkillItem:[function(e,t,o){"use strict";cc._RF.push(t,"2417e+TDeZIep5DYn0dJcqD","SkillItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/Define"),s=e("../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t}return i(t,e),t.prototype.setIcon=function(e){var t=this;this.icon.spriteFrame=null,this.releaseAutoRes(),this.loadBundleRes("Textures",a.SKILL_ICON_URL[e],cc.SpriteFrame,function(e,o){t.icon.spriteFrame=o})},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([l],t)}(s.default);o.default=u,cc._RF.pop()},{"../../Define/Define":"Define","../../Framework/Res/ResKeeper":"ResKeeper"}],SkillUI:[function(e,t,o){"use strict";cc._RF.push(t,"2993d/o0KRBQ7GfJiSUik3k","SkillUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/List/RenderToTarget"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtLevel=null,t.render=null,t}return i(t,e),t.prototype.start=function(){},r([l(cc.Sprite)],t.prototype,"icon",void 0),r([l(cc.Label)],t.prototype,"txtLevel",void 0),r([l(a.default)],t.prototype,"render",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Framework/List/RenderToTarget":"RenderToTarget"}],StageBoxItem:[function(e,t,o){"use strict";cc._RF.push(t,"42fbcVt2LRMs57VZS9rDki8","StageBoxItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Define/UIDefs"),c=e("../../../Framework/Res/ResKeeper"),l=e("../../../Framework/UI/UIMgr"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtNum=null,t.type="",t.id="",t.count=0,t.desc="",t}return i(t,e),t.prototype.start=function(){},t.prototype.setInfo=function(e,t,o,n){var i=this;switch(this.type=e,this.id=t,this.count=o,this.desc=n,e){case"skill":this.loadBundleRes("Textures",a.TALENT_ICON_URL_BY_ID[t],cc.SpriteFrame,function(e,n){i.icon.spriteFrame=n,"_p"==t.slice(-2)?i.txtNum.string="+"+100*o+"%":i.txtNum.string="+"+o});break;default:this.loadBundleRes("Textures",a.MONEY_ICON_URL[e],cc.SpriteFrame,function(e,t){i.icon.spriteFrame=t,i.txtNum.string="x"+o})}},t.prototype.btnCb=function(){l.default.inst.open(s.UIType.StageBoxTips,{str:this.desc,pos:this.node.parent.convertToWorldSpaceAR(this.node.position)})},r([d(cc.Sprite)],t.prototype,"icon",void 0),r([d(cc.Label)],t.prototype,"txtNum",void 0),r([u],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Define/UIDefs":"UIDefs","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/UI/UIMgr":"UIMgr"}],StageBoxTips:[function(e,t,o){"use strict";cc._RF.push(t,"9e2f4dRwA1MX4vXI6oX7csP","StageBoxTips");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.text=null,t.maxWidth=320,t}return i(t,e),t.prototype.onOpen=function(e,t){this.setTips(t.str,t.pos)},t.prototype.setTips=function(e,t){var o=this.node.parent.convertToNodeSpaceAR(t);o.x<=0?this.text.node.anchorX=0:this.text.node.anchorX=1,e=e.replace("\\n","\n"),this.text.string=e,e.length*this.text.fontSize>=this.maxWidth?this.text.overflow=cc.Label.Overflow.RESIZE_HEIGHT:this.text.overflow=cc.Label.Overflow.NONE,this.text._forceUpdateRenderData(),this.content.position=o},r([l(cc.Node)],t.prototype,"content",void 0),r([l(cc.Label)],t.prototype,"text",void 0),r([l],t.prototype,"maxWidth",void 0),r([c],t)}(a.default);o.default=p,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],StageBox:[function(e,t,o){"use strict";cc._RF.push(t,"8dbebUVB2NILrhc/knj22NW","StageBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Controller/TableMgr"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/UI/UIFacade"),p=e("../../../Framework/UIBase"),u=e("../../../Model/UserModel"),d=e("./StageBoxItem"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pfCommon=null,t.nodeReward=null,t.nodeAdReward=null,t.nodeBtnGet=null,t.nodeBGet=null,t.nodeBtnGetAd=null,t.nodeBGetAd=null,t.id=0,t.com=null,t}return i(t,e),t.prototype.onOpen=function(e,t){c.AudioMgr.inst.playEffectByName("ui_open"),this.id=t.id,this.com=t.com,this.refresh(this.id)},t.prototype.refresh=function(e){this.nodeReward.removeAllChildren(),this.nodeAdReward.removeAllChildren(),this.id=e;var t=s.TABLE.getTableInfo("stageBox","id",this.id);t&&(""!=t.rType1&&this.addReward(this.nodeReward,t.rType1,t.rId1,t.rVal1,t.desc1),""!=t.rType2&&this.addReward(this.nodeReward,t.rType2,t.rId2,t.rVal2,t.desc2),""!=t.adType1&&this.addReward(this.nodeAdReward,t.adType1,t.adId1,t.adVal1,t.adDesc1),""!=t.adType2&&this.addReward(this.nodeAdReward,t.adType2,t.adId2,t.adVal2,t.adDesc2),this.updateBtnSt())},t.prototype.updateBtnSt=function(){var e=u.UserModel.inst.stageBoxGet[this.id];1==(1&e)?(this.nodeBtnGet.active=!1,this.nodeBGet.active=!0):(this.nodeBtnGet.active=!0,this.nodeBGet.active=!1),2==(2&e)?(this.nodeBtnGetAd.active=!1,this.nodeBGetAd.active=!0):(this.nodeBtnGetAd.active=!0,this.nodeBGetAd.active=!1)},t.prototype.addReward=function(e,t,o,n,i){var r=cc.instantiate(this.pfCommon);r.getComponent(d.default).setInfo(t,o,n,i),e.addChild(r)},t.prototype.getItem=function(e,t,o){switch(e){case"money":u.UserModel.inst.money+=o;break;case"rMoney":u.UserModel.inst.rMoney+=o;break;case"g1Money":u.UserModel.inst.g1Money+=o;break;case"g2Money":u.UserModel.inst.g2Money+=o;break;case"g3Money":u.UserModel.inst.g3Money+=o;break;case"skill":u.UserModel.inst.stageBoxSkill[t]||(u.UserModel.inst.stageBoxSkill[t]=0),u.UserModel.inst.stageBoxSkill[t]+=o,u.UserModel.inst.stageBoxSkill=u.UserModel.inst.stageBoxSkill}},t.prototype.getReward=function(){if(1!=(1&u.UserModel.inst.stageBoxGet[this.id])){u.UserModel.inst.stageBoxGet[this.id]||(u.UserModel.inst.stageBoxGet[this.id]=0);var e=s.TABLE.getTableInfo("stageBox","id",this.id);e&&(u.UserModel.inst.stageBoxGet[this.id]|=1,u.UserModel.inst.stageBoxGet=u.UserModel.inst.stageBoxGet,""!=e.rType1&&this.getItem(e.rType1,e.rId1,e.rVal1),""!=e.rType2&&this.getItem(e.rType2,e.rId2,e.rVal2),this.updateBtnSt(),this.com.init(),c.AudioMgr.inst.playEffectByName("ui_tips"),l.UIFacade.showToast("\u9886\u53d6\u6210\u529f"))}},t.prototype.getRewardAd=function(){var e=this;if(2!=(2&u.UserModel.inst.stageBoxGet[this.id])){var t=s.TABLE.getTableInfo("stageBox","id",this.id);t&&a.default.inst.showAd("\u5b9d\u7bb1\u5e7f\u544a",function(){u.UserModel.inst.stageBoxGet[e.id]||(u.UserModel.inst.stageBoxGet[e.id]=0),u.UserModel.inst.stageBoxGet[e.id]|=2,u.UserModel.inst.stageBoxGet=u.UserModel.inst.stageBoxGet,""!=t.adType1&&e.getItem(t.adType1,t.adId1,t.adVal1),""!=t.adType2&&e.getItem(t.adType2,t.adId2,t.adVal2),e.updateBtnSt(),e.com.init(),c.AudioMgr.inst.playEffectByName("ui_tips"),l.UIFacade.showToast("\u9886\u53d6\u6210\u529f")})}},r([_(cc.Prefab)],t.prototype,"pfCommon",void 0),r([_(cc.Node)],t.prototype,"nodeReward",void 0),r([_(cc.Node)],t.prototype,"nodeAdReward",void 0),r([_(cc.Node)],t.prototype,"nodeBtnGet",void 0),r([_(cc.Node)],t.prototype,"nodeBGet",void 0),r([_(cc.Node)],t.prototype,"nodeBtnGetAd",void 0),r([_(cc.Node)],t.prototype,"nodeBGetAd",void 0),r([f],t)}(p.default);o.default=y,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TableMgr":"TableMgr","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel","./StageBoxItem":"StageBoxItem"}],StageMapBox:[function(e,t,o){"use strict";cc._RF.push(t,"143a6/aoOpKt5QLEGh/5xw6","StageMapBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/TableMgr"),s=e("../../../Define/UIDefs"),c=e("../../../Framework/UI/UIMgr"),l=e("../../../Model/UserModel"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp=null,t.sfIcon=[],t.spine=null,t._id=-1,t._state=0,t}return i(t,e),t.prototype.start=function(){this.init()},t.prototype.init=function(){this._id=parseInt(this.node.name);var e=a.TABLE.getTableInfo("stageBox","id",this._id);if(e)if(this.sp.node.active=!0,this.spine.node.active=!1,l.UserModel.inst.curStage<=e.stage)this.sp.spriteFrame=this.sfIcon[0],this._state=0;else{var t=l.UserModel.inst.stageBoxGet[this._id];t?3==t?(this.sp.spriteFrame=this.sfIcon[3],this._state=3):(this._state=2,this.sp.node.active=!1,this.spine.node.active=!0,this.spine.setAnimation(0,"idle2",!0)):(this._state=1,this.sp.node.active=!1,this.spine.node.active=!0,this.spine.setAnimation(0,"idle1",!0))}else this.spine.node.active=!1},t.prototype.onClick=function(){0!=this._state&&c.default.inst.open(s.UIType.StageBox,{id:this._id,com:this})},r([d(cc.Sprite)],t.prototype,"sp",void 0),r([d([cc.SpriteFrame])],t.prototype,"sfIcon",void 0),r([d(sp.Skeleton)],t.prototype,"spine",void 0),r([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/UIDefs":"UIDefs","../../../Framework/UI/UIMgr":"UIMgr","../../../Model/UserModel":"UserModel"}],StageMapItem:[function(e,t,o){"use strict";cc._RF.push(t,"47b5aQxMh1JmIwRGW7gLb9V","StageMapItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../../../Define/Define"),c=e("../../../Framework/Res/ResKeeper"),l=cc._decorator,p=l.ccclass,u=l.property;(function(e){e[e.cc1=0]="cc1",e[e.cc2=1]="cc2",e[e.cc3=2]="cc3",e[e.cc4=3]="cc4",e[e.cc5=4]="cc5",e[e.cc6=5]="cc6",e[e.cc7=6]="cc7",e[e.cc8=7]="cc8",e[e.cc9=8]="cc9",e[e.cc1b=9]="cc1b",e[e.ccFinish=10]="ccFinish"})(a||(a={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spIcon=null,t._ccType=a.cc1,t._isPass=!1,t}return i(t,e),Object.defineProperty(t.prototype,"ccType",{get:function(){return this._ccType},set:function(e){this._ccType=e},enumerable:!1,configurable:!0}),t.prototype.setPass=function(e){this._isPass=e,this.updateIcon()},t.prototype.updateIcon=function(){var e=this;this._isPass&&(this._ccType==a.cc1?(this._ccType=a.cc1b,this.loadBundleRes("Textures",s.STAGE_ICON_URL[this._ccType],cc.SpriteFrame,function(t,o){e.spIcon.spriteFrame=o})):this.loadBundleRes("Textures",s.STAGE_ICON_URL[a.ccFinish],cc.SpriteFrame,function(t,o){var n=new cc.Node("passed");n.addComponent(cc.Sprite).spriteFrame=o,n.scaleX=e.node.scaleX,n.setParent(e.node)}))},r([u(cc.Sprite)],t.prototype,"spIcon",void 0),r([u({type:cc.Enum(a)})],t.prototype,"_ccType",void 0),r([u({type:cc.Enum(a),displayName:"\u5173\u5361\u7c7b\u578b"})],t.prototype,"ccType",null),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/Res/ResKeeper":"ResKeeper"}],StageMap:[function(e,t,o){"use strict";cc._RF.push(t,"e0882goNnJM5Z7uMq+x2mpQ","StageMap");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/NativeMgr"),s=e("../../../Controller/TableMgr"),c=e("../../../Controller/TimeMgr"),l=e("../../../Define/EventId"),p=e("../../../Define/SceneDef"),u=e("../../../Define/UIDefs"),d=e("../../../Framework/Audio/AudioMgr"),h=e("../../../Framework/Event/EventMgr"),f=e("../../../Framework/UI/UIFacade"),_=e("../../../Framework/UI/UIMgr"),y=e("../../../Framework/UIBase"),g=e("../../../Model/MagnetModel"),m=e("../../../Model/GameModel"),v=e("../../../Model/UserModel"),M=e("./StageMapBox"),b=e("./StageMapItem"),E=cc._decorator,I=E.ccclass,O=E.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeStage=null,t.nodeMap=null,t.nodeTips=null,t.nodeArrow=null,t.numTxt=null,t.nodeBoxes=null,t._stageList=[],t._boxList=[],t._curCom=null,t._isMove=!1,t._slideDis=10,t._selectStage=0,t}return i(t,e),t.prototype.onOpen=function(){var e=this;d.AudioMgr.inst.playEffectByName("ui_winMap"),this._selectStage=v.UserModel.inst.curStage,v.UserModel.inst.curStage>this.nodeTips.childrenCount&&(this._selectStage=this.nodeTips.childrenCount),this.nodeTips.children.forEach(function(t,o){return t.active=o==e._selectStage-1}),this.nodeStage.children.forEach(function(t){return t.on(cc.Node.EventType.TOUCH_END,e.onClickStage,e)}),this.numTxt.string=""+this._selectStage,this.refresh(),this.updatePos()},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onMove,this)},t.prototype.startCB=function(){},t.prototype.onTouchEnd=function(){this._isMove=!1},t.prototype.onMove=function(e){var t=e.getLocation(),o=e.getStartLocation(),n=cc.Vec2.distance(t,o);if(this._isMove||n>=this._slideDis){this._isMove=!0;var i=e.getDelta();this.slideCb(i)}},t.prototype.slideCb=function(e){this.nodeMap.x+=e.x,this.nodeMap.y+=e.y;var t=-this.nodeMap.width/2+this.node.width/2,o=this.nodeMap.width/2-this.node.width/2,n=-this.nodeMap.height/2+this.node.height/2,i=this.nodeMap.height/2-this.node.height/2;this.nodeMap.x<t&&(this.nodeMap.x=t),this.nodeMap.x>o&&(this.nodeMap.x=o),this.nodeMap.y<n&&(this.nodeMap.y=n),this.nodeMap.y>i&&(this.nodeMap.y=i)},t.prototype.refresh=function(){for(var e=this.nodeStage.children,t=0;t<e.length;t++){var o=this.nodeStage.getChildByName(""+(t+1));if(o){var n=o.getComponent(b.default);t+1<v.UserModel.inst.curStage?n.setPass(!0):(n.setPass(!1),t+1==v.UserModel.inst.curStage&&(this._curCom=n))}}for(e=this.nodeBoxes.children,this._boxList.length=0,t=0;t<e.length;t++){var i=this.nodeBoxes.getChildByName(""+(t+1));i&&(n=i.getComponent(M.default),this._boxList.push(n),n.init())}},t.prototype.updatePos=function(){for(var e=this.nodeStage.children,t=0;t<e.length;t++){var o=this.nodeStage.getChildByName(""+(t+1));if(o){var n=o.getComponent(b.default);t+1==this._selectStage&&(this._curCom=n)}}this.nodeMap.x=0,this.nodeMap.y=0;var i=this._curCom.node.position,r=this._curCom.node.parent.convertToWorldSpaceAR(i),a=this.nodeMap.parent.convertToNodeSpaceAR(r);this.nodeMap.x=-a.x,this.nodeMap.y=-a.y,this.slideCb(cc.v2(0,0));var s=this._curCom.node.convertToWorldSpaceAR(cc.v2(-4,100));this.nodeArrow.setPosition(this.nodeArrow.parent.convertToNodeSpaceAR(s))},t.prototype.movePos=function(){for(var e=this.nodeStage.children,t=0;t<e.length;t++){var o=this.nodeStage.getChildByName(""+(t+1));if(o){var n=o.getComponent(b.default);t+1==this._selectStage&&(this._curCom=n)}}var i=this.nodeMap.getPosition();this.nodeMap.x=0,this.nodeMap.y=0;var r=this._curCom.node.position,a=this._curCom.node.parent.convertToWorldSpaceAR(r),s=this.nodeMap.parent.convertToNodeSpaceAR(a),c=-this.nodeMap.width/2+this.node.width/2,l=this.nodeMap.width/2-this.node.width/2,p=-this.nodeMap.height/2+this.node.height/2,u=this.nodeMap.height/2-this.node.height/2;s.x<c&&(s.x=c),s.x>l&&(s.x=l),s.y<p&&(s.y=p),s.y>u&&(s.y=u),this.nodeMap.setPosition(i),cc.tween(this.nodeMap).to(.2,{x:-s.x,y:-s.y},{easing:"cubicOut"}).start();var d=this._curCom.node.convertToWorldSpaceAR(cc.v2(-4,100));this.nodeArrow.setPosition(this.nodeArrow.parent.convertToNodeSpaceAR(d))},t.prototype.onClickStart=function(){if(null==s.TABLE.getTable("stage_"+this._selectStage))return f.UIFacade.showToast("\u5173\u5361\u5c1a\u672a\u5f00\u653e\uff0c\u656c\u8bf7\u671f\u5f85"),void d.AudioMgr.inst.playEffectByName("ui_not");m.GameModel.inst.clear(),m.GameModel.inst.stage=this._selectStage,v.UserModel.inst.selectStage=this._selectStage,g.MagnetModel.inst.stageTime=c.default.inst.now(),a.default.inst.logEvent("ohayoo_game_battlemap",{battletype:"\u666e\u901a\u6a21\u5f0f",mapid:v.UserModel.inst.selectStage,battleresult:0}),d.AudioMgr.inst.playEffectByName("ui_winMap"),_.default.inst.delayUIWaitAnim(cc.macro.REPEAT_FOREVER),_.default.inst.open(u.UIType.Loading,p.SceneType.Main),this.close(),h.EVENT.emit(l.EventId.ON_GAME_START)},t.prototype.onClickStage=function(e){var t=this;if(!(cc.Vec2.distance(e.getStartLocation(),e.getLocation())>10)){var o=e.target,n=Number(o.name);if(n>v.UserModel.inst.curStage)return f.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u524d\u7f6e\u5173\u5361"),void d.AudioMgr.inst.playEffectByName("ui_not");d.AudioMgr.inst.playEffectByName("talentSelect"),this._selectStage=n,this.nodeTips.children.forEach(function(e,o){return e.active=o==t._selectStage-1}),this.numTxt.string=""+this._selectStage,this.movePos()}},r([O(cc.Node)],t.prototype,"nodeStage",void 0),r([O(cc.Node)],t.prototype,"nodeMap",void 0),r([O(cc.Node)],t.prototype,"nodeTips",void 0),r([O(cc.Node)],t.prototype,"nodeArrow",void 0),r([O(cc.Label)],t.prototype,"numTxt",void 0),r([O(cc.Node)],t.prototype,"nodeBoxes",void 0),r([I],t)}(y.default);o.default=S,cc._RF.pop()},{"../../../Controller/NativeMgr":"NativeMgr","../../../Controller/TableMgr":"TableMgr","../../../Controller/TimeMgr":"TimeMgr","../../../Define/EventId":"EventId","../../../Define/SceneDef":"SceneDef","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/GameModel":"GameModel","../../../Model/MagnetModel":"MagnetModel","../../../Model/UserModel":"UserModel","./StageMapBox":"StageMapBox","./StageMapItem":"StageMapItem"}],StaticData:[function(e,t,o){"use strict";cc._RF.push(t,"bbb253g4ExFTqHUa4YXBYzk","StaticData"),Object.defineProperty(o,"__esModule",{value:!0}),o.StaticData=void 0;var n=function(){function e(){}return e.mainCamera=null,e.designResolutionSize=null,e.visibleSize=null,e.center=null,e.scale=1,e.minX=1,e.maxX=1,e.minY=1,e.maxY=1,e.radius=1,e}();o.StaticData=n,cc._RF.pop()},{}],StoreModel:[function(e,t,o){"use strict";cc._RF.push(t,"f4ad4wh/DlGdI0kOg75vpjW","StoreModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.StoreModel=void 0;var n=e("../Controller/TableMgr"),i=e("../Controller/TimeMgr"),r=e("../Define/EventId"),a=e("../Framework/Event/EventMgr"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("../Framework/Utils/Utils"),l=function(){function e(){var e;this.rMoneyNum=60,this.g1MoneyNum=60,this.rMoney_cd=60,this.rMoney_freecd=144e5,this._rMoney_time=0,this._rMoney_freetime=0,this._money_free=[],this._exchange_list=[],this._exchange_listed=[],this.rMoneyNum=Number(n.TABLE.getGlobal("LiangCaoBuJi_rMoney")),this.g1MoneyNum=Number(n.TABLE.getGlobal("LiangCaoBuJi_g1Money")),this.rMoney_cd=Number(n.TABLE.getGlobal("LiangCaoBuJi_cd")),this.rMoney_freecd=Number(n.TABLE.getGlobal("LiangCaoBuJi_freecd")),this._rMoney_time=Number(s.LocalStorageMgr.getItem("LiangCaoBuJi_time2"))||0,this._rMoney_freetime=Number(s.LocalStorageMgr.getItem("LiangCaoBuJi_freetime2"))||0;var t=null===(e=s.LocalStorageMgr.getItem("LiangCaoBuJi_money_time2"))||void 0===e?void 0:e.split(",");if(t)for(var o in t)this._money_free[o]=Number(t[o]);else this._money_free=[0,0,0,0];this._exchange_list=JSON.parse(s.LocalStorageMgr.getItem("Store_exchange_list")||"[]"),this._exchange_listed=JSON.parse(s.LocalStorageMgr.getItem("Store_exchange_listed")||"[]"),0==this._exchange_list.length&&this.refreshExchange()}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rMoney_time",{get:function(){return this._rMoney_time},set:function(e){this._rMoney_time=e,s.LocalStorageMgr.setItem("LiangCaoBuJi_time2",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rMoney_freetime",{get:function(){return this._rMoney_freetime},set:function(e){this._rMoney_freetime=e,s.LocalStorageMgr.setItem("LiangCaoBuJi_freetime2",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"money_free",{get:function(){return this._money_free},set:function(e){this._money_free=e,s.LocalStorageMgr.setItem("LiangCaoBuJi_money_time2",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exchange_list",{get:function(){return this._exchange_list},set:function(e){this._exchange_list=e,s.LocalStorageMgr.setItem("Store_exchange_list",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exchange_listed",{get:function(){return this._exchange_listed},set:function(e){this._exchange_listed=e,s.LocalStorageMgr.setItem("Store_exchange_listed",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),e.prototype.getTime=function(){return this.rMoney_cd-(i.default.inst.now()-this._rMoney_time)},e.prototype.getFreeTime=function(){return this.rMoney_freecd-(i.default.inst.now()-this._rMoney_freetime)},e.prototype.refreshExchange=function(){var e=this,t=n.TABLE.getTable("StoreExchange"),o=[],i=[];t.forEach(function(t){e._exchange_listed.includes(t.id)||(o.push(t),i.push(t.widget))});var s=cc.math.randomRangeInt(5,9);this._exchange_list.length=0;for(var l=0;l<s&&0!=i.length;l++){var p=c.default.getRandWeightIndex(i);this._exchange_list.push(o[p].id),i.splice(p,1),o.splice(p,1)[0]}return a.EVENT.emit(r.EventId.ON_REFUSE_STORE),this.exchange_list=this._exchange_list},e.prototype.refreshFree=function(){if(this.getFreeTime()>0)return!1;for(;this.getFreeTime()<=0;)this.rMoney_freetime+=this.rMoney_freecd;return this._money_free[0]=1,this.money_free=this._money_free,this.refreshExchange(),!0},e._inst=null,e}();o.StoreModel=l,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Controller/TimeMgr":"TimeMgr","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../Framework/Utils/Utils":"Utils"}],StoreReview:[function(e,t,o){"use strict";cc._RF.push(t,"bde13UN3OlHJ4v/Y5GFOPY8","StoreReview");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/NativeMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Event/EventMgr"),l=e("../../../Framework/UIBase"),p=e("../../../Model/UserModel"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeReward=null,t.txtReward=null,t}return i(t,e),t.prototype.onOpen=function(){this.txtReward.string="x"+p.UserModel.inst.storeReviewReward},t.prototype.onClickConfirm=function(){var e=this.nodeReward.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,e,"RMoney",function(){p.UserModel.inst.rMoney+=p.UserModel.inst.storeReviewReward}),a.default.inst.storeReview(),this.close()},t.prototype.onClickCancel=function(){this.close()},r([h(cc.Node)],t.prototype,"nodeReward",void 0),r([h(cc.Label)],t.prototype,"txtReward",void 0),r([d],t)}(l.default);o.default=f,cc._RF.pop()},{"../../../Controller/NativeMgr":"NativeMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel"}],Store_ExchangeInfo:[function(e,t,o){"use strict";cc._RF.push(t,"0ea3cuHRVRI6rla3H2ROAUV","Store_ExchangeInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Define/EventId"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/List/List"),u=e("../../../Framework/UI/UIFacade"),d=e("../../../Framework/UI/UIMgr"),h=e("../../../Framework/UIBase"),f=e("../../../Model/GodBackModel"),_=e("../../../Model/GodPetModel"),y=e("../../../Model/GodRideModel"),g=e("../../../Model/GodSkinModel"),m=e("../../../Model/GodWeaponModel"),v=e("../../../Model/StoreModel"),M=e("../../../Model/UserModel"),b=cc._decorator,E=b.ccclass,I=b.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.iconMoney=null,t.txtName=null,t.txtType=null,t.txtDesc=null,t.discount=null,t.txtDiscount=null,t.txtMoney=null,t.layout=null,t.list1=null,t.list2=null,t._model=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=this,n=t;this._model=[null,null,y.GodRideModel.inst,m.GodWeaponModel.inst,_.GodPetModel.inst,g.GodSkinModel.inst,f.GodBackModel.inst,null][n.type],this.txtName.string=""+n.name,this.txtType.string=""+["\u5efa\u9020\u7c7b\u6280\u80fd","\u89d2\u8272\u6280\u80fd","\u5750\u9a91","\u795e\u5175","\u795e\u517d","\u65f6\u88c5","\u80cc\u9970","\u5730\u56fe"][n.type],this.txtDesc.string=""+n.desc,this.txtMoney.string=""+Math.floor(n.money*n.discount),1==n.discount?(this.discount.active=!1,this.txtDiscount.node.active=!1):(this.discount.active=!0,this.txtDiscount.node.active=!0,this.txtDiscount.string=Math.floor(10*n.discount)+"\u6298"),this.loadBundleRes("Textures",a.MONEY_ICON_URL[n.moneyType],cc.SpriteFrame,function(e,t){o.iconMoney.spriteFrame=t}),this.loadBundleRes("Textures",n.icon,cc.SpriteFrame,function(e,t){o.icon.spriteFrame=t}),this.layout.node.active=!1},t.prototype.onClickGet=function(){var e=this._para,t=e.money,o=e.moneyType;switch(e.type){case a.EXCHANGE_TYPE.Weapon:if(M.UserModel.inst.curStage<=M.UserModel.inst.godWeaponOpenStage)return c.AudioMgr.inst.playEffectByName("ui_not"),void u.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+M.UserModel.inst.godWeaponOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u5175\u7cfb\u7edf\u3011");break;case a.EXCHANGE_TYPE.Pet:if(M.UserModel.inst.curStage<=M.UserModel.inst.godPetOpenStage)return c.AudioMgr.inst.playEffectByName("ui_not"),void u.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+M.UserModel.inst.godPetOpenStage+"\u5173\u89e3\u9501\u3010\u795e\u517d\u7cfb\u7edf\u3011");break;case a.EXCHANGE_TYPE.Skin:if(M.UserModel.inst.curStage<=M.UserModel.inst.godSkinOpenStage)return c.AudioMgr.inst.playEffectByName("ui_not"),void u.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+M.UserModel.inst.godSkinOpenStage+"\u5173\u89e3\u9501\u3010\u65f6\u88c5\u7cfb\u7edf\u3011");break;case a.EXCHANGE_TYPE.Back:if(M.UserModel.inst.curStage<=M.UserModel.inst.godBackOpenStage)return c.AudioMgr.inst.playEffectByName("ui_not"),void u.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u7b2c"+M.UserModel.inst.godBackOpenStage+"\u5173\u89e3\u9501\u3010\u80cc\u9970\u7cfb\u7edf\u3011")}if(M.UserModel.inst[o]<t)return c.AudioMgr.inst.playEffectByName("ui_not"),void d.default.inst.showToast("\u84dd\u5b9d\u77f3\u4e0d\u8db3");c.AudioMgr.inst.playEffectByName("achievement"),d.default.inst.showToast("\u5151\u6362\u6210\u529f"),M.UserModel.inst[o]-=t,v.StoreModel.inst.exchange_listed.push(e.id),v.StoreModel.inst.exchange_listed=v.StoreModel.inst.exchange_listed,l.EVENT.emit(s.EventId.ON_REFUSE_STORE),this._model&&(this._model.unlock.push(Number(e.lv)),this._model.unlock=this._model.unlock,this._model.curIdx=Number(e.lv),l.EVENT.emit(s.EventId.ON_REFRESH_ROLE)),e.type==a.EXCHANGE_TYPE.Background&&(M.UserModel.inst.background=Number(e.lv)),this.close()},t.prototype.onListRender=function(e){var t=e.getComponentsInChildren(cc.Label);t[0].string="",t[1].string="",t[2].string=""},t.prototype.onList2Render=function(e){var t=e.getComponentsInChildren(cc.Label);t[0].string="",t[1].string="",t[2].string=""},r([I(cc.Sprite)],t.prototype,"icon",void 0),r([I(cc.Sprite)],t.prototype,"iconMoney",void 0),r([I(cc.Label)],t.prototype,"txtName",void 0),r([I(cc.Label)],t.prototype,"txtType",void 0),r([I(cc.Label)],t.prototype,"txtDesc",void 0),r([I(cc.Node)],t.prototype,"discount",void 0),r([I(cc.Label)],t.prototype,"txtDiscount",void 0),r([I(cc.Label)],t.prototype,"txtMoney",void 0),r([I(cc.Layout)],t.prototype,"layout",void 0),r([I(p.default)],t.prototype,"list1",void 0),r([I(p.default)],t.prototype,"list2",void 0),r([E],t)}(h.default);o.default=O,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/GodBackModel":"GodBackModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],Store_ExchangeItem:[function(e,t,o){"use strict";cc._RF.push(t,"307c0GYt+5IYoukBLrgoqch","Store_ExchangeItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.iconMoney=null,t.discount=null,t.txtDiscount=null,t.txtNum=null,t.txtMoney=null,t.nodeSold=null,t}return i(t,e),t.prototype.start=function(){},r([c(cc.Sprite)],t.prototype,"icon",void 0),r([c(cc.Sprite)],t.prototype,"iconMoney",void 0),r([c(cc.Node)],t.prototype,"discount",void 0),r([c(cc.Label)],t.prototype,"txtDiscount",void 0),r([c(cc.Label)],t.prototype,"txtNum",void 0),r([c(cc.Label)],t.prototype,"txtMoney",void 0),r([c(cc.Node)],t.prototype,"nodeSold",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Store_Exchange:[function(e,t,o){"use strict";cc._RF.push(t,"bde7djB7RVBuptdFqC78y3d","Store_Exchange");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/TableMgr"),s=e("../../../Define/Define"),c=e("../../../Define/EventId"),l=e("../../../Define/UIDefs"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/List/List"),d=e("../../../Framework/Res/ResKeeper"),h=e("../../../Framework/UI/UIMgr"),f=e("../../../Model/StoreModel"),_=e("../../../Model/UserModel"),y=e("./Store_ExchangeItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=null,t.txtTime=null,t._table=null,t._icons=[],t._iconMoneys=[],t}return i(t,e),t.prototype.onEnable=function(){p.EVENT.on(c.EventId.ON_REFUSE_STORE,this.refresh,this)},t.prototype.onDisable=function(){p.EVENT.off(c.EventId.ON_REFUSE_STORE,this.refresh,this)},t.prototype.start=function(){var e=this;this._table=a.TABLE.getTable("StoreExchange");var t=this._table.map(function(e){return e.icon});this.loadBundleRes("Textures",t,cc.SpriteFrame,function(t,o){e._icons=o,e.list.updateAll()}),this.loadBundleRes("Textures",Object.values(s.MONEY_ICON_URL),cc.SpriteFrame,function(t,o){e._iconMoneys=o,e.list.updateAll()}),this.refresh()},t.prototype.refresh=function(){this.list.numItems=f.StoreModel.inst.exchange_list.length},t.prototype.onListRender=function(e,t){var o=f.StoreModel.inst.exchange_list,n=f.StoreModel.inst.exchange_listed,i=this._table.findIndex(function(e){return e.id==o[t]}),r=this._table[i];if(null!=r){var a=e.getComponent(y.default);a.icon.spriteFrame=null,a.icon.spriteFrame=this._icons[i],a.iconMoney.spriteFrame=this._iconMoneys[Object.keys(s.MONEY_ICON_URL).indexOf(r.moneyType)],a.txtMoney.string=""+Math.floor(r.discount*r.money),r.discount<1?(a.discount.active=!0,a.txtDiscount.string=10*r.discount+"\u6298"):(a.discount.active=!1,a.txtDiscount.string=""),r.num>1?a.txtNum.string="x"+r.num:a.txtNum.string="";var c=n.includes(r.id);a.nodeSold.active=c,e.targetOff(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,function(){return h.default.inst.open(l.UIType.StoreExchangeInfo,r)},this)}},t.prototype.onClickRefresh=function(){_.UserModel.inst.g1Money<5?h.default.inst.showToast("\u84dd\u5b9d\u77f3\u4e0d\u8db3"):(_.UserModel.inst.g1Money-=5,f.StoreModel.inst.refreshExchange())},r([v(u.default)],t.prototype,"list",void 0),r([v(cc.Label)],t.prototype,"txtTime",void 0),r([m],t)}(d.default);o.default=M,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/UI/UIMgr":"UIMgr","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel","./Store_ExchangeItem":"Store_ExchangeItem"}],Store_Money:[function(e,t,o){"use strict";cc._RF.push(t,"52c05tJwPVPkILtRe2UkX22","Store_Money");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Controller/TimeMgr"),c=e("../../../Define/EventId"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/i18n/i18nMgr"),d=e("../../../Framework/Res/ResKeeper"),h=e("../../../Framework/Utils/Utils"),f=e("../../../Model/StoreModel"),_=e("../../../Model/UserModel"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNode=null,t.icon2Node=null,t.btnAd=null,t.btnFree=null,t.btnTime=null,t.numTxt=null,t.num2Txt=null,t.timeTxt=null,t._h="\u65f6",t._m="\u5206",t._s="\u79d2",t._idx=0,t}return i(t,e),t.prototype.onEnable=function(){p.EVENT.on(c.EventId.ON_REFUSE_STORE,this.refresh,this)},t.prototype.onDisable=function(){p.EVENT.off(c.EventId.ON_REFUSE_STORE,this.refresh,this)},t.prototype.start=function(){this._h=u.i18nMgr.getLabel("h"),this._m=u.i18nMgr.getLabel("m"),this._s=u.i18nMgr.getLabel("s"),this.btnTime.node.active=!1,this.refresh(),this.numTxt.string="x"+f.StoreModel.inst.rMoneyNum,this.num2Txt.string="x"+f.StoreModel.inst.g1MoneyNum},t.prototype.setState=function(e){0==e?(this.btnAd.node.active=!0,this.btnFree.node.active=!1):1==e&&(this.btnAd.node.active=!1,this.btnFree.node.active=!0)},t.prototype.refresh=function(){this.setState(f.StoreModel.inst.money_free[this._idx])},t.prototype.onClickAd=function(){var e=this;a.default.inst.showAd("\u7cae\u8349\u8865\u7ed9\u8d27\u5e01",function(){e.onReward()})},t.prototype.onClickAd2=function(){var e=this;a.default.inst.showAd("\u9886\u53d6\u84dd\u5b9d\u77f3",function(){e.onReward2()})},t.prototype.onClickFree=function(){f.StoreModel.inst.money_free[this._idx]=0,f.StoreModel.inst.money_free=f.StoreModel.inst.money_free,this.onReward()},t.prototype.onReward=function(){l.AudioMgr.inst.playEffectByName("achievement");var e=this.iconNode.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,e,"RMoney",function(){_.UserModel.inst.rMoney+=f.StoreModel.inst.rMoneyNum}),f.StoreModel.inst.rMoney_time=s.default.inst.now(),this.refresh()},t.prototype.onReward2=function(){l.AudioMgr.inst.playEffectByName("achievement");var e=this.icon2Node.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_ICON,e,"G1Money",function(){_.UserModel.inst.g1Money+=f.StoreModel.inst.g1MoneyNum})},t.prototype.update=function(){var e=f.StoreModel.inst.getTime();e>0?(this.btnTime.node.active=!0,this.timeTxt.string=e>36e5?h.default.formatTime(e,"hh"+this._h+"mm"+this._m):e>6e4?h.default.formatTime(e,"mm"+this._m+"ss"+this._s):e>1e4?h.default.formatTime(e,"ss"+this._s):h.default.formatTime(e,"s"+this._s)):this.btnTime.node.active=!1},r([m(cc.Node)],t.prototype,"iconNode",void 0),r([m(cc.Node)],t.prototype,"icon2Node",void 0),r([m(cc.Button)],t.prototype,"btnAd",void 0),r([m(cc.Button)],t.prototype,"btnFree",void 0),r([m(cc.Button)],t.prototype,"btnTime",void 0),r([m(cc.Label)],t.prototype,"numTxt",void 0),r([m(cc.Label)],t.prototype,"num2Txt",void 0),r([m(cc.Label)],t.prototype,"timeTxt",void 0),r([g],t)}(d.default);o.default=v,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TimeMgr":"TimeMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/Utils/Utils":"Utils","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],Store:[function(e,t,o){"use strict";cc._RF.push(t,"c2b93fH+ihLE6farj1W0ILv","Store");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/UIBase"),s=e("../../../Framework/Utils/Utils"),c=e("../../../Framework/VM"),l=e("../../../Model/StoreModel"),p=e("../../../Model/UserModel"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtMoney=null,t.txtRMoney=null,t.txtG1Money=null,t.txtFreeTime=null,t.txtFree2Time=null,t.tipAni=null,t._aniPlay=!1,t}return i(t,e),t.prototype.onOpen=function(){this.tipAni.node.active=!1,this.updateMoney(p.UserModel.inst.money),this.updateRMoney(p.UserModel.inst.rMoney),this.updateG1Money(p.UserModel.inst.g1Money)},t.prototype.onEnable=function(){c.VM.bindPath("UserModel._money",this.updateMoney,this),c.VM.bindPath("UserModel._rMoney",this.updateRMoney,this),c.VM.bindPath("UserModel._g1Money",this.updateG1Money,this)},t.prototype.onDisable=function(){c.VM.unbindPath("UserModel._money",this.updateMoney,this),c.VM.unbindPath("UserModel._rMoney",this.updateRMoney,this),c.VM.unbindPath("UserModel._g1Money",this.updateG1Money,this)},t.prototype.updateMoney=function(e){this.txtMoney.string=""+e},t.prototype.updateRMoney=function(e){this.txtRMoney.string=""+e},t.prototype.updateG1Money=function(e){this.txtG1Money.string=""+e},t.prototype.onClickTipOpen=function(){this._aniPlay||(this.tipAni.node.active=!0,this.tipAni.play("TipOpen"))},t.prototype.onClickTipClose=function(){var e=this;this.tipAni.play("TipClose"),this.tipAni.once(cc.Animation.EventType.FINISHED,function(){e.tipAni.node.active=!1})},t.prototype.update=function(){var e=l.StoreModel.inst.getFreeTime();e>0?(this.txtFreeTime.string=s.default.formatTime(e,"hh:mm:ss"),this.txtFree2Time.string=s.default.formatTime(e,"hh:mm:ss")):(l.StoreModel.inst.refreshFree(),this.txtFreeTime.string="00:00:00",this.txtFree2Time.string="00:00:00")},r([h(cc.Label)],t.prototype,"txtMoney",void 0),r([h(cc.Label)],t.prototype,"txtRMoney",void 0),r([h(cc.Label)],t.prototype,"txtG1Money",void 0),r([h(cc.Label)],t.prototype,"txtFreeTime",void 0),r([h(cc.Label)],t.prototype,"txtFree2Time",void 0),r([h(cc.Animation)],t.prototype,"tipAni",void 0),r([d],t)}(a.default);o.default=f,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Framework/VM":"VM","../../../Model/StoreModel":"StoreModel","../../../Model/UserModel":"UserModel"}],TableMgr:[function(e,t,o){"use strict";cc._RF.push(t,"cb107J2UoNKnJqcdLyLleqf","TableMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TABLE=void 0;var s=e("../Framework/Sys/TeMap"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isLoaded=!1,t._iTotalLoad=0,t._iLoadNum=0,t._ConfigTable=new s.default,t._GlobalResInfo=new s.default,t._StageSkResInfo=new s.default,t._PlayerLevel=[],t}return i(t,e),t.prototype.loadTableRes=function(){return r(this,void 0,Promise,function(){var e=this;return a(this,function(){return this._isLoaded?[2]:(this._isLoaded=!0,[2,new Promise(function(t){e._loadTableRes(function(){return t()})})])})})},t.prototype.loadTable=function(e,t){var o=this;cc.assetManager.getBundle("Config").load(e,cc.JsonAsset,function(n,i){if(n)cc.error("failed to load "+e+": "+n);else if(t)try{t(null,i)}catch(r){cc.error("loadTable->",r+" res:"+e)}o._onInitOver()})},t.prototype._onInitOver=function(){this._iLoadNum>=this._iTotalLoad?console.error("\u8d44\u6e90\u52a0\u8f7d\u6570\u91cf\u5bf9\u4e0d\u4e0a\u4e86\uff0c\u6ce8\u610f\u4fee\u6539"):(this._iLoadNum++,this._iLoadNum>=this._iTotalLoad&&this._completeCallback&&this._completeCallback())},t.prototype._loadTableRes=function(e){this._completeCallback=e;var t=[];t.push(this._ConfigResData),this._iTotalLoad=t.length;for(var o=0;o<t.length;o++)t[o].apply(this)},t.prototype._ConfigResData=function(){var e=this;this.loadTable("/config",function(t,o){for(var n=Object.keys(o.json),i=0;i<n.length;i++){var r=o.json[n[i]];e._ConfigTable.set(n[i],r)}var a=e._ConfigTable.get("global");for(i=0;i<a.length;i++){var s=a[i];e._GlobalResInfo.set(s.key,s.value)}for(i=1;;i++){var c=e._ConfigTable.get("stage_sk_"+i);if(null==c)break;e._StageSkResInfo.set(i,c)}var l=e._ConfigTable.get("playerLevel");for(i=0;i<l.length;i++)s=l[i],e._PlayerLevel[s.num]=s.money})},t.prototype.getTable=function(e){return this._ConfigTable.get(e)},t.prototype.getTableInfo=function(e,t,o){var n=this.getTable(e);return n?n.find(function(e){return e[t]==o}):null},t.prototype.getGlobal=function(e){return this._GlobalResInfo.get(e)},t.prototype.getStageSk=function(){return this._StageSkResInfo},t.prototype.getPlayerLevel=function(){return this._PlayerLevel},t}(e("../Framework/Utils/Singleton").Singleton());o.TABLE=c.inst,cc._RF.pop()},{"../Framework/Sys/TeMap":"TeMap","../Framework/Utils/Singleton":"Singleton"}],TalentItem:[function(e,t,o){"use strict";cc._RF.push(t,"379f5UsuE9K0r0fQ43wyGeM","TalentItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.icon=null,t.txtName=null,t.nodeLevel=null,t.nodeLevelBar1=null,t.nodeLevelBar2=null,t._bar1=[],t._bar2=[],t}return i(t,e),t.prototype.setLevel=function(e,t){if(this._bar1.length<t){this._bar1=[this.nodeLevelBar1],this._bar2=[this.nodeLevelBar2];for(var o=0;o<t-1;o++){var n=cc.instantiate(this.nodeLevelBar1),i=cc.instantiate(this.nodeLevelBar2);n.setParent(this.nodeLevel),i.setParent(this.nodeLevel),this._bar1.push(n),this._bar2.push(i)}}for(o=0;o<t;o++)o<e?(this._bar1[o].opacity=255,this._bar1[o].width=this.nodeLevel.width/t-this.nodeLevelBar2.width):this._bar1[o].opacity=0;this._bar2[t-1].active=!1},r([c(cc.Animation)],t.prototype,"ani",void 0),r([c(cc.Sprite)],t.prototype,"icon",void 0),r([c(cc.Label)],t.prototype,"txtName",void 0),r([c(cc.Node)],t.prototype,"nodeLevel",void 0),r([c(cc.Node)],t.prototype,"nodeLevelBar1",void 0),r([c(cc.Node)],t.prototype,"nodeLevelBar2",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Talent:[function(e,t,o){"use strict";cc._RF.push(t,"9722f7zuX9Fj5WGeEuSSnTa","Talent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Controller/TableMgr"),c=e("../../../Define/Define"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/List/List"),u=e("../../../Framework/UI/UIFacade"),d=e("../../../Framework/UIBase"),h=e("../../../Framework/VM"),f=e("../../../Model/AchievementModel"),_=e("../../../Model/UserModel"),y=e("./TalentItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=null,t.icon=null,t.iconFrame=null,t.txtName=null,t.txtDesc=null,t.txtLevelUp=null,t.txtMoney=null,t.btnRefesh=null,t.btns=[],t._select=-1,t._map={},t._icons=[],t}return i(t,e),t.prototype.onOpen=function(){var e=this;l.AudioMgr.inst.playEffectByName("ui_open"),s.TABLE.getTable("talent").forEach(function(t){null==e._map[t.id]&&(e._map[t.id]=[]),e._map[t.id].push(t)}),cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(this.btnRefesh.getComponent(cc.Widget).top+=60,this.btnRefesh.getComponent(cc.Widget).updateAlignment()),this.list.numItems=Object.keys(this._map).length,this.loadBundleRes("Textures",Object.values(c.TALENT_ICON_URL),cc.SpriteFrame,function(t,o){e._icons=o,e.list.updateAll()}),this.refresh(),this.updateMoney(_.UserModel.inst.money)},t.prototype.onEnable=function(){h.VM.bindPath("UserModel._money",this.updateMoney,this)},t.prototype.onDisable=function(){h.VM.unbindPath("UserModel._money",this.updateMoney,this)},t.prototype.updateMoney=function(e){this.txtMoney.string=""+e},t.prototype.refresh=function(){this.txtName.string="",this.txtDesc.string="",this.icon.spriteFrame=null,this.iconFrame.node.active=!1,this.btns[0].node.active=!1,this.btns[1].node.active=!1,this.txtLevelUp.string=""+_.UserModel.inst.getTalentMoney()},t.prototype.onListRender=function(e,t){var o=this,n=Object.keys(this._map)[t],i=this._map[n],r=_.UserModel.inst.talent[n]||0,a=i.length,s=i[r]||i[0],c=e.getComponent(y.default);c.txtName.string=""+s.name,c.icon.spriteFrame=this._icons[s.iconIdx],c.setLevel(r,a),c.ani.node.active=this._select==t,e.targetOff(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,function(){l.AudioMgr.inst.playEffectByName("talentSelect"),o._select=t,o.txtName.string=s.name+"|Lv."+r,o.txtDesc.string=""+s.desc,o.txtLevelUp.string=""+_.UserModel.inst.getTalentMoney(),o.icon.spriteFrame=o._icons[s.iconIdx],o.iconFrame.node.active=!0,o.btns[0].node.active=r<a,o.btns[1].node.active=r>=a,o.list.updateAll(),c.ani.node.active=!0,c.ani.play()})},t.prototype.onClickLevelUp=function(){var e=_.UserModel.inst.getTalentMoney();if(_.UserModel.inst.money<e)return l.AudioMgr.inst.playEffectByName("ui_not"),void u.UIFacade.showToast("\u94dc\u94b1\u4e0d\u8db3");l.AudioMgr.inst.playEffectByName("talentLevelUp"),f.AchievementModel.inst.addPoint(4);var t=Object.keys(this._map)[this._select],o=this._map[t],n=_.UserModel.inst.talent[t]||0,i=o.length;_.UserModel.inst.talent[t]=n+=1,_.UserModel.inst.talent=_.UserModel.inst.talent,_.UserModel.inst.money-=e,this.btns[0].node.active=n<i,this.btns[1].node.active=n>=i;var r=o[n-1];this.txtName.string=r.name+"|Lv."+n,this.txtDesc.string=""+r.desc,this.onListRender(this.list.getItemByListId(this._select),this._select)},t.prototype.onClickRefreshTalent=function(){var e=this;0!=_.UserModel.inst.getTalentCount()?u.UIFacade.showConfirmAD("","\u4f60\u786e\u5b9a\u8981\u91cd\u7f6e\u5929\u8d4b\u5417\uff1f","\u786e\u5b9a","\u53d6\u6d88").then(function(){a.default.inst.showAd("\u83dc\u5355\u91cd\u7f6e\u5929\u8d4b",function(){var t=_.UserModel.inst.getTalentCount(),o=s.TABLE.getTable("talentLevelUpMoney"),n=0;o.forEach(function(e){e.num<t&&(n+=e.money)}),_.UserModel.inst.talent={},_.UserModel.inst.money+=n,e._select=-1,e.list.updateAll(),e.refresh()})}):u.UIFacade.showToast("\u8fd8\u6ca1\u70b9\u5929\u8d4b")},r([v(p.default)],t.prototype,"list",void 0),r([v(cc.Sprite)],t.prototype,"icon",void 0),r([v(cc.Sprite)],t.prototype,"iconFrame",void 0),r([v(cc.Label)],t.prototype,"txtName",void 0),r([v(cc.Label)],t.prototype,"txtDesc",void 0),r([v(cc.Label)],t.prototype,"txtLevelUp",void 0),r([v(cc.Label)],t.prototype,"txtMoney",void 0),r([v(cc.Button)],t.prototype,"btnRefesh",void 0),r([v(cc.Button)],t.prototype,"btns",void 0),r([m],t)}(d.default);o.default=M,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TableMgr":"TableMgr","../../../Define/Define":"Define","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/List/List":"List","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/VM":"VM","../../../Model/AchievementModel":"AchievementModel","../../../Model/UserModel":"UserModel","./TalentItem":"TalentItem"}],TaskModel:[function(e,t,o){"use strict";cc._RF.push(t,"31efa3j0yFF/4U+8ydGS806","TaskModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.TaskModel=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._taskData=null,t}return i(t,e),Object.defineProperty(t.prototype,"TaskData",{get:function(){return this._taskData},set:function(e){this._taskData=e},enumerable:!1,configurable:!0}),t}(e("../Framework/Utils/Singleton").Singleton());o.TaskModel=r,cc._RF.pop()},{"../Framework/Utils/Singleton":"Singleton"}],Task:[function(e,t,o){"use strict";cc._RF.push(t,"6c7e7q3PxVKxox4RbtjDIHz","Task");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._index=0,t.steps=[],t}return i(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(e){this._index=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetNode",{get:function(){return this._targetNode},set:function(e){this._targetNode=e},enumerable:!1,configurable:!0}),r([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],TeMap:[function(e,t,o){"use strict";cc._RF.push(t,"447f2WtSARLxbL0VCqFrwvW","TeMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this._data={},e&&(this._data=e)}return e.prototype.has=function(e){return null!=e&&null!=e&&this._data.hasOwnProperty(e.toString())},e.prototype.get=function(e){return null==e||null==e?null:this._data[e.toString()]},e.prototype.set=function(e,t){this._data[e.toString()]=t},Object.defineProperty(e.prototype,"keys",{get:function(){return Object.keys(this._data)},enumerable:!1,configurable:!0}),e.prototype.get_keys=function(){return this.keys},e.prototype.del=function(e){delete this._data[e.toString()]},e.prototype.rand=function(){var e=this.keys,t=e[Math.floor(Math.random()*e.length)];return this.get(t)},e.prototype.clear=function(){this._data={}},e.prototype.getLength=function(){return this.keys.length},e}();o.default=n,cc._RF.pop()},{}],TestMonster:[function(e,t,o){"use strict";cc._RF.push(t,"06ac1QHXJ1JF6TE6Xlkw3HT","TestMonster");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Controller/LayerMgr"),s=e("../Controller/TableMgr"),c=e("../Define/EventId"),l=e("../Framework/Event/EventMgr"),p=e("../Framework/List/List"),u=e("../Framework/List/ListItem"),d=e("../Game/Component/MonsterComponent"),h=e("../Game/Monster/Weapon/MonsterWeapon"),f=e("../Model/GameModel"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.monster=[],t.sprMaterial=null,t.spineMaterial=null,t.ebScale=null,t.list=null,t._game=f.GameModel.inst,t._monsterList=[],t._isStop=!1,t._isOpen=!1,t}return i(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){l.EVENT.on(c.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.on(c.EventId.ON_GAME_OVER,this.gameOver,this)},t.prototype.onDisable=function(){l.EVENT.off(c.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.off(c.EventId.ON_GAME_OVER,this.gameOver,this)},t.prototype.gameLoaded=function(){this.list.numItems=this.monster.length},t.prototype.gameOver=function(){for(;this._monsterList.length>0;)this._monsterList.shift().destroy()},t.prototype.onListRender=function(e,t){var o=this;e.getComponent(u.default).title.getComponent(cc.Label).string=this.monster[t].name,e.targetOff(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,function(){var e=s.TABLE.getTable("stage_1")[0];(e=Object.assign({},e)).scale=Number(o.ebScale.string)||1;var n=e.mid,i=cc.instantiate(o.monster[t]),r=cc.math.randomRange(e.radMin,e.radMax),c=new cc.Vec2(r,0),l=cc.math.randomRange(0,2*Math.PI);c.rotateSelf(l),c.x+=f.GameModel.inst.player.node.x,c.y+=f.GameModel.inst.player.node.y,i.setPosition(c),i.setSiblingIndex(n),i.setParent(a.LayerMgr.inst.RoleLayer);var p=i.getComponent(d.default);null==p&&(p=i.addComponent(d.default));var u=i.getComponent(h.default);null!=u&&(u.level=1),p.setMaterials([o.sprMaterial,o.spineMaterial]),p.updateMonster(e,0),p.recycle=function(){o._game.monsterList.splice(o._game.monsterList.indexOf(p),1),o._monsterList.push(p.node),p.node.removeFromParent()},o._game.monsterList.push(p),i.opacity=0,cc.Tween.stopAllByTarget(i),cc.tween(i).to(.2,{opacity:255}).start()})},t.prototype.onClickStop=function(){var e=Number(s.TABLE.getGlobal("StageMonsterMax"));f.GameModel.inst.monster<e?f.GameModel.inst.monster+=e:f.GameModel.inst.monster-=e},t.prototype.onClickOpen=function(){cc.tween(this.node).to(.2,{x:this._isOpen?820:620}).start(),this._isOpen=!this._isOpen},r([g(cc.Prefab)],t.prototype,"monster",void 0),r([g(cc.Material)],t.prototype,"sprMaterial",void 0),r([g(cc.Material)],t.prototype,"spineMaterial",void 0),r([g(cc.EditBox)],t.prototype,"ebScale",void 0),r([g(p.default)],t.prototype,"list",void 0),r([y],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../Controller/LayerMgr":"LayerMgr","../Controller/TableMgr":"TableMgr","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/List/List":"List","../Framework/List/ListItem":"ListItem","../Game/Component/MonsterComponent":"MonsterComponent","../Game/Monster/Weapon/MonsterWeapon":"MonsterWeapon","../Model/GameModel":"GameModel"}],TestWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"289eem1B3dA8KFSpNxbRUTy","TestWeapon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Define/Define"),s=e("../Define/EventId"),c=e("../Define/UIDefs"),l=e("../Framework/Event/EventMgr"),p=e("../Framework/List/List"),u=e("../Framework/List/ListItem"),d=e("../Framework/UI/UIMgr"),h=e("../Model/GameModel"),f=e("../Model/WeaponModel"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=null,t.ebEquip=null,t._isOpen=!1,t}return i(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.on(s.EventId.ON_GAME_OVER,this.gameOver,this),l.EVENT.on(s.EventId.ON_GAME_SKILL_REFUSE,this.onListUpdate,this)},t.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.off(s.EventId.ON_GAME_OVER,this.gameOver,this),l.EVENT.off(s.EventId.ON_GAME_SKILL_REFUSE,this.onListUpdate,this)},t.prototype.gameLoaded=function(){var e=Object.keys(f.WeaponModel.inst.weaponList);this.list.numItems=e.length},t.prototype.gameOver=function(){this.list.numItems=0},t.prototype.onListUpdate=function(){if(null==this.list.numItems){var e=Object.keys(f.WeaponModel.inst.weaponList);this.list.numItems=e.length}else this.list.updateAll()},t.prototype.onListRender=function(e,t){var o,n=e.getComponent(u.default).title.getComponent(cc.Label),i=Object.keys(f.WeaponModel.inst.weaponList)[t],r=(null===(o=f.WeaponModel.inst.weaponInfos[i])||void 0===o?void 0:o.getLevel())||0;n.string=a.SKILL_NAME[i]+" | Lv."+r,e.targetOff(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,function(){var e,t=(null===(e=f.WeaponModel.inst.weaponInfos[i])||void 0===e?void 0:e.getLevel())||0;l.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP,i,t+1)})},t.prototype.onClickResult=function(){h.GameModel.inst.isFinished=!0,l.EVENT.emit(s.EventId.ON_GAME_RESULT)},t.prototype.onClickLevelUp=function(){h.GameModel.inst.level++,f.WeaponModel.inst.skillPoint++},t.prototype.onClickGM=function(){a.Config.debug=!a.Config.debug},t.prototype.onClickEquip=function(){d.default.inst.open(c.UIType.FightEquip,this.ebEquip.string)},t.prototype.onClickOpen=function(){cc.tween(this.node).to(.2,{x:this._isOpen?-100:100}).start(),this._isOpen=!this._isOpen},r([g(p.default)],t.prototype,"list",void 0),r([g(cc.EditBox)],t.prototype,"ebEquip",void 0),r([y],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../Define/Define":"Define","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/List/List":"List","../Framework/List/ListItem":"ListItem","../Framework/UI/UIMgr":"UIMgr","../Model/GameModel":"GameModel","../Model/WeaponModel":"WeaponModel"}],TimeMgr:[function(e,t,o){"use strict";cc._RF.push(t,"b6d081+/f1AwbCsWJal8mLb","TimeMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Framework/Utils/Singleton"),a=e("./NativeMgr"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.init=function(e){this._localtime=Date.now(),this._webtime=a.default.inst.getWebTime(),this._webtime?(e(!0),this._difference=this._webtime-this._localtime,cc.game.on(cc.game.EVENT_SHOW,this._gameShow,this),cc.game.on(cc.game.EVENT_HIDE,this._gameHide,this)):e(!1)},t.prototype.now=function(){return Date.now()+this._difference},t.prototype._gameShow=function(){var e=Date.now()-this._lastLocaltime,t=a.default.inst.getActivityTime()-this._lastActivity-e;Math.abs(t)>10&&(this._difference+=t)},t.prototype._gameHide=function(){this._lastLocaltime=Date.now(),this._lastActivity=a.default.inst.getActivityTime()},t.prototype.isSameDay=function(e,t){return new Date(e).setHours(0,0,0,0)===new Date(t).setHours(0,0,0,0)},t.prototype.getCurToZero=function(){return new Date(this.now()).setHours(24,0,0,0)-this.now()},t}(r.Singleton());o.default=s,cc._RF.pop()},{"../Framework/Utils/Singleton":"Singleton","./NativeMgr":"NativeMgr"}],UIBase:[function(e,t,o){"use strict";cc._RF.push(t,"e0585CZW5BBgK519LYoyYnN","UIBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.UIShowTypes=void 0;var a,s=e("../Define/UIDefs"),c=e("./UI/UIMgr"),l=e("./Res/ResKeeperAddition"),p=cc._decorator,u=p.ccclass,d=p.property;(function(e){e[e.UIFullScreen=0]="UIFullScreen",e[e.UIAddition=1]="UIAddition",e[e.UISingle=2]="UISingle"})(a=o.UIShowTypes||(o.UIShowTypes={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showType=a.UISingle,t.quickClose=!0,t.showLayer=s.LayerType.Pop,t.maskOpacity=255,t._para=null,t.isPlayOpenAni=!1,t.UIid=0,t}return i(t,e),t.prototype.close=function(){c.default.inst.close(this.uiType)},t.prototype.init=function(e,t){this._para=Object.assign({},e),this.uiType=t},t.prototype.onOpen=function(){},t.prototype.onOpenAniOver=function(){},t.prototype.onClose=function(){},t.prototype.onTop=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o]},r([d({type:cc.Enum(a),displayName:"\u663e\u793a\u7c7b\u578b"})],t.prototype,"showType",void 0),r([d()],t.prototype,"quickClose",void 0),r([d({type:cc.Enum(s.LayerType)})],t.prototype,"showLayer",void 0),r([d()],t.prototype,"maskOpacity",void 0),r([u],t)}(l.default);o.default=h,cc._RF.pop()},{"../Define/UIDefs":"UIDefs","./Res/ResKeeperAddition":"ResKeeperAddition","./UI/UIMgr":"UIMgr"}],UICloseAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"0a83aI6odRAhpOnBMcQ6/en","UICloseAnimation");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),r([s],t)}(cc.Animation));o.default=c,cc._RF.pop()},{}],UIDefs:[function(e,t,o){"use strict";var n;cc._RF.push(t,"cfbd74GR/NOr782467+09nO","UIDefs"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIDataInfo=o.UIType=o.LayerType=void 0,function(e){e[e.GUI=0]="GUI",e[e.Pop=1]="Pop",e[e.Tip=2]="Tip",e[e.Top=3]="Top"}(o.LayerType||(o.LayerType={})),function(e){e[e.$Start=0]="$Start",e[e.UIMain=1]="UIMain",e[e.UIGame=2]="UIGame",e[e.UIGameB=3]="UIGameB",e[e.Confirm=4]="Confirm",e[e.ConfirmAD=5]="ConfirmAD",e[e.Loading=6]="Loading",e[e.Setting=7]="Setting",e[e.Stop=8]="Stop",e[e.GameStart=9]="GameStart",e[e.GameOver=10]="GameOver",e[e.GamePause=11]="GamePause",e[e.AgeTips=12]="AgeTips",e[e.StoreReview=13]="StoreReview",e[e.Talent=14]="Talent",e[e.StageMap=15]="StageMap",e[e.StageBox=16]="StageBox",e[e.StageBoxTips=17]="StageBoxTips",e[e.SelectWeapon=18]="SelectWeapon",e[e.Magnet=19]="Magnet",e[e.Supply=20]="Supply",e[e.GodMenu=21]="GodMenu",e[e.GodMenuInfo=22]="GodMenuInfo",e[e.GodMenuNew=23]="GodMenuNew",e[e.GodMenuView=24]="GodMenuView",e[e.GodWeaponReward=25]="GodWeaponReward",e[e.EliteBox=26]="EliteBox",e[e.FightEquip=27]="FightEquip",e[e.FightEquipTips=28]="FightEquipTips",e[e.FightEquipGuide=29]="FightEquipGuide",e[e.FightEquipGuideB=30]="FightEquipGuideB",e[e.Achievement=31]="Achievement",e[e.XiuLian=32]="XiuLian",e[e.XiuLianTip=33]="XiuLianTip",e[e.XiuLianAD=34]="XiuLianAD",e[e.XiuLianResult=35]="XiuLianResult",e[e.DrawSkill=36]="DrawSkill",e[e.GetMoney=37]="GetMoney",e[e.GetG1Money=38]="GetG1Money",e[e.Store=39]="Store",e[e.StoreB=40]="StoreB",e[e.StoreExchangeInfo=41]="StoreExchangeInfo",e[e.$End=42]="$End"}(n=o.UIType||(o.UIType={}));var i=function(){function e(e,t,o,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1),this.preventTouch=!0,this.cache=!1,this.uiType=e,this.uiBundle=t,this.uiPath=o,this.preventTouch=n,this.cache=i}return Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.uiPath},enumerable:!1,configurable:!0}),e.getUIData=function(e){for(var t=0;t<this._uiDataList.length;++t)if(this._uiDataList[t].uiType==e)return this._uiDataList[t];return null},e._uiDataList=[new e(n.Loading,"Prefabs","/Loading"),new e(n.UIMain,"Prefabs","/UIMain",!1),new e(n.UIGame,"Prefabs","/UIGame",!1),new e(n.UIGameB,"Prefabs","/UIGameB",!1),new e(n.StoreReview,"Prefabs","/UIPrefab/Pop/StoreReview"),new e(n.AgeTips,"Prefabs","/UIPrefab/Pop/AgeTips"),new e(n.Setting,"Prefabs","/UIPrefab/Setting"),new e(n.Stop,"Prefabs","/UIPrefab/Stop"),new e(n.Confirm,"Prefabs","/UIPrefab/Confirm"),new e(n.ConfirmAD,"Prefabs","/UIPrefab/ConfirmAD"),new e(n.GameStart,"Prefabs","/UIPrefab/GameStart"),new e(n.GamePause,"Prefabs","/UIPrefab/GamePause"),new e(n.GameOver,"Prefabs","/UIPrefab/GameOver"),new e(n.Talent,"Prefabs","/UIPrefab/Talent"),new e(n.StageMap,"Prefabs","/UIPrefab/StageMap"),new e(n.StageBox,"Prefabs","/UIPrefab/StageBox"),new e(n.StageBoxTips,"Prefabs","/UIPrefab/StageBoxTips"),new e(n.SelectWeapon,"Prefabs","/UIPrefab/SelectWeapon"),new e(n.Magnet,"Prefabs","/UIPrefab/Magnet"),new e(n.Supply,"Prefabs","/UIPrefab/Supply"),new e(n.GodMenu,"Prefabs","/UIPrefab/GodMenu"),new e(n.GodMenuInfo,"Prefabs","/UIPrefab/GodMenuInfo"),new e(n.GodMenuNew,"Prefabs","/UIPrefab/GodMenuNew"),new e(n.GodMenuView,"Prefabs","/UIPrefab/GodMenuView"),new e(n.GodWeaponReward,"Prefabs","/UIPrefab/GodWeaponReward"),new e(n.GetMoney,"Prefabs","/UIPrefab/GetMoney"),new e(n.GetG1Money,"Prefabs","/UIPrefab/GetG1Money"),new e(n.EliteBox,"Prefabs","/UIPrefab/EliteBox"),new e(n.FightEquip,"Prefabs","/UIPrefab/FightEquip"),new e(n.FightEquipTips,"Prefabs","/UIPrefab/FightEquipTips"),new e(n.FightEquipGuide,"Prefabs","/UIPrefab/FightEquipGuide"),new e(n.FightEquipGuideB,"Prefabs","/UIPrefab/FightEquipGuideB"),new e(n.DrawSkill,"Prefabs","/UIPrefab/DrawSkill"),new e(n.Achievement,"Prefabs","/UIPrefab/Achievement"),new e(n.XiuLian,"Prefabs","/UIPrefab/XiuLian"),new e(n.XiuLianTip,"Prefabs","/UIPrefab/XiuLianTip"),new e(n.XiuLianAD,"Prefabs","/UIPrefab/XiuLianAD"),new e(n.XiuLianResult,"Prefabs","/UIPrefab/XiuLianResult"),new e(n.Store,"Prefabs","/UIPrefab/Store"),new e(n.StoreB,"Prefabs","/UIPrefab/StoreB"),new e(n.StoreExchangeInfo,"Prefabs","/UIPrefab/StoreExchangeInfo")],e}();o.UIDataInfo=i,cc._RF.pop()},{}],UIFacade:[function(e,t,o){"use strict";cc._RF.push(t,"16e3aBpWmhDeZYUzLRkyJpM","UIFacade");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UIFacade=void 0;var r=e("./UIMgr"),a=e("../../Define/UIDefs"),s=function(){function e(){}return e.showToast=function(e){r.default.inst.showToast(e)},e.showConfirm=function(e,t,o,s,c,l,p){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(n,i){r.default.inst.open(a.UIType.Confirm,{text:[e,t,o,s],dot:[c,l],close:p,confirm:o?n:null,cancel:s?i:null})})]})})},e.showConfirmAD=function(e,t,o,s,c,l,p){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(n,i){r.default.inst.open(a.UIType.ConfirmAD,{text:[e,t,o,s],dot:[c,l],close:p,confirm:o?n:null,cancel:s?i:null})})]})})},e}();o.UIFacade=s,cc._RF.pop()},{"../../Define/UIDefs":"UIDefs","./UIMgr":"UIMgr"}],UIGame:[function(e,t,o){"use strict";cc._RF.push(t,"73818IatEVFkaM15Krp5VHS","UIGame");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../../Controller/AdMgr"),c=e("../../Controller/NativeMgr"),l=e("../../Define/Define"),p=e("../../Define/EventId"),u=e("../../Define/UIDefs"),d=e("../../Framework/Event/EventMgr"),h=e("../../Framework/List/List"),f=e("../../Framework/UI/UIMgr"),_=e("../../Framework/UIBase"),y=e("../../Framework/Utils/Utils"),g=e("../../Framework/VM"),m=e("../../Guide/GodGuide"),v=e("../../Model/GameModel"),M=e("../../Model/MagnetModel"),b=e("../../Model/WeaponModel"),E=e("../Items/SkillDrawUI"),I=e("../Items/SkillItem"),O=e("../Items/SkillUI"),S=e("./Event/FightEquipItem"),w=cc._decorator,R=w.ccclass,P=w.property;(function(e){e[e.equip=0]="equip",e[e.skill=1]="skill"})(a||(a={}));var A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.equipItem=null,t.skillItem=null,t.listSkillDraw=null,t.listSkill=null,t.renderSkill=null,t.txtMonster=null,t.txtMoney=null,t.txtWave=null,t.txtTime=null,t.txtLevel=null,t.pbExp=null,t.spExp=null,t.btnStop=null,t.btnFightEquip=null,t.Magnet=null,t.MagnetSpine=null,t.MagnetSprite=null,t.MagnetImgs=[],t.MagnetArrow=null,t._icons=[],t._first=!1,t._skills=[],t}return i(t,e),t.prototype.onOpen=function(){var e=this;this._first=m.default.inst.node.active,this.listSkill.numItems=10,this.spExp.node.active=!1,cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(this.btnStop.getComponent(cc.Widget).top+=60,this.btnStop.getComponent(cc.Widget).updateAlignment()),this.addItemPool(a.equip,this.equipItem),this.addItemPool(a.skill,this.skillItem),this.updateMonster(v.GameModel.inst.monster),this.updateMoney(v.GameModel.inst.money),this.updateWave(v.GameModel.inst.wave),this.updateTime(v.GameModel.inst.time),this.updateExp(v.GameModel.inst.exp),this.updateLevel(v.GameModel.inst.level),this.loadBundleRes("Textures",Object.values(l.SKILL_ICON_URL),cc.SpriteFrame,function(t,o){e._icons=o,e.listSkill.updateAll()}),l.Config.isAdBanner&&s.default.inst.showAdBanner("\u6218\u6597\u9875banner")},t.prototype.onClose=function(){l.Config.isAdBanner&&s.default.inst.removeAdBanner()},t.prototype.onLoad=function(){g.VM.bindPath("GameModel._monster",this.updateMonster,this),g.VM.bindPath("GameModel._money",this.updateMoney,this),g.VM.bindPath("GameModel._wave",this.updateWave,this),g.VM.bindPath("GameModel._time",this.updateTime,this),g.VM.bindPath("GameModel._exp",this.updateExp,this),g.VM.bindPath("GameModel._level",this.updateLevel,this),d.EVENT.on(p.EventId.ON_UI_GAME_FLY_EQUIP,this.onFlyEquip,this),d.EVENT.on(p.EventId.ON_UI_GAME_FLY_SKILL,this.onFlySkill,this),d.EVENT.on(p.EventId.ON_GAME_SKILL_REFUSE,this.onListSkillUpdate,this),d.EVENT.on(p.EventId.ON_GAME_DRAW_SKILL_REFUSE,this.onListSkillDrawUpdate,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),g.VM.unbindPath("GameModel._monster",this.updateMonster,this),g.VM.unbindPath("GameModel._money",this.updateMoney,this),g.VM.unbindPath("GameModel._wave",this.updateWave,this),g.VM.unbindPath("GameModel._time",this.updateTime,this),g.VM.unbindPath("GameModel._exp",this.updateExp,this),g.VM.unbindPath("GameModel._level",this.updateLevel,this),d.EVENT.off(p.EventId.ON_UI_GAME_FLY_EQUIP,this.onFlyEquip,this),d.EVENT.off(p.EventId.ON_UI_GAME_FLY_SKILL,this.onFlySkill,this),d.EVENT.off(p.EventId.ON_GAME_SKILL_REFUSE,this.onListSkillUpdate,this),d.EVENT.off(p.EventId.ON_GAME_DRAW_SKILL_REFUSE,this.onListSkillDrawUpdate,this)},t.prototype.onListSkillUpdate=function(e){var t=this,o=Object.keys(b.WeaponModel.inst.weaponInfos),n=Object.keys(b.WeaponModel.inst.weaponList);this._skills.length=0,o.forEach(function(e){return n.includes(e)&&t._skills.push(e)}),this._skills.length<10?this.listSkill.numItems=10:this._skills.length>10&&this.listSkill.numItems!=this._skills.length&&(this.listSkill.numItems=this._skills.length),this.listSkill.updateItem(this._skills.indexOf(e))},t.prototype.onListSkillDrawUpdate=function(){var e=Object.keys(b.WeaponModel.inst.weaponDrawCom);this.listSkillDraw.numItems!=e.length?this.listSkillDraw.numItems=e.length:this.listSkillDraw.updateAll()},t.prototype.onListSkillRender=function(e,t){var o,n=this._skills[t],i=e.getComponent(O.default);if(null==n)return i.icon.spriteFrame=null,void(i.txtLevel.string="");var r=(null===(o=b.WeaponModel.inst.weaponInfos[n])||void 0===o?void 0:o.getLevel())||0;i.icon.spriteFrame=this._icons[Object.keys(l.SKILL_ICON_URL).indexOf(n)],i.txtLevel.string="Lv."+r,null==i.render.renderTarget&&(i.render.target=this.listSkill.content,i.render.renderTarget=this.renderSkill)},t.prototype.onListSkillDrawRender=function(e,t){var o=Object.keys(b.WeaponModel.inst.weaponDrawCom),n=b.WeaponModel.inst.weaponDrawCom[o[t]],i=e.getComponent(E.default),r=n.getDrawInfo();i.setDraw(r.points,r.colors,r.dur)},t.prototype.updateMonster=function(e){this.txtMonster.string=""+e},t.prototype.updateMoney=function(e){this.txtMoney.string=""+e},t.prototype.updateWave=function(e){this.txtWave.string="\u7b2c"+e+"/"+v.GameModel.inst.waveMax+"\u6ce2"},t.prototype.updateTime=function(e){this.txtTime.string=""+y.default.formatTime(1e3*e,"mm:ss")},t.prototype.updateExp=function(e){var t=this;this.spExp.node.active=!0,cc.Tween.stopAllByTarget(this.pbExp),cc.tween(this.pbExp).to(.2,{progress:e/v.GameModel.inst.getLevelExp()}).call(function(){t.spExp.node.active=!1}).start()},t.prototype.updateLevel=function(e){this.txtLevel.string=""+(e+1)},t.prototype.onFlyNode=function(e,t,o,n,i){var r=f.default.inst.topLayer,a=r.convertToNodeSpaceAR(t),s=r.convertToNodeSpaceAR(o),c=(null==i?void 0:i.speed)||1e3,l=(null==i?void 0:i.scale)||.8,p=(null==i?void 0:i.scale2)||.5,u=(null==i?void 0:i.scale3)||.4,d=(null==i?void 0:i.delay)||.5;e.setScale(l),e.setParent(r),e.setPosition(a);var h=a.sub(s),_=h.len()/c,y=Math.random(),g=a,m=cc.v2(a.x-.4*h.x+y*h.len()-h.len()/2,a.y-.4*h.y+y*h.len()-h.len()/2),v=s;e.opacity=0,cc.tween(e).to(.1,{opacity:255}).start(),cc.tween(e).delay(d).parallel(cc.tween().to(_,{scale:p},{easing:"sineIn"}),cc.tween().bezierTo(_,g,m,v)).to(.3,{scale:u,opacity:0}).call(n).start()},t.prototype.onFlyEquip=function(e,t,o,n){var i=this,r=this.get(a.equip);r.getComponent(S.default).setData(t);var s=this.btnFightEquip.node.convertToWorldSpaceAR(cc.Vec2.ZERO);this.onFlyNode(r,e,s,function(){i.put(a.equip,r),o&&o()},n)},t.prototype.onFlySkill=function(e,t,o,n){var i=this,r=this._skills.indexOf(t),s=this.get(a.skill);s.getComponent(I.default).setIcon(t);var c,l=this.listSkill.getItemByListId(r);c=null==l?(l=this.listSkill.node).convertToWorldSpaceAR(cc.v2(l.width/2,0)):l.convertToWorldSpaceAR(cc.Vec2.ZERO),this.onFlyNode(s,e,c,function(){i.put(a.skill,s),o&&o()},n)},t.prototype.onClickStop=function(){v.GameModel.inst.isGuide||v.GameModel.inst.isPause||(d.EVENT.emit(p.EventId.ON_GAME_PAUSE),f.default.inst.open(u.UIType.Stop))},t.prototype.onClickFight=function(){v.GameModel.inst.isGuide||v.GameModel.inst.isPause||(d.EVENT.emit(p.EventId.ON_GAME_PAUSE),f.default.inst.open(u.UIType.FightEquip))},t.prototype.onClickMagnet=function(){v.GameModel.inst.isGuide||v.GameModel.inst.isPause||(d.EVENT.emit(p.EventId.ON_GAME_PAUSE),f.default.inst.open(u.UIType.Magnet))},t.prototype.onClickUserFeedback=function(){c.default.inst.openUserFeedback()},t.prototype.onClickMoney=function(){l.Config.debug&&f.default.inst.open(u.UIType.DrawSkill)},t.prototype.checkMagnet=function(){if(this._first&&1==v.GameModel.inst.stage&&v.GameModel.inst.wave<3)return this.Magnet.active=!1,void(this.MagnetArrow.active=!1);M.MagnetModel.inst.isActive()?(this.Magnet.active=!1,this.MagnetArrow.active=!1):(this.Magnet.active=!0,this.MagnetArrow.active=0==M.MagnetModel.inst.count&&!m.default.inst.node.active,this.MagnetSpine.node.active=!1,this.MagnetSprite.spriteFrame!=this.MagnetImgs[1]&&(this.MagnetSprite.spriteFrame=this.MagnetImgs[1]))},t.prototype.update=function(e){this.checkMagnet(e)},r([P(cc.Prefab)],t.prototype,"equipItem",void 0),r([P(cc.Prefab)],t.prototype,"skillItem",void 0),r([P(h.default)],t.prototype,"listSkillDraw",void 0),r([P(h.default)],t.prototype,"listSkill",void 0),r([P(cc.Node)],t.prototype,"renderSkill",void 0),r([P(cc.Label)],t.prototype,"txtMonster",void 0),r([P(cc.Label)],t.prototype,"txtMoney",void 0),r([P(cc.Label)],t.prototype,"txtWave",void 0),r([P(cc.Label)],t.prototype,"txtTime",void 0),r([P(cc.Label)],t.prototype,"txtLevel",void 0),r([P(cc.ProgressBar)],t.prototype,"pbExp",void 0),r([P(sp.Skeleton)],t.prototype,"spExp",void 0),r([P(cc.Button)],t.prototype,"btnStop",void 0),r([P(cc.Button)],t.prototype,"btnFightEquip",void 0),r([P({type:cc.Node,tooltip:"\u78c1\u5438\u6548\u5e94"})],t.prototype,"Magnet",void 0),r([P({type:sp.Skeleton,tooltip:"\u78c1\u5438\u6548\u5e94Spine"})],t.prototype,"MagnetSpine",void 0),r([P({type:cc.Sprite,tooltip:"\u78c1\u5438\u6548\u5e94\u56fe\u7247"})],t.prototype,"MagnetSprite",void 0),r([P({type:[cc.SpriteFrame],tooltip:"\u78c1\u5438\u6548\u5e94\u66ff\u6362\u56fe\u7247"})],t.prototype,"MagnetImgs",void 0),r([P({type:cc.Node,tooltip:"\u78c1\u5438\u6548\u5e94\u7bad\u5934"})],t.prototype,"MagnetArrow",void 0),r([R],t)}(_.default);o.default=A,cc._RF.pop()},{"../../Controller/AdMgr":"AdMgr","../../Controller/NativeMgr":"NativeMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../../Framework/Event/EventMgr":"EventMgr","../../Framework/List/List":"List","../../Framework/UI/UIMgr":"UIMgr","../../Framework/UIBase":"UIBase","../../Framework/Utils/Utils":"Utils","../../Framework/VM":"VM","../../Guide/GodGuide":"GodGuide","../../Model/GameModel":"GameModel","../../Model/MagnetModel":"MagnetModel","../../Model/WeaponModel":"WeaponModel","../Items/SkillDrawUI":"SkillDrawUI","../Items/SkillItem":"SkillItem","../Items/SkillUI":"SkillUI","./Event/FightEquipItem":"FightEquipItem"}],UIMain:[function(e,t,o){"use strict";cc._RF.push(t,"64dc2vxx9NF7rh3Un1/4iJ5","UIMain");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../../Controller/NativeMgr"),c=e("../../Controller/TimeMgr"),l=e("../../Define/Define"),p=e("../../Define/EventId"),u=e("../../Define/RedDotKey"),d=e("../../Define/UIDefs"),h=e("../../Framework/Audio/AudioMgr"),f=e("../../Framework/Event/EventMgr"),_=e("../../Framework/Event/RedDot"),y=e("../../Framework/UI/UIFacade"),g=e("../../Framework/UI/UIMgr"),m=e("../../Framework/UIBase"),v=e("../../Framework/VM"),M=e("../../Guide/GodGuide"),b=e("../../Model/AchievementModel"),E=e("../../Model/GameModel"),I=e("../../Model/GodBackModel"),O=e("../../Model/GodPetModel"),S=e("../../Model/GodRideModel"),w=e("../../Model/GodSkinModel"),R=e("../../Model/GodWeaponModel"),P=e("../../Model/StoreModel"),A=e("../../Model/UserModel"),T=e("../../Model/XiuLianModel"),L=e("../Items/IconItem"),C=cc._decorator,B=C.ccclass,k=C.property;(function(e){e[e.icon=0]="icon"})(a||(a={}));var D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconItem=null,t.txtMoney=null,t.txtRMoney=null,t.txtG1Money=null,t.btnSetting=null,t.btnGodWeaponsReward=null,t.Money=null,t.RMoney=null,t.G1Money=null,t.Achievement=null,t.GodRide=null,t.GodWeaponReward=null,t.Talent=null,t.XiuLian=null,t.GodRideBan=null,t.GodTalentBan=null,t.GodXiulianBan=null,t.GodStoreBan=null,t}return i(t,e),t.prototype.onOpen=function(){M.default.inst.run(),cc.sys.platform==cc.sys.BYTEDANCE_GAME&&(this.btnSetting.getComponent(cc.Widget).top+=60,this.btnSetting.getComponent(cc.Widget).updateAlignment(),this.btnGodWeaponsReward.getComponent(cc.Widget).top+=60,this.btnGodWeaponsReward.getComponent(cc.Widget).updateAlignment()),0==A.UserModel.inst.isRealNameReward&&s.default.inst.checkDeviceRealName(),b.AchievementModel.inst.checkGet(),this.addItemPool(a.icon,this.iconItem),this.updateStage(A.UserModel.inst.curStage),this.updateMoney(A.UserModel.inst.money),this.updateRMoney(A.UserModel.inst.rMoney),this.updateG1Money(A.UserModel.inst.g1Money)},t.prototype.onLoad=function(){v.VM.bindPath("UserModel._money",this.updateMoney,this),v.VM.bindPath("UserModel._rMoney",this.updateRMoney,this),v.VM.bindPath("UserModel._g1Money",this.updateG1Money,this),v.VM.bindPath("UserModel._curStage",this.updateStage,this),f.EVENT.on(p.EventId.ON_GAME_START,this.gameStart,this),f.EVENT.on(p.EventId.ON_GAME_OVER,this.gameOver,this),f.EVENT.on(p.EventId.ON_UI_MAIN_FLY_ICON,this.onFlyIcon,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),v.VM.unbindPath("UserModel._money",this.updateMoney,this),v.VM.unbindPath("UserModel._rMoney",this.updateRMoney,this),v.VM.unbindPath("UserModel._g1Money",this.updateG1Money,this),v.VM.unbindPath("UserModel._curStage",this.updateStage,this),f.EVENT.off(p.EventId.ON_GAME_START,this.gameStart,this),f.EVENT.off(p.EventId.ON_GAME_OVER,this.gameOver,this),f.EVENT.off(p.EventId.ON_UI_MAIN_FLY_ICON,this.onFlyIcon,this)},t.prototype.updateMoney=function(e){this.txtMoney.string=""+e,_.RedDot.inst.setRedDot(u.RedDotKey.Talent,A.UserModel.inst.canTalentBuy()?1:0)},t.prototype.updateRMoney=function(e){this.txtRMoney.string=""+e,_.RedDot.inst.setRedDot(u.RedDotKey.GodRide,S.GodRideModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodWeapon,R.GodWeaponModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodPet,O.GodPetModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodMenu,_.RedDot.inst.getRedDot(u.RedDotKey.GodRide)+_.RedDot.inst.getRedDot(u.RedDotKey.GodWeapon)+_.RedDot.inst.getRedDot(u.RedDotKey.GodPet)+_.RedDot.inst.getRedDot(u.RedDotKey.GodSkin)+_.RedDot.inst.getRedDot(u.RedDotKey.GodBack)),this.scheduleOnce(function(){return b.AchievementModel.inst.checkGet()})},t.prototype.updateG1Money=function(e){this.txtG1Money.string=""+e,_.RedDot.inst.setRedDot(u.RedDotKey.GodSkin,w.GodSkinModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodBack,I.GodBackModel.inst.canLevelUp()?1:0),_.RedDot.inst.setRedDot(u.RedDotKey.GodMenu,_.RedDot.inst.getRedDot(u.RedDotKey.GodRide)+_.RedDot.inst.getRedDot(u.RedDotKey.GodWeapon)+_.RedDot.inst.getRedDot(u.RedDotKey.GodPet)+_.RedDot.inst.getRedDot(u.RedDotKey.GodSkin)+_.RedDot.inst.getRedDot(u.RedDotKey.GodBack))},t.prototype.updateStage=function(e){switch(this.Talent.active=e>A.UserModel.inst.talentOpenStage,this.GodWeaponReward.active=e>A.UserModel.inst.godWeaponsRewardShowStage&&0==R.GodWeaponModel.inst.isUnlock,this.GodRideBan.active=e<=A.UserModel.inst.rideOpenStage,this.GodTalentBan.active=e<=A.UserModel.inst.talentOpenStage,this.GodXiulianBan.active=e<=A.UserModel.inst.xiuLianOpenStage,this.GodStoreBan.active=e<=A.UserModel.inst.storeOpenStage,e>A.UserModel.inst.storeOpenStage&&0==P.StoreModel.inst.rMoney_freetime&&(P.StoreModel.inst.rMoney_freetime=c.default.inst.now()),_.RedDot.inst.setRedDot(u.RedDotKey.GodWeaponReward,e>=A.UserModel.inst.godWeaponsRewardOpenStage?1:0),l.Config.abTestType){default:case 0:l.Config.isAdBanner=!1,l.Config.isAdInterstitial=!1,l.Config.isAdNative=!1;break;case 1:l.Config.isAdBanner=null!=cc.sys.localStorage.getItem("Guide0"),l.Config.isAdInterstitial=e>=2,l.Config.isAdNative=!0;break;case 2:l.Config.isAdBanner=e>=1,l.Config.isAdInterstitial=e>=3,l.Config.isAdNative=!0;break;case 3:l.Config.isAdBanner=null!=cc.sys.localStorage.getItem("Guide0"),l.Config.isAdInterstitial=e>=3,l.Config.isAdNative=!0}},t.prototype.updateXiuLian=function(){A.UserModel.inst.curStage>A.UserModel.inst.xiuLianOpenStage?_.RedDot.inst.setRedDot(u.RedDotKey.XiuLian,T.XiuLianModel.inst.money+T.XiuLianModel.inst.forecastMoney()>T.XiuLianModel.inst.getMoney()?1:0):_.RedDot.inst.setRedDot(u.RedDotKey.XiuLian,0)},t.prototype.gameStart=function(){},t.prototype.gameOver=function(){},t.prototype.onFlyIcon=function(e,t,o,n){var i=this,r=(null==n?void 0:n.target)||this[""+t];if(null!=r){var s=this.get(a.icon);s.getComponent(L.default).setIcon(t);var c=g.default.inst.topLayer,l=c.convertToNodeSpaceAR(e),p=c.convertToNodeSpaceAR(r.convertToWorldSpaceAR(cc.Vec2.ZERO)),u=(null==n?void 0:n.scale)||.8,d=(null==n?void 0:n.scale2)||.5,h=(null==n?void 0:n.scale3)||.4,f=(null==n?void 0:n.delay)||.5;s.setScale(u),s.setParent(c),s.setPosition(l);var _=l.sub(p),y=_.len()/1e3,m=Math.random(),v=l,M=cc.v2(l.x-.4*_.x+m*_.len()-_.len()/2,l.y-.4*_.y+m*_.len()-_.len()/2),b=p;s.opacity=0,cc.tween(s).to(.1,{opacity:255}).start(),cc.tween(s).delay(f).parallel(cc.tween().to(y,{scale:d},{easing:"sineIn"}),cc.tween().bezierTo(y,v,M,b)).call(o).to(.3,{scale:h,opacity:0}).call(function(){return i.put(a.icon,s)}).start()}else console.error("target err: "+t)},t.prototype.onClickPause=function(){g.default.inst.open(d.UIType.GamePause)},t.prototype.onClickExit=function(){f.EVENT.emit(p.EventId.ON_GAME_OVER,1),g.default.inst.open(d.UIType.GameStart)},t.prototype.onClickGodWeaponReward=function(){g.default.inst.open(d.UIType.GodWeaponReward)},t.prototype.onClickTalent=function(){if(A.UserModel.inst.curStage<=A.UserModel.inst.talentOpenStage)return h.AudioMgr.inst.playEffectByName("ui_not"),void y.UIFacade.showToast("\u901a\u5173\u7b2c"+A.UserModel.inst.talentOpenStage+"\u5173\u89e3\u9501\u3010\u5929\u8d4b\u7cfb\u7edf\u3011");g.default.inst.open(d.UIType.Talent)},t.prototype.onClickXiuLian=function(){if(A.UserModel.inst.curStage<=A.UserModel.inst.xiuLianOpenStage)return h.AudioMgr.inst.playEffectByName("ui_not"),void y.UIFacade.showToast("\u901a\u5173\u7b2c"+A.UserModel.inst.xiuLianOpenStage+"\u5173\u89e3\u9501\u3010\u4fee\u70bc\u7cfb\u7edf\u3011");g.default.inst.open(d.UIType.XiuLian)},t.prototype.onClickRide=function(){if(A.UserModel.inst.curStage<=A.UserModel.inst.rideOpenStage)return h.AudioMgr.inst.playEffectByName("ui_not"),void y.UIFacade.showToast("\u901a\u5173\u7b2c"+A.UserModel.inst.rideOpenStage+"\u5173\u89e3\u9501\u3010\u5750\u9a91\u7cfb\u7edf\u3011");g.default.inst.open(d.UIType.GodMenu,{type:0})},t.prototype.onClickStore=function(){if(A.UserModel.inst.curStage<=A.UserModel.inst.storeOpenStage)return h.AudioMgr.inst.playEffectByName("ui_not"),void y.UIFacade.showToast("\u901a\u5173\u7b2c"+A.UserModel.inst.storeOpenStage+"\u5173\u89e3\u9501\u3010\u5546\u5e97\u3011");l.Config.isAdNative?g.default.inst.open(d.UIType.StoreB,{type:0}):g.default.inst.open(d.UIType.Store,{type:0})},t.prototype.onClickAchievement=function(){g.default.inst.open(d.UIType.Achievement)},t.prototype.onClickMap=function(){g.default.inst.open(d.UIType.StageMap)},t.prototype.onClickSetting=function(){g.default.inst.open(d.UIType.Setting)},t.prototype.onClickStop=function(){E.GameModel.inst.isGuide||g.default.inst.open(d.UIType.Stop)},t.prototype.onClickFight=function(){E.GameModel.inst.isGuide||g.default.inst.open(d.UIType.FightEquip)},t.prototype.onClickMagnet=function(){E.GameModel.inst.isGuide||g.default.inst.open(d.UIType.Magnet)},t.prototype.onClickUserFeedback=function(){s.default.inst.openUserFeedback()},t.prototype.onClickMoney=function(){l.Config.debug&&(A.UserModel.inst.money+=1e3,M.default.inst.run())},t.prototype.onClickRMoney=function(){l.Config.debug&&(A.UserModel.inst.rMoney+=100,M.default.inst.run())},t.prototype.onClickG1Money=function(){l.Config.debug&&(A.UserModel.inst.g1Money+=100,M.default.inst.run())},r([k(cc.Prefab)],t.prototype,"iconItem",void 0),r([k(cc.Label)],t.prototype,"txtMoney",void 0),r([k(cc.Label)],t.prototype,"txtRMoney",void 0),r([k(cc.Label)],t.prototype,"txtG1Money",void 0),r([k(cc.Button)],t.prototype,"btnSetting",void 0),r([k(cc.Button)],t.prototype,"btnGodWeaponsReward",void 0),r([k(cc.Node)],t.prototype,"Money",void 0),r([k(cc.Node)],t.prototype,"RMoney",void 0),r([k(cc.Node)],t.prototype,"G1Money",void 0),r([k(cc.Node)],t.prototype,"Achievement",void 0),r([k(cc.Node)],t.prototype,"GodRide",void 0),r([k(cc.Node)],t.prototype,"GodWeaponReward",void 0),r([k(cc.Node)],t.prototype,"Talent",void 0),r([k(cc.Node)],t.prototype,"XiuLian",void 0),r([k(cc.Node)],t.prototype,"GodRideBan",void 0),r([k(cc.Node)],t.prototype,"GodTalentBan",void 0),r([k(cc.Node)],t.prototype,"GodXiulianBan",void 0),r([k(cc.Node)],t.prototype,"GodStoreBan",void 0),r([B],t)}(m.default);o.default=D,cc._RF.pop()},{"../../Controller/NativeMgr":"NativeMgr","../../Controller/TimeMgr":"TimeMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/RedDotKey":"RedDotKey","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Event/RedDot":"RedDot","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UI/UIMgr":"UIMgr","../../Framework/UIBase":"UIBase","../../Framework/VM":"VM","../../Guide/GodGuide":"GodGuide","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/GodBackModel":"GodBackModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel","../../Model/StoreModel":"StoreModel","../../Model/UserModel":"UserModel","../../Model/XiuLianModel":"XiuLianModel","../Items/IconItem":"IconItem"}],UIMgr:[function(e,t,o){"use strict";cc._RF.push(t,"e5f7aIPaPFCQK9zX5+7Hh5H","UIMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.eOrientation=void 0;var a=e("../../Define/UIDefs"),s=e("../UIBase"),c=e("./CommonToast"),l=e("../../Define/EventId"),p=e("../Res/ResLoader"),u=e("./UIOpenAnimation"),d=e("./UICloseAnimation"),h=e("../Event/EventMgr"),f=e("../Sys/TeMap"),_=cc._decorator,y=_.ccclass,g=_.property;(function(e){e[e.Landscape=0]="Landscape",e[e.Portrait=1]="Portrait"})(o.eOrientation||(o.eOrientation={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guiLayer=null,t.popLayer=null,t.tipLayer=null,t.topLayer=null,t.uiWaitAni=null,t.uiWaitMask=null,t.tipsNode=null,t.uiBack=null,t._tipComponnet=null,t.BackGroundUI=0,t.isClosing=!1,t.isOpening=!1,t.UICache={},t.UIStack=[],t.UIOpenQueue=[],t.UICloseQueue=[],t.uiOpenBeforeDelegate=null,t.uiOpenDelegate=null,t.uiCloseDelegate=null,t.windowRes=new f.default,t}var o;return i(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return o._inst?o._inst:(cc.error("UIMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.uiWaitAni&&(this.uiWaitAni.active=!1),this.uiWaitMask&&(this.uiWaitMask.active=!1),this.resetWinSize(),o._inst=this},t.prototype.open=function(e,t,o){var n=this,i={uiType:e,uiArgs:t,uiView:null};if(this.isOpening||this.isClosing)return cc.log("open <"+a.UIType[e]+"> ui action push into a queue!"),void this.UIOpenQueue.push(i);-1==this.getUIIndex(e)?(i.zOrder=this.UIStack.length+1,this.UIStack.push(i),a.UIDataInfo.getUIData(e).preventTouch&&(i.preventNode=this.preventTouch(i.zOrder)),this.isOpening=!0,this.showUIWaitAnim(),this.getOrCreateUI(e,o,function(o){if(n.hideUIWaitAnim(),i.isClose||null==o)return cc.log("getOrCreateUI "+e+" faile! close state : "+i.isClose+" , uiView : "+o,"%s"),n.isOpening=!1,i.preventNode&&(i.preventNode.destroy(),i.preventNode=null),void h.EVENT.emit(l.EventId.ON_UI_OPEN_FAIL,e);n.onUIOpen(e,o,i,t),n.isOpening=!1,n.autoExecNextUI()},t)):this.closeToUI(e,t)},t.prototype.closeToUI=function(e,t,o){void 0===o&&(o=!0);var n=this.getUIIndex(e);if(-1!=n){n=o?n:n+1;for(var i=this.UIStack.length-1;i>=n;--i){var r=this.UIStack.pop(),s=r.uiType,c=r.uiView;r.isClose=!0,r.preventNode&&(r.preventNode.destroy(),r.preventNode=null),this.uiCloseDelegate&&this.uiCloseDelegate(s),c&&(c.onClose(),a.UIDataInfo.getUIData(s).cache?(this.UICache[s]=c,c.node.removeFromParent()):c.node.destroy())}this.updateUI(),this.UIOpenQueue=[],o&&this.open(e,t)}},t.prototype.resetWinSize=function(){this._winSize=cc.view.getVisibleSize()},t.prototype.getLayer=function(e){var t=null;switch(e){case a.LayerType.GUI:t=this.guiLayer;break;case a.LayerType.Pop:t=this.popLayer;break;case a.LayerType.Tip:t=this.tipLayer;break;case a.LayerType.Top:t=this.topLayer;break;default:cc.error("Unkonw layer type!","%s")}return t},t.prototype.add2Layer=function(e,t){if(t){var o=this.getLayer(e);o?t.setParent(o):cc.error("add to layer is not found!","%s")}else cc.error("node is not valid!","%s")},t.prototype.closeAll=function(e){void 0===e&&(e=a.UIType.Loading);for(var t=this.UIStack.length-1;t>=0;--t){var o=this.UIStack[t];o.uiType!=e&&this.close(o.uiType,!1)}this.UIOpenQueue=[],this.isOpening=!1,this.isClosing=!1},t.prototype.createCache=function(){var e=this,t=function(t){var n=a.UIType[""+t],i=a.UIDataInfo.getUIData(n);if(i&&i.cache){var r=i.fullPath;o.loadBundleRes(n,"Prefabs",r,cc.Prefab,null,function(t,o){if(t){cc.log("getOrCreateUI loadRes "+n+" faile, path: "+r);try{cc.error(t)}catch(_){}}else{var i=cc.instantiate(o);if(null==i)return cc.log("getOrCreateUI instantiate "+n+" faile, path: "+r),void p.resLoader.releaseAsset(o);var a=i.getComponent(s.default);if(null==a)return cc.log("getOrCreateUI getComponent "+n+" faile, path: "+r),i.destroy(),void p.resLoader.releaseAsset(o);o.addRef(),e.UICache[n]=a}})}},o=this;for(var n in a.UIType)t(n)},t.prototype.clearCache=function(){for(var e in this.UICache){var t=this.UICache[e];cc.isValid(t.node)&&t.node.destroy()}this.UICache={}},t.prototype.isTopUI=function(e){return 0!=this.UIStack.length&&this.UIStack[this.UIStack.length-1].uiType==e},t.prototype.getUI=function(e){for(var t=0;t<this.UIStack.length;t++){var o=this.UIStack[t];if(e==o.uiType)return o.uiView}return null},t.prototype.isUIOpen=function(e){return null!=this.getUI(e)},t.prototype.getTopUI=function(){return this.UIStack.length>0?this.UIStack[this.UIStack.length-1].uiView:null},t.prototype.showUIWaitAnim=function(){this.uiWaitAni&&(this.uiWaitAni.active=!0),this.uiWaitMask&&(this.uiWaitMask.active=!0)},t.prototype.hideUIWaitAnim=function(){this.uiWaitAni.opacity=255,cc.Tween.stopAllByTarget(this.uiWaitAni),this.uiWaitAni&&(this.uiWaitAni.active=!1),this.uiWaitMask&&(this.uiWaitMask.active=!1)},t.prototype.delayUIWaitAnim=function(e){void 0===e&&(e=1),this.uiWaitAni.opacity=0,cc.Tween.stopAllByTarget(this.uiWaitAni),cc.tween(this.uiWaitAni).delay(e).to(.3,{opacity:255}).start()},t.prototype.showToast=function(e){if(null!=e&&null!=e){if(!this._tipComponnet){var t=cc.instantiate(this.tipsNode).getComponent(c.default);t.node.parent=this.getLayer(a.LayerType.Tip),t.node.name="_tip_",this._tipComponnet=t}this._tipComponnet.showTips(e)}},Object.defineProperty(t.prototype,"winSize",{get:function(){return this._winSize},enumerable:!1,configurable:!0}),t.prototype.close=function(e,t){var o=this;void 0===t&&(t=!0),cc.log("close ui <"+a.UIType[e]+">");var n,i=this.UIStack.length,r={uiType:e,playAnim:t};if(e>a.UIType.$Start&&e<a.UIType.$End){if(i<1||this.isOpening||this.isClosing)return cc.log("<"+a.UIType[e]+"> can not be close in this period of time"),void this.UICloseQueue.push(r);if(this.isUIOpen(e)){for(var s=this.UIStack.length-1;s>=0;s--){var c=this.UIStack[s];if(c.uiType===e){n=c,this.UIStack.splice(s,1);break}}if(void 0!==n){this.isClosing=!0;var u=n.uiType,f=n.uiView;if(n.isClose=!0,n.preventNode&&(n.preventNode.destroy(),n.preventNode=null),null!=f){var _=this.UIStack[i-2];this.updateUI();var y=function(){_&&_.uiView&&o.isTopUI(_.uiType)?(_.uiView.node.active=!0,_.uiView.onTop(u,f.onClose())):f.onClose(),o.uiCloseDelegate&&o.uiCloseDelegate(u),a.UIDataInfo.getUIData(e).cache?(o.UICache[u]=f,f.node.removeFromParent(),cc.log("uiView removeFromParent "+n.uiType)):(f.node.destroy(),p.resLoader.releaseAsset(f.__prefab__),cc.log("uiView destroy <"+a.UIType[n.uiType]+">")),o.isClosing=!1,o.autoExecNextUI();var t=o.windowRes.get(e);t&&(t.decRef(),o.windowRes.del(e)),h.EVENT.emit(l.EventId.ON_UI_CLOSE,e)},g=f.node.getComponent(d.default);t&&g&&f.node.active?(f.isPlayOpenAni=!0,g.play().wrapMode==cc.WrapMode.Loop&&cc.error("UI close animation should be a loop animation!","%s"),g.once(cc.Animation.EventType.FINISHED,function(){y()},this)):y()}else this.isClosing=!1}}else cc.log("<"+a.UIType[e]+"> not has open")}else cc.error("unknown ui type to close!","%s")},t.prototype.getOpenUICount=function(){return this.UIStack.length},t.prototype.replace=function(e,t){this.close(this.UIStack[this.UIStack.length-1].uiType),this.open(e,t)},t.prototype.getUIIndex=function(e){for(var t=0;t<this.UIStack.length;t++)if(e==this.UIStack[t].uiType)return t;return-1},t.prototype.preventTouch=function(e){var t=cc.instantiate(this.uiBack);return this.getLayer(a.LayerType.Pop).addChild(t),t.name="preventTouch",t.setContentSize(this.winSize),t.on(cc.Node.EventType.TOUCH_START,function(){},t),t.setSiblingIndex(e),t},t.prototype.autoExecNextUI=function(){if(this.UIOpenQueue.length>0){var e=this.UIOpenQueue[0];return this.UIOpenQueue.splice(0,1),void this.open(e.uiType,e.uiArgs)}this.UICloseQueue.length>0&&(e=this.UICloseQueue[0],this.UICloseQueue.splice(0,1),this.close(e.uiType,e.playAnim))},t.prototype.updateUI=function(){for(var e=0,t=this.UIStack.length-1;t>=0;--t){var o=this.UIStack[t].uiView.showType;if(this.UIStack[t].uiView.node.active=!0,s.UIShowTypes.UIFullScreen==o)break;if(s.UIShowTypes.UISingle==o){for(var n=0;n<this.BackGroundUI;++n)this.UIStack[n]&&(this.UIStack[n].uiView.node.active=!0);e=this.BackGroundUI;break}}for(var i=e;i<t;++i)this.UIStack[i].uiView.node.active=!1},t.prototype.getOrCreateUI=function(e,t,n,i){var r=this.UICache[e];if(r)n(r);else{var c=a.UIDataInfo.getUIData(e);if(!c||!c.fullPath)return cc.log("getOrCreateUI "+e+" faile, prefab conf not found!"),void n(null);var l=c.fullPath,u=c.uiBundle;this.loadBundleRes(e,u,l,cc.Prefab,t,function(t,a){if(t){cc.log("getOrCreateUI loadRes "+e+" faile, path: "+l),n(null);try{cc.error(t)}catch(_){}}else{var c=cc.instantiate(a);if(null==c)return cc.log("getOrCreateUI instantiate "+e+" faile, path: "+l),n(null),void p.resLoader.releaseAsset(a);if(null==(r=c.getComponent(s.default)))return cc.log("getOrCreateUI getComponent "+e+" faile, path: "+l),c.destroy(),n(null),void p.resLoader.releaseAsset(a);var u=o.inst.getCanvasSize();r.node.width=u.width,r.node.height=u.height,r.__prefab__=a,a.addRef(),r.init(i,e),n(r)}})}},t.prototype.loadBundleRes=function(e,t,o,n,i,r){var a=this,s=cc.assetManager.getBundle(t);s?s.load(o,n,i,function(t,o){!t&&a.isValid&&(o.addRef(),a.windowRes.set(e,o)),r&&r(t,o)}):r&&r(null,null)},t.prototype.preLoadBundleRes=function(e,t,o,n){var i=cc.assetManager.getBundle(e);i?i.preload(t,o,function(e,t){n&&n(e,t)}):n&&n(null,null)},t.prototype.getCanvasSize=function(){return new cc.Size(this.node.width,this.node.height)},t.prototype.onUIOpen=function(e,t,o,n){var i=this;if(null!=t){if(o.uiView=t,t.node.active=!0,t.node.setSiblingIndex(o.zOrder||this.UIStack.length),o.preventNode&&(o.preventNode.opacity=t.maskOpacity,o.preventNode.setSiblingIndex(o.zOrder||this.UIStack.length),this.add2Layer(t.showLayer,o.preventNode)),t.quickClose){var r=t.node.getChildByName("background");r||((r=new cc.Node).name="background",r.setParent(t.node),r.setContentSize(this.winSize),r.setSiblingIndex(0)),r.targetOff(cc.Node.EventType.TOUCH_START),r.on(cc.Node.EventType.TOUCH_END,function(){cc.log("touch close <"+a.UIType[e]+">"),i.close(e)},r)}this.add2Layer(t.showLayer,t.node),this.updateUI();var s=0;this.UIStack.length>1&&(s=this.UIStack[this.UIStack.length-2].uiType),this.uiOpenBeforeDelegate&&this.uiOpenBeforeDelegate(e,s),t.onOpen(s,n);var c=function(){t.isPlayOpenAni=!1,t.onOpenAniOver(),i.uiOpenDelegate&&i.uiOpenDelegate(e,s),h.EVENT.emit(l.EventId.ON_UI_OPEN,e)},p=t.node.getComponent(u.default);p?(t.isPlayOpenAni=!0,p.play().wrapMode==cc.WrapMode.Loop&&cc.error("UI open animation should not be a loop animation!"),p.once(cc.Animation.EventType.FINISHED,function(){c()},this)):c()}},t.prototype.getOpenQueueCount=function(){return this.UIOpenQueue.length},r([g(cc.Node)],t.prototype,"guiLayer",void 0),r([g(cc.Node)],t.prototype,"popLayer",void 0),r([g(cc.Node)],t.prototype,"tipLayer",void 0),r([g(cc.Node)],t.prototype,"topLayer",void 0),r([g(cc.Node)],t.prototype,"uiWaitAni",void 0),r([g(cc.Node)],t.prototype,"uiWaitMask",void 0),r([g(cc.Prefab)],t.prototype,"tipsNode",void 0),r([g(cc.Prefab)],t.prototype,"uiBack",void 0),o=r([y],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../Event/EventMgr":"EventMgr","../Res/ResLoader":"ResLoader","../Sys/TeMap":"TeMap","../UIBase":"UIBase","./CommonToast":"CommonToast","./UICloseAnimation":"UICloseAnimation","./UIOpenAnimation":"UIOpenAnimation"}],UIOpenAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"2f4fe0wTRVJ/6kG1ktMX+6i","UIOpenAnimation");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),r([s],t)}(cc.Animation));o.default=c,cc._RF.pop()},{}],UserModel:[function(e,t,o){"use strict";cc._RF.push(t,"e501c+jJ31An6gtHlv8+VQu","UserModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.UserModel=void 0;var n=e("../Controller/TableMgr"),i=e("../Define/Define"),r=e("../Framework/Storage/LocalStorageMgr"),a=e("../Framework/VM"),s=function(){function e(){this.storeOpenStage=0,this.talentOpenStage=0,this.rideOpenStage=0,this.godWeaponOpenStage=0,this.godPetOpenStage=0,this.godSkinOpenStage=0,this.godBackOpenStage=0,this.godWeaponsRewardShowStage=0,this.godWeaponsRewardOpenStage=0,this.godWeaponsRewardMoney=0,this.xiuLianOpenStage=0,this.storeReviewReward=10,this.realNameReward=10,this.quanDouYao=0,this.huanYiPi=0,this._isRealNameReward=0,this._curStage=0,this._selectStage=0,this._background=0,this._money=0,this._rMoney=0,this._g1Money=0,this._g2Money=0,this._g3Money=0,this._switchNum=0,this._talent={},this._stageBoxGet={},this._stageBoxSkill={},i.Config.debug?(this.storeOpenStage=0,this.talentOpenStage=0,this.rideOpenStage=0,this.godWeaponOpenStage=0,this.godPetOpenStage=0,this.godSkinOpenStage=0,this.godBackOpenStage=0,this.godWeaponsRewardShowStage=0,this.godWeaponsRewardOpenStage=0,this.godWeaponsRewardMoney=5,this.xiuLianOpenStage=0,this.quanDouYao=0,this.huanYiPi=0):(this.storeOpenStage=Number(n.TABLE.getGlobal("StoreOpenStage")),this.talentOpenStage=Number(n.TABLE.getGlobal("TalentOpenStage")),this.rideOpenStage=Number(n.TABLE.getGlobal("RideOpenStage")),this.godWeaponOpenStage=Number(n.TABLE.getGlobal("GodWeaponOpenStage")),this.godPetOpenStage=Number(n.TABLE.getGlobal("GodPetOpenStage")),this.godSkinOpenStage=Number(n.TABLE.getGlobal("GodSkinOpenStage")),this.godBackOpenStage=Number(n.TABLE.getGlobal("GodBackOpenStage")),this.godWeaponsRewardShowStage=Number(n.TABLE.getGlobal("GodWeaponsRewardShowStage")),this.godWeaponsRewardOpenStage=Number(n.TABLE.getGlobal("GodWeaponsRewardOpenStage")),this.godWeaponsRewardMoney=Number(n.TABLE.getGlobal("GodWeaponsRewardMoney")),this.realNameReward=Number(n.TABLE.getGlobal("RealNameReward")),this.storeReviewReward=Number(n.TABLE.getGlobal("StoreReviewReward")),this.xiuLianOpenStage=Number(n.TABLE.getGlobal("XiuLianOpenStage")),this.quanDouYao=Number(n.TABLE.getGlobal("QuanDouYao")),this.huanYiPi=Number(n.TABLE.getGlobal("HuanYiPi"))),this._isRealNameReward=Number(r.LocalStorageMgr.getItem("isRealNameReward")),this._curStage=Number(r.LocalStorageMgr.getItem("curStage")||1),this._money=Number(r.LocalStorageMgr.getItem("money")),this._rMoney=Number(r.LocalStorageMgr.getItem("rMoney")),this._g1Money=Number(r.LocalStorageMgr.getItem("g1Money")),this._g2Money=Number(r.LocalStorageMgr.getItem("g2Money")),this._g3Money=Number(r.LocalStorageMgr.getItem("g3Money")),this._background=Number(r.LocalStorageMgr.getItem("background")),this._switchNum=Number(r.LocalStorageMgr.getItem("switchNum"));var e={talent:r.LocalStorageMgr.getItem("talent",!0),stageBoxGet:r.LocalStorageMgr.getItem("stageBoxGet",!0),stageBoxSkill:r.LocalStorageMgr.getItem("stageBoxSkill",!0)};e.talent&&(r.LocalStorageMgr.removeItem("talent",!0),r.LocalStorageMgr.setItem("talent",e.talent)),e.stageBoxGet&&(r.LocalStorageMgr.removeItem("stageBoxGet",!0),r.LocalStorageMgr.setItem("stageBoxGet",e.stageBoxGet)),e.stageBoxSkill&&(r.LocalStorageMgr.removeItem("stageBoxSkill",!0),r.LocalStorageMgr.setItem("stageBoxSkill",e.stageBoxSkill)),this._talent=JSON.parse(r.LocalStorageMgr.getItem("talent")||"{}"),this._stageBoxGet=JSON.parse(r.LocalStorageMgr.getItem("stageBoxGet")||"{}"),this._stageBoxSkill=JSON.parse(r.LocalStorageMgr.getItem("stageBoxSkill")||"{}"),"object"!=typeof this._stageBoxGet&&(this._stageBoxGet={}),"object"!=typeof this._stageBoxSkill&&(this._stageBoxSkill={}),a.VM.add(this,"UserModel")}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRealNameReward",{get:function(){return this._isRealNameReward},set:function(e){this._isRealNameReward=e,r.LocalStorageMgr.setItem("isRealNameReward",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStage",{get:function(){return this._curStage},set:function(e){this._curStage=e,r.LocalStorageMgr.setItem("curStage",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectStage",{get:function(){return this._selectStage},set:function(e){this._selectStage=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(e){this._background=e,r.LocalStorageMgr.setItem("background",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"money",{get:function(){return this._money},set:function(e){this._money=e,r.LocalStorageMgr.setItem("money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rMoney",{get:function(){return this._rMoney},set:function(e){this._rMoney=e,r.LocalStorageMgr.setItem("rMoney",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g1Money",{get:function(){return this._g1Money},set:function(e){this._g1Money=e,r.LocalStorageMgr.setItem("g1Money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g2Money",{get:function(){return this._g2Money},set:function(e){this._g2Money=e,r.LocalStorageMgr.setItem("g2Money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g3Money",{get:function(){return this._g3Money},set:function(e){this._g3Money=e,r.LocalStorageMgr.setItem("g3Money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"switchNum",{get:function(){return this._switchNum},set:function(e){this._switchNum=e,r.LocalStorageMgr.setItem("switchNum",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"talent",{get:function(){return this._talent},set:function(e){this._talent=e,r.LocalStorageMgr.setItem("talent",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageBoxGet",{get:function(){return this._stageBoxGet},set:function(e){this._stageBoxGet=e,r.LocalStorageMgr.setItem("stageBoxGet",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageBoxSkill",{get:function(){return this._stageBoxSkill},set:function(e){this._stageBoxSkill=e,r.LocalStorageMgr.setItem("stageBoxSkill",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),e.prototype.canTalentBuy=function(){if(e.inst.curStage<=this.talentOpenStage)return!1;var t=this.getTalentCount(),o=n.TABLE.getTable("talentLevelUpMoney");if(!(t>Object.keys(o).length)){var i=n.TABLE.getTableInfo("talentLevelUpMoney","num",t).money||cc.macro.REPEAT_FOREVER;return!(e.inst.money<i)}},e.prototype.getTalentCount=function(){for(var e=0,t=0,o=Object.values(this._talent);t<o.length;t++)e+=o[t];return e},e.prototype.getTalentMoney=function(){var e=n.TABLE.getTableInfo("talentLevelUpMoney","num",this.getTalentCount()),t=0;return e&&(t=e.money),t},e._inst=null,e}();o.UserModel=s,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../Framework/VM":"VM"}],Utils:[function(e,t,o){"use strict";cc._RF.push(t,"6917a72WWFM9ZEwVneeYPE1","Utils"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Define/UIDefs"),i=function(){function e(){}return e.verifyNode=function(e){return null!=e&&e.isValid},e.verifyComponent=function(e){return null!=e&&!!e.isValid&&!!e.node&&!!e.node.isValid},e.isComponentLive=function(e){return!!(e&&e.node&&e.node.isValid&&e.isValid)},e.getUrlParams=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(t);return null!=o?decodeURIComponent(o[2]):null},e.containsPointPolygon=function(e,t,o){for(var n=e,i=e.length,r=i-2,a=!1,s=0;s<i;s+=2){var c=n[s+1],l=n[r+1];if(c<o&&l>=o||l<o&&c>=o){var p=n[s];p+(o-c)/(l-c)*(n[r]-p)<t&&(a=!a)}r=s}return a},e.getBoundingBoxAMPolygon=function(e,t,o){var n,i=t.findSlot(o);if(i){var r=i.getAttachment();if(r&&r instanceof sp.spine.BoundingBoxAttachment){var a=r;n=sp.spine.Utils.newFloatArray(a.worldVerticesLength),a.computeWorldVertices(i,0,a.worldVerticesLength,n,0,2);for(var s=n.length,c=0;c<s;c+=2){var l=e.convertToWorldSpaceAR(new cc.Vec2(n[c],n[c+1]));n[c]=l.x,n[c+1]=l.y}}}return n},e.stopSpineAtFrame=function(e,t,o){if(e&&t&&e.findAnimation(t)){e.paused=!1;var n=e.setAnimation(0,t,!1);n&&(e.timeScale=0,n.trackTime=o)}},e.deepCopy=function(e){for(var t={},o=0,n=Object.keys(e);o<n.length;o++){var i=n[o];t[i]="object"==typeof e[i]?this.deepCopy(e[i]):e[i]}return t},e.arrDeepCopy=function(e){var t=[];for(var o in e)t[o]=e[o];return t},e.formatDate=function(e,t){var o=new Date(e),n={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),"S+":Math.floor(o.getMilliseconds()/10)};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},e.formatTime=function(e,t){var o=new Date(e),n={"h+":Math.floor(o.getTime()/36e5),"m+":o.getUTCMinutes(),"s+":o.getUTCSeconds(),S:o.getUTCMilliseconds()};for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},e.getFormatTime=function(e){if(e>0)return(e=((new Date).getTime()-e)/1e3)<0?"\u521a\u521a":e>=0&&e<60?Math.floor(e)+"\u79d2\u524d":e<3600?Math.floor(e/60)+"\u5206\u949f\u524d":e<86400?Math.floor(e/60/60)+"\u5c0f\u65f6\u524d":e<31536e3?Math.floor(e/60/60/24)+"\u5929\u524d":Math.floor(e/60/60/24/365)+"\u5e74\u524d"},e.getFormatTimeCur=function(e){if(e>0)return(e=((new Date).getTime()-e)/1e3)<3600?"\u521a\u521a":e<86400?Math.floor(e/60/60)+"\u5c0f\u65f6\u524d":e<31536e3?Math.floor(e/60/60/24)+"\u5929\u524d":Math.floor(e/60/60/24/365)+"\u5e74\u524d"},e.getCurTimeDays=function(e){var t=new Date(e);return 365*(t.getFullYear()-2020)+12*t.getMonth()+t.getDate()},e.getTimedifference=function(e,t){return this.getCurTimeDays(e)-this.getCurTimeDays(t)},e.overAddArr=function(e){if(!e||e.length<=0)return[];for(var t=[],o=0;o<e.length;o++)t[o]=0==o?e[o]:t[o-1]+e[o];return t},e.getRandomIndex=function(e,t){var o=0;if(e<=t[0])return 0;if(e>=t[t.length-1])return t.length-1;for(var n=0;n<t.length;n++)if(e<=t[n])o=n;else{if(e>t[n]&&e<=t[n+1]){o=n+1;break}if(e>t[n]&&e<=t[n+1]){o=n+1;break}}return o},e.getRandToArray=function(e){return e[Math.floor(Math.random()*e.length)]},e.getRandWeightIndex=function(e){var t=(e=this.overAddArr(e))[e.length-1],o=Math.random()*t;return this.getRandomIndex(o,e)},e.getRanInter=function(e,t){var o=e+Math.random()*(t-e);return Math.floor(o)},e.RandomSome=function(e,t){var o=this.fisherYatesShuffle(e.concat());return o.length>t&&(o.length=t),o},e.fisherYatesShuffle=function(e){for(var t=e.length;t;){var o=Math.floor(Math.random()*t--),n=e[t];e[t]=e[o],e[o]=n}return e},e.formatCNY=function(e,t){var o,n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"}],i="";for(o=n.length-1;o>0&&!(e>=n[o].value);o--);return(i=e>=1e9?"999.9M":(e/n[o].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[o].symbol).length>5&&(i=i.slice(0,5)+n[o].symbol),i},e.initServerTime=function(e){this._initServerTime=e,this._initLocalTime=Date.now()},e.getServerTime=function(){return this._initServerTime+(Date.now()-this._initLocalTime)},e.clone=function(e){var t;if("object"==typeof e)if(null===e)t=null;else if(e instanceof Array){t=[];for(var o=0,n=e.length;o<n;o++)t.push(this.clone(e[o]))}else for(var i in t={},e)t[i]=this.clone(e[i]);else t=e;return t},e.getViewType=function(e){for(var t=n.UIType.$Start+1;t<n.UIType.$End;++t)if(n.UIType[t]==e)return t},e.createMatrix=function(e,t,o){void 0===o&&(o=0);for(var n=new Array,i=0;i<e;++i){n[i]=new Array;for(var r=0;r<t;++r)n[i][r]=o}return n},e.map2Obj=function(e){var t=Object.create(null);return e.forEach(function(e,o){t[o]=e}),t},e.obj2map=function(e){for(var t=new Map,o=0,n=Object.keys(e);o<n.length;o++){var i=n[o];t.set(i,e[i])}return t},e.arab2char=function(e){var t=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],o=["","\u5341","\u767e","\u5343","\u4e07"],n=function(e){for(var n=e.toString().split("").reverse(),i="",r=0;r<n.length;r++)i=(0==r&&0==n[r]?"":r>0&&0==n[r]&&0==n[r-1]?"":t[n[r]]+(0==n[r]?o[0]:o[r]))+i;return i},i=Math.floor(e/1e4),r=e%1e4,a="";return r.toString().length<4&&(a="0"+r),i?n(i)+"\u4e07"+n(a):n(e)},e.NumToChinaBigNum=function(e){return e<0||e>10?"":["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"][e]},e.updatePolygonCollider=function(e,t){var o=e.points,n=e.world.points;n.length=o.length;for(var i=cc.v2(),r=1e6,a=1e6,s=-1e6,c=-1e6,l=0,p=o.length;l<p;l++){n[l]||(n[l]=cc.v2()),i.x=o[l].x+t.x,i.y=o[l].y+t.y;var u=i.x,d=i.y;n[l].x=u,n[l].y=d,u>s&&(s=u),u<r&&(r=u),d>c&&(c=d),d<a&&(a=d)}},e.limitWorldNum=function(e,t){return void 0===t&&(t=6),e.length>t&&(e=e.slice(0,t),e+="..."),e},e.getRanByEnum=function(e){var t=Object.keys(e);return e[t[this.getRanInter(0,t.length)]]},e.getIndexByEnum=function(e,t){for(var o=Object.keys(e),n=0;n<o.length;n++)if(e[o[n]]==t)return n;return-1},e.getColor=function(){return cc.Color.RED},e.getColorHex=function(){return""},e.rollNum=function(e,t,o,n,i){void 0===i&&(i=.5);var r={num:e,_num:e};return Object.defineProperty(r,"num",{get:function(){return r._num},set:function(e){r._num=e,o&&o(r._num)}}),cc.tween(r).to(i,{num:t}).call(n).start()},e._initServerTime=0,e._initLocalTime=0,e}();o.default=i,cc._RF.pop()},{"../../Define/UIDefs":"UIDefs"}],VM:[function(e,t,o){"use strict";function n(e,t,o,n){void 0===n&&(n="");for(var i=t.split("."),r=0;r<i.length;r++){var a=i[r];if(a in e==0){console.error("["+a+"] not find in "+n+"."+t);break}r==i.length-1?e[a]=o:e=e[a]}}function i(e,t,o,n){void 0===n&&(n="");for(var i=t.split("."),r=0;r<i.length;r++){var a=i[r];if(a in e==0)return console.error("["+a+"] not find in "+n+"."+t),o;e=e[a]}return null==e&&(e=o),e}cc._RF.push(t,"51d52KvG4VHyK1TQxqVUljk","VM"),Object.defineProperty(o,"__esModule",{value:!0}),o.VM=void 0;var r=function(){function e(e,t){this._tag=null,this.active=!0,this.emitToRootPath=!1,new p(e,this._callback.bind(this)),this.$data=e,this._tag=t}return e.prototype._callback=function(e,t,o){if(1==this.active){var n="VC:"+this._tag+"."+o.join(".");if(cc.director.emit(n,e,t,[this._tag].concat(o)),this.emitToRootPath&&cc.director.emit("VC:"+this._tag,e,t,o),o.length>=2)for(var i=0;i<o.length-1;i++)o[i]}},e.prototype.setValue=function(e,t){n(this.$data,e,t,this._tag)},e.prototype.getValue=function(e,t){return i(this.$data,e,t,this._tag)},e}(),a=function(){function e(){this._mvs=new Map,this.setObjValue=n,this.getObjValue=i}return e.prototype.add=function(e,t,o){void 0===t&&(t="global"),void 0===o&&(o=!1);var n=new r(e,t),i=this._mvs.get(t);t.includes(".")?console.error("cant write . in tag:",t):i?console.error("already set VM tag:"+t):(n.emitToRootPath=o,this._mvs.set(t,n))},e.prototype.remove=function(e){this._mvs.delete(e)},e.prototype.removeAll=function(){this._mvs.clear()},e.prototype.get=function(e){return this._mvs.get(e)},e.prototype.addValue=function(e,t){var o=(e=e.trim()).split(".");o.length<2&&console.error("Cant find path:"+e);var n=this.get(o[0]);if(n){var i=o.slice(1).join(".");n.setValue(i,n.getValue(i)+t)}else console.error("Cant Set VM:"+o[0])},e.prototype.getValue=function(e,t){var o=(e=e.trim()).split(".");if(o.length<2)console.error("Get Value Cant find path:"+e);else{var n=this.get(o[0]);if(n)return n.getValue(o.slice(1).join("."),t);console.error("Cant Get VM:"+o[0])}},e.prototype.setValue=function(e,t){var o=(e=e.trim()).split(".");if(o.length<2)console.error("Set Value Cant find path:"+e);else{var n=this.get(o[0]);n?n.setValue(o.slice(1).join("."),t):console.error("Cant Set VM:"+o[0])}},e.prototype.bindPath=function(e,t,o,n){""!=(e=e.trim())?"*"!==e.split(".")[0]?cc.director.on("VC:"+e,t,o,n):console.error(e,"\u8def\u5f84\u4e0d\u5408\u6cd5,\u53ef\u80fd\u9519\u8bef\u8986\u76d6\u4e86 VMParent \u7684onLoad \u65b9\u6cd5, \u6216\u8005\u7236\u8282\u70b9\u5e76\u672a\u6302\u8f7d VMParent \u76f8\u5173\u7684\u7ec4\u4ef6\u811a\u672c"):console.error(o.node.name,"\u8282\u70b9\u7ed1\u5b9a\u7684\u8def\u5f84\u4e3a\u7a7a")},e.prototype.unbindPath=function(e,t,o){"*"!==(e=e.trim()).split(".")[0]?cc.director.off("VC:"+e,t,o):console.error(e,"\u8def\u5f84\u4e0d\u5408\u6cd5,\u53ef\u80fd\u9519\u8bef\u8986\u76d6\u4e86 VMParent \u7684onLoad \u65b9\u6cd5, \u6216\u8005\u7236\u8282\u70b9\u5e76\u672a\u6302\u8f7d VMParent \u76f8\u5173\u7684\u7ec4\u4ef6\u811a\u672c")},e.prototype.inactive=function(){this._mvs.forEach(function(e){e.active=!1})},e.prototype.active=function(){this._mvs.forEach(function(e){e.active=!1})},e}(),s=Object.prototype,c={obj:"[object Object]",array:"[object Array]"},l=["push","pop","shift","unshift","sort","reverse","splice"],p=function(){function e(e,t){s.toString.call(e)!==c.obj&&s.toString.call(e)!==c.array&&console.error("\u8bf7\u4f20\u5165\u4e00\u4e2a\u5bf9\u8c61\u6216\u6570\u7ec4"),this._callback=t,this.observe(e)}return e.prototype.observe=function(e,t){var o=this;Object.keys(e).forEach(function(n){var i=o,r=e[n],a=t&&t.slice();a?a.push(n):a=[n],Object.defineProperty(e,n,{get:function(){return r},set:function(e){r!==e&&("[object Object]"===s.toString.call(e)&&i.observe(e,a),r=e,i._callback(e,r,a))}})},this)},e.prototype.overrideArrayProto=function(e,t){var o,n=Array.prototype,i=Object.create(Array.prototype),r=this;l.forEach(function(e){Object.defineProperty(i,e,{value:function(){var i=this.slice();return o=n[e].apply(this,arguments),r.observe(this,t),r._callback(this,i,t),o}})}),e.__proto__=i},e}();o.VM=new a,cc._RF.pop()},{}],VectorUtil:[function(e,t,o){"use strict";cc._RF.push(t,"2bf4fYMdL9EjpnauAnjJp5U","VectorUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.VectorUtil=void 0;var n=function(){function e(){}return e.getAddRay=function(e,t,o){void 0===o&&(o=1);var n=this.getRay(t,o);return{x:e.x+n.x,y:e.y+n.y}},e.getSubRay=function(e,t,o){void 0===o&&(o=1);var n=this.getRay(t,o);return{x:e.x-n.x,y:e.y-n.y}},e.getRay=function(e,t){return void 0===t&&(t=1),{x:Math.cos(e)*t,y:Math.sin(e)*t}},e.segmentsIntersect=function(e,t,o,n){var i=(e.x-o.x)*(t.y-o.y)-(e.y-o.y)*(t.x-o.x),r=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x);if(i*r>=0)return null;var a=(o.x-e.x)*(n.y-e.y)-(o.y-e.y)*(n.x-e.x);if(a*(a+i-r)>=0)return null;var s=a/(r-i),c=s*(t.x-e.x),l=s*(t.y-e.y);return{x:e.x+c,y:e.y+l}},e.angle=function(e,t,o){var n=Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2)),i=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2)),r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return Math.acos((i*i+n*n-r*r)/(2*i*n))},e.pointLineMirror=function(e,t,o){var n=o.y-t.y,i=t.x-o.x;if(Math.abs(n)<1e-8&&Math.abs(i)<1e-8)return null;var r=o.x*t.y-t.x*o.y,a=n*n+i*i,s=(i*i*e.x-n*i*e.y-n*r)/a,c=(-n*i*e.x+n*n*e.y-i*r)/a;return{x:2*s-e.x,y:2*c-e.y}},e.pointLineVertical=function(e,t,o){var n=o.x-t.x,i=o.y-t.y,r=n*n+i*i,a=((e.x-t.x)*n+(e.y-t.y)*i)/r;return r?a<0?t:a>1?o:cc.v2(t.x+a*n,t.y+a*i):t},e.pointLineDistance=function(e,t,o){return cc.Vec2.distance(e,this.pointLineVertical(e,t,o))},e.checkNear=function(e,t){for(var o=[],n=0;n<t.length;n++){var i=cc.macro.REPEAT_FOREVER;t[n]&&(i=cc.Vec2.distance(e,t[n])),o.push({idx:n,len:i})}return o.length>0?(o.sort(function(e,t){return e.len-t.len}),o[0].idx):null},e.checkFar=function(e,t){for(var o=[],n=0;n<t.length;n++){var i=0;t[n]&&(i=cc.Vec2.distance(e,t[n])),o.push({idx:n,len:i})}return o.length>0?(o.sort(function(e,t){return t.len-e.len}),o[0].idx):null},e.triangleType=function(e,t,o){return e+t>o&&e+o>t&&t+o>e&&e>0&&t>0&&o>0?e*e+t*t==o*o||e*e+o*o==t*t||t*t+o*o==e*e?1:e==t||e==o||t==o?2:e==t&&e==o&&t==o?3:0:-1},e}();o.VectorUtil=n,cc._RF.pop()},{}],WarnBase:[function(e,t,o){"use strict";cc._RF.push(t,"3f5f5tRDbFOF7FJ0IlgeCKQ","WarnBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.setWarn=function(e,t){this._info=e,this._callback=t},t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},r([l],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr"}],WeaponBase:[function(e,t,o){"use strict";cc._RF.push(t,"ef48908T0BJyb1mCuTHrRqp","WeaponBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.WeaponInfo=o.WeaponBase=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Controller/TableMgr"),c=e("../../Framework/Res/ResKeeperAddition"),l=e("../../Model/GameModel"),p=e("../../Model/WeaponModel"),u=e("../../Model/XiuLianModel"),d=e("./Bullet/BulletBase"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pfBullet=[],t.pfSeniorBullet=[],t.id="",t._weaponInfo=null,t._game=l.GameModel.inst,t}return i(t,e),t.prototype.onLoad=function(){for(var e in this._waterLevel=10,this.pfBullet)this.addItemPool(Number(e),this.pfBullet[e]);for(var e in this.pfSeniorBullet)this.addItemPool(3+Number(e),this.pfSeniorBullet[e]);this._weaponInfo=p.WeaponModel.inst.weaponInfos[this.id],null!=this._weaponInfo?this._weaponInfo.getAttrFromCfg():cc.warn("\u6ca1\u6709\u6280\u80fd\u6570\u636e id:",this.id)},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this._weaponInfo.getSenior()?3+t:t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(d.BulletBase);e.type=t,e.attrs=this._weaponInfo.weaponAttrs[t],e.weapon=this._weaponInfo,r.fire(e,function(e){o.put(n,r.node),o.fire(e,++t)})}},t.prototype.updateAttrs=function(){this._weaponInfo.updateAttrs()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:case 1:case 2:return a.LayerMgr.inst.BulletLayer}},r([_([cc.Prefab])],t.prototype,"pfBullet",void 0),r([_([cc.Prefab])],t.prototype,"pfSeniorBullet",void 0),r([_],t.prototype,"id",void 0),r([f],t)}(c.default);o.WeaponBase=y;var g=function(){function e(e){this.id="",this.levels=[],this.levels_extra=[],this.maxLevel=0,this.skillInfo=[],this.weaponAttrs=[],this.id=e}return e.prototype.getAttrFromCfg=function(){this.skillInfo=[s.TABLE.getTable("sk_"+this.id),s.TABLE.getTable("sk_"+this.id+"_zi"),s.TABLE.getTable("sk_"+this.id+"_zi2")],this.skillInfo[0]&&(this.weaponAttrs[0]=new p.WeaponAttrs),this.skillInfo[1]&&(this.weaponAttrs[1]=new p.WeaponAttrs),this.skillInfo[2]&&(this.weaponAttrs[2]=new p.WeaponAttrs),this.maxLevel=this.skillInfo[0].length},e.prototype.updateAttrs=function(){for(var e in 0==this.skillInfo.length&&this.getAttrFromCfg(),this.weaponAttrs){var t=this.skillInfo[e],o=this.weaponAttrs[e];for(var n in o)o[n]=0;for(var i=0,r=this.levels;i<r.length;i++){var a=t[r[i]-1];for(var s in a)o[s]+=Number(a[s])}}if(this.levels_extra.length>0)for(var e in this.weaponAttrs){t=this.skillInfo[e],o=this.weaponAttrs[e];for(var c=0,l=this.levels_extra;c<l.length;c++)for(var p in a=t[l[c]-1])o[p]+=Number(a[p])}},e.prototype.levelUp=function(e){this.levels.push(e),this.updateAttrs()},e.prototype.extraLevelUp=function(e){this.levels_extra.push(e),this.updateAttrs()},e.prototype.getBulletCount=function(e){void 0===e&&(e=0);var t=this.weaponAttrs[e].bulletCount,o=p.WeaponModel.inst.magicAttrs.a_bulletcount_v||0;o>0&&(t+=o);var n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_bulletcount_v"]||0;return n>0&&(t+=n),t},e.prototype.getInterval=function(e){void 0===e&&(e=0);var t=this.weaponAttrs[e].interval,o=p.WeaponModel.inst.magicAttrs.s_cd_p||0;return o>0&&(t-=t*o),t<.2&&(t=.2),t},e.prototype.getMoveSpeed=function(e){void 0===e&&(e=0);var t=this.weaponAttrs[e].moveSpeed,o=p.WeaponModel.inst.magicAttrs.a_bspeed_p||0,n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_moveSpeed_p"]||0;return o+n>0&&(t+=(t+n)*o),t},e.prototype.getAoeRange=function(e){void 0===e&&(e=0);var t=this.weaponAttrs[e].aoeRange,o=p.WeaponModel.inst.magicAttrs.a_range_p||0,n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_aoerange_p"]||0;return o+n>0&&(t+=t*(o+n)),t},e.prototype.getDamage=function(e){return void 0===e&&(e=0),this.weaponAttrs[e].damage+u.XiuLianModel.inst.getInfo(this.id).damage*u.XiuLianLevelValue.damage},e.prototype.getCrit=function(){return l.GameModel.inst.player.crit+(p.WeaponModel.inst.magicAttrs.a_crit_p||0)+u.XiuLianModel.inst.getInfo(this.id).critRate*u.XiuLianLevelValue.critRate},e.prototype.getCritDamage=function(){return 2+(p.WeaponModel.inst.magicAttrs.a_critdmg_p||0)},e.prototype.getDuration=function(e){void 0===e&&(e=0);var t=this.weaponAttrs[e].duration,o=p.WeaponModel.inst.magicAttrs.a_time_p||0,n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_duration_p"]||0;return o+n>0&&(t+=t*(o+n)),n>0&&(t+=t*o),t},e.prototype.getAngulaspeed=function(e){void 0===e&&(e=0);var t=this.weaponAttrs[e].angularSpeed,o=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_angulaspeed_p"]||0;return o>0&&(t=1/(1/t*(1+o))),t},e.prototype.getStopTime=function(e){void 0===e&&(e=0);var t=this.weaponAttrs[e].stopTime,o=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_stoptime_v"]||0;return o>0&&(t+=o),t},e.prototype.getHitCount=function(e){void 0===e&&(e=0);var t=this.weaponAttrs[e].hitCount,o=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_hitCount"]||0;return o>0&&(t+=o),t},e.prototype.getSenior=function(){return(p.WeaponModel.inst.magicAttrs["a_"+this.id+"_senior"]||0)>0},e.prototype.getLevel=function(){return this.levels.length+this.levels_extra.length},e.prototype.getLevelInfo=function(){return this.levels},e.prototype.getSkillInfo=function(){return this.skillInfo},e.prototype.canLevelUp=function(){return this.levels.length<this.maxLevel},e}();o.WeaponInfo=g,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Framework/Res/ResKeeperAddition":"ResKeeperAddition","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","../../Model/XiuLianModel":"XiuLianModel","./Bullet/BulletBase":"BulletBase"}],WeaponCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"797e4ZxUUpM8ZjDriBtHPjD","WeaponCtrl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Controller/GameBase"),s=e("../Controller/TableMgr"),c=e("../Define/Define"),l=e("../Define/EventId"),p=e("../Define/UIDefs"),u=e("../Framework/Event/EventMgr"),d=e("../Framework/UI/UIMgr"),h=e("../Framework/VM"),f=e("../Model/GameModel"),_=e("../Model/GodWeaponModel"),y=e("../Model/StoreModel"),g=e("../Model/UserModel"),m=e("../Model/WeaponModel"),v=e("./Weapon/WeaponBase"),M=cc._decorator,b=M.ccclass,E=(M.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),h.VM.bindPath("WeaponModel._skillPoint",this.updateSkill,this),u.EVENT.on(l.EventId.ON_GAME_LOADED,this.gameLoaded,this),u.EVENT.on(l.EventId.ON_GAME_SKILL_LEVEL_UP,this.onSkillLevelUp,this),u.EVENT.on(l.EventId.ON_GAME_SKILL_LEVEL_UP_EXTRA,this.onSkillLevelUpExtra,this),u.EVENT.on(l.EventId.ON_GAME_DRAW_SKILL_LEVEL_UP,this.onSkillDrawLevelUp,this),u.EVENT.on(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateMagicAttrs,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),h.VM.unbindPath("WeaponModel._skillPoint",this.updateSkill,this),u.EVENT.off(l.EventId.ON_GAME_LOADED,this.gameLoaded,this),u.EVENT.off(l.EventId.ON_GAME_SKILL_LEVEL_UP,this.onSkillLevelUp,this),u.EVENT.off(l.EventId.ON_GAME_SKILL_LEVEL_UP_EXTRA,this.onSkillLevelUpExtra,this),u.EVENT.off(l.EventId.ON_GAME_DRAW_SKILL_LEVEL_UP,this.onSkillDrawLevelUp,this),u.EVENT.off(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateMagicAttrs,this)},t.prototype.gameLoaded=function(){this.updateMagicAttrs();var e=m.WeaponModel.inst.magicAttrs.a_slevel_v;e>0&&(f.GameModel.inst.level+=e,m.WeaponModel.inst.skillPoint+=e)},t.prototype.updateSkill=function(e){if(e>0){if(d.default.inst.isUIOpen(p.UIType.SelectWeapon))return;if(!m.WeaponModel.inst.canWeaponLevelUp())return void(m.WeaponModel.inst.skillPoint=0);u.EVENT.emit(l.EventId.ON_GAME_PAUSE),d.default.inst.open(p.UIType.SelectWeapon)}},t.prototype.gameStart=function(){var e=m.WeaponModel.inst,t=s.TABLE.getStageSk(),o=t.get(g.UserModel.inst.selectStage);for(var n in null==o&&(o=t.get(t.getLength()-1)),o){var i=o[n].id;e.weaponList[i]=s.TABLE.getTable("sk_"+i)}var r=s.TABLE.getTable("StoreExchange"),a=y.StoreModel.inst.exchange_listed;if(r.forEach(function(t){!a.includes(t.id)||t.type!=c.EXCHANGE_TYPE.Skill_0&&t.type!=c.EXCHANGE_TYPE.Skill_1||(e.weaponList[t.lv]=s.TABLE.getTable("sk_"+t.lv))}),c.Config.debug,e.weapon2List.freezeAll=s.TABLE.getTable("sk_freezeAll"),e.weaponDrawList.draw1=s.TABLE.getTable("sk_draw1"),e.weaponDrawList.draw2=s.TABLE.getTable("sk_draw2"),e.weaponDrawList.draw3=s.TABLE.getTable("sk_draw3"),_.GodWeaponModel.inst.cur)for(var l=0;l<_.GodWeaponModel.inst.curLevel;l++)this.onSkillLevelUp("yunshi",l+1)},t.prototype.gameOver=function(){for(m.WeaponModel.inst.clear();this.node.children.length>0;)this.node.children.pop().destroy();this.releaseAutoRes()},t.prototype.onSkillLevelUp=function(e,t,o){var n=this,i=m.WeaponModel.inst.weaponInfos[e],r=m.WeaponModel.inst.weaponCom[e];if(null==r&&null==i){(i=m.WeaponModel.inst.weaponInfos[e]=new v.WeaponInfo(e)).levelUp(t);var a=e+"",s=a.substring(0,1).toUpperCase()+a.substring(1,a.length);this.loadBundleRes("Prefabs","/Game/Weapon/weapon"+s,cc.Prefab,function(t,i){var a=cc.instantiate(i);a.setParent(n.node),(r=m.WeaponModel.inst.weaponCom[e]=a.getComponent(v.WeaponBase)).updateAttrs(),o&&o()}),u.EVENT.emit(l.EventId.ON_GAME_SKILL_REFUSE,e)}else i.levelUp(t),r&&r.updateAttrs(),u.EVENT.emit(l.EventId.ON_GAME_SKILL_REFUSE,e),o&&o()},t.prototype.onSkillLevelUpExtra=function(e,t,o){var n=m.WeaponModel.inst.weaponInfos[e],i=m.WeaponModel.inst.weaponCom[e];null!=i&&null!=n?(n.extraLevelUp(t),i&&i.updateAttrs(),u.EVENT.emit(l.EventId.ON_GAME_SKILL_REFUSE,e),o&&o()):console.warn("\u4e0d\u80fd\u989d\u5916\u5347\u7ea7 \u6ca1\u6709\u5b66\u4e60\u7684\u6280\u80fd:",e)},t.prototype.onSkill2LevelUp=function(e,t){var o=this,n=m.WeaponModel.inst.weaponInfos[e],i=m.WeaponModel.inst.weapon2Com[e];if(null==i&&null==n){(n=m.WeaponModel.inst.weaponInfos[e]=new v.WeaponInfo(e)).levelUp(t);var r=e+"",a=r.substring(0,1).toUpperCase()+r.substring(1,r.length);this.loadBundleRes("Prefabs","/Game/Weapon/weapon"+a,cc.Prefab,function(t,n){var r=cc.instantiate(n);r.setParent(o.node),(i=m.WeaponModel.inst.weapon2Com[e]=r.getComponent(v.WeaponBase)).updateAttrs()})}else n.levelUp(t),i&&i.updateAttrs()},t.prototype.onSkillDrawLevelUp=function(e,t){var o=this,n=m.WeaponModel.inst.weaponInfos[e],i=m.WeaponModel.inst.weaponDrawCom[e];if(null==i&&null==n){(n=m.WeaponModel.inst.weaponInfos[e]=new v.WeaponInfo(e)).levelUp(t);var r=e+"",a=r.substring(0,1).toUpperCase()+r.substring(1,r.length);this.loadBundleRes("Prefabs","/Game/Weapon/weapon"+a,cc.Prefab,function(t,n){var r=cc.instantiate(n);r.setParent(o.node),(i=m.WeaponModel.inst.weaponDrawCom[e]=r.getComponent(v.WeaponBase)).updateAttrs(),u.EVENT.emit(l.EventId.ON_GAME_DRAW_SKILL_REFUSE,e)})}else n.levelUp(t),i&&i.updateAttrs(),u.EVENT.emit(l.EventId.ON_GAME_DRAW_SKILL_REFUSE,e)},t.prototype.onClearSkill=function(e){var t=m.WeaponModel.inst,o=t.weaponCom[e];null!=o&&(delete t.weaponInfos[e],delete t.weaponCom[e],o.node.destroy())},t.prototype.onClearSkill2=function(e){var t=m.WeaponModel.inst,o=t.weapon2Com[e];null!=o&&(delete t.weaponInfos[e],delete t.weapon2Com[e],o.node.destroy())},t.prototype.onClearSkillDraw=function(e){var t=m.WeaponModel.inst,o=t.weaponDrawCom[e];null!=o&&(delete t.weaponInfos[e],delete t.weaponDrawCom[e],o.node.destroy())},t.prototype.updateMagicAttrs=function(){var e,t=m.WeaponModel.inst;t.magicAttrs={};for(var o=0,n=f.GameModel.inst.fightList;o<n.length;o++){var i=n[o];if(null!=i)for(var r in i.magic){var a=i.magic[r],c=i.value[r];t.addMagic(a,c)}}var l=function(e){var o=g.UserModel.inst.talent[e],n=s.TABLE.getTable("talent").find(function(t){return t.id==e&&t.lv==o});if(null==n)return"continue";t.addMagic(n.magic,n.value)};for(var p in g.UserModel.inst.talent)l(p);for(var p in g.UserModel.inst.stageBoxSkill)c=g.UserModel.inst.stageBoxSkill[p],t.addMagic(p,c);if(t.magicAttrs.sk_freezeAll_lv>0){if(1==(null===(e=m.WeaponModel.inst.weaponInfos.freezeAll)||void 0===e?void 0:e.getLevel()))return;this.onSkill2LevelUp("freezeAll",1)}else this.onClearSkill2("freezeAll");for(var u=0,d=Object.values(m.WeaponModel.inst.weaponCom);u<d.length;u++)d[u].updateAttrs()},r([b],t)}(a.GameBase));o.default=E,cc._RF.pop()},{"../Controller/GameBase":"GameBase","../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/UI/UIMgr":"UIMgr","../Framework/VM":"VM","../Model/GameModel":"GameModel","../Model/GodWeaponModel":"GodWeaponModel","../Model/StoreModel":"StoreModel","../Model/UserModel":"UserModel","../Model/WeaponModel":"WeaponModel","./Weapon/WeaponBase":"WeaponBase"}],WeaponDrawBase:[function(e,t,o){"use strict";cc._RF.push(t,"d3b1f0jyMxFQZY6ANV0TaX2","WeaponDrawBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.WeaponDrawBase=void 0;var a=e("../../Model/WeaponModel"),s=e("./Bullet/BulletDrawBase"),c=e("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._activeTime=0,t._tempDrawPointsAll=null,t._tempDrawColorsAll=null,t._drawSkillUI=null,t}return i(t,e),t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this._weaponInfo.getSenior(),i=this.get(n?3+t:t);if(null!=i){var r=i.getComponent(s.BulletDrawBase);null!=r&&(i.setParent(this.getBulletParent(t)),e.type=t,e.attrs=this._weaponInfo.weaponAttrs[t],e.weapon=this._weaponInfo,r.setDraw(this._tempDrawPointsAll,this._tempDrawColorsAll),r.fire(e,function(e){o.put(t,r.node),o.fire(e,++t)}))}},t.prototype.updateAttrs=function(){this._activeTime=45,this._tempDrawPointsAll=a.WeaponModel.inst.tempDrawPointsAll.concat(),this._tempDrawColorsAll=a.WeaponModel.inst.tempDrawColorsAll.concat(),this._weaponInfo.levels=[1],this._weaponInfo.updateAttrs()},t.prototype.update=function(e){this._game.isPause||this._activeTime>0&&(this._activeTime-=e)},t.prototype.getDrawInfo=function(){return{points:this._tempDrawPointsAll,colors:this._tempDrawColorsAll,dur:this._activeTime}},r([p],t)}(c.WeaponBase));o.WeaponDrawBase=u,cc._RF.pop()},{"../../Model/WeaponModel":"WeaponModel","./Bullet/BulletDrawBase":"BulletDrawBase","./WeaponBase":"WeaponBase"}],WeaponModel:[function(e,t,o){"use strict";cc._RF.push(t,"079d9GbtIpMcI6qSog1EU8L","WeaponModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.WeaponModel=o.WeaponAttrs=void 0;var n=e("../Controller/TableMgr"),i=e("../Framework/Utils/Utils"),r=e("../Framework/VM");o.WeaponAttrs=function(){this.damage=1,this.aoeRange=1,this.bulletCount=1,this.duration=1,this.moveSpeed=1,this.angularSpeed=1,this.interval=1,this.hitCount=0,this.distance=0,this.effectInterval=1,this.stopTime=0,this.repelSpeed=0,this.upPos=0,this.rPos=0,this.upSpeed=0,this.rSpeed=0,this.upCount=0,this.rCount=0,this.hp=0,this.delay=0,this.warnInterval=0,this.warnRange=100,this.warnWidth=100,this.desc=""};var a=function(){function e(){this.weaponWeight=2,this._weaponList={},this._weapon2List={},this._weaponDrawList={},this._weaponCom={},this._weapon2Com={},this._weaponDrawCom={},this._weaponInfos={},this._skillPoint=0,this._tempDrawPointsAll=null,this._tempDrawColorsAll=null,this._magicAttrs={},this.weaponWeight=Number(n.TABLE.getGlobal("WeaponWeight"))||2,r.VM.add(this,"WeaponModel")}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skillPoint",{get:function(){return this._skillPoint},set:function(e){this._skillPoint=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tempDrawPointsAll",{get:function(){return this._tempDrawPointsAll},set:function(e){this._tempDrawPointsAll=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tempDrawColorsAll",{get:function(){return this._tempDrawColorsAll},set:function(e){this._tempDrawColorsAll=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magicAttrs",{get:function(){return this._magicAttrs},set:function(e){this._magicAttrs=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponCom",{get:function(){return this._weaponCom},set:function(e){this._weaponCom=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weapon2Com",{get:function(){return this._weapon2Com},set:function(e){this._weapon2Com=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponDrawCom",{get:function(){return this._weaponDrawCom},set:function(e){this._weaponDrawCom=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponList",{get:function(){return this._weaponList},set:function(e){this._weaponList=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weapon2List",{get:function(){return this._weapon2List},set:function(e){this._weapon2List=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponDrawList",{get:function(){return this._weaponDrawList},set:function(e){this._weaponDrawList=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponInfos",{get:function(){return this._weaponInfos},set:function(e){this._weaponInfos=e},enumerable:!1,configurable:!0}),e.prototype.getRandom=function(e){var t=[],o=[];for(var n in this._weaponList){var r=this._weaponList[n],a=this._weaponInfos[n];if(null==a)t.push(1),o.push({id:n,info:r[0]});else{var s=r.length,c=a.getLevelInfo();if(s<=c.length)continue;for(var l=this.weaponWeight/(s-c.length),p=0;p<r.length;p++){var u=r[p];c.indexOf(u.lv)<0&&(t.push(l),o.push({id:n,info:u}))}}}for(var d=[];d.length<e&&o.length>0;){var h=i.default.getRandWeightIndex(t),f=o.splice(h,1)[0];t.splice(h,1),d.push(f)}return d},e.prototype.getRandomExtra=function(e){var t=[];for(var o in this._weaponList){var n=this._weaponList[o];if(null!=this._weaponInfos[o])for(var i=1;i<n.length;i++){var r=n[i];t.push({id:o,info:r})}}for(var a=[];a.length<e&&t.length>0;){var s=cc.math.randomRangeInt(0,t.length),c=t.splice(s,1)[0];a.push(c)}return a},e.prototype.getRandomDraw=function(e){var t=Object.keys(this._weaponDrawList),o=t.indexOf(e);return o>=0&&t.splice(o,1),i.default.RandomSome(t,1)[0]},e.prototype.canWeaponLevelUp=function(){for(var e=0,t=Object.keys(this._weaponList);e<t.length;e++){var o=t[e],n=this._weaponInfos[o];if(null==n)return!0;if(n.canLevelUp())return!0}return!1},e.prototype.addMagic=function(e,t){null==this._magicAttrs[e]&&(this._magicAttrs[e]=0),this._magicAttrs[e]+=t},e.prototype.clear=function(){this._weaponList={},this._weapon2List={},this._weaponDrawList={},this._weaponCom={},this._weapon2Com={},this._weaponDrawCom={},this._weaponInfos={},this._skillPoint=0,this._tempDrawPointsAll=null,this._tempDrawColorsAll=null,this._magicAttrs={}},e._inst=null,e}();o.WeaponModel=a,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Framework/Utils/Utils":"Utils","../Framework/VM":"VM"}],XiuLianAD:[function(e,t,o){"use strict";cc._RF.push(t,"3d72e0NR+dD7I9hr5yVSPJL","XiuLianAD");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Controller/TimeMgr"),c=e("../../../Define/EventId"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/UI/UIMgr"),d=e("../../../Framework/UIBase"),h=e("../../../Model/XiuLianModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtCount=null,t.btnAd=null,t}return i(t,e),t.prototype.onOpen=function(){var e=s.default.inst.now();s.default.inst.isSameDay(s.default.inst.now(),h.XiuLianModel.inst.curDay)||(h.XiuLianModel.inst.curDay=e,h.XiuLianModel.inst.curDayCount=0),this.txtCount.string="\u4eca\u65e5\u5269\u4f59\u6b21\u6570\uff1a"+(h.XiuLianModel.inst.curDayCountMax-h.XiuLianModel.inst.curDayCount)},t.prototype.onClickConfirm=function(){var e=this;h.XiuLianModel.inst.curDayCount>=h.XiuLianModel.inst.curDayCountMax?u.default.inst.showToast("\u4eca\u65e5\u7684\u5feb\u901f\u4fee\u70bc\u6b21\u6570\u5df2\u7528\u5b8c"):a.default.inst.showAd("\u5feb\u901f\u4fee\u70bc",function(){l.AudioMgr.inst.playEffectByName("achievement"),h.XiuLianModel.inst.money+=Math.floor(h.XiuLianModel.inst.adTime/6e4*(h.XiuLianModel.inst.speed/60)),h.XiuLianModel.inst.curDayCount++,e.txtCount.string="\u4eca\u65e5\u5269\u4f59\u6b21\u6570\uff1a"+(h.XiuLianModel.inst.curDayCountMax-h.XiuLianModel.inst.curDayCount);var t=e.btnAd.node.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_XIULIAN,t,"RMoney"),e.close()})},t.prototype.onClickCancel=function(){this.close()},r([y(cc.Label)],t.prototype,"txtCount",void 0),r([y(cc.Button)],t.prototype,"btnAd",void 0),r([_],t)}(d.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TimeMgr":"TimeMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLianItem:[function(e,t,o){"use strict";cc._RF.push(t,"0bc45EUpKFDnptZo+0flLX9","XiuLianItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/UIDefs"),s=e("../../../Framework/Res/ResKeeper"),c=e("../../../Framework/UI/UIMgr"),l=e("../../../Model/XiuLianModel"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtNum=null,t.nodeNum=null,t.frame1=null,t.frame2=null,t.skillId="",t}return i(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.onClick=function(){c.default.inst.open(a.UIType.XiuLianTip,this.skillId)},t.prototype.updateLevel=function(){var e=l.XiuLianModel.inst.getLevel(this.skillId);e>0?(this.txtNum.string=""+e,this.nodeNum.active=!0):(this.txtNum.string="",this.nodeNum.active=!1),this.frame1.active=e<2*l.XiuLianModel.inst.levelMax,this.frame2.active=e>=2*l.XiuLianModel.inst.levelMax},r([d(cc.Sprite)],t.prototype,"icon",void 0),r([d(cc.Label)],t.prototype,"txtNum",void 0),r([d(cc.Node)],t.prototype,"nodeNum",void 0),r([d(cc.Node)],t.prototype,"frame1",void 0),r([d(cc.Node)],t.prototype,"frame2",void 0),r([d],t.prototype,"skillId",void 0),r([u],t)}(s.default);o.default=h,cc._RF.pop()},{"../../../Define/UIDefs":"UIDefs","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/UI/UIMgr":"UIMgr","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLianModel:[function(e,t,o){"use strict";cc._RF.push(t,"67e06df6DtI8IlqHuOkNEXK","XiuLianModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.XiuLianModel=o.XiuLianLevelValue=void 0;var n=e("../Controller/TableMgr"),i=e("../Controller/TimeMgr"),r=e("../Framework/Storage/LocalStorageMgr");o.XiuLianLevelValue={damage:.02,critRate:.005},Object.freeze(o.XiuLianLevelValue);var a=function(){function e(){this._money=0,this._starTime=0,this._levels={},this._levelMax=10,this._speed=200,this._curDayCount=0,this._curDayCountMax=3,this._curDay=0,this._adTime=72e5,this._offlineTime=144e5,this._money=Number(r.LocalStorageMgr.getItem("XiuLian_money"))||Number(n.TABLE.getGlobal("XiuLianMoney")),this._starTime=Number(r.LocalStorageMgr.getItem("XiuLian_starTime")),this._levels=JSON.parse(r.LocalStorageMgr.getItem("XiuLian_levels")||"{}"),this._curDay=Number(r.LocalStorageMgr.getItem("XiuLian_curDay")),this._curDayCount=Number(r.LocalStorageMgr.getItem("XiuLian_curDayCount")),this._speed=Number(n.TABLE.getGlobal("XiuLianSpeed")),this._curDayCountMax=Number(n.TABLE.getGlobal("XiuLiancurDayCountMax")),this._adTime=Number(n.TABLE.getGlobal("XiuLianAdTime")),this._offlineTime=Number(n.TABLE.getGlobal("XiuLianOfflineTime")),this._money<0&&(this._money=0)}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"money",{get:function(){return this._money},set:function(e){this._money=e,r.LocalStorageMgr.setItem("XiuLian_money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"starTime",{get:function(){return this._starTime},set:function(e){this._starTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(e){this._speed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},set:function(e){this._levels=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levelMax",{get:function(){return this._levelMax},set:function(e){this._levelMax=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curDayCount",{get:function(){return this._curDayCount},set:function(e){this._curDayCount=e,r.LocalStorageMgr.setItem("XiuLian_curDayCount",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curDay",{get:function(){return this._curDay},set:function(e){this._curDay=e,r.LocalStorageMgr.setItem("XiuLian_curDay",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curDayCountMax",{get:function(){return this._curDayCountMax},set:function(e){this._curDayCountMax=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adTime",{get:function(){return this._adTime},set:function(e){this._adTime=e},enumerable:!1,configurable:!0}),e.prototype.getCount=function(){var e=0;for(var t in this._levels)for(var o=this._levels[t],n=0,i=Object.keys(o);n<i.length;n++)e+=o[i[n]];return e},e.prototype.getMoney=function(){var e=n.TABLE.getTableInfo("XiuLianLevelUpMoney","num",this.getCount()),t=0;return e&&(t=e.money),t},e.prototype.forecastMoney=function(){var e=i.default.inst.now();if(0==this._starTime||null==this._starTime)return this._starTime=e,0;var t=e-this._starTime;t>this._offlineTime&&(t=this._offlineTime);var o=Math.floor(t/6e4);return 0==o?0:Math.floor(o*this._speed/60)},e.prototype.saveMoney=function(){var e=i.default.inst.now();if(0==this._starTime||null==this._starTime)return this._starTime=e,0;var t=e-this._starTime;t>this._offlineTime&&(t=this._offlineTime);var o=Math.floor(t/6e4);if(0==o)return 0;var n=6e4*o;return t==this._offlineTime?this._starTime=e:this._starTime+=n,this._money+=Math.floor(o*(this._speed/60)),r.LocalStorageMgr.setItem("XiuLian_money",""+this._money),r.LocalStorageMgr.setItem("XiuLian_starTime",""+this._starTime),n},e.prototype.saveLevel=function(){r.LocalStorageMgr.setItem("XiuLian_levels",""+JSON.stringify(this._levels))},e.prototype.getLevel=function(e){var t=this._levels[e];if(null==t)return 0;for(var o=0,n=0,i=Object.keys(t);n<i.length;n++)o+=t[i[n]];return o},e.prototype.getInfo=function(e){var t=this._levels[e];return null==t&&(t=this._levels[e]={damage:0,critRate:0}),t},e._inst=null,e}();o.XiuLianModel=a,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Controller/TimeMgr":"TimeMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr"}],XiuLianResult:[function(e,t,o){"use strict";cc._RF.push(t,"3bc5fqIJINJdJJdPS70y931","XiuLianResult");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/UI/UIFacade"),u=e("../../../Framework/UIBase"),d=e("../../../Framework/Utils/Utils"),h=e("../../../Model/XiuLianModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtMsg=null,t.btnAd=null,t._money=0,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=t.money,n=t.time;this._money=o,this.txtMsg.string=n>36e5?"\u5df2\u4fee\u70bc"+d.default.formatTime(n,"h\u5c0f\u65f6mm\u5206\u949f")+"\uff0c\u5171\n\u83b7\u5f97\u5185\u529b: "+o:n>6e5?"\u5df2\u4fee\u70bc"+d.default.formatTime(n,"mm\u5206\u949f")+"\uff0c\u5171\n\u83b7\u5f97\u5185\u529b: "+o:"\u5df2\u4fee\u70bc"+d.default.formatTime(n,"m\u5206\u949f")+"\uff0c\u5171\n\u83b7\u5f97\u5185\u529b: "+o},t.prototype.onClick=function(){c.AudioMgr.inst.playEffectByName("achievement");var e=this.btnAd.node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_XIULIAN,e,"RMoney"),this.close()},t.prototype.onClickAd=function(){var e=this;a.default.inst.showAd("\u4fee\u70bc\u989d\u5916\u9886\u53d6",function(){c.AudioMgr.inst.playEffectByName("achievement"),h.XiuLianModel.inst.money+=2*e._money,p.UIFacade.showToast("\u83b7\u5f97\u989d\u5916\u5185\u529b\uff1a"+2*e._money);var t=e.btnAd.node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_XIULIAN,t,"RMoney"),e.close()})},r([y(cc.Label)],t.prototype,"txtMsg",void 0),r([y(cc.Button)],t.prototype,"btnAd",void 0),r([_],t)}(u.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLianTip:[function(e,t,o){"use strict";cc._RF.push(t,"3bb83tX32BElJp84bCUZu9Z","XiuLianTip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Framework/UIBase"),c=e("../../../Model/XiuLianModel"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtName=null,t.txtDamage=null,t.txtCritRate=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=this,n=t,i=c.XiuLianModel.inst.getLevel(n),r=c.XiuLianModel.inst.getInfo(n);this.txtName.string=a.SKILL_NAME[n]+" | "+i+"\u7ea7",this.loadBundleRes("Textures",a.SKILL_ICON_URL[n],cc.SpriteFrame,function(e,t){o.icon.spriteFrame=t});var s=r.damage*c.XiuLianLevelValue.damage*100,l=r.critRate*c.XiuLianLevelValue.critRate*100;s=Math.floor(10*s)/10,l=Math.floor(10*l)/10,this.txtDamage.string="\u6280\u80fd\u4f24\u5bb3: +"+s+"%",this.txtCritRate.string="\u6280\u80fd\u66b4\u51fb\u7387: +"+l+"%"},r([u(cc.Sprite)],t.prototype,"icon",void 0),r([u(cc.Label)],t.prototype,"txtName",void 0),r([u(cc.Label)],t.prototype,"txtDamage",void 0),r([u(cc.Label)],t.prototype,"txtCritRate",void 0),r([p],t)}(s.default);o.default=d,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/UIBase":"UIBase","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLian:[function(e,t,o){"use strict";cc._RF.push(t,"5d5eaU4AJtMBYS90AW+l/1w","XiuLian");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/UI/UIFacade"),d=e("../../../Framework/UI/UIMgr"),h=e("../../../Framework/UIBase"),f=e("../../../Framework/Utils/Utils"),_=e("../../../Model/XiuLianModel"),y=e("./XiuLianItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtMoney=null,t.txtMoneyLevelUp=null,t.txtSpeed=null,t.layout=null,t.nodeSelect=null,t.tipAni=null,t._items=[],t._aniPlay=!1,t._money=0,t._dt=0,t}return i(t,e),t.prototype.onOpen=function(){l.AudioMgr.inst.playEffectByName("ui_open"),this._items=this.layout.getComponentsInChildren(y.default),this._money=_.XiuLianModel.inst.getMoney(),this.txtMoneyLevelUp.string=""+this._money,this.txtMoney.string=""+_.XiuLianModel.inst.money,this.txtSpeed.string=_.XiuLianModel.inst.speed+"/\u65f6",this.nodeSelect.active=!1,this.tipAni.node.active=!1,this.updateItem();var e=_.XiuLianModel.inst.saveMoney(),t=e/6e4;if(t>=5){var o=Math.floor(t*(_.XiuLianModel.inst.speed/60));d.default.inst.open(c.UIType.XiuLianResult,{money:o,time:e})}},t.prototype.onEnable=function(){p.EVENT.on(s.EventId.ON_UI_MAIN_FLY_XIULIAN,this.onIconFly,this)},t.prototype.onDisable=function(){p.EVENT.off(s.EventId.ON_UI_MAIN_FLY_XIULIAN,this.onIconFly,this)},t.prototype.onClose=function(){l.AudioMgr.inst.playEffectByName("ui_close")},t.prototype.onClickLevelUp=function(){var e=this;if(!this._aniPlay)if(_.XiuLianModel.inst.money<this._money)u.UIFacade.showToast("\u5185\u529b\u4e0d\u8db3");else{var t=[];if(this._items.forEach(function(e){var o=e.skillId;_.XiuLianModel.inst.getLevel(o)<2*_.XiuLianModel.inst.levelMax&&t.push(o)}),0!=t.length){var o=f.default.getRandToArray(t),n=_.XiuLianModel.inst.getInfo(o),i=Object.keys(n).filter(function(e){return n[e]<_.XiuLianModel.inst.levelMax});n[f.default.getRandToArray(i)]+=1,this._money=_.XiuLianModel.inst.getMoney(),this.txtMoneyLevelUp.string=""+this._money,_.XiuLianModel.inst.saveLevel(),_.XiuLianModel.inst.money-=this._money,this._aniPlay=!0;var r=5.1,a=.5,s=0,c=this._items.length,p=Math.floor(Math.random()*c),d=function(t){if(r-=t,(a-=t/10)<.15&&(a=.15),!((s+=t)<a)){if(r<=0){var n=e._items.find(function(e){return e.skillId==o}).node;return e.nodeSelect.setParent(n),e.nodeSelect.setSiblingIndex(2),e.updateItem(),e.unschedule(d),e._aniPlay=!1,void l.AudioMgr.inst.playEffectByName("talentLevelUp")}s-=a;for(var i=p;i==p;)p=Math.floor(Math.random()*c);var u=e._items[p].node;e.nodeSelect.setParent(u),e.nodeSelect.setSiblingIndex(2),l.AudioMgr.inst.playEffectByName("talentSelect")}};this.schedule(d);var h=this._items[p].node;this.nodeSelect.active=!0,this.nodeSelect.setParent(h),this.nodeSelect.setSiblingIndex(2)}else u.UIFacade.showToast("\u6280\u80fd\u5df2\u7ecf\u5168\u90e8\u4fee\u70bc\u6ee1\u4e86")}},t.prototype.onClickAD=function(){this._aniPlay||d.default.inst.open(c.UIType.XiuLianAD)},t.prototype.onClickTipOpen=function(){this._aniPlay||(this.tipAni.node.active=!0,this.tipAni.play("TipOpen"))},t.prototype.onClickTipClose=function(){var e=this;this.tipAni.play("TipClose"),this.tipAni.once(cc.Animation.EventType.FINISHED,function(){e.tipAni.node.active=!1})},t.prototype.onClickMoney=function(){a.Config.debug&&(_.XiuLianModel.inst.money+=1e3,this.txtMoney.string=""+_.XiuLianModel.inst.money)},t.prototype.onIconFly=function(e){p.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,e,"XiuLian",null,{target:this.txtMoney.node})},t.prototype.updateItem=function(){this._items.forEach(function(e){return e.updateLevel()})},t.prototype.update=function(e){this._dt+=e,this._dt>1&&(this._dt-=1,_.XiuLianModel.inst.saveMoney(),this.txtMoney.string=""+_.XiuLianModel.inst.money)},r([v(cc.Label)],t.prototype,"txtMoney",void 0),r([v(cc.Label)],t.prototype,"txtMoneyLevelUp",void 0),r([v(cc.Label)],t.prototype,"txtSpeed",void 0),r([v(cc.Layout)],t.prototype,"layout",void 0),r([v(cc.Node)],t.prototype,"nodeSelect",void 0),r([v(cc.Animation)],t.prototype,"tipAni",void 0),r([m],t)}(h.default);o.default=M,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Model/XiuLianModel":"XiuLianModel","./XiuLianItem":"XiuLianItem"}],i18nLabel:[function(e,t,o){"use strict";cc._RF.push(t,"bdd3f9Ro3BLUZ5panwzcqm4","i18nLabel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nLabel=void 0;var a=e("./i18nMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=s.inspector,u=s.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._i18n_code="",t._i18n_params=[],t}return i(t,e),Object.defineProperty(t.prototype,"i18nCode",{get:function(){return this._i18n_code},set:function(e){this._i18n_code=e,this.setValue()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"i18nParams",{get:function(){return this._i18n_params},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"params",{set:function(e){this._i18n_params=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){a.i18nMgr._addOrDelLabel(this,!0),this.resetValue()},t.prototype.onDestroy=function(){a.i18nMgr._addOrDelLabel(this,!1)},t.prototype.setString=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._i18n_code=e,this._i18n_params=t,this.setValue()},t.prototype.setValue=function(){var e=a.i18nMgr.getLabel(this._i18n_code,this._i18n_params);null!=e&&(this.string=e)},t.prototype.resetValue=function(){this.setValue()},r([l({visible:!1})],t.prototype,"_i18n_code",void 0),r([l({type:cc.String})],t.prototype,"i18nCode",null),r([l({visible:!1})],t.prototype,"_i18n_params",void 0),r([l({type:[cc.String]})],t.prototype,"i18nParams",null),r([c,u("i18n:MAIN_MENU.component.renderers/i18nLabel"),p("packages://module/inspectors/i18nLabel.js")],t)}(cc.Label);o.i18nLabel=d,cc._RF.pop()},{"./i18nMgr":"i18nMgr"}],i18nMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0c6cckje/1Ci44bE4J+753g","i18nMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.i18nMgr=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),t.checkInit=function(){this.language||this.setLanguage("zh")},t.setLanguage=function(e){this.language!==e&&(this.language=e,this.reloadLabel(),this.reloadSprite())},t.getLanguage=function(){return this.language},t._addOrDelLabel=function(e,t){if(this.checkInit(),t)this.labelArr.push(e);else{var o=this.labelArr.indexOf(e);-1!==o&&this.labelArr.splice(o,1)}},t.addOrDelSprite=function(e,t){if(t)this.spriteArr.push(e);else{var o=this.spriteArr.indexOf(e);-1!==o&&this.spriteArr.splice(o,1)}},t.getLabel=function(e,t){var o=this.labelData[e];return null==o?null:null==t||0===t.length?o:this.placeholder(o,t)},t.placeholder=function(e,t){for(var o=0;o<t.length;o++){var n=new RegExp("\\{"+o+"\\}+","g");e=e.replace(n,t[o])}return e},t.reloadLabel=function(){var e=this,t="Language/"+this.language;cc.resources.load(t,cc.JsonAsset,function(t,o){t?(console.error(t),e.labelData={}):e.labelData=o.json;for(var n=0,i=e.labelArr;n<i.length;n++)i[n].resetValue()})},t.reloadSprite=function(){for(var e=0,t=this.spriteArr;e<t.length;e++)t[e].resetValue()},t.language="",t.labelArr=[],t.labelData={},t.spriteArr=[],t}(e("../Res/ResKeeper").default);o.i18nMgr=r,cc._RF.pop()},{"../Res/ResKeeper":"ResKeeper"}],i18nSprite:[function(e,t,o){"use strict";cc._RF.push(t,"c5883VlXcdPzoiL5F0hH3os","i18nSprite");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nSprite=void 0;var a=e("./i18nMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=s.inspector,u=s.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._i18n_code="",t}return i(t,e),Object.defineProperty(t.prototype,"i18nCode",{get:function(){return this._i18n_code},set:function(e){this._i18n_code=e,this.resetValue()},enumerable:!1,configurable:!0}),t.prototype.start=function(){a.i18nMgr.addOrDelSprite(this,!0),this.resetValue()},t.prototype.onDestroy=function(){a.i18nMgr.addOrDelSprite(this,!1),this.spriteFrame&&this.spriteFrame.decRef()},t.prototype.resetValue=function(){var e=this;this._getSprite(this._i18n_code,function(t){e.spriteFrame=t})},t.prototype._getSprite=function(e){var t=this,o=a.i18nMgr.getLanguage();if(null!=o){var n="i18n/sprite/"+o+"/"+e;Editor?cc.resources.load(n,cc.SpriteFrame,function(e,o){e?cc.error("i18n load :"+n+" fail!"):cc.isValid(t.node)&&(t.spriteFrame=o)}):cc.resources.load(n,cc.SpriteFrame,function(e,o){if(e)cc.error("i18n load :"+n+" fail!");else if(cc.isValid(t.node)){var i=t.spriteFrame;t.spriteFrame=null,t.spriteFrame=o,t.spriteFrame.addRef(),i&&i.decRef()}})}},r([l({visible:!1})],t.prototype,"_i18n_code",void 0),r([l({type:cc.String})],t.prototype,"i18nCode",null),r([c,u("i18n:MAIN_MENU.component.renderers/i18nSprite"),p("packages://module/inspectors/i18nSprite.js")],t)}(cc.Sprite);o.i18nSprite=d,cc._RF.pop()},{"./i18nMgr":"i18nMgr"}]},{},["AdMgr","GameBase","GameItemBase","GameItemMgr","ItemMgr","LayerMgr","NativeAD","NativeMgr","TableMgr","TimeMgr","Define","EventId","LocalKey","RedDotKey","SceneDef","StaticData","UIDefs","AudioMgr","RTAudioSource","RTAudioSourceMgr","RTClickSound","EventMgr","RedDot","RedDotHandler","List","ListItem","RenderToTarget","BytedanceSDK","NodePool","ResKeeper","ResKeeperAddition","ResLoader","SceneBase","SceneMgr","LocalStorageMgr","TeMap","UIBase","CommonToast","UICloseAnimation","UIFacade","UIMgr","UIOpenAnimation","Singleton","Utils","VectorUtil","VM","i18nLabel","i18nMgr","i18nSprite","MonsterComponent","PetComponent","PlayerComponent","ComHitBeEffect","ComHitEffect","ComHitNum","HpBar","PickUpBase","PickUpBox","PickUpEquip","PickUpExp","PickUpFood","PickUpLbs","Joystick","MonsterCtrl","ComBulletChongfeng","ComBulletDici","ComBulletFeijian","ComBulletLiandao","ComBulletMofadan","ComBulletMofadanZ","ComBulletXialuo","MonsterCircle","MonsterGroup","ComMonsterChongfeng","ComMonsterDici","ComMonsterFeijian","ComMonsterLiandao","ComMonsterMofadan","ComMonsterXialuo","MonsterWeapon","NpcBase","PlayerCtrl","ComWarnBox","ComWarnCircle","WarnBase","WeaponCtrl","BulletBase","BulletDrawBase","ComBulletBanyue","ComBulletBishou","ComBulletChushou","ComBulletChushouZ","ComBulletChushouZ2","ComBulletCommon","ComBulletCommonPet","ComBulletDasuan","ComBulletDianWang","ComBulletDraw1","ComBulletDraw1Z","ComBulletDraw2","ComBulletDraw3","ComBulletDraw3Z","ComBulletFeidao","ComBulletFeidaoZ","ComBulletFreezeAll","ComBulletGunshi","ComBulletGunshiZ","ComBulletHudun","ComBulletJianta","ComBulletJiantaZ","ComBulletJiguang","ComBulletLeidian","ComBulletLiuxingchui","ComBulletLiuxingchuiSenior","ComBulletMozhua","ComBulletMozhuaZ","ComBulletQiang","ComBulletQuan","ComBulletQuanZ","ComBulletShufu","ComBulletTaijilun","ComBulletXuanfeng","ComBulletYunShi","ComBulletYunShiZ","ComBulletZhengguo","ComWeaponBanyue","ComWeaponBishou","ComWeaponChushou","ComWeaponCommon","ComWeaponCommonPet","ComWeaponDasuan","ComWeaponDianwang","ComWeaponDraw1","ComWeaponDraw2","ComWeaponDraw3","ComWeaponFeidao","ComWeaponFreezeAll","ComWeaponGunshi","ComWeaponHudun","ComWeaponJianta","ComWeaponJiguang","ComWeaponLeidian","ComWeaponLiuxingchui","ComWeaponMozhua","ComWeaponQiang","ComWeaponQuan","ComWeaponShufu","ComWeaponTaijilun","ComWeaponXuanfeng","ComWeaponYunshi","ComWeaponZhengguo","WeaponBase","WeaponDrawBase","GodGuide","GuideCollider","GuideText","GuideTask1","GuideTask2","GuideTask3","GuideTask4","GuideTask5","GuideTask6","GuideTask7","Task","AchievementModel","GameModel","GodBackModel","GodBase","GodPetModel","GodRideModel","GodSkinModel","GodWeaponModel","MagnetModel","StoreModel","TaskModel","UserModel","WeaponModel","XiuLianModel","TestMonster","TestWeapon","IconItem","SkillDrawUI","SkillItem","SkillUI","Bootstrap","Main","Achievement","AchievementItem","Confirm","DrawSkill","EliteBox","FightEquip","FightEquipGuide","FightEquipItem","FightEquipTips","SelectWeapon","SelectWeaponItem","GameOver","GamePause","GameStart","GetG1Money","GetMoney","GodMenu","GodMenuInfo","GodMenuNew","GodMenuView","GodMenuViewItem","GodWeaponReward","Loading","Magnet","AgeTips","StoreReview","Setting","StageBox","StageBoxItem","StageBoxTips","StageMap","StageMapBox","StageMapItem","Store","Store_Exchange","Store_ExchangeInfo","Store_ExchangeItem","Store_Money","Talent","TalentItem","UIGame","UIMain","XiuLian","XiuLianAD","XiuLianItem","XiuLianResult","XiuLianTip"]);