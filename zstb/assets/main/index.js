window.__require=function e(t,o,n){function i(a,s){if(!o[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=o[a]={exports:{}};t[a][0].call(p.exports,function(e){return i(t[a][1][e]||e)},p,p.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AchievementItem:[function(e,t,o){"use strict";cc._RF.push(t,"502ec5yLPJN8Iv91DYFocve","AchievementItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/i18n/i18nMgr"),s=e("../../../Model/AchievementModel"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.desc1=null,t.desc2=null,t.rNum=null,t.pbNum=null,t.pb=null,t.btns=[],t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.updateDate=function(e){this._dataSource=e;var t=e.id,o=s.AchievementModel.inst.levels[t]||0,n=s.AchievementModel.inst.points[t]||0,i=e.count[o],r=e.rewardNum[o];o>=e.count.length?(this.btns.forEach(function(e,t){return e.node.active=0==t}),this.desc2.string="\u5168\u90e8\u8fbe\u6210",i=e.count[o-1],r=e.rewardNum[o-1]):n>=i?(this.btns.forEach(function(e,t){return e.node.active=1==t}),this.desc2.string="\u9886\u53d6"):(this.btns.forEach(function(e,t){return e.node.active=2==t}),this.desc2.string="\u9886\u53d6"),this.pb.progress=n/i,this.pbNum.string=n+" / "+i,this.rNum.string=""+r,this.desc1.string=a.i18nMgr.placeholder("Lv."+(o+1)+" "+e.desc,[""+i])},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([p(cc.Label)],t.prototype,"desc1",void 0),r([p(cc.Label)],t.prototype,"desc2",void 0),r([p(cc.Label)],t.prototype,"rNum",void 0),r([p(cc.Label)],t.prototype,"pbNum",void 0),r([p(cc.ProgressBar)],t.prototype,"pb",void 0),r([p(cc.Button)],t.prototype,"btns",void 0),r([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/AchievementModel":"AchievementModel"}],AchievementModel:[function(e,t,o){"use strict";cc._RF.push(t,"862b8w7hrJGKYZFo8e69WYS","AchievementModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.AchievementModel=void 0;var n=e("../Controller/TableMgr"),i=e("../Define/RedDotKey"),r=e("../Framework/Event/RedDot"),a=e("../Framework/Storage/LocalStorageMgr"),s=function(){function e(){this._info=[],this._levels=[],this._points=[],this._param={},this._info=n.TABLE.getTable("Achievement"),this._levels=JSON.parse(a.LocalStorageMgr.getItem("Achievement_levels"))||[],this._points=JSON.parse(a.LocalStorageMgr.getItem("Achievement_points"))||[],this._param=JSON.parse(a.LocalStorageMgr.getItem("Achievement_param"))||{},this.sort()}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"info",{get:function(){return this._info},set:function(e){this._info=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},set:function(e){this._levels=e,a.LocalStorageMgr.setItem("Achievement_levels",JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this._points},set:function(e){this._points=e,a.LocalStorageMgr.setItem("Achievement_points",JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"param",{get:function(){return this._param},set:function(e){this._param=e,a.LocalStorageMgr.setItem("Achievement_param",JSON.stringify(e))},enumerable:!1,configurable:!0}),e.prototype.addPoint=function(e,t){void 0===t&&(t=1);var o=this.points[e]||0;this.points[e]=o+t,this.points=this._points,this.sort()},e.prototype.updatePoint=function(e,t){switch(e){case 2:case 22:var o=this.param[e];null==o&&(o=[]),o.indexOf(t)<0&&(o.push(t),this.param[e]=o,this.param=this._param,this.points[e]=o.length,this.points=this._points);break;default:(this.points[e]||0<t)&&(this.points[e]=t,this.points=this._points)}this.sort()},e.prototype.checkGet=function(){var e=this,t=!!this._info.find(function(t){var o=e._points[t.id]||0,n=e._levels[t.id]||0;return o>=t.count[n]});return r.RedDot.inst.setRedDot(i.RedDotKey.Achievement,t?1:0),t},e.prototype.sort=function(){var e=this;this._info.sort(function(t,o){var n=e._points[t.id]||0,i=e._levels[t.id]||0,r=e._points[o.id]||0,a=e._levels[o.id]||0;return n>=t.count[i]&&r>=o.count[a]?t.sort-o.sort:n>=t.count[i]?-1:r>=o.count[a]?1:t.sort-o.sort})},e._inst=null,e}();o.AchievementModel=s,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/RedDotKey":"RedDotKey","../Framework/Event/RedDot":"RedDot","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr"}],Achievement:[function(e,t,o){"use strict";cc._RF.push(t,"08417RKY/RG8Z+54zzJAD6K","Achievement");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Audio/AudioMgr"),c=e("../../../Framework/Event/EventMgr"),l=e("../../../Framework/List/List"),p=e("../../../Framework/UIBase"),u=e("../../../Framework/VM"),d=e("../../../Model/AchievementModel"),h=e("../../../Model/UserModel"),f=e("./AchievementItem"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moneyTxt=null,t.rMoneyTxt=null,t.list=null,t}return i(t,e),t.prototype.onOpen=function(){s.AudioMgr.inst.playEffectByName("ui_open"),this.updateMoney(h.UserModel.inst.money),this.updateRMoney(h.UserModel.inst.rMoney),this.list.numItems=d.AchievementModel.inst.info.length},t.prototype.onEnable=function(){u.VM.bindPath("UserModel._money",this.updateMoney,this),u.VM.bindPath("UserModel._rMoney",this.updateRMoney,this)},t.prototype.onDisable=function(){u.VM.unbindPath("UserModel._money",this.updateMoney,this),u.VM.unbindPath("UserModel._rMoney",this.updateRMoney,this)},t.prototype.onListRender=function(e,t){var o=this,n=e.getComponent(f.default);n.updateDate(d.AchievementModel.inst.info[t]);var i=n.btns[1];i.node.targetOff(cc.Node.EventType.TOUCH_END),i.node.on(cc.Node.EventType.TOUCH_END,function(){s.AudioMgr.inst.playEffectByName("achievement");var e=d.AchievementModel.inst.info[t],i=e.id,r=d.AchievementModel.inst.levels[i]||0,l=e.rewardNum[r],p=n.icon.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(a.EventId.ON_UI_MAIN_FLY_ICON,p,"RMoney",null,{target:o.rMoneyTxt.node}),h.UserModel.inst.rMoney+=l,d.AchievementModel.inst.levels[i]=r+1,d.AchievementModel.inst.levels=d.AchievementModel.inst.levels,d.AchievementModel.inst.sort(),o.list.updateAll()})},t.prototype.updateMoney=function(e){this.moneyTxt.string=""+e},t.prototype.updateRMoney=function(e){this.rMoneyTxt.string=""+e},r([g(cc.Label)],t.prototype,"moneyTxt",void 0),r([g(cc.Label)],t.prototype,"rMoneyTxt",void 0),r([g(l.default)],t.prototype,"list",void 0),r([y],t)}(p.default);o.default=m,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/UIBase":"UIBase","../../../Framework/VM":"VM","../../../Model/AchievementModel":"AchievementModel","../../../Model/UserModel":"UserModel","./AchievementItem":"AchievementItem"}],AdMgr:[function(e,t,o){"use strict";cc._RF.push(t,"2284f7DjJJAlqQaY1Tco2wC","AdMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Framework/Audio/AudioMgr"),a=e("../Framework/UI/UIFacade"),s=e("../Framework/Utils/Singleton"),c=e("../Model/AchievementModel"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._debug=!1,t}return i(t,e),t.prototype._onAdComplete=function(){this._isComplete=!0},t.prototype._onAdCancel=function(){var e=this;setTimeout(function(){return e._eventCancel&&e._eventCancel()},100)},t.prototype._onAdClose=function(){var e=this;this._eventClose(),this._isComplete&&(this._isComplete=!1,setTimeout(function(){return e._eventComplete&&e._eventComplete()},100),c.AchievementModel.inst.addPoint(20))},t.prototype.loadAd=function(e){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdSDK","loadAd","(Ljava/lang/String;)V",e):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","loadAd:",e))},t.prototype.showAd=function(e,t,o){var n=this;(function(){if(cc.sys.isNative&&!n._debug){var i=!1;if(cc.sys.os===cc.sys.OS_ANDROID?i=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AdSDK","showAd","(Ljava/lang/String;Ljava/lang/String;)Z","",e):cc.sys.os===cc.sys.OS_IOS&&(i=jsb.reflection.callStaticMethod("AppController","showAd:AdName:","",e)),!i)return a.UIFacade.showToast("\u5e7f\u544a\u8fd8\u6ca1\u51c6\u5907\u597d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),void r.AudioMgr.inst.playEffectByName("ui_not");cc.audioEngine.pauseAll(),cc.game.pause(),n._isComplete=!1,n._eventComplete=t,n._eventCancel=o,n._eventClose=function(){cc.game.resume(),cc.audioEngine.resumeAll()}}else n._eventComplete=t,n._eventCancel=null,n._onAdComplete(),n._onAdClose()})()},t}(s.Singleton());o.default=l,window.AD=l.inst,cc._RF.pop()},{"../Framework/Audio/AudioMgr":"AudioMgr","../Framework/UI/UIFacade":"UIFacade","../Framework/Utils/Singleton":"Singleton","../Model/AchievementModel":"AchievementModel"}],AgeTips:[function(e,t,o){"use strict";cc._RF.push(t,"8b6056toeVJUYEBnNyai8/K","AgeTips");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onOpen=function(){},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"8755al2TJxGM74sdOuBFoCr","AudioMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.AudioMgr=void 0;var a=e("../Audio/RTAudioSource"),s=e("./RTAudioSourceMgr"),c=e("../Res/ResKeeper"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bgmAudio=null,t._effectClips=new Map,t._onceEffect=new Map,t._loopEffect=new Map,t}var o;return i(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return o._inst?o._inst:(cc.error("AudioMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._inst=this,this.initClip()},t.prototype.playBgm=function(e,t){var o=this;void 0===e&&(e="bgm"),void 0===t&&(t=0),this._bgmAudio&&this._bgmAudio.node.destroy(),this._bgmAudio=null,this.loadRes("Audio/"+e,function(e,n){var i=n;if(null!=i){var r=o._bgmAudio;null==r&&((r=(new cc.Node).addComponent(a.default)).audioType=a.RTAudioSourceType.Music,r.node.name=i.name,r.node.setParent(o.node),o._bgmAudio=r),r.isPlaying||(r.playOnLoad=!0,r.loop=!0,r.clip=i,r.setCurrentTime(t),r.play())}else cc.warn("audio: 'bgm' not found")})},t.prototype.gameShow=function(){var e=this;if(this.setEffectVolume(1),this.setMusicVolume(1),this._bgmAudio){var t=this._bgmAudio.getCurrentTime();this._bgmAudio.stop(),this.scheduleOnce(function(){e._bgmAudio.setCurrentTime(t),e._bgmAudio.play()},.3)}},t.prototype.gameHide=function(){this.setEffectVolume(0),this.setMusicVolume(0)},t.prototype.playEffect=function(e,t){void 0===t&&(t=0),s.default.inst.isEffectMute()||this.scheduleOnce(function(){cc.audioEngine.playEffect(e,!1)},t)},t.prototype.playEffectByName=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=0);var n=this._effectClips.get(e);n&&this.playEffect(n,o)},t.prototype.playLoopEffect=function(e){var t=this._loopEffect.get(e);null==t&&((t=(new cc.Node).addComponent(a.default)).audioType=a.RTAudioSourceType.Effect,t.node.name=e.name,t.node.setParent(this.node),t.playOnLoad=!0,t.clip=e,this._loopEffect.set(e,t)),t.isPlaying||(t.loop=!0,t.play())},t.prototype.playLoopEffectByName=function(e){var t=this._effectClips.get(e);t&&this.playLoopEffect(t)},t.prototype.stopLoopEffect=function(e){var t=this._loopEffect.get(e);t&&t.stop()},t.prototype.stopLoopEffectByName=function(e){var t=this._effectClips.get(e);t&&this.stopLoopEffect(t)},t.prototype.getLoopEffectSourceByName=function(e){var t=this._effectClips.get(e);return this._loopEffect.get(t)},t.prototype.getClipByName=function(e){return this._effectClips.get(e)},t.prototype.stopEffectAll=function(){this._loopEffect.forEach(function(e){return e.stop()})},t.prototype.initClip=function(){var e=this;s.default.inst.init(),cc.resources.loadDir("Audio/",cc.AudioClip,function(t,o){for(var n=0;n<o.length;n++){var i=o[n];e._effectClips.set(i.name,i)}})},t.prototype.setMusicVolume=function(e,t){void 0===t&&(t=!1),s.default.inst.setMusicVolume(e,t)},t.prototype.setEffectVolume=function(e,t){void 0===t&&(t=!1),s.default.inst.setEffectVolume(e,t)},t.prototype.muteAllMusic=function(e,t){void 0===t&&(t=!1),s.default.inst.muteAllMusic(e,t)},t.prototype.muteAllEffect=function(e,t){void 0===t&&(t=!1),s.default.inst.muteAllEffect(e,t)},o=r([p],t)}(c.default));o.AudioMgr=u,cc._RF.pop()},{"../Audio/RTAudioSource":"RTAudioSource","../Res/ResKeeper":"ResKeeper","./RTAudioSourceMgr":"RTAudioSourceMgr"}],Bootstrap:[function(e,t,o){"use strict";cc._RF.push(t,"1b9089GT51Gsaycn08Qai4h","Bootstrap");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../Controller/NativeMgr"),l=e("../../Controller/TableMgr"),p=e("../../Controller/TimeMgr"),u=e("../../Define/SceneDef"),d=e("../../Define/UIDefs"),h=e("../../Framework/Audio/AudioMgr"),f=e("../../Framework/Event/RedDot"),_=e("../../Framework/i18n/i18nMgr"),y=e("../../Framework/Scene/SceneBase"),g=e("../../Framework/Scene/SceneMgr"),m=e("../../Framework/UI/UIMgr"),v=cc._decorator,M=v.ccclass,b=v.property,I=!1,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logo=null,t.uiRoot=null,t.audioRoot=null,t}return i(t,e),t.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return s(this,function(){return c.default.inst.gameInit(),cc.tween(this.logo).delay(1).to(1,{opacity:0}).call(this.initEnd.bind(this)).start(),[2]})})},t.prototype.start=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return _.i18nMgr.setLanguage("zh"),f.RedDot.inst.init(),I?[2]:(I=!0,[4,this.initFramework()]);case 1:return e.sent(),[2]}})})},t.prototype.initFramework=function(){return a(this,void 0,void 0,function(){var e,t,o=this;return s(this,function(n){switch(n.label){case 0:return[4,l.TABLE.loadTableRes()];case 1:return n.sent(),e=cc.instantiate(this.uiRoot),cc.director.getScene().addChild(e),t=cc.instantiate(this.audioRoot),cc.director.getScene().addChild(t),cc.game.addPersistRootNode(e),cc.game.addPersistRootNode(t),this.resoucreLoading(function(){o.initGame()}),[2]}})})},t.prototype.initGame=function(){return a(this,void 0,void 0,function(){return s(this,function(){return h.AudioMgr.inst.initClip(),m.default.inst.createCache(),[2]})})},t.prototype.initEnd=function(){cc.game.targetOff(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,function(){h.AudioMgr.inst.gameShow(),cc.game.resume()}),cc.game.targetOff(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,function(){h.AudioMgr.inst.gameHide(),cc.game.pause()}),p.default.inst.init(function(e){e?(cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){m.default.inst.delayUIWaitAnim(1),m.default.inst.open(d.UIType.GameStart),m.default.inst.open(d.UIType.UIMain),m.default.inst.close(d.UIType.Loading)}),m.default.inst.delayUIWaitAnim(60),m.default.inst.open(d.UIType.Loading),g.SceneMgr.inst.loadScene(u.SceneType.Main),c.default.inst.gameStart()):c.default.inst.networkErr()})},t.prototype.resoucreLoading=function(e){cc.assetManager.loadBundle("Textures",function(t){t||cc.assetManager.loadBundle("Prefabs",function(t){t||e&&e()})})},t.prototype.onClickAgeTip=function(){m.default.inst.open(d.UIType.AgeTips)},t.prototype.onClickUserFeedback=function(){c.default.inst.openUserFeedback()},r([b(cc.Node)],t.prototype,"logo",void 0),r([b(cc.Prefab)],t.prototype,"uiRoot",void 0),r([b(cc.Prefab)],t.prototype,"audioRoot",void 0),r([M],t)}(y.default);o.default=E,cc._RF.pop()},{"../../Controller/NativeMgr":"NativeMgr","../../Controller/TableMgr":"TableMgr","../../Controller/TimeMgr":"TimeMgr","../../Define/SceneDef":"SceneDef","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/RedDot":"RedDot","../../Framework/Scene/SceneBase":"SceneBase","../../Framework/Scene/SceneMgr":"SceneMgr","../../Framework/UI/UIMgr":"UIMgr","../../Framework/i18n/i18nMgr":"i18nMgr"}],BulletBase:[function(e,t,o){"use strict";cc._RF.push(t,"618e0hJ1Y1HoqPTssE6koFE","BulletBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletBase=void 0;var a=e("../../Model/GameModel"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._dmgRandRange=new cc.Vec2(-.15,.15),t._game=a.GameModel.inst,t._arg=null,t._target=null,t._type=-1,t._attrs=null,t._weapon=null,t._callback=null,t._damage=0,t._crit=0,t._critDamage=0,t}return i(t,e),t.prototype.reuse=function(){},t.prototype.unuse=function(){},t.prototype.fire=function(e,t){this._arg=e,this._target=e.target,this._type=e.type,this._attrs=e.attrs,this._weapon=e.weapon,this._callback=t,this._damage=this._weapon.getDamage(this._type)*this._game.player.atk,this._crit=this._weapon.getCrit(),this._critDamage=this._weapon.getCritDamage()},t.prototype.getDamage=function(){var e=cc.math.randomRange(this._dmgRandRange.x,this._dmgRandRange.y),t=this._damage*(1+e),o=Math.random()<this._crit;return o&&(t*=this._critDamage),{damage:t=Math.round(t),crit:o}},r([c],t)}(cc.Component));o.BulletBase=l,cc._RF.pop()},{"../../Model/GameModel":"GameModel"}],BulletDrawBase:[function(e,t,o){"use strict";cc._RF.push(t,"3087ctLq51JA6ip2P4r3Gzm","BulletDrawBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletDrawBase=void 0;var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphics=null,t._width=20,t._color=cc.color(0,0,0),t._tempDrawPointsAll=null,t._tempDrawColorsAll=null,t}return i(t,e),t.prototype.setDraw=function(e,t){this._tempDrawPointsAll!=e&&this._tempDrawColorsAll!=t&&(this._tempDrawPointsAll=e,this._tempDrawColorsAll=t,this.draw())},t.prototype.draw=function(){if(null!=this.graphics){var e=this.graphics,t=this._tempDrawPointsAll.concat();for(var o in t){var n=t[o],i=this._tempDrawColorsAll[o];this._color=cc.color(i.x,i.y,i.z);for(var r=[],a=0,s=n;a<s.length;a++){var c=s[a];r.push({x:c.x,y:c.y});var l=r.length;if(l<=1)e.circle(c.x,c.y,this._width/2),e.fill();else{var p=r[l-2],u=r[l-1];e.moveTo(p.x,p.y),e.lineTo(u.x,u.y),e.lineWidth=this._width,e.lineCap=cc.Graphics.LineCap.ROUND,e.lineJoin=cc.Graphics.LineJoin.ROUND,e.strokeColor=this._color,e.stroke()}}}}},r([l(cc.Graphics)],t.prototype,"graphics",void 0),r([c],t)}(a.BulletBase);o.BulletDrawBase=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletBishou:[function(e,t,o){"use strict";cc._RF.push(t,"fed86Nit+1LD6gtYefjh2uB","ComBulletBishou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/GameModel"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.motionStreak=null,t._rBody=null,t._collider=null,t._delayTime=0,t._offsetAngle=0,t._offsetSpeed=0,t._velocity=cc.v2(),t._direct=cc.v2(),t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.position),this.motionStreak.node.setSiblingIndex(0)},t.prototype.onDisable=function(){this.motionStreak.node.removeFromParent()},t.prototype.onDestroy=function(){this.motionStreak.node.destroy()},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),this.node.angle=0,this.node.scale=this._attrs.aoeRange,this._velocity=cc.v2(1,0).rotateSelf(cc.math.randomRangeInt(0,360)),this._velocity.multiplyScalar(this._attrs.moveSpeed*(1+this._offsetSpeed)),this._offsetAngle=.5*Math.PI*(Math.random()>.5?1:-1)},t.prototype.update=function(e){if(!this._game.isPause)if(this.node.x+=this._velocity.x*e,this.node.y+=this._velocity.y*e,this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y,this.icon.node.angle-=1/this._attrs.angularSpeed*360*e,this._delayTime>0)this._delayTime-=e;else{0!=this._offsetAngle&&(this._offsetAngle-=.5*this._offsetAngle*e),0!=this._offsetSpeed&&(this._offsetSpeed-=.5*this._offsetSpeed*e),null!=this._target&&null!=this._target.parent||(this._target=a.GameModel.inst.findRandMonster(),this._offsetAngle=.5*Math.PI*(Math.random()>.5?1:-1),this._offsetSpeed=-.5,this._delayTime=1);var t,o=this.node.position;if(t=null!=this._target?this._target.position:this._game.player.node.position,cc.Vec2.subtract(this._direct,t,o),this._direct.len()<=50)this._delayTime=1,this._target=null;else{var n=Math.atan2(this._direct.y,this._direct.x)+this._offsetAngle,i=this._attrs.moveSpeed*(1+this._offsetSpeed);this.node.angle=cc.math.toDegree(n),this._velocity.x=Math.cos(n)*i,this._velocity.y=Math.sin(n)*i}}},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([p(cc.MotionStreak)],t.prototype,"motionStreak",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../Model/GameModel":"GameModel","./BulletBase":"BulletBase"}],ComBulletChushouZ2:[function(e,t,o){"use strict";cc._RF.push(t,"96e3aCj69NMg593/KUrPOM4","ComBulletChushouZ2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._hitMonsterList=[],t._doubleScale=!1,t}return i(t,e),t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o);var i=t.pos,r=t.doubleScale;this.node.setPosition(i.x,i.y),this.node.scale=this._attrs.aoeRange,r&&(this.node.scale*=2),this._doubleScale=r,this._hitMonsterList.length=0;var a=t.direct;this.node.angle=45+45*-a,this.node.opacity=255;var s=this._attrs.duration;cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).delay(.1).call(function(){n._hitMonsterList.forEach(function(e){return e.emit("hit",{pos:n.node.position,damage:n.getDamage()})})}).delay(1*s/4).to(2*s/4,{opacity:0},{easing:"smooth"}).call(function(){n._callback()}).start()},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletChushouZ:[function(e,t,o){"use strict";cc._RF.push(t,"5b1becys6FPUI92lNyG2fHn","ComBulletChushouZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Audio/AudioMgr"),c=e("../../Framework/Event/EventMgr"),l=e("./BulletBase"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._rBody=null,t._collider=null,t._hitMonsterList=[],t._hitCallback=null,t._doubleScale=!1,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){c.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){c.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions(),this.spine.timeScale=0},t.prototype.resume=function(){this.node.resumeAllActions(),this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node)},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){var n=this;s.AudioMgr.inst.playEffectByName("chushouOut"),e.prototype.fire.call(this,t,o);var i=t.pos,r=t.doubleScale;this.node.setPosition(i.x,i.y),this.node.scale=this._attrs.aoeRange,r&&(this.node.scale*=2),this._doubleScale=r,this._collider.enabled=!0,this._hitMonsterList.length=0,this._hitCallback=t.hitCallback;var a=cc.math.randomRangeInt(0,8);this.spine.setAnimation(0,"idle",!1),cc.tween(this.node).delay(.2).call(function(){n._hitMonsterList.forEach(function(e){return e.emit("hit",{pos:n.node.position,damage:n.getDamage()})}),n._collider.enabled=!1}).delay(.33).call(function(){var e;switch(a){case 0:e="attack1",n.spine.node.scaleX=1;break;case 1:e="attack2",n.spine.node.scaleX=1;break;case 2:e="attack3",n.spine.node.scaleX=1;break;case 3:e="attack4",n.spine.node.scaleX=1;break;case 4:e="attack3",n.spine.node.scaleX=-1;break;case 5:e="attack2",n.spine.node.scaleX=-1;break;case 6:e="attack1",n.spine.node.scaleX=-1;break;case 7:e="attack5",n.spine.node.scaleX=1}s.AudioMgr.inst.playEffectByName("chushouHit"),n.spine.setAnimation(0,e,!1),cc.tween(n.node).delay(.8).call(function(){n._hitCallback({pos:n.node.position,direct:a,doubleScale:n._doubleScale})}).delay(2.2).call(function(){n._callback()}).start()}).start()},r([d(sp.Skeleton)],t.prototype,"spine",void 0),r([u],t)}(l.BulletBase);o.default=h,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletChushou:[function(e,t,o){"use strict";cc._RF.push(t,"9e581NyZl5D87R7FDth6KrF","ComBulletChushou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._doubleScale=!1,t}return i(t,e),t.prototype.onBeginContact=function(){this._lifeStamp=this._lifeTime},t.prototype.fire=function(t,o){var n;if(e.prototype.fire.call(this,t,o),null!=this._target&&null!=this._target.parent){var i=this._game.player.node.position,r=this._target.position;n=cc.Vec2.subtract(cc.v2(),r,i)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));var a=t.doubleScale,s=Math.atan2(n.y,n.x);this.node.setPosition(this._game.player.node.position),this.node.scale=this._attrs.aoeRange,this.node.angle=cc.math.toDegree(s),a&&(this.node.scale*=2),this._doubleScale=a,this._lifeStamp=0,this._lifeTime=this._attrs.duration+.1},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>this._lifeTime){var t=this.node.getPosition();this._callback({pos:t,doubleScale:this._doubleScale})}else{var o=this._attrs.moveSpeed,n=this.node.angle,i=o*e,r=cc.math.toRadian(n),a=Math.cos(r)*i,s=Math.sin(r)*i;this.node.x+=a,this.node.y+=s}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletCommonPet:[function(e,t,o){"use strict";cc._RF.push(t,"720823VxAZOAo3TdVoRyY9t","ComBulletCommonPet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/GameModel"),s=e("../../Model/GodPetModel"),c=e("../../Model/WeaponModel"),l=e("./BulletBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rBody=null,t._collider=null,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider)},t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),t.direct.x<0?(this.node.scaleX=-1*Math.abs(this.node.scaleX),this._collider.offset.x=-1*Math.abs(this._collider.offset.x),this._collider.apply()):(this.node.scaleX=Math.abs(this.node.scaleX),this._collider.offset.x=Math.abs(this._collider.offset.x),this._collider.apply());var n=c.WeaponModel.inst.magicAttrs.a_attack_aoerange_p;this.node.scale=n>0?1+n:1,this.node.setPosition(0,0),this._damage=t.damage,this._lifeStamp=0,this._lifeTime=t.lifeTime,this._effectStamp=0,this._effectInterval=t.effectInterval,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>this._lifeTime?this._callback():(this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{pos:t.node.position,damage:t.getDamage()})}))))},t.prototype.getDamage=function(){var e=a.GameModel.inst.player,t=s.GodPetModel.inst.cur,o=cc.math.randomRange(this._dmgRandRange.x,this._dmgRandRange.y),n=this._damage*e.atk*(1+o),i=Math.random()<t.crit;return i&&(n*=t.critDamage),{damage:n=Math.round(n),crit:i}},r([u],t)}(l.BulletBase));o.default=d,cc._RF.pop()},{"../../Model/GameModel":"GameModel","../../Model/GodPetModel":"GodPetModel","../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletCommon:[function(e,t,o){"use strict";cc._RF.push(t,"5b8390HTLRP6r5CurJP0Rp8","ComBulletCommon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/TableMgr"),s=e("../../Define/EventId"),c=e("../../Framework/Audio/AudioMgr"),l=e("../../Framework/Event/EventMgr"),p=e("../../Model/WeaponModel"),u=e("./BulletBase"),d=cc._decorator,h=d.ccclass,f=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._rBody=null,t._collider=null,t._repelSpeed=0,t._moveSpeed=0,t._velocity=cc.v2(),t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsBoxCollider),this._repelSpeed=Number(a.TABLE.getGlobal("Attack_repelSpeed")),this._moveSpeed=Number(a.TABLE.getGlobal("Attack_moveSpeed"))},t.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_PAUSE,this.pause,this),l.EVENT.on(s.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_PAUSE,this.pause,this),l.EVENT.off(s.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spine.timeScale=0},t.prototype.resume=function(){this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),c.AudioMgr.inst.playEffectByName("atk1");var i=p.WeaponModel.inst.magicAttrs.a_attack_aoerange_p;this.node.scale=i>0?1+i:1;var r=t.direct;r.x<0?this.node.scaleX=-1*Math.abs(this.node.scaleX):this.node.scaleX=Math.abs(this.node.scaleX),this._velocity.x=r.x*this._moveSpeed,this.node.setPosition(this._target.position);var a=this.spine.setAnimation(0,"attack",!1);this.spine.setTrackEventListener(a,function(){n._collider.enabled=!0}),this.spine.setTrackCompleteListener(a,function(){n._callback()}),this._collider.enabled=!1},t.prototype.update=function(e){this._game.isPause||(this.node.x+=this._velocity.x*e)},r([f(sp.Skeleton)],t.prototype,"spine",void 0),r([h],t)}(u.BulletBase);o.default=_,cc._RF.pop()},{"../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletDasuan:[function(e,t,o){"use strict";cc._RF.push(t,"e20c6/zsFdKJLoV+oxkFG+p","ComBulletDasuan");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node)},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),this.node.setPosition(this._game.player.node.position),this.node.scale=this._weapon.getAoeRange(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;this._game.isPause||(this.node.setPosition(this._game.player.node.position),this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{pos:t.node.position,damage:t.getDamage()})})))},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletDraw1Z:[function(e,t,o){"use strict";cc._RF.push(t,"905cdLMLXhG9ajr+NtVlQcR","ComBulletDraw1Z");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.pos;this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(),this._damage=this._weapon.getDamage(this._type)*this._game.player.atk,this._lifeStamp=0,this._lifeTime=.5},t.prototype.update=function(e){this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime&&this._callback())},r([c],t)}(a.BulletDrawBase));o.default=l,cc._RF.pop()},{"./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw1:[function(e,t,o){"use strict";cc._RF.push(t,"1d891v2fwxEv5SkF5A1+LCR","ComBulletDraw1");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/Utils/VectorUtil"),s=e("./BulletDrawBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radian=0,t._lifeStamp=0,t._lifeTime=0,t._moveSpeed=0,t}return i(t,e),t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._game.player.node.position,i=this._target.position,r=n.sub(n.sub(i).multiplyScalar(.9));this.node.setPosition(r),this.node.scale=this._weapon.getAoeRange(),this._radian=cc.math.toRadian(-90),this._lifeStamp=0,this._lifeTime=this._attrs.duration,this._moveSpeed=this._attrs.moveSpeed;var s=cc.Vec2.ZERO,c=a.VectorUtil.getSubRay(s,this._radian,this._moveSpeed*this._lifeTime);this.graphics.node.setPosition(c.x,c.y),this.graphics.node.angle=0},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.position});else{var t=this._moveSpeed*e,o=this._radian,n=Math.cos(o)*t,i=Math.sin(o)*t;this.graphics.node.x+=n,this.graphics.node.y+=i}},r([l],t)}(s.BulletDrawBase));o.default=p,cc._RF.pop()},{"../../Framework/Utils/VectorUtil":"VectorUtil","./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw2:[function(e,t,o){"use strict";cc._RF.push(t,"9c0b75XZ8lCK4tSebZn/HOd","ComBulletDraw2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radian=0,t._moveSpeed=0,t._lifeStamp=0,t._lifeTime=0,t._repelSpeed=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed)},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),this.node.setPosition(this._target.position),this.node.scale=this._weapon.getAoeRange();var n=t.direct;this._radian=Math.atan2(n.y,n.x),this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._attrs.duration,this._repelSpeed=this._attrs.repelSpeed,this.node.angle=cc.misc.radiansToDegrees(this._radian)},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.position});else{var t=this._moveSpeed*e,o=this._radian,n=Math.cos(o)*t,i=Math.sin(o)*t;this.node.x+=n,this.node.y+=i}},r([c],t)}(a.BulletDrawBase));o.default=l,cc._RF.pop()},{"./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw3Z:[function(e,t,o){"use strict";cc._RF.push(t,"801bbrZcdpN3amLYRQQM5lA","ComBulletDraw3Z");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./BulletDrawBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t}return i(t,e),t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spine.timeScale=0},t.prototype.resume=function(){this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o);var i=t.pos;this.node.setPosition(i),this.node.scale=this._weapon.getAoeRange();var r=this.spine.setAnimation(0,this.spine.animation,!1);this.spine.setTrackCompleteListener(r,function(){n._callback()})},r([u(sp.Skeleton)],t.prototype,"spine",void 0),r([p],t)}(c.BulletDrawBase);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./BulletDrawBase":"BulletDrawBase"}],ComBulletDraw3:[function(e,t,o){"use strict";cc._RF.push(t,"60389nVP1lE2r/zDZt3iI0H","ComBulletDraw3");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./BulletDrawBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t}return i(t,e),t.prototype.onBeginContact=function(){this._lifeStamp=this._lifeTime},t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),this.node.setPosition(this._target.position),this.node.scale=this._weapon.getAoeRange(),this._lifeStamp=0,this._lifeTime=this._attrs.duration,cc.tween(this.node).to(this._lifeTime/6,{scale:.8}).to(this._lifeTime/6,{scale:1}).to(this._lifeTime/6,{scale:.8}).to(this._lifeTime/6,{scale:1}).to(this._lifeTime/6,{scale:.8}).to(this._lifeTime/6,{scale:1}).start()},t.prototype.update=function(e){if(!this._game.isPause)return this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1?(this._lifeStamp=0,void this._callback({pos:this.node.position})):void 0},r([p],t)}(c.BulletDrawBase));o.default=u,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./BulletDrawBase":"BulletDrawBase"}],ComBulletFeidaoZ:[function(e,t,o){"use strict";cc._RF.push(t,"2e028ptXGhBGJm474QZdOB8","ComBulletFeidaoZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NpcBase"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._v2=cc.v2(),t._lifeStamp=0,t._lifeTime=0,t}return i(t,e),t.prototype.fire=function(t,o){if(e.prototype.fire.call(this,t,o),null!=this._target&&null!=this._target.parent){var n=this._target.getComponent(a.NpcBase);if(null==n||n.hp<=0)this._callback();else{var i=t.pos,r=cc.v2(this._target.position.x,this._target.position.y+40),s=cc.Vec2.subtract(this._v2,r,i),c=cc.math.toDegree(Math.atan2(s.y,s.x));this.node.setParent(this._target),this.node.setPosition(0,40,0),this.node.scaleX=1/this._target.scaleX,this.node.scaleY=1/this._target.scaleY,this._target.scaleX<0?this.node.angle=-c:this.node.angle=c,this._lifeStamp=0,this._lifeTime=this._attrs.duration}}else this._callback()},t.prototype.update=function(e){this._game.isPause||(null!=this._target&&null!=this._target.parent?(this._lifeStamp+=e,this._lifeStamp>this._lifeTime&&this._callback()):this._callback())},r([l],t)}(s.BulletBase));o.default=p,cc._RF.pop()},{"../NpcBase":"NpcBase","./BulletBase":"BulletBase"}],ComBulletFeidao:[function(e,t,o){"use strict";cc._RF.push(t,"ee2dfiQn75DsJmo1AqHULiN","ComBulletFeidao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/Audio/AudioMgr"),s=e("../../Model/GameModel"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.motionStreak=null,t._rBody=null,t._collider=null,t._radian=0,t._hitCount=0,t._lifeStamp=0,t._lifeTime=0,t._v2=cc.v2(),t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.position),this.motionStreak.node.setSiblingIndex(0)},t.prototype.onDisable=function(){this.motionStreak.node.removeFromParent()},t.prototype.onDestroy=function(){this.motionStreak.node.destroy()},t.prototype.onBeginContact=function(e,t,o){this._target=o.node,this.hit(o.node)},t.prototype.fire=function(t,o){var n;if(e.prototype.fire.call(this,t,o),a.AudioMgr.inst.playEffectByName("feidao"),null!=this._target&&null!=this._target.parent){var i=cc.v2(this._game.player.node.position.x,this._game.player.node.position.y+40),r=cc.v2(this._target.position.x,this._target.position.y+40);n=cc.Vec2.subtract(this._v2,r,i)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));this._radian=Math.atan2(n.y,n.x),this.node.setPosition(this._game.player.node.position.x,this._game.player.node.position.y+40),this.node.scale=this._attrs.aoeRange,this.node.angle=cc.math.toDegree(this._radian),this._hitCount=this._weapon.getHitCount(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration()},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime)this._callback({pos:this.node.position,target:this._target});else{var t=this._attrs.moveSpeed*e,o=this._radian,n=Math.cos(o)*t,i=Math.sin(o)*t;this.node.x+=n,this.node.y+=i,this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y}},t.prototype.hit=function(e){var t=this;this._hitCount--,this._hitCount>0?(this.scheduleOnce(function(){var e;if(t._target=s.GameModel.inst.findRandMonster(),null!=t._target&&null!=t._target.parent){var o=cc.v2(t._game.player.node.position.x,t._game.player.node.position.y+40),n=cc.v2(t._target.position.x,t._target.position.y+40);e=cc.Vec2.subtract(t._v2,n,o)}else e=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));t._radian=Math.atan2(e.y,e.x),t.node.angle=cc.math.toDegree(t._radian),t._rBody.syncRotation(!1)}),this._lifeStamp=0):this._lifeStamp=this._lifeTime,e.emit("hit",{pos:this.node.position,damage:this.getDamage()})},r([u(cc.MotionStreak)],t.prototype,"motionStreak",void 0),r([p],t)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../Framework/Audio/AudioMgr":"AudioMgr","../../Model/GameModel":"GameModel","./BulletBase":"BulletBase"}],ComBulletFreezeAll:[function(e,t,o){"use strict";cc._RF.push(t,"5a6b1RsjW5MZ7+iyuIR4rnM","ComBulletFreezeAll");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._hitMonsterList=[],t._stopTime=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node)},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),this.node.setPosition(this._game.player.node.position),this._hitMonsterList.length=0,this._stopTime=this._attrs.stopTime,this.scheduleOnce(function(){n._hitMonsterList.forEach(function(e){return e.emit("stop",n._stopTime)}),n._callback()})},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletGunshiZ:[function(e,t,o){"use strict";cc._RF.push(t,"083d0XlUJNKNbzwm2BwK84Q","ComBulletGunshiZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._rBody=null,t._collider=null,t._effectStamp=0,t._effectInterval=1,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spine.timeScale=0},t.prototype.resume=function(){this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.fire=function(t,o){var n=this;t.type=0,e.prototype.fire.call(this,t,o);var i=t.pos;this.node.setPosition(i.x+100*Math.random()-50,i.y+100*Math.random()-50),this.node.scale=this._weapon.getAoeRange(this._type),this.spine.setAnimation(0,"idle2",!1),this.spine.setCompleteListener(function(){n._callback()}),this._collider.enabled=!1},t.prototype.update=function(e){this._game.isPause||(this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._collider.enabled=!0))},r([u(sp.Skeleton)],t.prototype,"spine",void 0),r([p],t)}(c.BulletBase);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletGunshi:[function(e,t,o){"use strict";cc._RF.push(t,"a7e21aiMdNK9KjELLnu0GsT","ComBulletGunshi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/StaticData"),s=e("../../Model/WeaponModel"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t._stopTime=0,t._moveSpeed=0,t._hitCallback=null,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){-1==this._hitMonsterList.indexOf(o.node)&&(this._hitMonsterList.push(o.node),this._stopTime>0&&o.node.emit("stop",this._stopTime),o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()}))},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.direct,i=cc.v2(),r=0,c=0;0==n?(i.x=cc.math.randomRange(a.StaticData.minX,a.StaticData.maxX),i.y=this._attrs.upPos,r=this._attrs.upSpeed,c=2*Math.abs(i.y)/r,this.node.angle=-90):1==n&&(i.x=this._attrs.rPos,i.y=cc.math.randomRange(a.StaticData.minY+200,a.StaticData.maxY-200),r=this._attrs.rSpeed,c=2*Math.abs(i.x)/r,this.node.angle=180),i.x+=this._game.player.node.x,i.y+=this._game.player.node.y,this.node.setPosition(i),this.node.scale=this._weapon.getAoeRange(),this._stopTime=this._attrs.stopTime+(s.WeaponModel.inst.magicAttrs.sp_gunshi||0),this._lifeStamp=0,this._lifeTime=c,this._effectStamp=Math.random()*this._attrs.effectInterval,this._effectInterval=this._attrs.effectInterval,this._moveSpeed=r,this._hitCallback=t.hitCallback,this._hitMonsterList.length=0},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>this._lifeTime)this._callback();else{this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitCallback({pos:this.node.position}));var t=this._moveSpeed,o=this.node.angle,n=t*e,i=cc.misc.degreesToRadians(o),r=Math.cos(i)*n,a=Math.sin(i)*n;this.node.x+=r,this.node.y+=a}},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../Define/StaticData":"StaticData","../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletHudun:[function(e,t,o){"use strict";cc._RF.push(t,"4ab7cAmEjBBXJPsb6DQpC9n","ComBulletHudun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/WeaponModel"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._maxDunCount=0,t._curDunCount=0,t}return i(t,e),t.prototype.onBeginContact=function(){this.setDunAndDo()},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),this._lifeTime=this._attrs.duration+(a.WeaponModel.inst.magicAttrs.a_hudun_duration_v||0),this._maxDunCount=this._curDunCount=this._attrs.hitCount,this._effectInterval=this._attrs.effectInterval,this._game.immune+=this._maxDunCount,this.updateDun()},t.prototype.updateDun=function(){this._curDunCount<=0?this.spine.node.active=!1:(this.spine.node.active=!0,1==this._curDunCount?this.spine.setAnimation(0,"idle1",!0):2==this._curDunCount?this.spine.setAnimation(0,"idle2",!0):3==this._curDunCount&&this.spine.setAnimation(0,"idle3",!0))},t.prototype.addDun=function(){this._curDunCount++,this._game.immune++,this.updateDun()},t.prototype.subDun=function(){this._curDunCount--,this._game.immune--,this.updateDun()},t.prototype.setDunAndDo=function(){return 0==this._curDunCount?this._curDunCount:(0==this._lifeStamp&&(this._lifeStamp=this._lifeTime,this._effectStamp=0),this._curDunCount)},t.prototype.update=function(e){this._game.isPause||(this.node.setPosition(this._game.player.node.position),0==this._lifeStamp?this._curDunCount<this._maxDunCount&&(this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this.addDun())):(this._lifeStamp-=e,this._lifeStamp<=0&&(this.subDun(),this._lifeStamp=0)))},r([p(sp.Skeleton)],t.prototype,"spine",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletJiguang:[function(e,t,o){"use strict";cc._RF.push(t,"6a14fdvR2RH8KrKaQV/Alf/","ComBulletJiguang");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/Audio/AudioMgr"),s=e("../../Model/WeaponModel"),c=e("./BulletBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t._angularSpeed=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){var n;if(e.prototype.fire.call(this,t,o),a.AudioMgr.inst.playEffectByName("jiguang"),null!=this._target&&null!=this._target.parent){var i=this._game.player.node.position,r=this._target.position;n=cc.Vec2.subtract(cc.v2(),r,i)}else n=cc.v2(cc.math.randomRangeInt(-1,1),cc.math.randomRangeInt(-1,1));var c=Math.atan2(n.y,n.x);this.node.angle=cc.math.toDegree(c),this.node.setPosition(this._game.player.node.position.x,this._game.player.node.position.y+40),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._angularSpeed=this._attrs.angularSpeed+(s.WeaponModel.inst.magicAttrs.sp_jiguang||0),this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime?this._callback():(this.node.setPosition(this._game.player.node.position.x,this._game.player.node.position.y+40),this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{pos:t.node.position,damage:t.getDamage()})})),this._angularSpeed>0&&(this.node.angle-=1/this._angularSpeed*360*e)))},r([p],t)}(c.BulletBase));o.default=u,cc._RF.pop()},{"../../Framework/Audio/AudioMgr":"AudioMgr","../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletLeidian:[function(e,t,o){"use strict";cc._RF.push(t,"277a46QsJtEQ4hzdZ+jkVa6","ComBulletLeidian");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/Audio/AudioMgr"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t}return i(t,e),t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),a.AudioMgr.inst.playEffectByName("leidian"),this.node.setPosition(this._target.position),this.spine.setAnimation(0,"idle",!1),this.spine.setCompleteListener(function(){n._callback()}),this.scheduleOnce(function(){n._target.emit("hit",{pos:n.node.position,damage:n.getDamage()})},.2)},r([p(sp.Skeleton)],t.prototype,"spine",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../Framework/Audio/AudioMgr":"AudioMgr","./BulletBase":"BulletBase"}],ComBulletLiuxingchuiSenior:[function(e,t,o){"use strict";cc._RF.push(t,"47834NUZDFF1qSi/I3d2Lv6","ComBulletLiuxingchuiSenior");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rBody=null,t._collider=null,t._angle=0,t._effectSpeed=1,t._effectStamp=0,t._angularSpeed=0,t._startDistance=0,t._endDistance=0,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCircleCollider)},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.startAngle,i=this._weapon.getAoeRange();this._angle=n,this.node.scale=i,this._collider.radius=70*i,this._collider.apply(),this._angularSpeed=this._attrs.angularSpeed,this._startDistance=1.2*this._attrs.distance,this._endDistance=this._weapon.getSkillInfo()[0][0].distance/2,this._angularSpeed<1&&(this._angularSpeed=1)},t.prototype.update=function(e){if(!this._game.isPause){this._angle-=1/this._angularSpeed*360*e,this._effectStamp+=e*this._effectSpeed,this._effectStamp>1?(this._effectStamp=1,this._effectSpeed*=-1):this._effectStamp<0&&(this._effectStamp=0,this._effectSpeed*=-1);var t=cc.math.lerp(this._startDistance,this._endDistance,this._effectStamp),o=cc.math.toRadian(this._angle),n=Math.cos(o)*t,i=Math.sin(o)*t;this.node.setPosition(n,i,0)}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletLiuxingchui:[function(e,t,o){"use strict";cc._RF.push(t,"46e7b4l6mlIFZ9oCAKLxJXL","ComBulletLiuxingchui");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rBody=null,t._collider=null,t._angle=0,t._effectSpeed=1,t._effectStamp=0,t._angularSpeed=0,t._startDistance=0,t._endDistance=0,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCircleCollider)},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._weapon.getAoeRange();this.node.setScale(n),this._collider.radius=70*n,this._collider.apply(),this._angle=t.startAngle,this._angularSpeed=this._attrs.angularSpeed,this._startDistance=this._attrs.distance,this._endDistance=this._attrs.distance,this._effectStamp=0,this._effectSpeed=1,this._angularSpeed<1&&(this._angularSpeed=1)},t.prototype.update=function(e){if(!this._game.isPause){this._angle-=1/this._angularSpeed*360*e,this._effectStamp+=e*this._effectSpeed,this._effectStamp>1?(this._effectStamp=1,this._effectSpeed*=-1):this._effectStamp<0&&(this._effectStamp=0,this._effectSpeed*=-1);var t=cc.math.lerp(this._startDistance,this._endDistance,this._effectStamp),o=cc.math.toRadian(this._angle),n=Math.cos(o)*t,i=Math.sin(o)*t;this.node.setPosition(n,i,0),this._rBody.syncPosition(!1)}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletMozhuaZ:[function(e,t,o){"use strict";cc._RF.push(t,"d6894u3TXRIWru5Pq2TqJF4","ComBulletMozhuaZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=t.pos;this.node.setPosition(n),this.node.scale=this._weapon.getAoeRange(this._type),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(this._type),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;this._game.isPause||(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1?this._callback():(this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{pos:t.node.position,damage:t.getDamage()})}))))},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletMozhua:[function(e,t,o){"use strict";cc._RF.push(t,"91b1fhOdIFL97bIlqDQNAoW","ComBulletMozhua");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Audio/AudioMgr"),c=e("../../Framework/Event/EventMgr"),l=e("../../Model/WeaponModel"),p=e("./BulletBase"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.motionStreak=null,t._rBody=null,t._collider=null,t._lifeStamp=0,t._lifeTime=0,t._angularSpeed=0,t._v3=cc.v3(),t._targetPos=null,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider)},t.prototype.onEnable=function(){this.motionStreak.node.setParent(this.node.parent),this.motionStreak.node.setPosition(this.node.position),this.motionStreak.node.setSiblingIndex(0),c.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){this.motionStreak.node.removeFromParent(),c.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDestroy=function(){this.motionStreak.node.destroy()},t.prototype.pause=function(){this.node.pauseAllActions()},t.prototype.resume=function(){this.node.resumeAllActions()},t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o),s.AudioMgr.inst.playEffectByName("mozhua"),this.node.setPosition(this._game.player.node.position);var n=this.node.position,i=this._target.position,r=cc.Vec3.subtract(cc.v3(),n,i),a=Math.atan2(r.y,r.x);this.node.angle=cc.math.toDegree(a);var c=l.WeaponModel.inst.magicAttrs.sp_mozhua||0;this._collider.enabled=c>0,this._attrs.damage=c,this._angularSpeed=Math.random()>.5?1:-1,this._targetPos=this._target.getPosition(),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration()},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.position});else{var t=this.node.position,o=this._targetPos,n=cc.Vec3.subtract(this._v3,o,t),i=Math.atan2(n.y,n.x)-cc.math.lerp(this._angularSpeed,0,this._lifeStamp/(this._lifeTime/2)),r=this._attrs.moveSpeed*e,a=Math.cos(i)*r,s=Math.sin(i)*r;this.node.x+=a,this.node.y+=s,this.node.angle=cc.math.toDegree(i),this.motionStreak.node.x=this.node.x,this.motionStreak.node.y=this.node.y,this.motionStreak.node.angle=this.node.angle,cc.Vec2.distance(t,o)<=50&&this._callback({pos:this.node.position})}},r([h(cc.MotionStreak)],t.prototype,"motionStreak",void 0),r([d],t)}(p.BulletBase);o.default=f,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Model/WeaponModel":"WeaponModel","./BulletBase":"BulletBase"}],ComBulletShufu:[function(e,t,o){"use strict";cc._RF.push(t,"49d0a0Gl8RCAa6IBVffDpJ+","ComBulletShufu");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Audio/AudioMgr"),c=e("../../Framework/Event/EventMgr"),l=e("./BulletBase"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._stopTime=0,t}return i(t,e),t.prototype.onEnable=function(){c.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){c.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),c.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spine.timeScale=0},t.prototype.resume=function(){this.spine.timeScale=1},t.prototype.onBeginContact=function(e,t,o){o.node.emit("stop",this._stopTime)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o),s.AudioMgr.inst.playEffectByName("ice");var i=t.radian;this.node.angle=cc.math.toDegree(i),this.node.setPosition(0,0);var r=this.spine.setAnimation(0,"idle1",!1);this.spine.setTrackCompleteListener(r,function(){n._callback()}),this._stopTime=this._attrs.stopTime},r([d(sp.Skeleton)],t.prototype,"spine",void 0),r([u],t)}(l.BulletBase);o.default=h,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","./BulletBase":"BulletBase"}],ComBulletXuanfeng:[function(e,t,o){"use strict";cc._RF.push(t,"73d6c0pnFFLh6K/MjClWcVQ","ComBulletXuanfeng");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._hitMonsterList=[],t._lifeStamp=0,t._lifeTime=0,t._radian=0,t._friction=.7,t._moveSpeed=0,t._repelSpeed=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){-1==this._hitMonsterList.indexOf(o.node)&&(this._hitMonsterList.push(o.node),o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()}),o.node.emit("repel",this._repelSpeed))},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._weapon.getAoeRange();this.node.setScale(n),this.node.setPosition(this._game.player.node.position),this._radian=Math.random()*Math.PI*2,this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._attrs.duration,this._repelSpeed=this._attrs.repelSpeed,this._hitMonsterList.length=0},t.prototype.update=function(e){if(!this._game.isPause)if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1)this._callback({pos:this.node.position});else{var t=this._radian,o=this._moveSpeed*e,n=Math.cos(t)*o,i=Math.sin(t)*o;this.node.x+=n,this.node.y+=i,this._moveSpeed-=this._friction*this._moveSpeed*e,this._moveSpeed<0&&(this._moveSpeed=0)}},r([c],t)}(a.BulletBase));o.default=l,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletYunShiZ:[function(e,t,o){"use strict";cc._RF.push(t,"539459kLKVL6o8TRNfiU0na","ComBulletYunShiZ");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./BulletBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.aniHit=null,t._lifeStamp=0,t._lifeTime=0,t._effectStamp=0,t._effectInterval=0,t._hitMonsterList=[],t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._hitMonsterList.push(o.node),o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.onEndContact=function(e,t,o){this._hitMonsterList.splice(this._hitMonsterList.indexOf(o.node),1)},t.prototype.fire=function(t,o){var n=this;e.prototype.fire.call(this,t,o);var i=t.pos;this.node.setPosition(i),this.node.scale=this._weapon.getAoeRange(this._type),this.ani.play("yunshi3"),this.ani.on(cc.Animation.EventType.FINISHED,function(){n.ani.play("yunshi4")}),this.aniHit.node.active=!0,this.aniHit.play("yunshi2"),this.aniHit.on(cc.Animation.EventType.FINISHED,function(){n.aniHit.node.active=!1}),this._lifeStamp=0,this._lifeTime=this._weapon.getDuration(this._type),this._effectStamp=0,this._effectInterval=this._attrs.effectInterval,this._hitMonsterList.length=0},t.prototype.update=function(e){var t=this;if(!this._game.isPause){if(this._lifeStamp+=e,this._lifeStamp>=this._lifeTime)return this._lifeStamp=-99999999,void cc.tween(this.ani.node).to(.3,{opacity:0}).call(function(){t.ani.node.opacity=255,t._callback()}).start();this._effectStamp+=e,this._effectStamp>=this._effectInterval&&(this._effectStamp-=this._effectInterval,this._hitMonsterList.forEach(function(e){return e.emit("hit",{pos:t.node.position,damage:t.getDamage()})}))}},r([l(cc.Animation)],t.prototype,"ani",void 0),r([l(cc.Animation)],t.prototype,"aniHit",void 0),r([c],t)}(a.BulletBase);o.default=p,cc._RF.pop()},{"./BulletBase":"BulletBase"}],ComBulletYunShi:[function(e,t,o){"use strict";cc._RF.push(t,"063894SO+JCM51RAjcYQ0e/","ComBulletYunShi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/Utils/VectorUtil"),s=e("./BulletBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t._radians=0,t._lifeStamp=0,t._lifeTime=0,t._moveSpeed=0,t}return i(t,e),t.prototype.onBeginContact=function(e,t,o){o.node.emit("hit",{pos:this.node.position,damage:this.getDamage()})},t.prototype.fire=function(t,o){e.prototype.fire.call(this,t,o);var n=this._game.player.node.position,i=this._target.position,r=n.sub(n.sub(i).multiplyScalar(.8));this.node.setPosition(r),this.node.scale=this._weapon.getAoeRange(),this._radians=cc.math.toRadian(-100),this._moveSpeed=this._attrs.moveSpeed,this._lifeStamp=0,this._lifeTime=this._attrs.duration;var s=this.ani.node.height,c=cc.Vec2.ZERO,l=a.VectorUtil.getSubRay(c,this._radians,this._moveSpeed*this._lifeTime+s/2);this.ani.node.setPosition(l.x,l.y),this.ani.node.angle=-10},t.prototype.update=function(e){if(!this._game.isPause){this._lifeStamp+=e,this._lifeStamp>=this._lifeTime+.1&&this._callback({pos:this.node.position});var t=this._moveSpeed*e,o=this._radians,n=Math.cos(o)*t,i=Math.sin(o)*t;this.ani.node.x+=n,this.ani.node.y+=i}},r([p(cc.Animation)],t.prototype,"ani",void 0),r([l],t)}(s.BulletBase);o.default=u,cc._RF.pop()},{"../../Framework/Utils/VectorUtil":"VectorUtil","./BulletBase":"BulletBase"}],ComHitBeEffect:[function(e,t,o){"use strict";cc._RF.push(t,"b811cE5y0JO/aRYtLplZ96G","ComHitBeEffect");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComHitBeEffect=void 0;var a=e("../../Controller/GameItemBase"),s=e("../../Model/GameModel"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t}var o;return i(t,e),o=t,t.prototype.playAnim=function(){var e=this,t=Date.now(),n="hit1";t-o.lastTime<1e3*s.GameModel.inst.player.touchDelta&&(n="hit2"),o.lastTime=t,this.node.active=!0,this.spine.setAnimation(0,n,!1),this.scheduleOnce(function(){e.recycle()},.5)},t.lastTime=0,r([p(sp.Skeleton)],t.prototype,"spine",void 0),o=r([l],t)}(a.GameItemBase);o.ComHitBeEffect=u,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase","../../Model/GameModel":"GameModel"}],ComHitEffect:[function(e,t,o){"use strict";cc._RF.push(t,"d8ca2OCBghMHLrByrMt1yRC","ComHitEffect");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComHitEffect=void 0;var a=e("../../Controller/GameItemBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animHit=null,t}return i(t,e),t.prototype.playAnim=function(){var e=this;this.node.active=!0,this.animHit.play(),this.animHit.once(cc.Animation.EventType.FINISHED,function(){e.recycle()})},r([l(cc.Animation)],t.prototype,"animHit",void 0),r([c],t)}(a.GameItemBase);o.ComHitEffect=p,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase"}],ComHitNum:[function(e,t,o){"use strict";cc._RF.push(t,"83c7bxoZcRLLaeW6Kfv6Dbj","ComHitNum");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/GameItemBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelHp=null,t.animShow=null,t.bj=null,t.bjImgs=[],t}return i(t,e),t.prototype.play=function(e){var t=this;this.node.active=!0,this.labelHp.string=e,this.animShow.play(),this.animShow.once(cc.Animation.EventType.FINISHED,function(){t.recycle()}),this.bj&&(e>1e5?this.bj.spriteFrame=this.bjImgs[4]:e>1e3?this.bj.spriteFrame=this.bjImgs[3]:e>100?this.bj.spriteFrame=this.bjImgs[2]:e>10?this.bj.spriteFrame=this.bjImgs[1]:e>0&&(this.bj.spriteFrame=this.bjImgs[0]))},r([l(cc.Label)],t.prototype,"labelHp",void 0),r([l(cc.Animation)],t.prototype,"animShow",void 0),r([l(cc.Sprite)],t.prototype,"bj",void 0),r([l([cc.SpriteFrame])],t.prototype,"bjImgs",void 0),r([c],t)}(a.GameItemBase);o.default=p,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase"}],ComWeaponBishou:[function(e,t,o){"use strict";cc._RF.push(t,"e2164eX5flHl6NUbEtuBQO1","ComWeaponBishou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponBishou=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:c.GameModel.inst.player.node}),s.AchievementModel.inst.updatePoint(9,this.getLevel())},t.prototype.fire=function(t,o){void 0===o&&(o=0);for(var n=this.getBulletCount(),i=0;i<n;i++)e.prototype.fire.call(this,t,o)},r([u],t)}(l.WeaponBase));o.ComWeaponBishou=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponChushou:[function(e,t,o){"use strict";cc._RF.push(t,"2cd6bn5czFHL7xVvPKeTGIV","ComWeaponChushou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("../../Model/WeaponModel"),p=e("../Bullet/BulletBase"),u=e("./WeaponBase"),d=cc._decorator,h=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire3Layer=new cc.Node,this._fire3Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy(),this._fire3Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return this._fire3Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount(),s.AchievementModel.inst.updatePoint(15,this.getLevel())},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this.getSenior(),i=this.get(n?3+t:t);if(null!=i){i.setParent(this.getBulletParent(t));var r=!1,a=l.WeaponModel.inst.magicAttrs.sp_chushou;a&&a>Math.random()&&(r=!0);var s=i.getComponent(p.BulletBase);e.type=t,e.attrs=this._weaponInfo[t],e.doubleScale=r,e.weapon=this,s.fire(e,function(e){o.put(t,s.node),o.fire2(e,++t)})}},t.prototype.fire2=function(e,t){var o=this;void 0===t&&(t=0);var n=this.getSenior(),i=this.get(n?3+t:t);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(p.BulletBase);e.type=t,e.attrs=this._weaponInfo[t],e.weapon=this,e.hitCallback=function(e){o.fire3(e,t+1)},r.fire(e,function(){o.put(t,r.node)})}},t.prototype.fire3=function(e,t){var o=this;void 0===t&&(t=0);var n=this.getSenior()?3+t:t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(p.BulletBase);e.type=t,e.attrs=this._weaponInfo[t],e.weapon=this,r.fire(e,function(){o.put(n,r.node)})}},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findRandMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([h],t)}(u.WeaponBase));o.default=f,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","../Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponCommonPet:[function(e,t,o){"use strict";cc._RF.push(t,"9710fRm3oxJcZSfGw9tcpwO","ComWeaponCommonPet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponCommonPet=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Controller/TableMgr"),c=e("../../Model/GodPetModel"),l=e("../Bullet/BulletBase"),p=e("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._damage=0,t._lifeTime=0,t._effectInterval=0,t}return i(t,e),t.prototype.getAttrFromCfg=function(){this._damage=Number(s.TABLE.getGlobal("GodPet_Damage")),this._lifeTime=Number(s.TABLE.getGlobal("GodPet_LifeTime")),this._effectInterval=Number(s.TABLE.getGlobal("GodPet_EffectInterval"))},t.prototype.updateAttrs=function(){},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this.node.parent;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this.get(t);if(null!=n){n.setParent(this.getBulletParent(t));var i=n.getComponent(l.BulletBase);e.weapon=this,e.damage=this._damage,e.lifeTime=this._lifeTime,e.effectInterval=this._effectInterval,i.fire(e,function(){o.put(t,i.node)})}},t.prototype.getDamage=function(e){return void 0===e&&(e=0),c.GodPetModel.inst.cur.atk},t.prototype.getCrit=function(){return c.GodPetModel.inst.cur.crit},t.prototype.getCritDamage=function(){return c.GodPetModel.inst.cur.critDamage},r([d],t)}(p.WeaponBase));o.ComWeaponCommonPet=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Model/GodPetModel":"GodPetModel","../Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponCommon:[function(e,t,o){"use strict";cc._RF.push(t,"1d1584mYMxHWLohm88ipI/x","ComWeaponCommon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponCommon=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("../../Model/WeaponModel"),l=e("../Bullet/BulletBase"),p=e("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getAttrFromCfg=function(){},t.prototype.updateAttrs=function(){},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.BulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this.get(t);if(null!=n){n.setParent(this.getBulletParent(t));var i=n.getComponent(l.BulletBase);e.weapon=this,e.direct=cc.v2(this._game.orientation.x>0?1:-1,0),i.fire(e,function(){o.put(t,i.node)}),(c.WeaponModel.inst.magicAttrs.a_patk2_v||0)<=0||this.scheduleOnce(function(){var n=o.get(t);if(null!=n){n.setParent(o.getBulletParent(t));var i=n.getComponent(l.BulletBase);e.weapon=o,e.direct=cc.v2(o._game.orientation.x>0?-1:1,0),i.fire(e,function(){o.put(t,i.node)})}},.3)}},t.prototype.getDamage=function(e){return void 0===e&&(e=0),1},t.prototype.getCrit=function(){return s.GameModel.inst.player.crit+(c.WeaponModel.inst.magicAttrs.a_crit_p||0)},r([d],t)}(p.WeaponBase));o.ComWeaponCommon=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","../Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponDasuan:[function(e,t,o){"use strict";cc._RF.push(t,"99800PN4FpAn60/baU0kit5","ComWeaponDasuan");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponDasuan=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("../Bullet/BulletBase"),p=e("./WeaponBase"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:c.GameModel.inst.player.node}),s.AchievementModel.inst.updatePoint(17,this.getLevel())},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.BulletLayer;case 1:return a.LayerMgr.inst.BulletLayer2;case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this.getSenior(),i=n?3+t:t,r=this.get(i);if(null!=r){r.setParent(this.getBulletParent(n?1:0));var a=r.getComponent(l.BulletBase);e.type=t,e.attrs=this._weaponInfo[t],e.weapon=this,a.fire(e,function(e){o.put(i,a.node),o.fire(e,++t)})}},r([d],t)}(p.WeaponBase));o.ComWeaponDasuan=h,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponDraw1:[function(e,t,o){"use strict";cc._RF.push(t,"b5d17a7LmpGIpeWoko1oPr3","ComWeaponDraw1");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/GameModel"),s=e("./WeaponDrawBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount()},t.prototype.update=function(e){if(!this._game.isPause&&this._activeTime>0)if(this._activeTime-=e,0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=a.GameModel.inst.findRandMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([l],t)}(s.WeaponDrawBase));o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel","./WeaponDrawBase":"WeaponDrawBase"}],ComWeaponDraw2:[function(e,t,o){"use strict";cc._RF.push(t,"6db30fAB6pLMpBROV7bZdwQ","ComWeaponDraw2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/GameModel"),s=e("./WeaponDrawBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount()},t.prototype.fire=function(t,o){void 0===o&&(o=0);var n=this._bulletCount,i=this._curTargetIdx,r=cc.v2(a.GameModel.inst.orientation.x,a.GameModel.inst.orientation.y);r.rotateSelf(cc.math.toRadian(30*i-30*Math.floor(n/2))),t.direct=r,e.prototype.fire.call(this,t,o)},t.prototype.update=function(e){if(!this._game.isPause&&this._activeTime>0)if(this._activeTime-=e,0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._curTargetIdx=0,this._curFireCount=o}}else this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.fire({target:this._game.player.node}),this._curTargetIdx++)},r([l],t)}(s.WeaponDrawBase));o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel","./WeaponDrawBase":"WeaponDrawBase"}],ComWeaponDraw3:[function(e,t,o){"use strict";cc._RF.push(t,"077e5tukx9By7Vmi2uptM4U","ComWeaponDraw3");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./WeaponDrawBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount()},t.prototype.update=function(e){if(!this._game.isPause&&this._activeTime>0)if(this._activeTime-=e,0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._curTargetIdx=0,this._curFireCount=o}}else this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.fire({target:this._game.player.node}))},r([c],t)}(a.WeaponDrawBase));o.default=l,cc._RF.pop()},{"./WeaponDrawBase":"WeaponDrawBase"}],ComWeaponFeidao:[function(e,t,o){"use strict";cc._RF.push(t,"5acc4mG6zFBBZ9UnZi7Y5GP","ComWeaponFeidao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount(),s.AchievementModel.inst.updatePoint(12,this.getLevel())},t.prototype.update=function(e){if(!this._game.isPause){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0;for(var n=0;n<o;n++){var i=this._targetList[this._curTargetIdx++];null!=i&&null!=i.parent&&this.fire({target:i})}}}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponFreezeAll:[function(e,t,o){"use strict";cc._RF.push(t,"d6ca9hdNf9OLq2YhKVOx7X9","ComWeaponFreezeAll");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/GameModel"),s=e("./WeaponBase"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._interval=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval()},t.prototype.levelUp=function(t){this._levels.length>0||e.prototype.levelUp.call(this,t)},t.prototype.update=function(e){this._game.isPause||(this._fireStamp+=e,this._fireStamp>=this._interval&&(this._fireStamp=0,this.fire({target:a.GameModel.inst.player.node})))},r([l],t)}(s.WeaponBase));o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponGunshi:[function(e,t,o){"use strict";cc._RF.push(t,"3e0a6JUnfJHMr8vowhD+tnw","ComWeaponGunshi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Framework/Audio/AudioMgr"),c=e("../../Model/AchievementModel"),l=e("../../Model/GameModel"),p=e("../../Model/WeaponModel"),u=e("../Bullet/BulletBase"),d=e("./WeaponBase"),h=cc._decorator,f=h.ccclass,_=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curFireCount2=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t._bulletCount2=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this._weaponInfo[0].upCount,this._bulletCount2=this._weaponInfo[0].rCount+(p.WeaponModel.inst.magicAttrs.a_gunshi_rcount_v||0),c.AchievementModel.inst.updatePoint(13,this.getLevel())},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this.getSenior()?3+t:t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(u.BulletBase);e.type=t,e.attrs=this._weaponInfo[t],e.weapon=this,e.hitCallback=function(e){o.fire(e,t+1)},r.fire(e,function(){o.put(n,r.node)})}},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount&&0==this._curFireCount2){this._fireStamp+=e;var t=this._interval;this._fireStamp>=t&&(this._fireStamp=0,this._curTargetIdx=0,this._curFireCount=this._bulletCount,this._curFireCount2=this._bulletCount2,s.AudioMgr.inst.playEffectByName("gunshi"))}else this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount>0&&(this._curFireCount--,this.fire({target:l.GameModel.inst.player.node,direct:0})),this._curFireCount2>0&&(this._curFireCount2--,this.fire({target:l.GameModel.inst.player.node,direct:1})))},r([f],t)}(d.WeaponBase));o.default=_,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Framework/Audio/AudioMgr":"AudioMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","../Bullet/BulletBase":"BulletBase","./WeaponBase":"WeaponBase"}],ComWeaponHudun:[function(e,t,o){"use strict";cc._RF.push(t,"394b2JrewBOvaM0DPzGHGrn","ComWeaponHudun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponHudun=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/GameModel"),c=e("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:s.GameModel.inst.player.node})},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.BulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},r([p],t)}(c.WeaponBase));o.ComWeaponHudun=u,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponJiguang:[function(e,t,o){"use strict";cc._RF.push(t,"f59395VKUBL2ZFJAUXDOpmC","ComWeaponJiguang");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount(),s.AchievementModel.inst.updatePoint(19,this.getLevel())},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponLeidian:[function(e,t,o){"use strict";cc._RF.push(t,"7fdd4MhvVBFsK0HM/czXL2s","ComWeaponLeidian");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount(),s.AchievementModel.inst.updatePoint(19,this.getLevel())},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponLiuxingchui:[function(e,t,o){"use strict";cc._RF.push(t,"dfc8bt9HHVJpaIUvEx/FBQE","ComWeaponLiuxingchui");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ComWeaponLiuxingchui=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this.recycle(),this.fire({target:c.GameModel.inst.player.node}),s.AchievementModel.inst.updatePoint(10,this.getLevel())},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.PlayerBulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.fire=function(t,o){void 0===o&&(o=0);for(var n=this.getBulletCount(),i=0;i<n;i++)t.startAngle=i*Math.floor(360/n),e.prototype.fire.call(this,t,o)},r([u],t)}(l.WeaponBase));o.ComWeaponLiuxingchui=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponMozhua:[function(e,t,o){"use strict";cc._RF.push(t,"faaeeZ0+iNNwIu0JyUqAFEB","ComWeaponMozhua");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount(),s.AchievementModel.inst.updatePoint(16,this.getLevel())},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponShufu:[function(e,t,o){"use strict";cc._RF.push(t,"68ab7OZHc9Nl6ukEVjeDcNj","ComWeaponShufu");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t._curFireIdx=0,t}return i(t,e),t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount(),s.AchievementModel.inst.updatePoint(12,this.getLevel())},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return a.LayerMgr.inst.PlayerBulletLayer2;case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.update=function(e){if(!this._game.isPause){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0;for(var n=0;n<o;n++){var i=this._targetList[this._curTargetIdx++];if(i){var r=2*-Math.PI/12*this._curFireIdx++;this.fire({target:i,radian:r})}}}}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],ComWeaponXuanfeng:[function(e,t,o){"use strict";cc._RF.push(t,"79845LHMAJKO4NWifxApegX","ComWeaponXuanfeng");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Define/EventId"),c=e("../../Framework/Audio/AudioMgr"),l=e("../../Framework/Event/EventMgr"),p=e("../../Model/AchievementModel"),u=e("../../Model/GameModel"),d=e("../../Model/WeaponModel"),h=e("./WeaponBase"),f=cc._decorator,_=f.ccclass,y=(f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._hitFireStamp=0,t._hitFireInterval=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy()},t.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_PLAYER_HIT,this.onHit,this)},t.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_PLAYER_HIT,this.onHit,this)},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount();var t=d.WeaponModel.inst.magicAttrs.sp_xuanfeng;this._hitFireInterval=t||0,p.AchievementModel.inst.updatePoint(14,this.getLevel())},t.prototype.onHit=function(){0!=this._hitFireInterval&&0==this._hitFireStamp&&(this._hitFireStamp=this._hitFireInterval,this.fire({target:u.GameModel.inst.player.node}))},t.prototype.update=function(e){if(!this._game.isPause)if(this._hitFireStamp>0&&(this._hitFireStamp-=e,this._hitFireStamp<0&&(this._hitFireStamp=0)),0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._curFireCount=o,c.AudioMgr.inst.playEffectByName("xuanfeng")}}else this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta&&(this._curFireStamp-=this._curFireStampDelta,this._curFireCount--,this.fire({target:u.GameModel.inst.player.node}))},r([_],t)}(h.WeaponBase));o.default=y,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","./WeaponBase":"WeaponBase"}],ComWeaponYunshi:[function(e,t,o){"use strict";cc._RF.push(t,"cf654JZp5hPZ5/zyYP0YH4W","ComWeaponYunshi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/LayerMgr"),s=e("../../Model/AchievementModel"),c=e("../../Model/GameModel"),l=e("./WeaponBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetList=[],t._fireStamp=cc.macro.REPEAT_FOREVER,t._curFireStamp=0,t._curFireStampDelta=.1,t._curFireCount=0,t._curTargetIdx=0,t._interval=0,t._bulletCount=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._fire1Layer=new cc.Node,this._fire1Layer.setParent(a.LayerMgr.inst.BulletLayer2),this._fire2Layer=new cc.Node,this._fire2Layer.setParent(a.LayerMgr.inst.BulletLayer),this._fire3Layer=new cc.Node,this._fire3Layer.setParent(a.LayerMgr.inst.EffectLayer)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this._fire1Layer.destroy(),this._fire2Layer.destroy(),this._fire3Layer.destroy()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:return this._fire1Layer;case 1:return this._fire2Layer;case 2:return this._fire3Layer}},t.prototype.updateAttrs=function(){e.prototype.updateAttrs.call(this),this._interval=this.getInterval(),this._bulletCount=this.getBulletCount(),s.AchievementModel.inst.updatePoint(15,this.getLevel())},t.prototype.update=function(e){if(!this._game.isPause)if(0==this._curFireCount){this._fireStamp+=e;var t=this._interval;if(this._fireStamp>=t){this._fireStamp=0;var o=this._bulletCount;this._targetList=c.GameModel.inst.findNearMonsters(o),this._curTargetIdx=0,this._curFireCount=o}}else if(this._curFireStamp+=e,this._curFireStamp>=this._curFireStampDelta){this._curFireStamp-=this._curFireStampDelta,this._curFireCount--;var n=this._targetList[this._curTargetIdx++];null!=n&&null!=n.parent&&this.fire({target:n})}},r([u],t)}(l.WeaponBase));o.default=d,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","./WeaponBase":"WeaponBase"}],CommonToast:[function(e,t,o){"use strict";cc._RF.push(t,"c2ba2y6ZDtG7ZP9ddIgV9aw","CommonToast");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t._isOpening=!1,t._runTime=0,t._tipList=[],t.openTime=0,t.minOpenTime=1,t.maxOpenTime=8,t.isOpeningCount=!1,t.showingNext=!1,t.nowItem=null,t.lastItem=null,t.label=null,t}return i(t,e),Object.defineProperty(t.prototype,"isOpening",{get:function(){return this._isOpening},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.item.active=!1},t.prototype.showTips=function(e){try{if(this.freshWidth(e),this._tipList.push(e),1==this._tipList.length&&0==this._isOpening)this.showingNext=!0,this.item.width=40*e.length+20,this._showNext();else{if(this._tipList.length>2)for(var t={},o=0;o<this._tipList.length;o++)if(t[this._tipList[o]]||this.label&&this._tipList[o]==this.label.string){if(this._tipList.splice(o,1),this._tipList.length<=2)break;o--}else t[this._tipList[o]]=1;this._tipList.length>0&&0==this._isOpening&&0==this.isOpeningCount&&0==this.showingNext&&(this.showingNext=!0,this._showNext())}}catch(n){this.node&&(this.node.active=!1),cc.log("ShowTips",n)}},t.prototype.freshWidth=function(e){this.item.width=40*e.length+20},t.prototype._showNext=function(){this.nowItem?(cc.log("tip\u5b58\u5728"),this.showingNext=!1):(this.nowItem=cc.instantiate(this.item),this.nowItem.parent=this.node,this.nowItem.active=!0,this._showOneTip(this._tipList[0])&&(this._tipList.shift(),this.openTime=0),this.showingNext=!1)},t.prototype._showOneTip=function(e){if(cc.log("ShowOneTip"),this._isOpening)return cc.log("\u4e0d\u80fd\u540c\u65f6\u6253\u5f00\u591a\u4e2a\u63d0\u793a"),!1;if(!this.nowItem)return cc.log("\u5f53\u524dtip\u5df2\u9500\u6bc1"),!1;this.isOpeningCount=!0,this._isOpening=!0;var t=this.nowItem.getChildByName("Label");if(t){var o=t.getComponent(cc.Label);o?(this.label=o,o.string=e):cc.log("tip   \u627e\u4e0d\u5230label")}else cc.log("tip   \u627e\u4e0d\u5230 node   label");return this.nowItem.opacity=0,cc.tween(this.nowItem).to(.8,{opacity:255}).start(),cc.tween(this.nowItem).by(.15,{position:cc.v3(0,60)}).start(),!0},t.prototype._removeTips=function(){this.lastItem&&(cc.Tween.stopAllByTarget(this.lastItem),this.lastItem.destroy()),this.lastItem=this.nowItem,this.nowItem=null,this.lastItem&&(cc.tween(this.lastItem).delay(.35).to(.8,{opacity:0},{easing:"quadIn"}).call(this.lastItem.removeFromParent.bind(this)).start(),cc.tween(this.lastItem).by(.25,{position:cc.v3(0,80)}).start()),this._isOpening=!1,this._tipList.length>0&&(this.showingNext=!0,this._showNext())},t.prototype.update=function(e){if(this._runTime+=e,!(this._runTime<.1)&&(this._runTime=0,this._isOpening&&this.isOpeningCount)){if(this.openTime++,this.openTime>this.maxOpenTime)return this.isOpeningCount=!1,void this._removeTips();if(this._tipList.length>0&&this.openTime>this.minOpenTime)return this.isOpeningCount=!1,void this._removeTips()}},r([c(cc.Node)],t.prototype,"item",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Confirm:[function(e,t,o){"use strict";cc._RF.push(t,"ba72fAeNg9IibgU7eIBYR7c","Confirm");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txts=[],t.btnConfirm=null,t.btnCancel=null,t.btnClose=null,t._confirm=null,t._cancel=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=t.text,n=t.confirm,i=t.cancel,r=t.close;t.autoClose,null==i&&(this.btnCancel.node.active=!1,this.btnConfirm.node.setPosition(0,this.btnConfirm.node.position.y),this.btnConfirm.node.width=270),this.btnClose.node.active=r,this.txts.forEach(function(e,t){return e.string=""+o[t]}),this._confirm=n,this._cancel=i},t.prototype.onClickConfirm=function(){this._confirm&&this._confirm(),this.close()},t.prototype.onClickCancel=function(){this._cancel&&this._cancel(),this.close()},r([l(cc.Label)],t.prototype,"txts",void 0),r([l(cc.Button)],t.prototype,"btnConfirm",void 0),r([l(cc.Button)],t.prototype,"btnCancel",void 0),r([l(cc.Button)],t.prototype,"btnClose",void 0),r([c],t)}(a.default);o.default=p,cc._RF.pop()},{"../../Framework/UIBase":"UIBase"}],Define:[function(e,t,o){"use strict";cc._RF.push(t,"9d4e4ZPBHxBDr1UOayG7XXC","Define"),Object.defineProperty(o,"__esModule",{value:!0}),o.BACKGROUND_URL=o.STAGE_ICON_URL=o.SKILL_NAME=o.SKILL_ICON_URL=o.EQUIP_ICON_URL=o.EQUIP_QUALITY_ICON_URL=o.TALENT_ICON_URL_BY_ID=o.TALENT_ICON_URL=o.MONEY_ICON_URL=o.BubbleItemTag=o.ItemId=o.ItemTag=o.UnlockType=void 0,function(e){e[e.Idle=0]="Idle",e[e.NotUnlock=1]="NotUnlock",e[e.Max=2]="Max"}(o.UnlockType||(o.UnlockType={})),function(e){e[e.GameBubble=0]="GameBubble",e[e.GameBubbleItem=1]="GameBubbleItem",e[e.GameBubbleSpecial=2]="GameBubbleSpecial",e[e.ScoreFloatItem=99]="ScoreFloatItem"}(o.ItemTag||(o.ItemTag={})),o.ItemId||(o.ItemId={}),o.BubbleItemTag||(o.BubbleItemTag={}),o.MONEY_ICON_URL={money:"/Common/UI/ui_hb1",Money:"/Common/UI/ui_hb1",rMoney:"/Common/UI/ui_hb2",RMoney:"/Common/UI/ui_hb2",XiuLian:"/View/XiuLian/img/ui_xljm3"},o.TALENT_ICON_URL={0:"/Common/Icon/talentIcon/tb_tf1",1:"/Common/Icon/talentIcon/tb_tf2",2:"/Common/Icon/talentIcon/tb_tf3",3:"/Common/Icon/talentIcon/tb_tf4",4:"/Common/Icon/talentIcon/tb_tf5",5:"/Common/Icon/talentIcon/tb_tf6",6:"/Common/Icon/talentIcon/tb_tf7",7:"/Common/Icon/talentIcon/tb_tf8",8:"/Common/Icon/talentIcon/tb_tf9",9:"/Common/Icon/talentIcon/tb_tf10",10:"/Common/Icon/talentIcon/tb_tf11",11:"/Common/Icon/talentIcon/tb_tf12",12:"/Common/Icon/talentIcon/tb_tf13",13:"/Common/Icon/talentIcon/tb_tf14",14:"/Common/Icon/talentIcon/tb_tf15",15:"/Common/Icon/talentIcon/tb_tf16",16:"/Common/Icon/talentIcon/tb_tf17",17:"/Common/Icon/talentIcon/tb_tf18",18:"/Common/Icon/talentIcon/tb_tf19",19:"/Common/Icon/talentIcon/tb_tf20",20:"/Common/Icon/talentIcon/tb_tf21",21:"/Common/Icon/talentIcon/tb_tf22"},o.TALENT_ICON_URL_BY_ID={a_slevel_v:"/Common/Icon/talentIcon/tb_tf1",s_damage_p:"/Common/Icon/talentIcon/tb_tf2",a_crit_p:"/Common/Icon/talentIcon/tb_tf3",a_dodg_p:"/Common/Icon/talentIcon/tb_tf4",s_cd_p:"/Common/Icon/talentIcon/tb_tf5",a_bspeed_p:"/Common/Icon/talentIcon/tb_tf6",a_range_p:"/Common/Icon/talentIcon/tb_tf7",a_time_p:"/Common/Icon/talentIcon/tb_tf8",s_ehp_p:"/Common/Icon/talentIcon/tb_tf9",a_hps_p:"/Common/Icon/talentIcon/tb_tf10",a_hpm3_p:"/Common/Icon/talentIcon/tb_tf11",a_hlu_p:"/Common/Icon/talentIcon/tb_tf12",a_lucky_p:"/Common/Icon/talentIcon/tb_tf13",a_drop_p:"/Common/Icon/talentIcon/tb_tf14",a_exp_p:"/Common/Icon/talentIcon/tb_tf15",a_pickrange_p:"/Common/Icon/talentIcon/tb_tf16",a_hp_v:"/Common/Icon/talentIcon/tb_tf17",a_hp_p:"/Common/Icon/talentIcon/tb_tf18",a_atk_v:"/Common/Icon/talentIcon/tb_tf19",a_atk_p:"/Common/Icon/talentIcon/tb_tf20",a_critdmg_p:"/Common/Icon/talentIcon/tb_tf21",a_movespeed_v:"/Common/Icon/talentIcon/tb_tf22"},o.EQUIP_QUALITY_ICON_URL={0:"/Common/Icon/equipIcon/ui_itemk1",1:"/Common/Icon/equipIcon/ui_itemk2",2:"/Common/Icon/equipIcon/ui_itemk3",3:"/Common/Icon/equipIcon/ui_itemk4",4:"/Common/Icon/equipIcon/ui_itemk5",5:"/Common/Icon/equipIcon/ui_itemk6",6:"/Common/Icon/equipIcon/ui_itemk7"},o.EQUIP_ICON_URL={0:"/Common/Icon/equipIcon/tb_zb1",1:"/Common/Icon/equipIcon/tb_zb2",2:"/Common/Icon/equipIcon/tb_zb3",3:"/Common/Icon/equipIcon/tb_zb4",4:"/Common/Icon/equipIcon/tb_zb5",5:"/Common/Icon/equipIcon/tb_zb6",6:"/Common/Icon/equipIcon/tb_zb7",7:"/Common/Icon/equipIcon/tb_zb8",8:"/Common/Icon/equipIcon/tb_zb9",9:"/Common/Icon/equipIcon/tb_zb10",10:"/Common/Icon/equipIcon/tb_zb11",11:"/Common/Icon/equipIcon/tb_zb12",12:"/Common/Icon/equipIcon/tb_zb13",13:"/Common/Icon/equipIcon/tb_zb14",14:"/Common/Icon/equipIcon/tb_zb15",15:"/Common/Icon/equipIcon/tb_zb16",16:"/Common/Icon/equipIcon/tb_zb17",17:"/Common/Icon/equipIcon/tb_zb18",18:"/Common/Icon/equipIcon/tb_zb19",19:"/Common/Icon/equipIcon/tb_zb20",20:"/Common/Icon/equipIcon/tb_zb21",21:"/Common/Icon/equipIcon/tb_zb22",22:"/Common/Icon/equipIcon/tb_zb23",23:"/Common/Icon/equipIcon/tb_zb24",24:"/Common/Icon/equipIcon/tb_zb25",25:"/Common/Icon/equipIcon/tb_zb26",26:"/Common/Icon/equipIcon/tb_zb27",27:"/Common/Icon/equipIcon/tb_zb28",28:"/Common/Icon/equipIcon/tb_zb29",29:"/Common/Icon/equipIcon/tb_zb30"},o.SKILL_ICON_URL={dasuan:"/Common/Icon/skillIcon/tb_skill1",liuxingchui:"/Common/Icon/skillIcon/tb_skill2",zhadao:"/Common/Icon/skillIcon/tb_skill3",mozhua:"/Common/Icon/skillIcon/tb_skill4",xuanfeng:"/Common/Icon/skillIcon/tb_skill5",xuedizi:"/Common/Icon/skillIcon/tb_skill6",shufu:"/Common/Icon/skillIcon/tb_skill7",chushou:"/Common/Icon/skillIcon/tb_skill8",hudun:"/Common/Icon/skillIcon/tb_skill9",jiguang:"/Common/Icon/skillIcon/tb_skill10",gunshi:"/Common/Icon/skillIcon/tb_skill11",yunshi:"/Common/Icon/skillIcon/tb_skill12",huojian:"/Common/Icon/skillIcon/tb_skill13",feidao:"/Common/Icon/skillIcon/tb_skill14",bishou:"/Common/Icon/skillIcon/tb_skill15",leidian:"/Common/Icon/skillIcon/tb_skill16"},o.SKILL_NAME={dasuan:"\u6c14\u573a",liuxingchui:"\u6d41\u661f\u9524",zhadao:"\u95f8\u5200",mozhua:"\u9b54\u722a",xuanfeng:"\u65cb\u98ce",xuedizi:"\u8840\u6ef4\u5b50",shufu:"\u5bd2\u51b0",chushou:"\u89e6\u624b",hudun:"\u62a4\u76fe",jiguang:"\u6307",gunshi:"\u6eda\u77f3",yunshi:"\u9668\u77f3",huojian:"\u706b\u7bad",feidao:"\u98de\u5200",bishou:"\u56de\u65cb\u9556",leidian:"\u96f7\u51fb"},o.STAGE_ICON_URL={0:"/View/StageMap/stageObj/cc1",1:"/View/StageMap/stageObj/cc2",2:"/View/StageMap/stageObj/cc3",3:"/View/StageMap/stageObj/cc4",4:"/View/StageMap/stageObj/cc5",5:"/View/StageMap/stageObj/cc6",6:"/View/StageMap/stageObj/cc7",7:"/View/StageMap/stageObj/cc8",8:"/View/StageMap/stageObj/cc9",9:"/View/StageMap/stageObj/cc1b",10:"/View/StageMap/stageObj/ui_tgyz"},o.BACKGROUND_URL=["/Bg/map1","/Bg/map2","/Bg/map3"],cc._RF.pop()},{}],DrawSkill:[function(e,t,o){"use strict";cc._RF.push(t,"54b24nSrC1Pt67ZoBZ36WN7","DrawSkill");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/UI/UIFacade"),u=e("../../../Framework/UI/UIMgr"),d=e("../../../Framework/UIBase"),h=e("../../../Model/WeaponModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pages=[],t.toggles=null,t.graphics=null,t.graphics2=null,t.txtDesc=null,t._pageIdx=0,t._width=20,t._color=cc.color(0,0,0),t._tempDrawPoints=[],t._tempDrawPointsAll=[],t._tempDrawColorsAll=[],t._box=null,t._drawId=null,t}return i(t,e),t.prototype.onOpen=function(){var e=this;this.pages.forEach(function(t,o){return t.active=o==e._pageIdx}),this._box=this.graphics.node.getBoundingBoxToWorld(),this.graphics.strokeColor=this._color,this.graphics.node.on(cc.Node.EventType.TOUCH_START,this.onClickDraw,this),this.graphics.node.on(cc.Node.EventType.TOUCH_END,this.onClickDraw,this),this.graphics.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onClickDraw,this),this.graphics.node.on(cc.Node.EventType.TOUCH_MOVE,this.onClickDraw,this),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){u.default.inst.isUIOpen(c.UIType.SelectWeapon)||u.default.inst.isUIOpen(c.UIType.EliteBox)||u.default.inst.isUIOpen(c.UIType.FightEquip)||l.EVENT.emit(s.EventId.ON_GAME_RESUME)},t.prototype.onClickDraw=function(e){switch(e.type){case cc.Node.EventType.TOUCH_START:break;case cc.Node.EventType.TOUCH_END:case cc.Node.EventType.TOUCH_CANCEL:this._tempDrawColorsAll.push({x:this._color.r,y:this._color.g,z:this._color.b}),this._tempDrawPointsAll.push(this._tempDrawPoints),this._tempDrawPoints=[];break;case cc.Node.EventType.TOUCH_MOVE:var t=e.getLocation();t.x>this._box.xMax&&(t.x=this._box.xMax),t.x<this._box.xMin&&(t.x=this._box.xMin),t.y>this._box.yMax&&(t.y=this._box.yMax),t.y<this._box.yMin&&(t.y=this._box.yMin);var o=this.graphics.node.convertToNodeSpaceAR(t);this.draw(o,this.graphics)}},t.prototype.onClickToggle=function(e){switch(e.node.getSiblingIndex()){case 0:this._color=cc.Color.BLACK;break;case 1:this._color=cc.Color.RED;break;case 2:this._color=cc.Color.YELLOW;break;case 3:this._color=cc.Color.BLUE;break;case 4:this._color=cc.Color.GREEN}this.graphics.strokeColor=this._color},t.prototype.onClickSwitch=function(){var e=this;a.default.inst.showAd("\u6362\u4e2a\u6548\u679c",function(){e._drawId=h.WeaponModel.inst.getRandomDraw(e._drawId),e.txtDesc.string=h.WeaponModel.inst.weaponDrawList[e._drawId][0].desc})},t.prototype.onClickNext=function(){var e=this;switch(this._pageIdx){case 1:if(0==this._tempDrawPointsAll.length)return void p.UIFacade.showToast("\u4f60\u8fd8\u6ca1\u753b\u5462\uff01");h.WeaponModel.inst.tempDrawPointsAll=this._tempDrawPointsAll,h.WeaponModel.inst.tempDrawColorsAll=this._tempDrawColorsAll,this._drawId=h.WeaponModel.inst.getRandomDraw(),this.txtDesc.string=h.WeaponModel.inst.weaponDrawList[this._drawId][0].desc,this.recovery();break;case 2:return l.EVENT.emit(s.EventId.ON_GAME_DRAW_SKILL_LEVEL_UP,this._drawId,1),void this.close()}this._pageIdx++,this.pages.forEach(function(t,o){return t.active=o==e._pageIdx})},t.prototype.draw=function(e,t){var o=this._tempDrawPoints.length;if(this._tempDrawPoints.push({x:e.x,y:e.y}),o<=1)t.circle(e.x,e.y,this._width/2),t.fill();else{var n=this._tempDrawPoints[o-2],i=this._tempDrawPoints[o-1];t.moveTo(n.x,n.y),t.lineTo(i.x,i.y),t.lineWidth=this._width,t.lineCap=cc.Graphics.LineCap.ROUND,t.lineJoin=cc.Graphics.LineJoin.ROUND,t.strokeColor=this._color,t.stroke()}},t.prototype.recovery=function(){var e=this._tempDrawPointsAll.concat();for(var t in e){var o=e[t],n=this._tempDrawColorsAll[t];this._color=cc.color(n.x,n.y,n.z);for(var i=0,r=o;i<r.length;i++){var a=r[i];this.draw(a,this.graphics2)}this._tempDrawPoints=[]}},r([y([cc.Node])],t.prototype,"pages",void 0),r([y(cc.ToggleContainer)],t.prototype,"toggles",void 0),r([y(cc.Graphics)],t.prototype,"graphics",void 0),r([y(cc.Graphics)],t.prototype,"graphics2",void 0),r([y(cc.Label)],t.prototype,"txtDesc",void 0),r([_],t)}(d.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/WeaponModel":"WeaponModel"}],EliteBox:[function(e,t,o){"use strict";cc._RF.push(t,"b20b265LaRFdZJuujuwtNm2","EliteBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/UI/UIMgr"),u=e("../../../Framework/UIBase"),d=e("../../../Model/WeaponModel"),h=e("./SelectWeaponItem"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectWeapons=[],t.spine=null,t.content=null,t.ani=null,t._skillList=[],t}return i(t,e),t.prototype.onOpen=function(){var e=this;this.content.active=!1;var t=this.spine.setAnimation(0,"idle2",!1);this.spine.setTrackCompleteListener(t,function(){e.spine.setAnimation(0,"idle3",!0)}),this.spine.setTrackEventListener(t,function(){e.content.active=!0,e.ani.play()}),this.getWeapon(),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){p.default.inst.isUIOpen(c.UIType.SelectWeapon)||p.default.inst.isUIOpen(c.UIType.EliteBox)||p.default.inst.isUIOpen(c.UIType.FightEquip)||p.default.inst.isUIOpen(c.UIType.DrawSkill)||l.EVENT.emit(s.EventId.ON_GAME_RESUME)},t.prototype.getWeapon=function(){for(var e=d.WeaponModel.inst.getRandomExtra(1),t=e.length,o=0;o<t;o++){var n=e[o];(i=this.selectWeapons[o]).node.active=!0,i.setInfo(n)}for(;o<this.selectWeapons.length;o++){var i;(i=this.selectWeapons[o]).node.active=!1}this._skillList=e},t.prototype.getWeaponLevelUp=function(){for(var e=0;e<this._skillList.length;e++){var t=this._skillList[e];l.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP_EXTRA,t.id,t.info.lv)}},t.prototype.onClickGet=function(){this.getWeaponLevelUp(),this.close()},t.prototype.onClickGetAD=function(){var e=this;a.default.inst.showAd("\u7cbe\u82f1\u5b9d\u7bb1",function(){e.getWeaponLevelUp(),e.getWeaponLevelUp(),e.close()})},r([y([h.default])],t.prototype,"selectWeapons",void 0),r([y(sp.Skeleton)],t.prototype,"spine",void 0),r([y(cc.Node)],t.prototype,"content",void 0),r([y(cc.Animation)],t.prototype,"ani",void 0),r([_],t)}(u.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/WeaponModel":"WeaponModel","./SelectWeaponItem":"SelectWeaponItem"}],EventId:[function(e,t,o){"use strict";cc._RF.push(t,"11b6fpZP7FGr7WF79E8hZzj","EventId"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventId=void 0,o.EventId={ON_NODE_POOL_REUSE:"EventId.ON_NODE_POOL_REUSE",ON_NODE_POOL_UNUSE:"EventId.ON_NODE_POOL_UNUSE",CHANGE_SCENE:"EventId.CHANGE_SCENE",EVENT_CONFIRM:"EventId.EVENT_CONFIRM",ON_ORIENTATION_CHANGE:"EventId.ON_ORIENTATION_CHANGE",ON_UI_OPEN:"EventId.EVENT_ON_UI_OPEN",ON_UI_CLOSE:"EventId.EVENT_ON_UI_CLOSE",ON_UI_OPEN_FAIL:"EventId.ON_UI_OPEN_FAIL",ON_UI_MAIN_FLY_ICON:"EventId.ON_UI_MAIN_FLY_ICON",ON_UI_MAIN_FLY_XIULIAN:"EventId.ON_UI_MAIN_FLY_XIULIAN",ON_UI_GAME_FLY_EQUIP:"EventId.ON_UI_GAME_FLY_EQUIP",ON_LOGIN_RET:"EventId.ON_LOGIN_RET",ON_UPDATE_LOADING_PROGRESS:"EventId.ON_UPDATE_LOADING_PROGRESS",ON_UPDATE_LOADING_END:"EventId.ON_UPDATE_LOADING_END",ON_UPDATE_LOADING_TTP:"EventId.ON_UPDATE_LOADING_TTP",ON_REFUSE_ITEM_NUM:"ON_REFUSE_ITEM_NUM",ON_REFUSE_TASK:"ON_REFUSE_TASK",ON_GAME_PAUSE:"ON_GAME_PAUSE",ON_GAME_RESUME:"ON_GAME_RESUME",ON_GAME_START:"ON_GAME_START",ON_GAME_LOADED:"ON_GAME_LOADED",ON_GAME_RESULT:"ON_GAME_RESULT",ON_GAME_OVER:"ON_GAME_OVER",ON_GAME_READY_START:"ON_GAME_READY_START",ON_GAME_READY_END:"ON_GAME_READY_END",ON_GAME_ROUND_START:"ON_GAME_ROUND_START",ON_GAME_ROUND_END:"ON_GAME_ROUND_END",ON_GAME_SKILL_LEVEL_UP:"ON_GAME_SKILL_LEVEL_UP",ON_GAME_SKILL_LEVEL_UP_EXTRA:"ON_GAME_SKILL_LEVEL_UP_EXTRA",ON_GAME_DRAW_SKILL_LEVEL_UP:"ON_GAME_DRAW_SKILL_LEVEL_UP",ON_GAME_SKILL_REFUSE:"ON_GAME_SKILL_REFUSE",ON_GAME_DRAW_SKILL_REFUSE:"ON_GAME_DRAW_SKILL_REFUSE",ON_GAME_PLAYER_HIT:"ON_GAME_PLAYER_HIT",ON_GAME_PLAYER_REVIVE:"ON_GAME_PLAYER_REVIVE",ON_REFRESH_ROLE:"ON_REFRESH_ROLE",ON_REFRESH_RIDE:"ON_REFRESH_RIDE",ON_REFRESH_PET:"ON_REFRESH_PET",ON_REFRESH_SKIN:"ON_REFRESH_SKIN",ON_REFRESH_FIGHT_EQUIP:"ON_REFRESH_FIGHT_EQUIP",ON_GAME_UPDATE_ROLE_POS:"ON_GAME_ROLE_POS"},cc._RF.pop()},{}],EventMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0b580U6y3NDDoFSQ+d5eIuN","EventMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT=void 0;var r=function(e){function t(){return e.call(this)||this}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return t._inst||(t._inst=new t)},enumerable:!1,configurable:!0}),t}(cc.EventTarget);o.EVENT=r.inst,cc._RF.pop()},{}],FightEquipGuide:[function(e,t,o){"use strict";cc._RF.push(t,"d3683pd1ppIS7LASNviemXh","FightEquipGuide");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onOpen=function(){},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],FightEquipItem:[function(e,t,o){"use strict";cc._RF.push(t,"78ae864XXpAeLPn2P+Lt29T","FightEquipItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.spQuality=null,t.txtName=null,t.txtMsg=null,t._data=null,t}return i(t,e),t.prototype.setData=function(e){var t=this;if(null==e)this.icon.spriteFrame=null,this.loadBundleRes("Textures",a.EQUIP_QUALITY_ICON_URL[0],cc.SpriteFrame,function(e,o){var n=t.spQuality.spriteFrame;t.spQuality.spriteFrame=null,t.spQuality.spriteFrame=o,t.releaseAsset(n)}),this.txtName.string="",this.txtMsg.string="";else{this.loadBundleRes("Textures",a.EQUIP_ICON_URL[e.icon-1],cc.SpriteFrame,function(e,o){var n=t.icon.spriteFrame;t.icon.spriteFrame=null,t.icon.spriteFrame=o,t.releaseAsset(n)}),this.loadBundleRes("Textures",a.EQUIP_QUALITY_ICON_URL[e.quality+1],cc.SpriteFrame,function(e,o){var n=t.spQuality.spriteFrame;t.spQuality.spriteFrame=null,t.spQuality.spriteFrame=o,t.releaseAsset(n)});for(var o="",n=0,i=e.desc;n<i.length;n++)o+=i[n]+"\n";switch(this.txtName.string=""+e.name,this.txtMsg.string=""+o,e.quality){case 0:this.txtName.node.color=cc.color(30,255,30),this.txtMsg.node.color=cc.color(30,255,30);break;case 1:this.txtName.node.color=cc.color(0,168,255),this.txtMsg.node.color=cc.color(0,168,255);break;case 2:this.txtName.node.color=cc.color(255,0,255),this.txtMsg.node.color=cc.color(255,0,255);break;case 3:this.txtName.node.color=cc.color(255,155,12),this.txtMsg.node.color=cc.color(255,155,12);break;case 4:this.txtName.node.color=cc.color(255,255,0),this.txtMsg.node.color=cc.color(255,255,0);break;case 5:this.txtName.node.color=cc.color(255,0,0),this.txtMsg.node.color=cc.color(255,0,0)}}this._data=e},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([p(cc.Sprite)],t.prototype,"spQuality",void 0),r([p(cc.Label)],t.prototype,"txtName",void 0),r([p(cc.Label)],t.prototype,"txtMsg",void 0),r([l],t)}(s.default);o.default=u,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/Res/ResKeeper":"ResKeeper"}],FightEquipTips:[function(e,t,o){"use strict";cc._RF.push(t,"869774O8/5O/a8f2KVOcOP9","FightEquipTips");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/EventId"),s=e("../../../Framework/Event/EventMgr"),c=e("../../../Framework/UIBase"),l=e("../../../Model/GameModel"),p=e("./FightEquipItem"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t._data=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=t;this.item.setData(o),this._data=o},t.prototype.onClickUnEquip=function(){var e=this,t=l.GameModel.inst.fightList.findIndex(function(t){return t&&t.type==e._data.type});delete l.GameModel.inst.fightList[t],s.EVENT.emit(a.EventId.ON_REFRESH_FIGHT_EQUIP),this.close()},r([h(p.default)],t.prototype,"item",void 0),r([d],t)}(c.default);o.default=f,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/GameModel":"GameModel","./FightEquipItem":"FightEquipItem"}],FightEquip:[function(e,t,o){"use strict";cc._RF.push(t,"514823GuQVGAJX7rAws7joM","FightEquip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/TableMgr"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/UI/UIFacade"),u=e("../../../Framework/UI/UIMgr"),d=e("../../../Framework/UIBase"),h=e("../../../Model/AchievementModel"),f=e("../../../Model/GameModel"),_=e("./FightEquipItem"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cur=null,t.new=null,t.list=[],t.txtEquip=null,t.btnEquip=null,t.btnUnEquip=null,t.btnClose=null,t._data=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=this,n=t;if(null==n)this.cur.node.active=!1,this.new.node.active=!1,this.btnEquip.node.active=!1,this.btnUnEquip.node.active=!1,this.btnClose.node.active=!0;else{this.btnClose.node.active=!1;var i=a.TABLE.getTable("FightEquip").find(function(e){return e.id==n});this.new.setData(i),this._data=i;for(var r=0,c=f.GameModel.inst.fightList;r<c.length;r++){var p=c[r];if(null!=p&&p.type==i.type){p.quality<i.quality&&(this.txtEquip.string="\u5347\u7ea7");break}}}this.list.forEach(function(e){return e.node.on(cc.Node.EventType.TOUCH_END,o.onClickItem,o)}),this.updateFightList(),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){u.default.inst.isUIOpen(c.UIType.SelectWeapon)||u.default.inst.isUIOpen(c.UIType.EliteBox)||u.default.inst.isUIOpen(c.UIType.DrawSkill)||u.default.inst.isUIOpen(c.UIType.DrawSkill)||l.EVENT.emit(s.EventId.ON_GAME_RESUME)},t.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateFightList,this)},t.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateFightList,this)},t.prototype.updateFightList=function(){for(var e=0;e<this.list.length;e++)this.list[e].setData(f.GameModel.inst.fightList[e])},t.prototype.onClickItem=function(e){var t=e.target.getSiblingIndex();null!=f.GameModel.inst.fightList[t]&&u.default.inst.open(c.UIType.FightEquipTips,f.GameModel.inst.fightList[t])},t.prototype.onClickEquip=function(){var e=this,t=f.GameModel.inst.fightList.findIndex(function(e){return null==e}),o=f.GameModel.inst.fightList.findIndex(function(t){return t&&t.type==e._data.type});if(o>=0)f.GameModel.inst.fightList[o]=this._data;else{if(!(t>=0))return void p.UIFacade.showToast("\u9053\u5177\u680f\u5df2\u6ee1");f.GameModel.inst.fightList[t]=this._data}h.AchievementModel.inst.updatePoint(2,this._data.id),null!=this._data.skill&&""!=this._data.skill&&h.AchievementModel.inst.updatePoint(22,this._data.id),l.EVENT.emit(s.EventId.ON_REFRESH_FIGHT_EQUIP);var n=this.cur.node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.EVENT.emit(s.EventId.ON_UI_GAME_FLY_EQUIP,n,this._data),this.close()},t.prototype.onClickUnEquip=function(){this.close()},t.prototype.onClickEquipGuide=function(){u.default.inst.open(c.UIType.FightEquipGuide)},r([m(_.default)],t.prototype,"cur",void 0),r([m(_.default)],t.prototype,"new",void 0),r([m([_.default])],t.prototype,"list",void 0),r([m(cc.Label)],t.prototype,"txtEquip",void 0),r([m(cc.Button)],t.prototype,"btnEquip",void 0),r([m(cc.Button)],t.prototype,"btnUnEquip",void 0),r([m(cc.Button)],t.prototype,"btnClose",void 0),r([g],t)}(d.default);o.default=v,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/AchievementModel":"AchievementModel","../../../Model/GameModel":"GameModel","./FightEquipItem":"FightEquipItem"}],GameBase:[function(e,t,o){"use strict";cc._RF.push(t,"bc33cnjl0dCSavtH+OorQYU","GameBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameBase=void 0;var a=e("../Define/EventId"),s=e("../Framework/Event/EventMgr"),c=e("../Framework/Res/ResKeeperAddition"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){s.EVENT.on(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.on(a.EventId.ON_GAME_RESUME,this.resume,this),s.EVENT.on(a.EventId.ON_GAME_START,this.gameStart,this),s.EVENT.on(a.EventId.ON_GAME_RESULT,this.gameResult,this),s.EVENT.on(a.EventId.ON_GAME_OVER,this.gameOver,this)},t.prototype.onDisable=function(){s.EVENT.off(a.EventId.ON_GAME_PAUSE,this.pause,this),s.EVENT.off(a.EventId.ON_GAME_RESUME,this.resume,this),s.EVENT.off(a.EventId.ON_GAME_START,this.gameStart,this),s.EVENT.on(a.EventId.ON_GAME_RESULT,this.gameResult,this),s.EVENT.off(a.EventId.ON_GAME_OVER,this.gameOver,this)},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.gameStart=function(){},t.prototype.gameResult=function(){},t.prototype.gameOver=function(){},r([p],t)}(c.default));o.GameBase=u,cc._RF.pop()},{"../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Res/ResKeeperAddition":"ResKeeperAddition"}],GameItemBase:[function(e,t,o){"use strict";cc._RF.push(t,"4eb96tDM/lJcrdWMMo1pI4Y","GameItemBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameItemBase=void 0;var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.init=function(e){this._info=e},t.prototype.recycle=function(){},r([s],t)}(cc.Component));o.GameItemBase=c,cc._RF.pop()},{}],GameItemMgr:[function(e,t,o){"use strict";cc._RF.push(t,"ce113njI2JEMLy6Z50zXB+1","GameItemMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s,c=e("../Framework/Res/ResKeeperAddition"),l=e("../Game/Items/ComHitBeEffect"),p=e("../Game/Items/ComHitEffect"),u=e("../Game/Items/ComHitNum"),d=e("../Game/Items/HpBar"),h=e("../Model/GameModel"),f=e("./GameItemBase"),_=e("./LayerMgr"),y=cc._decorator;y.ccclass,y.property,function(e){e[e.HitBeEffect=0]="HitBeEffect",e[e.HitEffect=1]="HitEffect",e[e.HitMiss=2]="HitMiss",e[e.HitNum=3]="HitNum",e[e.HitNumC=4]="HitNumC",e[e.PickUpBox=5]="PickUpBox",e[e.PickUpEquip=6]="PickUpEquip",e[e.PickUpExp=7]="PickUpExp",e[e.PickUpFood=8]="PickUpFood",e[e.Revive=9]="Revive",e[e.HpBar=10]="HpBar",e[e.HpBar2=11]="HpBar2"}(s||(s={}));var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){return r(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.loadItemPool(s.HitBeEffect,"Prefabs","/Game/Items/HitBeEffect",f.GameItemBase)];case 1:return e.sent(),[4,this.loadItemPool(s.HitEffect,"Prefabs","/Game/Items/HitEffect",f.GameItemBase)];case 2:return e.sent(),[4,this.loadItemPool(s.HitMiss,"Prefabs","/Game/Items/HitMiss",f.GameItemBase)];case 3:return e.sent(),[4,this.loadItemPool(s.HitNum,"Prefabs","/Game/Items/HitNum",f.GameItemBase)];case 4:return e.sent(),[4,this.loadItemPool(s.HitNumC,"Prefabs","/Game/Items/HitNumC",f.GameItemBase)];case 5:return e.sent(),[4,this.loadItemPool(s.PickUpBox,"Prefabs","/Game/Items/PickUpBox",f.GameItemBase)];case 6:return e.sent(),[4,this.loadItemPool(s.PickUpEquip,"Prefabs","/Game/Items/PickUpEquip",f.GameItemBase)];case 7:return e.sent(),[4,this.loadItemPool(s.PickUpExp,"Prefabs","/Game/Items/PickUpExp",f.GameItemBase)];case 8:return e.sent(),[4,this.loadItemPool(s.PickUpFood,"Prefabs","/Game/Items/PickUpFood",f.GameItemBase)];case 9:return e.sent(),[4,this.loadItemPool(s.Revive,"Prefabs","/Game/Items/Revive")];case 10:return e.sent(),[4,this.loadItemPool(s.HpBar,"Prefabs","/Game/Items/HpBar")];case 11:return e.sent(),[4,this.loadItemPool(s.HpBar2,"Prefabs","/Game/Items/HpBar2")];case 12:return e.sent(),[2]}})})},t.prototype.generateHitNum=function(e,t){var o=this,n=s.HitNum,i=this.get(n),r=_.LayerMgr.inst.TopLayer;i.setParent(r);var a=30*Math.random()-15;i.setPosition(e.x+a,e.y+a);var c=i.getComponent(u.default);return c.play(t),c.recycle=function(){return o.put(n,i)},i},t.prototype.generateHitNumC=function(e,t){var o=this,n=s.HitNumC,i=this.get(n),r=_.LayerMgr.inst.TopLayer;i.setParent(r);var a=30*Math.random()-15;i.setPosition(e.x+a,e.y+a);var c=i.getComponent(u.default);return c.play(t),c.recycle=function(){return o.put(n,i)},i},t.prototype.generateHitMiss=function(e){var t=this,o=s.HitMiss,n=this.get(o),i=_.LayerMgr.inst.TopLayer;n.setParent(i);var r=30*Math.random()-15;n.setPosition(e.x+r,e.y+r);var a=n.getComponent(u.default);return a.play(0),a.recycle=function(){return t.put(o,n)},n},t.prototype.generateHitEffect=function(e){var t=this,o=s.HitEffect,n=this.get(o),i=_.LayerMgr.inst.TopLayer;n.setParent(i),n.setPosition(e.x,e.y);var r=n.getComponent(p.ComHitEffect);return r.playAnim(),r.recycle=function(){return t.put(o,n)},n},t.prototype.generateHitBeEffect=function(e){var t=this,o=s.HitBeEffect,n=this.get(o),i=_.LayerMgr.inst.TopLayer;n.setParent(i),n.setPosition(e.x,e.y);var r=n.getComponent(l.ComHitBeEffect);return r.playAnim(),r.recycle=function(){return t.put(o,n)},n},t.prototype.generateBox=function(e){var t=this,o=s.PickUpBox,n=this.get(o),i=_.LayerMgr.inst.Equip1Layer;return n.setParent(i),n.setPosition(e.x,e.y),n.getComponent(f.GameItemBase).recycle=function(){return t.put(o,n)},n},t.prototype.generateEquip=function(e,t){var o=this,n=s.PickUpEquip,i=this.get(n),r=_.LayerMgr.inst.Equip2Layer;i.setParent(r),i.setPosition(e.x,e.y);var a=i.getComponent(f.GameItemBase);return a.init(t),a.recycle=function(){return o.put(n,i)},i},t.prototype.generateExp=function(e){var t=this,o=s.PickUpExp,n=this.get(o),i=_.LayerMgr.inst.ItemLayer;return n.setParent(i),n.setPosition(e.x,e.y),n.getComponent(f.GameItemBase).recycle=function(){return t.put(o,n)},n},t.prototype.generateFood=function(e){var t=this,o=s.PickUpFood,n=this.get(o),i=_.LayerMgr.inst.EquipLayer;return n.setParent(i),n.setPosition(e.x,e.y),n.getComponent(f.GameItemBase).recycle=function(){return t.put(o,n)},n},t.prototype.generateRevive=function(e){var t=this,o=s.Revive,n=this.get(o),i=h.GameModel.inst.player.node;n.setParent(i),n.setPosition(0,0);var r=n.getComponent(sp.Skeleton),a=r.setAnimation(0,r.defaultAnimation,!1);r.setTrackCompleteListener(a,function(){t.put(o,n),e&&e()})},t.prototype.generateHpBar=function(e,t){var o=this;void 0===t&&(t=0);var n=s.HpBar,i=this.get(n),r=_.LayerMgr.inst.HpLayer;i.setParent(r);var a=i.getComponent(d.default);return a.setTarget(e,t),a.recycle=function(){return o.put(n,i)},i},t.prototype.generateHpBar2=function(e,t){var o=this;void 0===t&&(t=0);var n=s.HpBar2,i=this.get(n),r=_.LayerMgr.inst.HpLayer;i.setParent(r);var a=i.getComponent(d.default);return a.setTarget(e,t),a.recycle=function(){return o.put(n,i)},i},t}(c.default);o.default=g,cc._RF.pop()},{"../Framework/Res/ResKeeperAddition":"ResKeeperAddition","../Game/Items/ComHitBeEffect":"ComHitBeEffect","../Game/Items/ComHitEffect":"ComHitEffect","../Game/Items/ComHitNum":"ComHitNum","../Game/Items/HpBar":"HpBar","../Model/GameModel":"GameModel","./GameItemBase":"GameItemBase","./LayerMgr":"LayerMgr"}],GameModel:[function(e,t,o){"use strict";cc._RF.push(t,"17d5ceNpfNF3YpAH2oZtTp6","GameModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameModel=void 0;var n=e("../Controller/TableMgr"),i=e("../Define/EventId"),r=e("../Framework/Event/EventMgr"),a=e("../Framework/Utils/Utils"),s=e("../Framework/VM"),c=e("./WeaponModel"),l=function(){function e(){this.isLoad=!1,this._loadRef=0,this.isGuide=!1,this.isPause=!0,this.isFinished=!1,this._money=0,this._rMoney=0,this._stage=0,this._wave=0,this._waveMax=0,this._time=0,this._monster=0,this._monsterList=[],this._exp=0,this._level=0,this._fightList=[null,null,null,null,null,null],this._orientation={x:-1,y:0},this._player=null,this._immune=0,this._revive=0,s.VM.add(this,"GameModel")}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"money",{get:function(){return this._money},set:function(e){this._money=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rMoney",{get:function(){return this._rMoney},set:function(e){this._rMoney=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fightList",{get:function(){return this._fightList},set:function(e){this._fightList=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},set:function(e){this._stage=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wave",{get:function(){return this._wave},set:function(e){this._wave=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monster",{get:function(){return this._monster},set:function(e){this._monster=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this._time},set:function(e){this._time=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monsterList",{get:function(){return this._monsterList},set:function(e){this._monsterList=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e;var t=n.TABLE.getPlayerLevel()[this._level+1];null!=t&&this._exp>=t&&(this._exp-=t,this._level++,c.WeaponModel.inst.skillPoint++,this.exp=this._exp)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!1,configurable:!0}),e.prototype.getLevelExp=function(){var e=n.TABLE.getPlayerLevel()[this._level+1];return null==e?0:e},Object.defineProperty(e.prototype,"waveMax",{get:function(){return this._waveMax},set:function(e){this._waveMax=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"player",{get:function(){return this._player},set:function(e){this._player=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"immune",{get:function(){return this._immune},set:function(e){this._immune=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"revive",{get:function(){return this._revive},set:function(e){this._revive=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadRef",{get:function(){return this._loadRef},set:function(e){this.isLoad&&(this._loadRef=e,0==this._loadRef&&r.EVENT.emit(i.EventId.ON_GAME_LOADED))},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._money=0,this._rMoney=0,this._stage=0,this._wave=0,this._waveMax=0,this._time=0,this._monster=0,this._monsterList=[],this._exp=0,this._level=0,this._fightList=[null,null,null,null,null,null],this._orientation={x:-1,y:0},this._immune=0,this._revive=0,this.isFinished=!1},e.prototype.findRandMonster=function(){var e=[];return this._monsterList.forEach(function(t){return t.hp>0&&e.push(t.node)}),a.default.getRandToArray(e)},e.prototype.findRandMonsters=function(e){var t=[];return this._monsterList.forEach(function(e){return e.hp>0&&t.push(e.node)}),a.default.RandomSome(t,e)},e.prototype.findNearMonsters=function(e){var t=[];this._monsterList.forEach(function(e){return e.hp>0&&t.push(e.node)});var o=this._player.node.position;t.sort(function(e,t){return cc.Vec2.distance(o,e.position)-cc.Vec2.distance(o,t.position)});for(var n=[],i=0;i<e;i++)t[i]&&n.push(t[i]);return n},e._inst=null,e}();o.GameModel=l,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Utils/Utils":"Utils","../Framework/VM":"VM","./WeaponModel":"WeaponModel"}],GameOver:[function(e,t,o){"use strict";cc._RF.push(t,"06bb1EonLhCn7mtzfrPQNUu","GameOver");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/AdMgr"),s=e("../../Define/EventId"),c=e("../../Framework/Audio/AudioMgr"),l=e("../../Framework/Event/EventMgr"),p=e("../../Framework/UIBase"),u=e("../../Model/GameModel"),d=e("../../Model/UserModel"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spineBg=null,t.txtTittle=null,t.nodeMoney=null,t.txtMoney=null,t.nodeRMoney=null,t.txtRMoney=null,t.btnRevive=null,t.btnAD=null,t._cbReward=null,t}return i(t,e),t.prototype.onOpen=function(){l.EVENT.emit(s.EventId.ON_GAME_PAUSE),u.GameModel.inst.isFinished||0!=u.GameModel.inst.revive?this.btnRevive.node.active=!1:(this.btnRevive.node.active=!0,this.btnAD.node.active=!1),u.GameModel.inst.isFinished?(d.UserModel.inst.selectStage==d.UserModel.inst.curStage&&d.UserModel.inst.curStage++,c.AudioMgr.inst.playEffectByName("stageFinish"),this.spineBg.setAnimation(0,"idle1",!0),this.txtTittle.string="\u5f53\u524d\n\u5956\u52b1"):(c.AudioMgr.inst.playEffectByName("gameOver"),this.spineBg.setAnimation(0,"idle2",!0),this.txtTittle.string="\u901a\u5173\n\u5956\u52b1"),u.GameModel.inst.money>0?(this.nodeMoney.active=!0,this.txtMoney.string="x"+u.GameModel.inst.money):this.nodeMoney.active=!1,u.GameModel.inst.rMoney>0?(this.nodeRMoney.active=!0,this.txtRMoney.string="x"+u.GameModel.inst.rMoney):this.nodeRMoney.active=!1},t.prototype.onClose=function(){this._cbReward&&this._cbReward()},t.prototype.onClickRevive=function(){var e=this;a.default.inst.showAd("\u5c40\u5185\u590d\u6d3b",function(){l.EVENT.emit(s.EventId.ON_GAME_PLAYER_REVIVE),e.close()})},t.prototype.onClickAD=function(){var e=this;a.default.inst.showAd("\u7ed3\u7b97\u5956\u52b1\u591a\u500d",function(){l.EVENT.emit(s.EventId.ON_GAME_OVER),e.onReward(2),e.close()})},t.prototype.onClickExit=function(){l.EVENT.emit(s.EventId.ON_GAME_OVER),this.onReward(1),this.close()},t.prototype.onReward=function(e){var t=this.nodeMoney.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.nodeRMoney.convertToWorldSpaceAR(cc.Vec2.ZERO),n=u.GameModel.inst.money*e,i=u.GameModel.inst.rMoney*e;this._cbReward=function(){n&&(l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,t,"Money"),e>1&&l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,o,"Money",null,{delay:.6}),d.UserModel.inst.money+=n),i&&(l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,o,"RMoney"),e>1&&l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,o,"RMoney",null,{delay:.6}),d.UserModel.inst.rMoney+=i)}},r([_(sp.Skeleton)],t.prototype,"spineBg",void 0),r([_(cc.Label)],t.prototype,"txtTittle",void 0),r([_(cc.Node)],t.prototype,"nodeMoney",void 0),r([_(cc.Label)],t.prototype,"txtMoney",void 0),r([_(cc.Node)],t.prototype,"nodeRMoney",void 0),r([_(cc.Label)],t.prototype,"txtRMoney",void 0),r([_(cc.Button)],t.prototype,"btnRevive",void 0),r([_(cc.Button)],t.prototype,"btnAD",void 0),r([f],t)}(p.default);o.default=y,cc._RF.pop()},{"../../Controller/AdMgr":"AdMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase","../../Model/GameModel":"GameModel","../../Model/UserModel":"UserModel"}],GamePause:[function(e,t,o){"use strict";cc._RF.push(t,"a7f31/CuBpLCoq2AwmY/GLA","GamePause");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GamePause=void 0;var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("../../Framework/UI/UIFacade"),l=e("../../Framework/UIBase"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onOpen=function(){s.EVENT.emit(a.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){s.EVENT.emit(a.EventId.ON_GAME_RESUME)},t.prototype.onClickExit=function(){var e=this;c.UIFacade.showConfirm("\u63d0\u793a","\u662f\u5426\u9000\u51fa\u6e38\u620f\uff1f","\u786e\u5b9a","\u53d6\u6d88").then(function(){s.EVENT.emit(a.EventId.ON_GAME_OVER),e.close()}).catch(function(){})},t.prototype.update=function(){},r([u],t)}(l.default));o.GamePause=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UIBase":"UIBase"}],GameStart:[function(e,t,o){"use strict";cc._RF.push(t,"a8549cWXPpIab8SvmxFdFNB","GameStart");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("../../Framework/UIBase"),l=e("../../Controller/ItemMgr"),p=e("../../Model/GodPetModel"),u=e("../../Model/GodRideModel"),d=e("../../Model/GodSkinModel"),h=e("../../Model/GodWeaponModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spRole=null,t.nodeRole=null,t.nodeRide=null,t.nodePet=null,t.nodeWeapon=null,t._spaceX=180,t}return i(t,e),t.prototype.onOpen=function(){l.default.inst.init(),s.EVENT.emit(a.EventId.ON_GAME_PAUSE),this.nodeWeapon.removeFromParent();var e=this.spRole.attachUtil;e.generateAllAttachedNodes(),e.getAttachedNodes("target_lram")[0].addChild(this.nodeWeapon),this.updatePlayer()},t.prototype.onClose=function(){l.default.inst.releaseAutoRes()},t.prototype.onLoad=function(){s.EVENT.on(a.EventId.ON_REFRESH_ROLE,this.updatePlayer,this),s.EVENT.on(a.EventId.ON_REFRESH_RIDE,this.updatePlayer,this),s.EVENT.on(a.EventId.ON_REFRESH_SKIN,this.updatePlayer,this),s.EVENT.on(a.EventId.ON_REFRESH_PET,this.updatePlayer,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),s.EVENT.off(a.EventId.ON_REFRESH_ROLE,this.updatePlayer,this),s.EVENT.off(a.EventId.ON_REFRESH_RIDE,this.updatePlayer,this),s.EVENT.off(a.EventId.ON_REFRESH_SKIN,this.updatePlayer,this),s.EVENT.off(a.EventId.ON_REFRESH_PET,this.updatePlayer,this)},t.prototype.updatePlayer=function(){var e=this;d.GodSkinModel.inst.curIdx>0?this.spRole.setSkin("suit"+d.GodSkinModel.inst.curIdx):this.spRole.setSkin("suit0"),this.spRole.setAnimation(0,"idle2",!0),this.spRole.defaultAnimation="idle2",this.loadBundleRes("Prefabs",h.GodWeaponModel.inst.getPrefabUrl(h.GodWeaponModel.inst.curIdx),cc.Prefab,function(t,o){var n=cc.instantiate(o);e.nodeWeapon.removeAllChildren(),e.nodeWeapon.addChild(n);var i=n.getComponent(sp.Skeleton);i.setAnimation(0,"idle1",!0),i.defaultAnimation="idle1"}),this.nodeRide.active=u.GodRideModel.inst.curIdx>0,this.nodeRide.active&&this.loadBundleRes("Prefabs",u.GodRideModel.inst.getPrefabUrl(u.GodRideModel.inst.curIdx),cc.Prefab,function(t,o){var n=cc.instantiate(o);e.nodeRide.removeAllChildren(),e.nodeRide.addChild(n)}),this.nodePet.active=p.GodPetModel.inst.curIdx>0,this.nodePet.active&&this.loadBundleRes("Prefabs",p.GodPetModel.inst.getPrefabUrl(p.GodPetModel.inst.curIdx),cc.Prefab,function(t,o){var n=cc.instantiate(o);e.nodePet.removeAllChildren(),e.nodePet.addChild(n)}),this.nodeRide.active&&this.nodePet.active?(this.nodeRole.x=-this._spaceX,this.nodeRide.x=0,this.nodePet.x=this._spaceX):this.nodeRide.active?(this.nodeRole.x=-this._spaceX/2,this.nodeRide.x=this._spaceX/2):this.nodePet.active?(this.nodeRole.x=-this._spaceX/2,this.nodePet.x=this._spaceX/2):this.nodeRole.x=0},r([y(sp.Skeleton)],t.prototype,"spRole",void 0),r([y(cc.Node)],t.prototype,"nodeRole",void 0),r([y(cc.Node)],t.prototype,"nodeRide",void 0),r([y(cc.Node)],t.prototype,"nodePet",void 0),r([y(cc.Node)],t.prototype,"nodeWeapon",void 0),r([_],t)}(c.default);o.default=g,cc._RF.pop()},{"../../Controller/ItemMgr":"ItemMgr","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel"}],GetMoney:[function(e,t,o){"use strict";cc._RF.push(t,"78075HhmCpKqJMVsWh0j2/J","GetMoney");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Event/EventMgr"),l=e("../../../Framework/UIBase"),p=e("../../../Model/UserModel"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._type=-1,t._cb=null,t}return i(t,e),t.prototype.onOpen=function(e,t){this._type=t.type,this._cb=t.cb},t.prototype.onClickAd=function(){var e=this,t="";switch(this._type){case 0:t="\u5750\u9a91\u8865\u5145\u5143\u5b9d";break;case 1:t="\u795e\u5175\u8865\u5145\u5143\u5b9d";break;case 2:t="\u795e\u517d\u8865\u5145\u5143\u5b9d";break;case 3:t="\u65f6\u88c5\u8865\u5145\u5143\u5b9d"}a.default.inst.showAd(t,function(){p.UserModel.inst.rMoney+=20;var t=e.node.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,t,"RMoney"),e._cb&&e._cb(),e.close()})},r([d],t)}(l.default));o.default=h,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel"}],GodBase:[function(e,t,o){"use strict";cc._RF.push(t,"95b66kQkKNIXpMU8IjaSu3M","GodBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.GodBase=void 0;var n=function(){function e(){this._isUnlock=0,this._curIdx=0,this._curLevel=-1,this._exp=0,this._cur=null,this._next=null}return Object.defineProperty(e.prototype,"isUnlock",{get:function(){return this._isUnlock},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curIdx",{get:function(){return this._curIdx},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLevel",{get:function(){return this._curLevel},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curLv",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStar",{get:function(){return 0},enumerable:!1,configurable:!0}),e.prototype.getInfo=function(){return null},e.prototype.getSiblingInfo=function(){return null},e.prototype.getPrefabUrl=function(){return null},e.prototype.getState=function(){return null},e.prototype.canLevelUp=function(){return!1},e}();o.GodBase=n,cc._RF.pop()},{}],GodGuide:[function(e,t,o){"use strict";cc._RF.push(t,"ece0aKGYQBAObD4jIyXCVFJ","GodGuide");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Controller/NativeMgr"),s=e("../Model/GodSkinModel"),c=e("../Model/GodPetModel"),l=e("../Model/GodWeaponModel"),p=e("./task/Task"),u=e("../Model/GodRideModel"),d=e("../Framework/Res/ResKeeper"),h=e("../Model/UserModel"),f=e("../Framework/UI/UIMgr"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isTest=!1,t.test=null,t.touch=null,t.mask=null,t.mask_sp=null,t._touchValid=0,t}var o;return i(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return o._inst?o._inst:(cc.error("GodGuide not load yet!","%s"),null)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._inst=this,this.test.active=this.isTest},t.prototype.onDestroy=function(){o._inst=null},t.prototype.onEnable=function(){this.touch.on(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.touch.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},t.prototype.onDisable=function(){this.touch.off(cc.Node.EventType.TOUCH_START,this.onTouch,this),this.touch.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},t.prototype.start=function(){this.isTest||(this.node.active=!1)},t.prototype.run=function(){var e=this;null==cc.sys.localStorage.getItem("Guide0")?(cc.sys.localStorage.setItem("Guide0",1),this.getTask("GuideTask1",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:1,guidedesc:"\u5c11\u4fa0\uff01\u7b49\u4f60\u5f88\u4e45\u4e86\uff01\u654c\u4eba\u65e9\u5df2\u6df1\u5165\u6211\u65b9\u8179\u5730\uff0c\u5feb\u5feb\u968f\u6211\u8fdb\u5165\u6218\u573a\u5427\uff01"})})):null==cc.sys.localStorage.getItem("Guide2")&&h.UserModel.inst.canTalentBuy()?(cc.sys.localStorage.setItem("Guide2",1),this.getTask("GuideTask3",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:3,guidedesc:"\u5b66\u4e60\u5929\u8d4b\u6765\u63d0\u5347\u6218\u529b"}),e.run()})):null==cc.sys.localStorage.getItem("Guide1")&&u.GodRideModel.inst.canLevelUp()&&null==u.GodRideModel.inst.cur?(cc.sys.localStorage.setItem("Guide1",1),this.getTask("GuideTask2",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:2,guidedesc:"\u5750\u9a91\u7cfb\u7edf\u89e3\u9501\u5566\uff01"})})):null==cc.sys.localStorage.getItem("Guide4")&&l.GodWeaponModel.inst.canLevelUp()&&null==l.GodWeaponModel.inst.cur?(cc.sys.localStorage.setItem("Guide4",1),this.getTask("GuideTask5",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:5,guidedesc:"\u795e\u5175\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),e.run()})):null==cc.sys.localStorage.getItem("Guide5")&&c.GodPetModel.inst.canLevelUp()&&null==c.GodPetModel.inst.cur?(cc.sys.localStorage.setItem("Guide5",1),this.getTask("GuideTask6",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:6,guidedesc:"\u795e\u5ba0\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),e.run()})):null==cc.sys.localStorage.getItem("Guide6")&&s.GodSkinModel.inst.canLevelUp()&&null==s.GodSkinModel.inst.cur&&(cc.sys.localStorage.setItem("Guide6",1),this.getTask("GuideTask7",function(){a.default.inst.logEvent("ohayoo_game_guide",{guideid:7,guidedesc:"\u5957\u88c5\u7cfb\u7edf\u89e3\u9501\u5566\uff01"}),e.run()}))},t.prototype.getTask=function(e,t){var o=this;f.default.inst.delayUIWaitAnim(1),f.default.inst.showUIWaitAnim(),this.loadBundleRes("Prefabs","/Guide/task/"+e,cc.Prefab,function(e,n){f.default.inst.hideUIWaitAnim(),e&&cc.error(e),n&&o.execGuideTask(n,function(){o.releaseAsset(n),t&&t()})})},t.prototype.execGuideTask=function(e,t){console.warn("\u5f00\u59cb\u6267\u884c\u4efb\u52a1",e.name),this.node.active=!0;var o=cc.instantiate(e);o.setParent(this.node),this._endCb=t,this._task=o.getComponent(p.default),this.nextStage(!1)},t.prototype.endGuideTask=function(){console.warn("\u4efb\u52a1\u6267\u884c\u7ed3\u675f"),this.node.active=!1,this.mask.node.active=!1,this._task.node&&this._task.node.destroy(),this._task=null,this._endCb&&this._endCb()},t.prototype.nextStage=function(e){var t=this;void 0===e&&(e=!0),e&&this._task.index++,this.input=!1,this.exec=!1,this._task.targetNode=null,this._touchValid=0,this.mask.node.active=!1;var o=this._task.steps[this._task.index];if(o){var n=function(){t.exec=!0,t.input=!0,t._task.targetNode=cc.find(o.path),null==t._task.targetNode&&(t._task.targetNode=t.touch),"finger"==o.type&&t._focusToNode(t._task.targetNode)};o.onStart?o.onStart(n,this):n()}else this.endGuideTask()},t.prototype.onTouch=function(e){var t=e.target;if(!this.input)return console.warn("\u5904\u4e8e\u7981\u6b62\u72b6\u6001\uff0c\u62e6\u622a"),void t._touchListener.setSwallowTouches(!0);if(this._task&&this.exec){var o=this._task.steps[this._task.index];if(e.type==cc.Node.EventType.TOUCH_START)this._touchValid=0,this.checkHit(e.getLocation())&&(this._touchValid++,o.eventType==cc.Node.EventType.TOUCH_START&&this._touchValid++);else if(e.type==cc.Node.EventType.TOUCH_END)this.checkHit(e.getLocation())&&this._touchValid++;else{if(e.type==cc.Node.EventType.TOUCH_MOVE)return void t._touchListener.setSwallowTouches(!0);if(e.type==cc.Node.EventType.TOUCH_CANCEL)return void t._touchListener.setSwallowTouches(!1)}"finger"==o.type&&(1==this._touchValid&&e.type==cc.Node.EventType.TOUCH_START?t._touchListener.setSwallowTouches(!1):2==this._touchValid?(console.warn("\u547d\u4e2d\u76ee\u6807\u8282\u70b9\uff0c\u653e\u884c"),t._touchListener.setSwallowTouches(!1),this.nextStage()):(console.warn("\u672a\u547d\u4e2d\u76ee\u6807\u8282\u70b9\uff0c\u62e6\u622a"),t._touchListener.setSwallowTouches(!0)))}else t._touchListener.setSwallowTouches(!1)},t.prototype.checkHit=function(e){if(this._task.targetNode){var t=this._task.targetNode.getBoundingBox(),o=this._task.targetNode.convertToWorldSpaceAR(cc.Vec2.ZERO);return t.x=o.x-t.width/2,t.y=o.y-t.height/2,!!t.contains(e)}return!0},t.prototype._focusToNode=function(e){var t=this;this.mask.node.active=!0,this.mask._graphics.clear(),this.scheduleOnce(function(){var o=e.getBoundingBox(),n=e.convertToWorldSpaceAR(cc.Vec2.ZERO),i=t.node.convertToNodeSpaceAR(n);o.x=i.x-o.width/2,o.y=i.y-o.height/2,t.mask._graphics.fillRect(o.x,o.y,o.width,o.height)})},t.prototype.getNodeFullPath=function(e){var t=cc.director.getScene().name,o=[],n=e;do{o.unshift(n.name),n=n.parent}while(n&&n.name!==t);return o.join("/")},t.prototype.startRecordNodeTouch=function(){if(this._task)cc.warn("\u4efb\u52a1\u5f15\u5bfc\u4e2d\uff0c\u4e0d\u80fd\u5f55\u5236");else{if(this._dispatchEvent)return cc.warn("\u5df2\u7ecf\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f \u505c\u6b62\u5f55\u5236"),void this.stopRecordNodeTouch();cc.warn("\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f"),this._dispatchEvent=cc.Node.prototype.dispatchEvent,this._recordSteps=[],this.input=!0;var e=this;cc.Node.prototype.dispatchEvent=function(t){if(e._dispatchEvent.call(this,t),!e.isGuideNode(t.target)&&t.type===cc.Node.EventType.TOUCH_END){var o=e.getNodeFullPath(this);e._recordSteps.push({path:o,type:"finger",onStart:null})}}}},t.prototype.stopRecordNodeTouch=function(){this._dispatchEvent?(cc.Node.prototype.dispatchEvent=this._dispatchEvent,this._dispatchEvent=null,this.input=!1,cc.warn("\u9000\u51fa\u5f55\u5236\u72b6\u6001")):cc.warn("\u672a\u8fdb\u5165\u5f55\u5236\u72b6\u6001")},t.prototype.execRecordTask=function(){this._task?cc.warn("\u4efb\u52a1\u5f15\u5bfc\u4e2d\uff0c\u4e0d\u80fd\u5f55\u5236"):this._dispatchEvent?cc.warn("\u5df2\u7ecf\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f"):this._recordSteps?(console.log(JSON.stringify(this._recordSteps)),this._recordSteps=null):cc.warn("\u6ca1\u6709\u5f55\u5236\u5185\u5bb9")},t.prototype.clearRecord=function(){this.stopRecordNodeTouch(),this.mask.node.active=!1,this._task=null,this._recordSteps=null},t.prototype.isGuideNode=function(e){var t=e;if(t==this.touch)return!0;for(var o=0,n=this.test.children;o<n.length;o++)if(t==n[o])return!0;return!1},r([g],t.prototype,"isTest",void 0),r([g(cc.Node)],t.prototype,"test",void 0),r([g(cc.Node)],t.prototype,"touch",void 0),r([g(cc.Mask)],t.prototype,"mask",void 0),r([g(cc.Sprite)],t.prototype,"mask_sp",void 0),o=r([y],t)}(d.default);o.default=m,cc._RF.pop()},{"../Controller/NativeMgr":"NativeMgr","../Framework/Res/ResKeeper":"ResKeeper","../Framework/UI/UIMgr":"UIMgr","../Model/GodPetModel":"GodPetModel","../Model/GodRideModel":"GodRideModel","../Model/GodSkinModel":"GodSkinModel","../Model/GodWeaponModel":"GodWeaponModel","../Model/UserModel":"UserModel","./task/Task":"Task"}],GodMenuNew:[function(e,t,o){"use strict";cc._RF.push(t,"c6a1ePduwxL87P3yJuwtnT5","GodMenuNew");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("../../../Framework/i18n/i18nMgr"),c=e("../../../Framework/UIBase"),l=e("../../../Model/GodPetModel"),p=e("../../../Model/GodRideModel"),u=e("../../../Model/GodSkinModel"),d=e("../../../Model/GodWeaponModel"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtTitle=null,t.txtName=null,t._type=-1,t._str=null,t._model=null,t._info=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=this;a.AudioMgr.inst.playEffectByName("unlockRide"),this._info=t.info,this._type=t.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin"][this._type],this._model=[p.GodRideModel.inst,d.GodWeaponModel.inst,l.GodPetModel.inst,u.GodSkinModel.inst][this._type],this.txtTitle.string=s.i18nMgr.getLabel(this._str+"New/tittl"),this.txtName.string="\u3010"+s.i18nMgr.getLabel(this._str+"/name"+this._info.lv)+"\u3011",this.loadBundleRes("Prefabs",this._model.getPrefabUrl(this._info.lv),cc.Prefab,function(e,t){var n=cc.instantiate(t);o.icon.removeAllChildren(),o.icon.addChild(n)}),1==this._type?(this.icon.setScale(1,1),this.icon.y=-42):(this.icon.setScale(1.2,1.2),this.icon.y=-202)},r([_(cc.Node)],t.prototype,"icon",void 0),r([_(cc.Label)],t.prototype,"txtTitle",void 0),r([_(cc.Label)],t.prototype,"txtName",void 0),r([f],t)}(c.default);o.default=y,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel"}],GodMenuViewItem:[function(e,t,o){"use strict";cc._RF.push(t,"7c9a023PhxC15dSa1u1MhzH","GodMenuViewItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtName=null,t.txtState=null,t.btnEquip=null,t.btnUnEquip=null,t}return i(t,e),r([c(cc.Label)],t.prototype,"txtName",void 0),r([c(cc.Label)],t.prototype,"txtState",void 0),r([c(cc.Button)],t.prototype,"btnEquip",void 0),r([c(cc.Button)],t.prototype,"btnUnEquip",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],GodMenuView:[function(e,t,o){"use strict";cc._RF.push(t,"ce338pTB1NEjptX7nQnsW4r","GodMenuView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/TableMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/i18n/i18nMgr"),u=e("../../../Framework/List/List"),d=e("../../../Framework/UI/UIFacade"),h=e("../../../Framework/UIBase"),f=e("../../../Model/GodPetModel"),_=e("../../../Model/GodRideModel"),y=e("../../../Model/GodSkinModel"),g=e("../../../Model/GodWeaponModel"),m=e("./GodMenuViewItem"),v=cc._decorator,M=v.ccclass,b=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=null,t.txtTitle=null,t._type=-1,t._str=null,t._model=null,t._select=-1,t}return i(t,e),t.prototype.onOpen=function(e,t){c.AudioMgr.inst.playEffectByName("ui_open"),this._type=t.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin"][this._type],this._model=[_.GodRideModel.inst,g.GodWeaponModel.inst,f.GodPetModel.inst,y.GodSkinModel.inst][this._type],this.txtTitle.string=p.i18nMgr.getLabel(this._str+"View/tittle"),this.list.numItems=a.TABLE.getTable(this._str).length},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.onListRender=function(e,t){var o=this,n=e.getComponent(m.default),i=t+1,r=f.GodPetModel.inst.getInfo(i);if(null==r)return n.btnEquip.node.active=!1,n.btnUnEquip.node.active=!1,n.txtState.string="\uff1f\uff1f\uff1f",void(n.txtName.string=i+"\u9636 \uff1f\uff1f\uff1f");n.btnEquip.node.active=this._model.curIdx!=i&&this._model.curLv>=i,n.btnUnEquip.node.active=this._model.curIdx==i,n.txtState.string=this._model.curLv>=i?"\u5df2\u89e3\u9501":"\u672a\u89e3\u9501",n.txtName.string=i+"\u9636 "+p.i18nMgr.getLabel(this._str+"/name"+r.lv);var a=function(){d.UIFacade.showToast("\u5916\u5f62\u5207\u6362\u6210\u529f"),c.AudioMgr.inst.playEffectByName("talentSelect"),o._model.curIdx==i?o._model.curIdx=0:o._model.curIdx=i,o.list.updateAll(),l.EVENT.emit(s.EventId.ON_REFRESH_ROLE)};n.btnEquip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnUnEquip.node.targetOff(cc.Node.EventType.TOUCH_END),n.btnEquip.node.on(cc.Node.EventType.TOUCH_END,a),n.btnUnEquip.node.on(cc.Node.EventType.TOUCH_END,a)},r([b(u.default)],t.prototype,"list",void 0),r([b(cc.Label)],t.prototype,"txtTitle",void 0),r([M],t)}(h.default);o.default=I,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/List/List":"List","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel","./GodMenuViewItem":"GodMenuViewItem"}],GodMenu:[function(e,t,o){"use strict";cc._RF.push(t,"326b1II54ZGyb2vCLypVI1z","GodMenu");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/i18n/i18nMgr"),u=e("../../../Framework/UI/UIMgr"),d=e("../../../Framework/UIBase"),h=e("../../../Model/UserModel"),f=e("../../../Model/GodPetModel"),_=e("../../../Model/AchievementModel"),y=e("../../../Framework/Utils/Utils"),g=e("../../../Framework/Audio/AudioMgr"),m=e("../../../Controller/ItemMgr"),v=e("../../../Model/GodWeaponModel"),M=e("../../../Model/GodRideModel"),b=e("../../../Model/GodSkinModel"),I=cc._decorator,E=I.ccclass,O=I.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.star=[],t.starSf=[],t.starNode=null,t.next=null,t.max=null,t.txtTitle=null,t.attribute1Txt=null,t.attribute2Txt=null,t.attribute3Txt=null,t.attribute4Txt=null,t.txtNum=null,t.txtNext=null,t.txtLevelUp=null,t.btnRight=null,t.btnLeft=null,t.btnView=null,t.btnLevelUp=null,t.pbLevel=null,t.txtLevel=null,t.pbLevelBar=null,t._type=-1,t._str=null,t._model=null,t._pageIdx=0,t._iconIdx=0,t}return i(t,e),t.prototype.onOpen=function(e,t){g.AudioMgr.inst.playEffectByName("ui_open"),this._type=t.type,this._str=["GodRide","GodWeapon","GodPet","GodSkin"][this._type],this._model=[M.GodRideModel.inst,v.GodWeaponModel.inst,f.GodPetModel.inst,b.GodSkinModel.inst][this._type],this.star.forEach(function(e){return e.node.children[0].active=!1}),this.pbLevel.node.active=!1,this.pbLevelBar.active=!1,this.refresh(),this.refreshLeftRight()},t.prototype.close=function(){this._playAni||e.prototype.close.call(this)},t.prototype.refresh=function(e){var t,o,n=this;void 0===e&&(e=this._model.cur||this._model.next);var i=this._model.cur||this._model.next,r=this._model.getState();i.lv<e.lv?(this.btnLevelUp.node.active=!1,this.next.active=!0,this.max.active=!1,this.txtNext.string=""+p.i18nMgr.getLabel(this._str+"/next",[p.i18nMgr.getLabel(this._str+"/name"+(e.lv-1))])):i.lv>e.lv||r==a.UnlockType.Max?(this.btnLevelUp.node.active=!1,this.next.active=!1,this.max.active=!0):i.lv==e.lv&&(this.btnLevelUp.node.active=!0,this.next.active=!1,this.max.active=!1,r==a.UnlockType.NotUnlock?(this.starNode.active=!1,this.pbLevel.node.active=!1):(this.starNode.active=!0,this.pbLevel.node.active=!0,this.star.forEach(function(e,t){return e.spriteFrame=t>=n._model.curStar?n.starSf[0]:n.starSf[1]}))),0==this._type?(this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodRide/attribute1",[""+(null==i?void 0:i.atk)]),this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodRide/attribute2",[""+(null==i?void 0:i.hp)]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodRide/attribute3",[""+(null==i?void 0:i.speed)])):1==this._type?(this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodWeapon/attribute1",[""+((null==i?void 0:i.atk)||0)]),this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodWeapon/attribute2",[""+((null==i?void 0:i.hp)||0)]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodWeapon/attribute3",[""+Math.floor(100*((null==i?void 0:i.crit)||0))])):2==this._type?(this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute1",[""+Math.floor(100*((null==i?void 0:i.atk)||0))]),this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute2",[""+Math.floor(100*((null==i?void 0:i.crit)||0))]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute3",[""+Math.floor(100*((null==i?void 0:i.critDamage)||0))]),this.attribute4Txt.string=""+p.i18nMgr.getLabel("GodPet/attribute4",[""+((null==i?void 0:i.speed)||0)])):3==this._type&&(this.attribute1Txt.string=""+p.i18nMgr.getLabel("GodSkin/attribute1",[""+((null==i?void 0:i.atk)||0)]),this.attribute2Txt.string=""+p.i18nMgr.getLabel("GodSkin/attribute2",[""+((null==i?void 0:i.hp)||0)]),this.attribute3Txt.string=""+p.i18nMgr.getLabel("GodSkin/attribute3",[""+Math.floor(100*((null==i?void 0:i.reduce)||0))])),this.txtTitle.string=i.lv+this._pageIdx+"\u9636 "+p.i18nMgr.getLabel(this._str+"/name"+e.lv),this.txtNum.string=h.UserModel.inst[null===(t=this._model.next)||void 0===t?void 0:t.item]+"/"+(null===(o=this._model.next)||void 0===o?void 0:o.count),this.btnView.node.active=null!=this._model.cur,this.txtLevelUp.string=null==this._model.cur?""+p.i18nMgr.getLabel(this._str+"/levelUp1"):""+p.i18nMgr.getLabel(this._str+"/levelUp2"),this.setIcon(e.lv),this.updateExp()},t.prototype.refreshLeftRight=function(){this.btnRight.node.active=null!=this._model.getSiblingInfo(this._pageIdx+1),this.btnLeft.node.active=null!=this._model.getSiblingInfo(this._pageIdx-1)},t.prototype.setIcon=function(e){var t=this;if(this._iconIdx!=e)this._iconIdx=e,this.loadBundleRes("Prefabs",this._model.getPrefabUrl(e),cc.Prefab,function(o,n){if(t._iconIdx==e){var i=cc.instantiate(n);t.icon.removeAllChildren(),t.icon.addChild(i),t._pageIdx>0||0==t._model.curLv&&0==t._model.curStar?t.changeMatBlack(i):t.changeMatNormal(i)}});else{var o=this.icon.children[0];this._pageIdx>0||0==this._model.curLv&&0==this._model.curStar?this.changeMatBlack(o):this.changeMatNormal(o)}},t.prototype.changeMatNormal=function(e){e.color=cc.color(255,255,255)},t.prototype.changeMatBlack=function(e){e.color=cc.color(0,0,0)},t.prototype.onClickRight=function(){this._playAni||(this.refresh(this._model.getSiblingInfo(++this._pageIdx)),this.refreshLeftRight())},t.prototype.onClickLeft=function(){this._playAni||(this.refresh(this._model.getSiblingInfo(--this._pageIdx)),this.refreshLeftRight())},t.prototype.onClickLevelUp=function(){if(!this._playAni)return this._model.canLevelUp()?void this.onExpUp():(u.default.inst.open(c.UIType.GetMoney,{type:2,cb:this.refresh.bind(this)}),void g.AudioMgr.inst.playEffectByName("ui_not"))},t.prototype.updateExp=function(){var e=this._model.cur;if(null!=e){var t=e.expLen,o=this._model.exp,n=e.addExp,i=0,r=0;t.forEach(function(e,t){r+=e*n,t<o&&(i+=e*n)}),this.pbLevel.progress=i/r,this.txtLevel.string=i+"/"+r}},t.prototype.onExpUp=function(){var e,t,o=this,n=this._model.cur,i=this._model.next;if(this._model.exp++,h.UserModel.inst[i.item]-=i.count,this.txtNum.string=h.UserModel.inst[null===(e=this._model.next)||void 0===e?void 0:e.item]+"/"+(null===(t=this._model.next)||void 0===t?void 0:t.count),null==n)return this.onLevelUp(),void this.updateExp();var r=n.expLen,a=this._model.exp,s=this._model.exp+1,c=n.addExp,l=0,p=0,u=0;switch(r.forEach(function(e,t){u+=e*c,t<a&&(l+=e*c),t<s&&(p+=e*c)}),this._playAni=!0,this.pbLevelBar.active=!0,cc.tween(this.pbLevel).to(.3,{progress:p/u}).start(),y.default.rollNum(l,p,function(e){o.txtLevel.string=Math.floor(e)+"/"+u},function(){o._playAni=!1,o.pbLevelBar.active=!1,p==u&&(o._model.exp=-1,o.onLevelUp())},.3),r[a]){case 1:g.AudioMgr.inst.playEffectByName("scoreNormal");break;case 2:g.AudioMgr.inst.playEffectByName("scoreDouble"),m.default.inst.generateDouble(this.pbLevel.node.convertToWorldSpaceAR(cc.Vec2.ZERO));break;case 3:g.AudioMgr.inst.playEffectByName("scoreTriple"),m.default.inst.generateTreble(this.pbLevel.node.convertToWorldSpaceAR(cc.Vec2.ZERO))}},t.prototype.onLevelUp=function(){var e,t=this,o=this._model.cur,n=this._model.next;this._model.curLevel++;var i=this._model.curStar-1;0==this._model.curStar&&this._model.curLevel>0&&(i=4);var r=null===(e=this.star[i])||void 0===e?void 0:e.getComponentInChildren(sp.Skeleton),a=function(){t.refresh(),t.refreshLeftRight(),(null==o?void 0:o.lv)!=n.lv&&(t._model.curIdx=n.lv,l.EVENT.emit(s.EventId.ON_REFRESH_ROLE),u.default.inst.open(c.UIType.GodMenuNew,{info:n,type:t._type})),_.AchievementModel.inst.updatePoint(7,n.lv)};switch(r?(this._playAni=!0,this.starNode.active=!0,this.star.forEach(function(e,o){return e.spriteFrame=o>i?t.starSf[0]:t.starSf[1]}),r.node.active=!0,r.setAnimation(0,r.defaultAnimation,!1),r.setCompleteListener(function(){r.node.active=!1,t._playAni=!1,a()})):a(),this._model.curStar){case 0:g.AudioMgr.inst.playEffectByName("ridestar5");break;case 1:case 2:g.AudioMgr.inst.playEffectByName("ridestar12");break;case 3:case 4:g.AudioMgr.inst.playEffectByName("ridestar34")}},t.prototype.onClickView=function(){u.default.inst.open(c.UIType.GodMenuView,{type:this._type})},r([O(cc.Node)],t.prototype,"icon",void 0),r([O([cc.Sprite])],t.prototype,"star",void 0),r([O([cc.SpriteFrame])],t.prototype,"starSf",void 0),r([O(cc.Node)],t.prototype,"starNode",void 0),r([O(cc.Node)],t.prototype,"next",void 0),r([O(cc.Node)],t.prototype,"max",void 0),r([O(cc.Label)],t.prototype,"txtTitle",void 0),r([O(cc.Label)],t.prototype,"attribute1Txt",void 0),r([O(cc.Label)],t.prototype,"attribute2Txt",void 0),r([O(cc.Label)],t.prototype,"attribute3Txt",void 0),r([O(cc.Label)],t.prototype,"attribute4Txt",void 0),r([O(cc.Label)],t.prototype,"txtNum",void 0),r([O(cc.Label)],t.prototype,"txtNext",void 0),r([O(cc.Label)],t.prototype,"txtLevelUp",void 0),r([O(cc.Button)],t.prototype,"btnRight",void 0),r([O(cc.Button)],t.prototype,"btnLeft",void 0),r([O(cc.Button)],t.prototype,"btnView",void 0),r([O(cc.Button)],t.prototype,"btnLevelUp",void 0),r([O(cc.ProgressBar)],t.prototype,"pbLevel",void 0),r([O(cc.Label)],t.prototype,"txtLevel",void 0),r([O(cc.Node)],t.prototype,"pbLevelBar",void 0),r([E],t)}(d.default);o.default=S,cc._RF.pop()},{"../../../Controller/ItemMgr":"ItemMgr","../../../Define/Define":"Define","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/AchievementModel":"AchievementModel","../../../Model/GodPetModel":"GodPetModel","../../../Model/GodRideModel":"GodRideModel","../../../Model/GodSkinModel":"GodSkinModel","../../../Model/GodWeaponModel":"GodWeaponModel","../../../Model/UserModel":"UserModel"}],GodPetModel:[function(e,t,o){"use strict";cc._RF.push(t,"4b0815ISa9MermNbm/zzpPC","GodPetModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodPetModel=void 0;var r=e("../Controller/TableMgr"),a=e("../Define/Define"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("./GodBase"),l=e("./UserModel"),p=function(e){function t(){var t=e.call(this)||this;return t._curIdx=Number(s.LocalStorageMgr.getItem("GodPet_curIdx"))||0,t._curLevel=Number(s.LocalStorageMgr.getItem("GodPet_curLevel"))||0,t._exp=Number(s.LocalStorageMgr.getItem("GodPet_exp"))||0,t._refreshInfo(),t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(e){this._curIdx=e,s.LocalStorageMgr.setItem("GodPet_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){this._curLevel=e,this._refreshInfo(),s.LocalStorageMgr.setItem("GodPet_curLevel",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e,s.LocalStorageMgr.setItem("GodPet_exp",""+e)},enumerable:!1,configurable:!0}),t.prototype._refreshInfo=function(){var e=r.TABLE.getTable("GodPet");return this._curLevel>e.length?(this._cur=e[e.length-1],this._next=e[e.length-2]):(this._cur=e[this._curLevel-1],this._next=e[this._curLevel]),this._cur},t.prototype.getInfo=function(e){return r.TABLE.getTable("GodPet").find(function(t){return t.lv==e})},t.prototype.getSiblingInfo=function(e){var t=this.curLv;return 0==t&&(t=1),this.getInfo(t+e)},t.prototype.getPrefabUrl=function(e){return"/Game/GodPet/"+this.getInfo(e).name},t.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},t.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godPetOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},t._inst=null,t}(c.GodBase);o.GodPetModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodRideModel:[function(e,t,o){"use strict";cc._RF.push(t,"b2c0bPJ7JBDhboykgK6djNH","GodRideModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodRideModel=void 0;var r=e("../Controller/TableMgr"),a=e("../Define/Define"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("./GodBase"),l=e("./UserModel"),p=function(e){function t(){var t=e.call(this)||this;return t._curIdx=Number(s.LocalStorageMgr.getItem("GodRide_curIdx"))||0,t._curLevel=Number(s.LocalStorageMgr.getItem("GodRide_curLevel"))||0,t._exp=Number(s.LocalStorageMgr.getItem("GodRide_exp"))||0,t._refreshInfo(),t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(e){this._curIdx=e,s.LocalStorageMgr.setItem("GodRide_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){this._curLevel=e,this._refreshInfo(),s.LocalStorageMgr.setItem("GodRide_curLevel",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e,s.LocalStorageMgr.setItem("GodRide_exp",""+e)},enumerable:!1,configurable:!0}),t.prototype._refreshInfo=function(){var e=r.TABLE.getTable("GodRide");return this._curLevel>e.length?(this._cur=e[e.length-1],this._next=e[e.length-2]):(this._cur=e[this._curLevel-1],this._next=e[this._curLevel]),this._cur},t.prototype.getInfo=function(e){return r.TABLE.getTable("GodRide").find(function(t){return t.lv==e})},t.prototype.getSiblingInfo=function(e){var t=this.curLv;return 0==t&&(t=1),this.getInfo(t+e)},t.prototype.getPrefabUrl=function(e){return"/Game/GodRide/"+this.getInfo(e).name},t.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},t.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.rideOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},t._inst=null,t}(c.GodBase);o.GodRideModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodSkinModel:[function(e,t,o){"use strict";cc._RF.push(t,"cc8c3z4EX1DyYfhEMUYgm9e","GodSkinModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodSkinModel=void 0;var r=e("../Controller/TableMgr"),a=e("../Define/Define"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("./GodBase"),l=e("./UserModel"),p=function(e){function t(){var t=e.call(this)||this;return t._curIdx=Number(s.LocalStorageMgr.getItem("GodSkin_curIdx"))||0,t._curLevel=Number(s.LocalStorageMgr.getItem("GodSkin_curLevel"))||0,t._exp=Number(s.LocalStorageMgr.getItem("GodSkin_exp"))||0,t._refreshInfo(),t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(e){this._curIdx=e,s.LocalStorageMgr.setItem("GodSkin_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){this._curLevel=e,this._refreshInfo(),s.LocalStorageMgr.setItem("GodSkin_curLevel",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e,s.LocalStorageMgr.setItem("GodSkin_exp",""+e)},enumerable:!1,configurable:!0}),t.prototype._refreshInfo=function(){var e=r.TABLE.getTable("GodSkin");return this._curLevel>e.length?(this._cur=e[e.length-1],this._next=e[e.length-2]):(this._cur=e[this._curLevel-1],this._next=e[this._curLevel]),this._cur},t.prototype.getInfo=function(e){return r.TABLE.getTable("GodSkin").find(function(t){return t.lv==e})},t.prototype.getSiblingInfo=function(e){var t=this.curLv;return 0==t&&(t=1),this.getInfo(t+e)},t.prototype.getPrefabUrl=function(e){return"/Game/GodSkin/"+this.getInfo(e).name},t.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},t.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godSkinBanOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},t._inst=null,t}(c.GodBase);o.GodSkinModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodWeaponModel:[function(e,t,o){"use strict";cc._RF.push(t,"0bc5eDnRHdMb6ch44YYQeTn","GodWeaponModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GodWeaponModel=void 0;var r=e("../Controller/TableMgr"),a=e("../Define/Define"),s=e("../Framework/Storage/LocalStorageMgr"),c=e("./GodBase"),l=e("./UserModel"),p=function(e){function t(){var t=e.call(this)||this;return t._isUnlock=Number(s.LocalStorageMgr.getItem("GodWeapon_isUnlock"))||0,t._curIdx=Number(s.LocalStorageMgr.getItem("GodWeapon_curIdx"))||0,t._curLevel=Number(s.LocalStorageMgr.getItem("GodWeapon_curLevel"))||0,t._exp=Number(s.LocalStorageMgr.getItem("GodWeapon_exp"))||0,t._refreshInfo(),t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUnlock",{get:function(){return this._isUnlock},set:function(e){this._isUnlock=e,s.LocalStorageMgr.setItem("GodWeapon_isUnlock",""+this._isUnlock)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curIdx",{get:function(){return this._curIdx},set:function(e){this._curIdx=e,s.LocalStorageMgr.setItem("GodWeapon_curIdx",""+this._curIdx)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLv",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.lv)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curStar",{get:function(){var e;return(null===(e=this._cur)||void 0===e?void 0:e.star)||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){this._curLevel=e,this._refreshInfo(),s.LocalStorageMgr.setItem("GodWeapon_curLevel",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cur",{get:function(){return this._cur},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e,s.LocalStorageMgr.setItem("GodWeapon_exp",""+e)},enumerable:!1,configurable:!0}),t.prototype._refreshInfo=function(){var e=r.TABLE.getTable("GodWeapon");return this._curLevel>e.length?(this._cur=e[e.length-1],this._next=e[e.length-2]):(this._cur=e[this._curLevel-1],this._next=e[this._curLevel]),this._cur},t.prototype.getInfo=function(e){return r.TABLE.getTable("GodWeapon").find(function(t){return t.lv==e})},t.prototype.getSiblingInfo=function(e){var t=this.curLv;return 0==t&&(t=1),this.getInfo(t+e)},t.prototype.getPrefabUrl=function(e){return 0==e?"/Game/GodWeapon/magic0":"/Game/GodWeapon/"+this.getInfo(e).name},t.prototype.getState=function(){return null==this._cur?a.UnlockType.NotUnlock:null==this._next?a.UnlockType.Max:a.UnlockType.Idle},t.prototype.canLevelUp=function(){return!(null==this._next||0==this._curLevel&&l.UserModel.inst.curStage<=l.UserModel.inst.godWeaponOpenStage||l.UserModel.inst[this._next.item]<this._next.count)},t._inst=null,t}(c.GodBase);o.GodWeaponModel=p,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","./GodBase":"GodBase","./UserModel":"UserModel"}],GodWeaponReward:[function(e,t,o){"use strict";cc._RF.push(t,"e3015zR4JVBu5+gHEaBXVDL","GodWeaponReward");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Framework/i18n/i18nMgr"),c=e("../../../Framework/UI/UIFacade"),l=e("../../../Framework/UIBase"),p=e("../../../Model/UserModel"),u=e("../../../Model/GodWeaponModel"),d=e("../../../Framework/Event/EventMgr"),h=e("../../../Define/EventId"),f=e("../../../Guide/GodGuide"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.desc2=null,t.desc5=null,t.moneyNode=null,t}return i(t,e),t.prototype.onOpen=function(){this.refresh()},t.prototype.refresh=function(){this.desc2.string=""+s.i18nMgr.getLabel("GodWeaponReward/desc2",[""+p.UserModel.inst.godWeaponsRewardOpenStage,""+(p.UserModel.inst.curStage-1),""+p.UserModel.inst.godWeaponsRewardOpenStage]),this.desc5.string="x"+p.UserModel.inst.godWeaponsRewardMoney},t.prototype.onClickGet=function(){p.UserModel.inst.curStage<p.UserModel.inst.godWeaponsRewardOpenStage?c.UIFacade.showToast(s.i18nMgr.getLabel("GodWeaponReward/err")):this.onReward()},t.prototype.onClickAD=function(){var e=this;a.default.inst.showAd("\u9886\u53d6\u795e\u5175",function(){e.onReward()})},t.prototype.onReward=function(){u.GodWeaponModel.inst.isUnlock=1,p.UserModel.inst.rMoney+=p.UserModel.inst.godWeaponsRewardMoney;var e=this.moneyNode.convertToWorldSpaceAR(cc.Vec2.ZERO);d.EVENT.emit(h.EventId.ON_UI_MAIN_FLY_ICON,e,"RMoney"),f.default.inst.run(),this.close()},r([g(sp.Skeleton)],t.prototype,"spine",void 0),r([g(cc.Label)],t.prototype,"desc2",void 0),r([g(cc.Label)],t.prototype,"desc5",void 0),r([g(cc.Node)],t.prototype,"moneyNode",void 0),r([y],t)}(l.default);o.default=m,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Guide/GodGuide":"GodGuide","../../../Model/GodWeaponModel":"GodWeaponModel","../../../Model/UserModel":"UserModel"}],GuideCollider:[function(e,t,o){"use strict";cc._RF.push(t,"89f5cxbqBtKnKC6j1IXWpFL","GuideCollider");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onBeginContact=function(e,t,o){this._tag&&this._tag==o.node&&(this._enterCb&&this._enterCb(),this._enterCb=null,this._tag=null)},r([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],GuideTask1:[function(e,t,o){"use strict";cc._RF.push(t,"0d224FBPAVDxLd3o6YUTwk4","GuideTask1");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/GameItemMgr"),s=e("../../Define/EventId"),c=e("../../Framework/Event/EventMgr"),l=e("../../Game/PlayerCtrl"),p=e("../../Model/GameModel"),u=e("../GuideCollider"),d=e("../GuideText"),h=e("./Task"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/GUILayer/UIMain/BtnStartGame",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.tips[t.index].getComponentInChildren(d.default)._endCb=function(){t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle5",!0)},t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/StageMap/BtnStart",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,c.EVENT.once(s.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=t.tips[t.index].getComponentInChildren(d.default),n=cc.find(t.steps[t.index].path);o._endCb=function(){t.finger.setParent(n),t.finger.group=n.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle7",!0)},e()},t)}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),c.EVENT.once(s.EventId.ON_GAME_LOADED,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.tips[t.index].getComponentInChildren(d.default).close.active=!1;var o=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default);t.scheduleOnce(function(){o._player.setRoleAnimation(0,"idle",!0),e()},1)})}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e,o){o.input=!0,t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.tips[t.index].getComponentInChildren(d.default).close.active=!1;var n=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default),i=t.tips[t.index].getComponentInChildren(u.default);i._tag=n._player.node,i._enterCb=function(){e(),o.nextStage()}}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e,o){o.input=!0,t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.tips[t.index].getComponentInChildren(d.default).close.active=!1;var n=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default);t.tips[t.index].getComponentsInChildren(u.default).forEach(function(t){a.default.inst.generateExp(t.node.position),t._tag=n._player.node,t._enterCb=function(){e(),o.nextStage()}})}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default).joystick.onTouchEnd(null),e()}},{path:"Canvas/Logic/PlayerCtrl/Joystick",type:"finger",eventType:cc.Node.EventType.TOUCH_START,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find("Canvas/Logic/PlayerCtrl").getComponent(l.default);t.scheduleOnce(function(){o._player.setRoleAnimation(0,"idle",!0)}),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1,p.GameModel.inst.isGuide=!0},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy(),p.GameModel.inst.isGuide=!1},r([y(cc.Node)],t.prototype,"finger",void 0),r([y(sp.Skeleton)],t.prototype,"spfinger",void 0),r([y(cc.Node)],t.prototype,"tips",void 0),r([_],t)}(h.default);o.default=g,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Game/PlayerCtrl":"PlayerCtrl","../../Model/GameModel":"GameModel","../GuideCollider":"GuideCollider","../GuideText":"GuideText","./Task":"Task"}],GuideTask2:[function(e,t,o){"use strict";cc._RF.push(t,"0e031xRJmJGnJ8bQvYmJW8b","GuideTask2");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Define/UIDefs"),c=e("../../Framework/Event/EventMgr"),l=e("../../Framework/UI/UIMgr"),p=e("./Task"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/GUILayer/UIMain/Btns/BtnGodRide",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/GodRide/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,c.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle2",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,c.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle3",!0),e()},t)}},{path:"UIRoot/PopLayer/GodRide/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy(),cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&l.default.inst.open(s.UIType.StoreReview)},r([h(cc.Node)],t.prototype,"finger",void 0),r([h(sp.Skeleton)],t.prototype,"spfinger",void 0),r([h(cc.Node)],t.prototype,"tips",void 0),r([d],t)}(p.default);o.default=f,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UI/UIMgr":"UIMgr","./Task":"Task"}],GuideTask3:[function(e,t,o){"use strict";cc._RF.push(t,"7b34fCXubxK3rLESoN2LBRD","GuideTask3");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("../GuideText"),l=e("./Task"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/GUILayer/UIMain/Top/BtnTalent",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/Talent/List/content/TalentItem",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path),n=t.node;t.finger.setParent(n),t.finger.group=o.group,t.finger.setPosition(n.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.Vec2.ZERO))),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),e()},t)}},{path:"UIRoot/PopLayer/Talent/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),e()}},{path:"UIRoot/PopLayer/Talent/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.finger.parent=null,t.finger.active=!1,t.tips[t.index].getComponentInChildren(c.default)._endCb=function(){var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([d(cc.Node)],t.prototype,"finger",void 0),r([d(sp.Skeleton)],t.prototype,"spfinger",void 0),r([d(cc.Node)],t.prototype,"tips",void 0),r([u],t)}(l.default);o.default=h,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../GuideText":"GuideText","./Task":"Task"}],GuideTask4:[function(e,t,o){"use strict";cc._RF.push(t,"16121W6YohAu6EOmYyBYV6+","GuideTask4");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("../GuideText"),l=e("./Task"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"Canvas/menu/btns/btnEquip",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/winEquip/middle/equip/view/content/0",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path),n=t.node;t.finger.setParent(n),t.finger.group=o.group,t.finger.setPosition(n.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.Vec2.ZERO))),t.finger.active=!0,t.spfinger.setAnimation(0,"idle10",!0),e()},t)}},{path:"UIRoot/PopLayer/winEquipTips/btnEquip",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle11",!0),e()},t)}},{path:"UIRoot/PopLayer/winEquip/bottom/btnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)}),t.finger.parent=null,t.finger.active=!1,t.tips[t.index].getComponentInChildren(c.default)._endCb=function(){var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}},{path:"Canvas/menu/btnStartGame",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle5",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([d(cc.Node)],t.prototype,"finger",void 0),r([d(sp.Skeleton)],t.prototype,"spfinger",void 0),r([d(cc.Node)],t.prototype,"tips",void 0),r([u],t)}(l.default);o.default=h,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../GuideText":"GuideText","./Task":"Task"}],GuideTask5:[function(e,t,o){"use strict";cc._RF.push(t,"f42620whHxAGa0riHOiV+I5","GuideTask5");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./Task"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/GUILayer/UIMain/Btns/BtnGodWeapon",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/GodWeapon/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle2",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle3",!0),e()},t)}},{path:"UIRoot/PopLayer/GodWeapon/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([u(cc.Node)],t.prototype,"finger",void 0),r([u(sp.Skeleton)],t.prototype,"spfinger",void 0),r([u(cc.Node)],t.prototype,"tips",void 0),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./Task":"Task"}],GuideTask6:[function(e,t,o){"use strict";cc._RF.push(t,"704e8Ac9N9EIJDVP3r5+uBI","GuideTask6");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./Task"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/GUILayer/UIMain/Btns/BtnGodPet",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/GodPet/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle2",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle3",!0),e()},t)}},{path:"UIRoot/PopLayer/GodPet/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([u(cc.Node)],t.prototype,"finger",void 0),r([u(sp.Skeleton)],t.prototype,"spfinger",void 0),r([u(cc.Node)],t.prototype,"tips",void 0),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./Task":"Task"}],GuideTask7:[function(e,t,o){"use strict";cc._RF.push(t,"c8c8fzD44hPHIbq27w9k49b","GuideTask7");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/EventId"),s=e("../../Framework/Event/EventMgr"),c=e("./Task"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finger=null,t.spfinger=null,t.tips=[],t.steps=[{path:"UIRoot/GUILayer/UIMain/Btns/BtnGodSkin",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle1",!0),t.scheduleOnce(function(){return e()},.35)}},{path:"UIRoot/PopLayer/GodSkin/BtnLevelUp",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle2",!0),e()},t)}},{path:"UIRoot/PopLayer/GodMenuNew/BtnConfirm",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e){return e&&(e.active=!1)}),t.finger.active=!1,s.EVENT.once(a.EventId.ON_UI_OPEN,function(){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle3",!0),e()},t)}},{path:"UIRoot/PopLayer/GodSkin/BtnClose",type:"finger",eventType:cc.Node.EventType.TOUCH_END,onStart:function(e){t.tips.forEach(function(e,o){return e&&(e.active=o==t.index)});var o=cc.find(t.steps[t.index].path);t.finger.setParent(o),t.finger.group=o.group,t.finger.setPosition(cc.Vec2.ZERO),t.finger.active=!0,t.spfinger.setAnimation(0,"idle4",!0),e()}}],t}return i(t,e),t.prototype.onLoad=function(){this.finger.parent=null,this.finger.active=!1},t.prototype.onDestroy=function(){this.finger.parent=null,this.finger.destroy()},r([u(cc.Node)],t.prototype,"finger",void 0),r([u(sp.Skeleton)],t.prototype,"spfinger",void 0),r([u(cc.Node)],t.prototype,"tips",void 0),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","./Task":"Task"}],GuideText:[function(e,t,o){"use strict";cc._RF.push(t,"a3213YCdtRC5bbnNil8AEY0","GuideText");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Framework/i18n/i18nLabel"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lb=null,t.sp=null,t.close=null,t.isTypewriter=!0,t}return i(t,e),t.prototype.init=function(e,t){this._godGuide=e,this._step=t,this.lb.string=t.path},t.prototype.start=function(){this.isTypewriter?(this.typewriter(this.lb.string),this.close.active=!0):this.close.active=!1},t.prototype.typewriter=function(e){this._str=e,this._idx=0,this._writing=!0,this.lb.string=this._str[0],this.schedule(this.write,.05)},t.prototype.write=function(){this._idx>=this._str.length?this.writeEnd():(this._idx++,this.lb.string=this._str.substring(0,this._idx))},t.prototype.writeEnd=function(){this.close.active=!1,this._writing=!1,this.unscheduleAllCallbacks(),this.lb.string=this._str,this._endCb&&this._endCb()},t.prototype.onClick=function(){this.writeEnd()},r([l(a.i18nLabel)],t.prototype,"lb",void 0),r([l(cc.Sprite)],t.prototype,"sp",void 0),r([l(cc.Node)],t.prototype,"close",void 0),r([l],t.prototype,"isTypewriter",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Framework/i18n/i18nLabel":"i18nLabel"}],HpBar:[function(e,t,o){"use strict";cc._RF.push(t,"48f28Q250NOk4VG8Zp9gq8G","HpBar");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/GameItemBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pb=null,t._target=null,t._offsetY=0,t}return i(t,e),t.prototype.setTarget=function(e,t){this._target=e,this._offsetY=t;var o=this._target.node.position;this.node.setPosition(o.x,o.y+this._offsetY)},t.prototype.update=function(){if(null!=this._target)if(this._target.hp<=0)this.recycle();else{var e=this._target.node.position;this.node.setPosition(e.x,e.y+this._offsetY),this.pb.progress=this._target.hp/this._target.maxHp}},r([l(cc.ProgressBar)],t.prototype,"pb",void 0),r([c],t)}(a.GameItemBase);o.default=p,cc._RF.pop()},{"../../Controller/GameItemBase":"GameItemBase"}],HttpRequest:[function(e,t,o){"use strict";cc._RF.push(t,"a2a620dzwNBrJ+eGsHrR4aA","HttpRequest"),Object.defineProperty(o,"__esModule",{value:!0}),o.HttpRequest=void 0;var n=function(){function e(){}return Object.defineProperty(e,"sBaseURL",{get:function(){var e=(window.location.protocol||"http:")+"//"+this._serverUrl;return cc.sys.isNative?e="http://"+this._serverUrl:window.wx&&(e="https://"+this._serverUrl),e},enumerable:!1,configurable:!0}),e.setServerUrl=function(e){this._serverUrl=e},e.get=function(e,t,o,n){return void 0===o&&(o={"Content-Type":"application/json"}),void 0===n&&(n=5),this._doHttp(this._combURL(e,t),{},o,"GET",n)},e.post=function(e,t,o,n,i){return void 0===n&&(n={"Content-Type":"application/json"}),void 0===i&&(i=5),this._doHttp(this._combURL(e,t),o,n,"POST",i)},e._doHttp=function(e,t,o,n){var i=this;return new Promise(function(r,a){var s=new XMLHttpRequest;s.responseType="text",s.onreadystatechange=function(){if(cc.log("HttpMgr, onReadyStateChange, readyState="+s.readyState+", status="+s.status),4===s.readyState&&s.status>=200&&s.status<300){cc.log("HttpMgr, onReadyStateChange, responseText="+s.responseText);var e={};try{e=JSON.parse(s.responseText)}catch(t){cc.error(t)}i._removeXhrEvent(s),r(e)}},s.ontimeout=function(){cc.warn(e+", request ontimeout"),i._removeXhrEvent(s),a()},s.onerror=function(){cc.warn(e+", request onerror"),i._removeXhrEvent(s),a()},s.onabort=function(){cc.warn(e+", request onabort"),i._removeXhrEvent(s),a()},cc.log("HttpMgr, doHttp url="+e+", method="+n),s.open(n,e,!0),o&&i._setHttpHeaders(s,o),t&&"object"==typeof t?s.send(JSON.stringify(t)):s.send()})},e._combURL=function(e,t){return e+="?",Object.keys(t).forEach(function(o){e+=o+"="+t[o]+"&"}),e.slice(0,e.length-1)},e._combData=function(e){var t="";return Object.keys(e).forEach(function(o){t+=o+"="+e[o]+"&"}),t.slice(0,t.length-1)},e._removeXhrEvent=function(e){e.ontimeout=null,e.onerror=null,e.onabort=null,e.onreadystatechange=null},e._setHttpHeaders=function(e,t){for(var o in t)e.setRequestHeader(o,t[o])},e}();o.HttpRequest=n,cc._RF.pop()},{}],IconItem:[function(e,t,o){"use strict";cc._RF.push(t,"cb395Fh0ohFMKEp9jUGSbBb","IconItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Define/Define"),s=e("../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t}return i(t,e),t.prototype.setIcon=function(e){var t=this;this.icon.spriteFrame=null,this.releaseAutoRes(),this.loadBundleRes("Textures",a.MONEY_ICON_URL[e],cc.SpriteFrame,function(e,o){t.icon.spriteFrame=o})},r([p(cc.Sprite)],t.prototype,"icon",void 0),r([l],t)}(s.default);o.default=u,cc._RF.pop()},{"../../Define/Define":"Define","../../Framework/Res/ResKeeper":"ResKeeper"}],ItemMgr:[function(e,t,o){"use strict";cc._RF.push(t,"f795ehsMAJJYaV/zO2fPlcc","ItemMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../Framework/Res/ResKeeperAddition"),c=e("../Framework/UI/UIMgr"),l=cc._decorator,p=l.ccclass;l.property,function(e){e[e.ScoreFloatDouble=0]="ScoreFloatDouble",e[e.ScoreFloatTreble=1]="ScoreFloatTreble"}(a||(a={}));var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.loadItemPool(a.ScoreFloatDouble,"Prefabs","Effect/ScoreFloatDouble"),this.loadItemPool(a.ScoreFloatTreble,"Prefabs","Effect/ScoreFloatTreble")},t.prototype.generateDouble=function(e){var t=this,o=a.ScoreFloatDouble,n=this.get(o);n.setParent(c.default.inst.topLayer),n.setPosition(n.parent.convertToNodeSpaceAR(e));var i=n.getComponent(cc.Animation);i.play("ScoreFloatAnim"),i.once(cc.Animation.EventType.FINISHED,function(){t.put(o,n)})},t.prototype.generateTreble=function(e){var t=this,o=a.ScoreFloatTreble,n=this.get(o);n.setParent(c.default.inst.topLayer),n.setPosition(n.parent.convertToNodeSpaceAR(e));var i=n.getComponent(cc.Animation);i.play("ScoreFloatAnim"),i.once(cc.Animation.EventType.FINISHED,function(){t.put(o,n)})},r([p],t)}(s.default);o.default=u,cc._RF.pop()},{"../Framework/Res/ResKeeperAddition":"ResKeeperAddition","../Framework/UI/UIMgr":"UIMgr"}],Joystick:[function(e,t,o){"use strict";cc._RF.push(t,"e2259RZGDZHkpBfwGyDy6LR","Joystick");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.stick=null,t.radius=100,t._isTouch=!1,t._moveCallback=function(){},t._stopCallback=function(){},t}return i(t,e),t.prototype.start=function(){this._isTouch=!1,this.content.active=!1},t.prototype.setMoveCallback=function(e){this._moveCallback=e},t.prototype.setStopCallback=function(e){this._stopCallback=e},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},t.prototype.onTouchStart=function(e){this._isTouch=!0;var t=e.getLocation();this.content.active=!0,this.content.setPosition(this.content.parent.convertToNodeSpaceAR(t)),this.stick.setPosition(cc.Vec2.ZERO)},t.prototype.onTouchMove=function(e){if(this._isTouch){var t=e.getStartLocation(),o=e.getLocation(),n=cc.Vec2.subtract(o,o,t),i=n.len()/this.radius;i>1&&(i=1);var r=n.normalizeSelf(),a=i*this.radius;this.stick.setPosition(r.x*a,r.y*a),this._moveCallback(r,i)}},t.prototype.onTouchEnd=function(){this._isTouch=!1,this.content.active=!1,this._stopCallback()},r([c(cc.Node)],t.prototype,"content",void 0),r([c(cc.Node)],t.prototype,"stick",void 0),r([c],t.prototype,"radius",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],LayerMgr:[function(e,t,o){"use strict";cc._RF.push(t,"68cacZipe9P7LOegPC/atfX","LayerMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.LayerMgr=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.BottomLayer=null,t.BloodLayer=null,t.EffectLayer=null,t.ItemLayer=null,t.BulletLayer=null,t.RoleLayer=null,t.RoleHitLayer=null,t.RoleStopLayer=null,t.PlayerLayer=null,t.BulletLayer2=null,t.PlayerBulletLayer=null,t.PlayerBulletLayer2=null,t.EquipLayer=null,t.Equip1Layer=null,t.Equip2Layer=null,t.HpLayer=null,t.NumberLayer=null,t.TopLayer=null,t}var o;return i(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return this._inst?this._inst:(cc.error("LayerMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._inst=this},t.prototype.onDestroy=function(){o._inst=null},r([c({type:cc.Node,tooltip:"\u5e95\u5c42"})],t.prototype,"BottomLayer",void 0),r([c({type:cc.Node,tooltip:"\u8840\u8ff9\u5c42"})],t.prototype,"BloodLayer",void 0),r([c({type:cc.Node,tooltip:"\u7279\u6027\u5c42"})],t.prototype,"EffectLayer",void 0),r([c({type:cc.Node,tooltip:"\u9053\u5177\u5c42"})],t.prototype,"ItemLayer",void 0),r([c({type:cc.Node,tooltip:"\u5b50\u5f39\u5c421"})],t.prototype,"BulletLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5c42"})],t.prototype,"RoleLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u53d7\u51fb\u5c42"})],t.prototype,"RoleHitLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u505c\u6b62\u5c42"})],t.prototype,"RoleStopLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5c42"})],t.prototype,"PlayerLayer",void 0),r([c({type:cc.Node,tooltip:"\u5b50\u5f39\u5c422"})],t.prototype,"BulletLayer2",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5b50\u5f39\u5c421"})],t.prototype,"PlayerBulletLayer",void 0),r([c({type:cc.Node,tooltip:"\u4eba\u7269\u5b50\u5f39\u5c422"})],t.prototype,"PlayerBulletLayer2",void 0),r([c({type:cc.Node,tooltip:"\u88c5\u5907\u5c42"})],t.prototype,"EquipLayer",void 0),r([c({type:cc.Node,tooltip:"\u88c5\u5907\u5c42"})],t.prototype,"Equip1Layer",void 0),r([c({type:cc.Node,tooltip:"\u88c5\u5907\u5c42"})],t.prototype,"Equip2Layer",void 0),r([c({type:cc.Node,tooltip:"\u7075\u9b42\u5c42"})],t.prototype,"HpLayer",void 0),r([c({type:cc.Node,tooltip:"\u6570\u5b57\u5c42"})],t.prototype,"NumberLayer",void 0),r([c({type:cc.Node,tooltip:"\u9876\u5c42"})],t.prototype,"TopLayer",void 0),o=r([s],t)}(cc.Component);o.LayerMgr=l,cc._RF.pop()},{}],ListItem:[function(e,t,o){"use strict";cc._RF.push(t,"06feetG3s5K2LivmkDXp16c","ListItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=cc._decorator,c=s.ccclass,l=s.property,p=s.disallowMultiple,u=s.menu,d=s.executionOrder;(function(e){e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH"})(a||(a={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.title=null,t.selectedMode=a.NONE,t.selectedFlag=null,t.selectedSpriteFrame=null,t._unselectedSpriteFrame=null,t.adaptiveSize=!1,t._selected=!1,t._eventReg=!1,t}return i(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case a.TOGGLE:this.selectedFlag.active=e;break;case a.SWITCH:var t=this.selectedFlag.getComponent(cc.Sprite);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(this.selectedMode==a.SWITCH){var e=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=e.spriteFrame}},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},t.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},t.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},t.prototype.createEvt=function(e,t,o){if(void 0===o&&(o=null),e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new cc.Component.EventHandler;return n.target=o||e.node,n.component=e.comName,n.handler=t,n}},t.prototype.showAni=function(e,t,o){var n,i=this;switch(e){case 0:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:2*i.node.height});break;case 1:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:2*i.node.width});break;case 2:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:-2*i.node.height});break;case 3:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:-2*i.node.width});break;default:n=cc.tween(i.node).to(.3,{scale:.1})}(t||o)&&n.call(function(){if(o){i.list._delSingleItem(i.node);for(var e=i.list.displayData.length-1;e>=0;e--)if(i.list.displayData[e].id==i.listId){i.list.displayData.splice(e,1);break}}t()}),n.start()},t.prototype.onClickThis=function(){this.list.selectedId=this.listId},r([l({type:cc.Sprite,tooltip:!1})],t.prototype,"icon",void 0),r([l({type:cc.Node,tooltip:!1})],t.prototype,"title",void 0),r([l({type:cc.Enum(a),tooltip:!1})],t.prototype,"selectedMode",void 0),r([l({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>a.NONE}})],t.prototype,"selectedFlag",void 0),r([l({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==a.SWITCH}})],t.prototype,"selectedSpriteFrame",void 0),r([l({tooltip:!1})],t.prototype,"adaptiveSize",void 0),r([c,p(),u("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),d(-5001)],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],List:[function(e,t,o){"use strict";cc._RF.push(t,"b754aCCwAJCqJF5E4E4fWzU","List");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s,c,l=cc._decorator,p=l.ccclass,u=l.property,d=l.disallowMultiple,h=l.menu,f=l.executionOrder,_=l.requireComponent,y=e("./ListItem");(function(e){e[e.NODE=1]="NODE",e[e.PREFAB=2]="PREFAB"})(a||(a={})),function(e){e[e.NORMAL=1]="NORMAL",e[e.ADHERING=2]="ADHERING",e[e.PAGE=3]="PAGE"}(s||(s={})),function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULT=2]="MULT"}(c||(c={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateType=a.NODE,t.tmpNode=null,t.tmpPrefab=null,t._slideMode=s.NORMAL,t.pageDistance=.3,t.pageChangeEvent=new cc.Component.EventHandler,t._virtual=!0,t.cyclic=!1,t.lackCenter=!1,t.lackSlide=!1,t._updateRate=0,t.frameByFrameRenderNum=0,t.renderEvent=new cc.Component.EventHandler,t.selectedMode=c.NONE,t.repeatEventSingle=!1,t.selectedEvent=new cc.Component.EventHandler,t._selectedId=-1,t._forceUpdate=!1,t._updateDone=!0,t._numItems=0,t._inited=!1,t._needUpdateWidget=!1,t._aniDelRuning=!1,t._doneAfterUpdate=!1,t.adhering=!1,t._adheringBarrier=!1,t.curPageNum=0,t}return i(t,e),Object.defineProperty(t.prototype,"slideMode",{get:function(){return this._slideMode},set:function(e){this._slideMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"virtual",{get:function(){return this._virtual},set:function(e){null!=e&&(this._virtual=e),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateRate",{get:function(){return this._updateRate},set:function(e){e>=0&&e<=6&&(this._updateRate=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this._selectedId},set:function(e){var t,o=this;switch(o.selectedMode){case c.SINGLE:if(!o.repeatEventSingle&&e==o._selectedId)return;t=o.getItemByListId(e);var n=void 0;if(o._selectedId>=0?o._lastSelectedId=o._selectedId:o._lastSelectedId=null,o._selectedId=e,t&&((n=t.getComponent(y.default)).selected=!0),o._lastSelectedId>=0&&o._lastSelectedId!=o._selectedId){var i=o.getItemByListId(o._lastSelectedId);i&&(i.getComponent(y.default).selected=!1)}o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],t,e%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems);break;case c.MULT:if(!(t=o.getItemByListId(e)))return;n=t.getComponent(y.default),o._selectedId>=0&&(o._lastSelectedId=o._selectedId),o._selectedId=e;var r=!n.selected;n.selected=r;var a=o.multSelected.indexOf(e);r&&a<0?o.multSelected.push(e):!r&&a>=0&&o.multSelected.splice(a,1),o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],t,e%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems,r)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(e){var t=this;if(t.checkInited(!1))if(null==e||e<0)cc.error("numItems set the wrong::",e);else if(t._actualNumItems=t._numItems=e,t._forceUpdate=!0,t._virtual)t._resizeContent(),t.cyclic&&(t._numItems=t._cyclicNum*t._numItems),t._onScrolling(),t.frameByFrameRenderNum||t.slideMode!=s.PAGE||(t.curPageNum=t.nearestListId);else{t.cyclic&&(t._resizeContent(),t._numItems=t._cyclicNum*t._numItems);var o=t.content.getComponent(cc.Layout);if(o&&(o.enabled=!0),t._delRedundantItem(),t.firstListId=0,t.frameByFrameRenderNum>0){for(var n=t.frameByFrameRenderNum>t._numItems?t._numItems:t.frameByFrameRenderNum,i=0;i<n;i++)t._createOrUpdateItem2(i);t.frameByFrameRenderNum<t._numItems&&(t._updateCounter=t.frameByFrameRenderNum,t._updateDone=!1)}else{for(i=0;i<t._numItems;i++)t._createOrUpdateItem2(i);t.displayItemNum=t._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._init()},t.prototype.onDestroy=function(){var e=this;cc.isValid(e._itemTmp)&&e._itemTmp.destroy(),cc.isValid(e.tmpNode)&&e.tmpNode.destroy(),e._pool&&e._pool.clear()},t.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},t.prototype.onDisable=function(){this._unregisterEvent()},t.prototype._registerEvent=function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.on("touch-up",e._onTouchUp,e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.on("scroll-began",e._onScrollBegan,e,!0),e.node.on("scroll-ended",e._onScrollEnded,e,!0),e.node.on("scrolling",e._onScrolling,e,!0),e.node.on(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._unregisterEvent=function(){var e=this;e.node.off(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.off("touch-up",e._onTouchUp,e),e.node.off(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.off("scroll-began",e._onScrollBegan,e,!0),e.node.off("scroll-ended",e._onScrollEnded,e,!0),e.node.off("scrolling",e._onScrolling,e,!0),e.node.off(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._init=function(){var e=this;if(!e._inited)if(e._scrollView=e.node.getComponent(cc.ScrollView),e.content=e._scrollView.content,e.content){switch(e._layout=e.content.getComponent(cc.Layout),e._align=e._layout.type,e._resizeMode=e._layout.resizeMode,e._startAxis=e._layout.startAxis,e._topGap=e._layout.paddingTop,e._rightGap=e._layout.paddingRight,e._bottomGap=e._layout.paddingBottom,e._leftGap=e._layout.paddingLeft,e._columnGap=e._layout.spacingX,e._lineGap=e._layout.spacingY,e._colLineNum,e._verticalDir=e._layout.verticalDirection,e._horizontalDir=e._layout.horizontalDirection,e.setTemplateItem(cc.instantiate(e.templateType==a.PREFAB?e.tmpPrefab:e.tmpNode)),e._slideMode!=s.ADHERING&&e._slideMode!=s.PAGE||(e._scrollView.inertia=!1,e._scrollView._onMouseWheel=function(){}),e.virtual||(e.lackCenter=!1),e._lastDisplayData=[],e.displayData=[],e._pool=new cc.NodePool,e._forceUpdate=!1,e._updateCounter=0,e._updateDone=!0,e.curPageNum=0,e.cyclic&&(e._scrollView._processAutoScrolling=this._processAutoScrolling.bind(e),e._scrollView._startBounceBackIfNeeded=function(){return!1}),e._align){case cc.Layout.Type.HORIZONTAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}}}e.content.removeAllChildren(),e._inited=!0}else cc.error(e.node.name+"'s cc.ScrollView unset content!")},t.prototype._processAutoScrolling=function(e){this._scrollView._autoScrollAccumulatedTime+=1*e;var t=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var o=t-1;t=o*o*o*o*o+1}var n=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(t)),i=this._scrollView.getScrollEndedEventTiming(),r=Math.abs(t-1)<=i;Math.abs(t-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),r&&(this._scrollView._autoScrolling=!1);var a=n.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(a),r),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},t.prototype.setTemplateItem=function(e){if(e){var t=this;t._itemTmp=e,t._resizeMode==cc.Layout.ResizeMode.CHILDREN?t._itemSize=t._layout.cellSize:t._itemSize=cc.size(e.width,e.height);var o=e.getComponent(y.default),n=!1;switch(o||(n=!0),n&&(t.selectedMode=c.NONE),(o=e.getComponent(cc.Widget))&&o.enabled&&(t._needUpdateWidget=!0),t.selectedMode==c.MULT&&(t.multSelected=[]),t._align){case cc.Layout.Type.HORIZONTAL:t._colLineNum=1,t._sizeType=!1;break;case cc.Layout.Type.VERTICAL:t._colLineNum=1,t._sizeType=!0;break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=t.content.width-t._leftGap-t._rightGap;t._colLineNum=Math.floor((i+t._columnGap)/(t._itemSize.width+t._columnGap)),t._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var r=t.content.height-t._topGap-t._bottomGap;t._colLineNum=Math.floor((r+t._lineGap)/(t._itemSize.height+t._lineGap)),t._sizeType=!1}}}},t.prototype.checkInited=function(e){return void 0===e&&(e=!0),!!this._inited||(e&&cc.error("List initialization not completed!"),!1)},t.prototype._resizeContent=function(){var e,t=this;switch(t._align){case cc.Layout.Type.HORIZONTAL:if(t._customSize){var o=t._getFixedSize(null);e=t._leftGap+o.val+t._itemSize.width*(t._numItems-o.count)+t._columnGap*(t._numItems-1)+t._rightGap}else e=t._leftGap+t._itemSize.width*t._numItems+t._columnGap*(t._numItems-1)+t._rightGap;break;case cc.Layout.Type.VERTICAL:t._customSize?(o=t._getFixedSize(null),e=t._topGap+o.val+t._itemSize.height*(t._numItems-o.count)+t._lineGap*(t._numItems-1)+t._bottomGap):e=t._topGap+t._itemSize.height*t._numItems+t._lineGap*(t._numItems-1)+t._bottomGap;break;case cc.Layout.Type.GRID:switch(t.lackCenter&&(t.lackCenter=!1),t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=Math.ceil(t._numItems/t._colLineNum);e=t._topGap+t._itemSize.height*n+t._lineGap*(n-1)+t._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var i=Math.ceil(t._numItems/t._colLineNum);e=t._leftGap+t._itemSize.width*i+t._columnGap*(i-1)+t._rightGap}}var r=t.content.getComponent(cc.Layout);if(r&&(r.enabled=!1),t._allItemSize=e,t._allItemSizeNoEdge=t._allItemSize-(t._sizeType?t._topGap+t._bottomGap:t._leftGap+t._rightGap),t.cyclic){var a=t._sizeType?t.node.height:t.node.width;t._cyclicPos1=0,a-=t._cyclicPos1,t._cyclicNum=Math.ceil(a/t._allItemSizeNoEdge)+1;var s=t._sizeType?t._lineGap:t._columnGap;t._cyclicPos2=t._cyclicPos1+t._allItemSizeNoEdge+s,t._cyclicAllItemSize=t._allItemSize+t._allItemSizeNoEdge*(t._cyclicNum-1)+s*(t._cyclicNum-1),t._cycilcAllItemSizeNoEdge=t._allItemSizeNoEdge*t._cyclicNum,t._cycilcAllItemSizeNoEdge+=s*(t._cyclicNum-1)}t._lack=!t.cyclic&&t._allItemSize<(t._sizeType?t.node.height:t.node.width);var c=t._lack&&t.lackCenter||!t.lackSlide?.1:0,l=t._lack?(t._sizeType?t.node.height:t.node.width)-c:t.cyclic?t._cyclicAllItemSize:t._allItemSize;l<0&&(l=0),t._sizeType?t.content.height=l:t.content.width=l},t.prototype._onScrolling=function(e){if(void 0===e&&(e=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&e&&"scroll-ended"!=e.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var t=this.content.getPosition();t=this._sizeType?t.y:t.x;var o=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),n=this._sizeType?cc.v2(0,o):cc.v2(o,0);switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):t<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)));break;case 2:t<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):t>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 3:t<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):t>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 4:t>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):t<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)))}}var i,r,a,s;if(this._calcViewPos(),this._sizeType?(i=this.viewTop,a=this.viewBottom):(r=this.viewRight,s=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,l=0,p=this._numItems-1;if(this._customSize)for(var u=!1;l<=p&&!u;l++)switch(c=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=i&&c.top>=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=i&&c.top>=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0)}}else{var d=this._itemSize.width+this._columnGap,h=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(s-this._leftGap)/d,p=(r-this._leftGap)/d;break;case 2:l=(-r-this._rightGap)/d,p=(-s-this._rightGap)/d;break;case 3:l=(-i-this._topGap)/h,p=(-a-this._topGap)/h;break;case 4:l=(a-this._bottomGap)/h,p=(i-this._bottomGap)/h}for(l=Math.floor(l)*this._colLineNum,p=Math.ceil(p)*this._colLineNum,l<0&&(l=0),--p>=this._numItems&&(p=this._numItems-1);l<=p;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var f=this._lastDisplayData.length,_=this.displayItemNum!=f;if(_&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(e,t){return e-t}),_=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[f-1]),this._forceUpdate||_)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var y=0;y<this.displayItemNum;y++)this._createOrUpdateItem(this.displayData[y]);this._forceUpdate=!1}this._calcNearestItem()}}},t.prototype._calcViewPos=function(){var e=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=e.x>0?e.x:0,this.viewLeft=(e.x<0?-e.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=e.x<0?-e.x:0,this.viewRight=(e.x>0?-e.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=e.y<0?Math.abs(e.y):0,this.viewTop=(e.y>0?-e.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=e.y>0?Math.abs(e.y):0,this.viewBottom=(e.y<0?-e.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},t.prototype._calcItemPos=function(e){var t,o,n,i,r,a,s,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(e);r=this._leftGap+(this._itemSize.width+this._columnGap)*(e-l.count)+(l.val+this._columnGap*l.count),t=(p=this._customSize[e])>0?p:this._itemSize.width}else r=this._leftGap+(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width;return this.lackCenter&&(r-=this._leftGap,r+=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,left:r,right:a=r+t,x:r+this._itemTmp.anchorX*t,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(e),a=-this._rightGap-(this._itemSize.width+this._columnGap)*(e-l.count)-(l.val+this._columnGap*l.count),t=(p=this._customSize[e])>0?p:this._itemSize.width):(a=-this._rightGap-(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width),this.lackCenter&&(a+=this._rightGap,a-=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,right:a,left:r=a-t,x:r+this._itemTmp.anchorX*t,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(e),n=-this._topGap-(this._itemSize.height+this._lineGap)*(e-l.count)-(l.val+this._lineGap*l.count),o=(p=this._customSize[e])>0?p:this._itemSize.height):(n=-this._topGap-(this._itemSize.height+this._lineGap)*e,o=this._itemSize.height),this.lackCenter&&(n+=this._topGap,n-=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:n,bottom:i=n-o,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*o};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var p;if(this._customSize)l=this._getFixedSize(e),i=this._bottomGap+(this._itemSize.height+this._lineGap)*(e-l.count)+(l.val+this._lineGap*l.count),o=(p=this._customSize[e])>0?p:this._itemSize.height;else i=this._bottomGap+(this._itemSize.height+this._lineGap)*e,o=this._itemSize.height;return this.lackCenter&&(i-=this._bottomGap,i+=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:n=i+o,bottom:i,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*o}}case cc.Layout.Type.GRID:var u=Math.floor(e/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(i=(n=-this._topGap-(this._itemSize.height+this._lineGap)*u)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:n=(i=this._bottomGap+(this._itemSize.height+this._lineGap)*u)+this._itemSize.height,c=i+this._itemTmp.anchorY*this._itemSize.height}switch(s=this._leftGap+e%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s+=this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s+=(1-this._itemTmp.anchorX)*this._itemSize.width,s-=(1-this.content.anchorX)*this.content.width,s*=-1}return{id:e,top:n,bottom:i,x:s,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a=(r=this._leftGap+(this._itemSize.width+this._columnGap)*u)+this._itemSize.width,s=r+this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s=(r=(a=-this._rightGap-(this._itemSize.width+this._columnGap)*u)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,s+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-e%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:e,left:r,right:a,x:s,y:c}}}},t.prototype._calcExistItemPos=function(e){var t=this.getItemByListId(e);if(!t)return null;var o={id:e,x:t.x,y:t.y};return this._sizeType?(o.top=t.y+t.height*(1-t.anchorY),o.bottom=t.y-t.height*t.anchorY):(o.left=t.x-t.width*t.anchorX,o.right=t.x+t.width*(1-t.anchorX)),o},t.prototype.getItemPos=function(e){return this._virtual?this._calcItemPos(e):this.frameByFrameRenderNum?this._calcItemPos(e):this._calcExistItemPos(e)},t.prototype._getFixedSize=function(e){if(!this._customSize)return null;null==e&&(e=this._numItems);var t=0,o=0;for(var n in this._customSize)parseInt(n)<e&&(t+=this._customSize[n],o++);return{val:t,count:o}},t.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},t.prototype._onScrollEnded=function(){var e=this;if(e.curScrollIsTouch=!1,null!=e.scrollToListId){var t=e.getItemByListId(e.scrollToListId);e.scrollToListId=null,t&&cc.tween(t).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}e._onScrolling(),e._slideMode!=s.ADHERING||e.adhering?e._slideMode==s.PAGE&&(null!=e._beganPos&&e.curScrollIsTouch?this._pageAdhere():e.adhere()):e.adhere()},t.prototype._onTouchStart=function(e,t){if(!this._scrollView.hasNestedViewGroup(e,t)&&(this.curScrollIsTouch=!0,e.eventPhase!==cc.Event.AT_TARGET||e.target!==this.node)){for(var o=e.target;null==o._listId&&o.parent;)o=o.parent;this._scrollItem=null!=o._listId?o:e.target}},t.prototype._onTouchUp=function(){var e=this;e._scrollPos=null,e._slideMode==s.ADHERING?(this.adhering&&(this._adheringBarrier=!0),e.adhere()):e._slideMode==s.PAGE&&(null!=e._beganPos?this._pageAdhere():e.adhere()),this._scrollItem=null},t.prototype._onTouchCancelled=function(e,t){var o=this;o._scrollView.hasNestedViewGroup(e,t)||e.simulate||(o._scrollPos=null,o._slideMode==s.ADHERING?(o.adhering&&(o._adheringBarrier=!0),o.adhere()):o._slideMode==s.PAGE&&(null!=o._beganPos?o._pageAdhere():o.adhere()),this._scrollItem=null)},t.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},t.prototype._onItemAdaptive=function(e){if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});var t=this._sizeType?e.height:e.width;this._customSize[e._listId]!=t&&(this._customSize[e._listId]=t,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},t.prototype._pageAdhere=function(){var e=this;if(e.cyclic||!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){var t=e._sizeType?e.viewTop:e.viewLeft,o=(e._sizeType?e.node.height:e.node.width)*e.pageDistance;if(Math.abs(e._beganPos-t)>o)switch(e._alignCalcType){case 1:case 4:e._beganPos>t?e.prePage(.5):e.nextPage(.5);break;case 2:case 3:e._beganPos<t?e.prePage(.5):e.nextPage(.5)}else e.elasticTop<=0&&e.elasticRight<=0&&e.elasticBottom<=0&&e.elasticLeft<=0&&e.adhere();e._beganPos=null}},t.prototype.adhere=function(){var e=this;if(e.checkInited()&&!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){e.adhering=!0,e._calcNearestItem();var t=(e._sizeType?e._topGap:e._leftGap)/(e._sizeType?e.node.height:e.node.width);e.scrollTo(e.nearestListId,.7,t)}},t.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var e=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++){var o=this.displayData[t];o&&this._createOrUpdateItem(o)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(e=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++)this._createOrUpdateItem2(t);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)},t.prototype._createOrUpdateItem=function(e){var t=this.getItemByListId(e.id);if(t)this._forceUpdate&&this.renderEvent&&(t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems));else{var o=this._pool.size()>0;if(t=o?this._pool.get():cc.instantiate(this._itemTmp),o&&cc.isValid(t)||(t=cc.instantiate(this._itemTmp),o=!1),t._listId!=e.id&&(t._listId=e.id,t.setContentSize(this._itemSize)),t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.content.addChild(t),o&&this._needUpdateWidget){var n=t.getComponent(cc.Widget);n&&n.updateAlignment()}t.setSiblingIndex(this.content.childrenCount-1);var i=t.getComponent(y.default);t.listItem=i,i&&(i.listId=e.id,i.list=this,i._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems)}this._resetItemSize(t),this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e.id)<0&&this._lastDisplayData.push(e.id)},t.prototype._createOrUpdateItem2=function(e){var t,o=this.content.children[e];o?this._forceUpdate&&this.renderEvent&&(o._listId=e,t&&(t.listId=e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,e%this._actualNumItems)):((o=cc.instantiate(this._itemTmp))._listId=e,this.content.addChild(o),t=o.getComponent(y.default),o.listItem=t,t&&(t.listId=e,t.list=this,t._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,e%this._actualNumItems)),this._updateListItem(t),this._lastDisplayData.indexOf(e)<0&&this._lastDisplayData.push(e)},t.prototype._updateListItem=function(e){if(e&&this.selectedMode>c.NONE){var t=e.node;switch(this.selectedMode){case c.SINGLE:e.selected=this.selectedId==t._listId;break;case c.MULT:e.selected=this.multSelected.indexOf(t._listId)>=0}}},t.prototype._resetItemSize=function(){},t.prototype._updateItemPos=function(e){var t=isNaN(e)?e:this.getItemByListId(e),o=this.getItemPos(t._listId);t.setPosition(o.x,o.y)},t.prototype.setMultSelected=function(e,t){var o=this;if(o.checkInited()){if(Array.isArray(e)||(e=[e]),null==t)o.multSelected=e;else{var n=void 0,i=void 0;if(t)for(var r=e.length-1;r>=0;r--)n=e[r],(i=o.multSelected.indexOf(n))<0&&o.multSelected.push(n);else for(r=e.length-1;r>=0;r--)n=e[r],(i=o.multSelected.indexOf(n))>=0&&o.multSelected.splice(i,1)}o._forceUpdate=!0,o._onScrolling()}},t.prototype.getMultSelected=function(){return this.multSelected},t.prototype.hasMultSelected=function(e){return this.multSelected&&this.multSelected.indexOf(e)>=0},t.prototype.updateItem=function(e){if(this.checkInited()){Array.isArray(e)||(e=[e]);for(var t=0,o=e.length;t<o;t++){var n=e[t],i=this.getItemByListId(n);i&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,n%this._actualNumItems)}}},t.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},t.prototype.getItemByListId=function(e){if(this.content)for(var t=this.content.childrenCount-1;t>=0;t--){var o=this.content.children[t];if(o._listId==e)return o}},t.prototype._getOutsideItem=function(){for(var e,t=[],o=this.content.childrenCount-1;o>=0;o--)e=this.content.children[o],this.displayData.find(function(t){return t.id==e._listId})||t.push(e);return t},t.prototype._delRedundantItem=function(){if(this._virtual)for(var e=this._getOutsideItem(),t=e.length-1;t>=0;t--){var o=e[t];if(!this._scrollItem||o._listId!=this._scrollItem._listId){o.isCached=!0,this._pool.put(o);for(var n=this._lastDisplayData.length-1;n>=0;n--)if(this._lastDisplayData[n]==o._listId){this._lastDisplayData.splice(n,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},t.prototype._delSingleItem=function(e){e.removeFromParent(),e.destroy&&e.destroy(),e=null},t.prototype.aniDelItem=function(e,t,o){var n=this;if(!n.checkInited()||n.cyclic||!n._virtual)return cc.error("This function is not allowed to be called!");if(!t)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(n._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var i,r=n.getItemByListId(e);if(r){i=r.getComponent(y.default),n._aniDelRuning=!0,n._aniDelCB=t,n._aniDelItem=r,n._aniDelBeforePos=r.position,n._aniDelBeforeScale=r.scale;var a=n.displayData[n.displayData.length-1].id,s=i.selected;i.showAni(o,function(){var o,i,l;if(a<n._numItems-2&&(o=a+1),null!=o){var p=n._calcItemPos(o);n.displayData.push(p),n._virtual?n._createOrUpdateItem(p):n._createOrUpdateItem2(o)}else n._numItems--;if(n.selectedMode==c.SINGLE)s?n._selectedId=-1:n._selectedId-1>=0&&n._selectedId--;else if(n.selectedMode==c.MULT&&n.multSelected.length){var u=n.multSelected.indexOf(e);u>=0&&n.multSelected.splice(u,1);for(var d=n.multSelected.length-1;d>=0;d--)(_=n.multSelected[d])>=e&&n.multSelected[d]--}if(n._customSize){n._customSize[e]&&delete n._customSize[e];var h={},f=void 0;for(var _ in n._customSize){f=n._customSize[_];var y=parseInt(_);h[y-(y>=e?1:0)]=f}n._customSize=h}for(d=null!=o?o:a;d>=e+1;d--)if(r=n.getItemByListId(d)){var g=n._calcItemPos(d-1);i=cc.tween(r).to(.2333,{position:cc.v2(g.x,g.y)}),d<=e+1&&(l=!0,i.call(function(){n._aniDelRuning=!1,t(e),delete n._aniDelCB})),i.start()}l||(n._aniDelRuning=!1,t(e),n._aniDelCB=null)},!0)}else t(e)},t.prototype.scrollTo=function(e,t,o,n){void 0===t&&(t=.5),void 0===o&&(o=null),void 0===n&&(n=!1);var i=this;if(i.checkInited(!1)){null==t?t=.5:t<0&&(t=0),e<0?e=0:e>=i._numItems&&(e=i._numItems-1),!i._virtual&&i._layout&&i._layout.enabled&&i._layout.updateLayout();var r,a,s=i.getItemPos(e);if(!s)return!1;switch(i._alignCalcType){case 1:r=s.left,r-=null!=o?i.node.width*o:i._leftGap,s=cc.v2(r,0);break;case 2:r=s.right-i.node.width,r+=null!=o?i.node.width*o:i._rightGap,s=cc.v2(r+i.content.width,0);break;case 3:a=s.top,a+=null!=o?i.node.height*o:i._topGap,s=cc.v2(0,-a);break;case 4:a=s.bottom+i.node.height,a-=null!=o?i.node.height*o:i._bottomGap,s=cc.v2(0,-a+i.content.height)}var c=i.content.getPosition();c=Math.abs(i._sizeType?c.y:c.x);var l=i._sizeType?s.y:s.x;Math.abs((null!=i._scrollPos?i._scrollPos:c)-l)>.5&&(i._scrollView.scrollToOffset(s,t),i._scrollToListId=e,i._scrollToEndTime=(new Date).getTime()/1e3+t,i._scrollToSo=i.scheduleOnce(function(){if(i._adheringBarrier||(i.adhering=i._adheringBarrier=!1),i._scrollPos=i._scrollToListId=i._scrollToEndTime=i._scrollToSo=null,n){var t=i.getItemByListId(e);t&&cc.tween(t).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},t+.1),t<=0&&i._onScrolling())}},t.prototype._calcNearestItem=function(){var e,t,o,n,i,r,a=this;a.nearestListId=null,a._virtual&&a._calcViewPos(),o=a.viewTop,n=a.viewRight,i=a.viewBottom,r=a.viewLeft;for(var s=!1,c=0;c<a.content.childrenCount&&!s;c+=a._colLineNum)if(e=a._virtual?a.displayData[c]:a._calcExistItemPos(c))switch(t=a._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,a._alignCalcType){case 1:e.right>=r&&(a.nearestListId=e.id,r>t&&(a.nearestListId+=a._colLineNum),s=!0);break;case 2:e.left<=n&&(a.nearestListId=e.id,n<t&&(a.nearestListId+=a._colLineNum),s=!0);break;case 3:e.bottom<=o&&(a.nearestListId=e.id,o<t&&(a.nearestListId+=a._colLineNum),s=!0);break;case 4:e.top>=i&&(a.nearestListId=e.id,i>t&&(a.nearestListId+=a._colLineNum),s=!0)}if((e=a._virtual?a.displayData[a.displayItemNum-1]:a._calcExistItemPos(a._numItems-1))&&e.id==a._numItems-1)switch(t=a._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,a._alignCalcType){case 1:n>t&&(a.nearestListId=e.id);break;case 2:r<t&&(a.nearestListId=e.id);break;case 3:i<t&&(a.nearestListId=e.id);break;case 4:o>t&&(a.nearestListId=e.id)}},t.prototype.prePage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,e)},t.prototype.nextPage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,e)},t.prototype.skipPage=function(e,t){var o=this;if(o.checkInited())return o._slideMode!=s.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(e<0||e>=o._numItems||o.curPageNum!=e&&(o.curPageNum=e,o.pageChangeEvent&&cc.Component.EventHandler.emitEvents([o.pageChangeEvent],e),o.scrollTo(e,t)))},t.prototype.calcCustomSize=function(e){var t=this;if(t.checkInited()){if(!t._itemTmp)return cc.error("Unset template item!");if(!t.renderEvent)return cc.error("Unset Render-Event!");t._customSize={};var o=cc.instantiate(t._itemTmp);t.content.addChild(o);for(var n=0;n<e;n++)cc.Component.EventHandler.emitEvents([t.renderEvent],o,n),o.height==t._itemSize.height&&o.width==t._itemSize.width||(t._customSize[n]=t._sizeType?o.height:o.width);return Object.keys(t._customSize).length||(t._customSize=null),o.removeFromParent(),o.destroy&&o.destroy(),t._customSize}},r([u({type:cc.Enum(a),tooltip:!1})],t.prototype,"templateType",void 0),r([u({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==a.NODE}})],t.prototype,"tmpNode",void 0),r([u({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==a.PREFAB}})],t.prototype,"tmpPrefab",void 0),r([u()],t.prototype,"_slideMode",void 0),r([u({type:cc.Enum(s),tooltip:!1})],t.prototype,"slideMode",null),r([u({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==s.PAGE}})],t.prototype,"pageDistance",void 0),r([u({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==s.PAGE}})],t.prototype,"pageChangeEvent",void 0),r([u()],t.prototype,"_virtual",void 0),r([u({type:cc.Boolean,tooltip:!1})],t.prototype,"virtual",null),r([u({tooltip:!1,visible:function(){var e=this.slideMode==s.NORMAL;return e||(this.cyclic=!1),e}})],t.prototype,"cyclic",void 0),r([u({tooltip:!1,visible:function(){return this.virtual}})],t.prototype,"lackCenter",void 0),r([u({tooltip:!1,visible:function(){var e=this.virtual&&!this.lackCenter;return e||(this.lackSlide=!1),e}})],t.prototype,"lackSlide",void 0),r([u({type:cc.Integer})],t.prototype,"_updateRate",void 0),r([u({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],t.prototype,"updateRate",null),r([u({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],t.prototype,"frameByFrameRenderNum",void 0),r([u({type:cc.Component.EventHandler,tooltip:!1})],t.prototype,"renderEvent",void 0),r([u({type:cc.Enum(c),tooltip:!1})],t.prototype,"selectedMode",void 0),r([u({tooltip:!1,visible:function(){return this.selectedMode==c.SINGLE}})],t.prototype,"repeatEventSingle",void 0),r([u({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>c.NONE}})],t.prototype,"selectedEvent",void 0),r([u({serializable:!1})],t.prototype,"_numItems",void 0),r([p,d(),h("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),_(cc.ScrollView),f(-5e3)],t)}(cc.Component);o.default=g,cc._RF.pop()},{"./ListItem":"ListItem"}],Loading:[function(e,t,o){"use strict";cc._RF.push(t,"7dc748ZYolDSqbPZgpxd+Tv","Loading");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/UIBase"),s=e("../../Define/EventId"),c=e("../../Framework/Event/EventMgr"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lblTip=null,t.lblProgress=null,t.progress=null,t}return i(t,e),t.prototype.onLoad=function(){this.lblProgress.string=""},t.prototype.start=function(){},t.prototype.onOpen=function(){this.progress.progress=0},t.prototype.onEnable=function(){c.EVENT.on(s.EventId.ON_UPDATE_LOADING_TTP,this.onUpdateTip,this),c.EVENT.on(s.EventId.ON_UPDATE_LOADING_PROGRESS,this.onUpdateProgress,this),c.EVENT.on(s.EventId.ON_UPDATE_LOADING_END,this.onUpdateEnd,this)},t.prototype.onDisable=function(){c.EVENT.off(s.EventId.ON_UPDATE_LOADING_TTP,this.onUpdateTip,this),c.EVENT.off(s.EventId.ON_UPDATE_LOADING_PROGRESS,this.onUpdateProgress,this),c.EVENT.off(s.EventId.ON_UPDATE_LOADING_END,this.onUpdateEnd,this)},t.prototype.onUpdateTip=function(e){this.lblTip.string=e},t.prototype.onUpdateProgress=function(e,t){var o=e/t;o>this.progress.progress&&(this.progress.progress=o,this.lblProgress.string=Math.floor(e/t*100)+"%")},t.prototype.onUpdateEnd=function(){this.progress.node.active=!1,this.close()},t.prototype.close=function(){e.prototype.close.call(this),this.progress.node.active=!1},r([u(cc.Label)],t.prototype,"lblTip",void 0),r([u(cc.Label)],t.prototype,"lblProgress",void 0),r([u(cc.ProgressBar)],t.prototype,"progress",void 0),r([p],t)}(a.default);o.default=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase"}],LocalKey:[function(e,t,o){"use strict";cc._RF.push(t,"d7c60hHZixC2KEMWvtpS6f3","LocalKey"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalKey=void 0;var n=function(){function e(){}return e.SoundVolum="LocalKey.SoundVolum",e.TestLocalAccount="LocalKey.TestLocalAccount",e.GuideStep="LocalKey.GuideStep",e.AudioVolumeMusic="LocalKey.AudioVolumeMusic",e.AudioVolumeMusicMute="LocalKey.AudioVolumeMute",e.AudioVolumeEffect="LocalKey.AudioVolumeEffect",e.AudioVolumeEffectMute="LocalKey.AudioVolumeEffectMute",e.GamePower="Localkey.GamePower",e.GameLevel="Localkey.GameLevel",e.NewPlayer="Localkey.NewPlayer",e.GameLeaveTime="Localkey.GameLeaveTime",e.GameEnterTime="Localkey.GameEnterTime",e}();o.LocalKey=n,cc._RF.pop()},{}],LocalStorageMgr:[function(e,t,o){"use strict";cc._RF.push(t,"cffcemub7tG4LuvC9orVgxn","LocalStorageMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStorageMgr=void 0;var n=function(){function e(){}return e.setHashID=function(t){e.hashID=t,e.setItem("hashID",t,!0)},e.getHashID=function(){return e.getItem("hashID",!0)},e.setItem=function(t,o,n){void 0===n&&(n=!1),n?cc.sys.localStorage.setItem(t,o):cc.sys.localStorage.setItem(e.hashID+"_"+t,o)},e.getItem=function(t,o){return void 0===o&&(o=!1),o?cc.sys.localStorage.getItem(t):cc.sys.localStorage.getItem(e.hashID+"_"+t)},e.removeItem=function(t,o){void 0===o&&(o=!1),o?cc.sys.localStorage.removeItem(t):cc.sys.localStorage.removeItem(e.hashID+"_"+t)},e.clearAll=function(){cc.sys.localStorage.clear()},e}();o.LocalStorageMgr=n,cc._RF.pop()},{}],MD5:[function(e,t,o){"use strict";cc._RF.push(t,"56d9fxZSlJNEYXmwzrqH1DN","MD5"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.hexcase=0,this.b64pad=""}return e.prototype.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.any_hmac_md5=function(e,t,o){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),o)},e.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.prototype.rstr_hmac_md5=function(e,t){var o=this.rstr2binl(e);o.length>16&&(o=this.binl_md5(o,8*e.length));for(var n=Array(16),i=Array(16),r=0;r<16;r++)n[r]=909522486^o[r],i[r]=1549556828^o[r];var a=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(i.concat(a),640))},e.prototype.rstr2hex=function(e){try{this.hexcase}catch(r){this.hexcase=0}for(var t,o=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<e.length;i++)t=e.charCodeAt(i),n+=o.charAt(t>>>4&15)+o.charAt(15&t);return n},e.prototype.rstr2b64=function(e){try{this.b64pad}catch(a){this.b64pad=""}for(var t="",o=e.length,n=0;n<o;n+=3)for(var i=e.charCodeAt(n)<<16|(n+1<o?e.charCodeAt(n+1)<<8:0)|(n+2<o?e.charCodeAt(n+2):0),r=0;r<4;r++)8*n+6*r>8*e.length?t+=this.b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-r)&63);return t},e.prototype.rstr2any=function(e,t){var o,n,i,r,a,s=t.length,c=Array(Math.ceil(e.length/2));for(o=0;o<c.length;o++)c[o]=e.charCodeAt(2*o)<<8|e.charCodeAt(2*o+1);var l=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),p=Array(l);for(n=0;n<l;n++){for(a=Array(),r=0,o=0;o<c.length;o++)r=(r<<16)+c[o],r-=(i=Math.floor(r/s))*s,(a.length>0||i>0)&&(a[a.length]=i);p[n]=r,c=a}var u="";for(o=p.length-1;o>=0;o--)u+=t.charAt(p[o]);return u},e.prototype.str2rstr_utf8=function(e){for(var t,o,n="",i=-1;++i<e.length;)t=e.charCodeAt(i),o=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=o&&o<=57343&&(t=65536+((1023&t)<<10)+(1023&o),i++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},e.prototype.str2rstr_utf16le=function(e){for(var t="",o=0;o<e.length;o++)t+=String.fromCharCode(255&e.charCodeAt(o),e.charCodeAt(o)>>>8&255);return t},e.prototype.str2rstr_utf16be=function(e){for(var t="",o=0;o<e.length;o++)t+=String.fromCharCode(e.charCodeAt(o)>>>8&255,255&e.charCodeAt(o));return t},e.prototype.rstr2binl=function(e){for(var t=Array(e.length>>2),o=0;o<t.length;o++)t[o]=0;for(o=0;o<8*e.length;o+=8)t[o>>5]|=(255&e.charCodeAt(o/8))<<o%32;return t},e.prototype.binl2rstr=function(e){for(var t="",o=0;o<32*e.length;o+=8)t+=String.fromCharCode(e[o>>5]>>>o%32&255);return t},e.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var o=1732584193,n=-271733879,i=-1732584194,r=271733878,a=0;a<e.length;a+=16){var s=o,c=n,l=i,p=r;o=this.md5_ff(o,n,i,r,e[a+0],7,-680876936),r=this.md5_ff(r,o,n,i,e[a+1],12,-389564586),i=this.md5_ff(i,r,o,n,e[a+2],17,606105819),n=this.md5_ff(n,i,r,o,e[a+3],22,-1044525330),o=this.md5_ff(o,n,i,r,e[a+4],7,-176418897),r=this.md5_ff(r,o,n,i,e[a+5],12,1200080426),i=this.md5_ff(i,r,o,n,e[a+6],17,-1473231341),n=this.md5_ff(n,i,r,o,e[a+7],22,-45705983),o=this.md5_ff(o,n,i,r,e[a+8],7,1770035416),r=this.md5_ff(r,o,n,i,e[a+9],12,-1958414417),i=this.md5_ff(i,r,o,n,e[a+10],17,-42063),n=this.md5_ff(n,i,r,o,e[a+11],22,-1990404162),o=this.md5_ff(o,n,i,r,e[a+12],7,1804603682),r=this.md5_ff(r,o,n,i,e[a+13],12,-40341101),i=this.md5_ff(i,r,o,n,e[a+14],17,-1502002290),n=this.md5_ff(n,i,r,o,e[a+15],22,1236535329),o=this.md5_gg(o,n,i,r,e[a+1],5,-165796510),r=this.md5_gg(r,o,n,i,e[a+6],9,-1069501632),i=this.md5_gg(i,r,o,n,e[a+11],14,643717713),n=this.md5_gg(n,i,r,o,e[a+0],20,-373897302),o=this.md5_gg(o,n,i,r,e[a+5],5,-701558691),r=this.md5_gg(r,o,n,i,e[a+10],9,38016083),i=this.md5_gg(i,r,o,n,e[a+15],14,-660478335),n=this.md5_gg(n,i,r,o,e[a+4],20,-405537848),o=this.md5_gg(o,n,i,r,e[a+9],5,568446438),r=this.md5_gg(r,o,n,i,e[a+14],9,-1019803690),i=this.md5_gg(i,r,o,n,e[a+3],14,-187363961),n=this.md5_gg(n,i,r,o,e[a+8],20,1163531501),o=this.md5_gg(o,n,i,r,e[a+13],5,-1444681467),r=this.md5_gg(r,o,n,i,e[a+2],9,-51403784),i=this.md5_gg(i,r,o,n,e[a+7],14,1735328473),n=this.md5_gg(n,i,r,o,e[a+12],20,-1926607734),o=this.md5_hh(o,n,i,r,e[a+5],4,-378558),r=this.md5_hh(r,o,n,i,e[a+8],11,-2022574463),i=this.md5_hh(i,r,o,n,e[a+11],16,1839030562),n=this.md5_hh(n,i,r,o,e[a+14],23,-35309556),o=this.md5_hh(o,n,i,r,e[a+1],4,-1530992060),r=this.md5_hh(r,o,n,i,e[a+4],11,1272893353),i=this.md5_hh(i,r,o,n,e[a+7],16,-155497632),n=this.md5_hh(n,i,r,o,e[a+10],23,-1094730640),o=this.md5_hh(o,n,i,r,e[a+13],4,681279174),r=this.md5_hh(r,o,n,i,e[a+0],11,-358537222),i=this.md5_hh(i,r,o,n,e[a+3],16,-722521979),n=this.md5_hh(n,i,r,o,e[a+6],23,76029189),o=this.md5_hh(o,n,i,r,e[a+9],4,-640364487),r=this.md5_hh(r,o,n,i,e[a+12],11,-421815835),i=this.md5_hh(i,r,o,n,e[a+15],16,530742520),n=this.md5_hh(n,i,r,o,e[a+2],23,-995338651),o=this.md5_ii(o,n,i,r,e[a+0],6,-198630844),r=this.md5_ii(r,o,n,i,e[a+7],10,1126891415),i=this.md5_ii(i,r,o,n,e[a+14],15,-1416354905),n=this.md5_ii(n,i,r,o,e[a+5],21,-57434055),o=this.md5_ii(o,n,i,r,e[a+12],6,1700485571),r=this.md5_ii(r,o,n,i,e[a+3],10,-1894986606),i=this.md5_ii(i,r,o,n,e[a+10],15,-1051523),n=this.md5_ii(n,i,r,o,e[a+1],21,-2054922799),o=this.md5_ii(o,n,i,r,e[a+8],6,1873313359),r=this.md5_ii(r,o,n,i,e[a+15],10,-30611744),i=this.md5_ii(i,r,o,n,e[a+6],15,-1560198380),n=this.md5_ii(n,i,r,o,e[a+13],21,1309151649),o=this.md5_ii(o,n,i,r,e[a+4],6,-145523070),r=this.md5_ii(r,o,n,i,e[a+11],10,-1120210379),i=this.md5_ii(i,r,o,n,e[a+2],15,718787259),n=this.md5_ii(n,i,r,o,e[a+9],21,-343485551),o=this.safe_add(o,s),n=this.safe_add(n,c),i=this.safe_add(i,l),r=this.safe_add(r,p)}return[o,n,i,r]},e.prototype.md5_cmn=function(e,t,o,n,i,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,r)),i),o)},e.prototype.md5_ff=function(e,t,o,n,i,r,a){return this.md5_cmn(t&o|~t&n,e,t,i,r,a)},e.prototype.md5_gg=function(e,t,o,n,i,r,a){return this.md5_cmn(t&n|o&~n,e,t,i,r,a)},e.prototype.md5_hh=function(e,t,o,n,i,r,a){return this.md5_cmn(t^o^n,e,t,i,r,a)},e.prototype.md5_ii=function(e,t,o,n,i,r,a){return this.md5_cmn(o^(t|~n),e,t,i,r,a)},e.prototype.safe_add=function(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o},e.prototype.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();o.default=n,cc._RF.pop()},{}],MagnetModel:[function(e,t,o){"use strict";cc._RF.push(t,"a33fburA2BNhYvf+kV6fJAg","MagnetModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.MagnetModel=void 0;var n=e("../Controller/TableMgr"),i=e("../Framework/Storage/LocalStorageMgr"),r=function(){function e(){this._active=!1,this._stageTime=0,this._endTime=0,this._free=6e5,this._fristAd=216e5,this._nextAd=36e5,this._max=432e5,this._count=0,this._free=Number(n.TABLE.getGlobal("CiXiXiaoYing_free")),this._fristAd=Number(n.TABLE.getGlobal("CiXiXiaoYing_fristAd")),this._nextAd=Number(n.TABLE.getGlobal("CiXiXiaoYing_nextAd")),this._max=Number(n.TABLE.getGlobal("CiXiXiaoYing_max")),this._count=Number(i.LocalStorageMgr.getItem("CiXiXiaoYing_count"))||0,this._endTime=Number(i.LocalStorageMgr.getItem("CiXiXiaoYing_endTime"))||0}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(e){this._active=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageTime",{get:function(){return this._stageTime},set:function(e){this._stageTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return this._endTime},set:function(e){this._endTime=e,i.LocalStorageMgr.setItem("CiXiXiaoYing_endTime",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"free",{get:function(){return this._free},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fristAd",{get:function(){return this._fristAd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextAd",{get:function(){return this._nextAd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},set:function(e){this._count=e,i.LocalStorageMgr.setItem("CiXiXiaoYing_count",""+e)},enumerable:!1,configurable:!0}),e.prototype.isActive=function(){return this._active},e.prototype.isActiveStage=function(){return this._active},e._inst=null,e}();o.MagnetModel=r,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr"}],Magnet:[function(e,t,o){"use strict";cc._RF.push(t,"3de38KPKf5Eo5yHJ/hIr2JP","Magnet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/i18n/i18nMgr"),u=e("../../../Framework/UI/UIFacade"),d=e("../../../Framework/UIBase"),h=e("../../../Model/MagnetModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.activeNode=null,t.freeNode=null,t.adNode=null,t.adTxt=null,t.freeTxt=null,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onOpen=function(){this.refresh(),l.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){l.EVENT.emit(s.EventId.ON_GAME_RESUME)},t.prototype.refresh=function(){h.MagnetModel.inst.isActive()?(this.activeNode.active=!0,this.freeNode.active=!1,this.adNode.active=!1):(this.activeNode.active=!1,this.freeNode.active=0==h.MagnetModel.inst.count,this.adNode.active=0!=h.MagnetModel.inst.count)},t.prototype.onClickFree=function(){h.MagnetModel.inst.active=!0,h.MagnetModel.inst.count++,u.UIFacade.showToast(p.i18nMgr.getLabel("CiXiXiaoYing/active1")),c.AudioMgr.inst.playEffectByName("ui_tips"),this.close()},t.prototype.onClickAd=function(){var e=this;a.default.inst.showAd("\u78c1\u5438\u6548\u5e94",function(){h.MagnetModel.inst.active=!0,h.MagnetModel.inst.count++,u.UIFacade.showToast(p.i18nMgr.getLabel("CiXiXiaoYing/active1")),c.AudioMgr.inst.playEffectByName("ui_tips"),e.close()})},r([y(cc.Node)],t.prototype,"activeNode",void 0),r([y(cc.Node)],t.prototype,"freeNode",void 0),r([y(cc.Node)],t.prototype,"adNode",void 0),r([y(cc.Label)],t.prototype,"adTxt",void 0),r([y(cc.Label)],t.prototype,"freeTxt",void 0),r([_],t)}(d.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/MagnetModel":"MagnetModel"}],Main:[function(e,t,o){"use strict";cc._RF.push(t,"94684dGaT9HWLMhvdQlRcUr","Main");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../Controller/GameItemMgr"),l=e("../../Controller/TableMgr"),p=e("../../Define/Define"),u=e("../../Define/EventId"),d=e("../../Define/StaticData"),h=e("../../Define/UIDefs"),f=e("../../Framework/Event/EventMgr"),_=e("../../Framework/Scene/SceneBase"),y=e("../../Framework/UI/UIMgr"),g=e("../../Framework/VM"),m=e("../../Model/GameModel"),v=e("../../Model/MagnetModel"),M=e("../../Model/UserModel"),b=cc._decorator,I=b.ccclass,E=b.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainCamera=null,t.bgCamera=null,t.bg=null,t._bgScale=1,t._bgMt=null,t._bgSize=null,t}return i(t,e),t.prototype.onLoad=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(){return cc.PhysicsManager.FIXED_TIME_STEP=1/30,cc.PhysicsManager.VELOCITY_ITERATIONS=5,cc.PhysicsManager.POSITION_ITERATIONS=5,(e=cc.director.getPhysicsManager()).enabled=!0,e.enabledAccumulator=!0,[2]})})},t.prototype.start=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(){return this._bgScale=Number(l.TABLE.getGlobal("ZhanDouShiYe")),this.mainCamera.zoomRatio=this._bgScale,this.bgCamera.zoomRatio=this._bgScale,e=cc.view.getVisibleSize(),this.bg.node.width=e.width/this._bgScale,this.bg.node.height=e.height/this._bgScale,d.StaticData.maxX=e.width/2/this._bgScale,d.StaticData.maxY=e.height/2/this._bgScale,d.StaticData.minX=-e.width/2/this._bgScale,d.StaticData.minY=-e.height/2/this._bgScale,d.StaticData.radius=100+Math.sqrt(Math.pow(e.width/2,2)+Math.pow(e.height/2,2))/this._bgScale,d.StaticData.mainCamera=this.mainCamera,[2]})})},t.prototype.onEnable=function(){g.VM.bindPath("UserModel._background",this.updateBackground,this),f.EVENT.on(u.EventId.ON_GAME_PAUSE,this.pause,this),f.EVENT.on(u.EventId.ON_GAME_RESUME,this.resume,this),f.EVENT.on(u.EventId.ON_GAME_START,this.gameStart,this),f.EVENT.on(u.EventId.ON_GAME_LOADED,this.gameLoaded,this),f.EVENT.on(u.EventId.ON_GAME_RESULT,this.gameResult,this),f.EVENT.on(u.EventId.ON_GAME_OVER,this.gameOver,this),f.EVENT.on(u.EventId.ON_GAME_UPDATE_ROLE_POS,this.updateCamera,this)},t.prototype.onDisable=function(){g.VM.unbindPath("UserModel._background",this.updateBackground,this),f.EVENT.off(u.EventId.ON_GAME_PAUSE,this.pause,this),f.EVENT.off(u.EventId.ON_GAME_RESUME,this.resume,this),f.EVENT.off(u.EventId.ON_GAME_START,this.gameStart,this),f.EVENT.off(u.EventId.ON_GAME_LOADED,this.gameLoaded,this),f.EVENT.on(u.EventId.ON_GAME_RESULT,this.gameResult,this),f.EVENT.off(u.EventId.ON_GAME_OVER,this.gameOver,this),f.EVENT.off(u.EventId.ON_GAME_UPDATE_ROLE_POS,this.updateCamera,this)},t.prototype.updateBackground=function(e){var t=this;m.GameModel.inst.loadRef++,this.loadBundleRes("Textures",p.BACKGROUND_URL[e],cc.SpriteFrame,function(e,o){m.GameModel.inst.loadRef--;var n=t.bg.spriteFrame;t.bg.spriteFrame=null,t.bg.spriteFrame=o,t.releaseAsset(n),t._bgMt=t.bg.getMaterial(0),t._bgSize=t.bg.spriteFrame.getOriginalSize()})},t.prototype.clearBackground=function(){var e=this.bg.spriteFrame;this.bg.spriteFrame=null,this.releaseAsset(e),this._bgMt=null,this._bgSize=null},t.prototype.pause=function(){m.GameModel.inst.isPause||(m.GameModel.inst.isPause=!0)},t.prototype.resume=function(){m.GameModel.inst.isPause&&(m.GameModel.inst.isPause=!1)},t.prototype.gameStart=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return y.default.inst.close(h.UIType.GameStart),y.default.inst.close(h.UIType.UIMain),y.default.inst.open(h.UIType.UIGame),[4,c.default.inst.init()];case 1:return e.sent(),c.default.inst.generateHpBar2(m.GameModel.inst.player,-20),m.GameModel.inst.isLoad=!0,v.MagnetModel.inst.active=!1,this.mainCamera.node.setPosition(0,0),this.updateBackground(M.UserModel.inst.background),[2]}})})},t.prototype.gameLoaded=function(){m.GameModel.inst.isLoad=!1,y.default.inst.close(h.UIType.Loading),f.EVENT.emit(u.EventId.ON_GAME_RESUME)},t.prototype.gameResult=function(){y.default.inst.open(h.UIType.GameOver)},t.prototype.gameOver=function(){y.default.inst.close(h.UIType.UIGame),y.default.inst.open(h.UIType.GameStart),y.default.inst.open(h.UIType.UIMain),c.default.inst.releaseAutoRes(),f.EVENT.emit(u.EventId.ON_GAME_PAUSE),this.clearBackground()},t.prototype.updateCamera=function(e){var t=this.mainCamera.node.getPosition(),o=e,n=t.x+.1*(o.x-t.x),i=t.y+.1*(o.y-t.y);this.mainCamera.node.setPosition(n,i),this._bgMt&&this._bgMt.setProperty("uOffset",cc.v2(n/this._bgSize.width%1,-i/this._bgSize.height%1))},t.prototype.update=function(e){var t=m.GameModel.inst;t.isPause||t.isGuide||(t.time+=e)},r([E(cc.Camera)],t.prototype,"mainCamera",void 0),r([E(cc.Camera)],t.prototype,"bgCamera",void 0),r([E(cc.Sprite)],t.prototype,"bg",void 0),r([I],t)}(_.default);o.default=O,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Controller/TableMgr":"TableMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/StaticData":"StaticData","../../Define/UIDefs":"UIDefs","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Scene/SceneBase":"SceneBase","../../Framework/UI/UIMgr":"UIMgr","../../Framework/VM":"VM","../../Model/GameModel":"GameModel","../../Model/MagnetModel":"MagnetModel","../../Model/UserModel":"UserModel"}],MonsterComponent:[function(e,t,o){"use strict";cc._RF.push(t,"110c2wNm8dGb5z46gzi+5EA","MonsterComponent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/GameItemMgr"),s=e("../../Controller/LayerMgr"),c=e("../../Controller/TableMgr"),l=e("../../Define/EventId"),p=e("../../Define/StaticData"),u=e("../../Framework/Audio/AudioMgr"),d=e("../../Framework/Event/EventMgr"),h=e("../../Framework/Utils/Utils"),f=e("../../Model/GameModel"),_=e("../../Model/WeaponModel"),y=e("../NpcBase"),g=cc._decorator,m=g.ccclass,v=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rBody=null,t._collider=null,t._info=null,t._spr=null,t._ani=null,t._spine=null,t._stopTime=0,t._hitTime=0,t._repel=0,t._material=[],t._materialVariants=[],t._velocity=cc.v2(),t._v3=cc.v3(),t._game=f.GameModel.inst,t}return i(t,e),t.prototype.setMaterials=function(e){0==this._materialVariants.length&&(this._material=e,null!=this._spr?this._materialVariants=[cc.MaterialVariant.create(e[0],this._spr),cc.MaterialVariant.create(e[0],this._spr),cc.MaterialVariant.create(e[0],this._spr)]:this._materialVariants=[cc.MaterialVariant.create(e[1],this._spine),cc.MaterialVariant.create(e[1],this._spine),cc.MaterialVariant.create(e[1],this._spine)],this._materialVariants[1].define("IS_HIT",!0),this._materialVariants[2].define("IS_STOP",!0),this.setDefaultMaterial())},t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider),this._spr=this.node.getComponentInChildren(cc.Sprite),this._ani=this.node.getComponentInChildren(cc.Animation),this._spine=this.node.getComponentInChildren(sp.Skeleton)},t.prototype.onEnable=function(){this.node.on("hit",this.onHit,this),this.node.on("stop",this.onStop,this),this.node.on("repel",this.onRepel,this),d.EVENT.on(l.EventId.ON_GAME_PAUSE,this.pause,this),d.EVENT.on(l.EventId.ON_GAME_RESUME,this.resume,this),d.EVENT.on(l.EventId.ON_GAME_UPDATE_ROLE_POS,this.updatePos,this),d.EVENT.on(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},t.prototype.onDisable=function(){this.node.off("hit",this.onHit,this),this.node.off("stop",this.onStop,this),this.node.off("repel",this.onRepel,this),d.EVENT.off(l.EventId.ON_GAME_PAUSE,this.pause,this),d.EVENT.off(l.EventId.ON_GAME_RESUME,this.resume,this),d.EVENT.off(l.EventId.ON_GAME_UPDATE_ROLE_POS,this.updatePos,this),d.EVENT.off(l.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},t.prototype.pause=function(){this._rBody.awake=!1},t.prototype.resume=function(){this._rBody.awake=!0},t.prototype.onHit=function(e){if(!(this.hp<=0)){this._v3.x=this.node.position.x,this._v3.y=this.node.position.y+40;var t=e.damage.damage;e.damage.crit?a.default.inst.generateHitNumC(this._v3,t):a.default.inst.generateHitNum(this._v3,t),a.default.inst.generateHitEffect(this._v3),u.AudioMgr.inst.playEffectByName("hit"),this.hp-=t,this.hp<=0&&this.onDead(),this._stopTime<=0&&(this._hitTime=.5,this.setHitMaterial())}},t.prototype.onStop=function(e){this._stopTime=e,this._rBody.linearVelocity=cc.Vec2.ZERO,this.setStopMaterial()},t.prototype.onRepel=function(e){this._repel=e},t.prototype.onDead=function(){this._stopTime=0,this._collider.enabled=!1,this._rBody.linearVelocity=cc.Vec2.ZERO,this.onDeathAni(this.recycle.bind(this)),a.default.inst.generateExp(this.node.position);var e=_.WeaponModel.inst.magicAttrs.a_expball_p;e>0&&e>Math.random()&&((n=this.node.position).x+=cc.math.randomRange(-50,50),n.y+=cc.math.randomRange(-50,50),a.default.inst.generateExp(n));var t=this._info.fProb;if(t>0){var o=_.WeaponModel.inst.magicAttrs.a_drop_p;o>0&&(t+=o),t>Math.random()&&((n=this.node.position).x+=cc.math.randomRange(-50,50),n.y+=cc.math.randomRange(-50,50),a.default.inst.generateFood(n))}this._info.tElite>0&&((n=this.node.position).x+=cc.math.randomRange(-50,50),n.y+=cc.math.randomRange(-50,50),a.default.inst.generateBox(n));var n,i=this.getEquip();i&&((n=this.node.position).x+=cc.math.randomRange(-50,50),n.y+=cc.math.randomRange(-50,50),a.default.inst.generateEquip(n,i))},t.prototype.getEquip=function(){var e=this._info.dorpFightEquip;if(0!=e.length){var t=h.default.getRandWeightIndex(e);if(0!=t){var o=t-1,n=c.TABLE.getTable("FightEquip").filter(function(e){if(f.GameModel.inst.fightList.find(function(t){return t&&t.type==e.type&&t.quality>=e.quality}))return!1;if(e.quality==o&&e.skill){var t=_.WeaponModel.inst.weaponCom[e.skill];return!!(t&&t.getLevel()>=e.skillLevel)}return e.quality==o}),i=h.default.RandomSome(n,1)[0];if(null!=i)return i}}},t.prototype.onDeathAni=function(e){var t,o,n,i,r,a,s=this,c=[];if([null===(t=this._spine)||void 0===t?void 0:t.findAnimation("death1"),null===(o=this._spine)||void 0===o?void 0:o.findAnimation("death2"),null===(n=this._spine)||void 0===n?void 0:n.findAnimation("death3"),null===(i=this._spine)||void 0===i?void 0:i.findAnimation("death10a"),null===(r=this._spine)||void 0===r?void 0:r.findAnimation("death10b"),null===(a=this._spine)||void 0===a?void 0:a.findAnimation("die")].forEach(function(e){return e&&c.push(e)}),c.length>0){var l=c[Math.floor(Math.random()*c.length)];this._spine.setAnimation(0,l.name,!1),this._spine.setCompleteListener(function(){s._spine.setCompleteListener(function(){}),e&&e()})}else cc.tween(this.node).to(.5,{opacity:0}).call(e).start();return null},t.prototype.setDefaultMaterial=function(){this._stopTime=0,this._hitTime=0,null!=this._spr?(this._ani.play(),this._spr.setMaterial(0,this._materialVariants[0])):(this._spine.timeScale=1,this._spine.setMaterial(0,this._materialVariants[0])),this.node.parent!=s.LayerMgr.inst.RoleLayer&&(this.node.setParent(s.LayerMgr.inst.RoleLayer),this.node.setSiblingIndex(this._info.mid))},t.prototype.setHitMaterial=function(){if(!(this._stopTime>0)){if(null!=this._spr){if(this._spr.getMaterial(0)==this._materialVariants[1])return;this._spr.setMaterial(0,this._materialVariants[1])}else{if(this._spine.getMaterial(0)==this._materialVariants[1])return;this._spine.setMaterial(0,this._materialVariants[1])}this.node.parent!=s.LayerMgr.inst.RoleHitLayer&&(this.node.setParent(s.LayerMgr.inst.RoleHitLayer),this.node.setSiblingIndex(this._info.mid))}},t.prototype.setStopMaterial=function(){if(null!=this._spr){if(this._spr.getMaterial(0)==this._materialVariants[2])return;this._ani.pause(),this._spr.setMaterial(0,this._materialVariants[2])}else{if(this._spine.getMaterial(0)==this._materialVariants[2])return;this._spine.timeScale=0,this._spine.setMaterial(0,this._materialVariants[2])}this.node.parent!=s.LayerMgr.inst.RoleStopLayer&&(this.node.setParent(s.LayerMgr.inst.RoleStopLayer),this.node.setSiblingIndex(this._info.mid))},t.prototype.updatePos=function(e){if(!(this._stopTime>0||this.hp<=0&&this._repel<=this.moveSpeed)){if(this._velocity.x=e.x-this.node.position.x,this._velocity.y=e.y-this.node.position.y,this._velocity.len()>p.StaticData.radius){var t=cc.math.randomRange(this._info.radMin,this._info.radMax),o=new cc.Vec2(t,0),n=cc.math.randomRange(0,2*Math.PI);return o.rotateSelf(n),o.x+=this._game.player.node.x,o.y+=this._game.player.node.y,this.node.setPosition(o),this.node.opacity=0,void cc.tween(this.node).to(.2,{opacity:255}).start()}this._velocity.normalizeSelf(),(this._velocity.x<0&&this.node.scaleX<0||this._velocity.x>0&&this.node.scaleX>0)&&(this.node.scaleX*=-1),this._velocity.multiplyScalar(this.moveSpeed-this._repel),this._rBody.linearVelocity=this._velocity}},t.prototype.updateMonster=function(e){this._info=e,this.hp=this._info.hp,this.crit=0,this.critDmg=2,this.reduce=0,this.touchDelta=0,this.node.scale=this._info.scale,this._stopTime=0,this._hitTime=0,this._repel=0,this._spine&&this._spine.setAnimation(0,this._spine.defaultAnimation,!0),e.tElite&&a.default.inst.generateHpBar(this,e.hpHeight*e.scale),this._collider.tag=this.atk,this._collider.enabled=!0,this.setDefaultMaterial(),this.updateAttrs()},t.prototype.updateAttrs=function(){this.moveSpeed=this._info.speed,this.maxHp=this._info.hp,this.atk=this._info.atk;var e=_.WeaponModel.inst.magicAttrs.s_espeed_p;e>0&&(this.moveSpeed-=e*this._info.speed);var t=_.WeaponModel.inst.magicAttrs.s_ehp_p;t>0&&(this.maxHp-=t*this._info.hp),this.hp>this.maxHp&&(this.hp=this.maxHp)},t.prototype.update=function(e){if(!this._game.isPause){if(this._repel>0&&(this._repel-=e*this.moveSpeed*2),this._stopTime>0)return this._stopTime-=e,void(this._stopTime<=0&&this.setDefaultMaterial());this._hitTime>0&&(this._hitTime-=e,this._hitTime<=0&&this.setDefaultMaterial())}},t.prototype.recycle=function(){},r([m],t)}(y.NpcBase));o.default=v,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Define/StaticData":"StaticData","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Utils/Utils":"Utils","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","../NpcBase":"NpcBase"}],MonsterCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"83b7dTRJ+1BzbSMcP42uJg4","MonsterCtrl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Controller/GameBase"),s=e("../Controller/LayerMgr"),c=e("../Controller/TableMgr"),l=e("../Controller/TimeMgr"),p=e("../Define/EventId"),u=e("../Define/UIDefs"),d=e("../Framework/Event/EventMgr"),h=e("../Framework/UI/UIMgr"),f=e("../Model/GameModel"),_=e("../Model/UserModel"),y=e("./Component/MonsterComponent"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprMaterial=null,t.spineMaterial=null,t._stageMonsters={},t._stageInfos={},t._curTime=0,t._nextTime=0,t._keyTime=[],t._timeStamp=0,t._execDelay=[],t._loadList={},t._monsterMax=120,t._game=f.GameModel.inst,t._inactiveStamp=0,t._inactiveInterval=30,t}return i(t,e),t.prototype.start=function(){this._monsterMax=Number(c.TABLE.getGlobal("StageMonsterMax"))},t.prototype.gameStart=function(){var e=this,t=c.TABLE.getTable("stage_"+_.UserModel.inst.selectStage);null==t&&(t=c.TABLE.getTable("stage_1")),this._timeStamp=0,this._curTime=0,this._nextTime=0,this._keyTime.length=0,this._stageInfos={},this._stageMonsters={},t.forEach(function(t){null==e._stageInfos[t.time]&&(e._stageInfos[t.time]=[],e._keyTime.push(t.time)),e._stageInfos[t.time].push(t),e._stageMonsters[t.mid]="/Game/Monster/m"+t.mid,f.GameModel.inst.waveMax=t.wave})},t.prototype.gameResult=function(){},t.prototype.gameOver=function(){this._execDelay.length=0,this.recycle(),this.releaseAutoRes()},t.prototype.generateMonster=function(e){var t=this,o=e.mid;if(null!=this._prefabList[o]){var n=this.get(o),i=cc.math.randomRange(e.radMin,e.radMax),r=new cc.Vec2(i,0),a=cc.math.randomRange(0,2*Math.PI);r.rotateSelf(a),r.x+=f.GameModel.inst.player.node.x,r.y+=f.GameModel.inst.player.node.y,n.setPosition(r),n.setSiblingIndex(o),n.setParent(s.LayerMgr.inst.RoleLayer);var c=n.getComponent(y.default);null==c&&(c=n.addComponent(y.default)),c.setMaterials([this.sprMaterial,this.spineMaterial]),c.updateMonster(e),c.recycle=function(){t._game.monsterList.splice(t._game.monsterList.indexOf(c),1),t.put(o,n)},this._game.monsterList.push(c),n.opacity=0,cc.Tween.stopAllByTarget(n),cc.tween(n).to(.2,{opacity:255}).start()}else this.loadMonster(e)},t.prototype.loadMonster=function(e){var t=this,o=e.mid;if(null==this._loadList[o]){this._loadList[o]=[this.generateMonster.bind(this,e)];var n=this._stageMonsters[o];this.loadBundleRes("Prefabs",n,cc.Prefab,function(e,n){t.addItemPool(o,n),t._execDelay=t._execDelay.concat(t._loadList[o]),delete t._loadList[o]})}else this._loadList[o].push(this.generateMonster.bind(this,e))},t.prototype.get=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];var i=e.prototype.get.call(this,t,o);return this._game.monster++,i},t.prototype.put=function(t,o){var n=this;e.prototype.put.call(this,t,o),this._game.monster--,this._nextTime>=this._keyTime.length&&0==this._game.monster&&this.scheduleOnce(function(){n._game.isFinished=!0,h.default.inst.closeToUI(u.UIType.UIGame,null),d.EVENT.emit(p.EventId.ON_GAME_RESULT)},1)},t.prototype.checkInactive=function(){var e=l.default.inst.now();for(var t in this._nodePools){var o=this._nodePools[t],n=this._nodeList[t];o&&o.size()>0&&0==n.length&&e-this._timeList[t]>3e4&&(o.clear(),this.releaseAsset(this._prefabList[t]),delete this._prefabList[t])}},t.prototype.update=function(e){if(!this._game.isPause&&!(this._game.isGuide||(this._inactiveStamp+=e,this._inactiveStamp>=this._inactiveInterval&&(this._inactiveStamp=0,this.checkInactive()),this._game.monster>=this._monsterMax)))if(this._curTime!=this._nextTime){this._timeStamp+=e;var t=this._keyTime[this._nextTime];if(this._timeStamp>=t){this._curTime=this._nextTime;for(var o=this._stageInfos[t],n=0,i=o;n<i.length;n++){for(var r=i[n],a=0;a<r.count;a++)this._execDelay.push(this.generateMonster.bind(this,r));Math.random()<r.drawOdds&&h.default.inst.open(u.UIType.DrawSkill),this._game.money+=r.money,this._game.rMoney+=r.rMoney}this._game.wave=o[0].wave}}else this._execDelay.length>0?this._execDelay.pop()():this._nextTime++},r([v(cc.Material)],t.prototype,"sprMaterial",void 0),r([v(cc.Material)],t.prototype,"spineMaterial",void 0),r([m],t)}(a.GameBase);o.default=M,cc._RF.pop()},{"../Controller/GameBase":"GameBase","../Controller/LayerMgr":"LayerMgr","../Controller/TableMgr":"TableMgr","../Controller/TimeMgr":"TimeMgr","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/UI/UIMgr":"UIMgr","../Model/GameModel":"GameModel","../Model/UserModel":"UserModel","./Component/MonsterComponent":"MonsterComponent"}],NativeMgr:[function(e,t,o){"use strict";cc._RF.push(t,"29c30Iz+xJGhrLquXb6JA+M","NativeMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Define/EventId"),a=e("../Define/SceneDef"),s=e("../Framework/Event/EventMgr"),c=e("../Framework/Scene/SceneMgr"),l=e("../Framework/UI/UIFacade"),p=e("../Framework/UI/UIMgr"),u=e("../Framework/Utils/Singleton"),d=e("../Model/UserModel"),h=e("./AdMgr"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._debug=!1,t._appname="",t._version="0.0.1",t}return i(t,e),t.prototype.appname=function(e){this._appname=e},t.prototype.version=function(e){this._version=e},t.prototype.debug=function(e){this._debug=e},t.prototype.debugAD=function(e){h.default.inst._debug=e},t.prototype.clearDate=function(){c.SceneMgr.inst.loadScene(a.SceneType.Bootstrap)},t.prototype.showToast=function(e){p.default.inst.showToast(e)},t.prototype.networkErr=function(){l.UIFacade.showConfirm("","\u7f51\u7edc\u5f02\u5e38","\u786e\u5b9a").then(function(){return cc.game.end()})},t.prototype.antiAddiction=function(){l.UIFacade.showToast("\u89e6\u53d1\u9632\u6c89\u8ff7\u9000\u51fa"),setTimeout(function(){cc.game.end()},2e3)},t.prototype.realnameRewards=function(){if(!d.UserModel.inst.isRealNameReward){l.UIFacade.showToast("\u5b9e\u540d\u5956\u52b1\u53d1\u653e");var e=cc.view.getVisibleSize(),t=cc.v2(e.width/2,e.height/2);s.EVENT.emit(r.EventId.ON_UI_MAIN_FLY_ICON,t,"RMoney",function(){d.UserModel.inst.rMoney+=d.UserModel.inst.realNameReward}),d.UserModel.inst.isRealNameReward=1}},t.prototype.gameInit=function(){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","gameInit","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","gameInit"))},t.prototype.gameStart=function(){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","gameStart","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","gameStart"))},t.prototype.logEvent=function(e,t){if(void 0===t&&(t={}),cc.sys.isNative){var o=JSON.stringify(t);cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","logEvent","(Ljava/lang/String;Ljava/lang/String;)V",e,o):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","logEvent:Params:",e,o)}},t.prototype.openUserProtocol=function(){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","openUserProtocol","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","openUserProtocol"))},t.prototype.openPrivacyProtocol=function(){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","openPrivacyProtocol","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","openPrivacyProtocol"))},t.prototype.cancelAccount=function(){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","cancelAccount","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","cancelAccount"))},t.prototype.openUserFeedback=function(){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","openUserFeedback","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","openUserFeedback"))},t.prototype.joinQQGroup=function(){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","joinQQGroup","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","joinQQGroup"))},t.prototype.storeReview=function(){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","storeReview","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","storeReview"))},t.prototype.getActivityTime=function(){return cc.sys.isNative?cc.sys.os===cc.sys.OS_ANDROID?Number(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/TimerUtil","getRealTime","()Ljava/lang/String;")):cc.sys.os===cc.sys.OS_IOS?Number(jsb.reflection.callStaticMethod("AppController","getRealTime")):void 0:Date.now()},t.prototype.checkDeviceRealName=function(){cc.sys.isNative&&(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/MainSDK","checkDeviceRealName","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","checkDeviceRealName"))},t.prototype.getWebTime=function(){return cc.sys.isNative?cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/TimerUtil","getWebTime","()Ljava/lang/String;"):cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","getWebTime"):void 0:Date.now()},t}(u.Singleton());o.default=f,window.Native=f.inst,cc._RF.pop()},{"../Define/EventId":"EventId","../Define/SceneDef":"SceneDef","../Framework/Event/EventMgr":"EventMgr","../Framework/Scene/SceneMgr":"SceneMgr","../Framework/UI/UIFacade":"UIFacade","../Framework/UI/UIMgr":"UIMgr","../Framework/Utils/Singleton":"Singleton","../Model/UserModel":"UserModel","./AdMgr":"AdMgr"}],NetApi:[function(e,t,o){"use strict";cc._RF.push(t,"eecd0Kfz/dH0pM81zOsu0zq","NetApi"),Object.defineProperty(o,"__esModule",{value:!0}),o.NetApi=void 0;var n=function(){function e(){}return e.Apis={login:"player/login",startBattle:"battle/startBattle",endBattle:"battle/endBattle",collectElement:"battle/collectElement",additem:"server/additem",gmAdditem:"server/gmAdditem",useItem:"player/useItem",finishGuide:"player/finishGuide",shareItem:"player/shareItem",drawShareItem:"player/drawShareItem",getBackpackInfo:"player/getBackpackInfo",exchange:"player/exchange"},e}();o.NetApi=n,cc._RF.pop()},{}],NetBase:[function(e,t,o){"use strict";cc._RF.push(t,"4d631oOBs9EAZqAZp6Bl5yj","NetBase");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NetBase=void 0;var r=e("./HttpRequest"),a=e("../Utils/SecretUtil"),s=e("../../Model/UserModel"),c=e("../Platform/PlatformModel"),l=e("../UI/UIFacade"),p=function(){function e(){}return Object.defineProperty(e,"sBaseURL",{get:function(){var e="";switch(c.default.inst.getPlatType()){case c.PlatformType.SaaS:e=c.default.inst.getServerUrl();break;default:e=(window.location.protocol||"http:")+"//"+c.default.inst.getServerUrl()}return e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sAccountBaseURL",{get:function(){var e="";switch(c.default.inst.getPlatType()){case c.PlatformType.SaaS:default:e=(window.location.protocol||"http:")+"//"+c.default.inst.getServerUrl()}return e},enumerable:!1,configurable:!0}),e.get=function(e,t,o,n,i,r){return void 0===n&&(n={"Content-Type":"application/json"}),void 0===i&&(i=5),void 0===r&&(r=!1),e=this.sBaseURL+e,this.sendRequset("get",e,t,o,n,i)},e.post=function(e,t,o,n,i,r){return void 0===n&&(n={"Content-Type":"application/json"}),void 0===i&&(i=5),void 0===r&&(r=!1),e=this.sBaseURL+e,this.sendRequset("post",e,t,o,n,i,r)},e.accountPost=function(e,t,o,n,i,r){return void 0===n&&(n={"Content-Type":"application/json"}),void 0===i&&(i=5),void 0===r&&(r=!1),e=this.sAccountBaseURL+e,this.sendRequset("post",e,t,o,n,i,r)},e.sendRequset=function(e,t,o,c,l,p,u){return void 0===u&&(u=!1),n(this,void 0,Promise,function(){var n,d,h,f,_;return i(this,function(i){switch(i.label){case 0:switch(c||(c={}),d=s.UserModel.inst.getGameId(),h=s.UserModel.inst.getToken(),d&&d.length>0&&h&&h.length>0&&(c.gameId=d,c.token=h),f=c,u&&(f=a.default.Encrypt(c)),e.toLocaleLowerCase()){case"get":n=r.HttpRequest.get(t,o,l,p);break;case"post":n=r.HttpRequest.post(t,o,f,l,p);break;default:console.error("unkonw  http request method!")}return[4,n];case 1:if((_=i.sent()).__data__&&_.__iv__&&(_=a.default.Decrypt(_.__data__,_.__iv__)),cc.log("======== Requset:",t," ========\n",JSON.stringify(c),"\n\n======== Response: ========\n",JSON.stringify(_)),0==_.code)return[2,_];throw this.onErrorCode(_.code,_.errMsg),_.code}})})},e.onErrorCode=function(e,t){t&&l.UIFacade.showToast(""+t)},e.objectToUrlParam=function(e){var t="";for(var o in e){var n=e[o];null!=n&&null!=n?n.constructor==Array||n.constructor==Object?t+=encodeURIComponent(o)+"="+encodeURIComponent(JSON.stringify(n))+"&":t+=encodeURIComponent(o)+"="+encodeURIComponent(n)+"&":t+=encodeURIComponent(o)+"=&"}return t.length>0&&(t=t.substring(0,t.length-1)),t},e}();o.NetBase=p,cc._RF.pop()},{"../../Model/UserModel":"UserModel","../Platform/PlatformModel":"PlatformModel","../UI/UIFacade":"UIFacade","../Utils/SecretUtil":"SecretUtil","./HttpRequest":"HttpRequest"}],Net:[function(e,t,o){"use strict";cc._RF.push(t,"57bcdj5sslNcpZfhRa6+PpA","Net");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ErrorCode=o.Net=void 0;var r=e("./NetBase"),a=e("./NetApi"),s=e("../../Model/UserModel"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.login=function(e){var t={gameId:e.userId?e.userId:"",uid:e.pltId?e.pltId:"",openid:e.openid?e.openid:"",sessionKey:"",version:e.activeId?e.activeId:"",nickname:e.nickname?e.nickname:"",avatar:e.avatar?e.avatar:"",activeId:e.activeId?e.activeId:"",sAppId:e.sAppId?e.sAppId:""};return this.post(a.NetApi.Apis.login,{},t)},t.startBattle=function(){var e={gameId:s.UserModel.inst.getGameId()};return this.post(a.NetApi.Apis.startBattle,{},e,{"Content-Type":"application/json"},5,!0)},t.endBattle=function(){var e={gameId:s.UserModel.inst.getGameId()};return this.post(a.NetApi.Apis.endBattle,{},e,{"Content-Type":"application/json"},5,!0)},t.collectElement=function(e){var t={gameId:s.UserModel.inst.getGameId(),itemId:e};return this.post(a.NetApi.Apis.collectElement,{},t,{"Content-Type":"application/json"},5,!0)},t.finishGuide=function(){var e={gameId:s.UserModel.inst.getGameId(),token:s.UserModel.inst.getToken(),guideId:1};return this.post(a.NetApi.Apis.finishGuide,{},e,{"Content-Type":"application/json"},5,!0)},t.useItem=function(e){var t={gameId:s.UserModel.inst.getGameId(),itemId:e.itemId,num:e.num};return this.post(a.NetApi.Apis.useItem,{},t,{"Content-Type":"application/json"},5,!0)},t.addItem=function(e){var t={gameId:s.UserModel.inst.getGameId(),items:e.itemString,itemid:e.itermID,count:e.num,activeid:e.activeId,toMail:!1,sign:"11"};return this.post(a.NetApi.Apis.additem,{},t,{"Content-Type":"application/json"},5,!0)},t.gmAdditem=function(e){var t={gameId:s.UserModel.inst.getGameId(),items:e};return this.post(a.NetApi.Apis.gmAdditem,{},t)},t.shareItem=function(e){var t={gameId:s.UserModel.inst.getGameId(),itemId:e};return this.post(a.NetApi.Apis.shareItem,{},t,{"Content-Type":"application/json"},5,!0)},t.drawShareItem=function(e){var t={gameId:s.UserModel.inst.getGameId(),shareGameId:e.shareGameId,shareId:e.shareId};return this.post(a.NetApi.Apis.drawShareItem,{},t,{"Content-Type":"application/json"},5,!0)},t.exchange=function(e){var t={gameId:s.UserModel.inst.getGameId(),code:e.code,items:e.items};return this.post(a.NetApi.Apis.exchange,{},t,{"Content-Type":"application/json"},5,!0)},t.getBackpackInfo=function(){var e={gameId:s.UserModel.inst.getGameId()};return this.post(a.NetApi.Apis.getBackpackInfo,{},e,{"Content-Type":"application/json"},5,!0)},t}(r.NetBase);o.Net=c,function(e){e[e.ok=0]="ok",e[e.param_error=1]="param_error",e[e.appid_error=2]="appid_error",e[e.session_key_error=3]="session_key_error",e[e.db_not_ready=10]="db_not_ready",e[e.db_error=11]="db_error",e[e.account_no=1001]="account_no",e[e.account_passwd_error=1002]="account_passwd_error",e[e.account_exist=1003]="account_exist",e[e.account_load_error=1010]="account_load_error",e[e.api_error=2001]="api_error",e[e.api_query_error=2002]="api_query_error",e[e.api_result_error=2003]="api_result_error"}(o.ErrorCode||(o.ErrorCode={})),cc._RF.pop()},{"../../Model/UserModel":"UserModel","./NetApi":"NetApi","./NetBase":"NetBase"}],NodePool:[function(e,t,o){"use strict";cc._RF.push(t,"040c9gg3vJDmYzBE+Z6ypRm","NodePool");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NodePool=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isReady=!1,t._createCount=0,t._warterMark=10,t._res=null,t._nodes=new Array,t}return i(t,e),t.prototype.isReady=function(){return this._isReady},t.prototype.init=function(){var e=this;if(this._isReady)cc.error("already inited!");else{var t=arguments[0],o=null;if(2==arguments.length&&"function"==typeof arguments[1]&&(o=arguments[1]),t instanceof cc.Prefab)return this._res=t,this._isReady=!0,void(o&&o(null,this));"string"!=typeof arguments[0]?console.error("NodePool init error "+arguments[0]):this.loadBundleRes("Prefabs",arguments[0],cc.Prefab,function(t,n){t||(e._res=n,e._isReady=!0),o&&o(t,e)})}},t.prototype.prepareNode=function(e){if(this.isReady)for(var t=0;t<e;++t){var o=cc.instantiate(this._res);this._createCount++,this._nodes.push(o)}else cc.error("node pool not ready!")},t.prototype.getNode=function(){return this.isReady?this._nodes.length>0?this._nodes.pop():(this._createCount++,cc.instantiate(this._res)):null},t.prototype.freeNode=function(e){if(!e||!cc.isValid(e))return cc.error("[ERROR] PrefabPool: freePrefab: isValid node"),void this._createCount--;this._nodes.length>this._warterMark?(this._createCount--,e.destroy()):(e.removeFromParent(!0),e.uuid,e.getParent(),e.cleanup(),this._nodes.push(e))},t.prototype.setWaterMark=function(e){this._warterMark=e},t.prototype.isUnuse=function(){return this._nodes.length>this._createCount&&cc.error("PrefabPool: _nodes.length > _createCount"),this._nodes.length==this._createCount},t.prototype.clear=function(){for(var e=0,t=this._nodes;e<t.length;e++)t[e].destroy();this._createCount-=this._nodes.length,this._nodes.length=0,this._res.decRef()},t}(e("../../Framework/Res/ResKeeper").default);o.NodePool=r,cc._RF.pop()},{"../../Framework/Res/ResKeeper":"ResKeeper"}],NpcBase:[function(e,t,o){"use strict";cc._RF.push(t,"6c7ecraPg5G9plV0DJmbusa","NpcBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NpcBase=void 0;var a=e("../Framework/Res/ResKeeper"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveSpeed=0,t.maxHp=100,t.hp=100,t.atk=10,t.crit=0,t.critDmg=2,t.reduce=0,t.touchDelta=.1,t.pickRadius=100,t}return i(t,e),r([l({tooltip:"\u79fb\u52a8\u901f\u5ea6"})],t.prototype,"moveSpeed",void 0),r([l({tooltip:"\u6700\u5927\u751f\u547d\u503c"})],t.prototype,"maxHp",void 0),r([l({tooltip:"\u5f53\u524d\u751f\u547d\u503c"})],t.prototype,"hp",void 0),r([l({tooltip:"\u653b\u51fb\u529b"})],t.prototype,"atk",void 0),r([l({tooltip:"\u66b4\u51fb\u7387"})],t.prototype,"crit",void 0),r([l({tooltip:"\u66b4\u51fb\u4f24\u5bb3"})],t.prototype,"critDmg",void 0),r([l({tooltip:"\u4f24\u5bb3\u51cf\u514d"})],t.prototype,"reduce",void 0),r([l({tooltip:"\u4f24\u5bb3\u95f4\u9694"})],t.prototype,"touchDelta",void 0),r([l({tooltip:"\u62fe\u53d6\u534a\u5f84"})],t.prototype,"pickRadius",void 0),r([c],t)}(a.default);o.NpcBase=p,cc._RF.pop()},{"../Framework/Res/ResKeeper":"ResKeeper"}],PetComponent:[function(e,t,o){"use strict";cc._RF.push(t,"4978enomA5Li7LOnxyWcndh","PetComponent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../../Controller/TableMgr"),c=e("../../Define/EventId"),l=e("../../Framework/Audio/AudioMgr"),p=e("../../Framework/Event/EventMgr"),u=e("../../Model/GameModel"),d=e("../../Model/GodPetModel"),h=e("../NpcBase"),f=e("../Weapon/WeaponBase"),_=cc._decorator,y=_.ccclass,g=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game=u.GameModel.inst,t.spPet=null,t.spRideState=null,t._stateMachine=null,t._state=null,t._weapon=null,t}return i(t,e),Object.defineProperty(t.prototype,"weapon",{get:function(){return this._weapon},set:function(e){this._weapon=e},enumerable:!1,configurable:!0}),t.prototype.start=function(){var e,t=this;this._stateMachine=((e={})[a.Idle]=new v(this),e[a.Atk]=new M(this),e),this._state=this._stateMachine[a.Idle],this.loadBundleRes("Prefabs","/Game/Weapon/weaponCommonPet",cc.Prefab,function(e,o){var n=cc.instantiate(o);n.setParent(t.node),t._weapon=n.getComponent(f.WeaponBase)}),this.spPet=this.getComponent(sp.Skeleton),this.spRideState=this.spPet.getState(),this.spRideState.data.defaultMix=.2,this.moveSpeed=d.GodPetModel.inst.cur.speed},t.prototype.onEnable=function(){p.EVENT.on(c.EventId.ON_GAME_PAUSE,this.pause,this),p.EVENT.on(c.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.onDisable=function(){p.EVENT.off(c.EventId.ON_GAME_PAUSE,this.pause,this),p.EVENT.off(c.EventId.ON_GAME_RESUME,this.resume,this)},t.prototype.pause=function(){this.spPet.timeScale=0},t.prototype.resume=function(){this.spPet.timeScale=1},t.prototype.switchState=function(e){this._state&&this._state.onEnd(),this._state=this._stateMachine[e],this._state.onStart()},t.prototype.playAnimation=function(e,t,o){if(void 0===t&&(t=!0),e!=this.spPet.animation){var n=this.spPet.setAnimation(0,e,t);return o&&this.spPet.setTrackCompleteListener(n,o),n}},t.prototype.updateScale=function(e){var t=this.node;e>0&&t.scaleX>0?t.scaleX*=-1:e<0&&t.scaleX<0&&(t.scaleX*=-1)},t.prototype.update=function(e){this.game.isPause||this._state.update(e)},r([y],t)}(h.NpcBase));o.default=g,function(e){e[e.Idle=0]="Idle",e[e.Atk=1]="Atk"}(a||(a={}));var m=function(e){this.pet=null,this.pet=e},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=a.Idle,t._v2=cc.v2(),t._dur_atk=0,t._dur_idle=0,t._atkSpeed=Number(s.TABLE.getGlobal("GodPet_AtkSpeed")),t}return i(t,e),t.prototype.onStart=function(){},t.prototype.onEnd=function(){},t.prototype.update=function(e){var t=this.pet.node.getPosition(),o=this.pet.game.player.node.getPosition(),n=cc.Vec2.subtract(this._v2,o,t),i=n.len();if(i>150){this._dur_idle=0;var r=this.pet.moveSpeed*e;i>500?r*=1.2:i<300&&(r*=.8);var s=-n.signAngle(cc.Vec2.RIGHT),c=Math.cos(s)*r,l=Math.sin(s)*r;this.pet.node.x+=c,this.pet.node.y+=l,this.pet.updateScale(c,l),this.pet.playAnimation("run")}else this._dur_idle+=e,this._dur_idle>.2&&this.pet.playAnimation("idle");this._dur_atk+=e,this._dur_atk>=this._atkSpeed&&(this._dur_atk=0,this.pet.switchState(a.Atk))},t}(m),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=a.Atk,t._v2=cc.v2(),t._target=null,t._atking=!1,t._search=cc.v2(Number(s.TABLE.getGlobal("GodPet_SearchMaxX")),Number(s.TABLE.getGlobal("GodPet_SearchMaxY"))),t}return i(t,e),t.prototype.onStart=function(){var e=this;this.searchTarget(),this.pet.spPet.setEventListener(function(t,o){"atk"==o.data.name&&e.fire()}),this.pet.spPet.setCompleteListener(function(t){"attack"==t.animation.name&&e.atkEnd()})},t.prototype.onEnd=function(){},t.prototype.atk=function(){l.AudioMgr.inst.playEffectByName("fire"),this._atking=!0,this.pet.spPet.setAnimation(0,"attack",!1)},t.prototype.atkEnd=function(){this._atking=!1,this._target=null,this.searchTarget()},t.prototype.searchTarget=function(){if(this._target=this.pet.game.findNearMonsters(1)[0],null!=this._target&&null!=this._target.parent){var e=this.pet.game.player.node.position,t=this._target.position,o=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);o>this._search.x&&n>this._search.y&&this.pet.switchState(a.Idle)}else this.pet.switchState(a.Idle)},t.prototype.fire=function(){var e=this,t=cc.v2(this.pet.node.scaleX<0?1:-1);this.pet.weapon.fire({target:this.pet.node,direct:t,atkEnd:function(){e.atkEnd()}})},t.prototype.update=function(e){if(!this._atking)if(null!=this._target&&null!=this._target.parent){var t=this.pet.node.position,o=this._target.position;if(this._v2.x=o.x-t.x+(t.x>o.x?100:-100),this._v2.y=o.y-t.y-100,this._v2.len()<20)return this.pet.updateScale(o.x-t.x,0),void this.atk();var n=this.pet.moveSpeed*e,i=Math.atan2(this._v2.y,this._v2.x),r=Math.cos(i)*n,s=Math.sin(i)*n;this.pet.node.x+=r,this.pet.node.y+=s,this.pet.updateScale(r,s),this.pet.playAnimation("run")}else this.pet.switchState(a.Idle)},t}(m);cc._RF.pop()},{"../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Model/GameModel":"GameModel","../../Model/GodPetModel":"GodPetModel","../NpcBase":"NpcBase","../Weapon/WeaponBase":"WeaponBase"}],PickUpBase:[function(e,t,o){"use strict";cc._RF.push(t,"13c7aEDElZFI5ajF3qSypez","PickUpBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/GameItemBase"),s=e("../../../Define/StaticData"),c=e("../../../Model/GameModel"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._game=c.GameModel.inst,t._moveSpeed=200,t._moveSpeedMax=500,t._isPick=!1,t._v2=cc.v2(),t}return i(t,e),t.prototype.reuse=function(){this._moveSpeed=200,this._isPick=!1},t.prototype.onPickUp=function(){},t.prototype.start=function(){this.schedule(this.updatePick.bind(this),.2)},t.prototype.updatePick=function(){if(!this._isPick){var e=this._game.player.node.position,t=cc.v2(e.x,e.y+40),o=this.node.position,n=this._game.player.pickRadius;cc.Vec2.distance(t,o)<n&&(this._isPick=!0)}},t.prototype.update=function(e){if(!this._game.isPause)if(this._v2.x=this.node.x-s.StaticData.mainCamera.node.x,this._v2.y=this.node.y-s.StaticData.mainCamera.node.y,this._v2.x>s.StaticData.maxX||this._v2.x<s.StaticData.minX||this._v2.y>s.StaticData.maxY||this._v2.y<s.StaticData.minY)this.node.opacity=0;else if(this.node.opacity=255,this._isPick){var t=this._game.player.node.position,o=this.node.position;if(cc.Vec2.distance(t,o)<25)return this.onPickUp(),void this.recycle();var n=Math.atan2(t.y-o.y,t.x-o.x),i=this._moveSpeed*e,r=Math.cos(n)*i,a=Math.sin(n)*i;this.node.x+=r,this.node.y+=a,this._moveSpeed+=300*e,this._moveSpeed>this._moveSpeedMax&&(this._moveSpeed=this._moveSpeedMax)}},r([p],t)}(a.GameItemBase));o.default=u,cc._RF.pop()},{"../../../Controller/GameItemBase":"GameItemBase","../../../Define/StaticData":"StaticData","../../../Model/GameModel":"GameModel"}],PickUpBox:[function(e,t,o){"use strict";cc._RF.push(t,"5646fhnwTNBC6XiEINsoVmZ","PickUpBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/UIDefs"),s=e("../../../Framework/UI/UIMgr"),c=e("./PickUpBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onPickUp=function(){s.default.inst.open(a.UIType.EliteBox)},r([p],t)}(c.default));o.default=u,cc._RF.pop()},{"../../../Define/UIDefs":"UIDefs","../../../Framework/UI/UIMgr":"UIMgr","./PickUpBase":"PickUpBase"}],PickUpEquip:[function(e,t,o){"use strict";cc._RF.push(t,"5d2dfp1TOdADbJHC2e/mO+5","PickUpEquip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/UIDefs"),s=e("../../../Framework/Audio/AudioMgr"),c=e("../../../Framework/UI/UIMgr"),l=e("./PickUpBase"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t._sid=-1,t._icon=-1,t._quality=-1,t}return i(t,e),t.prototype.init=function(e){this._sid=e.id,this._icon=e.icon,this._quality=e.quality,this.spine.setSkin("zbtb"+this._icon);var t=this._quality+1;t>5&&(t=5),this.spine.setAnimation(0,"idle"+t,!0)},t.prototype.onPickUp=function(){s.AudioMgr.inst.playEffectByName("getEequip"),c.default.inst.open(a.UIType.FightEquip,this._sid)},r([d(sp.Skeleton)],t.prototype,"spine",void 0),r([u],t)}(l.default);o.default=h,cc._RF.pop()},{"../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/UI/UIMgr":"UIMgr","./PickUpBase":"PickUpBase"}],PickUpExp:[function(e,t,o){"use strict";cc._RF.push(t,"f3ad2ply5FF/YWg/ZbYnwOm","PickUpExp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Audio/AudioMgr"),s=e("../../../Model/MagnetModel"),c=e("./PickUpBase"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addExp=1,t}return i(t,e),t.prototype.updatePick=function(){if(!this._isPick)if(s.MagnetModel.inst.isActive())this._isPick=!0;else{var e=this._game.player.node.position,t=cc.v2(e.x,e.y+40),o=this.node.position,n=this._game.player.pickRadius;cc.Vec2.distance(t,o)<n&&(this._isPick=!0)}},t.prototype.onPickUp=function(){a.AudioMgr.inst.playEffectByName("getExp"),this._game.exp+=this.addExp},r([u],t.prototype,"addExp",void 0),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Model/MagnetModel":"MagnetModel","./PickUpBase":"PickUpBase"}],PickUpFood:[function(e,t,o){"use strict";cc._RF.push(t,"9f1d0lpFWpKuKQDbRgtcp3Q","PickUpFood");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Model/WeaponModel"),s=e("./PickUpBase"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addHp=.15,t}return i(t,e),t.prototype.onPickUp=function(){var e=this.addHp*this._game.player.maxHp,t=a.WeaponModel.inst.magicAttrs.a_foodhp_p;t>0&&(e+=e*t),this._game.player.hp+=e},r([p],t.prototype,"addHp",void 0),r([l],t)}(s.default);o.default=u,cc._RF.pop()},{"../../../Model/WeaponModel":"WeaponModel","./PickUpBase":"PickUpBase"}],PlatformModel:[function(e,t,o){"use strict";cc._RF.push(t,"c124ffrgNBDPLlst5z33qv9","PlatformModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PlatformType=void 0;var r,a=e("../Storage/LocalStorageMgr"),s=e("../Utils/Singleton"),c=e("../Utils/Utils");(function(e){e[e.Local=0]="Local",e[e.None=1]="None",e[e.SaaS=2]="SaaS"})(r=o.PlatformType||(o.PlatformType={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._type=r.Local,t._materialList=null,t._prizeInfoList=null,t._stratTime=0,t._endTime=0,t.serverUrl="",t.signIn=0,t.pageRes=null,t._activeInfo=null,t}return i(t,e),t.prototype.initData=function(e,t){e&&(e.userInfo&&(this._userInfo=e.userInfo),e.authInfo&&(this._authInfo=e.authInfo),e.activeInfo&&(this._activeInfo=e.activeInfo),e.serverUrl&&(this.serverUrl=e.serverUrl),e.pageRes&&(this.pageRes=e.pageRes,window.pageUI&&(window.pageUI=e.pageRes.pageUI)),this._type=t,this._platformId=e.id,a.LocalStorageMgr.setHashID(e.id+""),c.default.initServerTime(e.serverTime))},t.prototype.getPlatType=function(){return this._type},t.prototype.getPlatformId=function(){return this._platformId},t.prototype.getAvatarUrl=function(){return this._authInfo.avatar},t.prototype.getNickName=function(){return this._authInfo.nickname},t.prototype.getAuthInfo=function(){return this._authInfo},t.prototype.getUserId=function(){return this._authInfo.userId},t.prototype.getPlatId=function(){return this._authInfo.pltId},t.prototype.getAppId=function(){return this._authInfo.sAppId},t.prototype.getActiveId=function(){return this._authInfo.activeId},t.prototype.getEndTime=function(){return this._activeInfo.endTime},t.prototype.getSign=function(){return this._authInfo.sign},t.prototype.getServerUrl=function(){return this.serverUrl},t.prototype.checkActiveEnd=function(){return c.default.getServerTime()>=t.inst.getEndTime()},t}(s.Singleton());o.default=l,cc._RF.pop()},{"../Storage/LocalStorageMgr":"LocalStorageMgr","../Utils/Singleton":"Singleton","../Utils/Utils":"Utils"}],Platform:[function(e,t,o){"use strict";cc._RF.push(t,"66bd7pnJEFEMJe6oxWWtpH8","Platform");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.Platform=void 0;var r=e("../../Define/EventId"),a=e("../../Model/UserModel"),s=e("../Event/EventMgr"),c=e("../Network/Net"),l=e("../UI/UIFacade"),p=e("../Utils/SecretUtil"),u=e("./PlatformModel"),d=function(){function e(){}return e.init=function(){return n(this,void 0,void 0,function(){return i(this,function(){return[2]})})},e.login=function(){return n(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:switch(u.default.inst.getPlatType()){case u.PlatformType.SaaS:return[3,1]}return[3,3];case 1:return[4,this.loginSaaS()];case 2:return e.sent(),[3,4];case 3:return[3,4];case 4:return[2]}})})},e.loginSaaS=function(){return n(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return e=u.default.inst.getAuthInfo(),[4,c.Net.login(e).then(function(e){cc.log("\u6e38\u620f\u767b\u5f55\u6210\u529f:",e),a.UserModel.inst.setRoleData(e),p.default.InitEncryptInfo(a.UserModel.inst.getToken(),a.UserModel.inst.getGameId()),s.EVENT.emit(r.EventId.ON_LOGIN_RET)}).catch(function(e){cc.log("erroe:",e),l.UIFacade.showToast("\u767b\u5f55\u5931\u8d25")})];case 1:return t.sent(),[2]}})})},e.getEnterParam=function(e){switch(u.default.inst.getPlatType()){case u.PlatformType.SaaS:break;default:var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(t);if(null!=o)return decodeURIComponent(o[2])}},e}();o.Platform=d,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Model/UserModel":"UserModel","../Event/EventMgr":"EventMgr","../Network/Net":"Net","../UI/UIFacade":"UIFacade","../Utils/SecretUtil":"SecretUtil","./PlatformModel":"PlatformModel"}],PlayerComponent:[function(e,t,o){"use strict";cc._RF.push(t,"f8e01rnNtZNs7Yq0nnXEQZo","PlayerComponent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SpineAnimation=o.TrackIndex=void 0;var a,s,c=e("../../Controller/GameItemMgr"),l=e("../../Controller/LayerMgr"),p=e("../../Controller/TableMgr"),u=e("../../Define/EventId"),d=e("../../Framework/Audio/AudioMgr"),h=e("../../Framework/Event/EventMgr"),f=e("../../Framework/VM"),_=e("../../Model/GameModel"),y=e("../../Model/GodPetModel"),g=e("../../Model/GodRideModel"),m=e("../../Model/GodSkinModel"),v=e("../../Model/GodWeaponModel"),M=e("../../Model/WeaponModel"),b=e("../NpcBase"),I=e("../Weapon/WeaponBase"),E=e("./PetComponent"),O=cc._decorator,S=O.ccclass,w=O.property;(function(e){e[e.normal=1]="normal",e[e.move=0]="move"})(a=o.TrackIndex||(o.TrackIndex={})),function(e){e.Idle="idle",e.Run="run",e.Attack="attack1b",e.Dead="die"}(s=o.SpineAnimation||(o.SpineAnimation={}));var R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delta=[],t.deltaRideType=[],t.deltaPet=null,t.material=null,t._rBody=null,t._collider=null,t._basis=null,t._materialVariants=[],t._nodePet=null,t._spRole=null,t._spRoleState=null,t._spRide=null,t._spRideState=null,t._rideType=0,t._attack_stamp=0,t._attack_interval=0,t._velocity=cc.v2(),t._v3=cc.v3(),t._game=_.GameModel.inst,t._revive=0,t._hps=0,t._hlu=0,t._hpm3=0,t._nmHps=0,t._dodgP=0,t._dodgbyhit=0,t._sDamage=0,t._touchStamp=0,t._reviveStamp=0,t._hpsStamp=0,t._hpm3Stamp=0,t._nmHpsStamp=0,t._dodgStamp=0,t._hitTime=0,t._weapon=null,t._contact_monster_atk=0,t}return i(t,e),t.prototype.onLoad=function(){this._rBody=this.node.getComponent(cc.RigidBody),this._collider=this.node.getComponent(cc.PhysicsCollider),this._basis={moveSpeed:this.moveSpeed,maxHp:this.maxHp,hp:this.hp,atk:this.atk,crit:this.crit,critDmg:this.critDmg,reduce:this.reduce,touchDelta:this.touchDelta,pickRadius:this.pickRadius},this._attack_interval=Number(p.TABLE.getGlobal("Attack_interval"))},t.prototype.onBeginContact=function(e,t,o){var n=o.tag;this.onHit(n),this._contact_monster_atk+=n},t.prototype.onEndContact=function(e,t,o){var n=o.tag;this._contact_monster_atk-=n},t.prototype.onEnable=function(){f.VM.bindPath("GameModel._level",this.updateLevel,this),h.EVENT.on(u.EventId.ON_GAME_PAUSE,this.pause,this),h.EVENT.on(u.EventId.ON_GAME_RESUME,this.resume,this),h.EVENT.on(u.EventId.ON_GAME_PLAYER_REVIVE,this.onRevive,this),h.EVENT.on(u.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},t.prototype.onDisable=function(){f.VM.unbindPath("GameModel._level",this.updateLevel,this),h.EVENT.off(u.EventId.ON_GAME_PAUSE,this.pause,this),h.EVENT.off(u.EventId.ON_GAME_RESUME,this.resume,this),h.EVENT.off(u.EventId.ON_GAME_PLAYER_REVIVE,this.onRevive,this),h.EVENT.off(u.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateAttrs,this)},t.prototype.pause=function(){this._spRole&&(this._spRole.timeScale=0),this._spRide&&(this._spRide.timeScale=0)},t.prototype.resume=function(){this._spRole&&(this._spRole.timeScale=1),this._spRide&&(this._spRide.timeScale=1)},t.prototype.setHp=function(e){e>this.maxHp&&(e=this.maxHp),this.hp=e},t.prototype.setDefaultMaterial=function(){this._spRole.setMaterial(0,this._materialVariants[0])},t.prototype.setHitMaterial=function(){this._spRole.getMaterial(0)!=this._materialVariants[1]&&this._spRole.setMaterial(0,this._materialVariants[1])},t.prototype.onHit=function(e,t){if(void 0===t&&(t=!1),!this._game.isGuide&&!(this._game.immune>0||e<=0)){if(this._v3.x=this.node.position.x,this._v3.y=this.node.position.y+40,Math.random()<this._dodgP+this._dodgStamp)return this._dodgStamp=0,void c.default.inst.generateHitMiss(this._v3);this._dodgbyhit>0&&(this._dodgStamp+=this._dodgbyhit);var o=this.reduce+this._sDamage;e-=Math.round(o*e),this.setHp(this.hp-e),this.hp<=0&&this.onDead(),this._hitTime=.5,this.setHitMaterial(),t?c.default.inst.generateHitEffect(this._v3):c.default.inst.generateHitBeEffect(this._v3),h.EVENT.emit(u.EventId.ON_GAME_PLAYER_HIT)}},t.prototype.onDead=function(){var e=this;h.EVENT.emit(u.EventId.ON_GAME_PAUSE),this._spRole&&(this._spRole.timeScale=1),this._spRide&&(this._spRide.timeScale=1);var t=this.setRoleAnimation(a.normal,s.Dead,!1);this._spRole.setTrackCompleteListener(t,function(){e._revive>0&&e._reviveStamp<e._revive?e.onRevive():h.EVENT.emit(u.EventId.ON_GAME_RESULT)})},t.prototype.onRevive=function(){var e=this;d.AudioMgr.inst.playEffectByName("revive"),this._revive>0&&this._reviveStamp<this._revive?(this.hp=.5*this.maxHp,this._reviveStamp++):(this.hp=this.maxHp,_.GameModel.inst.revive++),c.default.inst.generateRevive(function(){c.default.inst.generateHpBar2(_.GameModel.inst.player,-20),_.GameModel.inst.immune++,cc.tween(e.node).then(cc.tween().to(.2,{opacity:0},{easing:"sineOut"}).to(.2,{opacity:255},{easing:"sineIn"})).repeat(5).call(function(){_.GameModel.inst.immune--}).start(),e.setRoleAnimation(a.normal,s.Idle,!0,!1),h.EVENT.emit(u.EventId.ON_GAME_RESUME)})},t.prototype.updateLevel=function(){this._hlu>0&&this.setHp(this.hp+this._hlu)},t.prototype.updateAttrs=function(){this.atk=this._basis.atk,this.maxHp=this._basis.maxHp,this.moveSpeed=this._basis.moveSpeed,this.pickRadius=this._basis.pickRadius;var e=M.WeaponModel.inst,t=e.magicAttrs.a_atk_p;t>0&&(this.atk+=this.atk*t);var o=e.magicAttrs.a_atk_v;o>0&&(this.atk+=o);var n=e.magicAttrs.a_hp_p;n>0&&(this.maxHp+=this.maxHp*n);var i=e.magicAttrs.a_hp_v;i>0&&(this.maxHp+=i);var r=e.magicAttrs.a_movespeed_v;r>0&&(this.moveSpeed+=r);var a=e.magicAttrs.a_pickrange_p;a>0&&(this.pickRadius*=1+a),g.GodRideModel.inst.cur&&(this.moveSpeed+=g.GodRideModel.inst.cur.speed,this.atk+=g.GodRideModel.inst.cur.atk,this.maxHp+=g.GodRideModel.inst.cur.hp),m.GodSkinModel.inst.cur&&(this.atk+=m.GodSkinModel.inst.cur.atk,this.maxHp+=m.GodSkinModel.inst.cur.hp,this.reduce+=m.GodSkinModel.inst.cur.reduce),this._revive=e.magicAttrs.a_revive_p||0,this._hps=e.magicAttrs.a_hps_p||0,this._hlu=e.magicAttrs.a_hlu_p||0,this._hpm3=e.magicAttrs.a_hpm3_p||0,this._nmHps=e.magicAttrs.a_nm_hps_p||0,this._dodgP=e.magicAttrs.a_dodg_p||0,this._dodgbyhit=e.magicAttrs.a_dodgbyhit_p||0,this._sDamage=e.magicAttrs.s_damage_p||0},t.prototype.updateVelocity=function(e,t){this._velocity.x=e,this._velocity.y=t,e<0?this.node.scaleX=1:e>0&&(this.node.scaleX=-1)},t.prototype.updatePlayer=function(){var e=this;_.GameModel.inst.loadRef++,this.loadBundleRes("Prefabs","/Game/GodSkin/skin0",function(t,o){var n=cc.instantiate(o);n.setParent(e.node),e._spRole=n.getComponent(sp.Skeleton),e._spRole.setSkin("suit"+m.GodSkinModel.inst.curIdx),e._spRole.defaultAnimation=s.Idle,e._spRoleState=e._spRole.getState(),e._spRoleState.data.defaultMix=.2,e._spRoleState.setAnimation(a.normal,s.Idle,!0),e._materialVariants=[cc.MaterialVariant.create(e.material,e._spRole),cc.MaterialVariant.create(e.material,e._spRole)],e._materialVariants[1].define("IS_HIT",!0),e._spRole.setMaterial(0,e._materialVariants[0]);var i=new cc.Node("weapon"),r=e._spRole.attachUtil;if(r.generateAllAttachedNodes(),r.getAttachedNodes("target_lram")[0].addChild(i),e.loadBundleRes("Prefabs",v.GodWeaponModel.inst.getPrefabUrl(v.GodWeaponModel.inst.curIdx),cc.Prefab,function(e,t){var o=cc.instantiate(t);o.setParent(i);var n=o.getComponent(sp.Skeleton);n.setAnimation(0,"idle1",!0),n.defaultAnimation="idle1"}),g.GodRideModel.inst.curIdx>0)_.GameModel.inst.loadRef++,e.loadBundleRes("Prefabs",g.GodRideModel.inst.getPrefabUrl(g.GodRideModel.inst.curIdx),cc.Prefab,function(t,o){_.GameModel.inst.loadRef--;var n=cc.instantiate(o);n.setParent(e.node),e._spRide=n.getComponent(sp.Skeleton),e._spRideState=e._spRide.getState(),e._spRideState.data.defaultMix=.2,e._spRole.node.removeFromParent(),e._rideType=e.deltaRideType[g.GodRideModel.inst.curIdx-1];var r=e.delta[e._rideType];e._spRole.node.position=cc.v3(r.x,r.y,1),e._spRole.node.scale=1,e._spRole.node.angle=r.z,e.setRoleAnimation(a.move,"ride"+e._rideType,!0),n.scale=r.w;var s=e._spRide.attachUtil;s.generateAllAttachedNodes();var c=s.generateAttachedNodes("ride")[0];c.addChild(e._spRole.node),cc.sys.isNative&&e.scheduleOnce(function(){var e=i.convertToWorldSpaceAR(cc.Vec2.ZERO);e.x+=c._bone.worldX*r.w,e.y+=c._bone.worldY*r.w;var t=i.parent.convertToNodeSpaceAR(e);i.setPosition(t)})});else{var c=e.deltaPet;e._spRole.node.parent=e.node,e._spRole.node.position=cc.v3(c.x,c.y,1),e._spRole.node.scale=c.w,e._spRole.node.angle=c.z}y.GodPetModel.inst.curIdx>0&&(_.GameModel.inst.loadRef++,e.loadBundleRes("Prefabs",y.GodPetModel.inst.getPrefabUrl(y.GodPetModel.inst.curIdx),cc.Prefab,function(t,o){_.GameModel.inst.loadRef--;var n=cc.instantiate(o);n.setParent(e.node.parent),n.setSiblingIndex(0),n.addComponent(E.default),n.x+=100;var i=e.delta[0];n.scale=i.w,e._nodePet=n})),_.GameModel.inst.loadRef--}),_.GameModel.inst.loadRef++,this.loadBundleRes("Prefabs","/Game/Weapon/weaponCommon",cc.Prefab,function(t,o){_.GameModel.inst.loadRef--;var n=cc.instantiate(o);n.setParent(e.node),e._weapon=n.getComponent(I.WeaponBase)}),this.updateAttrs(),this.hp=this.maxHp},t.prototype.clearPlayer=function(){this._contact_monster_atk=0,this.node.removeAllChildren(),this._nodePet&&this._nodePet.destroy(),this._weapon.destroy(),this.releaseAutoRes()},t.prototype.setRoleAnimation=function(e,t,o,n){if(void 0===n&&(n=!0),n){var i=this._spRole.getCurrent(e);if(i&&i.animation.name==t)return i}return this._spRole.setAnimation(e,t,o)},t.prototype.setRideAnimation=function(e,t,o,n){if(void 0===n&&(n=!0),n){var i=this._spRide.getCurrent(e);if(i&&i.animation.name==t)return i}return this._spRide.setAnimation(e,t,o)},t.prototype.update=function(e){var t=this;if(!(_.GameModel.inst.isPause||null==this._spRole||this.hp<=0)){if(this._attack_stamp+=e,this._attack_stamp>=this._attack_interval){this._attack_stamp-=this._attack_interval;var o;o=null==this._spRide?this.setRoleAnimation(a.normal,s.Attack,!1,!1):this.setRoleAnimation(a.normal,"attack"+(this._rideType+1)+"b",!1,!1),this._spRole.setTrackCompleteListener(o,function(){t._spRoleState.clearTrack(a.normal)}),this._weapon.fire({target:this.node})}0!=this._velocity.x&&(this.node.x+=this.moveSpeed*this._velocity.x*e),0!=this._velocity.y&&(this.node.y+=this.moveSpeed*this._velocity.y*e);var n=this.node.position,i=l.LayerMgr.inst;i.PlayerBulletLayer.setPosition(n.x,n.y),i.PlayerBulletLayer2.setPosition(n.x,n.y),h.EVENT.emit(u.EventId.ON_GAME_UPDATE_ROLE_POS,n);var r=this._velocity.len()>.1;if(r?null==this._spRide?this.setRoleAnimation(a.move,s.Run,!0):this.setRideAnimation(a.move,s.Run,!0):null==this._spRide?this.setRoleAnimation(a.move,s.Idle,!0):this.setRideAnimation(a.move,s.Idle,!0),this._touchStamp+=e,this._touchStamp>=this.touchDelta&&(this._touchStamp-=this.touchDelta,this._contact_monster_atk>0&&this.onHit(this._contact_monster_atk,!0)),this._hps>0&&(this._hpsStamp+=e,this._hpsStamp>=1&&(this._hpsStamp-=1,this.setHp(this.hp+this._hps))),this._hpm3>0&&(this._hpm3Stamp+=e,this._hpm3Stamp>=60&&(this._hpm3Stamp-=60,this.setHp(this.hp+this._hpm3))),this._nmHps>0)if(r)this._nmHpsStamp=0;else if(this._nmHpsStamp+=e,this._nmHpsStamp>1){var c=this._nmHps*this.maxHp*e;this.setHp(this.hp+c)}this._hitTime>0&&(this._hitTime-=e,this._hitTime<=0&&this.setDefaultMaterial())}},r([w([cc.Vec4])],t.prototype,"delta",void 0),r([w([cc.Integer])],t.prototype,"deltaRideType",void 0),r([w(cc.Vec4)],t.prototype,"deltaPet",void 0),r([w(cc.Material)],t.prototype,"material",void 0),r([S],t)}(b.NpcBase);o.default=R,cc._RF.pop()},{"../../Controller/GameItemMgr":"GameItemMgr","../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/VM":"VM","../../Model/GameModel":"GameModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel","../../Model/WeaponModel":"WeaponModel","../NpcBase":"NpcBase","../Weapon/WeaponBase":"WeaponBase","./PetComponent":"PetComponent"}],PlayerCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"08253TD6CNFPrzd48/7fvCO","PlayerCtrl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Controller/GameBase"),s=e("../Controller/LayerMgr"),c=e("../Model/GameModel"),l=e("./Component/PlayerComponent"),p=e("./Joystick"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t.joystick=null,t._player=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.pause=function(){this.joystick.node.active=!1,this.joystick.onTouchEnd(null),this.onJoystickStop()},t.prototype.resume=function(){this.joystick.node.active=!0},t.prototype.gameStart=function(){this._player=cc.instantiate(this.player).getComponent(l.default),this._player.node.setParent(s.LayerMgr.inst.PlayerLayer),this._player.updatePlayer(),this.joystick.setMoveCallback(this.onJoystickMove.bind(this)),this.joystick.setStopCallback(this.onJoystickStop.bind(this)),c.GameModel.inst.player=this._player},t.prototype.gameOver=function(){this._player.clearPlayer(),this._player.node.destroy(),this._player=null},t.prototype.onJoystickMove=function(e,t){var o=e.x*t,n=e.y*t;this._player.updateVelocity(o,n);var i=c.GameModel.inst;i.orientation.x=e.x,i.orientation.y=e.y},t.prototype.onJoystickStop=function(){this._player&&this._player.updateVelocity(0,0)},r([h(cc.Prefab)],t.prototype,"player",void 0),r([h(p.default)],t.prototype,"joystick",void 0),r([d],t)}(a.GameBase);o.default=f,cc._RF.pop()},{"../Controller/GameBase":"GameBase","../Controller/LayerMgr":"LayerMgr","../Model/GameModel":"GameModel","./Component/PlayerComponent":"PlayerComponent","./Joystick":"Joystick"}],RTAudioSourceMgr:[function(e,t,o){"use strict";cc._RF.push(t,"a3748F5c/NKObWAfRds2HSR","RTAudioSourceMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./RTAudioSource"),s=e("../Storage/LocalStorageMgr"),c=e("../../Define/LocalKey"),l=e("../Utils/Singleton"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._allAudios=[],t._audioVolum=new Map,t._audioSwitch=new Map,t}return i(t,e),t.prototype.init=function(){c.LocalKey;var e=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffect,!0);e&&this._audioVolum.set(a.RTAudioSourceType.Effect,parseInt(e));var t=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffectMute,!0);t&&this._audioSwitch.set(a.RTAudioSourceType.Effect,"yes"==t);var o=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusic,!0);o&&this._audioVolum.set(a.RTAudioSourceType.Music,parseInt(o));var n=s.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusicMute,!0);n&&this._audioSwitch.set(a.RTAudioSourceType.Music,"yes"==n)},t.prototype.registerAudio=function(e){this._allAudios.push(e);var t=this._audioVolum.get(e.audioType);t&&(e.volume=t);var o=this._audioSwitch.get(e.audioType);this._muteOne(e,o)},t.prototype.unregisterAudio=function(e){for(var t=0;t<this._allAudios.length;++t)if(this._allAudios[t]==e){this._allAudios.splice(t,1);break}},t.prototype.setMusicVolume=function(e,t){void 0===t&&(t=!1),this._setVolume(e,a.RTAudioSourceType.Music),this._audioVolum.set(a.RTAudioSourceType.Music,e),t&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeMusic,e.toString(),!0)},t.prototype.setEffectVolume=function(e,t){void 0===t&&(t=!1),this._setVolume(e,a.RTAudioSourceType.Effect),this._audioVolum.set(a.RTAudioSourceType.Effect,e),t&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeEffect,e.toString(),!0)},t.prototype.muteAllMusic=function(e,t){void 0===t&&(t=!1),this._audioSwitch.set(a.RTAudioSourceType.Music,e),this._mute(a.RTAudioSourceType.Music,e),t&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeMusicMute,e?"yes":"no",!0)},t.prototype.muteAllEffect=function(e,t){void 0===t&&(t=!1),this._audioSwitch.set(a.RTAudioSourceType.Effect,e),this._mute(a.RTAudioSourceType.Effect,e),t&&s.LocalStorageMgr.setItem(c.LocalKey.AudioVolumeEffectMute,e?"yes":"no",!0)},t.prototype.isMusicMute=function(){return this._audioSwitch.get(a.RTAudioSourceType.Music)},t.prototype.isEffectMute=function(){return this._audioSwitch.get(a.RTAudioSourceType.Effect)},t.prototype._mute=function(e,t){for(var o=0;o<this._allAudios.length;++o){var n=this._allAudios[o];n.audioType==e&&this._muteOne(n,t)}},t.prototype._muteOne=function(e,t){e.mute=t},t.prototype._setVolume=function(e,t){for(var o=0;o<this._allAudios.length;++o){var n=this._allAudios[o];n.audioType==t&&(n.volume=e)}},r([u],t)}(l.Singleton()));o.default=d,cc._RF.pop()},{"../../Define/LocalKey":"LocalKey","../Storage/LocalStorageMgr":"LocalStorageMgr","../Utils/Singleton":"Singleton","./RTAudioSource":"RTAudioSource"}],RTAudioSource:[function(e,t,o){"use strict";cc._RF.push(t,"f9b1cddJtZEEIUJhsBjDbYY","RTAudioSource");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RTAudioSourceType=void 0;var a,s=e("./RTAudioSourceMgr"),c=cc._decorator,l=c.ccclass,p=c.property;(function(e){e[e.Effect=0]="Effect",e[e.Music=1]="Music"})(a=o.RTAudioSourceType||(o.RTAudioSourceType={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioType=a.Effect,t}return i(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),s.default.inst.registerAudio(this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),s.default.inst.unregisterAudio(this)},r([p({type:cc.Enum(a)})],t.prototype,"audioType",void 0),r([l],t)}(cc.AudioSource);o.default=u,cc._RF.pop()},{"./RTAudioSourceMgr":"RTAudioSourceMgr"}],RTClickSound:[function(e,t,o){"use strict";cc._RF.push(t,"54c377Q0zFDrbqStjZfjCne","RTClickSound");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./RTAudioSourceMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundEffect=null,t.soundVolume=1,t}return i(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},t.prototype.onTouch=function(){a.default.inst.isEffectMute()||cc.audioEngine.play(this.soundEffect,!1,this.soundVolume)},r([l(cc.AudioClip)],t.prototype,"soundEffect",void 0),r([l({slide:!0,min:0,max:1,step:.1})],t.prototype,"soundVolume",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./RTAudioSourceMgr":"RTAudioSourceMgr"}],RedDotHandler:[function(e,t,o){"use strict";cc._RF.push(t,"69c52E9GEdK6oiPRR2xKuI7","RedDotHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RedDotHandler=void 0;var a=e("./RedDot"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.key="",t}return i(t,e),t.prototype.onLoad=function(){this.onRedDot(a.RedDot.inst.getRedDot(this.key))},t.prototype.onEnable=function(){this.onRedDot(a.RedDot.inst.getRedDot(this.key)),a.RedDot.inst.on(this.key,this.onRedDot,this)},t.prototype.onDisable=function(){a.RedDot.inst.off(this.key,this.onRedDot,this)},t.prototype.onRedDot=function(e){this.node.opacity=e>0?255:0},r([l],t.prototype,"key",void 0),r([c],t)}(cc.Component);o.RedDotHandler=p,cc._RF.pop()},{"./RedDot":"RedDot"}],RedDotKey:[function(e,t,o){"use strict";cc._RF.push(t,"449fd4+GeRNf4Pm9HrtzgOO","RedDotKey"),Object.defineProperty(o,"__esModule",{value:!0}),o.RedDotKey=void 0;var n=function(){function e(){}return e.DailyTask="DailyTask",e.GodWeaponReward="GodWeaponReward",e.GodRide="GodRide",e.GodWeapon="GodWeapon",e.GodPet="GodPet",e.GodSkin="GodSkin",e.Talent="Talent",e.XiuLian="XiuLian",e.Achievement="Achievement",e}();o.RedDotKey=n,cc._RF.pop()},{}],RedDot:[function(e,t,o){"use strict";cc._RF.push(t,"19b027KVP5EWLORajsj1TOa","RedDot");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.RedDot=o.HEAD=void 0;var r=e("../../Define/RedDotKey"),a=e("../VM");o.HEAD="DOT";var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._RedDotMap={},t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){for(var e in r.RedDotKey)this._RedDotMap[e]=0;a.VM.add(this._RedDotMap,o.HEAD)},t.prototype.getRedDot=function(e){return this._RedDotMap[e]||0},t.prototype.setRedDot=function(e,t){this._RedDotMap[e]=t,this.emit(e,t)},t.prototype.addRef=function(e){var t=this.getRedDot(e)+1;this.setRedDot(e,t),this.emit(e,t)},t.prototype.decRef=function(e){var t=this.getRedDot(e)-1;this.setRedDot(e,t),this.emit(e,t),t<0&&cc.warn("\u7ea2\u70b9\u8ba1\u6570\u5c0f\u4e8e0\u68c0\u67e5\u903b\u8f91, PATH:",e)},t}(cc.EventTarget);o.RedDot=s,cc._RF.pop()},{"../../Define/RedDotKey":"RedDotKey","../VM":"VM"}],RenderToTarget:[function(e,t,o){"use strict";cc._RF.push(t,"f857861KlhDEqAbWFYgu3tg","RenderToTarget");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._target=null,t._renderTarget=null,t.offsetIndex=0,t._childrenMap=new Map,t._childrenOffsetMap=new Map,t._lastPos=null,t}var o;return i(t,e),o=t,Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(e){this._target=e,this.node.activeInHierarchy&&this.onEnable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderTarget",{get:function(){return this._renderTarget},set:function(e){this._renderTarget=e,this.node.activeInHierarchy&&this.onEnable()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.target||(this.target=this.node)},t.prototype.onDestroy=function(){this._childrenMap.clear(),this._childrenOffsetMap.clear()},t.prototype.onEnable=function(){var e=this;null!=this.renderTarget&&(0==this._childrenMap.size&&this._moveOutside(),this._childrenMap.forEach(function(e){e.getComponent(o)?e.active=!0:e.opacity=255}),this.scheduleOnce(function(){e._lastPos=e.renderTarget.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),e.updateChildrenPosition()}),this.target.on(cc.Node.EventType.POSITION_CHANGED,this.updatePosition,this),this.target.on(cc.Node.EventType.SCALE_CHANGED,this.updateScale,this))},t.prototype.onDisable=function(){this._childrenMap.forEach(function(e){e.getComponent(o)?e.active=!1:e.opacity=0}),this.target.off(cc.Node.EventType.POSITION_CHANGED,this.updatePosition,this),this.target.off(cc.Node.EventType.SCALE_CHANGED,this.updateScale,this)},t.prototype.updateScale=function(){var e=this;this._childrenMap.forEach(function(t){return t.setScale(e.node.scale)})},t.prototype.updateChildrenPosition=function(){var e=this,t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.renderTarget.convertToNodeSpaceAR(t);this._childrenMap.forEach(function(t,n){var i=e._childrenOffsetMap.get(n);t.setPosition(o.x+i.x*e.node.scaleX,o.y+i.y*e.node.scaleY)})},t.prototype.updatePosition=function(){var e=this;this.scheduleOnce(function(){var t=e.renderTarget.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),o=t.sub(e._lastPos);e._childrenMap.forEach(function(e){e.x+=o.x,e.y+=o.y}),e._lastPos=t})},t.prototype._moveOutside=function(){for(var e,t=this.offsetIndex;this.node.childrenCount>0;){var o={x:(e=this.node.children[0]).x,y:e.y};this._childrenOffsetMap.set(t,o),e.scaleX*=this.node.scaleX,e.scaleY*=this.node.scaleY,e.parent=this.renderTarget,this._childrenMap.set(t,e),e.getComponent(cc.Label)?e.zIndex=100+t:e.zIndex=t,t++}this.updateChildrenPosition()},t.prototype.recoverChildren=function(){var e=this;this._childrenMap.forEach(function(t,o){t.parent!=e.node&&(t.scaleX/=e.node.scaleX,t.scaleY/=e.node.scaleY),t.parent=e.node;var n=e._childrenOffsetMap.get(o);t.setPosition(n.x,n.y)}),this._childrenMap.clear(),this._childrenOffsetMap.clear()},r([c({type:cc.Node,tooltip:"\u76d1\u542c\u79fb\u52a8\u7684\u8282\u70b9 \u5982\u679c\u6ca1\u6709\u5219\u76d1\u542c\u6302\u70b9"})],t.prototype,"_target",void 0),r([c({type:cc.Node,tooltip:"\u76d1\u542c\u79fb\u52a8\u7684\u8282\u70b9 \u5982\u679c\u6ca1\u6709\u5219\u76d1\u542c\u6302\u70b9"})],t.prototype,"target",null),r([c({type:cc.Node,tooltip:"\u79fb\u52a8\u540e\u7684\u7236\u8282\u70b9\uff08\u4e0d\u586b\u9ed8\u8ba4\u4e3a\u8be5\u8282\u70b9\u7684\u7236\u8282\u70b9,\u4e0d\u80fd\u4e3a\u5f53\u524d\u8282\u70b9\uff09"})],t.prototype,"_renderTarget",void 0),r([c({type:cc.Node,tooltip:"\u79fb\u52a8\u540e\u7684\u7236\u8282\u70b9\uff08\u4e0d\u586b\u9ed8\u8ba4\u4e3a\u8be5\u8282\u70b9\u7684\u7236\u8282\u70b9,\u4e0d\u80fd\u4e3a\u5f53\u524d\u8282\u70b9\uff09"})],t.prototype,"renderTarget",null),r([c({type:cc.Integer,tooltip:"\u521d\u59cbzIndex\u503c(\u9ed8\u8ba4\u4e3a:0)"})],t.prototype,"offsetIndex",void 0),o=r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ResKeeperAddition:[function(e,t,o){"use strict";cc._RF.push(t,"4b0d4zhK7lOWb9jaa+EGYf5","ResKeeperAddition");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../Controller/TimeMgr"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._prefabList={},t._nodeList={},t._nodePools={},t._timeList={},t._waterLevel=20,t}return i(t,e),t.prototype.loadItemPool=function(e,t,o,n,i){return void 0===i&&(i=1),r(this,void 0,Promise,function(){var r=this;return a(this,function(){return[2,new Promise(function(a){r.loadBundleRes(t,o,cc.Prefab,function(t,o){r.addItemPool(e,o,n||o.data.name,i),a()})})]})})},t.prototype.addItemPool=function(e,t,o,n){void 0===n&&(n=1),null==o&&(o=t.name),this._prefabList[e]=t,this._nodeList[e]=[],this._nodePools[e]=new cc.NodePool(o),this._timeList[e]=s.default.inst.now();for(var i=0;i<n;i++)this._nodePools[e].put(cc.instantiate(t))},t.prototype.getNodeList=function(e){return this._nodeList[e]},t.prototype.get=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this._nodePools[e];if(null==n)return null;var i=n.get(0);if(null==i){var r=this._prefabList[e];if(null==r)return null;var a=(i=cc.instantiate(this._prefabList[e])).getComponent(n.poolHandlerComp);a&&a.reuse&&a.reuse.apply(a,t)}return this._nodeList[e].push(i),this._timeList[e]=s.default.inst.now(),i},t.prototype.put=function(e,t){var o=this._nodePools[e],n=this._nodeList[e],i=n.indexOf(t);n.splice(i,1),t.removeFromParent(),o.size()<this._waterLevel?o.put(t):t.destroy()},t.prototype.recycle=function(){for(var e in this._nodeList)for(var t=this._nodeList[e];t.length>0;)this.put(e,t[0])},t.prototype.clear=function(){for(var e in this._nodePools)this._nodePools[e].clear(),delete this._nodePools[e]},t.prototype.releaseAutoRes=function(){this.recycle(),this.clear(),this._prefabList={},this._nodeList={},this._nodePools={},this._timeList={},e.prototype.releaseAutoRes.call(this)},t}(e("./ResKeeper").default);o.default=c,cc._RF.pop()},{"../../Controller/TimeMgr":"TimeMgr","./ResKeeper":"ResKeeper"}],ResKeeper:[function(e,t,o){"use strict";cc._RF.push(t,"eb6467RtCVGxrVRKYRJLXOh","ResKeeper");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoRes=[],t}return i(t,e),t.prototype.loadRes=function(){var e=this,t=arguments[0],o=this.parseLoadResArgs(arguments[1],arguments[2],arguments[3]),n=o.onComplete;o.onComplete=function(t,o){if(!t&&e.isValid){if(o instanceof cc.Asset)o.addRef(),e.autoRes.push(o);else for(var i=0,r=o;i<r.length;i++){var a=r[i];a.addRef(),e.autoRes.push(a)}n&&n(t,o)}else cc.error(t)},cc.resources.load(t,o.type,o.onProgress,o.onComplete)},t.prototype.loadBundleRes=function(){var e=this,t=arguments[0],o=arguments[1],n=this.parseLoadResArgs(arguments[2],arguments[3],arguments[4]),i=cc.assetManager.getBundle(t);if(null!=i){var r=n.onComplete;n.onComplete=function(t,o){if(!t&&e.isValid){if(o instanceof cc.Asset)o.addRef(),e.autoRes.push(o);else for(var n=0,i=o;n<i.length;n++){var a=i[n];a.addRef(),e.autoRes.push(a)}r&&r(t,o)}else cc.error(t)},i.load(o,n.type,n.onProgress,n.onComplete)}else n.onComplete&&n.onComplete(null,null)},t.prototype.loadRemoteRes=function(e,t){var o=this;cc.assetManager.loadRemote(e,{ext:".png"},function(e,n){!e&&o.isValid?(n.addRef(),o.autoRes.push(n),t&&t(e,n)):cc.error(e)})},t.prototype.parseLoadResArgs=function(e,t,o){if(void 0===o){var n=cc.js.isChildClassOf(e,cc.Asset);t?(o=t,n&&(t=null)):void 0!==t||n||(o=e,t=null,e=null),void 0===t||n||(t=e,e=null)}return{type:e,onProgress:t,onComplete:o}},t.prototype.onDestroy=function(){this.releaseAutoRes()},t.prototype.releaseAutoRes=function(){for(var e=0;e<this.autoRes.length;e++)this.autoRes[e].decRef();this.autoRes.length=0},t.prototype.autoReleaseRes=function(e){e.addRef(),this.autoRes.push(e)},t.prototype.releaseAsset=function(e){var t=this.autoRes.indexOf(e);-1!=t&&(e.decRef(),this.autoRes.splice(t,1))},r([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],ResLoader:[function(e,t,o){"use strict";cc._RF.push(t,"2c138b9XzhOv5MyS5387lTH","ResLoader"),Object.defineProperty(o,"__esModule",{value:!0}),o.resLoader=void 0;var n=function(){function e(){}return e.prototype.loadRes=function(){cc.resources.load.apply(cc.resources,arguments)},e.prototype.loadResDir=function(){cc.resources.loadDir.apply(cc.resources,arguments)},e.prototype.loadRemoteRes=function(){cc.assetManager.loadRemote.apply(cc.assetManager,arguments)},e.prototype.releaseArray=function(e){for(var t=0;t<e.length;++t)this.releaseAsset(e[t])},e.prototype.releaseAsset=function(e){e.decRef()},e.prototype.getResItem=function(e,t){return cc.resources.get(e,t)},e}();o.default=n,o.resLoader=new n,cc._RF.pop()},{}],SceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"5768aCJyVpKzp5YnbW0LQry","SceneBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Res/ResKeeper"),s=e("../../Define/SceneDef"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sceneType=s.SceneType.$Start,t}return i(t,e),r([p({type:cc.Enum(s.SceneType),displayName:"\u573a\u666f\u7c7b\u578b"})],t.prototype,"sceneType",void 0),r([l],t)}(a.default);o.default=u,cc._RF.pop()},{"../../Define/SceneDef":"SceneDef","../Res/ResKeeper":"ResKeeper"}],SceneDef:[function(e,t,o){"use strict";var n;cc._RF.push(t,"7e24c8vfn5L1oSlp04O4jsu","SceneDef"),Object.defineProperty(o,"__esModule",{value:!0}),o.SceneDataInfo=o.SceneType=void 0,function(e){e[e.$Start=0]="$Start",e[e.NONE=1]="NONE",e[e.Bootstrap=2]="Bootstrap",e[e.Main=3]="Main",e[e.Game=4]="Game",e[e.Test=5]="Test",e[e.$End=6]="$End"}(n=o.SceneType||(o.SceneType={}));var i=function(){function e(e,t,o){void 0===o&&(o=[]),this.extraloadRes=[],this.sceneType=e,this.sceneName=t,this.extraloadRes=o}return e.getSceneData=function(e){for(var t=0;t<this._sceneDataList.length;++t)if(this._sceneDataList[t].sceneType==e)return this._sceneDataList[t];return null},e._sceneDataList=[new e(n.Bootstrap,"BootStrap"),new e(n.Main,"Main"),new e(n.Game,"Game"),new e(n.Test,"Test")],e}();o.SceneDataInfo=i,cc._RF.pop()},{}],SceneMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0df942ksWpO84lCpHxevraf","SceneMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.SceneMgr=void 0;var c=e("../UI/UIFacade"),l=e("../UI/UIMgr"),p=e("../../Define/EventId"),u=e("../../Define/SceneDef"),d=e("../Event/EventMgr"),h=e("../Utils/Singleton"),f=cc._decorator,_=(f.ccclass,f.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastSceneType=u.SceneType.NONE,t._currentSceneType=u.SceneType.NONE,t._loadingSceneType=u.SceneType.NONE,t}return i(t,e),t.prototype.getLastScene=function(){return this._lastSceneType},t.prototype.getCurrentScene=function(){return this._currentSceneType},Object.defineProperty(t.prototype,"sceneParams",{get:function(){return this._sceneParams},enumerable:!1,configurable:!0}),t.prototype.loadScene=function(e,t){void 0===t&&(t={}),this._loadingSceneType!=e?this._currentSceneType!=e?(this._sceneParams=t,this._loadScene(e)):cc.error("Scene: "+u.SceneType[e]+", is already loaded!"):cc.error("Scene: "+u.SceneType[e]+", is current being loading!")},t.prototype._loadScene=function(e,t){void 0===t&&(t=3),this._loadingSceneType=e;var o=u.SceneDataInfo.getSceneData(e);o?this._doLoadScene(o):cc.error("Scene not registerd, load scene faild!")},t.prototype._doLoadScene=function(e,t){var o=this;void 0===t&&(t=3);var n=this;cc.director.preloadScene(e.sceneName,function(e,t){d.EVENT.emit(p.EventId.ON_UPDATE_LOADING_PROGRESS,e,t)},function(i){i?(cc.error("\u573a\u666f\u52a0\u8f7d\u5931\u8d25",i),t>=0?(d.EVENT.emit(p.EventId.ON_UPDATE_LOADING_TTP,"\u7f51\u7edc\u4f3c\u4e4e\u4e0d\u592a\u597d"),setTimeout(function(){o._loadScene(e.sceneType,t-1)},1e3)):(t=3,setTimeout(function(){return r(o,void 0,void 0,function(){return a(this,function(o){switch(o.label){case 0:return[4,c.UIFacade.showConfirm("\u8bf7\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u8bd5","\u91cd\u8bd5","\u8fd4\u56de")];case 1:return o.sent()?this._loadScene(e.sceneType,t-1):cc.error("\u7528\u6237\u9009\u62e9\u9000\u51fa\u6e38\u620f"),[2]}})})},1e3))):cc.director.loadScene(e.sceneName,function(e){e?cc.error("\u573a\u666f\u5207\u6362\u5931\u8d25",e):n._loadSceneEnd()})})},t.prototype._loadSceneEnd=function(){this._lastSceneType=this._currentSceneType,this._currentSceneType=this._loadingSceneType,this._loadingSceneType=u.SceneType.NONE,this.reviveWnd()},t.prototype.pushReviveWnd=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._reciveInfo||(this._reciveInfo={sceneType:this._currentSceneType,uis:[]}),this._reciveInfo.uis.push({type:e,args:t})},t.prototype.reviveWnd=function(){var e;if(this.needReviveWnds()){for(var t=this._reciveInfo.uis,o=t.length-1;o>=0;--o){var n=t[o];n.args[0]=n.args[0]||{},n.args[0].isReciver=!0,(e=l.default.inst).open.apply(e,s([n.type],n.args))}this._reciveInfo=void 0}},t.prototype.clearReviveWnds=function(){this._reciveInfo=void 0},t.prototype.needReviveWnds=function(){return this._reciveInfo&&this._reciveInfo.sceneType==this._currentSceneType},t}(h.Singleton()));o.SceneMgr=_,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/SceneDef":"SceneDef","../Event/EventMgr":"EventMgr","../UI/UIFacade":"UIFacade","../UI/UIMgr":"UIMgr","../Utils/Singleton":"Singleton"}],SecretUtil:[function(e,t,o){"use strict";cc._RF.push(t,"9a8c109g+dMMZyJoBTfpS9+","SecretUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Libs/crypto-js/crypto-js.js"),i=function(){function e(){}return e.InitEncryptInfo=function(e,t){this.encryptKey=e.slice(8,16)+e.slice(24,32),this.encryptIv=e.slice(8,16)+e.slice(24,32);var o=n.default.MD5(t).toString();this.decryptKey=o.slice(0,16),this.SecrectGameId=t},e.Decrypt=function(e,t){if(!this.decryptKey)return!1;var o=n.default.AES.decrypt(e,n.default.enc.Utf8.parse(this.decryptKey),{iv:t?n.default.enc.Utf8.parse(t):t,mode:n.default.mode.CBC,padding:n.default.pad.Pkcs7});return JSON.parse(o.toString(n.default.enc.Utf8))},e.Encrypt=function(e){if(!this.encryptKey||!this.encryptIv)return!1;"object"==typeof e&&(e=JSON.stringify(e));var t=Math.floor(1e4*Math.random()).toString(),o=n.default.MD5(t).toString().slice(0,16);return{__data__:n.default.AES.encrypt(e,n.default.enc.Utf8.parse(this.encryptKey),{iv:o?n.default.enc.Utf8.parse(o):o,mode:n.default.mode.CBC,padding:n.default.pad.Pkcs7}).toString(),__iv__:o,__id__:this.SecrectGameId}},e.encryptKey="",e.encryptIv="",e.decryptKey="",e.SecrectGameId="",e}();o.default=i,cc._RF.pop()},{"../Libs/crypto-js/crypto-js.js":"crypto-js"}],SelectWeaponItem:[function(e,t,o){"use strict";cc._RF.push(t,"5e41fwEh0JEQ7/9zOMoXLYv","SelectWeaponItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Framework/Res/ResKeeper"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtName=null,t.txtLevel=null,t.txtDesc=null,t.spIcon=null,t._sid=null,t._info=null,t}return i(t,e),t.prototype.setInfo=function(e){var t=this;this._sid=e.id,this._info=e.info,1==this._info.lv?(this.txtLevel.string="\u65b0",this.txtLevel.node.color=new cc.Color(0,0,255)):(this.txtLevel.string="",this.txtLevel.node.color=new cc.Color(0,0,0)),this.txtName.string=""+a.SKILL_NAME[this._sid],this.txtDesc.string=""+this._info.desc,this.loadBundleRes("Textures",a.SKILL_ICON_URL[this._sid],cc.SpriteFrame,function(e,o){t.spIcon.spriteFrame=o})},r([p(cc.Label)],t.prototype,"txtName",void 0),r([p(cc.Label)],t.prototype,"txtLevel",void 0),r([p(cc.Label)],t.prototype,"txtDesc",void 0),r([p(cc.Sprite)],t.prototype,"spIcon",void 0),r([l],t)}(s.default);o.default=u,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/Res/ResKeeper":"ResKeeper"}],SelectWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"8f257BbA+FG8ZCh+I4VHe2L","SelectWeapon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/UI/UIMgr"),d=e("../../../Framework/UIBase"),h=e("../../../Model/UserModel"),f=e("../../../Model/WeaponModel"),_=e("./SelectWeaponItem"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectWeapons=[],t.txtFree=null,t.btnRefreshFree=null,t.btnRefresh=null,t.btnGetAll=null,t.nodeTittle=null,t.layout=null,t._skillList=[],t}return i(t,e),t.prototype.onOpen=function(){for(var e in l.AudioMgr.inst.playEffectByName("ui_weaponSelect"),this.selectWeapons)this.selectWeapons[e].node.on(cc.Node.EventType.TOUCH_END,this.onClickItem,this);this.refresh(),p.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.refresh=function(){h.UserModel.inst.curStage>=h.UserModel.inst.quanDouYao?this.btnGetAll.node.active=!0:this.btnGetAll.node.active=!1,h.UserModel.inst.curStage>=h.UserModel.inst.huanYiPi?(h.UserModel.inst.switchNum>0?(this.txtFree.string="(\u5269\u4f59\u6b21\u6570\uff1a"+h.UserModel.inst.switchNum+")",this.btnRefresh.node.active=!1,this.btnRefreshFree.node.active=!0):(this.btnRefresh.node.active=!0,this.btnRefreshFree.node.active=!1),this.btnGetAll.node.x=180):(this.btnRefresh.node.active=!1,this.btnRefreshFree.node.active=!1,this.btnGetAll.node.x=0),this.getWeapon(),4==this._skillList.length?(this.nodeTittle.y=453,this.layout.node.y=20,this.layout.node.height=730,this.layout.spacingX=86,this.layout.spacingY=90,this.btnRefreshFree.node.y=-468,this.btnRefresh.node.y=-468,this.btnGetAll.node.y=-468):(this.nodeTittle.y=370,this.layout.node.y=60,this.layout.node.height=340,this.layout.spacingX=20,this.layout.spacingY=60,this.btnRefreshFree.node.y=-380,this.btnRefresh.node.y=-380,this.btnGetAll.node.y=-380)},t.prototype.getWeapon=function(){var e=3,t=f.WeaponModel.inst.magicAttrs.a_lucky_p;Math.random()<t&&(e=4);for(var o=f.WeaponModel.inst.getRandom(e),n=o.length,i=0;i<n;i++){var r=o[i];(a=this.selectWeapons[i]).node.active=!0,a.setInfo(r)}for(;i<this.selectWeapons.length;i++){var a;(a=this.selectWeapons[i]).node.active=!1}this._skillList=o},t.prototype.onClose=function(){u.default.inst.isUIOpen(c.UIType.FightEquip)||u.default.inst.isUIOpen(c.UIType.EliteBox)||u.default.inst.isUIOpen(c.UIType.DrawSkill)||u.default.inst.isUIOpen(c.UIType.DrawSkill)||p.EVENT.emit(s.EventId.ON_GAME_RESUME)},t.prototype.onClickItem=function(e){var t=e.target.getSiblingIndex(),o=this._skillList[t];p.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP,o.id,o.info.lv),f.WeaponModel.inst.skillPoint--,f.WeaponModel.inst.skillPoint>0?this.refresh():this.close()},t.prototype.onClickSelectAll=function(){var e=this;a.default.inst.showAd("\u5c40\u5185\u5929\u8d4b\u5168\u9009",function(){for(var t=0;t<e._skillList.length;t++){var o=e._skillList[t];o&&p.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP,o.id,o.info.lv)}f.WeaponModel.inst.skillPoint--,f.WeaponModel.inst.skillPoint>0?e.refresh():e.close()})},t.prototype.onClickRefresh=function(){var e=this;a.default.inst.showAd("\u5c40\u5185\u5237\u65b0\u5929\u8d4b",function(){h.UserModel.inst.switchNum+=9,e.refresh()})},t.prototype.onClickRefreshFree=function(){h.UserModel.inst.switchNum--,this.refresh()},r([m([_.default])],t.prototype,"selectWeapons",void 0),r([m(cc.Label)],t.prototype,"txtFree",void 0),r([m(cc.Button)],t.prototype,"btnRefreshFree",void 0),r([m(cc.Button)],t.prototype,"btnRefresh",void 0),r([m(cc.Button)],t.prototype,"btnGetAll",void 0),r([m(cc.Node)],t.prototype,"nodeTittle",void 0),r([m(cc.Layout)],t.prototype,"layout",void 0),r([g],t)}(d.default);o.default=v,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel","../../../Model/WeaponModel":"WeaponModel","./SelectWeaponItem":"SelectWeaponItem"}],Setting:[function(e,t,o){"use strict";cc._RF.push(t,"654a5azPSVAxItoP9nJTHw4","Setting");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Controller/NativeMgr"),s=e("../../Define/EventId"),c=e("../../Define/LocalKey"),l=e("../../Define/SceneDef"),p=e("../../Framework/Audio/RTAudioSourceMgr"),u=e("../../Framework/Event/EventMgr"),d=e("../../Framework/Event/RedDot"),h=e("../../Framework/Scene/SceneMgr"),f=e("../../Framework/Storage/LocalStorageMgr"),_=e("../../Framework/UI/UIFacade"),y=e("../../Framework/UI/UIMgr"),g=e("../../Framework/UIBase"),m=e("../../Framework/VM"),v=e("../../Model/AchievementModel"),M=e("../../Model/MagnetModel"),b=e("../../Model/GameModel"),I=e("../../Model/GodPetModel"),E=e("../../Model/GodRideModel"),O=e("../../Model/GodWeaponModel"),S=e("../../Model/SupplyModel"),w=e("../../Model/UserModel"),R=e("../../Model/WeaponModel"),P=e("../../Model/XiuLianModel"),T=e("../../Model/GodSkinModel"),A=cc._decorator,L=A.ccclass,C=A.property,U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicSprite=null,t.effectSprite=null,t.openFrame=null,t.closeFrame=null,t.bgSwitch=null,t.versionTxt=null,t}return i(t,e),t.prototype.onOpen=function(){var e=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusicMute,!0);this.changeState(this.musicSprite,"yes"==e);var t=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffectMute,!0);this.changeState(this.effectSprite,"yes"==t),this.bgSwitch.toggleItems.forEach(function(e,t){return e.isChecked=w.UserModel.inst.background==t}),this.versionTxt.string=a.default.inst._version,u.EVENT.emit(s.EventId.ON_GAME_PAUSE)},t.prototype.onClose=function(){},t.prototype.onClickMusic=function(){var e=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeMusicMute,!0);p.default.inst.muteAllMusic("yes"!=e,!0),this.changeState(this.musicSprite,"yes"!=e)},t.prototype.onClickEffect=function(){var e=f.LocalStorageMgr.getItem(c.LocalKey.AudioVolumeEffectMute,!0);p.default.inst.muteAllEffect("yes"!=e,!0),this.changeState(this.effectSprite,"yes"!=e)},t.prototype.changeState=function(e,t){var o=e.node.getChildByName("point"),n=e.node.getChildByName("stateTxt").getComponent(cc.Label);e.spriteFrame=t?this.closeFrame:this.openFrame,n.string=t?"\u5173":"\u5f00",n.node.x=t?18:-18,cc.Tween.stopAllByTarget(o),cc.tween(o).to(.1,{x:t?-42:42}).start()},t.prototype.onClickCancel=function(){u.EVENT.emit(s.EventId.ON_GAME_RESUME),this.close()},t.prototype.onClickExit=function(){u.EVENT.emit(s.EventId.ON_GAME_RESUME),u.EVENT.emit(s.EventId.ON_GAME_OVER,1),this.close()},t.prototype.onClickSwitch=function(e){w.UserModel.inst.background=e.node.getSiblingIndex()},t.prototype.onClickYongHuXieYi=function(){a.default.inst.openUserProtocol()},t.prototype.onClickYingSiXieYi=function(){a.default.inst.openPrivacyProtocol()},t.prototype.onClickJoinQQGroup=function(){a.default.inst.joinQQGroup()},t.prototype.onClickUserFeedback=function(){a.default.inst.openUserFeedback()},t.prototype.onClickClearData=function(){_.UIFacade.showConfirm("\u63d0\u793a","\u4f60\u786e\u5b9a\u8981\u5220\u9664\u6e38\u620f\u7684\u6240\u6709\u6570\u636e\u5417\uff1f","\u786e\u8ba4","\u53d6\u6d88").then(function(){d.RedDot._inst=null,b.GameModel._inst=null,R.WeaponModel._inst=null,w.UserModel._inst=null,w.UserModel._inst=null,I.GodPetModel._inst=null,O.GodWeaponModel._inst=null,E.GodRideModel._inst=null,T.GodSkinModel._inst=null,v.AchievementModel._inst=null,M.MagnetModel._inst=null,S.SupplyModel._inst=null,P.XiuLianModel._inst=null,m.VM.removeAll(),y.default.inst.closeAll(),f.LocalStorageMgr.clearAll(),h.SceneMgr.inst.loadScene(l.SceneType.Bootstrap)})},r([C(cc.Sprite)],t.prototype,"musicSprite",void 0),r([C(cc.Sprite)],t.prototype,"effectSprite",void 0),r([C(cc.SpriteFrame)],t.prototype,"openFrame",void 0),r([C(cc.SpriteFrame)],t.prototype,"closeFrame",void 0),r([C(cc.ToggleContainer)],t.prototype,"bgSwitch",void 0),r([C(cc.Label)],t.prototype,"versionTxt",void 0),r([L],t)}(g.default);o.default=U,cc._RF.pop()},{"../../Controller/NativeMgr":"NativeMgr","../../Define/EventId":"EventId","../../Define/LocalKey":"LocalKey","../../Define/SceneDef":"SceneDef","../../Framework/Audio/RTAudioSourceMgr":"RTAudioSourceMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Event/RedDot":"RedDot","../../Framework/Scene/SceneMgr":"SceneMgr","../../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UI/UIMgr":"UIMgr","../../Framework/UIBase":"UIBase","../../Framework/VM":"VM","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel","../../Model/MagnetModel":"MagnetModel","../../Model/SupplyModel":"SupplyModel","../../Model/UserModel":"UserModel","../../Model/WeaponModel":"WeaponModel","../../Model/XiuLianModel":"XiuLianModel"}],Singleton:[function(e,t,o){"use strict";cc._RF.push(t,"5206eq0hLtHnra87eJbW17V","Singleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.Singleton=void 0,o.Singleton=function(){return function(){function e(){}return Object.defineProperty(e,"inst",{get:function(){return null==e._inst&&(e._inst=new this),e._inst},enumerable:!1,configurable:!0}),e._inst=null,e}()},cc._RF.pop()},{}],SkillDrawUI:[function(e,t,o){"use strict";cc._RF.push(t,"6f01etvksVOWLRoNQlOCz05","SkillDrawUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Model/GameModel"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphics=null,t.txtTime=null,t._dur=0,t._width=20,t._color=cc.color(0,0,0),t._tempDrawPointsAll=null,t._tempDrawColorsAll=null,t}return i(t,e),t.prototype.setDraw=function(e,t,o){this._tempDrawPointsAll=e,this._tempDrawColorsAll=t,this._dur=o,this.draw()},t.prototype.draw=function(){if(null!=this.graphics){var e=this.graphics,t=this._tempDrawPointsAll.concat();for(var o in t){var n=t[o],i=this._tempDrawColorsAll[o];this._color=cc.color(i.x,i.y,i.z);for(var r=[],a=0,s=n;a<s.length;a++){var c=s[a];r.push({x:c.x,y:c.y});var l=r.length;if(l<=1)e.circle(c.x,c.y,this._width/2),e.fill();else{var p=r[l-2],u=r[l-1];e.moveTo(p.x,p.y),e.lineTo(u.x,u.y),e.lineWidth=this._width,e.lineCap=cc.Graphics.LineCap.ROUND,e.lineJoin=cc.Graphics.LineJoin.ROUND,e.strokeColor=this._color,e.stroke()}}}}},t.prototype.update=function(e){a.GameModel.inst.isPause||this._dur>0&&(this._dur-=e,this.txtTime.string=Math.floor(this._dur)+"s",this._dur<0&&this.node.destroy())},r([l(cc.Graphics)],t.prototype,"graphics",void 0),r([l(cc.Label)],t.prototype,"txtTime",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Model/GameModel":"GameModel"}],SkillUI:[function(e,t,o){"use strict";cc._RF.push(t,"2993d/o0KRBQ7GfJiSUik3k","SkillUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Framework/List/RenderToTarget"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtLevel=null,t.render=null,t}return i(t,e),t.prototype.start=function(){},r([l(cc.Sprite)],t.prototype,"icon",void 0),r([l(cc.Label)],t.prototype,"txtLevel",void 0),r([l(a.default)],t.prototype,"render",void 0),r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Framework/List/RenderToTarget":"RenderToTarget"}],StageBoxItem:[function(e,t,o){"use strict";cc._RF.push(t,"42fbcVt2LRMs57VZS9rDki8","StageBoxItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Define/UIDefs"),c=e("../../../Framework/Res/ResKeeper"),l=e("../../../Framework/UI/UIMgr"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtNum=null,t.type="",t.id="",t.count=0,t.desc="",t}return i(t,e),t.prototype.start=function(){},t.prototype.setInfo=function(e,t,o,n){var i=this;switch(this.type=e,this.id=t,this.count=o,this.desc=n,e){case"skill":this.loadBundleRes("Textures",a.TALENT_ICON_URL_BY_ID[t],cc.SpriteFrame,function(e,n){i.icon.spriteFrame=n,"_p"==t.slice(-2)?i.txtNum.string="+"+100*o+"%":i.txtNum.string="+"+o});break;default:this.loadBundleRes("Textures",a.MONEY_ICON_URL[e],cc.SpriteFrame,function(e,t){i.icon.spriteFrame=t,i.txtNum.string="x"+o})}},t.prototype.btnCb=function(){l.default.inst.open(s.UIType.StageBoxTips,{str:this.desc,pos:this.node.parent.convertToWorldSpaceAR(this.node.position)})},r([d(cc.Sprite)],t.prototype,"icon",void 0),r([d(cc.Label)],t.prototype,"txtNum",void 0),r([u],t)}(c.default);o.default=h,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Define/UIDefs":"UIDefs","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/UI/UIMgr":"UIMgr"}],StageBoxTips:[function(e,t,o){"use strict";cc._RF.push(t,"9e2f4dRwA1MX4vXI6oX7csP","StageBoxTips");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.text=null,t.maxWidth=320,t}return i(t,e),t.prototype.onOpen=function(e,t){this.setTips(t.str,t.pos)},t.prototype.setTips=function(e,t){var o=this.node.parent.convertToNodeSpaceAR(t);o.x<=0?this.text.node.anchorX=0:this.text.node.anchorX=1,e=e.replace("\\n","\n"),this.text.string=e,e.length*this.text.fontSize>=this.maxWidth?this.text.overflow=cc.Label.Overflow.RESIZE_HEIGHT:this.text.overflow=cc.Label.Overflow.NONE,this.text._forceUpdateRenderData(),this.content.position=o},r([l(cc.Node)],t.prototype,"content",void 0),r([l(cc.Label)],t.prototype,"text",void 0),r([l],t.prototype,"maxWidth",void 0),r([c],t)}(a.default);o.default=p,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],StageBox:[function(e,t,o){"use strict";cc._RF.push(t,"8dbebUVB2NILrhc/knj22NW","StageBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Controller/TableMgr"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/UI/UIFacade"),p=e("../../../Framework/UIBase"),u=e("../../../Model/UserModel"),d=e("./StageBoxItem"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pfCommon=null,t.nodeReward=null,t.nodeAdReward=null,t.nodeBtnGet=null,t.nodeBGet=null,t.nodeBtnGetAd=null,t.nodeBGetAd=null,t.id=0,t.com=null,t}return i(t,e),t.prototype.onOpen=function(e,t){c.AudioMgr.inst.playEffectByName("ui_open"),this.id=t.id,this.com=t.com,this.refresh(this.id)},t.prototype.refresh=function(e){this.nodeReward.removeAllChildren(),this.nodeAdReward.removeAllChildren(),this.id=e;var t=s.TABLE.getTableInfo("stageBox","id",this.id);t&&(""!=t.rType1&&this.addReward(this.nodeReward,t.rType1,t.rId1,t.rVal1,t.desc1),""!=t.rType2&&this.addReward(this.nodeReward,t.rType2,t.rId2,t.rVal2,t.desc2),""!=t.adType1&&this.addReward(this.nodeAdReward,t.adType1,t.adId1,t.adVal1,t.adDesc1),""!=t.adType2&&this.addReward(this.nodeAdReward,t.adType2,t.adId2,t.adVal2,t.adDesc2),this.updateBtnSt())},t.prototype.updateBtnSt=function(){var e=u.UserModel.inst.stageBoxGet[this.id];1==(1&e)?(this.nodeBtnGet.active=!1,this.nodeBGet.active=!0):(this.nodeBtnGet.active=!0,this.nodeBGet.active=!1),2==(2&e)?(this.nodeBtnGetAd.active=!1,this.nodeBGetAd.active=!0):(this.nodeBtnGetAd.active=!0,this.nodeBGetAd.active=!1)},t.prototype.addReward=function(e,t,o,n,i){var r=cc.instantiate(this.pfCommon);r.getComponent(d.default).setInfo(t,o,n,i),e.addChild(r)},t.prototype.getItem=function(e,t,o){switch(e){case"money":u.UserModel.inst.money+=o;break;case"rMoney":u.UserModel.inst.rMoney+=o;break;case"g1Money":u.UserModel.inst.g1Money+=o;break;case"g2Money":u.UserModel.inst.g2Money+=o;break;case"g3Money":u.UserModel.inst.g3Money+=o;break;case"skill":u.UserModel.inst.stageBoxSkill[t]||(u.UserModel.inst.stageBoxSkill[t]=0),u.UserModel.inst.stageBoxSkill[t]+=o}},t.prototype.getReward=function(){if(1!=(1&u.UserModel.inst.stageBoxGet[this.id])){u.UserModel.inst.stageBoxGet[this.id]||(u.UserModel.inst.stageBoxGet[this.id]=0);var e=s.TABLE.getTableInfo("stageBox","id",this.id);e&&(u.UserModel.inst.stageBoxGet[this.id]|=1,u.UserModel.inst.stageBoxGet=u.UserModel.inst.stageBoxGet,""!=e.rType1&&this.getItem(e.rType1,e.rId1,e.rVal1),""!=e.rType2&&this.getItem(e.rType2,e.rId2,e.rVal2),this.updateBtnSt(),this.com.init(),c.AudioMgr.inst.playEffectByName("ui_tips"),l.UIFacade.showToast("\u9886\u53d6\u6210\u529f"))}},t.prototype.getRewardAd=function(){var e=this;if(2!=(2&u.UserModel.inst.stageBoxGet[this.id])){var t=s.TABLE.getTableInfo("stageBox","id",this.id);t&&a.default.inst.showAd("\u5b9d\u7bb1\u5e7f\u544a",function(){u.UserModel.inst.stageBoxGet[e.id]||(u.UserModel.inst.stageBoxGet[e.id]=0),u.UserModel.inst.stageBoxGet[e.id]|=2,u.UserModel.inst.stageBoxGet=u.UserModel.inst.stageBoxGet,""!=t.adType1&&e.getItem(t.adType1,t.adId1,t.adVal1),""!=t.adType2&&e.getItem(t.adType2,t.adId2,t.adVal2),e.updateBtnSt(),e.com.init(),c.AudioMgr.inst.playEffectByName("ui_tips"),l.UIFacade.showToast("\u9886\u53d6\u6210\u529f")})}},r([_(cc.Prefab)],t.prototype,"pfCommon",void 0),r([_(cc.Node)],t.prototype,"nodeReward",void 0),r([_(cc.Node)],t.prototype,"nodeAdReward",void 0),r([_(cc.Node)],t.prototype,"nodeBtnGet",void 0),r([_(cc.Node)],t.prototype,"nodeBGet",void 0),r([_(cc.Node)],t.prototype,"nodeBtnGetAd",void 0),r([_(cc.Node)],t.prototype,"nodeBGetAd",void 0),r([f],t)}(p.default);o.default=y,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TableMgr":"TableMgr","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel","./StageBoxItem":"StageBoxItem"}],StageMapBox:[function(e,t,o){"use strict";cc._RF.push(t,"143a6/aoOpKt5QLEGh/5xw6","StageMapBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/TableMgr"),s=e("../../../Define/UIDefs"),c=e("../../../Framework/UI/UIMgr"),l=e("../../../Model/UserModel"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp=null,t.sfIcon=[],t.spine=null,t._id=-1,t._state=0,t}return i(t,e),t.prototype.start=function(){this.init()},t.prototype.init=function(){this._id=parseInt(this.node.name);var e=a.TABLE.getTableInfo("stageBox","id",this._id);if(e)if(this.sp.node.active=!0,this.spine.node.active=!1,l.UserModel.inst.curStage<=e.stage)this.sp.spriteFrame=this.sfIcon[0],this._state=0;else{var t=l.UserModel.inst.stageBoxGet[this._id];t?3==t?(this.sp.spriteFrame=this.sfIcon[3],this._state=3):(this._state=2,this.sp.node.active=!1,this.spine.node.active=!0,this.spine.setAnimation(0,"idle2",!0)):(this._state=1,this.sp.node.active=!1,this.spine.node.active=!0,this.spine.setAnimation(0,"idle1",!0))}else this.spine.node.active=!1},t.prototype.onClick=function(){0!=this._state&&c.default.inst.open(s.UIType.StageBox,{id:this._id,com:this})},r([d(cc.Sprite)],t.prototype,"sp",void 0),r([d([cc.SpriteFrame])],t.prototype,"sfIcon",void 0),r([d(sp.Skeleton)],t.prototype,"spine",void 0),r([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/UIDefs":"UIDefs","../../../Framework/UI/UIMgr":"UIMgr","../../../Model/UserModel":"UserModel"}],StageMapItem:[function(e,t,o){"use strict";cc._RF.push(t,"47b5aQxMh1JmIwRGW7gLb9V","StageMapItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../../../Define/Define"),c=e("../../../Framework/Res/ResKeeper"),l=cc._decorator,p=l.ccclass,u=l.property;(function(e){e[e.cc1=0]="cc1",e[e.cc2=1]="cc2",e[e.cc3=2]="cc3",e[e.cc4=3]="cc4",e[e.cc5=4]="cc5",e[e.cc6=5]="cc6",e[e.cc7=6]="cc7",e[e.cc8=7]="cc8",e[e.cc9=8]="cc9",e[e.cc1b=9]="cc1b",e[e.ccFinish=10]="ccFinish"})(a||(a={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spIcon=null,t._ccType=a.cc1,t._isPass=!1,t}return i(t,e),Object.defineProperty(t.prototype,"ccType",{get:function(){return this._ccType},set:function(e){this._ccType=e},enumerable:!1,configurable:!0}),t.prototype.setPass=function(e){this._isPass=e,this.updateIcon()},t.prototype.updateIcon=function(){var e=this;this._isPass&&(this._ccType==a.cc1?(this._ccType=a.cc1b,this.loadBundleRes("Textures",s.STAGE_ICON_URL[this._ccType],cc.SpriteFrame,function(t,o){e.spIcon.spriteFrame=o})):this.loadBundleRes("Textures",s.STAGE_ICON_URL[a.ccFinish],cc.SpriteFrame,function(t,o){var n=new cc.Node("passed");n.addComponent(cc.Sprite).spriteFrame=o,n.scaleX=e.node.scaleX,n.setParent(e.node)}))},r([u(cc.Sprite)],t.prototype,"spIcon",void 0),r([u({type:cc.Enum(a)})],t.prototype,"_ccType",void 0),r([u({type:cc.Enum(a),displayName:"\u5173\u5361\u7c7b\u578b"})],t.prototype,"ccType",null),r([p],t)}(c.default);o.default=d,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/Res/ResKeeper":"ResKeeper"}],StageMap:[function(e,t,o){"use strict";cc._RF.push(t,"e0882goNnJM5Z7uMq+x2mpQ","StageMap");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/NativeMgr"),s=e("../../../Controller/TableMgr"),c=e("../../../Controller/TimeMgr"),l=e("../../../Define/EventId"),p=e("../../../Define/SceneDef"),u=e("../../../Define/UIDefs"),d=e("../../../Framework/Audio/AudioMgr"),h=e("../../../Framework/Event/EventMgr"),f=e("../../../Framework/UI/UIFacade"),_=e("../../../Framework/UI/UIMgr"),y=e("../../../Framework/UIBase"),g=e("../../../Model/MagnetModel"),m=e("../../../Model/GameModel"),v=e("../../../Model/UserModel"),M=e("./StageMapBox"),b=e("./StageMapItem"),I=cc._decorator,E=I.ccclass,O=I.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeStage=null,t.nodeMap=null,t.nodeTips=null,t.nodeArrow=null,t.numTxt=null,t.nodeBoxes=null,t._stageList=[],t._boxList=[],t._curCom=null,t._isMove=!1,t._slideDis=10,t._selectStage=0,t}return i(t,e),t.prototype.onOpen=function(){var e=this;d.AudioMgr.inst.playEffectByName("ui_winMap"),this._selectStage=v.UserModel.inst.curStage,v.UserModel.inst.curStage>this.nodeTips.childrenCount&&(this._selectStage=this.nodeTips.childrenCount),this.nodeTips.children.forEach(function(t,o){return t.active=o==e._selectStage-1}),this.nodeStage.children.forEach(function(t){return t.on(cc.Node.EventType.TOUCH_END,e.onClickStage,e)}),this.numTxt.string=""+this._selectStage,this.refresh(),this.updatePos()},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onMove,this)},t.prototype.startCB=function(){},t.prototype.onTouchEnd=function(){this._isMove=!1},t.prototype.onMove=function(e){var t=e.getLocation(),o=e.getStartLocation(),n=cc.Vec2.distance(t,o);if(this._isMove||n>=this._slideDis){this._isMove=!0;var i=e.getDelta();this.slideCb(i)}},t.prototype.slideCb=function(e){this.nodeMap.x+=e.x,this.nodeMap.y+=e.y;var t=-this.nodeMap.width/2+this.node.width/2,o=this.nodeMap.width/2-this.node.width/2,n=-this.nodeMap.height/2+this.node.height/2,i=this.nodeMap.height/2-this.node.height/2;this.nodeMap.x<t&&(this.nodeMap.x=t),this.nodeMap.x>o&&(this.nodeMap.x=o),this.nodeMap.y<n&&(this.nodeMap.y=n),this.nodeMap.y>i&&(this.nodeMap.y=i)},t.prototype.refresh=function(){for(var e=this.nodeStage.children,t=0;t<e.length;t++){var o=this.nodeStage.getChildByName(""+(t+1));if(o){var n=o.getComponent(b.default);t+1<v.UserModel.inst.curStage?n.setPass(!0):(n.setPass(!1),t+1==v.UserModel.inst.curStage&&(this._curCom=n))}}for(e=this.nodeBoxes.children,this._boxList.length=0,t=0;t<e.length;t++){var i=this.nodeBoxes.getChildByName(""+(t+1));i&&(n=i.getComponent(M.default),this._boxList.push(n),n.init())}},t.prototype.updatePos=function(){for(var e=this.nodeStage.children,t=0;t<e.length;t++){var o=this.nodeStage.getChildByName(""+(t+1));if(o){var n=o.getComponent(b.default);t+1==this._selectStage&&(this._curCom=n)}}this.nodeMap.x=0,this.nodeMap.y=0;var i=this._curCom.node.position,r=this._curCom.node.parent.convertToWorldSpaceAR(i),a=this.nodeMap.parent.convertToNodeSpaceAR(r);this.nodeMap.x=-a.x,this.nodeMap.y=-a.y,this.slideCb(cc.v2(0,0));var s=this._curCom.node.convertToWorldSpaceAR(cc.v2(-4,100));this.nodeArrow.setPosition(this.nodeArrow.parent.convertToNodeSpaceAR(s))},t.prototype.movePos=function(){for(var e=this.nodeStage.children,t=0;t<e.length;t++){var o=this.nodeStage.getChildByName(""+(t+1));if(o){var n=o.getComponent(b.default);t+1==this._selectStage&&(this._curCom=n)}}var i=this.nodeMap.getPosition();this.nodeMap.x=0,this.nodeMap.y=0;var r=this._curCom.node.position,a=this._curCom.node.parent.convertToWorldSpaceAR(r),s=this.nodeMap.parent.convertToNodeSpaceAR(a),c=-this.nodeMap.width/2+this.node.width/2,l=this.nodeMap.width/2-this.node.width/2,p=-this.nodeMap.height/2+this.node.height/2,u=this.nodeMap.height/2-this.node.height/2;s.x<c&&(s.x=c),s.x>l&&(s.x=l),s.y<p&&(s.y=p),s.y>u&&(s.y=u),this.nodeMap.setPosition(i),cc.tween(this.nodeMap).to(.2,{x:-s.x,y:-s.y},{easing:"cubicOut"}).start();var d=this._curCom.node.convertToWorldSpaceAR(cc.v2(-4,100));this.nodeArrow.setPosition(this.nodeArrow.parent.convertToNodeSpaceAR(d))},t.prototype.onClickStart=function(){if(null==s.TABLE.getTable("stage_"+this._selectStage))return f.UIFacade.showToast("\u5173\u5361\u5c1a\u672a\u5f00\u653e\uff0c\u656c\u8bf7\u671f\u5f85"),void d.AudioMgr.inst.playEffectByName("ui_not");m.GameModel.inst.clear(),m.GameModel.inst.stage=this._selectStage,v.UserModel.inst.selectStage=this._selectStage,g.MagnetModel.inst.stageTime=c.default.inst.now(),a.default.inst.logEvent("ohayoo_game_battlemap",{battletype:"\u666e\u901a\u6a21\u5f0f",mapid:v.UserModel.inst.selectStage,battleresult:0}),d.AudioMgr.inst.playEffectByName("ui_winMap"),_.default.inst.delayUIWaitAnim(60),_.default.inst.open(u.UIType.Loading,p.SceneType.Main),this.close(),h.EVENT.emit(l.EventId.ON_GAME_START)},t.prototype.onClickStage=function(e){var t=this;if(!(cc.Vec2.distance(e.getStartLocation(),e.getLocation())>10)){var o=e.target,n=Number(o.name);if(n>v.UserModel.inst.curStage)return f.UIFacade.showToast("\u8bf7\u5148\u901a\u5173\u524d\u7f6e\u5173\u5361"),void d.AudioMgr.inst.playEffectByName("ui_not");d.AudioMgr.inst.playEffectByName("talentSelect"),this._selectStage=n,this.nodeTips.children.forEach(function(e,o){return e.active=o==t._selectStage-1}),this.numTxt.string=""+this._selectStage,this.movePos()}},r([O(cc.Node)],t.prototype,"nodeStage",void 0),r([O(cc.Node)],t.prototype,"nodeMap",void 0),r([O(cc.Node)],t.prototype,"nodeTips",void 0),r([O(cc.Node)],t.prototype,"nodeArrow",void 0),r([O(cc.Label)],t.prototype,"numTxt",void 0),r([O(cc.Node)],t.prototype,"nodeBoxes",void 0),r([E],t)}(y.default);o.default=S,cc._RF.pop()},{"../../../Controller/NativeMgr":"NativeMgr","../../../Controller/TableMgr":"TableMgr","../../../Controller/TimeMgr":"TimeMgr","../../../Define/EventId":"EventId","../../../Define/SceneDef":"SceneDef","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/GameModel":"GameModel","../../../Model/MagnetModel":"MagnetModel","../../../Model/UserModel":"UserModel","./StageMapBox":"StageMapBox","./StageMapItem":"StageMapItem"}],StaticData:[function(e,t,o){"use strict";cc._RF.push(t,"bbb253g4ExFTqHUa4YXBYzk","StaticData"),Object.defineProperty(o,"__esModule",{value:!0}),o.StaticData=void 0;var n=function(){function e(){}return e.mainCamera=null,e.designResolutionSize=null,e.visibleSize=null,e.center=null,e.scale=1,e.minX=1,e.maxX=1,e.minY=1,e.maxY=1,e.radius=1,e}();o.StaticData=n,cc._RF.pop()},{}],StoreReview:[function(e,t,o){"use strict";cc._RF.push(t,"bde13UN3OlHJ4v/Y5GFOPY8","StoreReview");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/NativeMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Event/EventMgr"),l=e("../../../Framework/UIBase"),p=e("../../../Model/UserModel"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeReward=null,t.txtReward=null,t}return i(t,e),t.prototype.onOpen=function(){this.txtReward.string="x"+p.UserModel.inst.storeReviewReward},t.prototype.onClickConfirm=function(){var e=this.nodeReward.convertToWorldSpaceAR(cc.Vec2.ZERO);c.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,e,"RMoney",function(){p.UserModel.inst.rMoney+=p.UserModel.inst.storeReviewReward}),a.default.inst.storeReview(),this.close()},t.prototype.onClickCancel=function(){this.close()},r([h(cc.Node)],t.prototype,"nodeReward",void 0),r([h(cc.Label)],t.prototype,"txtReward",void 0),r([d],t)}(l.default);o.default=f,cc._RF.pop()},{"../../../Controller/NativeMgr":"NativeMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UIBase":"UIBase","../../../Model/UserModel":"UserModel"}],SupplyModel:[function(e,t,o){"use strict";cc._RF.push(t,"c9715uqSxVL6ZGsnzZ7WKEt","SupplyModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.SupplyModel=void 0;var n=e("../Controller/TableMgr"),i=e("../Controller/TimeMgr"),r=e("../Framework/Storage/LocalStorageMgr"),a=e("../Framework/Utils/Utils"),s=function(){function e(){var e;this._openStage=4,this._time1=0,this._time2=0,this._freetime2=0,this._money_time2=[],this._cd1=60,this._cd2=60,this._count1=0,this._count2=0,this._dayCount1=0,this._dayCount2=0,this._dayMax1=5,this._rMoneyNum=10,this._g1MoneyNum=10,this._g2MoneyNum=10,this._g3MoneyNum=10,this._freecd2=144e5,this._openStage=Number(n.TABLE.getGlobal("LiangCaoBuJi_openStage")),this._cd1=Number(n.TABLE.getGlobal("LiangCaoBuJi_cd1")),this._cd2=Number(n.TABLE.getGlobal("LiangCaoBuJi_cd2")),this._freecd2=Number(n.TABLE.getGlobal("LiangCaoBuJi_freecd2")),this._dayMax1=Number(n.TABLE.getGlobal("LiangCaoBuJi_dayMax1")),this._rMoneyNum=Number(n.TABLE.getGlobal("LiangCaoBuJi_rMoney")),this._g1MoneyNum=Number(n.TABLE.getGlobal("LiangCaoBuJi_g1Money")),this._g2MoneyNum=Number(n.TABLE.getGlobal("LiangCaoBuJi_g2Money")),this._g3MoneyNum=Number(n.TABLE.getGlobal("LiangCaoBuJi_g3Money")),this._count1=Number(r.LocalStorageMgr.getItem("LiangCaoBuJi_count1"))||0,this._count2=Number(r.LocalStorageMgr.getItem("LiangCaoBuJi_count2"))||0,this._dayCount1=Number(r.LocalStorageMgr.getItem("LiangCaoBuJi_dayCount1"))||0,this._dayCount2=Number(r.LocalStorageMgr.getItem("LiangCaoBuJi_dayCount2"))||0,this._time1=Number(r.LocalStorageMgr.getItem("LiangCaoBuJi_time1"))||0,this._time2=Number(r.LocalStorageMgr.getItem("LiangCaoBuJi_time2"))||0,this._freetime2=Number(r.LocalStorageMgr.getItem("LiangCaoBuJi_freetime2"))||0;var t=null===(e=r.LocalStorageMgr.getItem("LiangCaoBuJi_money_time2"))||void 0===e?void 0:e.split(",");if(t)for(var o in t)this._money_time2[o]=Number(t[o]);else this._money_time2=[0,0,0,0]}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"openStage",{get:function(){return this._openStage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time1",{get:function(){return this._time1},set:function(e){this._time1=e,r.LocalStorageMgr.setItem("LiangCaoBuJi_time1",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time2",{get:function(){return this._time2},set:function(e){this._time2=e,r.LocalStorageMgr.setItem("LiangCaoBuJi_time2",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"freetime2",{get:function(){return this._freetime2},set:function(e){this._freetime2=e,r.LocalStorageMgr.setItem("LiangCaoBuJi_freetime2",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"money_time2",{get:function(){return this._money_time2},set:function(e){this._money_time2=e,r.LocalStorageMgr.setItem("LiangCaoBuJi_money_time2",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cd1",{get:function(){return this._cd1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cd2",{get:function(){return this._cd2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count1",{get:function(){return this._count1},set:function(e){this._count1=e,r.LocalStorageMgr.setItem("LiangCaoBuJi_count1",""+e),0==a.default.getTimedifference(i.default.inst.now(),this._time1)?this.dayCount1++:this.dayCount1=1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count2",{get:function(){return this._count2},set:function(e){this._count2=e,r.LocalStorageMgr.setItem("LiangCaoBuJi_count2",""+e),0==a.default.getTimedifference(i.default.inst.now(),this._time2)?this.dayCount2++:this.dayCount2=1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dayCount1",{get:function(){return this._dayCount1},set:function(e){this._dayCount1=e,r.LocalStorageMgr.setItem("LiangCaoBuJi_dayCount1",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dayCount2",{get:function(){return this._dayCount2},set:function(e){this._dayCount2=e,r.LocalStorageMgr.setItem("LiangCaoBuJi_dayCount2",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dayMax1",{get:function(){return this._dayMax1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rMoneyNum",{get:function(){return this._rMoneyNum},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g1MoneyNum",{get:function(){return this._g1MoneyNum},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g2MoneyNum",{get:function(){return this._g2MoneyNum},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g3MoneyNum",{get:function(){return this._g3MoneyNum},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"freecd2",{get:function(){return this._freecd2},enumerable:!1,configurable:!0}),e.prototype.getTime1=function(){return this.dayCount1>=this._dayMax1?i.default.inst.getCurToZero():this._cd1-(i.default.inst.now()-this._time1)},e.prototype.getTime2=function(){return this._cd2-(i.default.inst.now()-this._time2)},e.prototype.getFreeTime2=function(){return this._freecd2-(i.default.inst.now()-this._freetime2)},e.prototype.refreshDayCount=function(){0!=a.default.getTimedifference(i.default.inst.now(),this._time1)&&(this.dayCount1=0)},e.prototype.refreshMoney=function(){for(var e=0;!(this.getFreeTime2()>0);){this.freetime2+=this._freecd2;var t=[];0==this._money_time2[0]&&t.push(0),t.length>0&&(this._money_time2[t[cc.math.randomRangeInt(0,t.length)]]=1,this.money_time2=this._money_time2,e++)}return e},e._inst=null,e}();o.SupplyModel=s,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Controller/TimeMgr":"TimeMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../Framework/Utils/Utils":"Utils"}],Supply_MoneyItem:[function(e,t,o){"use strict";cc._RF.push(t,"16658CzfTZI76TdXh/0FxE8","Supply_MoneyItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Controller/TimeMgr"),c=e("../../../Framework/i18n/i18nMgr"),l=e("../../../Framework/Res/ResKeeper"),p=e("../../../Framework/Utils/Utils"),u=e("../../../Model/UserModel"),d=e("../../../Model/SupplyModel"),h=e("../../../Framework/Audio/AudioMgr"),f=e("../../../Framework/Event/EventMgr"),_=e("../../../Define/EventId"),y=cc._decorator,g=y.ccclass,m=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNode=null,t.whNode=null,t.btnAd=null,t.btnFree=null,t.btnNot=null,t.btnTime=null,t.numTxt=null,t.timeTxt=null,t._h="\u65f6",t._m="\u5206",t._s="\u79d2",t._state=0,t._idx=-1,t}return i(t,e),t.prototype.onLoad=function(){this._h=c.i18nMgr.getLabel("h"),this._m=c.i18nMgr.getLabel("m"),this._s=c.i18nMgr.getLabel("s"),this._idx=this.node.getSiblingIndex(),this.btnTime.node.active=!1},t.prototype.start=function(){var e=[d.SupplyModel.inst.rMoneyNum,d.SupplyModel.inst.g1MoneyNum,d.SupplyModel.inst.g2MoneyNum,d.SupplyModel.inst.g3MoneyNum];this.numTxt.string="x"+e[this._idx]},t.prototype.setState=function(e){0==e?(this.iconNode.active=!1,this.whNode.active=!0,this.btnNot.node.active=!0,this.btnAd.node.active=!1,this.btnFree.node.active=!1):1==e?(this.iconNode.active=!0,this.whNode.active=!1,this.btnNot.node.active=!1,this.btnAd.node.active=!0,this.btnFree.node.active=!1):2==e&&(this.iconNode.active=!0,this.whNode.active=!1,this.btnNot.node.active=!1,this.btnAd.node.active=!1,this.btnFree.node.active=!0),this._state=e},t.prototype.refresh=function(){this.setState(d.SupplyModel.inst.money_time2[this._idx]?2:1)},t.prototype.onClickAd=function(){var e=this;a.default.inst.showAd("\u7cae\u8349\u8865\u7ed9\u8d27\u5e01",function(){e.onReward()})},t.prototype.onClickFree=function(){d.SupplyModel.inst.money_time2[this._idx]=0,d.SupplyModel.inst.money_time2=d.SupplyModel.inst.money_time2,d.SupplyModel.inst.refreshMoney()&&(d.SupplyModel.inst.freetime2=s.default.inst.now()),this.onReward()},t.prototype.onReward=function(){h.AudioMgr.inst.playEffectByName("achievement");var e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO);f.EVENT.emit(_.EventId.ON_UI_MAIN_FLY_ICON,e,"RMoney",function(){u.UserModel.inst.rMoney+=d.SupplyModel.inst.rMoneyNum}),this.refresh()},t.prototype.update=function(){if(0!=this._state){var e=d.SupplyModel.inst.getTime2();e>0?(this.btnTime.node.active=!0,this.timeTxt.string=e>36e5?p.default.formatTime(e,"hh"+this._h+"mm"+this._m):e>6e4?p.default.formatTime(e,"mm"+this._m+"ss"+this._s):e>1e4?p.default.formatTime(e,"ss"+this._s):p.default.formatTime(e,"s"+this._s)):this.btnTime.node.active=!1}},r([m(cc.Node)],t.prototype,"iconNode",void 0),r([m(cc.Node)],t.prototype,"whNode",void 0),r([m(cc.Button)],t.prototype,"btnAd",void 0),r([m(cc.Button)],t.prototype,"btnFree",void 0),r([m(cc.Button)],t.prototype,"btnNot",void 0),r([m(cc.Button)],t.prototype,"btnTime",void 0),r([m(cc.Label)],t.prototype,"numTxt",void 0),r([m(cc.Label)],t.prototype,"timeTxt",void 0),r([g],t)}(l.default);o.default=v,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TimeMgr":"TimeMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/Utils/Utils":"Utils","../../../Framework/i18n/i18nMgr":"i18nMgr","../../../Model/SupplyModel":"SupplyModel","../../../Model/UserModel":"UserModel"}],Supply_Money:[function(e,t,o){"use strict";cc._RF.push(t,"52c05tJwPVPkILtRe2UkX22","Supply_Money");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/Res/ResKeeper"),s=e("../../../Framework/Utils/Utils"),c=e("../../../Model/SupplyModel"),l=e("./Supply_MoneyItem"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t.desc=null,t.time=null,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.refresh()},t.prototype.refresh=function(){c.SupplyModel.inst.refreshMoney(),this.items.forEach(function(e){return e.refresh()})},t.prototype.update=function(){var e=c.SupplyModel.inst.getFreeTime2();e>0?this.time.string=s.default.formatTime(e,"hh:mm:ss"):(this.refresh(),this.time.string="00:00:00")},r([d([l.default])],t.prototype,"items",void 0),r([d(cc.Label)],t.prototype,"desc",void 0),r([d(cc.Label)],t.prototype,"time",void 0),r([u],t)}(a.default);o.default=h,cc._RF.pop()},{"../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/Utils/Utils":"Utils","../../../Model/SupplyModel":"SupplyModel","./Supply_MoneyItem":"Supply_MoneyItem"}],Supply:[function(e,t,o){"use strict";cc._RF.push(t,"c2b93fH+ihLE6farj1W0ILv","Supply");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Framework/UIBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onOpen=function(){},r([c],t)}(a.default));o.default=l,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],TableMgr:[function(e,t,o){"use strict";cc._RF.push(t,"cb107J2UoNKnJqcdLyLleqf","TableMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TABLE=void 0;var s=e("../Framework/Sys/TeMap"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isLoaded=!1,t._iTotalLoad=0,t._iLoadNum=0,t._ConfigTable=new s.default,t._GlobalResInfo=new s.default,t._StageSkResInfo=new s.default,t._PlayerLevel=[],t}return i(t,e),t.prototype.loadTableRes=function(){return r(this,void 0,Promise,function(){var e=this;return a(this,function(){return this._isLoaded?[2]:(this._isLoaded=!0,[2,new Promise(function(t){e._loadTableRes(function(){return t()})})])})})},t.prototype.loadTable=function(e,t){var o=this;cc.resources.load(e,cc.JsonAsset,function(n,i){if(n)cc.error("failed to load "+e+": "+n);else if(t)try{t(null,i)}catch(r){cc.error("loadTable->",r+" res:"+e)}o._onInitOver()})},t.prototype._onInitOver=function(){this._iLoadNum>=this._iTotalLoad?console.error("\u8d44\u6e90\u52a0\u8f7d\u6570\u91cf\u5bf9\u4e0d\u4e0a\u4e86\uff0c\u6ce8\u610f\u4fee\u6539"):(this._iLoadNum++,this._iLoadNum>=this._iTotalLoad&&this._completeCallback&&this._completeCallback())},t.prototype._loadTableRes=function(e){this._completeCallback=e;var t=[];t.push(this._ConfigResData),this._iTotalLoad=t.length;for(var o=0;o<t.length;o++)t[o].apply(this)},t.prototype._ConfigResData=function(){var e=this;this.loadTable("Config/config",function(t,o){for(var n=Object.keys(o.json),i=0;i<n.length;i++){var r=o.json[n[i]];e._ConfigTable.set(n[i],r)}var a=e._ConfigTable.get("global");for(i=0;i<a.length;i++){var s=a[i];e._GlobalResInfo.set(s.key,s.value)}for(i=1;;i++){var c=e._ConfigTable.get("stage_sk_"+i);if(null==c)break;e._StageSkResInfo.set(i,c)}var l=e._ConfigTable.get("playerLevel");for(i=0;i<l.length;i++)s=l[i],e._PlayerLevel[s.num]=s.money})},t.prototype.getTable=function(e){return this._ConfigTable.get(e)},t.prototype.getTableInfo=function(e,t,o){var n=this.getTable(e);return n?n.find(function(e){return e[t]==o}):null},t.prototype.getGlobal=function(e){return this._GlobalResInfo.get(e)},t.prototype.getStageSk=function(){return this._StageSkResInfo},t.prototype.getPlayerLevel=function(){return this._PlayerLevel},t}(e("../Framework/Utils/Singleton").Singleton());o.TABLE=c.inst,cc._RF.pop()},{"../Framework/Sys/TeMap":"TeMap","../Framework/Utils/Singleton":"Singleton"}],TalentItem:[function(e,t,o){"use strict";cc._RF.push(t,"379f5UsuE9K0r0fQ43wyGeM","TalentItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ani=null,t.icon=null,t.txtName=null,t.nodeLevel=null,t.nodeLevelBar1=null,t.nodeLevelBar2=null,t._bar1=[],t._bar2=[],t}return i(t,e),t.prototype.setLevel=function(e,t){if(this._bar1.length<t){this._bar1=[this.nodeLevelBar1],this._bar2=[this.nodeLevelBar2];for(var o=0;o<t-1;o++){var n=cc.instantiate(this.nodeLevelBar1),i=cc.instantiate(this.nodeLevelBar2);n.setParent(this.nodeLevel),i.setParent(this.nodeLevel),this._bar1.push(n),this._bar2.push(i)}}for(o=0;o<t;o++)o<e?(this._bar1[o].opacity=255,this._bar1[o].width=this.nodeLevel.width/t-this.nodeLevelBar2.width):this._bar1[o].opacity=0;this._bar2[t-1].active=!1},r([c(cc.Animation)],t.prototype,"ani",void 0),r([c(cc.Sprite)],t.prototype,"icon",void 0),r([c(cc.Label)],t.prototype,"txtName",void 0),r([c(cc.Node)],t.prototype,"nodeLevel",void 0),r([c(cc.Node)],t.prototype,"nodeLevelBar1",void 0),r([c(cc.Node)],t.prototype,"nodeLevelBar2",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],Talent:[function(e,t,o){"use strict";cc._RF.push(t,"9722f7zuX9Fj5WGeEuSSnTa","Talent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Controller/TableMgr"),c=e("../../../Define/Define"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/List/List"),u=e("../../../Framework/UI/UIFacade"),d=e("../../../Framework/UIBase"),h=e("../../../Framework/VM"),f=e("../../../Model/AchievementModel"),_=e("../../../Model/UserModel"),y=e("./TalentItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=null,t.icon=null,t.txtName=null,t.txtDesc=null,t.txtLevelUp=null,t.txtMoney=null,t.btns=[],t._select=-1,t._map={},t._icons=[],t}return i(t,e),t.prototype.onOpen=function(){var e=this;l.AudioMgr.inst.playEffectByName("ui_open"),s.TABLE.getTable("talent").forEach(function(t){null==e._map[t.id]&&(e._map[t.id]=[]),e._map[t.id].push(t)}),this.list.numItems=Object.keys(this._map).length,this.loadBundleRes("Textures",Object.values(c.TALENT_ICON_URL),cc.SpriteFrame,function(t,o){e._icons=o,e.list.updateAll()}),this.refresh(),this.updateMoney(_.UserModel.inst.money)},t.prototype.onEnable=function(){h.VM.bindPath("UserModel._money",this.updateMoney,this)},t.prototype.onDisable=function(){h.VM.unbindPath("UserModel._money",this.updateMoney,this)},t.prototype.updateMoney=function(e){this.txtMoney.string=""+e},t.prototype.refresh=function(){this.txtName.string="",this.txtDesc.string="",this.icon.spriteFrame=null,this.btns[0].node.active=!1,this.btns[1].node.active=!1,this.txtLevelUp.string=""+_.UserModel.inst.getTalentMoney()},t.prototype.onListRender=function(e,t){var o=this,n=Object.keys(this._map)[t],i=this._map[n],r=_.UserModel.inst.talent[n]||0,a=i.length,s=i[r]||i[0],c=e.getComponent(y.default);c.txtName.string=""+s.name,c.icon.spriteFrame=this._icons[s.iconIdx],c.setLevel(r,a),c.ani.node.active=this._select==t,e.targetOff(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,function(){l.AudioMgr.inst.playEffectByName("talentSelect"),o._select=t,o.txtName.string=s.name+"|Lv."+r,o.txtDesc.string=""+s.desc,o.txtLevelUp.string=""+_.UserModel.inst.getTalentMoney(),o.icon.spriteFrame=o._icons[s.iconIdx],o.btns[0].node.active=r<a,o.btns[1].node.active=r>=a,o.list.updateAll(),c.ani.node.active=!0,c.ani.play()})},t.prototype.onClickLevelUp=function(){var e=_.UserModel.inst.getTalentMoney();if(_.UserModel.inst.money<e)return l.AudioMgr.inst.playEffectByName("ui_not"),void u.UIFacade.showToast("\u91d1\u5e01\u4e0d\u8db3");l.AudioMgr.inst.playEffectByName("talentLevelUp"),f.AchievementModel.inst.addPoint(4);var t=Object.keys(this._map)[this._select],o=this._map[t],n=_.UserModel.inst.talent[t]||0,i=o.length;_.UserModel.inst.talent[t]=n+=1,_.UserModel.inst.talent=_.UserModel.inst.talent,_.UserModel.inst.money-=e,this.btns[0].node.active=n<i,this.btns[1].node.active=n>=i;var r=o[n-1];this.txtName.string=r.name+"|Lv."+n,this.txtDesc.string=""+r.desc,this.onListRender(this.list.getItemByListId(this._select),this._select)},t.prototype.onClickRefreshTalent=function(){var e=this;0!=_.UserModel.inst.getTalentCount()?u.UIFacade.showConfirmAD("","\u4f60\u786e\u5b9a\u8981\u91cd\u7f6e\u5929\u8d4b\u5417\uff1f","\u786e\u5b9a","\u53d6\u6d88").then(function(){a.default.inst.showAd("\u83dc\u5355\u91cd\u7f6e\u5929\u8d4b",function(){var t=_.UserModel.inst.getTalentCount(),o=s.TABLE.getTable("talentLevelUpMoney"),n=0;o.forEach(function(e){e.num<t&&(n+=e.money)}),_.UserModel.inst.talent={},_.UserModel.inst.money+=n,e._select=-1,e.list.updateAll(),e.refresh()})}):u.UIFacade.showToast("\u8fd8\u6ca1\u70b9\u5929\u8d4b")},r([v(p.default)],t.prototype,"list",void 0),r([v(cc.Sprite)],t.prototype,"icon",void 0),r([v(cc.Label)],t.prototype,"txtName",void 0),r([v(cc.Label)],t.prototype,"txtDesc",void 0),r([v(cc.Label)],t.prototype,"txtLevelUp",void 0),r([v(cc.Label)],t.prototype,"txtMoney",void 0),r([v(cc.Button)],t.prototype,"btns",void 0),r([m],t)}(d.default);o.default=M,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TableMgr":"TableMgr","../../../Define/Define":"Define","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/List/List":"List","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/VM":"VM","../../../Model/AchievementModel":"AchievementModel","../../../Model/UserModel":"UserModel","./TalentItem":"TalentItem"}],TaskModel:[function(e,t,o){"use strict";cc._RF.push(t,"31efa3j0yFF/4U+8ydGS806","TaskModel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.TaskModel=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._taskData=null,t}return i(t,e),Object.defineProperty(t.prototype,"TaskData",{get:function(){return this._taskData},set:function(e){this._taskData=e},enumerable:!1,configurable:!0}),t}(e("../Framework/Utils/Singleton").Singleton());o.TaskModel=r,cc._RF.pop()},{"../Framework/Utils/Singleton":"Singleton"}],Task:[function(e,t,o){"use strict";cc._RF.push(t,"6c7e7q3PxVKxox4RbtjDIHz","Task");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._index=0,t.steps=[],t}return i(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(e){this._index=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetNode",{get:function(){return this._targetNode},set:function(e){this._targetNode=e},enumerable:!1,configurable:!0}),r([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],TeMap:[function(e,t,o){"use strict";cc._RF.push(t,"447f2WtSARLxbL0VCqFrwvW","TeMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this._data={},e&&(this._data=e)}return e.prototype.has=function(e){return null!=e&&null!=e&&this._data.hasOwnProperty(e.toString())},e.prototype.get=function(e){return null==e||null==e?null:this._data[e.toString()]},e.prototype.set=function(e,t){this._data[e.toString()]=t},Object.defineProperty(e.prototype,"keys",{get:function(){return Object.keys(this._data)},enumerable:!1,configurable:!0}),e.prototype.get_keys=function(){return this.keys},e.prototype.del=function(e){delete this._data[e.toString()]},e.prototype.rand=function(){var e=this.keys,t=e[Math.floor(Math.random()*e.length)];return this.get(t)},e.prototype.clear=function(){this._data={}},e.prototype.getLength=function(){return this.keys.length},e}();o.default=n,cc._RF.pop()},{}],TestWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"289eem1B3dA8KFSpNxbRUTy","TestWeapon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Define/Define"),s=e("../Define/EventId"),c=e("../Define/UIDefs"),l=e("../Framework/Event/EventMgr"),p=e("../Framework/List/List"),u=e("../Framework/List/ListItem"),d=e("../Framework/UI/UIMgr"),h=e("../Model/GameModel"),f=e("../Model/WeaponModel"),_=cc._decorator,y=_.ccclass,g=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list=null,t.ebEquip=null,t}return i(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){l.EVENT.on(s.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.on(s.EventId.ON_GAME_OVER,this.gameOver,this),l.EVENT.on(s.EventId.ON_GAME_SKILL_REFUSE,this.onListUpdate,this)},t.prototype.onDisable=function(){l.EVENT.off(s.EventId.ON_GAME_LOADED,this.gameLoaded,this),l.EVENT.off(s.EventId.ON_GAME_OVER,this.gameOver,this),l.EVENT.off(s.EventId.ON_GAME_SKILL_REFUSE,this.onListUpdate,this)},t.prototype.gameLoaded=function(){var e=Object.keys(f.WeaponModel.inst.weaponList);this.list.numItems=e.length},t.prototype.gameOver=function(){this.list.numItems=0},t.prototype.onListUpdate=function(){if(null==this.list.numItems){var e=Object.keys(f.WeaponModel.inst.weaponList);this.list.numItems=e.length}else this.list.updateAll()},t.prototype.onListRender=function(e,t){var o,n=e.getComponent(u.default).title.getComponent(cc.Label),i=Object.keys(f.WeaponModel.inst.weaponList)[t],r=(null===(o=f.WeaponModel.inst.weaponCom[i])||void 0===o?void 0:o.getLevel())||0;n.string=a.SKILL_NAME[i]+" | Lv."+r,e.targetOff(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,function(){var e,t=(null===(e=f.WeaponModel.inst.weaponCom[i])||void 0===e?void 0:e.getLevel())||0;l.EVENT.emit(s.EventId.ON_GAME_SKILL_LEVEL_UP,i,t+1)})},t.prototype.onClickResult=function(){h.GameModel.inst.isFinished=!0,l.EVENT.emit(s.EventId.ON_GAME_RESULT)},t.prototype.onClickLevelUp=function(){h.GameModel.inst.level++,f.WeaponModel.inst.skillPoint++},t.prototype.onClickEquip=function(){d.default.inst.open(c.UIType.FightEquip,this.ebEquip.string)},r([g(p.default)],t.prototype,"list",void 0),r([g(cc.EditBox)],t.prototype,"ebEquip",void 0),r([y],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../Define/Define":"Define","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/List/List":"List","../Framework/List/ListItem":"ListItem","../Framework/UI/UIMgr":"UIMgr","../Model/GameModel":"GameModel","../Model/WeaponModel":"WeaponModel"}],TimeMgr:[function(e,t,o){"use strict";cc._RF.push(t,"b6d081+/f1AwbCsWJal8mLb","TimeMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Framework/Utils/Singleton"),a=e("./NativeMgr"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.init=function(e){this._localtime=Date.now(),this._webtime=a.default.inst.getWebTime(),this._webtime?(e(!0),this._difference=this._webtime-this._localtime,cc.game.on(cc.game.EVENT_SHOW,this._gameShow,this),cc.game.on(cc.game.EVENT_HIDE,this._gameHide,this)):e(!1)},t.prototype.now=function(){return Date.now()+this._difference},t.prototype._gameShow=function(){var e=Date.now()-this._lastLocaltime,t=a.default.inst.getActivityTime()-this._lastActivity-e;Math.abs(t)>10&&(this._difference+=t)},t.prototype._gameHide=function(){this._lastLocaltime=Date.now(),this._lastActivity=a.default.inst.getActivityTime()},t.prototype.isSameDay=function(e,t){return new Date(e).setHours(0,0,0,0)===new Date(t).setHours(0,0,0,0)},t.prototype.getCurToZero=function(){return new Date(this.now()).setHours(24,0,0,0)-this.now()},t}(r.Singleton());o.default=s,cc._RF.pop()},{"../Framework/Utils/Singleton":"Singleton","./NativeMgr":"NativeMgr"}],UIBase:[function(e,t,o){"use strict";cc._RF.push(t,"e0585CZW5BBgK519LYoyYnN","UIBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.UIShowTypes=void 0;var a,s=e("../Define/UIDefs"),c=e("./UI/UIMgr"),l=e("./Res/ResKeeperAddition"),p=cc._decorator,u=p.ccclass,d=p.property;(function(e){e[e.UIFullScreen=0]="UIFullScreen",e[e.UIAddition=1]="UIAddition",e[e.UISingle=2]="UISingle"})(a=o.UIShowTypes||(o.UIShowTypes={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showType=a.UISingle,t.quickClose=!0,t.showLayer=s.LayerType.Pop,t.maskOpacity=255,t._para=null,t.isPlayOpenAni=!1,t.UIid=0,t}return i(t,e),t.prototype.close=function(){c.default.inst.close(this.uiType)},t.prototype.init=function(e,t){this._para=Object.assign({},e),this.uiType=t},t.prototype.onOpen=function(){},t.prototype.onOpenAniOver=function(){},t.prototype.onClose=function(){},t.prototype.onTop=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o]},r([d({type:cc.Enum(a),displayName:"\u663e\u793a\u7c7b\u578b"})],t.prototype,"showType",void 0),r([d()],t.prototype,"quickClose",void 0),r([d({type:cc.Enum(s.LayerType)})],t.prototype,"showLayer",void 0),r([d()],t.prototype,"maskOpacity",void 0),r([u],t)}(l.default);o.default=h,cc._RF.pop()},{"../Define/UIDefs":"UIDefs","./Res/ResKeeperAddition":"ResKeeperAddition","./UI/UIMgr":"UIMgr"}],UICloseAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"0a83aI6odRAhpOnBMcQ6/en","UICloseAnimation");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),r([s],t)}(cc.Animation));o.default=c,cc._RF.pop()},{}],UIDefs:[function(e,t,o){"use strict";var n;cc._RF.push(t,"cfbd74GR/NOr782467+09nO","UIDefs"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIDataInfo=o.UIType=o.LayerType=void 0,function(e){e[e.GUI=0]="GUI",e[e.Pop=1]="Pop",e[e.Tip=2]="Tip",e[e.Top=3]="Top"}(o.LayerType||(o.LayerType={})),function(e){e[e.$Start=0]="$Start",e[e.UIMain=1]="UIMain",e[e.UIGame=2]="UIGame",e[e.Confirm=3]="Confirm",e[e.ConfirmAD=4]="ConfirmAD",e[e.Loading=5]="Loading",e[e.Setting=6]="Setting",e[e.Stop=7]="Stop",e[e.GameStart=8]="GameStart",e[e.GameOver=9]="GameOver",e[e.GamePause=10]="GamePause",e[e.AgeTips=11]="AgeTips",e[e.StoreReview=12]="StoreReview",e[e.Talent=13]="Talent",e[e.StageMap=14]="StageMap",e[e.StageBox=15]="StageBox",e[e.StageBoxTips=16]="StageBoxTips",e[e.SelectWeapon=17]="SelectWeapon",e[e.Magnet=18]="Magnet",e[e.Supply=19]="Supply",e[e.GodMenu=20]="GodMenu",e[e.GodMenuNew=21]="GodMenuNew",e[e.GodMenuView=22]="GodMenuView",e[e.GodWeapon=23]="GodWeapon",e[e.GodWeaponReward=24]="GodWeaponReward",e[e.GodSkin=25]="GodSkin",e[e.GodPet=26]="GodPet",e[e.GodRide=27]="GodRide",e[e.EliteBox=28]="EliteBox",e[e.FightEquip=29]="FightEquip",e[e.FightEquipTips=30]="FightEquipTips",e[e.FightEquipGuide=31]="FightEquipGuide",e[e.Achievement=32]="Achievement",e[e.XiuLian=33]="XiuLian",e[e.XiuLianTip=34]="XiuLianTip",e[e.XiuLianAD=35]="XiuLianAD",e[e.XiuLianResult=36]="XiuLianResult",e[e.DrawSkill=37]="DrawSkill",e[e.GetMoney=38]="GetMoney",e[e.$End=39]="$End"}(n=o.UIType||(o.UIType={}));var i=function(){function e(e,t,o,n){void 0===o&&(o=!0),void 0===n&&(n=!1),this.preventTouch=!0,this.cache=!1,this.uiType=e,this.uiPath=t,this.preventTouch=o,this.cache=n}return Object.defineProperty(e.prototype,"bundleName",{get:function(){return"Prefabs"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.uiPath},enumerable:!1,configurable:!0}),e.getUIData=function(e){for(var t=0;t<this._uiDataList.length;++t)if(this._uiDataList[t].uiType==e)return this._uiDataList[t];return null},e._uiDataList=[new e(n.UIMain,"/UIMain",!1),new e(n.UIGame,"/UIGame",!1),new e(n.AgeTips,"/UIPrefab/Pop/AgeTips"),new e(n.StoreReview,"/UIPrefab/Pop/StoreReview"),new e(n.Setting,"/UIPrefab/Setting"),new e(n.Stop,"/UIPrefab/Stop"),new e(n.Confirm,"/UIPrefab/Confirm"),new e(n.ConfirmAD,"/UIPrefab/ConfirmAD"),new e(n.Loading,"/UIPrefab/Loading"),new e(n.GameStart,"/UIPrefab/GameStart"),new e(n.GamePause,"/UIPrefab/GamePause"),new e(n.GameOver,"/UIPrefab/GameOver"),new e(n.Talent,"/UIPrefab/Talent"),new e(n.StageMap,"/UIPrefab/StageMap"),new e(n.StageBox,"/UIPrefab/StageBox"),new e(n.StageBoxTips,"/UIPrefab/StageBoxTips"),new e(n.SelectWeapon,"/UIPrefab/SelectWeapon"),new e(n.Magnet,"/UIPrefab/Magnet"),new e(n.Supply,"/UIPrefab/Supply"),new e(n.GodMenu,"/UIPrefab/GodMenu"),new e(n.GodMenuNew,"/UIPrefab/GodMenuNew"),new e(n.GodMenuView,"/UIPrefab/GodMenuView"),new e(n.GodWeapon,"/UIPrefab/GodWeapon"),new e(n.GodWeaponReward,"/UIPrefab/GodWeaponReward"),new e(n.GodSkin,"/UIPrefab/GodSkin"),new e(n.GodPet,"/UIPrefab/GodPet"),new e(n.GodRide,"/UIPrefab/GodRide"),new e(n.GetMoney,"/UIPrefab/GetMoney"),new e(n.EliteBox,"/UIPrefab/EliteBox"),new e(n.FightEquip,"/UIPrefab/FightEquip"),new e(n.FightEquipTips,"/UIPrefab/FightEquipTips"),new e(n.FightEquipGuide,"/UIPrefab/FightEquipGuide"),new e(n.DrawSkill,"/UIPrefab/DrawSkill"),new e(n.Achievement,"/UIPrefab/Achievement"),new e(n.XiuLian,"/UIPrefab/XiuLian"),new e(n.XiuLianTip,"/UIPrefab/XiuLianTip"),new e(n.XiuLianAD,"/UIPrefab/XiuLianAD"),new e(n.XiuLianResult,"/UIPrefab/XiuLianResult")],e}();o.UIDataInfo=i,cc._RF.pop()},{}],UIFacade:[function(e,t,o){"use strict";cc._RF.push(t,"16e3aBpWmhDeZYUzLRkyJpM","UIFacade");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{c(n.next(e))}catch(t){r(t)}}function s(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UIFacade=void 0;var r=e("./UIMgr"),a=e("../../Define/UIDefs"),s=function(){function e(){}return e.showToast=function(e){r.default.inst.showToast(e)},e.showConfirm=function(e,t,o,s,c,l,p){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(n,i){r.default.inst.open(a.UIType.Confirm,{text:[e,t,o,s],dot:[c,l],close:p,confirm:o?n:null,cancel:s?i:null})})]})})},e.showConfirmAD=function(e,t,o,s,c,l,p){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(n,i){r.default.inst.open(a.UIType.ConfirmAD,{text:[e,t,o,s],dot:[c,l],close:p,confirm:o?n:null,cancel:s?i:null})})]})})},e}();o.UIFacade=s,cc._RF.pop()},{"../../Define/UIDefs":"UIDefs","./UIMgr":"UIMgr"}],UIGame:[function(e,t,o){"use strict";cc._RF.push(t,"73818IatEVFkaM15Krp5VHS","UIGame");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../../Controller/NativeMgr"),c=e("../../Define/Define"),l=e("../../Define/EventId"),p=e("../../Define/UIDefs"),u=e("../../Framework/Audio/AudioMgr"),d=e("../../Framework/Event/EventMgr"),h=e("../../Framework/List/List"),f=e("../../Framework/UI/UIMgr"),_=e("../../Framework/UIBase"),y=e("../../Framework/Utils/Utils"),g=e("../../Framework/VM"),m=e("../../Guide/GodGuide"),v=e("../../Model/GameModel"),M=e("../../Model/MagnetModel"),b=e("../../Model/WeaponModel"),I=e("../Items/SkillDrawUI"),E=e("../Items/SkillUI"),O=e("./Event/FightEquipItem"),S=cc._decorator,w=S.ccclass,R=S.property;(function(e){e[e.equip=0]="equip"})(a||(a={}));var P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listSkillDraw=null,t.listSkill=null,t.renderSkill=null,t.txtMonster=null,t.txtMoney=null,t.txtWave=null,t.txtTime=null,t.txtLevel=null,t.pbExp=null,t.spExp=null,t.btnFightEquip=null,t.equipItem=null,t.Magnet=null,t.MagnetSpine=null,t.MagnetSprite=null,t.MagnetImgs=[],t.MagnetArrow=null,t._icons=[],t._first=!1,t}return i(t,e),t.prototype.onOpen=function(){var e=this;u.AudioMgr.inst.playBgm("bg1"),this._first=m.default.inst.node.active,this.listSkill.numItems=10,this.spExp.node.active=!1,this.addItemPool(a.equip,this.equipItem),this.updateMonster(v.GameModel.inst.monster),this.updateMoney(v.GameModel.inst.money),this.updateWave(v.GameModel.inst.wave),this.updateTime(v.GameModel.inst.time),this.updateExp(v.GameModel.inst.exp),this.updateLevel(v.GameModel.inst.level),this.loadBundleRes("Textures",Object.values(c.SKILL_ICON_URL),cc.SpriteFrame,function(t,o){e._icons=o,e.listSkill.updateAll()})},t.prototype.onLoad=function(){g.VM.bindPath("GameModel._monster",this.updateMonster,this),g.VM.bindPath("GameModel._money",this.updateMoney,this),g.VM.bindPath("GameModel._wave",this.updateWave,this),g.VM.bindPath("GameModel._time",this.updateTime,this),g.VM.bindPath("GameModel._exp",this.updateExp,this),g.VM.bindPath("GameModel._level",this.updateLevel,this),d.EVENT.on(l.EventId.ON_UI_GAME_FLY_EQUIP,this.onFlyEquip,this),d.EVENT.on(l.EventId.ON_GAME_SKILL_REFUSE,this.onListSkillUpdate,this),d.EVENT.on(l.EventId.ON_GAME_DRAW_SKILL_REFUSE,this.onListSkillDrawUpdate,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),g.VM.unbindPath("GameModel._monster",this.updateMonster,this),g.VM.unbindPath("GameModel._money",this.updateMoney,this),g.VM.unbindPath("GameModel._wave",this.updateWave,this),g.VM.unbindPath("GameModel._time",this.updateTime,this),g.VM.unbindPath("GameModel._exp",this.updateExp,this),g.VM.unbindPath("GameModel._level",this.updateLevel,this),d.EVENT.off(l.EventId.ON_UI_GAME_FLY_EQUIP,this.onFlyEquip,this),d.EVENT.off(l.EventId.ON_GAME_SKILL_REFUSE,this.onListSkillUpdate,this),d.EVENT.off(l.EventId.ON_GAME_DRAW_SKILL_REFUSE,this.onListSkillDrawUpdate,this)},t.prototype.onListSkillUpdate=function(e){var t=Object.keys(b.WeaponModel.inst.weaponCom);t.length<10?this.listSkill.numItems=10:t.length>10&&this.listSkill.numItems!=t.length&&(this.listSkill.numItems=t.length),this.listSkill.updateItem(t.indexOf(e))},t.prototype.onListSkillDrawUpdate=function(){var e=Object.keys(b.WeaponModel.inst.weaponDrawCom);this.listSkillDraw.numItems!=e.length?this.listSkillDraw.numItems=e.length:this.listSkillDraw.updateAll()},t.prototype.onListSkillRender=function(e,t){var o,n=Object.keys(b.WeaponModel.inst.weaponCom)[t],i=e.getComponent(E.default);if(null==n)return i.icon.spriteFrame=null,void(i.txtLevel.string="");var r=(null===(o=b.WeaponModel.inst.weaponCom[n])||void 0===o?void 0:o.getLevel())||0;i.icon.spriteFrame=this._icons[Object.keys(c.SKILL_ICON_URL).indexOf(n)],i.txtLevel.string="Lv."+r,null==i.render.renderTarget&&(i.render.target=this.listSkill.content,i.render.renderTarget=this.renderSkill)},t.prototype.onListSkillDrawRender=function(e,t){var o=Object.keys(b.WeaponModel.inst.weaponDrawCom),n=b.WeaponModel.inst.weaponDrawCom[o[t]],i=e.getComponent(I.default),r=n.getDrawInfo();i.setDraw(r.points,r.colors,r.dur)},t.prototype.updateMonster=function(e){this.txtMonster.string=""+e},t.prototype.updateMoney=function(e){this.txtMoney.string=""+e},t.prototype.updateWave=function(e){this.txtWave.string="\u7b2c"+e+"/"+v.GameModel.inst.waveMax+"\u6ce2"},t.prototype.updateTime=function(e){this.txtTime.string=""+y.default.formatTime(1e3*e,"mm:ss")},t.prototype.updateExp=function(e){var t=this;this.spExp.node.active=!0,cc.Tween.stopAllByTarget(this.pbExp),cc.tween(this.pbExp).to(.2,{progress:e/v.GameModel.inst.getLevelExp()}).call(function(){t.spExp.node.active=!1}).start()},t.prototype.updateLevel=function(e){this.txtLevel.string=""+(e+1)},t.prototype.onFlyEquip=function(e,t,o,n){var i=this,r=this.btnFightEquip.node,s=this.get(a.equip);s.getComponent(O.default).setData(t);var c=f.default.inst.topLayer,l=c.convertToNodeSpaceAR(e),p=c.convertToNodeSpaceAR(r.convertToWorldSpaceAR(cc.Vec2.ZERO)),u=(null==n?void 0:n.scale)||.8,d=(null==n?void 0:n.scale2)||.5,h=(null==n?void 0:n.scale3)||.4,_=(null==n?void 0:n.delay)||.5;s.setScale(u),s.setParent(c),s.setPosition(l);var y=l.sub(p),g=y.len()/1e3,m=Math.random(),v=l,M=cc.v2(l.x-.4*y.x+m*y.len()-y.len()/2,l.y-.4*y.y+m*y.len()-y.len()/2),b=p;s.opacity=0,cc.tween(s).to(.1,{opacity:255}).start(),cc.tween(s).delay(_).parallel(cc.tween().to(g,{scale:d},{easing:"sineIn"}),cc.tween().bezierTo(g,v,M,b)).call(o).to(.3,{scale:h,opacity:0}).call(function(){return i.put(a.equip,s)}).start()},t.prototype.onClickStop=function(){v.GameModel.inst.isGuide||v.GameModel.inst.isPause||(d.EVENT.emit(l.EventId.ON_GAME_PAUSE),f.default.inst.open(p.UIType.Stop))},t.prototype.onClickFight=function(){v.GameModel.inst.isGuide||v.GameModel.inst.isPause||(d.EVENT.emit(l.EventId.ON_GAME_PAUSE),f.default.inst.open(p.UIType.FightEquip))},t.prototype.onClickMagnet=function(){v.GameModel.inst.isGuide||v.GameModel.inst.isPause||(d.EVENT.emit(l.EventId.ON_GAME_PAUSE),f.default.inst.open(p.UIType.Magnet))},t.prototype.onClickUserFeedback=function(){s.default.inst.openUserFeedback()},t.prototype.onClickMoney=function(){s.default.inst._debug&&f.default.inst.open(p.UIType.DrawSkill)},t.prototype.checkMagnet=function(){if(this._first&&1==v.GameModel.inst.stage&&v.GameModel.inst.wave<3)return this.Magnet.active=!1,void(this.MagnetArrow.active=!1);M.MagnetModel.inst.isActive()?(this.Magnet.active=!1,this.MagnetArrow.active=!1):(this.Magnet.active=!0,this.MagnetArrow.active=0==M.MagnetModel.inst.count&&!m.default.inst.node.active,this.MagnetSpine.node.active=!1,this.MagnetSprite.spriteFrame!=this.MagnetImgs[1]&&(this.MagnetSprite.spriteFrame=this.MagnetImgs[1]))},t.prototype.update=function(e){this.checkMagnet(e)},r([R(h.default)],t.prototype,"listSkillDraw",void 0),r([R(h.default)],t.prototype,"listSkill",void 0),r([R(cc.Node)],t.prototype,"renderSkill",void 0),r([R(cc.Label)],t.prototype,"txtMonster",void 0),r([R(cc.Label)],t.prototype,"txtMoney",void 0),r([R(cc.Label)],t.prototype,"txtWave",void 0),r([R(cc.Label)],t.prototype,"txtTime",void 0),r([R(cc.Label)],t.prototype,"txtLevel",void 0),r([R(cc.ProgressBar)],t.prototype,"pbExp",void 0),r([R(sp.Skeleton)],t.prototype,"spExp",void 0),r([R(cc.Button)],t.prototype,"btnFightEquip",void 0),r([R(cc.Prefab)],t.prototype,"equipItem",void 0),r([R({type:cc.Node,tooltip:"\u78c1\u5438\u6548\u5e94"})],t.prototype,"Magnet",void 0),r([R({type:sp.Skeleton,tooltip:"\u78c1\u5438\u6548\u5e94Spine"})],t.prototype,"MagnetSpine",void 0),r([R({type:cc.Sprite,tooltip:"\u78c1\u5438\u6548\u5e94\u56fe\u7247"})],t.prototype,"MagnetSprite",void 0),r([R({type:[cc.SpriteFrame],tooltip:"\u78c1\u5438\u6548\u5e94\u66ff\u6362\u56fe\u7247"})],t.prototype,"MagnetImgs",void 0),r([R({type:cc.Node,tooltip:"\u78c1\u5438\u6548\u5e94\u7bad\u5934"})],t.prototype,"MagnetArrow",void 0),r([w],t)}(_.default);o.default=P,cc._RF.pop()},{"../../Controller/NativeMgr":"NativeMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/List/List":"List","../../Framework/UI/UIMgr":"UIMgr","../../Framework/UIBase":"UIBase","../../Framework/Utils/Utils":"Utils","../../Framework/VM":"VM","../../Guide/GodGuide":"GodGuide","../../Model/GameModel":"GameModel","../../Model/MagnetModel":"MagnetModel","../../Model/WeaponModel":"WeaponModel","../Items/SkillDrawUI":"SkillDrawUI","../Items/SkillUI":"SkillUI","./Event/FightEquipItem":"FightEquipItem"}],UIMain:[function(e,t,o){"use strict";cc._RF.push(t,"64dc2vxx9NF7rh3Un1/4iJ5","UIMain");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../../Controller/NativeMgr"),c=e("../../Controller/TimeMgr"),l=e("../../Define/EventId"),p=e("../../Define/RedDotKey"),u=e("../../Define/UIDefs"),d=e("../../Framework/Audio/AudioMgr"),h=e("../../Framework/Event/EventMgr"),f=e("../../Framework/Event/RedDot"),_=e("../../Framework/UI/UIFacade"),y=e("../../Framework/UI/UIMgr"),g=e("../../Framework/UIBase"),m=e("../../Framework/VM"),v=e("../../Guide/GodGuide"),M=e("../../Model/AchievementModel"),b=e("../../Model/GameModel"),I=e("../../Model/GodPetModel"),E=e("../../Model/GodRideModel"),O=e("../../Model/GodSkinModel"),S=e("../../Model/GodWeaponModel"),w=e("../../Model/SupplyModel"),R=e("../../Model/UserModel"),P=e("../../Model/XiuLianModel"),T=e("../Items/IconItem"),A=cc._decorator,L=A.ccclass,C=A.property;(function(e){e[e.icon=0]="icon"})(a||(a={}));var U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconItem=null,t.txtMoney=null,t.TxtRMoney=null,t.Money=null,t.RMoney=null,t.Achievement=null,t.GodRide=null,t.GodWeapon=null,t.GodWeaponReward=null,t.GodPet=null,t.GodSkin=null,t.GodRideBan=null,t.GodWeaponBan=null,t.GodPetBan=null,t.GodSkinBan=null,t.Talent=null,t.XiuLian=null,t.LiangCaoBuJi=null,t}return i(t,e),t.prototype.onOpen=function(){d.AudioMgr.inst.playBgm("bgMenu"),v.default.inst.run(),0==R.UserModel.inst.isRealNameReward&&s.default.inst.checkDeviceRealName(),M.AchievementModel.inst.checkGet(),this.addItemPool(a.icon,this.iconItem),this.updateStage(R.UserModel.inst.curStage),this.updateMoney(R.UserModel.inst.money),this.updateRMoney(R.UserModel.inst.rMoney)},t.prototype.onLoad=function(){m.VM.bindPath("UserModel._money",this.updateMoney,this),m.VM.bindPath("UserModel._rMoney",this.updateRMoney,this),m.VM.bindPath("UserModel._curStage",this.updateStage,this),h.EVENT.on(l.EventId.ON_GAME_START,this.gameStart,this),h.EVENT.on(l.EventId.ON_GAME_OVER,this.gameOver,this),h.EVENT.on(l.EventId.ON_UI_MAIN_FLY_ICON,this.onFlyIcon,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),m.VM.unbindPath("UserModel._money",this.updateMoney,this),m.VM.unbindPath("UserModel._rMoney",this.updateRMoney,this),m.VM.unbindPath("UserModel._curStage",this.updateStage,this),h.EVENT.off(l.EventId.ON_GAME_START,this.gameStart,this),h.EVENT.off(l.EventId.ON_GAME_OVER,this.gameOver,this),h.EVENT.off(l.EventId.ON_UI_MAIN_FLY_ICON,this.onFlyIcon,this)},t.prototype.updateMoney=function(e){this.txtMoney.string=""+e,f.RedDot.inst.setRedDot(p.RedDotKey.Talent,R.UserModel.inst.canTalentBuy()?1:0)},t.prototype.updateRMoney=function(e){this.TxtRMoney.string=""+e,f.RedDot.inst.setRedDot(p.RedDotKey.GodRide,E.GodRideModel.inst.canLevelUp()?1:0),f.RedDot.inst.setRedDot(p.RedDotKey.GodWeapon,S.GodWeaponModel.inst.canLevelUp()?1:0),f.RedDot.inst.setRedDot(p.RedDotKey.GodPet,I.GodPetModel.inst.canLevelUp()?1:0),f.RedDot.inst.setRedDot(p.RedDotKey.GodSkin,O.GodSkinModel.inst.canLevelUp()?1:0),this.scheduleOnce(function(){return M.AchievementModel.inst.checkGet()})},t.prototype.updateStage=function(e){this.Talent.active=e>R.UserModel.inst.talentOpenStage,this.GodWeaponReward.active=e>R.UserModel.inst.godWeaponsRewardShowStage&&0==S.GodWeaponModel.inst.isUnlock,this.GodRideBan.active=e<=R.UserModel.inst.rideOpenStage,this.GodWeaponBan.active=e<=R.UserModel.inst.godWeaponOpenStage,this.GodPetBan.active=e<=R.UserModel.inst.godPetOpenStage,this.GodSkinBan.active=e<=R.UserModel.inst.godSkinBanOpenStage,this.LiangCaoBuJi.active=e>w.SupplyModel.inst.openStage,e>w.SupplyModel.inst.openStage&&0==w.SupplyModel.inst.freetime2&&(w.SupplyModel.inst.freetime2=c.default.inst.now()),f.RedDot.inst.setRedDot(p.RedDotKey.GodWeaponReward,e>=R.UserModel.inst.godWeaponsRewardOpenStage?1:0)},t.prototype.updateXiuLian=function(){R.UserModel.inst.curStage>R.UserModel.inst.xiuLianOpenStage?f.RedDot.inst.setRedDot(p.RedDotKey.XiuLian,P.XiuLianModel.inst.money+P.XiuLianModel.inst.forecastMoney()>P.XiuLianModel.inst.getMoney()?1:0):f.RedDot.inst.setRedDot(p.RedDotKey.XiuLian,0)},t.prototype.gameStart=function(){},t.prototype.gameOver=function(){},t.prototype.onFlyIcon=function(e,t,o,n){var i=this,r=(null==n?void 0:n.target)||this[""+t];if(null!=r){var s=this.get(a.icon);s.getComponent(T.default).setIcon(t);var c=y.default.inst.topLayer,l=c.convertToNodeSpaceAR(e),p=c.convertToNodeSpaceAR(r.convertToWorldSpaceAR(cc.Vec2.ZERO)),u=(null==n?void 0:n.scale)||.8,d=(null==n?void 0:n.scale2)||.5,h=(null==n?void 0:n.scale3)||.4,f=(null==n?void 0:n.delay)||.5;s.setScale(u),s.setParent(c),s.setPosition(l);var _=l.sub(p),g=_.len()/1e3,m=Math.random(),v=l,M=cc.v2(l.x-.4*_.x+m*_.len()-_.len()/2,l.y-.4*_.y+m*_.len()-_.len()/2),b=p;s.opacity=0,cc.tween(s).to(.1,{opacity:255}).start(),cc.tween(s).delay(f).parallel(cc.tween().to(g,{scale:d},{easing:"sineIn"}),cc.tween().bezierTo(g,v,M,b)).call(o).to(.3,{scale:h,opacity:0}).call(function(){return i.put(a.icon,s)}).start()}else console.error("target err: "+t)},t.prototype.onClickPause=function(){y.default.inst.open(u.UIType.GamePause)},t.prototype.onClickExit=function(){h.EVENT.emit(l.EventId.ON_GAME_OVER,1),y.default.inst.open(u.UIType.GameStart)},t.prototype.onClickSupply=function(){y.default.inst.open(u.UIType.Supply)},t.prototype.onClickGodWeaponReward=function(){y.default.inst.open(u.UIType.GodWeaponReward)},t.prototype.onClickTalent=function(){if(R.UserModel.inst.curStage<=R.UserModel.inst.talentOpenStage)return d.AudioMgr.inst.playEffectByName("ui_not"),void _.UIFacade.showToast("\u901a\u8fc7\u7b2c"+R.UserModel.inst.talentOpenStage+"\u5173\u89e3\u9501\u5929\u8d4b\u7cfb\u7edf");y.default.inst.open(u.UIType.Talent)},t.prototype.onClickXiuLian=function(){if(R.UserModel.inst.curStage<=R.UserModel.inst.xiuLianOpenStage)return d.AudioMgr.inst.playEffectByName("ui_not"),void _.UIFacade.showToast("\u901a\u8fc7\u7b2c"+R.UserModel.inst.xiuLianOpenStage+"\u5173\u89e3\u9501\u4fee\u70bc\u7cfb\u7edf");y.default.inst.open(u.UIType.XiuLian)},t.prototype.onClickRide=function(){if(R.UserModel.inst.curStage<=R.UserModel.inst.rideOpenStage)return d.AudioMgr.inst.playEffectByName("ui_not"),void _.UIFacade.showToast("\u901a\u8fc7\u7b2c"+R.UserModel.inst.rideOpenStage+"\u5173\u89e3\u9501\u5750\u9a91\u7cfb\u7edf");y.default.inst.open(u.UIType.GodRide,{type:0})},t.prototype.onClickGodWeapon=function(){if(R.UserModel.inst.curStage<=R.UserModel.inst.godWeaponOpenStage)return d.AudioMgr.inst.playEffectByName("ui_not"),void _.UIFacade.showToast("\u901a\u8fc7\u7b2c"+R.UserModel.inst.godWeaponOpenStage+"\u5173\u89e3\u9501\u795e\u5175\u7cfb\u7edf");y.default.inst.open(u.UIType.GodWeapon,{type:1})},t.prototype.onClickGodPet=function(){if(R.UserModel.inst.curStage<=R.UserModel.inst.godPetOpenStage)return d.AudioMgr.inst.playEffectByName("ui_not"),void _.UIFacade.showToast("\u901a\u8fc7\u7b2c"+R.UserModel.inst.godPetOpenStage+"\u5173\u89e3\u9501\u795e\u517d\u7cfb\u7edf");y.default.inst.open(u.UIType.GodPet,{type:2})},t.prototype.onClickGodSkin=function(){if(R.UserModel.inst.curStage<=R.UserModel.inst.godSkinBanOpenStage)return d.AudioMgr.inst.playEffectByName("ui_not"),void _.UIFacade.showToast("\u901a\u8fc7\u7b2c"+R.UserModel.inst.godSkinBanOpenStage+"\u5173\u89e3\u9501\u65f6\u88c5\u7cfb\u7edf");y.default.inst.open(u.UIType.GodSkin,{type:3})},t.prototype.onClickAchievement=function(){y.default.inst.open(u.UIType.Achievement)},t.prototype.onClickMap=function(){y.default.inst.open(u.UIType.StageMap)},t.prototype.onClickSetting=function(){y.default.inst.open(u.UIType.Setting)},t.prototype.onClickStop=function(){b.GameModel.inst.isGuide||y.default.inst.open(u.UIType.Stop)},t.prototype.onClickFight=function(){b.GameModel.inst.isGuide||y.default.inst.open(u.UIType.FightEquip)},t.prototype.onClickMagnet=function(){b.GameModel.inst.isGuide||y.default.inst.open(u.UIType.Magnet)},t.prototype.onClickUserFeedback=function(){s.default.inst.openUserFeedback()},t.prototype.onClickMoney=function(){s.default.inst._debug&&(R.UserModel.inst.money+=1e3,v.default.inst.run())},t.prototype.onClickR1Money=function(){s.default.inst._debug&&(R.UserModel.inst.rMoney+=100,v.default.inst.run())},r([C(cc.Prefab)],t.prototype,"iconItem",void 0),r([C(cc.Label)],t.prototype,"txtMoney",void 0),r([C(cc.Label)],t.prototype,"TxtRMoney",void 0),r([C(cc.Node)],t.prototype,"Money",void 0),r([C(cc.Node)],t.prototype,"RMoney",void 0),r([C(cc.Node)],t.prototype,"Achievement",void 0),r([C(cc.Node)],t.prototype,"GodRide",void 0),r([C(cc.Node)],t.prototype,"GodWeapon",void 0),r([C(cc.Node)],t.prototype,"GodWeaponReward",void 0),r([C(cc.Node)],t.prototype,"GodPet",void 0),r([C(cc.Node)],t.prototype,"GodSkin",void 0),r([C(cc.Node)],t.prototype,"GodRideBan",void 0),r([C(cc.Node)],t.prototype,"GodWeaponBan",void 0),r([C(cc.Node)],t.prototype,"GodPetBan",void 0),r([C(cc.Node)],t.prototype,"GodSkinBan",void 0),r([C(cc.Node)],t.prototype,"Talent",void 0),r([C(cc.Node)],t.prototype,"XiuLian",void 0),r([C(cc.Node)],t.prototype,"LiangCaoBuJi",void 0),r([L],t)}(g.default);o.default=U,cc._RF.pop()},{"../../Controller/NativeMgr":"NativeMgr","../../Controller/TimeMgr":"TimeMgr","../../Define/EventId":"EventId","../../Define/RedDotKey":"RedDotKey","../../Define/UIDefs":"UIDefs","../../Framework/Audio/AudioMgr":"AudioMgr","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Event/RedDot":"RedDot","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UI/UIMgr":"UIMgr","../../Framework/UIBase":"UIBase","../../Framework/VM":"VM","../../Guide/GodGuide":"GodGuide","../../Model/AchievementModel":"AchievementModel","../../Model/GameModel":"GameModel","../../Model/GodPetModel":"GodPetModel","../../Model/GodRideModel":"GodRideModel","../../Model/GodSkinModel":"GodSkinModel","../../Model/GodWeaponModel":"GodWeaponModel","../../Model/SupplyModel":"SupplyModel","../../Model/UserModel":"UserModel","../../Model/XiuLianModel":"XiuLianModel","../Items/IconItem":"IconItem"}],UIMgr:[function(e,t,o){"use strict";cc._RF.push(t,"e5f7aIPaPFCQK9zX5+7Hh5H","UIMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.eOrientation=void 0;var a=e("../../Define/UIDefs"),s=e("../UIBase"),c=e("./CommonToast"),l=e("../../Define/EventId"),p=e("../Res/ResLoader"),u=e("./UIOpenAnimation"),d=e("./UICloseAnimation"),h=e("../Event/EventMgr"),f=e("../Sys/TeMap"),_=cc._decorator,y=_.ccclass,g=_.property;(function(e){e[e.Landscape=0]="Landscape",e[e.Portrait=1]="Portrait"})(o.eOrientation||(o.eOrientation={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guiLayer=null,t.popLayer=null,t.tipLayer=null,t.topLayer=null,t.uiWaitAni=null,t.uiWaitMask=null,t.tipsNode=null,t.uiBack=null,t._tipComponnet=null,t.BackGroundUI=0,t.isClosing=!1,t.isOpening=!1,t.UICache={},t.UIStack=[],t.UIOpenQueue=[],t.UICloseQueue=[],t.uiOpenBeforeDelegate=null,t.uiOpenDelegate=null,t.uiCloseDelegate=null,t.windowRes=new f.default,t}var o;return i(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return o._inst?o._inst:(cc.error("UIMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.uiWaitAni&&(this.uiWaitAni.active=!1),this.uiWaitMask&&(this.uiWaitMask.active=!1),this.resetWinSize(),o._inst=this},t.prototype.open=function(e,t,o){var n=this,i={uiType:e,uiArgs:t,uiView:null};if(this.isOpening||this.isClosing)return cc.log("open <"+a.UIType[e]+"> ui action push into a queue!"),void this.UIOpenQueue.push(i);-1==this.getUIIndex(e)?(i.zOrder=this.UIStack.length+1,this.UIStack.push(i),a.UIDataInfo.getUIData(e).preventTouch&&(i.preventNode=this.preventTouch(i.zOrder)),this.isOpening=!0,this.showUIWaitAnim(),this.getOrCreateUI(e,o,function(o){if(n.hideUIWaitAnim(),i.isClose||null==o)return cc.log("getOrCreateUI "+e+" faile! close state : "+i.isClose+" , uiView : "+o,"%s"),n.isOpening=!1,i.preventNode&&(i.preventNode.destroy(),i.preventNode=null),void h.EVENT.emit(l.EventId.ON_UI_OPEN_FAIL,e);n.onUIOpen(e,o,i,t),n.isOpening=!1,n.autoExecNextUI()},t)):this.closeToUI(e,t)},t.prototype.closeToUI=function(e,t,o){void 0===o&&(o=!0);var n=this.getUIIndex(e);if(-1!=n){n=o?n:n+1;for(var i=this.UIStack.length-1;i>=n;--i){var r=this.UIStack.pop(),s=r.uiType,c=r.uiView;r.isClose=!0,r.preventNode&&(r.preventNode.destroy(),r.preventNode=null),this.uiCloseDelegate&&this.uiCloseDelegate(s),c&&(c.onClose(),a.UIDataInfo.getUIData(s).cache?(this.UICache[s]=c,c.node.removeFromParent()):c.node.destroy())}this.updateUI(),this.UIOpenQueue=[],o&&this.open(e,t)}},t.prototype.resetWinSize=function(){this._winSize=cc.view.getVisibleSize()},t.prototype.getLayer=function(e){var t=null;switch(e){case a.LayerType.GUI:t=this.guiLayer;break;case a.LayerType.Pop:t=this.popLayer;break;case a.LayerType.Tip:t=this.tipLayer;break;case a.LayerType.Top:t=this.topLayer;break;default:cc.error("Unkonw layer type!","%s")}return t},t.prototype.add2Layer=function(e,t){if(t){var o=this.getLayer(e);o?t.setParent(o):cc.error("add to layer is not found!","%s")}else cc.error("node is not valid!","%s")},t.prototype.closeAll=function(e){void 0===e&&(e=a.UIType.Loading);for(var t=this.UIStack.length-1;t>=0;--t){var o=this.UIStack[t];o.uiType!=e&&this.close(o.uiType,!1)}this.UIOpenQueue=[],this.isOpening=!1,this.isClosing=!1},t.prototype.createCache=function(){var e=this,t=function(t){var n=a.UIType[""+t],i=a.UIDataInfo.getUIData(n);if(i&&i.cache){var r=i.fullPath;o.loadBundleRes(n,"Prefabs",r,cc.Prefab,null,function(t,o){if(t){cc.log("getOrCreateUI loadRes "+n+" faile, path: "+r);try{cc.error(t)}catch(_){}}else{var i=cc.instantiate(o);if(null==i)return cc.log("getOrCreateUI instantiate "+n+" faile, path: "+r),void p.resLoader.releaseAsset(o);var a=i.getComponent(s.default);if(null==a)return cc.log("getOrCreateUI getComponent "+n+" faile, path: "+r),i.destroy(),void p.resLoader.releaseAsset(o);o.addRef(),e.UICache[n]=a}})}},o=this;for(var n in a.UIType)t(n)},t.prototype.clearCache=function(){for(var e in this.UICache){var t=this.UICache[e];cc.isValid(t.node)&&t.node.destroy()}this.UICache={}},t.prototype.isTopUI=function(e){return 0!=this.UIStack.length&&this.UIStack[this.UIStack.length-1].uiType==e},t.prototype.getUI=function(e){for(var t=0;t<this.UIStack.length;t++){var o=this.UIStack[t];if(e==o.uiType)return o.uiView}return null},t.prototype.isUIOpen=function(e){return null!=this.getUI(e)},t.prototype.getTopUI=function(){return this.UIStack.length>0?this.UIStack[this.UIStack.length-1].uiView:null},t.prototype.showUIWaitAnim=function(){this.uiWaitAni&&(this.uiWaitAni.active=!0),this.uiWaitMask&&(this.uiWaitMask.active=!0)},t.prototype.hideUIWaitAnim=function(){this.uiWaitAni&&(this.uiWaitAni.active=!1),this.uiWaitMask&&(this.uiWaitMask.active=!1)},t.prototype.delayUIWaitAnim=function(e){void 0===e&&(e=1),this.uiWaitAni.opacity=0,cc.Tween.stopAllByTarget(this.uiWaitAni),cc.tween(this.uiWaitAni).delay(1).to(.3,{opacity:255}).start()},t.prototype.showToast=function(e){if(null!=e&&null!=e){if(!this._tipComponnet){var t=cc.instantiate(this.tipsNode).getComponent(c.default);t.node.parent=this.getLayer(a.LayerType.Tip),t.node.name="_tip_",this._tipComponnet=t}this._tipComponnet.showTips(e)}},Object.defineProperty(t.prototype,"winSize",{get:function(){return this._winSize},enumerable:!1,configurable:!0}),t.prototype.close=function(e,t){var o=this;void 0===t&&(t=!0),cc.log("close ui <"+a.UIType[e]+">");var n,i=this.UIStack.length,r={uiType:e,playAnim:t};if(e>a.UIType.$Start&&e<a.UIType.$End){if(i<1||this.isOpening||this.isClosing)return cc.log("<"+a.UIType[e]+"> can not be close in this period of time"),void this.UICloseQueue.push(r);if(this.isUIOpen(e)){for(var s=this.UIStack.length-1;s>=0;s--){var c=this.UIStack[s];if(c.uiType===e){n=c,this.UIStack.splice(s,1);break}}if(void 0!==n){this.isClosing=!0;var u=n.uiType,f=n.uiView;if(n.isClose=!0,n.preventNode&&(n.preventNode.destroy(),n.preventNode=null),null!=f){var _=this.UIStack[i-2];this.updateUI();var y=function(){_&&_.uiView&&o.isTopUI(_.uiType)?(_.uiView.node.active=!0,_.uiView.onTop(u,f.onClose())):f.onClose(),o.uiCloseDelegate&&o.uiCloseDelegate(u),a.UIDataInfo.getUIData(e).cache?(o.UICache[u]=f,f.node.removeFromParent(),cc.log("uiView removeFromParent "+n.uiType)):(f.node.destroy(),p.resLoader.releaseAsset(f.__prefab__),cc.log("uiView destroy <"+a.UIType[n.uiType]+">")),o.isClosing=!1,o.autoExecNextUI();var t=o.windowRes.get(e);t&&(t.decRef(),o.windowRes.del(e)),h.EVENT.emit(l.EventId.ON_UI_CLOSE,e)},g=f.node.getComponent(d.default);t&&g&&f.node.active?(f.isPlayOpenAni=!0,g.play().wrapMode==cc.WrapMode.Loop&&cc.error("UI close animation should be a loop animation!","%s"),g.once(cc.Animation.EventType.FINISHED,function(){y()},this)):y()}else this.isClosing=!1}}else cc.log("<"+a.UIType[e]+"> not has open")}else cc.error("unknown ui type to close!","%s")},t.prototype.getOpenUICount=function(){return this.UIStack.length},t.prototype.replace=function(e,t){this.close(this.UIStack[this.UIStack.length-1].uiType),this.open(e,t)},t.prototype.getUIIndex=function(e){for(var t=0;t<this.UIStack.length;t++)if(e==this.UIStack[t].uiType)return t;return-1},t.prototype.preventTouch=function(e){var t=cc.instantiate(this.uiBack);return this.getLayer(a.LayerType.Pop).addChild(t),t.name="preventTouch",t.setContentSize(this.winSize),t.on(cc.Node.EventType.TOUCH_START,function(){},t),t.setSiblingIndex(e),t},t.prototype.autoExecNextUI=function(){if(this.UIOpenQueue.length>0){var e=this.UIOpenQueue[0];return this.UIOpenQueue.splice(0,1),void this.open(e.uiType,e.uiArgs)}this.UICloseQueue.length>0&&(e=this.UICloseQueue[0],this.UICloseQueue.splice(0,1),this.close(e.uiType,e.playAnim))},t.prototype.updateUI=function(){for(var e=0,t=this.UIStack.length-1;t>=0;--t){var o=this.UIStack[t].uiView.showType;if(this.UIStack[t].uiView.node.active=!0,s.UIShowTypes.UIFullScreen==o)break;if(s.UIShowTypes.UISingle==o){for(var n=0;n<this.BackGroundUI;++n)this.UIStack[n]&&(this.UIStack[n].uiView.node.active=!0);e=this.BackGroundUI;break}}for(var i=e;i<t;++i)this.UIStack[i].uiView.node.active=!1},t.prototype.getOrCreateUI=function(e,t,n,i){var r=this.UICache[e];if(r)n(r);else{var c=a.UIDataInfo.getUIData(e);if(!c||!c.fullPath)return cc.log("getOrCreateUI "+e+" faile, prefab conf not found!"),void n(null);var l=c.fullPath;this.loadBundleRes(e,"Prefabs",l,cc.Prefab,t,function(t,a){if(t){cc.log("getOrCreateUI loadRes "+e+" faile, path: "+l),n(null);try{cc.error(t)}catch(_){}}else{var c=cc.instantiate(a);if(null==c)return cc.log("getOrCreateUI instantiate "+e+" faile, path: "+l),n(null),void p.resLoader.releaseAsset(a);if(null==(r=c.getComponent(s.default)))return cc.log("getOrCreateUI getComponent "+e+" faile, path: "+l),c.destroy(),n(null),void p.resLoader.releaseAsset(a);var u=o.inst.getCanvasSize();r.node.width=u.width,r.node.height=u.height,r.__prefab__=a,a.addRef(),r.init(i,e),n(r)}})}},t.prototype.loadBundleRes=function(e,t,o,n,i,r){var a=this,s=cc.assetManager.getBundle(t);s?s.load(o,n,i,function(t,o){!t&&a.isValid&&(o.addRef(),a.windowRes.set(e,o)),r&&r(t,o)}):r&&r(null,null)},t.prototype.preLoadBundleRes=function(e,t,o,n){var i=cc.assetManager.getBundle(e);i?i.preload(t,o,function(e,t){n&&n(e,t)}):n&&n(null,null)},t.prototype.getCanvasSize=function(){return new cc.Size(this.node.width,this.node.height)},t.prototype.onUIOpen=function(e,t,o,n){var i=this;if(null!=t){if(o.uiView=t,t.node.active=!0,t.node.setSiblingIndex(o.zOrder||this.UIStack.length),o.preventNode&&(o.preventNode.opacity=t.maskOpacity,o.preventNode.setSiblingIndex(o.zOrder||this.UIStack.length),this.add2Layer(t.showLayer,o.preventNode)),t.quickClose){var r=t.node.getChildByName("background");r||((r=new cc.Node).name="background",r.setParent(t.node),r.setContentSize(this.winSize),r.setSiblingIndex(0)),r.targetOff(cc.Node.EventType.TOUCH_START),r.on(cc.Node.EventType.TOUCH_END,function(){cc.log("touch close <"+a.UIType[e]+">"),i.close(e)},r)}this.add2Layer(t.showLayer,t.node),this.updateUI();var s=0;this.UIStack.length>1&&(s=this.UIStack[this.UIStack.length-2].uiType),this.uiOpenBeforeDelegate&&this.uiOpenBeforeDelegate(e,s),t.onOpen(s,n);var c=function(){t.isPlayOpenAni=!1,t.onOpenAniOver(),i.uiOpenDelegate&&i.uiOpenDelegate(e,s),h.EVENT.emit(l.EventId.ON_UI_OPEN,e)},p=t.node.getComponent(u.default);p?(t.isPlayOpenAni=!0,p.play().wrapMode==cc.WrapMode.Loop&&cc.error("UI open animation should not be a loop animation!"),p.once(cc.Animation.EventType.FINISHED,function(){c()},this)):c()}},t.prototype.getOpenQueueCount=function(){return this.UIOpenQueue.length},r([g(cc.Node)],t.prototype,"guiLayer",void 0),r([g(cc.Node)],t.prototype,"popLayer",void 0),r([g(cc.Node)],t.prototype,"tipLayer",void 0),r([g(cc.Node)],t.prototype,"topLayer",void 0),r([g(cc.Node)],t.prototype,"uiWaitAni",void 0),r([g(cc.Node)],t.prototype,"uiWaitMask",void 0),r([g(cc.Prefab)],t.prototype,"tipsNode",void 0),r([g(cc.Prefab)],t.prototype,"uiBack",void 0),o=r([y],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../Event/EventMgr":"EventMgr","../Res/ResLoader":"ResLoader","../Sys/TeMap":"TeMap","../UIBase":"UIBase","./CommonToast":"CommonToast","./UICloseAnimation":"UICloseAnimation","./UIOpenAnimation":"UIOpenAnimation"}],UIOpenAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"2f4fe0wTRVJ/6kG1ktMX+6i","UIOpenAnimation");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),r([s],t)}(cc.Animation));o.default=c,cc._RF.pop()},{}],UserModel:[function(e,t,o){"use strict";cc._RF.push(t,"e501c+jJ31An6gtHlv8+VQu","UserModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.UserModel=void 0;var n=e("../Controller/NativeMgr"),i=e("../Controller/TableMgr"),r=e("../Framework/Storage/LocalStorageMgr"),a=e("../Framework/VM"),s=function(){function e(){this.talentOpenStage=0,this.rideOpenStage=0,this.godWeaponOpenStage=0,this.godPetOpenStage=0,this.godSkinBanOpenStage=0,this.godWeaponsRewardShowStage=0,this.godWeaponsRewardOpenStage=0,this.godWeaponsRewardMoney=0,this.xiuLianOpenStage=0,this.storeReviewReward=10,this.realNameReward=10,this.quanDouYao=0,this.huanYiPi=0,this._isRealNameReward=0,this._curStage=0,this._selectStage=0,this._background=0,this._money=0,this._rMoney=0,this._g1Money=0,this._g2Money=0,this._g3Money=0,this._switchNum=0,this._talent={},this._stageBoxGet={},this._stageBoxSkill={},n.default.inst._debug?(this.talentOpenStage=0,this.rideOpenStage=0,this.godWeaponOpenStage=0,this.godPetOpenStage=0,this.godSkinBanOpenStage=0,this.godWeaponsRewardShowStage=0,this.godWeaponsRewardOpenStage=0,this.godWeaponsRewardMoney=5,this.xiuLianOpenStage=0,this.quanDouYao=0,this.huanYiPi=0):(this.talentOpenStage=Number(i.TABLE.getGlobal("TalentOpenStage")),this.rideOpenStage=Number(i.TABLE.getGlobal("RideOpenStage")),this.godWeaponOpenStage=Number(i.TABLE.getGlobal("GodWeaponOpenStage")),this.godPetOpenStage=Number(i.TABLE.getGlobal("GodPetOpenStage")),this.godSkinBanOpenStage=Number(i.TABLE.getGlobal("GodSkinBanOpenStage")),this.godWeaponsRewardShowStage=Number(i.TABLE.getGlobal("GodWeaponsRewardShowStage")),this.godWeaponsRewardOpenStage=Number(i.TABLE.getGlobal("GodWeaponsRewardOpenStage")),this.godWeaponsRewardMoney=Number(i.TABLE.getGlobal("GodWeaponsRewardMoney")),this.realNameReward=Number(i.TABLE.getGlobal("RealNameReward")),this.storeReviewReward=Number(i.TABLE.getGlobal("StoreReviewReward")),this.xiuLianOpenStage=Number(i.TABLE.getGlobal("XiuLianOpenStage")),this.quanDouYao=Number(i.TABLE.getGlobal("QuanDouYao")),this.huanYiPi=Number(i.TABLE.getGlobal("HuanYiPi"))),this._isRealNameReward=Number(r.LocalStorageMgr.getItem("isRealNameReward")),this._curStage=Number(r.LocalStorageMgr.getItem("curStage"))||1,this._money=Number(r.LocalStorageMgr.getItem("money")),this._rMoney=Number(r.LocalStorageMgr.getItem("rMoney")),this._g1Money=Number(r.LocalStorageMgr.getItem("g1Money")),this._g2Money=Number(r.LocalStorageMgr.getItem("g2Money")),this._g3Money=Number(r.LocalStorageMgr.getItem("g3Money")),this._background=Number(r.LocalStorageMgr.getItem("background")),this._switchNum=Number(r.LocalStorageMgr.getItem("switchNum")),this._talent=JSON.parse(r.LocalStorageMgr.getItem("talent"))||{},this._stageBoxGet=JSON.parse(r.LocalStorageMgr.getItem("stageBoxGet"))||{},this._stageBoxSkill=JSON.parse(r.LocalStorageMgr.getItem("stageBoxSkill"))||{},a.VM.add(this,"UserModel")}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRealNameReward",{get:function(){return this._isRealNameReward},set:function(e){this._isRealNameReward=e,r.LocalStorageMgr.setItem("isRealNameReward",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStage",{get:function(){return this._curStage},set:function(e){this._curStage=e,r.LocalStorageMgr.setItem("curStage",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectStage",{get:function(){return this._selectStage},set:function(e){this._selectStage=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(e){this._background=e,r.LocalStorageMgr.setItem("background",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"money",{get:function(){return this._money},set:function(e){this._money=e,r.LocalStorageMgr.setItem("money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rMoney",{get:function(){return this._rMoney},set:function(e){this._rMoney=e,r.LocalStorageMgr.setItem("rMoney",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g1Money",{get:function(){return this._g1Money},set:function(e){this._g1Money=e,r.LocalStorageMgr.setItem("g1Money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g2Money",{get:function(){return this._g2Money},set:function(e){this._g2Money=e,r.LocalStorageMgr.setItem("g2Money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g3Money",{get:function(){return this._g3Money},set:function(e){this._g3Money=e,r.LocalStorageMgr.setItem("g3Money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"switchNum",{get:function(){return this._switchNum},set:function(e){this._switchNum=e,r.LocalStorageMgr.setItem("switchNum",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"talent",{get:function(){return this._talent},set:function(e){this._talent=e,r.LocalStorageMgr.setItem("talent",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageBoxGet",{get:function(){return this._stageBoxGet},set:function(e){this._stageBoxGet=e,r.LocalStorageMgr.setItem("stageBoxGet",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageBoxSkill",{get:function(){return this._stageBoxSkill},set:function(e){this._stageBoxSkill=e,r.LocalStorageMgr.setItem("stageBoxSkill",""+JSON.stringify(e))},enumerable:!1,configurable:!0}),e.prototype.canTalentBuy=function(){if(e.inst.curStage<=this.talentOpenStage)return!1;var t=this.getTalentCount(),o=i.TABLE.getTable("talentLevelUpMoney");if(!(t>Object.keys(o).length)){var n=i.TABLE.getTableInfo("talentLevelUpMoney","num",t).money||cc.macro.REPEAT_FOREVER;return!(e.inst.money<n)}},e.prototype.getTalentCount=function(){for(var e=0,t=0,o=Object.values(this._talent);t<o.length;t++)e+=o[t];return e},e.prototype.getTalentMoney=function(){var e=i.TABLE.getTableInfo("talentLevelUpMoney","num",this.getTalentCount()),t=0;return e&&(t=e.money),t},e._inst=null,e}();o.UserModel=s,cc._RF.pop()},{"../Controller/NativeMgr":"NativeMgr","../Controller/TableMgr":"TableMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr","../Framework/VM":"VM"}],Utils:[function(e,t,o){"use strict";cc._RF.push(t,"6917a72WWFM9ZEwVneeYPE1","Utils"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Define/UIDefs"),i=function(){function e(){}return e.verifyNode=function(e){return null!=e&&e.isValid},e.verifyComponent=function(e){return null!=e&&!!e.isValid&&!!e.node&&!!e.node.isValid},e.isComponentLive=function(e){return!!(e&&e.node&&e.node.isValid&&e.isValid)},e.getUrlParams=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(t);return null!=o?decodeURIComponent(o[2]):null},e.containsPointPolygon=function(e,t,o){for(var n=e,i=e.length,r=i-2,a=!1,s=0;s<i;s+=2){var c=n[s+1],l=n[r+1];if(c<o&&l>=o||l<o&&c>=o){var p=n[s];p+(o-c)/(l-c)*(n[r]-p)<t&&(a=!a)}r=s}return a},e.getBoundingBoxAMPolygon=function(e,t,o){var n,i=t.findSlot(o);if(i){var r=i.getAttachment();if(r&&r instanceof sp.spine.BoundingBoxAttachment){var a=r;n=sp.spine.Utils.newFloatArray(a.worldVerticesLength),a.computeWorldVertices(i,0,a.worldVerticesLength,n,0,2);for(var s=n.length,c=0;c<s;c+=2){var l=e.convertToWorldSpaceAR(new cc.Vec2(n[c],n[c+1]));n[c]=l.x,n[c+1]=l.y}}}return n},e.stopSpineAtFrame=function(e,t,o){if(e&&t&&e.findAnimation(t)){e.paused=!1;var n=e.setAnimation(0,t,!1);n&&(e.timeScale=0,n.trackTime=o)}},e.deepCopy=function(e){for(var t={},o=0,n=Object.keys(e);o<n.length;o++){var i=n[o];t[i]="object"==typeof e[i]?this.deepCopy(e[i]):e[i]}return t},e.arrDeepCopy=function(e){var t=[];for(var o in e)t[o]=e[o];return t},e.formatDate=function(e,t){var o=new Date(e),n={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),"S+":Math.floor(o.getMilliseconds()/10)};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},e.formatTime=function(e,t){var o=new Date(e),n={"h+":Math.floor(o.getTime()/36e5),"m+":o.getUTCMinutes(),"s+":o.getUTCSeconds(),S:o.getUTCMilliseconds()};for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},e.getFormatTime=function(e){if(e>0)return(e=((new Date).getTime()-e)/1e3)<0?"\u521a\u521a":e>=0&&e<60?Math.floor(e)+"\u79d2\u524d":e<3600?Math.floor(e/60)+"\u5206\u949f\u524d":e<86400?Math.floor(e/60/60)+"\u5c0f\u65f6\u524d":e<31536e3?Math.floor(e/60/60/24)+"\u5929\u524d":Math.floor(e/60/60/24/365)+"\u5e74\u524d"},e.getFormatTimeCur=function(e){if(e>0)return(e=((new Date).getTime()-e)/1e3)<3600?"\u521a\u521a":e<86400?Math.floor(e/60/60)+"\u5c0f\u65f6\u524d":e<31536e3?Math.floor(e/60/60/24)+"\u5929\u524d":Math.floor(e/60/60/24/365)+"\u5e74\u524d"},e.getCurTimeDays=function(e){var t=new Date(e);return 365*(t.getFullYear()-2020)+12*t.getMonth()+t.getDate()},e.getTimedifference=function(e,t){return this.getCurTimeDays(e)-this.getCurTimeDays(t)},e.overAddArr=function(e){if(!e||e.length<=0)return[];for(var t=[],o=0;o<e.length;o++)t[o]=0==o?e[o]:t[o-1]+e[o];return t},e.getRandomIndex=function(e,t){var o=0;if(e<=t[0])return 0;if(e>=t[t.length-1])return t.length-1;for(var n=0;n<t.length;n++)if(e<=t[n])o=n;else{if(e>t[n]&&e<=t[n+1]){o=n+1;break}if(e>t[n]&&e<=t[n+1]){o=n+1;break}}return o},e.getRandToArray=function(e){return e[Math.floor(Math.random()*e.length)]},e.getRandWeightIndex=function(e){var t=(e=this.overAddArr(e))[e.length-1],o=Math.random()*t;return this.getRandomIndex(o,e)},e.getRanInter=function(e,t){var o=e+Math.random()*(t-e);return Math.floor(o)},e.RandomSome=function(e,t){var o=this.fisherYatesShuffle(e.concat());return o.length>t&&(o.length=t),o},e.fisherYatesShuffle=function(e){for(var t=e.length;t;){var o=Math.floor(Math.random()*t--),n=e[t];e[t]=e[o],e[o]=n}return e},e.formatCNY=function(e,t){var o,n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"}],i="";for(o=n.length-1;o>0&&!(e>=n[o].value);o--);return(i=e>=1e9?"999.9M":(e/n[o].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[o].symbol).length>5&&(i=i.slice(0,5)+n[o].symbol),i},e.initServerTime=function(e){this._initServerTime=e,this._initLocalTime=Date.now()},e.getServerTime=function(){return this._initServerTime+(Date.now()-this._initLocalTime)},e.clone=function(e){var t;if("object"==typeof e)if(null===e)t=null;else if(e instanceof Array){t=[];for(var o=0,n=e.length;o<n;o++)t.push(this.clone(e[o]))}else for(var i in t={},e)t[i]=this.clone(e[i]);else t=e;return t},e.getViewType=function(e){for(var t=n.UIType.$Start+1;t<n.UIType.$End;++t)if(n.UIType[t]==e)return t},e.createMatrix=function(e,t,o){void 0===o&&(o=0);for(var n=new Array,i=0;i<e;++i){n[i]=new Array;for(var r=0;r<t;++r)n[i][r]=o}return n},e.map2Obj=function(e){var t=Object.create(null);return e.forEach(function(e,o){t[o]=e}),t},e.obj2map=function(e){for(var t=new Map,o=0,n=Object.keys(e);o<n.length;o++){var i=n[o];t.set(i,e[i])}return t},e.arab2char=function(e){var t=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],o=["","\u5341","\u767e","\u5343","\u4e07"],n=function(e){for(var n=e.toString().split("").reverse(),i="",r=0;r<n.length;r++)i=(0==r&&0==n[r]?"":r>0&&0==n[r]&&0==n[r-1]?"":t[n[r]]+(0==n[r]?o[0]:o[r]))+i;return i},i=Math.floor(e/1e4),r=e%1e4,a="";return r.toString().length<4&&(a="0"+r),i?n(i)+"\u4e07"+n(a):n(e)},e.NumToChinaBigNum=function(e){return e<0||e>10?"":["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341"][e]},e.updatePolygonCollider=function(e,t){var o=e.points,n=e.world.points;n.length=o.length;for(var i=cc.v2(),r=1e6,a=1e6,s=-1e6,c=-1e6,l=0,p=o.length;l<p;l++){n[l]||(n[l]=cc.v2()),i.x=o[l].x+t.x,i.y=o[l].y+t.y;var u=i.x,d=i.y;n[l].x=u,n[l].y=d,u>s&&(s=u),u<r&&(r=u),d>c&&(c=d),d<a&&(a=d)}},e.limitWorldNum=function(e,t){return void 0===t&&(t=6),e.length>t&&(e=e.slice(0,t),e+="..."),e},e.getRanByEnum=function(e){var t=Object.keys(e);return e[t[this.getRanInter(0,t.length)]]},e.getIndexByEnum=function(e,t){for(var o=Object.keys(e),n=0;n<o.length;n++)if(e[o[n]]==t)return n;return-1},e.getColor=function(){return cc.Color.RED},e.getColorHex=function(){return""},e.rollNum=function(e,t,o,n,i){void 0===i&&(i=.5);var r={num:e,_num:e};return Object.defineProperty(r,"num",{get:function(){return r._num},set:function(e){r._num=e,o&&o(r._num)}}),cc.tween(r).to(i,{num:t}).call(n).start()},e._initServerTime=0,e._initLocalTime=0,e}();o.default=i,cc._RF.pop()},{"../../Define/UIDefs":"UIDefs"}],VM:[function(e,t,o){"use strict";function n(e,t,o,n){void 0===n&&(n="");for(var i=t.split("."),r=0;r<i.length;r++){var a=i[r];if(a in e==0){console.error("["+a+"] not find in "+n+"."+t);break}r==i.length-1?e[a]=o:e=e[a]}}function i(e,t,o,n){void 0===n&&(n="");for(var i=t.split("."),r=0;r<i.length;r++){var a=i[r];if(a in e==0)return console.error("["+a+"] not find in "+n+"."+t),o;e=e[a]}return null==e&&(e=o),e}cc._RF.push(t,"51d52KvG4VHyK1TQxqVUljk","VM"),Object.defineProperty(o,"__esModule",{value:!0}),o.VM=void 0;var r=function(){function e(e,t){this._tag=null,this.active=!0,this.emitToRootPath=!1,new p(e,this._callback.bind(this)),this.$data=e,this._tag=t}return e.prototype._callback=function(e,t,o){if(1==this.active){var n="VC:"+this._tag+"."+o.join(".");if(cc.director.emit(n,e,t,[this._tag].concat(o)),this.emitToRootPath&&cc.director.emit("VC:"+this._tag,e,t,o),o.length>=2)for(var i=0;i<o.length-1;i++)o[i]}},e.prototype.setValue=function(e,t){n(this.$data,e,t,this._tag)},e.prototype.getValue=function(e,t){return i(this.$data,e,t,this._tag)},e}(),a=function(){function e(){this._mvs=new Map,this.setObjValue=n,this.getObjValue=i}return e.prototype.add=function(e,t,o){void 0===t&&(t="global"),void 0===o&&(o=!1);var n=new r(e,t),i=this._mvs.get(t);t.includes(".")?console.error("cant write . in tag:",t):i?console.error("already set VM tag:"+t):(n.emitToRootPath=o,this._mvs.set(t,n))},e.prototype.remove=function(e){this._mvs.delete(e)},e.prototype.removeAll=function(){this._mvs.clear()},e.prototype.get=function(e){return this._mvs.get(e)},e.prototype.addValue=function(e,t){var o=(e=e.trim()).split(".");o.length<2&&console.error("Cant find path:"+e);var n=this.get(o[0]);if(n){var i=o.slice(1).join(".");n.setValue(i,n.getValue(i)+t)}else console.error("Cant Set VM:"+o[0])},e.prototype.getValue=function(e,t){var o=(e=e.trim()).split(".");if(o.length<2)console.error("Get Value Cant find path:"+e);else{var n=this.get(o[0]);if(n)return n.getValue(o.slice(1).join("."),t);console.error("Cant Get VM:"+o[0])}},e.prototype.setValue=function(e,t){var o=(e=e.trim()).split(".");if(o.length<2)console.error("Set Value Cant find path:"+e);else{var n=this.get(o[0]);n?n.setValue(o.slice(1).join("."),t):console.error("Cant Set VM:"+o[0])}},e.prototype.bindPath=function(e,t,o,n){""!=(e=e.trim())?"*"!==e.split(".")[0]?cc.director.on("VC:"+e,t,o,n):console.error(e,"\u8def\u5f84\u4e0d\u5408\u6cd5,\u53ef\u80fd\u9519\u8bef\u8986\u76d6\u4e86 VMParent \u7684onLoad \u65b9\u6cd5, \u6216\u8005\u7236\u8282\u70b9\u5e76\u672a\u6302\u8f7d VMParent \u76f8\u5173\u7684\u7ec4\u4ef6\u811a\u672c"):console.error(o.node.name,"\u8282\u70b9\u7ed1\u5b9a\u7684\u8def\u5f84\u4e3a\u7a7a")},e.prototype.unbindPath=function(e,t,o){"*"!==(e=e.trim()).split(".")[0]?cc.director.off("VC:"+e,t,o):console.error(e,"\u8def\u5f84\u4e0d\u5408\u6cd5,\u53ef\u80fd\u9519\u8bef\u8986\u76d6\u4e86 VMParent \u7684onLoad \u65b9\u6cd5, \u6216\u8005\u7236\u8282\u70b9\u5e76\u672a\u6302\u8f7d VMParent \u76f8\u5173\u7684\u7ec4\u4ef6\u811a\u672c")},e.prototype.inactive=function(){this._mvs.forEach(function(e){e.active=!1})},e.prototype.active=function(){this._mvs.forEach(function(e){e.active=!1})},e}(),s=Object.prototype,c={obj:"[object Object]",array:"[object Array]"},l=["push","pop","shift","unshift","sort","reverse","splice"],p=function(){function e(e,t){s.toString.call(e)!==c.obj&&s.toString.call(e)!==c.array&&console.error("\u8bf7\u4f20\u5165\u4e00\u4e2a\u5bf9\u8c61\u6216\u6570\u7ec4"),this._callback=t,this.observe(e)}return e.prototype.observe=function(e,t){var o=this;Object.keys(e).forEach(function(n){var i=o,r=e[n],a=t&&t.slice();a?a.push(n):a=[n],Object.defineProperty(e,n,{get:function(){return r},set:function(e){r!==e&&("[object Object]"===s.toString.call(e)&&i.observe(e,a),r=e,i._callback(e,r,a))}})},this)},e.prototype.overrideArrayProto=function(e,t){var o,n=Array.prototype,i=Object.create(Array.prototype),r=this;l.forEach(function(e){Object.defineProperty(i,e,{value:function(){var i=this.slice();return o=n[e].apply(this,arguments),r.observe(this,t),r._callback(this,i,t),o}})}),e.__proto__=i},e}();o.VM=new a,cc._RF.pop()},{}],VectorUtil:[function(e,t,o){"use strict";cc._RF.push(t,"2bf4fYMdL9EjpnauAnjJp5U","VectorUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.VectorUtil=void 0;var n=function(){function e(){}return e.getAddRay=function(e,t,o){void 0===o&&(o=1);var n=this.getRay(t,o);return{x:e.x+n.x,y:e.y+n.y}},e.getSubRay=function(e,t,o){void 0===o&&(o=1);var n=this.getRay(t,o);return{x:e.x-n.x,y:e.y-n.y}},e.getRay=function(e,t){return void 0===t&&(t=1),{x:Math.cos(e)*t,y:Math.sin(e)*t}},e.segmentsIntersect=function(e,t,o,n){var i=(e.x-o.x)*(t.y-o.y)-(e.y-o.y)*(t.x-o.x),r=(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x);if(i*r>=0)return null;var a=(o.x-e.x)*(n.y-e.y)-(o.y-e.y)*(n.x-e.x);if(a*(a+i-r)>=0)return null;var s=a/(r-i),c=s*(t.x-e.x),l=s*(t.y-e.y);return{x:e.x+c,y:e.y+l}},e.angle=function(e,t,o){var n=Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2)),i=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2)),r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return Math.acos((i*i+n*n-r*r)/(2*i*n))},e.pointLineMirror=function(e,t,o){var n=o.y-t.y,i=t.x-o.x;if(Math.abs(n)<1e-8&&Math.abs(i)<1e-8)return null;var r=o.x*t.y-t.x*o.y,a=n*n+i*i,s=(i*i*e.x-n*i*e.y-n*r)/a,c=(-n*i*e.x+n*n*e.y-i*r)/a;return{x:2*s-e.x,y:2*c-e.y}},e.pointLineVertical=function(e,t,o){var n=o.x-t.x,i=o.y-t.y,r=n*n+i*i,a=((e.x-t.x)*n+(e.y-t.y)*i)/r;return r?a<0?t:a>1?o:cc.v2(t.x+a*n,t.y+a*i):t},e.pointLineDistance=function(e,t,o){return cc.Vec2.distance(e,this.pointLineVertical(e,t,o))},e.checkNear=function(e,t){for(var o=[],n=0;n<t.length;n++){var i=cc.macro.REPEAT_FOREVER;t[n]&&(i=cc.Vec2.distance(e,t[n])),o.push({idx:n,len:i})}return o.length>0?(o.sort(function(e,t){return e.len-t.len}),o[0].idx):null},e.checkFar=function(e,t){for(var o=[],n=0;n<t.length;n++){var i=0;t[n]&&(i=cc.Vec2.distance(e,t[n])),o.push({idx:n,len:i})}return o.length>0?(o.sort(function(e,t){return t.len-e.len}),o[0].idx):null},e.triangleType=function(e,t,o){return e+t>o&&e+o>t&&t+o>e&&e>0&&t>0&&o>0?e*e+t*t==o*o||e*e+o*o==t*t||t*t+o*o==e*e?1:e==t||e==o||t==o?2:e==t&&e==o&&t==o?3:0:-1},e}();o.VectorUtil=n,cc._RF.pop()},{}],WeaponBase:[function(e,t,o){"use strict";cc._RF.push(t,"3d166RKGzBHdY1G8UizMxl+","WeaponBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.WeaponBase=void 0;var a=e("../../Controller/LayerMgr"),s=e("../../Controller/TableMgr"),c=e("../../Framework/Res/ResKeeperAddition"),l=e("../../Model/GameModel"),p=e("../../Model/WeaponModel"),u=e("../../Model/XiuLianModel"),d=e("../Bullet/BulletBase"),h=cc._decorator,f=h.ccclass,_=h.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pfBullet=[],t.pfSeniorBullet=[],t.id="",t._levels=[],t._levels_extra=[],t._maxLevel=0,t._skillInfo=[],t._weaponInfo=[],t._game=l.GameModel.inst,t}return i(t,e),t.prototype.onLoad=function(){for(var e in this._waterLevel=10,this.pfBullet)this.addItemPool(Number(e),this.pfBullet[e]);for(var e in this.pfSeniorBullet)this.addItemPool(3+Number(e),this.pfSeniorBullet[e]);this.getAttrFromCfg()},t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this.getSenior()?3+t:t,i=this.get(n);if(null!=i){i.setParent(this.getBulletParent(t));var r=i.getComponent(d.BulletBase);e.type=t,e.attrs=this._weaponInfo[t],e.weapon=this,r.fire(e,function(e){o.put(n,r.node),o.fire(e,++t)})}},t.prototype.getAttrFromCfg=function(){this._skillInfo=[s.TABLE.getTable("sk_"+this.id),s.TABLE.getTable("sk_"+this.id+"_zi"),s.TABLE.getTable("sk_"+this.id+"_zi2")],this._skillInfo[0]&&(this._weaponInfo[0]=new p.WeaponAttrs),this._skillInfo[1]&&(this._weaponInfo[1]=new p.WeaponAttrs),this._skillInfo[2]&&(this._weaponInfo[2]=new p.WeaponAttrs),this._maxLevel=this._skillInfo[0].length},t.prototype.updateAttrs=function(){for(var e in this._weaponInfo){var t=this._skillInfo[e],o=this._weaponInfo[e];for(var n in o)o[n]=0;for(var i=0,r=this._levels;i<r.length;i++){var a=t[r[i]-1];for(var s in a)o[s]+=Number(a[s])}}if(this._levels_extra.length>0)for(var e in this._weaponInfo){t=this._skillInfo[e],o=this._weaponInfo[e];for(var c=0,l=this._levels_extra;c<l.length;c++)for(var p in a=t[l[c]-1])o[p]+=Number(a[p])}},t.prototype.levelUp=function(e){this._levels.push(e),this.updateAttrs()},t.prototype.extraLevelUp=function(e){this._levels_extra.push(e),this.updateAttrs()},t.prototype.getBulletParent=function(e){switch(void 0===e&&(e=0),e){case 0:case 1:case 2:return a.LayerMgr.inst.BulletLayer}},t.prototype.getBulletCount=function(e){void 0===e&&(e=0);var t=this._weaponInfo[e].bulletCount,o=p.WeaponModel.inst.magicAttrs.a_bulletcount_v||0;o>0&&(t+=o);var n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_bulletcount_v"]||0;return n>0&&(t+=n),t},t.prototype.getInterval=function(e){void 0===e&&(e=0);var t=this._weaponInfo[e].interval,o=p.WeaponModel.inst.magicAttrs.s_cd_p||0;return o>0&&(t-=t*o),t<.2&&(t=.2),t},t.prototype.getMoveSpeed=function(e){void 0===e&&(e=0);var t=this._weaponInfo[e].moveSpeed,o=p.WeaponModel.inst.magicAttrs.a_bspeed_p||0;return o>0&&(t+=t*o),t},t.prototype.getAoeRange=function(e){void 0===e&&(e=0);var t=this._weaponInfo[e].aoeRange,o=p.WeaponModel.inst.magicAttrs.a_range_p||0,n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_aoerange_p"]||0;return o+n>0&&(t+=t*(o+n)),t},t.prototype.getDamage=function(e){return void 0===e&&(e=0),this._weaponInfo[e].damage+u.XiuLianModel.inst.getInfo(this.id).damage*u.XiuLianLevelValue.damage},t.prototype.getCrit=function(){return l.GameModel.inst.player.crit+(p.WeaponModel.inst.magicAttrs.a_crit_p||0)+u.XiuLianModel.inst.getInfo(this.id).critRate*u.XiuLianLevelValue.critRate},t.prototype.getCritDamage=function(){return 2+(p.WeaponModel.inst.magicAttrs.a_critdmg_p||0)},t.prototype.getDuration=function(e){void 0===e&&(e=0);var t=this._weaponInfo[e].duration,o=p.WeaponModel.inst.magicAttrs.a_time_p||0,n=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_duration_p"]||0;return o+n>0&&(t+=t*(o+n)),n>0&&(t+=t*o),t},t.prototype.getAngulaspeed=function(e){void 0===e&&(e=0);var t=this._weaponInfo[e].angularSpeed,o=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_angulaspeed_p"]||0;return o>0&&(t=1/(1/t*(1+o))),t},t.prototype.getStopTime=function(e){void 0===e&&(e=0);var t=this._weaponInfo[e].stopTime,o=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_stoptime_v"]||0;return o>0&&(t+=o),t},t.prototype.getHitCount=function(e){void 0===e&&(e=0);var t=this._weaponInfo[e].hitCount,o=p.WeaponModel.inst.magicAttrs["a_"+this.id+"_hitCount"]||0;return o>0&&(t+=o),t},t.prototype.getSenior=function(){return(p.WeaponModel.inst.magicAttrs["a_"+this.id+"_senior"]||0)>0},t.prototype.getLevel=function(){return this._levels.length+this._levels_extra.length},t.prototype.getLevelInfo=function(){return this._levels},t.prototype.getSkillInfo=function(){return this._skillInfo},t.prototype.canLevelUp=function(){return this._levels.length<this._maxLevel},r([_([cc.Prefab])],t.prototype,"pfBullet",void 0),r([_([cc.Prefab])],t.prototype,"pfSeniorBullet",void 0),r([_],t.prototype,"id",void 0),r([f],t)}(c.default);o.WeaponBase=y,cc._RF.pop()},{"../../Controller/LayerMgr":"LayerMgr","../../Controller/TableMgr":"TableMgr","../../Framework/Res/ResKeeperAddition":"ResKeeperAddition","../../Model/GameModel":"GameModel","../../Model/WeaponModel":"WeaponModel","../../Model/XiuLianModel":"XiuLianModel","../Bullet/BulletBase":"BulletBase"}],WeaponCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"797e4ZxUUpM8ZjDriBtHPjD","WeaponCtrl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Controller/GameBase"),s=e("../Controller/TableMgr"),c=e("../Define/EventId"),l=e("../Define/UIDefs"),p=e("../Framework/Event/EventMgr"),u=e("../Framework/UI/UIMgr"),d=e("../Framework/VM"),h=e("../Model/GameModel"),f=e("../Model/GodWeaponModel"),_=e("../Model/UserModel"),y=e("../Model/WeaponModel"),g=e("./Weapon/WeaponBase"),m=cc._decorator,v=m.ccclass,M=(m.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){e.prototype.onEnable.call(this),d.VM.bindPath("WeaponModel._skillPoint",this.updateSkill,this),p.EVENT.on(c.EventId.ON_GAME_LOADED,this.gameLoaded,this),p.EVENT.on(c.EventId.ON_GAME_SKILL_LEVEL_UP,this.onSkillLevelUp,this),p.EVENT.on(c.EventId.ON_GAME_SKILL_LEVEL_UP_EXTRA,this.onSkillLevelUpExtra,this),p.EVENT.on(c.EventId.ON_GAME_DRAW_SKILL_LEVEL_UP,this.onSkillDrawLevelUp,this),p.EVENT.on(c.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateMagicAttrs,this)},t.prototype.onDisable=function(){e.prototype.onDisable.call(this),d.VM.unbindPath("WeaponModel._skillPoint",this.updateSkill,this),p.EVENT.off(c.EventId.ON_GAME_LOADED,this.gameLoaded,this),p.EVENT.off(c.EventId.ON_GAME_SKILL_LEVEL_UP,this.onSkillLevelUp,this),p.EVENT.off(c.EventId.ON_GAME_SKILL_LEVEL_UP_EXTRA,this.onSkillLevelUpExtra,this),p.EVENT.off(c.EventId.ON_GAME_DRAW_SKILL_LEVEL_UP,this.onSkillDrawLevelUp,this),p.EVENT.off(c.EventId.ON_REFRESH_FIGHT_EQUIP,this.updateMagicAttrs,this)},t.prototype.gameLoaded=function(){this.updateMagicAttrs();var e=y.WeaponModel.inst.magicAttrs.a_slevel_v;e>0&&(h.GameModel.inst.level+=e,y.WeaponModel.inst.skillPoint+=e)},t.prototype.updateSkill=function(e){if(e>0){if(u.default.inst.isUIOpen(l.UIType.SelectWeapon))return;if(!y.WeaponModel.inst.canWeaponLevelUp())return void(y.WeaponModel.inst.skillPoint=0);u.default.inst.open(l.UIType.SelectWeapon)}},t.prototype.gameStart=function(){var e=this,t=y.WeaponModel.inst,o=s.TABLE.getStageSk(),n=o.get(_.UserModel.inst.selectStage);for(var i in null==n&&(n=o.get(o.getLength()-1)),n){var r=n[i].id;t.weaponList[r]=s.TABLE.getTable("sk_"+r)}t.weapon2List.freezeAll=s.TABLE.getTable("sk_freezeAll"),t.weaponDrawList.draw1=s.TABLE.getTable("sk_draw1"),t.weaponDrawList.draw2=s.TABLE.getTable("sk_draw2"),t.weaponDrawList.draw3=s.TABLE.getTable("sk_draw3"),f.GodWeaponModel.inst.cur&&this.onSkillLevelUp("yunshi",1,function(){for(var t=1;t<f.GodWeaponModel.inst.curLevel;t++)e.onSkillLevelUp("yunshi",t+1)})},t.prototype.gameOver=function(){for(y.WeaponModel.inst.clear();this.node.children.length>0;)this.node.children.pop().destroy();this.releaseAutoRes()},t.prototype.onSkillLevelUp=function(e,t,o){var n=this,i=y.WeaponModel.inst.weaponCom[e];if(null==i){u.default.inst.delayUIWaitAnim(1),u.default.inst.showUIWaitAnim();var r=e+"",a=r.substring(0,1).toUpperCase()+r.substring(1,r.length);this.loadBundleRes("Prefabs","/Game/Weapon/weapon"+a,cc.Prefab,function(r,a){var s=cc.instantiate(a);s.setParent(n.node),y.WeaponModel.inst.weaponCom[e]=i=s.getComponent(g.WeaponBase),u.default.inst.hideUIWaitAnim(),i.levelUp(t),p.EVENT.emit(c.EventId.ON_GAME_SKILL_REFUSE,e),o&&o()})}else i.levelUp(t),p.EVENT.emit(c.EventId.ON_GAME_SKILL_REFUSE,e)},t.prototype.onSkillLevelUpExtra=function(e,t){var o=y.WeaponModel.inst.weaponCom[e];null!=o?(o.extraLevelUp(t),p.EVENT.emit(c.EventId.ON_GAME_SKILL_REFUSE,e)):console.warn("\u4e0d\u80fd\u989d\u5916\u5347\u7ea7 \u6ca1\u6709\u5b66\u4e60\u7684\u6280\u80fd:",e)},t.prototype.onSkill2LevelUp=function(e,t){var o=this,n=y.WeaponModel.inst.weapon2Com[e];if(null==n){u.default.inst.delayUIWaitAnim(1),u.default.inst.showUIWaitAnim();var i=e+"",r=i.substring(0,1).toUpperCase()+i.substring(1,i.length);this.loadBundleRes("Prefabs","/Game/Weapon/weapon"+r,cc.Prefab,function(i,r){var a=cc.instantiate(r);a.setParent(o.node),y.WeaponModel.inst.weapon2Com[e]=n=a.getComponent(g.WeaponBase),u.default.inst.hideUIWaitAnim(),n.levelUp(t)})}else n.levelUp(t)},t.prototype.onSkillDrawLevelUp=function(e,t){var o=this,n=y.WeaponModel.inst.weaponDrawCom[e];if(null==n){u.default.inst.delayUIWaitAnim(1),u.default.inst.showUIWaitAnim();var i=e+"",r=i.substring(0,1).toUpperCase()+i.substring(1,i.length);this.loadBundleRes("Prefabs","/Game/Weapon/weapon"+r,cc.Prefab,function(i,r){u.default.inst.hideUIWaitAnim();var a=cc.instantiate(r);a.setParent(o.node),(n=y.WeaponModel.inst.weaponDrawCom[e]=a.getComponent(g.WeaponBase)).levelUp(t),p.EVENT.emit(c.EventId.ON_GAME_DRAW_SKILL_REFUSE,e)})}else n.levelUp(t),p.EVENT.emit(c.EventId.ON_GAME_DRAW_SKILL_REFUSE,e)},t.prototype.onClearSkill=function(e){var t=y.WeaponModel.inst,o=t.weaponCom[e];null!=o&&(delete t.weaponCom[e],o.node.destroy())},t.prototype.onClearSkill2=function(e){var t=y.WeaponModel.inst,o=t.weapon2Com[e];null!=o&&(delete t.weapon2Com[e],o.node.destroy())},t.prototype.onClearSkillDraw=function(e){var t=y.WeaponModel.inst,o=t.weaponDrawCom[e];null!=o&&(delete t.weaponDrawCom[e],o.node.destroy())},t.prototype.updateMagicAttrs=function(){var e=y.WeaponModel.inst;e.magicAttrs={};for(var t=0,o=h.GameModel.inst.fightList;t<o.length;t++){var n=o[t];if(null!=n)for(var i in n.magic){var r=n.magic[i],a=n.value[i];e.addMagic(r,a)}}var c=function(t){var o=_.UserModel.inst.talent[t],n=s.TABLE.getTable("talent").find(function(e){return e.id==t&&e.lv==o});if(null==n)return"continue";e.addMagic(n.magic,n.value)};for(var l in _.UserModel.inst.talent)c(l);for(var l in _.UserModel.inst.stageBoxSkill)a=_.UserModel.inst.stageBoxSkill[l],e.addMagic(l,a);e.magicAttrs.sk_freezeAll_lv>0?this.onSkill2LevelUp("freezeAll",1):this.onClearSkill2("freezeAll");for(var p=0,u=Object.values(y.WeaponModel.inst.weaponCom);p<u.length;p++)u[p].updateAttrs()},r([v],t)}(a.GameBase));o.default=M,cc._RF.pop()},{"../Controller/GameBase":"GameBase","../Controller/TableMgr":"TableMgr","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/UI/UIMgr":"UIMgr","../Framework/VM":"VM","../Model/GameModel":"GameModel","../Model/GodWeaponModel":"GodWeaponModel","../Model/UserModel":"UserModel","../Model/WeaponModel":"WeaponModel","./Weapon/WeaponBase":"WeaponBase"}],WeaponDrawBase:[function(e,t,o){"use strict";cc._RF.push(t,"3368bOdI4lPTb4BODunol+E","WeaponDrawBase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.WeaponDrawBase=void 0;var a=e("../../Model/WeaponModel"),s=e("../Bullet/BulletDrawBase"),c=e("./WeaponBase"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._activeTime=0,t._tempDrawPointsAll=null,t._tempDrawColorsAll=null,t._drawSkillUI=null,t}return i(t,e),t.prototype.fire=function(e,t){var o=this;void 0===t&&(t=0);var n=this.getSenior(),i=this.get(n?3+t:t);if(null!=i){var r=i.getComponent(s.BulletDrawBase);null!=r&&(i.setParent(this.getBulletParent(t)),e.type=t,e.attrs=this._weaponInfo[t],e.weapon=this,r.setDraw(this._tempDrawPointsAll,this._tempDrawColorsAll),r.fire(e,function(e){o.put(t,r.node),o.fire(e,++t)}))}},t.prototype.levelUp=function(e){this._activeTime=45,this._tempDrawPointsAll=a.WeaponModel.inst.tempDrawPointsAll.concat(),this._tempDrawColorsAll=a.WeaponModel.inst.tempDrawColorsAll.concat(),this._levels=[e],this.updateAttrs()},t.prototype.update=function(e){this._game.isPause||this._activeTime>0&&(this._activeTime-=e)},t.prototype.getDrawInfo=function(){return{points:this._tempDrawPointsAll,colors:this._tempDrawColorsAll,dur:this._activeTime}},r([p],t)}(c.WeaponBase));o.WeaponDrawBase=u,cc._RF.pop()},{"../../Model/WeaponModel":"WeaponModel","../Bullet/BulletDrawBase":"BulletDrawBase","./WeaponBase":"WeaponBase"}],WeaponModel:[function(e,t,o){"use strict";cc._RF.push(t,"079d9GbtIpMcI6qSog1EU8L","WeaponModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.WeaponModel=o.WeaponAttrs=void 0;var n=e("../Controller/TableMgr"),i=e("../Framework/Utils/Utils"),r=e("../Framework/VM");o.WeaponAttrs=function(){this.damage=1,this.aoeRange=1,this.bulletCount=1,this.duration=1,this.moveSpeed=1,this.angularSpeed=1,this.interval=1,this.hitCount=0,this.distance=0,this.effectInterval=1,this.stopTime=0,this.repelSpeed=0,this.upPos=0,this.rPos=0,this.upSpeed=0,this.rSpeed=0,this.upCount=0,this.rCount=0,this.desc=""};var a=function(){function e(){this.weaponWeight=2,this._weaponList={},this._weapon2List={},this._weaponDrawList={},this._weaponCom={},this._weapon2Com={},this._weaponDrawCom={},this._skillPoint=0,this._tempDrawPointsAll=null,this._tempDrawColorsAll=null,this._magicAttrs={},this.weaponWeight=Number(n.TABLE.getGlobal("WeaponWeight"))||2,r.VM.add(this,"WeaponModel")}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skillPoint",{get:function(){return this._skillPoint},set:function(e){this._skillPoint=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tempDrawPointsAll",{get:function(){return this._tempDrawPointsAll},set:function(e){this._tempDrawPointsAll=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tempDrawColorsAll",{get:function(){return this._tempDrawColorsAll},set:function(e){this._tempDrawColorsAll=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magicAttrs",{get:function(){return this._magicAttrs},set:function(e){this._magicAttrs=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponCom",{get:function(){return this._weaponCom},set:function(e){this._weaponCom=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weapon2Com",{get:function(){return this._weapon2Com},set:function(e){this._weapon2Com=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponDrawCom",{get:function(){return this._weaponDrawCom},set:function(e){this._weaponDrawCom=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponList",{get:function(){return this._weaponList},set:function(e){this._weaponList=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weapon2List",{get:function(){return this._weapon2List},set:function(e){this._weapon2List=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weaponDrawList",{get:function(){return this._weaponDrawList},set:function(e){this._weaponDrawList=e},enumerable:!1,configurable:!0}),e.prototype.getRandom=function(e){var t=[],o=[];for(var n in this._weaponList){var r=this._weaponList[n],a=this._weaponCom[n];if(null==a)t.push(1),o.push({id:n,info:r[0]});else{var s=r.length,c=a.getLevelInfo();if(s<=c.length)continue;for(var l=this.weaponWeight/(s-c.length),p=0;p<r.length;p++){var u=r[p];c.indexOf(u.lv)<0&&(t.push(l),o.push({id:n,info:u}))}}}for(var d=[];d.length<e&&o.length>0;){var h=i.default.getRandWeightIndex(t),f=o.splice(h,1)[0];t.splice(h,1),d.push(f)}return d},e.prototype.getRandomExtra=function(e){var t=[];for(var o in this._weaponList){var n=this._weaponList[o];if(null!=this._weaponCom[o])for(var i=1;i<n.length;i++){var r=n[i];t.push({id:o,info:r})}}for(var a=[];a.length<e&&t.length>0;){var s=cc.math.randomRangeInt(0,t.length),c=t.splice(s,1)[0];a.push(c)}return a},e.prototype.getRandomDraw=function(e){var t=Object.keys(this._weaponDrawList),o=t.indexOf(e);return o>=0&&t.splice(o,1),i.default.RandomSome(t,1)[0]},e.prototype.canWeaponLevelUp=function(){for(var e=0,t=Object.keys(this._weaponList);e<t.length;e++){var o=t[e],n=this._weaponCom[o];if(null==this._weaponCom[o])return!0;if(n.canLevelUp())return!0}return!1},e.prototype.addMagic=function(e,t){null==this._magicAttrs[e]&&(this._magicAttrs[e]=0),this._magicAttrs[e]+=t},e.prototype.clear=function(){this._weaponList={},this._weapon2List={},this._weaponDrawList={},this._weaponCom={},this._weapon2Com={},this._weaponDrawCom={},this._skillPoint=0,this._tempDrawPointsAll=null,this._tempDrawColorsAll=null,this._magicAttrs={}},e._inst=null,e}();o.WeaponModel=a,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Framework/Utils/Utils":"Utils","../Framework/VM":"VM"}],Wrapper:[function(e,t,o){"use strict";cc._RF.push(t,"11d60sMCXpKaZOQhlHIsOwD","Wrapper"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){this.repeatCur=0},i=function(){function e(){}return e.callFunc=function(e,t,o){return cc.callFunc(function(o){try{t?e&&e.call(t,o):e&&e(o)}catch(n){console.error(n)}},null,o)},e.scheduleFunction=function(e,t,o,i,r){var a=this;if(e&&e.isLive()&&t){var s=new n;s.target=e,s.name=e.getName(),s.cb=t,s.repeat=i,s.tempCb=function(t){try{s.cb&&s.target.isLive()&&s.cb.call(s.target,t),s.repeat!==cc.macro.REPEAT_FOREVER&&(++s.repeatCur,s.repeatCur>=s.repeat&&a.unscheduleFunction(s.cb))}catch(c){var n=e.getError(c,"scheduleFunction");n.customInfo="interval?: "+o+", repeat?: "+i+", delay?: "+r,console.error(n)}},e.schedule(s.tempCb,o,i,r),this._scheduleList.push(s)}else console.error()},e.unscheduleFunction=function(e){for(var t=0;t<this._scheduleList.length;t++){var o=this._scheduleList[t];if(o.cb==e)return o.target.isLive()&&o.target.unschedule(o.tempCb),void this._scheduleList.splice(t,1)}},e._scheduleList=[],e}();o.default=i,cc._RF.pop()},{}],XiuLianAD:[function(e,t,o){"use strict";cc._RF.push(t,"3d72e0NR+dD7I9hr5yVSPJL","XiuLianAD");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Controller/TimeMgr"),c=e("../../../Define/EventId"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/UI/UIMgr"),d=e("../../../Framework/UIBase"),h=e("../../../Model/XiuLianModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtCount=null,t.btnAd=null,t}return i(t,e),t.prototype.onOpen=function(){var e=s.default.inst.now();s.default.inst.isSameDay(s.default.inst.now(),h.XiuLianModel.inst.curDay)||(h.XiuLianModel.inst.curDay=e,h.XiuLianModel.inst.curDayCount=0),this.txtCount.string="\u4eca\u65e5\u5269\u4f59\u6b21\u6570\uff1a"+(h.XiuLianModel.inst.curDayCountMax-h.XiuLianModel.inst.curDayCount)},t.prototype.onClickConfirm=function(){var e=this;h.XiuLianModel.inst.curDayCount>=h.XiuLianModel.inst.curDayCountMax?u.default.inst.showToast("\u4eca\u65e5\u7684\u5feb\u901f\u4fee\u70bc\u6b21\u6570\u5df2\u7528\u5b8c"):a.default.inst.showAd("\u5feb\u901f\u4fee\u70bc",function(){l.AudioMgr.inst.playEffectByName("achievement"),h.XiuLianModel.inst.money+=Math.floor(h.XiuLianModel.inst.adTime/6e4*(h.XiuLianModel.inst.speed/60)),h.XiuLianModel.inst.curDayCount++,e.txtCount.string="\u4eca\u65e5\u5269\u4f59\u6b21\u6570\uff1a"+(h.XiuLianModel.inst.curDayCountMax-h.XiuLianModel.inst.curDayCount);var t=e.btnAd.node.convertToWorldSpaceAR(cc.Vec2.ZERO);p.EVENT.emit(c.EventId.ON_UI_MAIN_FLY_XIULIAN,t,"RMoney"),e.close()})},t.prototype.onClickCancel=function(){this.close()},r([y(cc.Label)],t.prototype,"txtCount",void 0),r([y(cc.Button)],t.prototype,"btnAd",void 0),r([_],t)}(d.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Controller/TimeMgr":"TimeMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLianItem:[function(e,t,o){"use strict";cc._RF.push(t,"0bc45EUpKFDnptZo+0flLX9","XiuLianItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/UIDefs"),s=e("../../../Framework/Res/ResKeeper"),c=e("../../../Framework/UI/UIMgr"),l=e("../../../Model/XiuLianModel"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtNum=null,t.nodeNum=null,t.frame1=null,t.frame2=null,t.skillId="",t}return i(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.onClick=function(){c.default.inst.open(a.UIType.XiuLianTip,this.skillId)},t.prototype.updateLevel=function(){var e=l.XiuLianModel.inst.getLevel(this.skillId);e>0?(this.txtNum.string=""+e,this.nodeNum.active=!0):(this.txtNum.string="",this.nodeNum.active=!1),this.frame1.active=e<2*l.XiuLianModel.inst.levelMax,this.frame2.active=e>=2*l.XiuLianModel.inst.levelMax},r([d(cc.Sprite)],t.prototype,"icon",void 0),r([d(cc.Label)],t.prototype,"txtNum",void 0),r([d(cc.Node)],t.prototype,"nodeNum",void 0),r([d(cc.Node)],t.prototype,"frame1",void 0),r([d(cc.Node)],t.prototype,"frame2",void 0),r([d],t.prototype,"skillId",void 0),r([u],t)}(s.default);o.default=h,cc._RF.pop()},{"../../../Define/UIDefs":"UIDefs","../../../Framework/Res/ResKeeper":"ResKeeper","../../../Framework/UI/UIMgr":"UIMgr","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLianModel:[function(e,t,o){"use strict";cc._RF.push(t,"67e06df6DtI8IlqHuOkNEXK","XiuLianModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.XiuLianModel=o.XiuLianLevelValue=void 0;var n=e("../Controller/TableMgr"),i=e("../Controller/TimeMgr"),r=e("../Framework/Storage/LocalStorageMgr");o.XiuLianLevelValue={damage:.02,critRate:.005},Object.freeze(o.XiuLianLevelValue);var a=function(){function e(){this._money=0,this._starTime=0,this._levels={},this._levelMax=10,this._speed=200,this._curDayCount=0,this._curDayCountMax=3,this._curDay=0,this._adTime=72e5,this._offlineTime=144e5,this._money=Number(r.LocalStorageMgr.getItem("XiuLian_money"))||Number(n.TABLE.getGlobal("XiuLianMoney")),this._starTime=Number(r.LocalStorageMgr.getItem("XiuLian_starTime"))||0,this._levels=JSON.parse(r.LocalStorageMgr.getItem("XiuLian_levels"))||{},this._curDay=Number(r.LocalStorageMgr.getItem("XiuLian_curDay"))||0,this._curDayCount=Number(r.LocalStorageMgr.getItem("XiuLian_curDayCount"))||0,this._speed=Number(n.TABLE.getGlobal("XiuLianSpeed")),this._curDayCountMax=Number(n.TABLE.getGlobal("XiuLiancurDayCountMax")),this._adTime=Number(n.TABLE.getGlobal("XiuLianAdTime")),this._offlineTime=Number(n.TABLE.getGlobal("XiuLianOfflineTime")),this._money<0&&(this._money=0)}return Object.defineProperty(e,"inst",{get:function(){return null==this._inst&&(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"money",{get:function(){return this._money},set:function(e){this._money=e,r.LocalStorageMgr.setItem("XiuLian_money",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"starTime",{get:function(){return this._starTime},set:function(e){this._starTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(e){this._speed=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},set:function(e){this._levels=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levelMax",{get:function(){return this._levelMax},set:function(e){this._levelMax=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curDayCount",{get:function(){return this._curDayCount},set:function(e){this._curDayCount=e,r.LocalStorageMgr.setItem("XiuLian_curDayCount",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curDay",{get:function(){return this._curDay},set:function(e){this._curDay=e,r.LocalStorageMgr.setItem("XiuLian_curDay",""+e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curDayCountMax",{get:function(){return this._curDayCountMax},set:function(e){this._curDayCountMax=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adTime",{get:function(){return this._adTime},set:function(e){this._adTime=e},enumerable:!1,configurable:!0}),e.prototype.getCount=function(){var e=0;for(var t in this._levels)for(var o=this._levels[t],n=0,i=Object.keys(o);n<i.length;n++)e+=o[i[n]];return e},e.prototype.getMoney=function(){var e=n.TABLE.getTableInfo("XiuLianLevelUpMoney","num",this.getCount()),t=0;return e&&(t=e.money),t},e.prototype.forecastMoney=function(){var e=i.default.inst.now();if(0==this._starTime||null==this._starTime)return this._starTime=e,0;var t=e-this._starTime;t>this._offlineTime&&(t=this._offlineTime);var o=Math.floor(t/6e4);return 0==o?0:Math.floor(o*this._speed/60)},e.prototype.saveMoney=function(){var e=i.default.inst.now();if(0==this._starTime||null==this._starTime)return this._starTime=e,0;var t=e-this._starTime;t>this._offlineTime&&(t=this._offlineTime);var o=Math.floor(t/6e4);if(0==o)return 0;var n=6e4*o;return t==this._offlineTime?this._starTime=e:this._starTime+=n,this._money+=Math.floor(o*(this._speed/60)),r.LocalStorageMgr.setItem("XiuLian_money",""+this._money),r.LocalStorageMgr.setItem("XiuLian_starTime",""+this._starTime),n},e.prototype.saveLevel=function(){r.LocalStorageMgr.setItem("XiuLian_levels",""+JSON.stringify(this._levels))},e.prototype.getLevel=function(e){var t=this._levels[e];if(null==t)return 0;for(var o=0,n=0,i=Object.keys(t);n<i.length;n++)o+=t[i[n]];return o},e.prototype.getInfo=function(e){var t=this._levels[e];return null==t&&(t=this._levels[e]={damage:0,critRate:0}),t},e._inst=null,e}();o.XiuLianModel=a,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Controller/TimeMgr":"TimeMgr","../Framework/Storage/LocalStorageMgr":"LocalStorageMgr"}],XiuLianResult:[function(e,t,o){"use strict";cc._RF.push(t,"3bc5fqIJINJdJJdPS70y931","XiuLianResult");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/AdMgr"),s=e("../../../Define/EventId"),c=e("../../../Framework/Audio/AudioMgr"),l=e("../../../Framework/Event/EventMgr"),p=e("../../../Framework/UI/UIFacade"),u=e("../../../Framework/UIBase"),d=e("../../../Framework/Utils/Utils"),h=e("../../../Model/XiuLianModel"),f=cc._decorator,_=f.ccclass,y=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtMsg=null,t.btnAd=null,t._money=0,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=t.money,n=t.time;this._money=o,this.txtMsg.string=n>36e5?"\u5df2\u4fee\u70bc"+d.default.formatTime(n,"h\u5c0f\u65f6mm\u5206\u949f")+"\uff0c\u5171\n\u83b7\u5f97\u5185\u529b: "+o:n>6e5?"\u5df2\u4fee\u70bc"+d.default.formatTime(n,"mm\u5206\u949f")+"\uff0c\u5171\n\u83b7\u5f97\u5185\u529b: "+o:"\u5df2\u4fee\u70bc"+d.default.formatTime(n,"m\u5206\u949f")+"\uff0c\u5171\n\u83b7\u5f97\u5185\u529b: "+o},t.prototype.onClick=function(){c.AudioMgr.inst.playEffectByName("achievement");var e=this.btnAd.node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_XIULIAN,e,"RMoney"),this.close()},t.prototype.onClickAd=function(){var e=this;a.default.inst.showAd("\u4fee\u70bc\u989d\u5916\u9886\u53d6",function(){c.AudioMgr.inst.playEffectByName("achievement"),h.XiuLianModel.inst.money+=2*e._money,p.UIFacade.showToast("\u83b7\u5f97\u989d\u5916\u5185\u529b\uff1a"+2*e._money);var t=e.btnAd.node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_XIULIAN,t,"RMoney"),e.close()})},r([y(cc.Label)],t.prototype,"txtMsg",void 0),r([y(cc.Button)],t.prototype,"btnAd",void 0),r([_],t)}(u.default);o.default=g,cc._RF.pop()},{"../../../Controller/AdMgr":"AdMgr","../../../Define/EventId":"EventId","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLianTip:[function(e,t,o){"use strict";cc._RF.push(t,"3bb83tX32BElJp84bCUZu9Z","XiuLianTip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Define/Define"),s=e("../../../Framework/UIBase"),c=e("../../../Model/XiuLianModel"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.txtName=null,t.txtDamage=null,t.txtCritRate=null,t}return i(t,e),t.prototype.onOpen=function(e,t){var o=this,n=t,i=c.XiuLianModel.inst.getLevel(n),r=c.XiuLianModel.inst.getInfo(n);this.txtName.string=a.SKILL_NAME[n]+" | "+i+"\u7ea7",this.loadBundleRes("Textures",a.SKILL_ICON_URL[n],cc.SpriteFrame,function(e,t){o.icon.spriteFrame=t});var s=r.damage*c.XiuLianLevelValue.damage*100,l=r.critRate*c.XiuLianLevelValue.critRate*100;s=Math.floor(10*s)/10,l=Math.floor(10*l)/10,this.txtDamage.string="\u6280\u80fd\u4f24\u5bb3: +"+s+"%",this.txtCritRate.string="\u6280\u80fd\u66b4\u51fb\u7387: +"+l+"%"},r([u(cc.Sprite)],t.prototype,"icon",void 0),r([u(cc.Label)],t.prototype,"txtName",void 0),r([u(cc.Label)],t.prototype,"txtDamage",void 0),r([u(cc.Label)],t.prototype,"txtCritRate",void 0),r([p],t)}(s.default);o.default=d,cc._RF.pop()},{"../../../Define/Define":"Define","../../../Framework/UIBase":"UIBase","../../../Model/XiuLianModel":"XiuLianModel"}],XiuLian:[function(e,t,o){"use strict";cc._RF.push(t,"5d5eaU4AJtMBYS90AW+l/1w","XiuLian");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Controller/NativeMgr"),s=e("../../../Define/EventId"),c=e("../../../Define/UIDefs"),l=e("../../../Framework/Audio/AudioMgr"),p=e("../../../Framework/Event/EventMgr"),u=e("../../../Framework/UI/UIFacade"),d=e("../../../Framework/UI/UIMgr"),h=e("../../../Framework/UIBase"),f=e("../../../Framework/Utils/Utils"),_=e("../../../Model/XiuLianModel"),y=e("./XiuLianItem"),g=cc._decorator,m=g.ccclass,v=g.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtMoney=null,t.txtMoneyLevelUp=null,t.txtSpeed=null,t.layout=null,t.nodeSelect=null,t.tipAni=null,t._items=[],t._aniPlay=!1,t._money=0,t._dt=0,t}return i(t,e),t.prototype.onOpen=function(){l.AudioMgr.inst.playEffectByName("ui_open"),this._items=this.layout.getComponentsInChildren(y.default),this._money=_.XiuLianModel.inst.getMoney(),this.txtMoneyLevelUp.string=""+this._money,this.txtMoney.string=""+_.XiuLianModel.inst.money,this.txtSpeed.string=_.XiuLianModel.inst.speed+"/\u65f6",this.nodeSelect.active=!1,this.tipAni.node.active=!1,this.updateItem();var e=_.XiuLianModel.inst.saveMoney(),t=e/6e4;if(t>=5){var o=Math.floor(t*(_.XiuLianModel.inst.speed/60));d.default.inst.open(c.UIType.XiuLianResult,{money:o,time:e})}},t.prototype.onEnable=function(){p.EVENT.on(s.EventId.ON_UI_MAIN_FLY_XIULIAN,this.onIconFly,this)},t.prototype.onDisable=function(){p.EVENT.off(s.EventId.ON_UI_MAIN_FLY_XIULIAN,this.onIconFly,this)},t.prototype.onClose=function(){l.AudioMgr.inst.playEffectByName("ui_close")},t.prototype.onClickLevelUp=function(){var e=this;if(!this._aniPlay)if(_.XiuLianModel.inst.money<this._money)u.UIFacade.showToast("\u5185\u529b\u4e0d\u8db3");else{var t=[];if(this._items.forEach(function(e){var o=e.skillId;_.XiuLianModel.inst.getLevel(o)<2*_.XiuLianModel.inst.levelMax&&t.push(o)}),0!=t.length){var o=f.default.getRandToArray(t),n=_.XiuLianModel.inst.getInfo(o),i=Object.keys(n).filter(function(e){return n[e]<_.XiuLianModel.inst.levelMax});n[f.default.getRandToArray(i)]+=1,this._money=_.XiuLianModel.inst.getMoney(),this.txtMoneyLevelUp.string=""+this._money,_.XiuLianModel.inst.saveLevel(),_.XiuLianModel.inst.money-=this._money,this._aniPlay=!0;var r=5.1,a=.5,s=0,c=this._items.length,p=Math.floor(Math.random()*c),d=function(t){if(r-=t,(a-=t/10)<.15&&(a=.15),!((s+=t)<a)){if(r<=0){var n=e._items.find(function(e){return e.skillId==o}).node;return e.nodeSelect.setParent(n),e.nodeSelect.setSiblingIndex(2),e.updateItem(),e.unschedule(d),e._aniPlay=!1,void l.AudioMgr.inst.playEffectByName("talentLevelUp")}s-=a;for(var i=p;i==p;)p=Math.floor(Math.random()*c);var u=e._items[p].node;e.nodeSelect.setParent(u),e.nodeSelect.setSiblingIndex(2),l.AudioMgr.inst.playEffectByName("talentSelect")}};this.schedule(d);var h=this._items[p].node;this.nodeSelect.active=!0,this.nodeSelect.setParent(h),this.nodeSelect.setSiblingIndex(2)}else u.UIFacade.showToast("\u6280\u80fd\u5df2\u7ecf\u5168\u90e8\u4fee\u70bc\u6ee1\u4e86")}},t.prototype.onClickAD=function(){this._aniPlay||d.default.inst.open(c.UIType.XiuLianAD)},t.prototype.onClickTipOpen=function(){this._aniPlay||(this.tipAni.node.active=!0,this.tipAni.play("TipOpen"))},t.prototype.onClickTipClose=function(){var e=this;this.tipAni.play("TipClose"),this.tipAni.once(cc.Animation.EventType.FINISHED,function(){e.tipAni.node.active=!1})},t.prototype.onClickMoney=function(){a.default.inst._debug&&(_.XiuLianModel.inst.money+=1e3,this.txtMoney.string=""+_.XiuLianModel.inst.money)},t.prototype.onIconFly=function(e){p.EVENT.emit(s.EventId.ON_UI_MAIN_FLY_ICON,e,"XiuLian",null,{target:this.txtMoney.node})},t.prototype.updateItem=function(){this._items.forEach(function(e){return e.updateLevel()})},t.prototype.update=function(e){this._dt+=e,this._dt>1&&(this._dt-=1,_.XiuLianModel.inst.saveMoney(),this.txtMoney.string=""+_.XiuLianModel.inst.money)},r([v(cc.Label)],t.prototype,"txtMoney",void 0),r([v(cc.Label)],t.prototype,"txtMoneyLevelUp",void 0),r([v(cc.Label)],t.prototype,"txtSpeed",void 0),r([v(cc.Layout)],t.prototype,"layout",void 0),r([v(cc.Node)],t.prototype,"nodeSelect",void 0),r([v(cc.Animation)],t.prototype,"tipAni",void 0),r([m],t)}(h.default);o.default=M,cc._RF.pop()},{"../../../Controller/NativeMgr":"NativeMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Audio/AudioMgr":"AudioMgr","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Model/XiuLianModel":"XiuLianModel","./XiuLianItem":"XiuLianItem"}],"crypto-js":[function(e,t,o){"use strict";var n;cc._RF.push(t,"e105auWGJpFnomWZwcHOhEJ","crypto-js"),n=function(){var e,t,o,n,i,r,a,s,c,l,p=p||function(e){var t=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),o={},n=o.lib={},i=n.Base={extend:function(e){var o=t(this);return e&&o.mixIn(e),o.hasOwnProperty("init")&&this.init!==o.init||(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,o=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var r=0;r<i;r++){var a=o[r>>>2]>>>24-r%4*8&255;t[n+r>>>2]|=a<<24-(n+r)%4*8}else for(r=0;r<i;r+=4)t[n+r>>>2]=o[r>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o,n=[],i=function(t){t=t;var o=987654321,n=4294967295;return function(){var i=((o=36969*(65535&o)+(o>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var s=i(4294967296*(o||e.random()));o=987654071*s(),n.push(4294967296*s()|0)}return new r.init(n,t)}}),a=o.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],i=0;i<o;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n+=2)o[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new r.init(o,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],i=0;i<o;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n++)o[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new r.init(o,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},p=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,n=o.words,i=o.sigBytes,a=this.blockSize,s=i/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,i);if(c){for(var p=0;p<c;p+=a)this._doProcessBlock(n,p);var u=n.splice(0,c);o.sigBytes-=l}return new r.init(u,l)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(n.Hasher=p.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new u.HMAC.init(e,o).finalize(t)}}}),o.algo={});return o}(Math);return function(){var e=p,t=e.lib.WordArray;function o(e,o,n){for(var i=[],r=0,a=0;a<o;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,c=n[e.charCodeAt(a)]>>>6-a%4*2;i[r>>>2]|=(s|c)<<24-r%4*8,r++}return t.create(i,r)}e.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,n=this._map;e.clamp();for(var i=[],r=0;r<o;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;s<4&&r+.75*s<o;s++)i.push(n.charAt(a>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var r=0;r<n.length;r++)i[n.charCodeAt(r)]=r}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return o(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){var t=p,o=t.lib,n=o.WordArray,i=o.Hasher,r=t.algo,a=[];(function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0})();var s=r.MD5=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var n=t+o,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var r=this._hash.words,s=e[t+0],p=e[t+1],h=e[t+2],f=e[t+3],_=e[t+4],y=e[t+5],g=e[t+6],m=e[t+7],v=e[t+8],M=e[t+9],b=e[t+10],I=e[t+11],E=e[t+12],O=e[t+13],S=e[t+14],w=e[t+15],R=r[0],P=r[1],T=r[2],A=r[3];R=c(R,P,T,A,s,7,a[0]),A=c(A,R,P,T,p,12,a[1]),T=c(T,A,R,P,h,17,a[2]),P=c(P,T,A,R,f,22,a[3]),R=c(R,P,T,A,_,7,a[4]),A=c(A,R,P,T,y,12,a[5]),T=c(T,A,R,P,g,17,a[6]),P=c(P,T,A,R,m,22,a[7]),R=c(R,P,T,A,v,7,a[8]),A=c(A,R,P,T,M,12,a[9]),T=c(T,A,R,P,b,17,a[10]),P=c(P,T,A,R,I,22,a[11]),R=c(R,P,T,A,E,7,a[12]),A=c(A,R,P,T,O,12,a[13]),T=c(T,A,R,P,S,17,a[14]),R=l(R,P=c(P,T,A,R,w,22,a[15]),T,A,p,5,a[16]),A=l(A,R,P,T,g,9,a[17]),T=l(T,A,R,P,I,14,a[18]),P=l(P,T,A,R,s,20,a[19]),R=l(R,P,T,A,y,5,a[20]),A=l(A,R,P,T,b,9,a[21]),T=l(T,A,R,P,w,14,a[22]),P=l(P,T,A,R,_,20,a[23]),R=l(R,P,T,A,M,5,a[24]),A=l(A,R,P,T,S,9,a[25]),T=l(T,A,R,P,f,14,a[26]),P=l(P,T,A,R,v,20,a[27]),R=l(R,P,T,A,O,5,a[28]),A=l(A,R,P,T,h,9,a[29]),T=l(T,A,R,P,m,14,a[30]),R=u(R,P=l(P,T,A,R,E,20,a[31]),T,A,y,4,a[32]),A=u(A,R,P,T,v,11,a[33]),T=u(T,A,R,P,I,16,a[34]),P=u(P,T,A,R,S,23,a[35]),R=u(R,P,T,A,p,4,a[36]),A=u(A,R,P,T,_,11,a[37]),T=u(T,A,R,P,m,16,a[38]),P=u(P,T,A,R,b,23,a[39]),R=u(R,P,T,A,O,4,a[40]),A=u(A,R,P,T,s,11,a[41]),T=u(T,A,R,P,f,16,a[42]),P=u(P,T,A,R,g,23,a[43]),R=u(R,P,T,A,M,4,a[44]),A=u(A,R,P,T,E,11,a[45]),T=u(T,A,R,P,w,16,a[46]),R=d(R,P=u(P,T,A,R,h,23,a[47]),T,A,s,6,a[48]),A=d(A,R,P,T,m,10,a[49]),T=d(T,A,R,P,S,15,a[50]),P=d(P,T,A,R,y,21,a[51]),R=d(R,P,T,A,E,6,a[52]),A=d(A,R,P,T,f,10,a[53]),T=d(T,A,R,P,b,15,a[54]),P=d(P,T,A,R,p,21,a[55]),R=d(R,P,T,A,v,6,a[56]),A=d(A,R,P,T,w,10,a[57]),T=d(T,A,R,P,g,15,a[58]),P=d(P,T,A,R,O,21,a[59]),R=d(R,P,T,A,_,6,a[60]),A=d(A,R,P,T,I,10,a[61]),T=d(T,A,R,P,h,15,a[62]),P=d(P,T,A,R,M,21,a[63]),r[0]=r[0]+R|0,r[1]=r[1]+P|0,r[2]=r[2]+T|0,r[3]=r[3]+A|0},_doFinalize:function(){var t=this._data,o=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;o[i>>>5]|=128<<24-i%32;var r=e.floor(n/4294967296),a=n;o[15+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),o[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(o.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var p=c[l];c[l]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,o,n,i,r,a){var s=e+(t&o|~t&n)+i+a;return(s<<r|s>>>32-r)+t}function l(e,t,o,n,i,r,a){var s=e+(t&n|o&~n)+i+a;return(s<<r|s>>>32-r)+t}function u(e,t,o,n,i,r,a){var s=e+(t^o^n)+i+a;return(s<<r|s>>>32-r)+t}function d(e,t,o,n,i,r,a){var s=e+(o^(t|~n))+i+a;return(s<<r|s>>>32-r)+t}t.MD5=i._createHelper(s),t.HmacMD5=i._createHmacHelper(s)}(Math),t=(e=p).lib,o=t.WordArray,n=t.Hasher,i=e.algo,r=[],a=i.SHA1=n.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],i=o[1],a=o[2],s=o[3],c=o[4],l=0;l<80;l++){if(l<16)r[l]=0|e[t+l];else{var p=r[l-3]^r[l-8]^r[l-14]^r[l-16];r[l]=p<<1|p>>>31}var u=(n<<5|n>>>27)+c+r[l];u+=l<20?1518500249+(i&a|~i&s):l<40?1859775393+(i^a^s):l<60?(i&a|i&s|a&s)-1894007588:(i^a^s)-899497514,c=s,s=a,a=i<<30|i>>>2,i=n,n=u}o[0]=o[0]+n|0,o[1]=o[1]+i|0,o[2]=o[2]+a|0,o[3]=o[3]+s|0,o[4]=o[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(o/4294967296),t[15+(n+64>>>9<<4)]=o,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=n._createHelper(a),e.HmacSHA1=n._createHmacHelper(a),function(e){var t=p,o=t.lib,n=o.WordArray,i=o.Hasher,r=t.algo,a=[],s=[];(function(){function t(t){for(var o=e.sqrt(t),n=2;n<=o;n++)if(!(t%n))return!1;return!0}function o(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(a[i]=o(e.pow(n,.5))),s[i]=o(e.pow(n,1/3)),i++),n++})();var c=[],l=r.SHA256=i.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],i=o[1],r=o[2],a=o[3],l=o[4],p=o[5],u=o[6],d=o[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var f=c[h-15],_=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,y=c[h-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[h]=_+c[h-7]+g+c[h-16]}var m=n&i^n&r^i&r,v=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),M=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&p^~l&u)+s[h]+c[h];d=u,u=p,p=l,l=a+M|0,a=r,r=i,i=n,n=M+(v+m)|0}o[0]=o[0]+n|0,o[1]=o[1]+i|0,o[2]=o[2]+r|0,o[3]=o[3]+a|0,o[4]=o[4]+l|0,o[5]=o[5]+p|0,o[6]=o[6]+u|0,o[7]=o[7]+d|0},_doFinalize:function(){var t=this._data,o=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return o[i>>>5]|=128<<24-i%32,o[14+(i+64>>>9<<4)]=e.floor(n/4294967296),o[15+(i+64>>>9<<4)]=n,t.sigBytes=4*o.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),function(){var e=p,t=e.lib.WordArray,o=e.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],i=0;i<o;i+=2){var r=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(r))}return n.join("")},parse:function(e){for(var o=e.length,n=[],i=0;i<o;i++)n[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(n,2*o)}},o.Utf16LE={stringify:function(e){for(var t=e.words,o=e.sigBytes,i=[],r=0;r<o;r+=2){var a=n(t[r>>>2]>>>16-r%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var o=e.length,i=[],r=0;r<o;r++)i[r>>>1]|=n(e.charCodeAt(r)<<16-r%2*16);return t.create(i,2*o)}}}(),function(){if("function"==typeof ArrayBuffer){var e=p.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var o=e.byteLength,n=[],i=0;i<o;i++)n[i>>>2]|=e[i]<<24-i%4*8;t.call(this,n,o)}else t.apply(this,arguments)}).prototype=e}}(),function(){var e=p,t=e.lib,o=t.WordArray,n=t.Hasher,i=e.algo,r=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=o.create([0,1518500249,1859775393,2400959708,2840853838]),u=o.create([1352829926,1548603684,1836072691,2053994217,0]),d=i.RIPEMD160=n.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var n=t+o,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var p,d,v,M,b,I,E,O,S,w,R,P=this._hash.words,T=l.words,A=u.words,L=r.words,C=a.words,U=s.words,k=c.words;for(I=p=P[0],E=d=P[1],O=v=P[2],S=M=P[3],w=b=P[4],o=0;o<80;o+=1)R=p+e[t+L[o]]|0,R+=o<16?h(d,v,M)+T[0]:o<32?f(d,v,M)+T[1]:o<48?_(d,v,M)+T[2]:o<64?y(d,v,M)+T[3]:g(d,v,M)+T[4],R=(R=m(R|=0,U[o]))+b|0,p=b,b=M,M=m(v,10),v=d,d=R,R=I+e[t+C[o]]|0,R+=o<16?g(E,O,S)+A[0]:o<32?y(E,O,S)+A[1]:o<48?_(E,O,S)+A[2]:o<64?f(E,O,S)+A[3]:h(E,O,S)+A[4],R=(R=m(R|=0,k[o]))+w|0,I=w,w=S,S=m(O,10),O=E,E=R;R=P[1]+v+S|0,P[1]=P[2]+M+w|0,P[2]=P[3]+b+I|0,P[3]=P[4]+p+E|0,P[4]=P[0]+d+O|0,P[0]=R},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,r=i.words,a=0;a<5;a++){var s=r[a];r[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function h(e,t,o){return e^t^o}function f(e,t,o){return e&t|~e&o}function _(e,t,o){return(e|~t)^o}function y(e,t,o){return e&o|t&~o}function g(e,t,o){return e^(t|~o)}function m(e,t){return e<<t|e>>>32-t}e.RIPEMD160=n._createHelper(d),e.HmacRIPEMD160=n._createHmacHelper(d)}(Math),function(){var e=p,t=e.lib.Base,o=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),s=r.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;r.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,o=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(o))}})}(),function(){var e=p,t=e.lib,o=t.Base,n=t.WordArray,i=e.algo,r=i.SHA1,a=i.HMAC,s=i.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:r,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,i=a.create(o.hasher,e),r=n.create(),s=n.create([1]),c=r.words,l=s.words,p=o.keySize,u=o.iterations;c.length<p;){var d=i.update(t).finalize(s);i.reset();for(var h=d.words,f=h.length,_=d,y=1;y<u;y++){_=i.finalize(_),i.reset();for(var g=_.words,m=0;m<f;m++)h[m]^=g[m]}r.concat(d),l[0]++}return r.sigBytes=4*p,r}});e.PBKDF2=function(e,t,o){return s.create(o).compute(e,t)}}(),function(){var e=p,t=e.lib,o=t.Base,n=t.WordArray,i=e.algo,r=i.MD5,a=i.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:r,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,i=o.hasher.create(),r=n.create(),a=r.words,s=o.keySize,c=o.iterations;a.length<s;){l&&i.update(l);var l=i.update(e).finalize(t);i.reset();for(var p=1;p<c;p++)l=i.finalize(l),i.reset();r.concat(l)}return r.sigBytes=4*s,r}});e.EvpKDF=function(e,t,o){return a.create(o).compute(e,t)}}(),function(){var e=p,t=e.lib.WordArray,o=e.algo,n=o.SHA256,i=o.SHA224=n.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=n._createHelper(i),e.HmacSHA224=n._createHmacHelper(i)}(),function(){var e=p,t=e.lib,o=t.Base,n=t.WordArray,i=e.x64={};i.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,o=[],i=0;i<t;i++){var r=e[i];o.push(r.high),o.push(r.low)}return n.create(o,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),function(e){var t=p,o=t.lib,n=o.WordArray,i=o.Hasher,r=t.x64.Word,a=t.algo,s=[],c=[],l=[];(function(){for(var e=1,t=0,o=0;o<24;o++){s[e+5*t]=(o+1)*(o+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,a=0;a<24;a++){for(var p=0,u=0,d=0;d<7;d++){if(1&i){var h=(1<<d)-1;h<32?u^=1<<h:p^=1<<h-32}128&i?i=i<<1^113:i<<=1}l[a]=r.create(p,u)}})();var u=[];(function(){for(var e=0;e<25;e++)u[e]=r.create()})();var d=a.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new r.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var o=this._state,n=this.blockSize/2,i=0;i<n;i++){var r=e[t+2*i],a=e[t+2*i+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(P=o[i]).high^=a,P.low^=r}for(var p=0;p<24;p++){for(var d=0;d<5;d++){for(var h=0,f=0,_=0;_<5;_++)h^=(P=o[d+5*_]).high,f^=P.low;var y=u[d];y.high=h,y.low=f}for(d=0;d<5;d++){var g=u[(d+4)%5],m=u[(d+1)%5],v=m.high,M=m.low;for(h=g.high^(v<<1|M>>>31),f=g.low^(M<<1|v>>>31),_=0;_<5;_++)(P=o[d+5*_]).high^=h,P.low^=f}for(var b=1;b<25;b++){var I=(P=o[b]).high,E=P.low,O=s[b];O<32?(h=I<<O|E>>>32-O,f=E<<O|I>>>32-O):(h=E<<O-32|I>>>64-O,f=I<<O-32|E>>>64-O);var S=u[c[b]];S.high=h,S.low=f}var w=u[0],R=o[0];for(w.high=R.high,w.low=R.low,d=0;d<5;d++)for(_=0;_<5;_++){var P=o[b=d+5*_],T=u[b],A=u[(d+1)%5+5*_],L=u[(d+2)%5+5*_];P.high=T.high^~A.high&L.high,P.low=T.low^~A.low&L.low}P=o[0];var C=l[p];P.high^=C.high,P.low^=C.low}},_doFinalize:function(){var t=this._data,o=t.words,i=(this._nDataBytes,8*t.sigBytes),r=32*this.blockSize;o[i>>>5]|=1<<24-i%32,o[(e.ceil((i+1)/r)*r>>>5)-1]|=128,t.sigBytes=4*o.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],p=0;p<c;p++){var u=a[p],d=u.high,h=u.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),l.push(h),l.push(d)}return new n.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),o=0;o<25;o++)t[o]=t[o].clone();return e}});t.SHA3=i._createHelper(d),t.HmacSHA3=i._createHmacHelper(d)}(Math),function(){var e=p,t=e.lib.Hasher,o=e.x64,n=o.Word,i=o.WordArray,r=e.algo;function a(){return n.create.apply(n,arguments)}var s=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],c=[];(function(){for(var e=0;e<80;e++)c[e]=a()})();var l=r.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],i=o[1],r=o[2],a=o[3],l=o[4],p=o[5],u=o[6],d=o[7],h=n.high,f=n.low,_=i.high,y=i.low,g=r.high,m=r.low,v=a.high,M=a.low,b=l.high,I=l.low,E=p.high,O=p.low,S=u.high,w=u.low,R=d.high,P=d.low,T=h,A=f,L=_,C=y,U=g,k=m,N=v,B=M,D=b,x=I,F=E,G=O,j=S,V=w,W=R,H=P,z=0;z<80;z++){var X=c[z];if(z<16)var K=X.high=0|e[t+2*z],q=X.low=0|e[t+2*z+1];else{var Y=c[z-15],J=Y.high,Z=Y.low,Q=(J>>>1|Z<<31)^(J>>>8|Z<<24)^J>>>7,$=(Z>>>1|J<<31)^(Z>>>8|J<<24)^(Z>>>7|J<<25),ee=c[z-2],te=ee.high,oe=ee.low,ne=(te>>>19|oe<<13)^(te<<3|oe>>>29)^te>>>6,ie=(oe>>>19|te<<13)^(oe<<3|te>>>29)^(oe>>>6|te<<26),re=c[z-7],ae=re.high,se=re.low,ce=c[z-16],le=ce.high,pe=ce.low;K=(K=(K=Q+ae+((q=$+se)>>>0<$>>>0?1:0))+ne+((q+=ie)>>>0<ie>>>0?1:0))+le+((q+=pe)>>>0<pe>>>0?1:0),X.high=K,X.low=q}var ue,de=D&F^~D&j,he=x&G^~x&V,fe=T&L^T&U^L&U,_e=A&C^A&k^C&k,ye=(T>>>28|A<<4)^(T<<30|A>>>2)^(T<<25|A>>>7),ge=(A>>>28|T<<4)^(A<<30|T>>>2)^(A<<25|T>>>7),me=(D>>>14|x<<18)^(D>>>18|x<<14)^(D<<23|x>>>9),ve=(x>>>14|D<<18)^(x>>>18|D<<14)^(x<<23|D>>>9),Me=s[z],be=Me.high,Ie=Me.low,Ee=W+me+((ue=H+ve)>>>0<H>>>0?1:0),Oe=ge+_e;W=j,H=V,j=F,V=G,F=D,G=x,D=N+(Ee=(Ee=(Ee=Ee+de+((ue+=he)>>>0<he>>>0?1:0))+be+((ue+=Ie)>>>0<Ie>>>0?1:0))+K+((ue+=q)>>>0<q>>>0?1:0))+((x=B+ue|0)>>>0<B>>>0?1:0)|0,N=U,B=k,U=L,k=C,L=T,C=A,T=Ee+(ye+fe+(Oe>>>0<ge>>>0?1:0))+((A=ue+Oe|0)>>>0<ue>>>0?1:0)|0}f=n.low=f+A,n.high=h+T+(f>>>0<A>>>0?1:0),y=i.low=y+C,i.high=_+L+(y>>>0<C>>>0?1:0),m=r.low=m+k,r.high=g+U+(m>>>0<k>>>0?1:0),M=a.low=M+B,a.high=v+N+(M>>>0<B>>>0?1:0),I=l.low=I+x,l.high=b+D+(I>>>0<x>>>0?1:0),O=p.low=O+G,p.high=E+F+(O>>>0<G>>>0?1:0),w=u.low=w+V,u.high=S+j+(w>>>0<V>>>0?1:0),P=d.low=P+H,d.high=R+W+(P>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(o/4294967296),t[31+(n+128>>>10<<5)]=o,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),function(){var e=p,t=e.x64,o=t.Word,n=t.WordArray,i=e.algo,r=i.SHA512,a=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(a),e.HmacSHA384=r._createHmacHelper(a)}(),p.lib.Cipher||function(e){var t=p,o=t.lib,n=o.Base,i=o.WordArray,r=o.BufferedBlockAlgorithm,a=t.enc,s=(a.Utf8,a.Base64),c=t.algo.EvpKDF,l=o.Cipher=r.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:g}return function(t){return{encrypt:function(o,n,i){return e(n).encrypt(t,o,n,i)},decrypt:function(o,n,i){return e(n).decrypt(t,o,n,i)}}}}()}),u=(o.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=o.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=u.CBC=function(){var t=d.extend();function o(t,o,n){var i=this._iv;if(i){var r=i;this._iv=e}else r=this._prevBlock;for(var a=0;a<n;a++)t[o+a]^=r[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;o.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=e.slice(t,t+i);n.decryptBlock(e,t),o.call(this,e,t,i),this._prevBlock=r}}),t}(),f=(t.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,n=o-e.sigBytes%o,r=n<<24|n<<16|n<<8|n,a=[],s=0;s<n;s+=4)a.push(r);var c=i.create(a,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},_=(o.BlockCipher=l.extend({cfg:l.cfg.extend({mode:h,padding:f}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,o=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=o.createEncryptor;else n=o.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(o,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),o.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,o=e.salt;if(o)var n=i.create([1398893684,1701076831]).concat(o).concat(t);else n=t;return n.toString(s)},parse:function(e){var t=s.parse(e),o=t.words;if(1398893684==o[0]&&1701076831==o[1]){var n=i.create(o.slice(2,4));o.splice(0,4),t.sigBytes-=16}return _.create({ciphertext:t,salt:n})}},g=o.SerializableCipher=n.extend({cfg:n.extend({format:y}),encrypt:function(e,t,o,n){n=this.cfg.extend(n);var i=e.createEncryptor(o,n),r=i.finalize(t),a=i.cfg;return _.create({ciphertext:r,key:o,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,o,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(o,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),m=(t.kdf={}).OpenSSL={execute:function(e,t,o,n){n||(n=i.random(8));var r=c.create({keySize:t+o}).compute(e,n),a=i.create(r.words.slice(t),4*o);return r.sigBytes=4*t,_.create({key:r,iv:a,salt:n})}},v=o.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:m}),encrypt:function(e,t,o,n){var i=(n=this.cfg.extend(n)).kdf.execute(o,e.keySize,e.ivSize);n.iv=i.iv;var r=g.encrypt.call(this,e,t,i.key,n);return r.mixIn(i),r},decrypt:function(e,t,o,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(o,e.keySize,e.ivSize,t.salt);return n.iv=i.iv,g.decrypt.call(this,e,t,i.key,n)}})}(),p.mode.CFB=function(){var e=p.lib.BlockCipherMode.extend();function t(e,t,o,n){var i=this._iv;if(i){var r=i.slice(0);this._iv=void 0}else r=this._prevBlock;n.encryptBlock(r,0);for(var a=0;a<o;a++)e[t+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,o){var n=this._cipher,i=n.blockSize;t.call(this,e,o,i,n),this._prevBlock=e.slice(o,o+i)}}),e.Decryptor=e.extend({processBlock:function(e,o){var n=this._cipher,i=n.blockSize,r=e.slice(o,o+i);t.call(this,e,o,i,n),this._prevBlock=r}}),e}(),p.mode.ECB=((s=p.lib.BlockCipherMode.extend()).Encryptor=s.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),s.Decryptor=s.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),s),p.pad.AnsiX923={pad:function(e,t){var o=e.sigBytes,n=4*t,i=n-o%n,r=o+i-1;e.clamp(),e.words[r>>>2]|=i<<24-r%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},p.pad.Iso10126={pad:function(e,t){var o=4*t,n=o-e.sigBytes%o;e.concat(p.lib.WordArray.random(n-1)).concat(p.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},p.pad.Iso97971={pad:function(e,t){e.concat(p.lib.WordArray.create([2147483648],1)),p.pad.ZeroPadding.pad(e,t)},unpad:function(e){p.pad.ZeroPadding.unpad(e),e.sigBytes--}},p.mode.OFB=(l=(c=p.lib.BlockCipherMode.extend()).Encryptor=c.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,i=this._iv,r=this._keystream;i&&(r=this._keystream=i.slice(0),this._iv=void 0),o.encryptBlock(r,0);for(var a=0;a<n;a++)e[t+a]^=r[a]}}),c.Decryptor=l,c),p.pad.NoPadding={pad:function(){},unpad:function(){}},function(){var e=p,t=e.lib.CipherParams,o=e.enc.Hex;e.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var n=o.parse(e);return t.create({ciphertext:n})}}}(),function(){var e=p,t=e.lib.BlockCipher,o=e.algo,n=[],i=[],r=[],a=[],s=[],c=[],l=[],u=[],d=[],h=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var o=0,p=0;for(t=0;t<256;t++){var f=p^p<<1^p<<2^p<<3^p<<4;f=f>>>8^255&f^99,n[o]=f,i[f]=o;var _=e[o],y=e[_],g=e[y],m=257*e[f]^16843008*f;r[o]=m<<24|m>>>8,a[o]=m<<16|m>>>16,s[o]=m<<8|m>>>24,c[o]=m,m=16843009*g^65537*y^257*_^16843008*o,l[f]=m<<24|m>>>8,u[f]=m<<16|m>>>16,d[f]=m<<8|m>>>24,h[f]=m,o?(o=_^e[e[e[g^_]]],p^=e[e[p]]):o=p=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],_=o.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,o=e.sigBytes/4,i=4*((this._nRounds=o+6)+1),r=this._keySchedule=[],a=0;a<i;a++)if(a<o)r[a]=t[a];else{var s=r[a-1];a%o?o>6&&a%o==4&&(s=n[s>>>24]<<24|n[s>>>16&255]<<16|n[s>>>8&255]<<8|n[255&s]):(s=n[(s=s<<8|s>>>24)>>>24]<<24|n[s>>>16&255]<<16|n[s>>>8&255]<<8|n[255&s],s^=f[a/o|0]<<24),r[a]=r[a-o]^s}for(var c=this._invKeySchedule=[],p=0;p<i;p++)a=i-p,s=p%4?r[a]:r[a-4],c[p]=p<4||a<=4?s:l[n[s>>>24]]^u[n[s>>>16&255]]^d[n[s>>>8&255]]^h[n[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,a,s,c,n)},decryptBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,l,u,d,h,i),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,n,i,r,a,s){for(var c=this._nRounds,l=e[t]^o[0],p=e[t+1]^o[1],u=e[t+2]^o[2],d=e[t+3]^o[3],h=4,f=1;f<c;f++){var _=n[l>>>24]^i[p>>>16&255]^r[u>>>8&255]^a[255&d]^o[h++],y=n[p>>>24]^i[u>>>16&255]^r[d>>>8&255]^a[255&l]^o[h++],g=n[u>>>24]^i[d>>>16&255]^r[l>>>8&255]^a[255&p]^o[h++],m=n[d>>>24]^i[l>>>16&255]^r[p>>>8&255]^a[255&u]^o[h++];l=_,p=y,u=g,d=m}_=(s[l>>>24]<<24|s[p>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^o[h++],y=(s[p>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^o[h++],g=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&p])^o[h++],m=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[p>>>8&255]<<8|s[255&u])^o[h++],e[t]=_,e[t+1]=y,e[t+2]=g,e[t+3]=m},keySize:8});e.AES=t._createHelper(_)}(),function(){var e=p,t=e.lib,o=t.WordArray,n=t.BlockCipher,i=e.algo,r=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],s=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=i.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],o=0;o<56;o++){var n=r[o]-1;t[o]=e[n>>>5]>>>31-n%32&1}for(var i=this._subKeys=[],c=0;c<16;c++){var l=i[c]=[],p=s[c];for(o=0;o<24;o++)l[o/6|0]|=t[(a[o]-1+p)%28]<<31-o%6,l[4+(o/6|0)]|=t[28+(a[o+24]-1+p)%28]<<31-o%6;for(l[0]=l[0]<<1|l[0]>>>31,o=1;o<7;o++)l[o]=l[o]>>>4*(o-1)+3;l[7]=l[7]<<5|l[7]>>>27}var u=this._invSubKeys=[];for(o=0;o<16;o++)u[o]=i[15-o]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,o){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),d.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=o[n],r=this._lBlock,a=this._rBlock,s=0,p=0;p<8;p++)s|=c[p][((a^i[p])&l[p])>>>0];this._lBlock=a,this._rBlock=r^s}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,d.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var o=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=o,this._lBlock^=o<<e}function h(e,t){var o=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=o,this._rBlock^=o<<e}e.DES=n._createHelper(u);var f=i.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=u.createEncryptor(o.create(e.slice(0,2))),this._des2=u.createEncryptor(o.create(e.slice(2,4))),this._des3=u.createEncryptor(o.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=n._createHelper(f)}(),function(){var e=p,t=e.lib.StreamCipher,o=e.algo,n=o.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,o=e.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;i=0;for(var r=0;i<256;i++){var a=i%o,s=t[a>>>2]>>>24-a%4*8&255;r=(r+n[i]+s)%256;var c=n[i];n[i]=n[r],n[r]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,o=this._j,n=0,i=0;i<4;i++){o=(o+e[t=(t+1)%256])%256;var r=e[t];e[t]=e[o],e[o]=r,n|=e[(e[t]+e[o])%256]<<24-8*i}return this._i=t,this._j=o,n}e.RC4=t._createHelper(n);var r=o.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=t._createHelper(r)}(),p.mode.CTRGladman=function(){var e=p.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,o=e>>8&255,n=255&e;255===t?(t=0,255===o?(o=0,255===n?n=0:++n):++o):++t,e=0,e+=t<<16,e+=o<<8,e+=n}else e+=1<<24;return e}function o(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var n=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0),o(a);var s=a.slice(0);n.encryptBlock(s,0);for(var c=0;c<i;c++)e[t+c]^=s[c]}});return e.Decryptor=n,e}(),function(){var e=p,t=e.lib.StreamCipher,o=e.algo,n=[],i=[],r=[],a=o.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,o=0;o<4;o++)e[o]=16711935&(e[o]<<8|e[o]>>>24)|4278255360&(e[o]<<24|e[o]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,o=0;o<4;o++)s.call(this);for(o=0;o<8;o++)i[o]^=n[o+4&7];if(t){var r=t.words,a=r[0],c=r[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),p=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),u=l>>>16|4294901760&p,d=p<<16|65535&l;for(i[0]^=l,i[1]^=u,i[2]^=p,i[3]^=d,i[4]^=l,i[5]^=u,i[6]^=p,i[7]^=d,o=0;o<4;o++)s.call(this)}},_doProcessBlock:function(e,t){var o=this._X;s.call(this),n[0]=o[0]^o[5]>>>16^o[3]<<16,n[1]=o[2]^o[7]>>>16^o[5]<<16,n[2]=o[4]^o[1]>>>16^o[7]<<16,n[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,o=0;o<8;o++)i[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,o=0;o<8;o++){var n=e[o]+t[o],a=65535&n,s=n>>>16,c=((a*a>>>17)+a*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);r[o]=c^l}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}e.Rabbit=t._createHelper(a)}(),p.mode.CTR=function(){var e=p.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,i=this._iv,r=this._counter;i&&(r=this._counter=i.slice(0),this._iv=void 0);var a=r.slice(0);o.encryptBlock(a,0),r[n-1]=r[n-1]+1|0;for(var s=0;s<n;s++)e[t+s]^=a[s]}});return e.Decryptor=t,e}(),function(){var e=p,t=e.lib.StreamCipher,o=e.algo,n=[],i=[],r=[],a=o.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)s.call(this);for(i=0;i<8;i++)n[i]^=o[i+4&7];if(t){var r=t.words,a=r[0],c=r[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),p=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),u=l>>>16|4294901760&p,d=p<<16|65535&l;for(n[0]^=l,n[1]^=u,n[2]^=p,n[3]^=d,n[4]^=l,n[5]^=u,n[6]^=p,n[7]^=d,i=0;i<4;i++)s.call(this)}},_doProcessBlock:function(e,t){var o=this._X;s.call(this),n[0]=o[0]^o[5]>>>16^o[3]<<16,n[1]=o[2]^o[7]>>>16^o[5]<<16,n[2]=o[4]^o[1]>>>16^o[7]<<16,n[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,o=0;o<8;o++)i[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,o=0;o<8;o++){var n=e[o]+t[o],a=65535&n,s=n>>>16,c=((a*a>>>17)+a*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);r[o]=c^l}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}e.RabbitLegacy=t._createHelper(a)}(),p.pad.ZeroPadding={pad:function(e,t){var o=4*t;e.clamp(),e.sigBytes+=o-(e.sigBytes%o||o)},unpad:function(e){for(var t=e.words,o=e.sigBytes-1;!(t[o>>>2]>>>24-o%4*8&255);)o--;e.sigBytes=o+1}},p},"object"==typeof o?t.exports=o=n():"function"==typeof define&&define.amd?define([],n):(void 0).CryptoJS=n(),cc._RF.pop()},{}],i18nLabel:[function(e,t,o){"use strict";cc._RF.push(t,"bdd3f9Ro3BLUZ5panwzcqm4","i18nLabel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nLabel=void 0;var a=e("./i18nMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=s.inspector,u=s.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._i18n_code="",t._i18n_params=[],t}return i(t,e),Object.defineProperty(t.prototype,"i18nCode",{get:function(){return this._i18n_code},set:function(e){this._i18n_code=e,this.setValue()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"i18nParams",{get:function(){return this._i18n_params},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"params",{set:function(e){this._i18n_params=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){a.i18nMgr._addOrDelLabel(this,!0),this.resetValue()},t.prototype.onDestroy=function(){a.i18nMgr._addOrDelLabel(this,!1)},t.prototype.setString=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._i18n_code=e,this._i18n_params=t,this.setValue()},t.prototype.setValue=function(){var e=a.i18nMgr.getLabel(this._i18n_code,this._i18n_params);null!=e&&(this.string=e)},t.prototype.resetValue=function(){this.setValue()},r([l({visible:!1})],t.prototype,"_i18n_code",void 0),r([l({type:cc.String})],t.prototype,"i18nCode",null),r([l({visible:!1})],t.prototype,"_i18n_params",void 0),r([l({type:[cc.String]})],t.prototype,"i18nParams",null),r([c,u("i18n:MAIN_MENU.component.renderers/i18nLabel"),p("packages://module/inspectors/i18nLabel.js")],t)}(cc.Label);o.i18nLabel=d,cc._RF.pop()},{"./i18nMgr":"i18nMgr"}],i18nMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0c6cckje/1Ci44bE4J+753g","i18nMgr");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.i18nMgr=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new this),this._inst},enumerable:!1,configurable:!0}),t.checkInit=function(){this.language||this.setLanguage("zh")},t.setLanguage=function(e){this.language!==e&&(this.language=e,this.reloadLabel(),this.reloadSprite())},t.getLanguage=function(){return this.language},t._addOrDelLabel=function(e,t){if(this.checkInit(),t)this.labelArr.push(e);else{var o=this.labelArr.indexOf(e);-1!==o&&this.labelArr.splice(o,1)}},t.addOrDelSprite=function(e,t){if(t)this.spriteArr.push(e);else{var o=this.spriteArr.indexOf(e);-1!==o&&this.spriteArr.splice(o,1)}},t.getLabel=function(e,t){var o=this.labelData[e];return null==o?null:null==t||0===t.length?o:this.placeholder(o,t)},t.placeholder=function(e,t){for(var o=0;o<t.length;o++){var n=new RegExp("\\{"+o+"\\}+","g");e=e.replace(n,t[o])}return e},t.reloadLabel=function(){var e=this,t="Language/"+this.language;cc.resources.load(t,cc.JsonAsset,function(t,o){t?(console.error(t),e.labelData={}):e.labelData=o.json;for(var n=0,i=e.labelArr;n<i.length;n++)i[n].resetValue()})},t.reloadSprite=function(){for(var e=0,t=this.spriteArr;e<t.length;e++)t[e].resetValue()},t.language="",t.labelArr=[],t.labelData={},t.spriteArr=[],t}(e("../Res/ResKeeper").default);o.i18nMgr=r,cc._RF.pop()},{"../Res/ResKeeper":"ResKeeper"}],i18nSprite:[function(e,t,o){"use strict";cc._RF.push(t,"c5883VlXcdPzoiL5F0hH3os","i18nSprite");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nSprite=void 0;var a=e("./i18nMgr"),s=cc._decorator,c=s.ccclass,l=s.property,p=s.inspector,u=s.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._i18n_code="",t}return i(t,e),Object.defineProperty(t.prototype,"i18nCode",{get:function(){return this._i18n_code},set:function(e){this._i18n_code=e,this.resetValue()},enumerable:!1,configurable:!0}),t.prototype.start=function(){a.i18nMgr.addOrDelSprite(this,!0),this.resetValue()},t.prototype.onDestroy=function(){a.i18nMgr.addOrDelSprite(this,!1),this.spriteFrame&&this.spriteFrame.decRef()},t.prototype.resetValue=function(){var e=this;this._getSprite(this._i18n_code,function(t){e.spriteFrame=t})},t.prototype._getSprite=function(e){var t=this,o=a.i18nMgr.getLanguage();if(null!=o){var n="i18n/sprite/"+o+"/"+e;Editor?cc.resources.load(n,cc.SpriteFrame,function(e,o){e?cc.error("i18n load :"+n+" fail!"):cc.isValid(t.node)&&(t.spriteFrame=o)}):cc.resources.load(n,cc.SpriteFrame,function(e,o){if(e)cc.error("i18n load :"+n+" fail!");else if(cc.isValid(t.node)){var i=t.spriteFrame;t.spriteFrame=null,t.spriteFrame=o,t.spriteFrame.addRef(),i&&i.decRef()}})}},r([l({visible:!1})],t.prototype,"_i18n_code",void 0),r([l({type:cc.String})],t.prototype,"i18nCode",null),r([c,u("i18n:MAIN_MENU.component.renderers/i18nSprite"),p("packages://module/inspectors/i18nSprite.js")],t)}(cc.Sprite);o.i18nSprite=d,cc._RF.pop()},{"./i18nMgr":"i18nMgr"}]},{},["AdMgr","GameBase","GameItemBase","GameItemMgr","ItemMgr","LayerMgr","NativeMgr","TableMgr","TimeMgr","Define","EventId","LocalKey","RedDotKey","SceneDef","StaticData","UIDefs","AudioMgr","RTAudioSource","RTAudioSourceMgr","RTClickSound","EventMgr","RedDot","RedDotHandler","crypto-js","List","ListItem","RenderToTarget","HttpRequest","Net","NetApi","NetBase","Platform","PlatformModel","NodePool","ResKeeper","ResKeeperAddition","ResLoader","SceneBase","SceneMgr","LocalStorageMgr","TeMap","UIBase","CommonToast","UICloseAnimation","UIFacade","UIMgr","UIOpenAnimation","MD5","SecretUtil","Singleton","Utils","VectorUtil","Wrapper","VM","i18nLabel","i18nMgr","i18nSprite","BulletBase","BulletDrawBase","ComBulletBishou","ComBulletChushou","ComBulletChushouZ","ComBulletChushouZ2","ComBulletCommon","ComBulletCommonPet","ComBulletDasuan","ComBulletDraw1","ComBulletDraw1Z","ComBulletDraw2","ComBulletDraw3","ComBulletDraw3Z","ComBulletFeidao","ComBulletFeidaoZ","ComBulletFreezeAll","ComBulletGunshi","ComBulletGunshiZ","ComBulletHudun","ComBulletJiguang","ComBulletLeidian","ComBulletLiuxingchui","ComBulletLiuxingchuiSenior","ComBulletMozhua","ComBulletMozhuaZ","ComBulletShufu","ComBulletXuanfeng","ComBulletYunShi","ComBulletYunShiZ","MonsterComponent","PetComponent","PlayerComponent","ComHitBeEffect","ComHitEffect","ComHitNum","HpBar","PickUpBase","PickUpBox","PickUpEquip","PickUpExp","PickUpFood","Joystick","MonsterCtrl","NpcBase","PlayerCtrl","WeaponCtrl","ComWeaponBishou","ComWeaponChushou","ComWeaponCommon","ComWeaponCommonPet","ComWeaponDasuan","ComWeaponDraw1","ComWeaponDraw2","ComWeaponDraw3","ComWeaponFeidao","ComWeaponFreezeAll","ComWeaponGunshi","ComWeaponHudun","ComWeaponJiguang","ComWeaponLeidian","ComWeaponLiuxingchui","ComWeaponMozhua","ComWeaponShufu","ComWeaponXuanfeng","ComWeaponYunshi","WeaponBase","WeaponDrawBase","GodGuide","GuideCollider","GuideText","GuideTask1","GuideTask2","GuideTask3","GuideTask4","GuideTask5","GuideTask6","GuideTask7","Task","AchievementModel","GameModel","GodBase","GodPetModel","GodRideModel","GodSkinModel","GodWeaponModel","MagnetModel","SupplyModel","TaskModel","UserModel","WeaponModel","XiuLianModel","TestWeapon","IconItem","SkillDrawUI","SkillUI","Bootstrap","Main","Achievement","AchievementItem","Confirm","DrawSkill","EliteBox","FightEquip","FightEquipGuide","FightEquipItem","FightEquipTips","SelectWeapon","SelectWeaponItem","GameOver","GamePause","GameStart","GetMoney","GodMenu","GodMenuNew","GodMenuView","GodMenuViewItem","GodWeaponReward","Loading","Magnet","AgeTips","StoreReview","Setting","StageBox","StageBoxItem","StageBoxTips","StageMap","StageMapBox","StageMapItem","Supply","Supply_Money","Supply_MoneyItem","Talent","TalentItem","UIGame","UIMain","XiuLian","XiuLianAD","XiuLianItem","XiuLianResult","XiuLianTip"]);