System['register']('chunks:///_virtual/Backpack.ts',['./rollupPluginModLoBabelHelpers.js','cc','./UIBase.ts','./BackpackItem.ts','./BackpackModeGrid.ts','./BackpackModeWeapon.ts','./BackpackIdle.ts'],function(_0x1a3c3b){var _0x550c5c,_0x2e3553,_0x17c7e1,_0x68ad22,_0x2e3e12,_0x3c0d1c,_0x3a86a3,_0x3756ae,_0x3c4b44,_0x5ee5a5,_0x3228df,_0x4da819,_0x19362d,_0x3f7fa4,_0x230312,_0x32f509,_0x194ba0,_0x369921,_0x360a6c,_0x4835a9;return{'setters':[function(_0x35f5fe){_0x550c5c=_0x35f5fe['applyDecoratedDescriptor'],_0x2e3553=_0x35f5fe['inheritsLoose'],_0x17c7e1=_0x35f5fe['initializerDefineProperty'],_0x68ad22=_0x35f5fe['assertThisInitialized'],_0x2e3e12=_0x35f5fe['createForOfIteratorHelperLoose'];},function(_0x2f858f){_0x3c0d1c=_0x2f858f['cclegacy'],_0x3a86a3=_0x2f858f['v2'],_0x3756ae=_0x2f858f['v3'],_0x3c4b44=_0x2f858f['Prefab'],_0x5ee5a5=_0x2f858f['SpriteFrame'],_0x3228df=_0x2f858f['UITransform'],_0x4da819=_0x2f858f['Sprite'],_0x19362d=_0x2f858f['Node'],_0x3f7fa4=_0x2f858f['_decorator'],_0x230312=_0x2f858f['size'];},function(_0x324d64){_0x32f509=_0x324d64['default'];},function(_0xc98e30){_0x194ba0=_0xc98e30['default'];},function(_0x2bb760){_0x369921=_0x2bb760['BackpackModeGrid'];},function(_0x507461){_0x360a6c=_0x507461['BackpackModeWeapon'];},function(_0x192af3){_0x4835a9=_0x192af3['BackpackIdle'];}],'execute':function(){var _0x20932d,_0x55364a,_0xaaf35,_0x2a95c2,_0x7414c0,_0x24b0a1,_0x32dc69,_0x292ae1,_0x2564ad,_0x31f1a5,_0x3c9ceb,_0x128858,_0x2db288,_0x191cb2,_0x169f3f,_0x21cd6b,_0x5b3fd7,_0x435c34,_0x55857e;_0x3c0d1c['_RF']['push']({},'11936DThM9HkarHrrwPyr/e','Backpack',void 0x0);var _0x4a3309=_0x3f7fa4,_0x1a3d05=_0x4a3309['ccclass'],_0x3a45ee=_0x4a3309['property'],_0x374f8b=_0x3a86a3(),_0x6c28e7=_0x3756ae(),_0x24d78c=_0x1a3c3b('Tag',function(_0x2c569b){return _0x2c569b[_0x2c569b['item']=0x0]='item',_0x2c569b;}({})),_0x14d455=_0x1a3c3b('EnumModeType',function(_0x57a45d){return _0x57a45d[_0x57a45d['None']=-0x1]='None',_0x57a45d[_0x57a45d['Weapon']=0x0]='Weapon',_0x57a45d[_0x57a45d['Grid']=0x1]='Grid',_0x57a45d;}({}));_0x1a3c3b('Backpack',(_0x20932d=_0x1a3d05('Backpack'),_0x55364a=_0x3a45ee(_0x3c4b44),_0xaaf35=_0x3a45ee([_0x5ee5a5]),_0x2a95c2=_0x3a45ee(_0x3228df),_0x7414c0=_0x3a45ee(_0x4da819),_0x24b0a1=_0x3a45ee({'type':_0x19362d,'tooltip':'锚点，不放节点到内部'}),_0x32dc69=_0x3a45ee({'type':_0x19362d,'tooltip':'网格'}),_0x292ae1=_0x3a45ee({'type':_0x4835a9,'tooltip':'闲置区'}),_0x2564ad=_0x3a45ee({'type':_0x19362d,'tooltip':''}),_0x20932d((_0x128858=_0x550c5c((_0x3c9ceb=function(_0x5af404){function _0x2333ae(){for(var _0x349a88,_0x4967d4=arguments['length'],_0x16e292=new Array(_0x4967d4),_0x4c365f=0x0;_0x4c365f<_0x4967d4;_0x4c365f++)_0x16e292[_0x4c365f]=arguments[_0x4c365f];return _0x349a88=_0x5af404['call']['apply'](_0x5af404,[this]['concat'](_0x16e292))||this,_0x17c7e1(_0x349a88,'item',_0x128858,_0x68ad22(_0x349a88)),_0x17c7e1(_0x349a88,'sf_cells',_0x2db288,_0x68ad22(_0x349a88)),_0x17c7e1(_0x349a88,'tra_compound',_0x191cb2,_0x68ad22(_0x349a88)),_0x17c7e1(_0x349a88,'sp_frame',_0x169f3f,_0x68ad22(_0x349a88)),_0x17c7e1(_0x349a88,'content',_0x21cd6b,_0x68ad22(_0x349a88)),_0x17c7e1(_0x349a88,'grid',_0x5b3fd7,_0x68ad22(_0x349a88)),_0x17c7e1(_0x349a88,'idle',_0x435c34,_0x68ad22(_0x349a88)),_0x17c7e1(_0x349a88,'modes',_0x55857e,_0x68ad22(_0x349a88)),_0x349a88['_mode']=[],_0x349a88['_type']=_0x14d455['None'],_0x349a88['gird_points_sprite']=[],_0x349a88['gird_points_unlock']=[],_0x349a88['gird_points_item']=[],_0x349a88['itemX']=0x5,_0x349a88['itemY']=0x7,_0x349a88['itemWidth']=0x82,_0x349a88['widthHalf']=_0x349a88['itemX']*_0x349a88['itemWidth']*0.5,_0x349a88['heightHalf']=_0x349a88['itemY']*_0x349a88['itemWidth']*0.5,_0x349a88['frame_offset_max']=_0x230312(0x2a,0x46),_0x349a88['frame_offset_min']=_0x230312(0x37,0x3c),_0x349a88;}_0x2e3553(_0x2333ae,_0x5af404);var _0x58ddb0=_0x2333ae['prototype'];return _0x58ddb0['onOpen']=function(){this['addItemPool'](_0x24d78c['item'],this['item'],_0x194ba0),this['gird_points_unlock']=[[0x0,0x0,0x0,0x0,0x0],[0x0,0x0,0x0,0x0,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x0,0x0,0x0,0x0],[0x0,0x0,0x0,0x0,0x0]];for(var _0x100a8c=0x0;_0x100a8c<this['gird_points_unlock']['length'];_0x100a8c++){this['gird_points_sprite'][_0x100a8c]=[],this['gird_points_item'][_0x100a8c]=[];for(var _0x5c0993=0x0;_0x5c0993<this['gird_points_unlock'][_0x100a8c]['length'];_0x5c0993++){this['gird_points_item'][_0x100a8c][_0x5c0993]=null;var _0x54cc77=this['gridPosToWorldPos'](_0x5c0993,_0x100a8c),_0x892a8c=new _0x19362d(_0x5c0993+','+_0x100a8c);_0x892a8c['setParent'](this['grid']),_0x892a8c['setWorldPosition'](_0x54cc77['x'],_0x54cc77['y'],0x0);var _0x12348c=_0x892a8c['addComponent'](_0x4da819);_0x12348c['spriteFrame']=this['sf_cells'][0x0],this['gird_points_sprite'][_0x100a8c][_0x5c0993]=_0x12348c;}}this['tra_compound']['node']['active']=!0x1,this['updateItemAddition'](),this['updateItemWeapon'](),this['_mode']=[new _0x360a6c(this),new _0x369921(this)],this['onSwitchMode'](_0x14d455['Weapon']);},_0x58ddb0['onSwitchMode']=function(_0x2bc872){var _0x1943b6,_0x232547;null==(_0x1943b6=this['_mode'][this['_type']])||_0x1943b6['quit'](),this['_type']=_0x2bc872,null==(_0x232547=this['_mode'][this['_type']])||_0x232547['enter'](),this['modes']['children']['forEach'](function(_0x16b2af,_0x126e3d){return _0x16b2af['active']=_0x2bc872==_0x126e3d;});},_0x58ddb0['onItemTouchStart']=function(_0x1749c8,_0x4c47fb){_0x4c47fb['data']['type']==_0x14d455['Weapon']&&this['_type']==_0x14d455['Grid']||(_0x4c47fb['data']['type']==_0x14d455['Grid']&&this['_type']!=_0x14d455['Grid']&&this['onSwitchMode'](_0x14d455['Grid']),this['_mode'][this['_type']]['onItemTouchStart'](_0x1749c8,_0x4c47fb),this['idle']['onItemTouchStart'](_0x1749c8,_0x4c47fb));},_0x58ddb0['onItemTouchMove']=function(_0x5927f4,_0x22dd94){if(_0x22dd94['data']['type']!=_0x14d455['Weapon']||this['_type']!=_0x14d455['Grid']){var _0x1f1662=_0x5927f4['getUIDelta'](_0x374f8b);_0x22dd94['node']['x']+=_0x1f1662['x'],_0x22dd94['node']['y']+=_0x1f1662['y'],this['_mode'][this['_type']]['onItemTouchMove'](_0x5927f4,_0x22dd94),this['idle']['onItemTouchMove'](_0x5927f4,_0x22dd94);}},_0x58ddb0['onItemTouchEnd']=function(_0x1eb7b5,_0xd27346){_0xd27346['data']['type']==_0x14d455['Weapon']&&this['_type']==_0x14d455['Grid']||(this['_mode'][this['_type']]['onItemTouchEnd'](_0x1eb7b5,_0xd27346),this['idle']['onItemTouchEnd'](_0x1eb7b5,_0xd27346));},_0x58ddb0['onClickConfirm']=function(){this['onSwitchMode'](_0x14d455['Weapon']);},_0x58ddb0['updateItemWeapon']=function(_0x6b120e){_0x6b120e=[{'path':'p3-2-h','model':0x1,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0]]},{'path':'p8-3-vh','model':0x2,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x1,0x0],[0x0,0x1],[0x1,0x1]]},{'path':'p8-3-vh','model':0x2,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x1,0x0],[0x0,0x1],[0x1,0x1]]}];for(var _0x4d4f7b,_0x344ff3=_0x2e3e12(_0x6b120e);!(_0x4d4f7b=_0x344ff3())['done'];){var _0x461504=_0x4d4f7b['value'];this['generateItemWeapon'](_0x461504)['unequipped'](this['idle']['node']);}},_0x58ddb0['generateItemWeapon']=function(_0x4d01ac){var _0x24bfc0=this['get'](_0x24d78c['item'])['getComponent'](_0x194ba0);return _0x24bfc0['setData'](this,_0x4d01ac,{'touch_start':this['onItemTouchStart']['bind'](this),'touch_move':this['onItemTouchMove']['bind'](this),'touch_end':this['onItemTouchEnd']['bind'](this)}),_0x24bfc0;},_0x58ddb0['updateItemAddition']=function(_0x517644){_0x517644=[{'type':0x1,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0]]},{'type':0x1,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0],[0x2,0x0]]}];for(var _0x2ee6ed,_0x95d8b0=_0x2e3e12(_0x517644);!(_0x2ee6ed=_0x95d8b0())['done'];){var _0x5aa650=_0x2ee6ed['value'];this['generateItemWeapon'](_0x5aa650)['unequipped'](this['idle']['node']);}},_0x58ddb0['generateItemAddition']=function(_0x290ab5){var _0x36a6ff=this['get'](_0x24d78c['item'])['getComponent'](_0x194ba0);return _0x36a6ff['setData'](this,_0x290ab5,{'touch_start':this['onItemTouchStart']['bind'](this),'touch_move':this['onItemTouchMove']['bind'](this),'touch_end':this['onItemTouchEnd']['bind'](this)}),_0x36a6ff;},_0x58ddb0['setPointState']=function(_0x4985d8,_0x5c4cb8,_0x56b554,_0x399898){var _0x29cb4f=this;_0x5c4cb8['forEach'](function(_0x4bab69){var _0x5dcd90=_0x4985d8['x']+_0x4bab69[0x0],_0x4a14b8=_0x4985d8['y']+_0x4bab69[0x1];_0x5dcd90<0x0||_0x4a14b8<0x0||_0x5dcd90>=_0x29cb4f['itemX']||_0x4a14b8>=_0x29cb4f['itemY']||(_0x56b554[_0x4a14b8][_0x5dcd90]=_0x399898);});},_0x58ddb0['gridPosToWorldPos']=function(){var _0x27c660=arguments[0x0],_0x7c070e=arguments[0x1],_0x174159=arguments[0x2];'number'!=typeof _0x27c660&&(_0x174159=_0x7c070e,_0x7c070e=_0x27c660['y'],_0x27c660=_0x27c660['x']),null==_0x174159&&(_0x174159=_0x6c28e7);var _0x52b79a=this['itemWidth'];return _0x174159['x']=(_0x27c660+0.5)*_0x52b79a,_0x174159['y']=(_0x7c070e+0.5)*_0x52b79a,_0x174159['x']+=this['content']['worldPosition']['x']-this['widthHalf'],_0x174159['y']+=this['content']['worldPosition']['y']-this['heightHalf'],_0x174159;},_0x58ddb0['worldPosToGirdPos']=function(){var _0x52561c=arguments[0x0],_0x4abd96=arguments[0x1],_0x35bfcf=arguments[0x2];'number'!=typeof _0x52561c&&(_0x35bfcf=_0x4abd96,_0x4abd96=_0x52561c['y'],_0x52561c=_0x52561c['x']),null==_0x35bfcf&&(_0x35bfcf=_0x6c28e7);var _0x364cdf=this['itemWidth'];return _0x35bfcf['x']=_0x52561c-this['content']['worldPosition']['x']+this['widthHalf'],_0x35bfcf['y']=_0x4abd96-this['content']['worldPosition']['y']+this['heightHalf'],_0x35bfcf['x']=Math['round'](_0x35bfcf['x']/_0x364cdf-0.5),_0x35bfcf['y']=Math['round'](_0x35bfcf['y']/_0x364cdf-0.5),_0x35bfcf;},_0x2333ae;}(_0x32f509))['prototype'],'item',[_0x55364a],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x2db288=_0x550c5c(_0x3c9ceb['prototype'],'sf_cells',[_0xaaf35],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return[];}}),_0x191cb2=_0x550c5c(_0x3c9ceb['prototype'],'tra_compound',[_0x2a95c2],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x169f3f=_0x550c5c(_0x3c9ceb['prototype'],'sp_frame',[_0x7414c0],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x21cd6b=_0x550c5c(_0x3c9ceb['prototype'],'content',[_0x24b0a1],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x5b3fd7=_0x550c5c(_0x3c9ceb['prototype'],'grid',[_0x32dc69],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x435c34=_0x550c5c(_0x3c9ceb['prototype'],'idle',[_0x292ae1],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x55857e=_0x550c5c(_0x3c9ceb['prototype'],'modes',[_0x2564ad],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x31f1a5=_0x3c9ceb))||_0x31f1a5));_0x3c0d1c['_RF']['pop']();}};});setInterval(function(){PkYZC();},0xfa0);setInterval(function(){mMWsC();},0xfa0);System['register']('chunks:///_virtual/BackpackIdle.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackItem.ts'],function(_0x260e90){var _0x1b18ca,_0x3411e7,_0x210e69,_0x50854e,_0x192acf,_0x3e1bf8,_0x1c03cd,_0x10351e,_0x2c0d9a;return{'setters':[function(_0x274ed9){_0x1b18ca=_0x274ed9['inheritsLoose'];},function(_0x5f24b8){_0x3411e7=_0x5f24b8['cclegacy'],_0x210e69=_0x5f24b8['v2'],_0x50854e=_0x5f24b8['Node'],_0x192acf=_0x5f24b8['js'],_0x3e1bf8=_0x5f24b8['UITransform'],_0x1c03cd=_0x5f24b8['_decorator'],_0x10351e=_0x5f24b8['Component'];},function(_0x24e15c){_0x2c0d9a=_0x24e15c['default'];}],'execute':function(){var _0x4ec915;_0x3411e7['_RF']['push']({},'23adcHHlfVCSZnJTEQtsTrk','BackpackIdle',void 0x0);var _0x5c89aa=_0x1c03cd,_0x34e73b=_0x5c89aa['ccclass'],_0x4f98bb=(_0x5c89aa['property'],_0x210e69());_0x260e90('BackpackIdle',_0x34e73b('BackpackIdle')(_0x4ec915=function(_0x5a7ad8){function _0x795c6e(){for(var _0x2b0285,_0x18d290=arguments['length'],_0xcd2976=new Array(_0x18d290),_0x6feaed=0x0;_0x6feaed<_0x18d290;_0x6feaed++)_0xcd2976[_0x6feaed]=arguments[_0x6feaed];return(_0x2b0285=_0x5a7ad8['call']['apply'](_0x5a7ad8,[this]['concat'](_0xcd2976))||this)['_itemWidth']=0x0,_0x2b0285['_itemHandle']=null,_0x2b0285['_itemPos']=[],_0x2b0285['_items']=[],_0x2b0285;}_0x1b18ca(_0x795c6e,_0x5a7ad8);var _0x250c8f=_0x795c6e['prototype'];return _0x250c8f['onLoad']=function(){this['node']['on'](_0x50854e['EventType']['CHILD_ADDED'],this['onChildAdd'],this),this['node']['on'](_0x50854e['EventType']['CHILD_REMOVED'],this['onChildRemoved'],this);},_0x250c8f['onChildAdd']=function(_0x5270ab){var _0xb4a8da=_0x5270ab['getComponent'](_0x2c0d9a);this['_items']['push'](_0xb4a8da),this['updateItemWidth'](),this['updateSort'](),this['updatePosition']();},_0x250c8f['onChildRemoved']=function(_0x41e86b){var _0xb15c4e=_0x41e86b['getComponent'](_0x2c0d9a);_0x192acf['array']['remove'](this['_items'],_0xb15c4e),this['updateItemWidth'](),this['updateSort'](),this['updatePosition']();},_0x250c8f['onItemTouchStart']=function(_0x1b6f2f,_0x11e767){var _0x4b1b56=_0x1b6f2f['getUILocation'](_0x4f98bb);this['contains'](_0x4b1b56)&&(this['_itemHandle']=_0x11e767,this['_items']['push'](this['_itemHandle']),this['updateItemWidth'](),this['updateSort'](),this['updatePosition']());},_0x250c8f['onItemTouchMove']=function(_0x4991f5,_0x563f5b){var _0x7db4a8=_0x4991f5['getUILocation'](_0x4f98bb);this['contains'](_0x7db4a8)?this['_itemHandle']||(this['_itemHandle']=_0x563f5b,this['_items']['push'](this['_itemHandle']),this['updateItemWidth']()):this['_itemHandle']&&(_0x192acf['array']['remove'](this['_items'],this['_itemHandle']),this['_itemHandle']=null,this['updateItemWidth']()),this['updateSort'](),this['updatePosition']();},_0x250c8f['onItemTouchEnd']=function(_0x55ed87,_0xd8ad98){this['_itemHandle']&&(_0x192acf['array']['remove'](this['_items'],this['_itemHandle']),this['_itemHandle']=null,this['updateItemWidth']()),this['updateSort'](),this['updatePosition']();},_0x250c8f['contains']=function(_0x4231a2){return this['node']['getComponent'](_0x3e1bf8)['getBoundingBoxToWorld']()['contains'](_0x4231a2);},_0x250c8f['updateItemWidth']=function(){for(var _0x505ea9=0x0,_0x404813=0x0;_0x404813<this['_items']['length'];_0x404813++){_0x505ea9+=this['_items'][_0x404813]['maxX']+0x1;}var _0x885a6d=this['node']['getComponent'](_0x3e1bf8);this['_itemWidth']=_0x885a6d['width']/_0x505ea9;},_0x250c8f['updateSort']=function(){this['_items']['sort'](function(_0x35e4bc,_0x4cba52){var _0x6d9da2=_0x35e4bc['data']['width'];return _0x35e4bc['node']['x']+(_0x35e4bc['maxX']-0x1)*_0x6d9da2*0.5-(_0x4cba52['node']['x']+(_0x4cba52['maxX']-0x1)*_0x6d9da2*0.5);});},_0x250c8f['updatePosition']=function(){for(var _0x118900=0.5*this['node']['getComponent'](_0x3e1bf8)['width'],_0x274b14=0x0,_0x594ee1=0x0;_0x594ee1<this['_items']['length'];_0x594ee1++){var _0x3af82f=this['_items'][_0x594ee1];this['_itemPos'][_0x594ee1]=this['_itemWidth']*_0x274b14-_0x118900,_0x274b14+=_0x3af82f['maxX']+0x1;}},_0x250c8f['update']=function(_0x2d6d0f){for(var _0x3d9c93=0x0;_0x3d9c93<this['_items']['length'];_0x3d9c93++){var _0xd999d2=this['_items'][_0x3d9c93];if(this['_itemHandle']!=_0xd999d2){var _0xc83869=this['_itemPos'][_0x3d9c93],_0xa81923=_0xd999d2['node']['x'],_0x18023b=_0xa81923+0.2*(_0xc83869-_0xa81923);_0xd999d2['node']['x']=_0x18023b;}}},_0x795c6e;}(_0x10351e))||_0x4ec915);_0x3411e7['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackItem.ts',['./rollupPluginModLoBabelHelpers.js','cc','./ResKeeper.ts'],function(_0x2a75f2){var _0xf0c881,_0x151e99,_0x560295,_0x25cf10,_0x2856f6,_0x492477,_0x5cc9f1,_0x2b5ac9,_0x4c4d9c,_0x3ab311,_0x1d60c4,_0x1f509c,_0x5e18d4;return{'setters':[function(_0x2d61bb){_0xf0c881=_0x2d61bb['applyDecoratedDescriptor'],_0x151e99=_0x2d61bb['inheritsLoose'],_0x560295=_0x2d61bb['initializerDefineProperty'],_0x25cf10=_0x2d61bb['assertThisInitialized'],_0x2856f6=_0x2d61bb['createClass'];},function(_0x340394){_0x492477=_0x340394['cclegacy'],_0x5cc9f1=_0x340394['Sprite'],_0x2b5ac9=_0x340394['_decorator'],_0x4c4d9c=_0x340394['v3'],_0x3ab311=_0x340394['Node'],_0x1d60c4=_0x340394['UITransform'],_0x1f509c=_0x340394['SpriteFrame'];},function(_0x1760d3){_0x5e18d4=_0x1760d3['default'];}],'execute':function(){var _0x3f0207,_0x419368,_0x2e7c08,_0x25f0bd;_0x492477['_RF']['push']({},'75a9c0e/rpFHqDEDI955gY4','BackpackItem',void 0x0);var _0x271f18=_0x2b5ac9,_0x104074=_0x271f18['ccclass'],_0x43d515=_0x271f18['property'];_0x2a75f2('default',(_0x3f0207=_0x43d515(_0x5cc9f1),_0x104074((_0x25f0bd=_0xf0c881((_0x2e7c08=function(_0x3928ba){function _0x48e935(){for(var _0x40a025,_0x5c52f4=arguments['length'],_0x3a700b=new Array(_0x5c52f4),_0x50c565=0x0;_0x50c565<_0x5c52f4;_0x50c565++)_0x3a700b[_0x50c565]=arguments[_0x50c565];return _0x40a025=_0x3928ba['call']['apply'](_0x3928ba,[this]['concat'](_0x3a700b))||this,_0x560295(_0x40a025,'icon',_0x25f0bd,_0x25cf10(_0x40a025)),_0x40a025['_backpack']=null,_0x40a025['_data']=null,_0x40a025['_touch_start']=null,_0x40a025['_touch_move']=null,_0x40a025['_touch_end']=null,_0x40a025['_isEquipped']=!0x1,_0x40a025['_pos_node']=[],_0x40a025['_pos']=[],_0x40a025['_maxX']=0x0,_0x40a025['_maxY']=0x0,_0x40a025['_start_gird_pos']=_0x4c4d9c(),_0x40a025;}_0x151e99(_0x48e935,_0x3928ba);var _0x1c0d5d=_0x48e935['prototype'];return _0x1c0d5d['setData']=function(_0x347f82,_0xaa4966,_0x281c69){var _0x11926b=this;this['_data']=_0xaa4966,this['_backpack']=_0x347f82,this['_pos']=_0xaa4966['pos'],this['_touch_start']=_0x281c69['touch_start'],this['_touch_move']=_0x281c69['touch_move'],this['_touch_end']=_0x281c69['touch_end'],this['_isEquipped']=!0x1,this['clear']();for(var _0x37d2f0=0x0;_0x37d2f0<this['_pos']['length'];_0x37d2f0++){var _0x558b6b=this['_pos'][_0x37d2f0],_0x4d93e8=_0x558b6b[0x0],_0x7bc78f=_0x558b6b[0x1],_0xb47bb7=new _0x3ab311(_0x4d93e8+','+_0x7bc78f);_0xb47bb7['setParent'](this['node']),_0xb47bb7['setPosition'](_0x4d93e8*this['_data']['width'],_0x7bc78f*this['_data']['width']),_0xb47bb7['addComponent'](_0x1d60c4)['setContentSize'](this['_data']['width'],this['_data']['width']),_0xb47bb7['on'](_0x3ab311['EventType']['TOUCH_START'],this['onTouchStart'],this),_0xb47bb7['on'](_0x3ab311['EventType']['TOUCH_MOVE'],this['onTouchMove'],this),_0xb47bb7['on'](_0x3ab311['EventType']['TOUCH_END'],this['onTouchEnd'],this),_0xb47bb7['on'](_0x3ab311['EventType']['TOUCH_CANCEL'],this['onTouchEnd'],this),this['_pos_node']['push'](_0xb47bb7),(null==this['_maxX']||this['_maxX']<_0x4d93e8)&&(this['_maxX']=_0x4d93e8),(null==this['_maxY']||this['_maxY']<_0x7bc78f)&&(this['_maxY']=_0x7bc78f);}if(0x0==this['_data']['type']){var _0x58a054='/textures/weapon/'+this['_data']['path']+'/spriteFrame';this['asyncLoadBundleRes']('bundleMain',_0x58a054,_0x1f509c)['then'](function(_0x203ea2){return _0x11926b['icon']['spriteFrame']=_0x203ea2;});}else if(0x1==this['_data']['type']){this['asyncLoadBundleRes']('bundleMain','/textures/backpack/ui_cell1/spriteFrame',_0x1f509c)['then'](function(_0x12a7b6){for(var _0x98b07=0x0;_0x98b07<_0x11926b['_pos_node']['length'];_0x98b07++){var _0x1877db=_0x11926b['_pos_node'][_0x98b07],_0x1dfcfe=_0x1877db['getComponent'](_0x5cc9f1);null==_0x1dfcfe&&(_0x1dfcfe=_0x1877db['addComponent'](_0x5cc9f1)),_0x1dfcfe['spriteFrame']=_0x12a7b6;}});}for(var _0x102a0b=this['_data']['width']*(this['_maxX']+0x1),_0x230927=this['_data']['width']*(this['_maxY']+0x1),_0x5d323e=this['node']['getComponent'](_0x1d60c4),_0x565d6a=0x1;_0x565d6a<=this['_maxX'];_0x565d6a++)_0x5d323e['anchorX']-=0.5*_0x5d323e['anchorX'];for(var _0x349520=0x1;_0x349520<=this['_maxY'];_0x349520++)_0x5d323e['anchorY']-=0.5*_0x5d323e['anchorY'];_0x5d323e['setContentSize'](_0x102a0b,_0x230927);},_0x1c0d5d['clear']=function(){for(var _0x337472=this['_pos_node']['length']-0x1;_0x337472>=0x0;_0x337472--)this['_pos_node'][_0x337472]['destroy']();this['_pos_node']['length']=0x0,this['icon']['spriteFrame']=null;},_0x1c0d5d['equipped']=function(_0xd58dd3,_0x17252c){this['_isEquipped']=!0x0,this['_pos_node']['forEach'](function(_0xcf7bef){return _0xcf7bef['opacity']=0x0;});var _0x4cbe3e=this['_backpack']['gridPosToWorldPos'](_0x17252c);this['node']['setParent'](_0xd58dd3),this['node']['setWorldPosition'](_0x4cbe3e['x'],_0x4cbe3e['y'],0x1);},_0x1c0d5d['unequipped']=function(_0x56c864){this['_isEquipped']=!0x1,this['_pos_node']['forEach'](function(_0x472554){return _0x472554['opacity']=0xff;});var _0x11ba0a=this['node']['position']['x'],_0x1186ed=-this['_maxY']*this['_data']['width']*0.5;this['node']['setPosition'](_0x11ba0a,_0x1186ed),this['node']['setParent'](_0x56c864);},_0x1c0d5d['levelup']=function(){this['_data']['level']++;},_0x1c0d5d['onEnable']=function(){},_0x1c0d5d['onDisable']=function(){},_0x1c0d5d['onTouchStart']=function(_0x335d88){this['icon']['node']['opacity']=0x64,this['_isEquipped']&&this['_pos_node']['forEach'](function(_0x2a0d98){return _0x2a0d98['opacity']=0xff;}),this['_backpack']['worldPosToGirdPos'](this['node']['worldPosition'],this['_start_gird_pos']),this['_touch_start']&&this['_touch_start'](_0x335d88,this);},_0x1c0d5d['onTouchMove']=function(_0x271e37){this['_touch_move']&&this['_touch_move'](_0x271e37,this);},_0x1c0d5d['onTouchEnd']=function(_0x521fa7){this['icon']['node']['opacity']=0xff,this['_isEquipped']&&this['_pos_node']['forEach'](function(_0x1f5eeb){return _0x1f5eeb['opacity']=0x0;}),this['_touch_end']&&this['_touch_end'](_0x521fa7,this);},_0x2856f6(_0x48e935,[{'key':'data','get':function(){return this['_data'];}},{'key':'isEquipped','get':function(){return this['_isEquipped'];},'set':function(_0x10a92c){this['_isEquipped']=_0x10a92c;}},{'key':'pos','get':function(){return this['_pos'];}},{'key':'maxX','get':function(){return this['_maxX'];}},{'key':'maxY','get':function(){return this['_maxY'];}},{'key':'start_gird_pos','get':function(){return this['_start_gird_pos'];}}]),_0x48e935;}(_0x5e18d4))['prototype'],'icon',[_0x3f0207],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x419368=_0x2e7c08))||_0x419368));_0x492477['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackMode.ts',['cc'],function(_0x449556){var _0x3cd805;return{'setters':[function(_0x199389){_0x3cd805=_0x199389['cclegacy'];}],'execute':function(){_0x3cd805['_RF']['push']({},'90c59XJbpFJQauNJWZ2/6UH','BackpackMode',void 0x0);_0x449556('BackpackMode',function(){function _0x1cc117(_0x3f1d3b){this['_backpack']=null,this['_backpack']=_0x3f1d3b;}var _0x34deed=_0x1cc117['prototype'];return _0x34deed['enter']=function(){},_0x34deed['quit']=function(){},_0x34deed['onItemTouchStart']=function(_0x21f104,_0x52da1d){},_0x34deed['onItemTouchMove']=function(_0x59a2e4,_0x3034ed){},_0x34deed['onItemTouchEnd']=function(_0x4108ad,_0x4c623d){},_0x1cc117;}());_0x3cd805['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackModeGrid.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackMode.ts','./Backpack.ts','./BackpackItem.ts'],function(_0x185dc6){var _0x377cb6,_0x140354,_0x170205,_0x3d93b5,_0x10d344,_0x16c46b,_0x5b3a26,_0x4a7aa8,_0x56f1bd,_0xb484e;return{'setters':[function(_0x3977df){_0x377cb6=_0x3977df['inheritsLoose'];},function(_0x22ae94){_0x140354=_0x22ae94['cclegacy'],_0x170205=_0x22ae94['v2'],_0x3d93b5=_0x22ae94['v3'],_0x10d344=_0x22ae94['tween'],_0x16c46b=_0x22ae94['view'],_0x5b3a26=_0x22ae94['UITransform'];},function(_0x2886ad){_0x4a7aa8=_0x2886ad['BackpackMode'];},function(_0x398a0f){_0x56f1bd=_0x398a0f['Tag'];},function(_0x1de36a){_0xb484e=_0x1de36a['default'];}],'execute':function(){_0x140354['_RF']['push']({},'c5cd1FL/w5MP6cKMtm6EMt+','BackpackModeGrid',void 0x0);var _0x14754e=_0x170205(),_0x43a1a4=_0x3d93b5(),_0x36179e=_0x3d93b5();_0x185dc6('BackpackModeGrid',function(_0x604757){function _0x552df5(){for(var _0x12bece,_0x295aa8=arguments['length'],_0x119820=new Array(_0x295aa8),_0x175d3f=0x0;_0x175d3f<_0x295aa8;_0x175d3f++)_0x119820[_0x175d3f]=arguments[_0x175d3f];return(_0x12bece=_0x604757['call']['apply'](_0x604757,[this]['concat'](_0x119820))||this)['_gird_points']=[],_0x12bece['_item_relevance']=[],_0x12bece;}_0x377cb6(_0x552df5,_0x604757);var _0x275a18=_0x552df5['prototype'];return _0x275a18['enter']=function(){for(var _0x252ae0=0x0;_0x252ae0<this['_backpack']['gird_points_unlock']['length'];_0x252ae0++){this['_gird_points'][_0x252ae0]=[];for(var _0x28a94c=0x0;_0x28a94c<this['_backpack']['gird_points_unlock'][_0x252ae0]['length'];_0x28a94c++)this['_gird_points'][_0x252ae0][_0x28a94c]=null;}for(var _0x118ad7=this['_backpack']['itemX']*this['_backpack']['itemY'],_0x29edc5=0x0;_0x29edc5<this['_backpack']['gird_points_unlock']['length'];_0x29edc5++)for(var _0x17410d=0x0;_0x17410d<this['_backpack']['gird_points_unlock'][_0x29edc5]['length'];_0x17410d++)if(this['_backpack']['gird_points_unlock'][_0x29edc5][_0x17410d]&&null==this['_gird_points'][_0x29edc5][_0x17410d]){var _0x25f2a7={'type':0x1,'width':this['_backpack']['itemWidth'],'pos':this['getGirdPos'](_0x17410d,_0x29edc5)},_0x5a95c7=this['_backpack']['generateItemAddition'](_0x25f2a7);_0x5a95c7['equipped'](this['_backpack']['grid'],_0x43a1a4['set'](_0x17410d,_0x29edc5)),_0x5a95c7['node']['setSiblingIndex'](_0x118ad7),this['_backpack']['setPointState'](_0x43a1a4['set'](_0x17410d,_0x29edc5),_0x5a95c7['pos'],this['_gird_points'],_0x5a95c7);}this['updateUIEnter']();},_0x275a18['getGirdPos']=function(_0x59bc16,_0x5c8560){var _0x4f0a1b=this['_backpack']['gird_points_unlock'],_0x2574bf=[];return function _0x3c92d2(_0x220dd7,_0x50f5e5){var _0x2af647,_0x4bf97e=_0x220dd7-_0x59bc16,_0x2590a9=_0x50f5e5-_0x5c8560;_0x2574bf['find'](function(_0x28b168){return _0x28b168[0x0]==_0x4bf97e&&_0x28b168[0x1]==_0x2590a9;})||null!=(_0x2af647=_0x4f0a1b[_0x50f5e5])&&_0x2af647[_0x220dd7]&&(_0x2574bf['push']([_0x4bf97e,_0x2590a9]),_0x3c92d2(_0x220dd7+0x1,_0x50f5e5),_0x3c92d2(_0x220dd7,_0x50f5e5+0x1),_0x3c92d2(_0x220dd7-0x1,_0x50f5e5),_0x3c92d2(_0x220dd7,_0x50f5e5-0x1));}(_0x59bc16,_0x5c8560),_0x2574bf;},_0x275a18['quit']=function(){for(var _0x33cac1=this['_backpack']['getNodeList'](_0x56f1bd['item']),_0x4f91d8=_0x33cac1['length']-0x1;_0x4f91d8>=0x0;_0x4f91d8--){var _0x3249d5=_0x33cac1[_0x4f91d8],_0x20bf32=_0x3249d5['getComponent'](_0xb484e);0x1==_0x20bf32['data']['type']&&_0x20bf32['isEquipped']&&this['_backpack']['put'](_0x56f1bd['item'],_0x3249d5);}this['updateUIQuit']();},_0x275a18['onItemTouchStart']=function(_0x164faa,_0x32bd0c){var _0x2a15f9=this,_0x4d3c37=_0x32bd0c['start_gird_pos'];this['_backpack']['setPointState'](_0x4d3c37,_0x32bd0c['pos'],this['_backpack']['gird_points_unlock'],0x0);var _0xbb62dc=_0x32bd0c['node']['getWorldPosition'](_0x43a1a4);_0x32bd0c['node']['setParent'](this['_backpack']['grid']),_0x32bd0c['node']['setWorldPosition'](_0xbb62dc['x'],_0xbb62dc['y'],0x0),this['updateUI'](),_0x32bd0c['pos']['forEach'](function(_0x24d115){var _0x1ddc7f,_0x2ab561=_0x24d115[0x0],_0x637b37=_0x24d115[0x1],_0x376545=null==(_0x1ddc7f=_0x2a15f9['_backpack']['gird_points_item'][_0x4d3c37['y']+_0x637b37])?void 0x0:_0x1ddc7f[_0x4d3c37['x']+_0x2ab561];_0x376545&&_0x2a15f9['_item_relevance']['indexOf'](_0x376545)<0x0&&(_0x2a15f9['_backpack']['worldPosToGirdPos'](_0x376545['node']['worldPosition'],_0x376545['start_gird_pos']),_0x2a15f9['_backpack']['setPointState'](_0x4d3c37,_0x376545['pos'],_0x2a15f9['_backpack']['gird_points_item'],null),_0x2a15f9['_item_relevance']['push'](_0x376545));});},_0x275a18['onItemTouchMove']=function(_0x4c36cc,_0x1b731b){var _0x1d9b0a=this,_0x456c81=_0x4c36cc['getUIDelta'](_0x14754e);this['_item_relevance']['forEach'](function(_0x44b37b){_0x44b37b['node']['x']+=_0x456c81['x'],_0x44b37b['node']['y']+=_0x456c81['y'];});for(var _0x3d4144=_0x1b731b['node']['worldPosition'],_0xaebcce=this['_backpack']['worldPosToGirdPos'](_0x3d4144,_0x43a1a4),_0x579197=0x0;_0x579197<this['_backpack']['gird_points_unlock']['length'];_0x579197++)for(var _0x5ee00f=0x0;_0x5ee00f<this['_backpack']['gird_points_unlock'][_0x579197]['length'];_0x5ee00f++)this['_backpack']['gird_points_unlock'][_0x579197][_0x5ee00f]?this['_backpack']['gird_points_sprite'][_0x579197][_0x5ee00f]['spriteFrame']=this['_backpack']['sf_cells'][0x0]:this['_backpack']['gird_points_sprite'][_0x579197][_0x5ee00f]['spriteFrame']=this['_backpack']['sf_cells'][0x2];_0x1b731b['pos']['forEach'](function(_0x1698e4){var _0x1e5443,_0x31a725=_0x1698e4[0x0],_0x5b8cb7=_0x1698e4[0x1],_0x1481a7=null==(_0x1e5443=_0x1d9b0a['_backpack']['gird_points_unlock'][_0xaebcce['y']+_0x5b8cb7])?void 0x0:_0x1e5443[_0xaebcce['x']+_0x31a725];null!=_0x1481a7&&0x1!=_0x1481a7&&(_0x1d9b0a['_backpack']['gird_points_sprite'][_0xaebcce['y']+_0x5b8cb7][_0xaebcce['x']+_0x31a725]['spriteFrame']=_0x1d9b0a['_backpack']['sf_cells'][0x3]);});},_0x275a18['onItemTouchEnd']=function(_0x12ed0b,_0x4f9365){var _0x44d1b9=this,_0x516368=_0x4f9365['node']['worldPosition'],_0x2e9090=this['_backpack']['worldPosToGirdPos'](_0x516368,_0x43a1a4),_0x3bc744=_0x4f9365['start_gird_pos'];_0x4f9365['pos']['findIndex'](function(_0x87e05f){var _0x55cfbc,_0x2489a8=_0x87e05f[0x0],_0x5ee971=_0x87e05f[0x1],_0x3598e0=null==(_0x55cfbc=_0x44d1b9['_backpack']['gird_points_unlock'][_0x2e9090['y']+_0x5ee971])?void 0x0:_0x55cfbc[_0x2e9090['x']+_0x2489a8];return null==_0x3598e0||0x1==_0x3598e0;})>=0x0?_0x4f9365['isEquipped']?(_0x4f9365['equipped'](this['_backpack']['grid'],_0x4f9365['start_gird_pos']),this['_backpack']['setPointState'](_0x3bc744,_0x4f9365['pos'],this['_backpack']['gird_points_unlock'],0x1),this['_item_relevance']['forEach'](function(_0x4ca74f){var _0x3359c7=_0x4ca74f['start_gird_pos'];_0x4ca74f['equipped'](_0x44d1b9['_backpack']['grid'],_0x3359c7),_0x44d1b9['_backpack']['setPointState'](_0x3359c7,_0x4ca74f['pos'],_0x44d1b9['_backpack']['gird_points_item'],_0x4ca74f);})):_0x4f9365['unequipped'](this['_backpack']['idle']['node']):(_0x4f9365['equipped'](this['_backpack']['grid'],_0x2e9090),this['_backpack']['setPointState'](_0x2e9090,_0x4f9365['pos'],this['_backpack']['gird_points_unlock'],0x1),this['_item_relevance']['forEach'](function(_0x3d1937){var _0x1474de=_0x3d1937['node']['worldPosition'],_0x3177b0=_0x44d1b9['_backpack']['worldPosToGirdPos'](_0x1474de,_0x36179e);_0x3d1937['equipped'](_0x44d1b9['_backpack']['grid'],_0x3177b0),_0x44d1b9['_backpack']['setPointState'](_0x3177b0,_0x3d1937['pos'],_0x44d1b9['_backpack']['gird_points_item'],_0x3d1937);})),this['_item_relevance']['length']=0x0,this['updateUI']();},_0x275a18['updateUI']=function(){for(var _0x26aa0e=0x0;_0x26aa0e<this['_backpack']['gird_points_unlock']['length'];_0x26aa0e++)for(var _0x34c4c9=0x0;_0x34c4c9<this['_backpack']['gird_points_unlock'][_0x26aa0e]['length'];_0x34c4c9++){var _0x102169=this['_backpack']['gird_points_sprite'][_0x26aa0e][_0x34c4c9];this['_backpack']['gird_points_unlock'][_0x26aa0e][_0x34c4c9]?_0x102169['spriteFrame']=this['_backpack']['sf_cells'][0x0]:_0x102169['spriteFrame']=this['_backpack']['sf_cells'][0x2],_0x102169['node']['active']=!0x0;}},_0x275a18['updateUIEnter']=function(){this['_backpack']['content']['opacity']=0x64;for(var _0x39ce0f=0x0;_0x39ce0f<this['_backpack']['gird_points_unlock']['length'];_0x39ce0f++)for(var _0x4914da=0x0;_0x4914da<this['_backpack']['gird_points_unlock'][_0x39ce0f]['length'];_0x4914da++){var _0x1ea21a=this['_backpack']['gird_points_sprite'][_0x39ce0f][_0x4914da];this['_backpack']['gird_points_unlock'][_0x39ce0f][_0x4914da]||(_0x1ea21a['node']['active']=!0x0,_0x1ea21a['node']['opacity']=0x0,_0x10d344(_0x1ea21a['node'])['to'](0.1,{'opacity':0xff})['start']());}var _0x295d19=this['_backpack']['itemX']-0x1,_0x5a0b90=this['_backpack']['itemY']-0x1;this['updateFrame'](_0x295d19,0x0,_0x5a0b90,0x0);},_0x275a18['updateUIQuit']=function(){var _0x5cbb78,_0x3eeb81,_0x3be3e5,_0x45664e;this['_backpack']['content']['opacity']=0xff;for(var _0x5641ec=0x0;_0x5641ec<this['_backpack']['gird_points_unlock']['length'];_0x5641ec++)for(var _0x3bfa5c=0x0;_0x3bfa5c<this['_backpack']['gird_points_unlock'][_0x5641ec]['length'];_0x3bfa5c++){this['_backpack']['gridPosToWorldPos'](_0x3bfa5c,_0x5641ec);var _0x598d84=this['_backpack']['gird_points_sprite'][_0x5641ec][_0x3bfa5c];this['_backpack']['gird_points_unlock'][_0x5641ec][_0x3bfa5c]?((null==_0x5cbb78||_0x5cbb78<_0x3bfa5c)&&(_0x5cbb78=_0x3bfa5c),(null==_0x3eeb81||_0x3eeb81>_0x3bfa5c)&&(_0x3eeb81=_0x3bfa5c),(null==_0x3be3e5||_0x3be3e5<_0x5641ec)&&(_0x3be3e5=_0x5641ec),(null==_0x45664e||_0x45664e>_0x5641ec)&&(_0x45664e=_0x5641ec),_0x598d84['spriteFrame']=this['_backpack']['sf_cells'][0x0]):_0x598d84['spriteFrame']=this['_backpack']['sf_cells'][0x2],_0x598d84['node']['active']=!!this['_backpack']['gird_points_unlock'][_0x5641ec][_0x3bfa5c];}this['updateFrame'](_0x5cbb78,_0x3eeb81,_0x3be3e5,_0x45664e);},_0x275a18['updateFrame']=function(_0x54fdd5,_0x5815e6,_0x96a95c,_0x5d99ad){var _0x2ece1c=(_0x54fdd5-_0x5815e6+0x1)*this['_backpack']['itemWidth'],_0x4a0b5b=(_0x96a95c-_0x5d99ad+0x1)*this['_backpack']['itemWidth'],_0x121ba7=_0x16c46b['getVisibleSize'](),_0x46390d=0.5*_0x121ba7['width'],_0x14bd5d=0.5*_0x121ba7['height'],_0x254ff8=_0x46390d-(_0x5815e6*this['_backpack']['itemWidth']+(_0x46390d-this['_backpack']['widthHalf'])+0.5*_0x2ece1c),_0xe8574e=_0x14bd5d-(_0x5d99ad*this['_backpack']['itemWidth']+(_0x14bd5d-this['_backpack']['heightHalf'])+0.5*_0x4a0b5b);this['_backpack']['content']['setWorldPosition'](_0x46390d+_0x254ff8,_0x14bd5d+_0xe8574e+0x64,0x0);var _0xe3e035=this['_backpack']['sp_frame']['node'],_0x2ecbd1=_0xe3e035['getComponent'](_0x5b3a26),_0x2ea33a=_0x2ece1c+this['_backpack']['frame_offset_max']['width']+this['_backpack']['frame_offset_min']['width']+0xa,_0x172cb1=_0x4a0b5b+this['_backpack']['frame_offset_max']['height']+this['_backpack']['frame_offset_min']['height']+0xa,_0x29f38c=this['_backpack']['gridPosToWorldPos'](_0x5815e6,_0x5d99ad),_0x4bf8e8=_0x29f38c['x']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['width']+0x5,_0x4b0ad4=_0x29f38c['y']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['height']+0x5;_0x10d344(_0xe3e035)['to'](0.1,{'worldPosition':_0x3d93b5(_0x4bf8e8,_0x4b0ad4,0x0)})['start'](),_0x10d344(_0x2ecbd1)['to'](0.1,{'width':_0x2ea33a,'height':_0x172cb1})['start']();var _0x298879=this['_backpack']['grid'];_0x10d344(_0x298879)['to'](0.1,{'worldPosition':this['_backpack']['content']['worldPosition']})['start']();},_0x552df5;}(_0x4a7aa8));_0x140354['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackModeWeapon.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackMode.ts','./Backpack.ts'],function(_0x99c4c1){var _0x48b563,_0x32a621,_0x15c85d,_0x59f799,_0x47252,_0x4bfb01,_0x839325,_0x9525ae,_0x497b33,_0x42d770;return{'setters':[function(_0x204b5d){_0x48b563=_0x204b5d['inheritsLoose'];},function(_0x45675d){_0x32a621=_0x45675d['cclegacy'],_0x15c85d=_0x45675d['v2'],_0x59f799=_0x45675d['v3'],_0x47252=_0x45675d['Vec3'],_0x4bfb01=_0x45675d['math'],_0x839325=_0x45675d['view'],_0x9525ae=_0x45675d['UITransform'];},function(_0x15865c){_0x497b33=_0x15865c['BackpackMode'];},function(_0x2d93ff){_0x42d770=_0x2d93ff['Tag'];}],'execute':function(){_0x32a621['_RF']['push']({},'61062dy9ctDC4JBIotFRytf','BackpackModeWeapon',void 0x0);var _0x4a50cf=_0x15c85d(),_0x19ed51=_0x59f799(),_0x5d9958=_0x59f799();_0x99c4c1('BackpackModeWeapon',function(_0x2c9428){function _0x493fe4(_0x428ed0){var _0x57b09c;return(_0x57b09c=_0x2c9428['call'](this,_0x428ed0)||this)['_item_compound']=null,_0x57b09c['_backpack']=_0x428ed0,_0x57b09c['updateUI'](),_0x57b09c;}_0x48b563(_0x493fe4,_0x2c9428);var _0x3adac5=_0x493fe4['prototype'];return _0x3adac5['enter']=function(){},_0x3adac5['quit']=function(){},_0x3adac5['onItemTouchStart']=function(_0x264bfc,_0x359e71){var _0x48868b=_0x359e71['start_gird_pos'];this['_backpack']['setPointState'](_0x48868b,_0x359e71['pos'],this['_backpack']['gird_points_item'],null);var _0x1cc86e=_0x359e71['node']['getWorldPosition'](_0x19ed51);_0x359e71['node']['setParent'](this['_backpack']['grid']),_0x359e71['node']['setWorldPosition'](_0x1cc86e['x'],_0x1cc86e['y'],0x0);_0xe3bc0a:for(var _0xf54a18=0x0;_0xf54a18<this['_backpack']['gird_points_item']['length'];_0xf54a18++)for(var _0x280c95=0x0;_0x280c95<this['_backpack']['gird_points_item'][_0xf54a18]['length'];_0x280c95++){var _0x48ab8f=this['_backpack']['gird_points_item'][_0xf54a18][_0x280c95];if((null==_0x48ab8f?void 0x0:_0x48ab8f['data']['model'])==_0x359e71['data']['model']&&(null==_0x48ab8f?void 0x0:_0x48ab8f['data']['level'])==_0x359e71['data']['level']&&_0x48ab8f!=_0x359e71){this['_item_compound']=_0x48ab8f,this['updateItemCompound'](_0x359e71);break _0xe3bc0a;}}},_0x3adac5['onItemTouchMove']=function(_0xe8bc1a,_0x303190){for(var _0x5f26da=this,_0x4dbfe2=_0x303190['node']['worldPosition'],_0x2387b8=this['_backpack']['worldPosToGirdPos'](_0x4dbfe2,_0x5d9958),_0x5946dd=0x0;_0x5946dd<this['_backpack']['gird_points_unlock']['length'];_0x5946dd++)for(var _0x45985b=0x0;_0x45985b<this['_backpack']['gird_points_unlock'][_0x5946dd]['length'];_0x45985b++)this['_backpack']['gird_points_unlock'][_0x5946dd][_0x45985b]?this['_backpack']['gird_points_sprite'][_0x5946dd][_0x45985b]['spriteFrame']=this['_backpack']['sf_cells'][0x0]:this['_backpack']['gird_points_sprite'][_0x5946dd][_0x45985b]['spriteFrame']=this['_backpack']['sf_cells'][0x2];_0x303190['pos']['forEach'](function(_0x5f3de0){var _0xf7012,_0x16a177=_0x5f3de0[0x0],_0x3fc640=_0x5f3de0[0x1],_0x4c19da=null==(_0xf7012=_0x5f26da['_backpack']['gird_points_unlock'][_0x2387b8['y']+_0x3fc640])?void 0x0:_0xf7012[_0x2387b8['x']+_0x16a177];null!=_0x4c19da&&0x0!=_0x4c19da&&(_0x5f26da['_backpack']['gird_points_sprite'][_0x2387b8['y']+_0x3fc640][_0x2387b8['x']+_0x16a177]['spriteFrame']=_0x5f26da['_backpack']['sf_cells'][0x1]);}),this['_item_compound']&&this['updateItemCompound'](_0x303190);},_0x3adac5['onItemTouchEnd']=function(_0x451829,_0x4eb1e3){var _0x4dc007=this,_0x445cec=_0x4eb1e3['node']['worldPosition'],_0x3712b3=this['_backpack']['worldPosToGirdPos'](_0x445cec,_0x5d9958),_0xc3b0c5=_0x4eb1e3['start_gird_pos'];if(_0x4eb1e3['pos']['findIndex'](function(_0x129820){var _0x12ff81,_0x285341=_0x129820[0x0],_0x2e5cb4=_0x129820[0x1],_0x1e74e1=null==(_0x12ff81=_0x4dc007['_backpack']['gird_points_unlock'][_0x3712b3['y']+_0x2e5cb4])?void 0x0:_0x12ff81[_0x3712b3['x']+_0x285341];return null==_0x1e74e1||0x0==_0x1e74e1;})>=0x0)if(_0x4eb1e3['isEquipped']){var _0x14a428=_0x451829['getUILocation'](_0x4a50cf);this['_backpack']['idle']['contains'](_0x14a428)?_0x4eb1e3['unequipped'](this['_backpack']['idle']['node']):(_0x4eb1e3['equipped'](this['_backpack']['grid'],_0x4eb1e3['start_gird_pos']),this['_backpack']['setPointState'](_0xc3b0c5,_0x4eb1e3['pos'],this['_backpack']['gird_points_item'],_0x4eb1e3));}else _0x4eb1e3['unequipped'](this['_backpack']['idle']['node']);else{var _0x1414a8=_0x4eb1e3['pos']['filter'](function(_0x3ddf8d){var _0x106ce8,_0x2fd6e1=_0x3ddf8d[0x0],_0x4e0440=_0x3ddf8d[0x1];return null==(_0x106ce8=_0x4dc007['_backpack']['gird_points_item'][_0x3712b3['y']+_0x4e0440])?void 0x0:_0x106ce8[_0x3712b3['x']+_0x2fd6e1];})['map'](function(_0x4303a9){var _0x17e241,_0x6eab28=_0x4303a9[0x0],_0x5e65ee=_0x4303a9[0x1];return null==(_0x17e241=_0x4dc007['_backpack']['gird_points_item'][_0x3712b3['y']+_0x5e65ee])?void 0x0:_0x17e241[_0x3712b3['x']+_0x6eab28];}),_0x409701=_0x1414a8['find'](function(_0x2bc11d){return _0x2bc11d==_0x4dc007['_item_compound'];});_0x409701?(this['_backpack']['put'](_0x42d770['item'],_0x4eb1e3['node']),_0x409701['levelup']()):(_0x1414a8['forEach'](function(_0xc0e7a6){var _0x33d02a=_0xc0e7a6['node']['worldPosition'],_0x27a5e6=_0x4dc007['_backpack']['worldPosToGirdPos'](_0x33d02a,_0x19ed51);_0x4dc007['_backpack']['setPointState'](_0x27a5e6,_0xc0e7a6['pos'],_0x4dc007['_backpack']['gird_points_item'],null),_0xc0e7a6['unequipped'](_0x4dc007['_backpack']['idle']['node']);}),_0x4eb1e3['equipped'](this['_backpack']['grid'],_0x3712b3),this['_backpack']['setPointState'](_0x3712b3,_0x4eb1e3['pos'],this['_backpack']['gird_points_item'],_0x4eb1e3));}this['_item_compound']=null,this['_backpack']['tra_compound']['node']['active']=!0x1,this['updateUI']();},_0x3adac5['updateItemCompound']=function(_0x50f09e){if(null!=this['_item_compound']){var _0x30e7c7=this['_item_compound']['icon']['node']['worldPosition'],_0x4ab8f0=_0x50f09e['icon']['node']['worldPosition'],_0x45a9d9=_0x47252['subtract'](_0x19ed51,_0x4ab8f0,_0x30e7c7),_0x485976=Math['atan2'](_0x45a9d9['y'],_0x45a9d9['x']);this['_backpack']['tra_compound']['node']['active']=!0x0,this['_backpack']['tra_compound']['node']['setWorldPosition'](_0x30e7c7),this['_backpack']['tra_compound']['node']['angle']=_0x4bfb01['toDegree'](_0x485976)-0x5a,this['_backpack']['tra_compound']['height']=_0x45a9d9['length']();}},_0x3adac5['updateUI']=function(){for(var _0x570df7,_0x5b0ab3,_0x56f595,_0x5b5dc1,_0x90a711=0x0;_0x90a711<this['_backpack']['gird_points_unlock']['length'];_0x90a711++)for(var _0x41af7a=0x0;_0x41af7a<this['_backpack']['gird_points_unlock'][_0x90a711]['length'];_0x41af7a++){var _0xc3128e=this['_backpack']['gird_points_sprite'][_0x90a711][_0x41af7a];this['_backpack']['gird_points_unlock'][_0x90a711][_0x41af7a]?((null==_0x570df7||_0x570df7<_0x41af7a)&&(_0x570df7=_0x41af7a),(null==_0x5b0ab3||_0x5b0ab3>_0x41af7a)&&(_0x5b0ab3=_0x41af7a),(null==_0x56f595||_0x56f595<_0x90a711)&&(_0x56f595=_0x90a711),(null==_0x5b5dc1||_0x5b5dc1>_0x90a711)&&(_0x5b5dc1=_0x90a711),_0xc3128e['spriteFrame']=this['_backpack']['sf_cells'][0x0]):_0xc3128e['spriteFrame']=this['_backpack']['sf_cells'][0x2],_0xc3128e['node']['active']=!!this['_backpack']['gird_points_unlock'][_0x90a711][_0x41af7a];}this['updateFrame'](_0x570df7,_0x5b0ab3,_0x56f595,_0x5b5dc1);},_0x3adac5['updateFrame']=function(_0x324b5c,_0x412631,_0x32e7b7,_0x310fe8){var _0x233927=(_0x324b5c-_0x412631+0x1)*this['_backpack']['itemWidth'],_0x4df7a6=(_0x32e7b7-_0x310fe8+0x1)*this['_backpack']['itemWidth'],_0x1385ef=_0x839325['getVisibleSize'](),_0x552489=0.5*_0x1385ef['width'],_0xc36963=0.5*_0x1385ef['height'],_0x431431=_0x552489-(_0x412631*this['_backpack']['itemWidth']+(_0x552489-this['_backpack']['widthHalf'])+0.5*_0x233927),_0x4ef4e1=_0xc36963-(_0x310fe8*this['_backpack']['itemWidth']+(_0xc36963-this['_backpack']['heightHalf'])+0.5*_0x4df7a6);this['_backpack']['content']['setWorldPosition'](_0x552489+_0x431431,_0xc36963+_0x4ef4e1+0x64,0x0);var _0x4b52bc=this['_backpack']['sp_frame']['node'],_0x3862ae=_0x4b52bc['getComponent'](_0x9525ae),_0x848bd=_0x233927+this['_backpack']['frame_offset_max']['width']+this['_backpack']['frame_offset_min']['width']+0xa,_0x2e97cb=_0x4df7a6+this['_backpack']['frame_offset_max']['height']+this['_backpack']['frame_offset_min']['height']+0xa,_0x31510a=this['_backpack']['gridPosToWorldPos'](_0x412631,_0x310fe8),_0x2e48f8=_0x31510a['x']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['width']+0x5,_0x2f540a=_0x31510a['y']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['height']+0x5;_0x4b52bc['setWorldPosition'](_0x2e48f8,_0x2f540a,0x0),_0x3862ae['setContentSize'](_0x848bd,_0x2e97cb),this['_backpack']['grid']['setWorldPosition'](this['_backpack']['content']['worldPosition']);},_0x493fe4;}(_0x497b33));_0x32a621['_RF']['pop']();}};});System['register']('chunks:///_virtual/bundleMain',['./Backpack.ts','./Menu.ts','./BackpackIdle.ts','./BackpackItem.ts','./BackpackMode.ts','./BackpackModeGrid.ts','./BackpackModeWeapon.ts'],function(){return{'setters':[null,null,null,null,null,null,null],'execute':function(){}};});System['register']('chunks:///_virtual/Menu.ts',['./rollupPluginModLoBabelHelpers.js','cc','./UIBase.ts','./UIMgr.ts','./DefineUI.ts'],function(_0x541ee3){var _0x5c19a6,_0x10ccf3,_0x5227cf,_0x35aaa3,_0x26b47b,_0x529b92;return{'setters':[function(_0x2106d2){_0x5c19a6=_0x2106d2['inheritsLoose'];},function(_0x136725){_0x10ccf3=_0x136725['cclegacy'],_0x5227cf=_0x136725['_decorator'];},function(_0x51df25){_0x35aaa3=_0x51df25['default'];},function(_0xfdde89){_0x26b47b=_0xfdde89['UIFacade'];},function(_0x4b723b){_0x529b92=_0x4b723b['UI'];}],'execute':function(){var _0x1702df;_0x10ccf3['_RF']['push']({},'928b6dqLRxG26cO3Y0yo9Vh','Menu',void 0x0);var _0x38a366=_0x5227cf,_0x4360de=_0x38a366['ccclass'];_0x38a366['property'],_0x541ee3('Menu',_0x4360de('Menu')(_0x1702df=function(_0x2760e4){function _0x1ffec1(){return _0x2760e4['apply'](this,arguments)||this;}_0x5c19a6(_0x1ffec1,_0x2760e4);var _0x2249bd=_0x1ffec1['prototype'];return _0x2249bd['start']=function(){},_0x2249bd['onClickBackpack']=function(_0x4dc7f7){_0x26b47b['open'](_0x529b92['Type']['Backpack']),this['close']();},_0x2249bd['onClickBattle']=function(_0x20671f){_0x26b47b['open'](_0x529b92['Type']['Battle']),this['close']();},_0x2249bd['onClickTip']=function(){_0x26b47b['showToast']('TIPS测试');},_0x1ffec1;}(_0x35aaa3))||_0x1702df);_0x10ccf3['_RF']['pop']();}};});(function(_0x1557a5){var _0x1cbf46=function(){var _0x21004c=!![];return function(_0x153e78,_0x4d3a50){var _0x246313=_0x21004c?function(){if(_0x4d3a50){var _0x50da17=_0x4d3a50['apply'](_0x153e78,arguments);_0x4d3a50=null;return _0x50da17;}}:function(){};_0x21004c=![];return _0x246313;};}();var _0x157fbf=function(){(function(){_0x1cbf46(this,function(){var _0x556775=new RegExp('function\x20*\x5c(\x20*\x5c)');var _0x58e246=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i');var _0x709cef=PkYZC('init');if(!_0x556775['test'](_0x709cef+'chain')||!_0x58e246['test'](_0x709cef+'input')){_0x709cef('0');}else{PkYZC();}})();}());var _0x2e0ca3=!![];return function(_0x258549,_0x541271){var _0x39165e=_0x2e0ca3?function(){if(_0x541271){var _0x7477a5=_0x541271['apply'](_0x258549,arguments);_0x541271=null;return _0x7477a5;}}:function(){};_0x2e0ca3=![];return _0x39165e;};}();(function(){_0x157fbf(this,function(){var _0x2e53c3=new RegExp('function\x20*\x5c(\x20*\x5c)');var _0x3cdeb5=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i');var _0x1f50e3=mMWsC('init');if(!_0x2e53c3['test'](_0x1f50e3+'chain')||!_0x3cdeb5['test'](_0x1f50e3+'input')){_0x1f50e3('0');}else{mMWsC();}})();}());_0x1557a5('virtual:///prerequisite-imports/bundleMain','chunks:///_virtual/bundleMain');}(function(_0x306490,_0xc6e93b){System['register'](_0x306490,[_0xc6e93b],function(_0xe01bdd,_0x5d18a0){return{'setters':[function(_0xb3de6d){var _0x597451={};for(var _0x54b82a in _0xb3de6d){if(_0x54b82a!=='default'&&_0x54b82a!=='__esModule')_0x597451[_0x54b82a]=_0xb3de6d[_0x54b82a];}_0xe01bdd(_0x597451);}],'execute':function(){}};});}));function mMWsC(_0x1b947a){function _0x40febc(_0x1791d4){if(typeof _0x1791d4==='string'){return function(_0x179bb6){}['constructor']('while\x20(true)\x20{}')['apply']('counter');}else{if((''+_0x1791d4/_0x1791d4)['length']!==0x1||_0x1791d4%0x14===0x0){(function(){return!![];}['constructor']('debu'+'gger')['call']('action'));}else{(function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject'));}}_0x40febc(++_0x1791d4);}try{if(_0x1b947a){return _0x40febc;}else{_0x40febc(0x0);}}catch(_0x545603){}}function PkYZC(_0x515094){function _0xc4efca(_0x1340db){if(typeof _0x1340db==='string'){return function(_0x3a2672){}['constructor']('while\x20(true)\x20{}')['apply']('counter');}else{if((''+_0x1340db/_0x1340db)['length']!==0x1||_0x1340db%0x14===0x0){(function(){return!![];}['constructor']('debu'+'gger')['call']('action'));}else{(function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject'));}}_0xc4efca(++_0x1340db);}try{if(_0x515094){return _0xc4efca;}else{_0xc4efca(0x0);}}catch(_0x7449e2){}}