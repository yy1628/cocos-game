System['register']('chunks:///_virtual/Backpack.ts',['./rollupPluginModLoBabelHelpers.js','cc','./UIBase.ts','./BackpackItem.ts','./BackpackModeGrid.ts','./BackpackModeWeapon.ts','./BackpackIdle.ts'],function(_0x272347){var _0x4bb7ec,_0x360f76,_0x390285,_0x29a4a6,_0x1ee9c2,_0x40da1c,_0x371653,_0x2ee9f1,_0xfd0763,_0x176e47,_0x3d5789,_0x41bc5e,_0xcfaa77,_0x19535a,_0x4048fa,_0xacd91b,_0x170cb8,_0x43946c,_0x2e0291,_0x518393;return{'setters':[function(_0x322ba6){_0x4bb7ec=_0x322ba6['applyDecoratedDescriptor'];_0x360f76=_0x322ba6['inheritsLoose'];_0x390285=_0x322ba6['initializerDefineProperty'];_0x29a4a6=_0x322ba6['assertThisInitialized'];_0x1ee9c2=_0x322ba6['createForOfIteratorHelperLoose'];},function(_0x182211){_0x40da1c=_0x182211['cclegacy'];_0x371653=_0x182211['v2'];_0x2ee9f1=_0x182211['v3'];_0xfd0763=_0x182211['Prefab'];_0x176e47=_0x182211['SpriteFrame'];_0x3d5789=_0x182211['UITransform'];_0x41bc5e=_0x182211['Sprite'];_0xcfaa77=_0x182211['Node'];_0x19535a=_0x182211['_decorator'];_0x4048fa=_0x182211['size'];},function(_0x37b342){_0xacd91b=_0x37b342['default'];},function(_0x332519){_0x170cb8=_0x332519['default'];},function(_0x36e1fc){_0x43946c=_0x36e1fc['BackpackModeGrid'];},function(_0x4e764b){_0x2e0291=_0x4e764b['BackpackModeWeapon'];},function(_0x4e2da2){_0x518393=_0x4e2da2['BackpackIdle'];}],'execute':function(){var _0x14b538,_0x53e912,_0x17758e,_0x57047b,_0x5aec14,_0x23eeb7,_0x3b848c,_0x2d37d6,_0x4b012d,_0x4dae78,_0x516822,_0x3d3e8f,_0x5db956,_0x4f1291,_0x17943b,_0x22d392,_0x1bdce8,_0x4515f5,_0x3c2179;_0x40da1c['_RF']['push']({},'11936DThM9HkarHrrwPyr/e','Backpack',undefined);var _0x41453d=_0x19535a,_0x43570f=_0x41453d['ccclass'],_0x2d3f4a=_0x41453d['property'];var _0x1e7df0=_0x371653();var _0x5c94ab=_0x2ee9f1();var _0x456318=_0x272347('Tag',function(_0x5b62f6){_0x5b62f6[_0x5b62f6['item']=0x0]='item';return _0x5b62f6;}({}));var _0x494a1b=_0x272347('EnumModeType',function(_0x2ef092){_0x2ef092[_0x2ef092['None']=-0x1]='None';_0x2ef092[_0x2ef092['Weapon']=0x0]='Weapon';_0x2ef092[_0x2ef092['Grid']=0x1]='Grid';return _0x2ef092;}({}));var _0x2111e8=_0x272347('Backpack',(_0x14b538=_0x43570f('Backpack'),_0x53e912=_0x2d3f4a(_0xfd0763),_0x17758e=_0x2d3f4a([_0x176e47]),_0x57047b=_0x2d3f4a(_0x3d5789),_0x5aec14=_0x2d3f4a(_0x41bc5e),_0x23eeb7=_0x2d3f4a({'type':_0xcfaa77,'tooltip':'锚点，不放节点到内部'}),_0x3b848c=_0x2d3f4a({'type':_0xcfaa77,'tooltip':'网格'}),_0x2d37d6=_0x2d3f4a({'type':_0x518393,'tooltip':'闲置区'}),_0x4b012d=_0x2d3f4a({'type':_0xcfaa77,'tooltip':''}),_0x14b538(_0x4dae78=(_0x516822=function(_0x4b6f45){_0x360f76(_0x3f1636,_0x4b6f45);function _0x3f1636(){var _0x38356b;for(var _0x2dff4d=arguments['length'],_0x2b8e89=new Array(_0x2dff4d),_0x3a6960=0x0;_0x3a6960<_0x2dff4d;_0x3a6960++){_0x2b8e89[_0x3a6960]=arguments[_0x3a6960];}_0x38356b=_0x4b6f45['call']['apply'](_0x4b6f45,[this]['concat'](_0x2b8e89))||this;_0x390285(_0x38356b,'item',_0x3d3e8f,_0x29a4a6(_0x38356b));_0x390285(_0x38356b,'sf_cells',_0x5db956,_0x29a4a6(_0x38356b));_0x390285(_0x38356b,'tra_compound',_0x4f1291,_0x29a4a6(_0x38356b));_0x390285(_0x38356b,'sp_frame',_0x17943b,_0x29a4a6(_0x38356b));_0x390285(_0x38356b,'content',_0x22d392,_0x29a4a6(_0x38356b));_0x390285(_0x38356b,'grid',_0x1bdce8,_0x29a4a6(_0x38356b));_0x390285(_0x38356b,'idle',_0x4515f5,_0x29a4a6(_0x38356b));_0x390285(_0x38356b,'modes',_0x3c2179,_0x29a4a6(_0x38356b));_0x38356b['_mode']=[];_0x38356b['_type']=_0x494a1b['None'];_0x38356b['gird_points_sprite']=[];_0x38356b['gird_points_unlock']=[];_0x38356b['gird_points_item']=[];_0x38356b['itemX']=0x5;_0x38356b['itemY']=0x7;_0x38356b['itemWidth']=0x82;_0x38356b['widthHalf']=_0x38356b['itemX']*_0x38356b['itemWidth']*0.5;_0x38356b['heightHalf']=_0x38356b['itemY']*_0x38356b['itemWidth']*0.5;_0x38356b['frame_offset_max']=_0x4048fa(0x2a,0x46);_0x38356b['frame_offset_min']=_0x4048fa(0x37,0x3c);return _0x38356b;}var _0x42bfd0=_0x3f1636['prototype'];_0x42bfd0['onOpen']=function _0x448efb(){this['addItemPool'](_0x456318['item'],this['item'],_0x170cb8);this['gird_points_unlock']=[[0x0,0x0,0x0,0x0,0x0],[0x0,0x0,0x0,0x0,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x0,0x0,0x0,0x0],[0x0,0x0,0x0,0x0,0x0]];for(var _0x2ef247=0x0;_0x2ef247<this['gird_points_unlock']['length'];_0x2ef247++){this['gird_points_sprite'][_0x2ef247]=[];this['gird_points_item'][_0x2ef247]=[];for(var _0x25a9dd=0x0;_0x25a9dd<this['gird_points_unlock'][_0x2ef247]['length'];_0x25a9dd++){this['gird_points_item'][_0x2ef247][_0x25a9dd]=null;var _0x3151de=this['gridPosToWorldPos'](_0x25a9dd,_0x2ef247);var _0xacc9b1=new _0xcfaa77(_0x25a9dd+','+_0x2ef247);_0xacc9b1['setParent'](this['grid']);_0xacc9b1['setWorldPosition'](_0x3151de['x'],_0x3151de['y'],0x0);var _0xda82e5=_0xacc9b1['addComponent'](_0x41bc5e);_0xda82e5['spriteFrame']=this['sf_cells'][0x0];this['gird_points_sprite'][_0x2ef247][_0x25a9dd]=_0xda82e5;}}this['tra_compound']['node']['active']=![];this['updateItemAddition']();this['updateItemWeapon']();this['_mode']=[new _0x2e0291(this),new _0x43946c(this)];this['onSwitchMode'](_0x494a1b['Weapon']);};_0x42bfd0['onSwitchMode']=function _0x542948(_0x4e4a4e){var _0x167403,_0x5c9d25;(_0x167403=this['_mode'][this['_type']])==null||_0x167403['quit']();this['_type']=_0x4e4a4e;(_0x5c9d25=this['_mode'][this['_type']])==null||_0x5c9d25['enter']();this['modes']['children']['forEach'](function(_0xddcb62,_0x32689f){return _0xddcb62['active']=_0x4e4a4e==_0x32689f;});};_0x42bfd0['onItemTouchStart']=function _0x2835a8(_0x112c12,_0x2baa36){if(_0x2baa36['data']['type']==_0x494a1b['Weapon']&&this['_type']==_0x494a1b['Grid']){return;}if(_0x2baa36['data']['type']==_0x494a1b['Grid']&&this['_type']!=_0x494a1b['Grid']){this['onSwitchMode'](_0x494a1b['Grid']);}this['_mode'][this['_type']]['onItemTouchStart'](_0x112c12,_0x2baa36);this['idle']['onItemTouchStart'](_0x112c12,_0x2baa36);};_0x42bfd0['onItemTouchMove']=function _0x14a73a(_0x113f91,_0x2660b0){if(_0x2660b0['data']['type']==_0x494a1b['Weapon']&&this['_type']==_0x494a1b['Grid']){return;}var _0x3ff5aa=_0x113f91['getUIDelta'](_0x1e7df0);_0x2660b0['node']['x']+=_0x3ff5aa['x'];_0x2660b0['node']['y']+=_0x3ff5aa['y'];this['_mode'][this['_type']]['onItemTouchMove'](_0x113f91,_0x2660b0);this['idle']['onItemTouchMove'](_0x113f91,_0x2660b0);};_0x42bfd0['onItemTouchEnd']=function _0x3e373b(_0x3fa0fa,_0x55e7f8){if(_0x55e7f8['data']['type']==_0x494a1b['Weapon']&&this['_type']==_0x494a1b['Grid']){return;}this['_mode'][this['_type']]['onItemTouchEnd'](_0x3fa0fa,_0x55e7f8);this['idle']['onItemTouchEnd'](_0x3fa0fa,_0x55e7f8);};_0x42bfd0['onClickConfirm']=function _0x5d056f(){this['onSwitchMode'](_0x494a1b['Weapon']);};_0x42bfd0['updateItemWeapon']=function _0x18f4b0(_0x2ff929){_0x2ff929=[{'path':'p3-2-h','model':0x1,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0]]},{'path':'p8-3-vh','model':0x2,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x1,0x0],[0x0,0x1],[0x1,0x1]]},{'path':'p8-3-vh','model':0x2,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x1,0x0],[0x0,0x1],[0x1,0x1]]}];for(var _0x59574a=_0x1ee9c2(_0x2ff929),_0x5cdf36;!(_0x5cdf36=_0x59574a())['done'];){var _0x361121=_0x5cdf36['value'];this['generateItemWeapon'](_0x361121)['unequipped'](this['idle']['node']);}};_0x42bfd0['generateItemWeapon']=function _0x58565c(_0x91a8b1){var _0x5b0d8f=this['get'](_0x456318['item']);var _0x110363=_0x5b0d8f['getComponent'](_0x170cb8);_0x110363['setData'](this,_0x91a8b1,{'touch_start':this['onItemTouchStart']['bind'](this),'touch_move':this['onItemTouchMove']['bind'](this),'touch_end':this['onItemTouchEnd']['bind'](this)});return _0x110363;};_0x42bfd0['updateItemAddition']=function _0x1fb300(_0x12e514){_0x12e514=[{'type':0x1,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0]]},{'type':0x1,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0],[0x2,0x0]]}];for(var _0x44d567=_0x1ee9c2(_0x12e514),_0x36c8ea;!(_0x36c8ea=_0x44d567())['done'];){var _0x2a2395=_0x36c8ea['value'];this['generateItemWeapon'](_0x2a2395)['unequipped'](this['idle']['node']);}};_0x42bfd0['generateItemAddition']=function _0x36c11a(_0x5f2d8){var _0x5348e5=this['get'](_0x456318['item']);var _0x5c7c41=_0x5348e5['getComponent'](_0x170cb8);_0x5c7c41['setData'](this,_0x5f2d8,{'touch_start':this['onItemTouchStart']['bind'](this),'touch_move':this['onItemTouchMove']['bind'](this),'touch_end':this['onItemTouchEnd']['bind'](this)});return _0x5c7c41;};_0x42bfd0['setPointState']=function _0x518bf1(_0x2c238a,_0x67726e,_0x302395,_0x19027d){var _0x43a59e=this;_0x67726e['forEach'](function(_0x52adde){var _0x3a952b=_0x2c238a['x']+_0x52adde[0x0];var _0x16f32c=_0x2c238a['y']+_0x52adde[0x1];if(_0x3a952b<0x0||_0x16f32c<0x0){return;}if(_0x3a952b>=_0x43a59e['itemX']||_0x16f32c>=_0x43a59e['itemY']){return;}_0x302395[_0x16f32c][_0x3a952b]=_0x19027d;});};_0x42bfd0['gridPosToWorldPos']=function _0x2651e9(){var _0x2baedb=arguments[0x0];var _0x7e7eb0=arguments[0x1];var _0x4ebf2f=arguments[0x2];if(typeof _0x2baedb!=='number'){_0x4ebf2f=_0x7e7eb0;_0x7e7eb0=_0x2baedb['y'];_0x2baedb=_0x2baedb['x'];}if(_0x4ebf2f==null){_0x4ebf2f=_0x5c94ab;}var _0x2d531a=this['itemWidth'];_0x4ebf2f['x']=(_0x2baedb+0.5)*_0x2d531a;_0x4ebf2f['y']=(_0x7e7eb0+0.5)*_0x2d531a;_0x4ebf2f['x']+=this['content']['worldPosition']['x']-this['widthHalf'];_0x4ebf2f['y']+=this['content']['worldPosition']['y']-this['heightHalf'];return _0x4ebf2f;};_0x42bfd0['worldPosToGirdPos']=function _0x4ebda5(){var _0x3929ba=arguments[0x0];var _0x572bf5=arguments[0x1];var _0x1320c1=arguments[0x2];if(typeof _0x3929ba!=='number'){_0x1320c1=_0x572bf5;_0x572bf5=_0x3929ba['y'];_0x3929ba=_0x3929ba['x'];}if(_0x1320c1==null){_0x1320c1=_0x5c94ab;}var _0x346534=this['itemWidth'];_0x1320c1['x']=_0x3929ba-this['content']['worldPosition']['x']+this['widthHalf'];_0x1320c1['y']=_0x572bf5-this['content']['worldPosition']['y']+this['heightHalf'];_0x1320c1['x']=Math['round'](_0x1320c1['x']/_0x346534-0.5);_0x1320c1['y']=Math['round'](_0x1320c1['y']/_0x346534-0.5);return _0x1320c1;};return _0x3f1636;}(_0xacd91b),(_0x3d3e8f=_0x4bb7ec(_0x516822['prototype'],'item',[_0x53e912],{'configurable':!![],'enumerable':!![],'writable':!![],'initializer':function _0x37811a(){return null;}}),_0x5db956=_0x4bb7ec(_0x516822['prototype'],'sf_cells',[_0x17758e],{'configurable':!![],'enumerable':!![],'writable':!![],'initializer':function _0x574933(){return[];}}),_0x4f1291=_0x4bb7ec(_0x516822['prototype'],'tra_compound',[_0x57047b],{'configurable':!![],'enumerable':!![],'writable':!![],'initializer':function _0x5d8f74(){return null;}}),_0x17943b=_0x4bb7ec(_0x516822['prototype'],'sp_frame',[_0x5aec14],{'configurable':!![],'enumerable':!![],'writable':!![],'initializer':function _0x51db73(){return null;}}),_0x22d392=_0x4bb7ec(_0x516822['prototype'],'content',[_0x23eeb7],{'configurable':!![],'enumerable':!![],'writable':!![],'initializer':function _0x2918e3(){return null;}}),_0x1bdce8=_0x4bb7ec(_0x516822['prototype'],'grid',[_0x3b848c],{'configurable':!![],'enumerable':!![],'writable':!![],'initializer':function _0x411226(){return null;}}),_0x4515f5=_0x4bb7ec(_0x516822['prototype'],'idle',[_0x2d37d6],{'configurable':!![],'enumerable':!![],'writable':!![],'initializer':function _0x5bb6d4(){return null;}}),_0x3c2179=_0x4bb7ec(_0x516822['prototype'],'modes',[_0x4b012d],{'configurable':!![],'enumerable':!![],'writable':!![],'initializer':function _0x5a3fe7(){return null;}})),_0x516822))||_0x4dae78));_0x40da1c['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackIdle.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackItem.ts'],function(_0x2d3404){var _0x1bec92,_0x278c7d,_0x550524,_0x5a849c,_0x3b3c70,_0x3f2307,_0x50253b,_0x5518a0,_0x59da5c;return{'setters':[function(_0x695483){_0x1bec92=_0x695483['inheritsLoose'];},function(_0x83e0c3){_0x278c7d=_0x83e0c3['cclegacy'];_0x550524=_0x83e0c3['v2'];_0x5a849c=_0x83e0c3['Node'];_0x3b3c70=_0x83e0c3['js'];_0x3f2307=_0x83e0c3['UITransform'];_0x50253b=_0x83e0c3['_decorator'];_0x5518a0=_0x83e0c3['Component'];},function(_0x3f2cc8){_0x59da5c=_0x3f2cc8['default'];}],'execute':function(){var _0x246655,_0x682b95;_0x278c7d['_RF']['push']({},'23adcHHlfVCSZnJTEQtsTrk','BackpackIdle',undefined);var _0x373b72=_0x50253b,_0x225918=_0x373b72['ccclass'],_0x47d67b=_0x373b72['property'];var _0x1eeba3=_0x550524();var _0x48b116=_0x2d3404('BackpackIdle',(_0x246655=_0x225918('BackpackIdle'),_0x246655(_0x682b95=function(_0x527fab){_0x1bec92(_0x257f59,_0x527fab);function _0x257f59(){var _0x3d361e;for(var _0xe3957a=arguments['length'],_0x25025a=new Array(_0xe3957a),_0x25a564=0x0;_0x25a564<_0xe3957a;_0x25a564++){_0x25025a[_0x25a564]=arguments[_0x25a564];}_0x3d361e=_0x527fab['call']['apply'](_0x527fab,[this]['concat'](_0x25025a))||this;_0x3d361e['_itemWidth']=0x0;_0x3d361e['_itemHandle']=null;_0x3d361e['_itemPos']=[];_0x3d361e['_items']=[];return _0x3d361e;}var _0x31466b=_0x257f59['prototype'];_0x31466b['onLoad']=function _0x3a31a2(){this['node']['on'](_0x5a849c['EventType']['CHILD_ADDED'],this['onChildAdd'],this);this['node']['on'](_0x5a849c['EventType']['CHILD_REMOVED'],this['onChildRemoved'],this);};_0x31466b['onChildAdd']=function _0x2cf047(_0xc00cea){var _0x1b81df=_0xc00cea['getComponent'](_0x59da5c);this['_items']['push'](_0x1b81df);this['updateItemWidth']();this['updateSort']();this['updatePosition']();};_0x31466b['onChildRemoved']=function _0x338f26(_0x2755d8){var _0x2bcad9=_0x2755d8['getComponent'](_0x59da5c);_0x3b3c70['array']['remove'](this['_items'],_0x2bcad9);this['updateItemWidth']();this['updateSort']();this['updatePosition']();};_0x31466b['onItemTouchStart']=function _0x2655e5(_0x48238b,_0x7dc225){var _0x26dc76=_0x48238b['getUILocation'](_0x1eeba3);if(this['contains'](_0x26dc76)){this['_itemHandle']=_0x7dc225;this['_items']['push'](this['_itemHandle']);this['updateItemWidth']();this['updateSort']();this['updatePosition']();}};_0x31466b['onItemTouchMove']=function _0x305656(_0x2f2d15,_0xd66faa){var _0x4e3e80=_0x2f2d15['getUILocation'](_0x1eeba3);if(this['contains'](_0x4e3e80)){if(!this['_itemHandle']){this['_itemHandle']=_0xd66faa;this['_items']['push'](this['_itemHandle']);this['updateItemWidth']();}}else{if(this['_itemHandle']){_0x3b3c70['array']['remove'](this['_items'],this['_itemHandle']);this['_itemHandle']=null;this['updateItemWidth']();}}this['updateSort']();this['updatePosition']();};_0x31466b['onItemTouchEnd']=function _0x5f5471(_0x103e05,_0x17170f){if(this['_itemHandle']){_0x3b3c70['array']['remove'](this['_items'],this['_itemHandle']);this['_itemHandle']=null;this['updateItemWidth']();}this['updateSort']();this['updatePosition']();};_0x31466b['contains']=function _0x5c4e3c(_0x16d09b){var _0x184469=this['node']['getComponent'](_0x3f2307);var _0x276fea=_0x184469['getBoundingBoxToWorld']();return _0x276fea['contains'](_0x16d09b);};_0x31466b['updateItemWidth']=function _0x1cdb8b(){var _0x3ce607=0x0;for(var _0x294060=0x0;_0x294060<this['_items']['length'];_0x294060++){var _0x37d181=this['_items'][_0x294060];_0x3ce607+=_0x37d181['maxX']+0x1;}var _0x3cfa89=this['node']['getComponent'](_0x3f2307);this['_itemWidth']=_0x3cfa89['width']/_0x3ce607;};_0x31466b['updateSort']=function _0x43e4bf(){this['_items']['sort'](function(_0x1a652f,_0x55404e){var _0x4b062b=_0x1a652f['data']['width'];var _0x2208b3=_0x1a652f['node']['x']+(_0x1a652f['maxX']-0x1)*_0x4b062b*0.5;var _0x26c20c=_0x55404e['node']['x']+(_0x55404e['maxX']-0x1)*_0x4b062b*0.5;return _0x2208b3-_0x26c20c;});};_0x31466b['updatePosition']=function _0x22bb65(){var _0x5b61bc=this['node']['getComponent'](_0x3f2307);var _0x1ddc5c=_0x5b61bc['width']*0.5;var _0x125d43=0x0;for(var _0x1efa8b=0x0;_0x1efa8b<this['_items']['length'];_0x1efa8b++){var _0x2c5f2a=this['_items'][_0x1efa8b];this['_itemPos'][_0x1efa8b]=this['_itemWidth']*_0x125d43-_0x1ddc5c;_0x125d43+=_0x2c5f2a['maxX']+0x1;}};_0x31466b['update']=function _0x4ace5b(_0x2f3575){for(var _0x4364af=0x0;_0x4364af<this['_items']['length'];_0x4364af++){var _0xa9472b=this['_items'][_0x4364af];if(this['_itemHandle']==_0xa9472b)continue;var _0x588278=this['_itemPos'][_0x4364af];var _0x5e4898=_0xa9472b['node']['x'];var _0xee2620=0.2;var _0x810687=_0x5e4898+(_0x588278-_0x5e4898)*_0xee2620;_0xa9472b['node']['x']=_0x810687;}};return _0x257f59;}(_0x5518a0))||_0x682b95));_0x278c7d['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackItem.ts',['./rollupPluginModLoBabelHelpers.js','cc','./ResKeeper.ts'],function(_0x340b11){var _0x3769e6,_0x4c8389,_0x2abae4,_0x276772,_0x273cee,_0x4c6a7e,_0x53f152,_0x372471,_0x499fbb,_0x4c6ed8,_0x4b3bff,_0x690e87,_0x59198f;return{'setters':[function(_0x28d5f7){_0x3769e6=_0x28d5f7['applyDecoratedDescriptor'];_0x4c8389=_0x28d5f7['inheritsLoose'];_0x2abae4=_0x28d5f7['initializerDefineProperty'];_0x276772=_0x28d5f7['assertThisInitialized'];_0x273cee=_0x28d5f7['createClass'];},function(_0x259ada){_0x4c6a7e=_0x259ada['cclegacy'];_0x53f152=_0x259ada['Sprite'];_0x372471=_0x259ada['_decorator'];_0x499fbb=_0x259ada['v3'];_0x4c6ed8=_0x259ada['Node'];_0x4b3bff=_0x259ada['UITransform'];_0x690e87=_0x259ada['SpriteFrame'];},function(_0xd7669f){_0x59198f=_0xd7669f['default'];}],'execute':function(){var _0x42d48d,_0x2b3d53,_0x168e15,_0x1711db;_0x4c6a7e['_RF']['push']({},'75a9c0e/rpFHqDEDI955gY4','BackpackItem',undefined);var _0x571961=_0x372471,_0xba86a4=_0x571961['ccclass'],_0x56f8ee=_0x571961['property'];var _0x4b3425=_0x340b11('default',(_0x42d48d=_0x56f8ee(_0x53f152),_0xba86a4(_0x2b3d53=(_0x168e15=function(_0x56bee2){_0x4c8389(_0x4f7796,_0x56bee2);function _0x4f7796(){var _0x4f68f9;for(var _0x5d8794=arguments['length'],_0x1171d2=new Array(_0x5d8794),_0x59b95d=0x0;_0x59b95d<_0x5d8794;_0x59b95d++){_0x1171d2[_0x59b95d]=arguments[_0x59b95d];}_0x4f68f9=_0x56bee2['call']['apply'](_0x56bee2,[this]['concat'](_0x1171d2))||this;_0x2abae4(_0x4f68f9,'icon',_0x1711db,_0x276772(_0x4f68f9));_0x4f68f9['_backpack']=null;_0x4f68f9['_data']=null;_0x4f68f9['_touch_start']=null;_0x4f68f9['_touch_move']=null;_0x4f68f9['_touch_end']=null;_0x4f68f9['_isEquipped']=![];_0x4f68f9['_pos_node']=[];_0x4f68f9['_pos']=[];_0x4f68f9['_maxX']=0x0;_0x4f68f9['_maxY']=0x0;_0x4f68f9['_start_gird_pos']=_0x499fbb();return _0x4f68f9;}var _0x29d479=_0x4f7796['prototype'];_0x29d479['setData']=function _0x5ca643(_0x284ab2,_0x54974a,_0x4e7761){var _0x2353a2=this;this['_data']=_0x54974a;this['_backpack']=_0x284ab2;this['_pos']=_0x54974a['pos'];this['_touch_start']=_0x4e7761['touch_start'];this['_touch_move']=_0x4e7761['touch_move'];this['_touch_end']=_0x4e7761['touch_end'];this['_isEquipped']=![];this['clear']();for(var _0x4fe188=0x0;_0x4fe188<this['_pos']['length'];_0x4fe188++){var _0x213e5c=this['_pos'][_0x4fe188];var _0xf38006=_0x213e5c[0x0];var _0xec1e56=_0x213e5c[0x1];var _0x426961=new _0x4c6ed8(_0xf38006+','+_0xec1e56);_0x426961['setParent'](this['node']);_0x426961['setPosition'](_0xf38006*this['_data']['width'],_0xec1e56*this['_data']['width']);_0x426961['addComponent'](_0x4b3bff)['setContentSize'](this['_data']['width'],this['_data']['width']);_0x426961['on'](_0x4c6ed8['EventType']['TOUCH_START'],this['onTouchStart'],this);_0x426961['on'](_0x4c6ed8['EventType']['TOUCH_MOVE'],this['onTouchMove'],this);_0x426961['on'](_0x4c6ed8['EventType']['TOUCH_END'],this['onTouchEnd'],this);_0x426961['on'](_0x4c6ed8['EventType']['TOUCH_CANCEL'],this['onTouchEnd'],this);this['_pos_node']['push'](_0x426961);if(this['_maxX']==null||this['_maxX']<_0xf38006){this['_maxX']=_0xf38006;}if(this['_maxY']==null||this['_maxY']<_0xec1e56){this['_maxY']=_0xec1e56;}}if(this['_data']['type']==0x0){var _0x37a55c='/textures/weapon/'+this['_data']['path']+'/spriteFrame';this['asyncLoadBundleRes']('bundleMain',_0x37a55c,_0x690e87)['then'](function(_0x417a87){return _0x2353a2['icon']['spriteFrame']=_0x417a87;});}else if(this['_data']['type']==0x1){var _0x582db1='/textures/backpack/ui_cell1/spriteFrame';this['asyncLoadBundleRes']('bundleMain',_0x582db1,_0x690e87)['then'](function(_0x467cc8){for(var _0x1b9a55=0x0;_0x1b9a55<_0x2353a2['_pos_node']['length'];_0x1b9a55++){var _0x431330=_0x2353a2['_pos_node'][_0x1b9a55];var _0x43b382=_0x431330['getComponent'](_0x53f152);if(_0x43b382==null){_0x43b382=_0x431330['addComponent'](_0x53f152);}_0x43b382['spriteFrame']=_0x467cc8;}});}var _0x4cd986=this['_data']['width']*(this['_maxX']+0x1);var _0x3395f8=this['_data']['width']*(this['_maxY']+0x1);var _0x3f812a=this['node']['getComponent'](_0x4b3bff);for(var _0x2ec35b=0x1;_0x2ec35b<=this['_maxX'];_0x2ec35b++){_0x3f812a['anchorX']-=_0x3f812a['anchorX']*0.5;}for(var _0x3495cd=0x1;_0x3495cd<=this['_maxY'];_0x3495cd++){_0x3f812a['anchorY']-=_0x3f812a['anchorY']*0.5;}_0x3f812a['setContentSize'](_0x4cd986,_0x3395f8);};_0x29d479['clear']=function _0x1d059f(){for(var _0x32cacf=this['_pos_node']['length']-0x1;_0x32cacf>=0x0;_0x32cacf--){this['_pos_node'][_0x32cacf]['destroy']();}this['_pos_node']['length']=0x0;this['icon']['spriteFrame']=null;};_0x29d479['equipped']=function _0x30fa99(_0x12edfc,_0x1c0c0b){this['_isEquipped']=!![];this['_pos_node']['forEach'](function(_0x234b5c){return _0x234b5c['opacity']=0x0;});var _0x475706=this['_backpack']['gridPosToWorldPos'](_0x1c0c0b);this['node']['setParent'](_0x12edfc);this['node']['setWorldPosition'](_0x475706['x'],_0x475706['y'],0x1);};_0x29d479['unequipped']=function _0x250cdb(_0x381b23){this['_isEquipped']=![];this['_pos_node']['forEach'](function(_0x4a68e6){return _0x4a68e6['opacity']=0xff;});var _0x55d18a=this['node']['position']['x'];var _0x305508=-this['_maxY']*this['_data']['width']*0.5;this['node']['setPosition'](_0x55d18a,_0x305508);this['node']['setParent'](_0x381b23);};_0x29d479['levelup']=function _0x563025(){this['_data']['level']++;};_0x29d479['onEnable']=function _0x18d7e2(){};_0x29d479['onDisable']=function _0x8a08bd(){};_0x29d479['onTouchStart']=function _0x3340eb(_0x5d3c32){this['icon']['node']['opacity']=0x64;this['_isEquipped']&&this['_pos_node']['forEach'](function(_0xf52695){return _0xf52695['opacity']=0xff;});this['_backpack']['worldPosToGirdPos'](this['node']['worldPosition'],this['_start_gird_pos']);this['_touch_start']&&this['_touch_start'](_0x5d3c32,this);};_0x29d479['onTouchMove']=function _0xdbc4b7(_0xc1f9cb){this['_touch_move']&&this['_touch_move'](_0xc1f9cb,this);};_0x29d479['onTouchEnd']=function _0x3529a0(_0x30b3dd){this['icon']['node']['opacity']=0xff;this['_isEquipped']&&this['_pos_node']['forEach'](function(_0x1d341d){return _0x1d341d['opacity']=0x0;});this['_touch_end']&&this['_touch_end'](_0x30b3dd,this);};_0x273cee(_0x4f7796,[{'key':'data','get':function _0x29a51a(){return this['_data'];}},{'key':'isEquipped','get':function _0x584423(){return this['_isEquipped'];},'set':function _0x15364e(_0x3111b4){this['_isEquipped']=_0x3111b4;}},{'key':'pos','get':function _0x572c26(){return this['_pos'];}},{'key':'maxX','get':function _0x5b77df(){return this['_maxX'];}},{'key':'maxY','get':function _0x292a93(){return this['_maxY'];}},{'key':'start_gird_pos','get':function _0x40a609(){return this['_start_gird_pos'];}}]);return _0x4f7796;}(_0x59198f),_0x1711db=_0x3769e6(_0x168e15['prototype'],'icon',[_0x42d48d],{'configurable':!![],'enumerable':!![],'writable':!![],'initializer':function _0x2b9fbd(){return null;}}),_0x168e15))||_0x2b3d53));_0x4c6a7e['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackMode.ts',['cc'],function(_0x2972db){var _0x46d153;return{'setters':[function(_0x4fbea3){_0x46d153=_0x4fbea3['cclegacy'];}],'execute':function(){_0x46d153['_RF']['push']({},'90c59XJbpFJQauNJWZ2/6UH','BackpackMode',undefined);var _0x3f926e=_0x2972db('BackpackMode',function(){function _0x315533(_0x135e5d){this['_backpack']=null;this['_backpack']=_0x135e5d;}var _0x532ad5=_0x315533['prototype'];_0x532ad5['enter']=function _0x395b68(){};_0x532ad5['quit']=function _0x4ce6a4(){};_0x532ad5['onItemTouchStart']=function _0x5ba39b(_0x8e75a6,_0x46f18f){};_0x532ad5['onItemTouchMove']=function _0x4d7f20(_0x5ae4c5,_0x1bd27f){};_0x532ad5['onItemTouchEnd']=function _0x4eea7e(_0x1a746f,_0x51d695){};return _0x315533;}());_0x46d153['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackModeGrid.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackMode.ts','./Backpack.ts','./BackpackItem.ts'],function(_0x1471f5){var _0x15edf4,_0x2a4f2e,_0x28b06e,_0x1873bc,_0x27623d,_0x322ce0,_0x421185,_0x5d66f9,_0x5a88ef,_0x2b9871;return{'setters':[function(_0x5ce2c6){_0x15edf4=_0x5ce2c6['inheritsLoose'];},function(_0x5c7bbc){_0x2a4f2e=_0x5c7bbc['cclegacy'];_0x28b06e=_0x5c7bbc['v2'];_0x1873bc=_0x5c7bbc['v3'];_0x27623d=_0x5c7bbc['tween'];_0x322ce0=_0x5c7bbc['view'];_0x421185=_0x5c7bbc['UITransform'];},function(_0x57b02d){_0x5d66f9=_0x57b02d['BackpackMode'];},function(_0x3f94b9){_0x5a88ef=_0x3f94b9['Tag'];},function(_0x229bed){_0x2b9871=_0x229bed['default'];}],'execute':function(){_0x2a4f2e['_RF']['push']({},'c5cd1FL/w5MP6cKMtm6EMt+','BackpackModeGrid',undefined);var _0x13f3e4=_0x28b06e();var _0x47fb35=_0x1873bc();var _0x179bc5=_0x1873bc();var _0x1a00a9=_0x1471f5('BackpackModeGrid',function(_0x129351){_0x15edf4(_0x1cdb1d,_0x129351);function _0x1cdb1d(){var _0x4f5d09;for(var _0xbff2b8=arguments['length'],_0x2679fe=new Array(_0xbff2b8),_0x13a0b5=0x0;_0x13a0b5<_0xbff2b8;_0x13a0b5++){_0x2679fe[_0x13a0b5]=arguments[_0x13a0b5];}_0x4f5d09=_0x129351['call']['apply'](_0x129351,[this]['concat'](_0x2679fe))||this;_0x4f5d09['_gird_points']=[];_0x4f5d09['_item_relevance']=[];return _0x4f5d09;}var _0x25e8ba=_0x1cdb1d['prototype'];_0x25e8ba['enter']=function _0x5647d4(){for(var _0x19dab3=0x0;_0x19dab3<this['_backpack']['gird_points_unlock']['length'];_0x19dab3++){this['_gird_points'][_0x19dab3]=[];for(var _0x4a34a6=0x0;_0x4a34a6<this['_backpack']['gird_points_unlock'][_0x19dab3]['length'];_0x4a34a6++){this['_gird_points'][_0x19dab3][_0x4a34a6]=null;}}var _0x3bb3ed=this['_backpack']['itemX']*this['_backpack']['itemY'];for(var _0x400113=0x0;_0x400113<this['_backpack']['gird_points_unlock']['length'];_0x400113++){for(var _0x339fbd=0x0;_0x339fbd<this['_backpack']['gird_points_unlock'][_0x400113]['length'];_0x339fbd++){if(this['_backpack']['gird_points_unlock'][_0x400113][_0x339fbd]&&this['_gird_points'][_0x400113][_0x339fbd]==null){var _0x6cef76={'type':0x1,'width':this['_backpack']['itemWidth'],'pos':this['getGirdPos'](_0x339fbd,_0x400113)};var _0xdc278a=this['_backpack']['generateItemAddition'](_0x6cef76);_0xdc278a['equipped'](this['_backpack']['grid'],_0x47fb35['set'](_0x339fbd,_0x400113));_0xdc278a['node']['setSiblingIndex'](_0x3bb3ed);this['_backpack']['setPointState'](_0x47fb35['set'](_0x339fbd,_0x400113),_0xdc278a['pos'],this['_gird_points'],_0xdc278a);}}}this['updateUIEnter']();};_0x25e8ba['getGirdPos']=function _0x118680(_0x50f1eb,_0x2dcf07){var _0x378dc1=this['_backpack']['gird_points_unlock'];var _0x3841e7=[];var _0x243471=function _0x229647(_0x392841,_0x24bdf3){var _0x5e5f63;var _0x377a78=_0x392841-_0x50f1eb;var _0x5209bd=_0x24bdf3-_0x2dcf07;var _0xb24819=_0x3841e7['find'](function(_0x2c4fdf){return _0x2c4fdf[0x0]==_0x377a78&&_0x2c4fdf[0x1]==_0x5209bd;});if(_0xb24819)return;if((_0x5e5f63=_0x378dc1[_0x24bdf3])!=null&&_0x5e5f63[_0x392841]){_0x3841e7['push']([_0x377a78,_0x5209bd]);_0x229647(_0x392841+0x1,_0x24bdf3);_0x229647(_0x392841,_0x24bdf3+0x1);_0x229647(_0x392841-0x1,_0x24bdf3);_0x229647(_0x392841,_0x24bdf3-0x1);}};_0x243471(_0x50f1eb,_0x2dcf07);return _0x3841e7;};_0x25e8ba['quit']=function _0x519218(){var _0x1e59f9=this['_backpack']['getNodeList'](_0x5a88ef['item']);for(var _0x34b1a8=_0x1e59f9['length']-0x1;_0x34b1a8>=0x0;_0x34b1a8--){var _0x17d347=_0x1e59f9[_0x34b1a8];var _0xdc2037=_0x17d347['getComponent'](_0x2b9871);if(_0xdc2037['data']['type']==0x1&&_0xdc2037['isEquipped']){this['_backpack']['put'](_0x5a88ef['item'],_0x17d347);}}this['updateUIQuit']();};_0x25e8ba['onItemTouchStart']=function _0x39e776(_0x1b8217,_0x4cca5a){var _0x1c4359=this;var _0x13c017=_0x4cca5a['start_gird_pos'];this['_backpack']['setPointState'](_0x13c017,_0x4cca5a['pos'],this['_backpack']['gird_points_unlock'],0x0);var _0x322167=_0x4cca5a['node']['getWorldPosition'](_0x47fb35);_0x4cca5a['node']['setParent'](this['_backpack']['grid']);_0x4cca5a['node']['setWorldPosition'](_0x322167['x'],_0x322167['y'],0x0);this['updateUI']();_0x4cca5a['pos']['forEach'](function(_0x32bac7){var _0x93559;var _0x55babd=_0x32bac7[0x0];var _0x3e563b=_0x32bac7[0x1];var _0x4b5d25=(_0x93559=_0x1c4359['_backpack']['gird_points_item'][_0x13c017['y']+_0x3e563b])==null?void 0x0:_0x93559[_0x13c017['x']+_0x55babd];if(_0x4b5d25&&_0x1c4359['_item_relevance']['indexOf'](_0x4b5d25)<0x0){_0x1c4359['_backpack']['worldPosToGirdPos'](_0x4b5d25['node']['worldPosition'],_0x4b5d25['start_gird_pos']);_0x1c4359['_backpack']['setPointState'](_0x13c017,_0x4b5d25['pos'],_0x1c4359['_backpack']['gird_points_item'],null);_0x1c4359['_item_relevance']['push'](_0x4b5d25);}});};_0x25e8ba['onItemTouchMove']=function _0x6a3186(_0x5aba14,_0x3f848d){var _0x4b4312=this;var _0x526dc2=_0x5aba14['getUIDelta'](_0x13f3e4);this['_item_relevance']['forEach'](function(_0xd6697f){_0xd6697f['node']['x']+=_0x526dc2['x'];_0xd6697f['node']['y']+=_0x526dc2['y'];});var _0x2ebd39=_0x3f848d['node']['worldPosition'];var _0x44e51c=this['_backpack']['worldPosToGirdPos'](_0x2ebd39,_0x47fb35);for(var _0x572185=0x0;_0x572185<this['_backpack']['gird_points_unlock']['length'];_0x572185++){for(var _0x31d67a=0x0;_0x31d67a<this['_backpack']['gird_points_unlock'][_0x572185]['length'];_0x31d67a++){if(this['_backpack']['gird_points_unlock'][_0x572185][_0x31d67a]){this['_backpack']['gird_points_sprite'][_0x572185][_0x31d67a]['spriteFrame']=this['_backpack']['sf_cells'][0x0];}else{this['_backpack']['gird_points_sprite'][_0x572185][_0x31d67a]['spriteFrame']=this['_backpack']['sf_cells'][0x2];}}}_0x3f848d['pos']['forEach'](function(_0x558805){var _0x2dd8fe;var _0x5023d2=_0x558805[0x0];var _0x10e8f2=_0x558805[0x1];var _0x326fd3=(_0x2dd8fe=_0x4b4312['_backpack']['gird_points_unlock'][_0x44e51c['y']+_0x10e8f2])==null?void 0x0:_0x2dd8fe[_0x44e51c['x']+_0x5023d2];if(_0x326fd3==undefined||_0x326fd3==0x1)return;var _0x522017=_0x4b4312['_backpack']['gird_points_sprite'][_0x44e51c['y']+_0x10e8f2][_0x44e51c['x']+_0x5023d2];_0x522017['spriteFrame']=_0x4b4312['_backpack']['sf_cells'][0x3];});};_0x25e8ba['onItemTouchEnd']=function _0x26fd92(_0x263635,_0x5e463c){var _0x392f0e=this;var _0x607f0f=_0x5e463c['node']['worldPosition'];var _0x12019f=this['_backpack']['worldPosToGirdPos'](_0x607f0f,_0x47fb35);var _0x262cd3=_0x5e463c['start_gird_pos'];var _0x2df702=_0x5e463c['pos']['findIndex'](function(_0x187dfd){var _0x2b4835;var _0x22d4eb=_0x187dfd[0x0];var _0x52f8ff=_0x187dfd[0x1];var _0x36bbed=(_0x2b4835=_0x392f0e['_backpack']['gird_points_unlock'][_0x12019f['y']+_0x52f8ff])==null?void 0x0:_0x2b4835[_0x12019f['x']+_0x22d4eb];return _0x36bbed==undefined||_0x36bbed==0x1;});if(_0x2df702>=0x0){if(_0x5e463c['isEquipped']){_0x5e463c['equipped'](this['_backpack']['grid'],_0x5e463c['start_gird_pos']);this['_backpack']['setPointState'](_0x262cd3,_0x5e463c['pos'],this['_backpack']['gird_points_unlock'],0x1);this['_item_relevance']['forEach'](function(_0x4fde4a){var _0x300ed2=_0x4fde4a['start_gird_pos'];_0x4fde4a['equipped'](_0x392f0e['_backpack']['grid'],_0x300ed2);_0x392f0e['_backpack']['setPointState'](_0x300ed2,_0x4fde4a['pos'],_0x392f0e['_backpack']['gird_points_item'],_0x4fde4a);});}else{_0x5e463c['unequipped'](this['_backpack']['idle']['node']);}}else{_0x5e463c['equipped'](this['_backpack']['grid'],_0x12019f);this['_backpack']['setPointState'](_0x12019f,_0x5e463c['pos'],this['_backpack']['gird_points_unlock'],0x1);this['_item_relevance']['forEach'](function(_0x3189bc){var _0x4134a2=_0x3189bc['node']['worldPosition'];var _0x2ad670=_0x392f0e['_backpack']['worldPosToGirdPos'](_0x4134a2,_0x179bc5);_0x3189bc['equipped'](_0x392f0e['_backpack']['grid'],_0x2ad670);_0x392f0e['_backpack']['setPointState'](_0x2ad670,_0x3189bc['pos'],_0x392f0e['_backpack']['gird_points_item'],_0x3189bc);});}this['_item_relevance']['length']=0x0;this['updateUI']();};_0x25e8ba['updateUI']=function _0x193339(){for(var _0x4b0b4e=0x0;_0x4b0b4e<this['_backpack']['gird_points_unlock']['length'];_0x4b0b4e++){for(var _0x172af3=0x0;_0x172af3<this['_backpack']['gird_points_unlock'][_0x4b0b4e]['length'];_0x172af3++){var _0x5b460f=this['_backpack']['gird_points_sprite'][_0x4b0b4e][_0x172af3];if(this['_backpack']['gird_points_unlock'][_0x4b0b4e][_0x172af3]){_0x5b460f['spriteFrame']=this['_backpack']['sf_cells'][0x0];}else{_0x5b460f['spriteFrame']=this['_backpack']['sf_cells'][0x2];}_0x5b460f['node']['active']=!![];}}};_0x25e8ba['updateUIEnter']=function _0x35fcaf(){this['_backpack']['content']['opacity']=0x64;for(var _0x31b596=0x0;_0x31b596<this['_backpack']['gird_points_unlock']['length'];_0x31b596++){for(var _0x1497ae=0x0;_0x1497ae<this['_backpack']['gird_points_unlock'][_0x31b596]['length'];_0x1497ae++){var _0x2ddc2e=this['_backpack']['gird_points_sprite'][_0x31b596][_0x1497ae];if(!this['_backpack']['gird_points_unlock'][_0x31b596][_0x1497ae]){_0x2ddc2e['node']['active']=!![];_0x2ddc2e['node']['opacity']=0x0;_0x27623d(_0x2ddc2e['node'])['to'](0.1,{'opacity':0xff})['start']();}}}var _0x199de1=this['_backpack']['itemX']-0x1,_0x20d220=0x0,_0x3de53d=this['_backpack']['itemY']-0x1,_0x80c41a=0x0;this['updateFrame'](_0x199de1,_0x20d220,_0x3de53d,_0x80c41a);};_0x25e8ba['updateUIQuit']=function _0x32f087(){this['_backpack']['content']['opacity']=0xff;var _0x2027f9,_0x5487d8,_0x4fb6a4,_0x48d514;for(var _0x292088=0x0;_0x292088<this['_backpack']['gird_points_unlock']['length'];_0x292088++){for(var _0xa289ec=0x0;_0xa289ec<this['_backpack']['gird_points_unlock'][_0x292088]['length'];_0xa289ec++){var _0x3f08c6=this['_backpack']['gridPosToWorldPos'](_0xa289ec,_0x292088);var _0x214b1e=this['_backpack']['gird_points_sprite'][_0x292088][_0xa289ec];if(this['_backpack']['gird_points_unlock'][_0x292088][_0xa289ec]){if(_0x2027f9==null||_0x2027f9<_0xa289ec){_0x2027f9=_0xa289ec;}if(_0x5487d8==null||_0x5487d8>_0xa289ec){_0x5487d8=_0xa289ec;}if(_0x4fb6a4==null||_0x4fb6a4<_0x292088){_0x4fb6a4=_0x292088;}if(_0x48d514==null||_0x48d514>_0x292088){_0x48d514=_0x292088;}_0x214b1e['spriteFrame']=this['_backpack']['sf_cells'][0x0];}else{_0x214b1e['spriteFrame']=this['_backpack']['sf_cells'][0x2];}_0x214b1e['node']['active']=!!this['_backpack']['gird_points_unlock'][_0x292088][_0xa289ec];}}this['updateFrame'](_0x2027f9,_0x5487d8,_0x4fb6a4,_0x48d514);};_0x25e8ba['updateFrame']=function _0x4521ef(_0x3cbd8c,_0x4d4bd4,_0x1e5a7f,_0x3ff95d){var _0x49ffd4=(_0x3cbd8c-_0x4d4bd4+0x1)*this['_backpack']['itemWidth'];var _0x3353a9=(_0x1e5a7f-_0x3ff95d+0x1)*this['_backpack']['itemWidth'];var _0x3e506f=0x5;var _0x2652b1=_0x322ce0['getVisibleSize']();var _0x474a39=_0x2652b1['width']*0.5;var _0x2b1164=_0x2652b1['height']*0.5;var _0x5907c1=_0x4d4bd4*this['_backpack']['itemWidth']+(_0x474a39-this['_backpack']['widthHalf']);var _0x13d3a2=_0x3ff95d*this['_backpack']['itemWidth']+(_0x2b1164-this['_backpack']['heightHalf']);var _0x5821fd=_0x474a39-(_0x5907c1+_0x49ffd4*0.5);var _0x7ed3ba=_0x2b1164-(_0x13d3a2+_0x3353a9*0.5);this['_backpack']['content']['setWorldPosition'](_0x474a39+_0x5821fd,_0x2b1164+_0x7ed3ba+0x64,0x0);{var _0x310d12=this['_backpack']['sp_frame']['node'];var _0x1bc56a=_0x310d12['getComponent'](_0x421185);var _0x298e9d=_0x49ffd4+this['_backpack']['frame_offset_max']['width']+this['_backpack']['frame_offset_min']['width']+_0x3e506f*0x2;var _0x253373=_0x3353a9+this['_backpack']['frame_offset_max']['height']+this['_backpack']['frame_offset_min']['height']+_0x3e506f*0x2;var _0x1ce39c=this['_backpack']['gridPosToWorldPos'](_0x4d4bd4,_0x3ff95d);var _0x1d1025=_0x1ce39c['x']-this['_backpack']['itemWidth']*0.5-this['_backpack']['frame_offset_min']['width']+_0x3e506f;var _0x3e499e=_0x1ce39c['y']-this['_backpack']['itemWidth']*0.5-this['_backpack']['frame_offset_min']['height']+_0x3e506f;_0x27623d(_0x310d12)['to'](0.1,{'worldPosition':_0x1873bc(_0x1d1025,_0x3e499e,0x0)})['start']();_0x27623d(_0x1bc56a)['to'](0.1,{'width':_0x298e9d,'height':_0x253373})['start']();var _0x30dc22=this['_backpack']['grid'];_0x27623d(_0x30dc22)['to'](0.1,{'worldPosition':this['_backpack']['content']['worldPosition']})['start']();}};return _0x1cdb1d;}(_0x5d66f9));_0x2a4f2e['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackModeWeapon.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackMode.ts','./Backpack.ts'],function(_0xf9d4d0){var _0x140f49,_0xcb1381,_0x4de60d,_0x432abd,_0x1832bf,_0x21d8ed,_0x3a9565,_0x51110c,_0x5b8bca,_0x4a30c7;return{'setters':[function(_0x426d10){_0x140f49=_0x426d10['inheritsLoose'];},function(_0x4f4884){_0xcb1381=_0x4f4884['cclegacy'];_0x4de60d=_0x4f4884['v2'];_0x432abd=_0x4f4884['v3'];_0x1832bf=_0x4f4884['Vec3'];_0x21d8ed=_0x4f4884['math'];_0x3a9565=_0x4f4884['view'];_0x51110c=_0x4f4884['UITransform'];},function(_0x124bf7){_0x5b8bca=_0x124bf7['BackpackMode'];},function(_0x566b2a){_0x4a30c7=_0x566b2a['Tag'];}],'execute':function(){_0xcb1381['_RF']['push']({},'61062dy9ctDC4JBIotFRytf','BackpackModeWeapon',undefined);var _0x253163=_0x4de60d();var _0x1e1aff=_0x432abd();var _0x15e7ec=_0x432abd();var _0x4f3abb=_0xf9d4d0('BackpackModeWeapon',function(_0x5c7fab){_0x140f49(_0x4a6155,_0x5c7fab);function _0x4a6155(_0x150fa5){var _0x1a2bbe;_0x1a2bbe=_0x5c7fab['call'](this,_0x150fa5)||this;_0x1a2bbe['_item_compound']=null;_0x1a2bbe['_backpack']=_0x150fa5;_0x1a2bbe['updateUI']();return _0x1a2bbe;}var _0x117821=_0x4a6155['prototype'];_0x117821['enter']=function _0xe26e47(){};_0x117821['quit']=function _0x1abf2d(){};_0x117821['onItemTouchStart']=function _0x39aebc(_0x219988,_0xac2e7){var _0x30596c=_0xac2e7['start_gird_pos'];this['_backpack']['setPointState'](_0x30596c,_0xac2e7['pos'],this['_backpack']['gird_points_item'],null);var _0x110d0f=_0xac2e7['node']['getWorldPosition'](_0x1e1aff);_0xac2e7['node']['setParent'](this['_backpack']['grid']);_0xac2e7['node']['setWorldPosition'](_0x110d0f['x'],_0x110d0f['y'],0x0);_0x45feb8:for(var _0x29c187=0x0;_0x29c187<this['_backpack']['gird_points_item']['length'];_0x29c187++){for(var _0x2d5128=0x0;_0x2d5128<this['_backpack']['gird_points_item'][_0x29c187]['length'];_0x2d5128++){var _0x3674ea=this['_backpack']['gird_points_item'][_0x29c187][_0x2d5128];if((_0x3674ea==null?void 0x0:_0x3674ea['data']['model'])==_0xac2e7['data']['model']&&(_0x3674ea==null?void 0x0:_0x3674ea['data']['level'])==_0xac2e7['data']['level']&&_0x3674ea!=_0xac2e7){this['_item_compound']=_0x3674ea;this['updateItemCompound'](_0xac2e7);break _0x45feb8;}}}};_0x117821['onItemTouchMove']=function _0x3702ce(_0x19bd76,_0x2bc3a1){var _0xc691f7=this;var _0x137320=_0x2bc3a1['node']['worldPosition'];var _0x49b08d=this['_backpack']['worldPosToGirdPos'](_0x137320,_0x15e7ec);for(var _0xcf6300=0x0;_0xcf6300<this['_backpack']['gird_points_unlock']['length'];_0xcf6300++){for(var _0x2ba091=0x0;_0x2ba091<this['_backpack']['gird_points_unlock'][_0xcf6300]['length'];_0x2ba091++){if(this['_backpack']['gird_points_unlock'][_0xcf6300][_0x2ba091]){this['_backpack']['gird_points_sprite'][_0xcf6300][_0x2ba091]['spriteFrame']=this['_backpack']['sf_cells'][0x0];}else{this['_backpack']['gird_points_sprite'][_0xcf6300][_0x2ba091]['spriteFrame']=this['_backpack']['sf_cells'][0x2];}}}_0x2bc3a1['pos']['forEach'](function(_0x3fd8f6){var _0xfdd977;var _0x5b0974=_0x3fd8f6[0x0];var _0x26ff31=_0x3fd8f6[0x1];var _0x366ad5=(_0xfdd977=_0xc691f7['_backpack']['gird_points_unlock'][_0x49b08d['y']+_0x26ff31])==null?void 0x0:_0xfdd977[_0x49b08d['x']+_0x5b0974];if(_0x366ad5==undefined||_0x366ad5==0x0)return;var _0x4d3de3=_0xc691f7['_backpack']['gird_points_sprite'][_0x49b08d['y']+_0x26ff31][_0x49b08d['x']+_0x5b0974];_0x4d3de3['spriteFrame']=_0xc691f7['_backpack']['sf_cells'][0x1];});this['_item_compound']&&this['updateItemCompound'](_0x2bc3a1);};_0x117821['onItemTouchEnd']=function _0x45ef49(_0x2d6dac,_0x164720){var _0x257cc0=this;var _0x13fc2c=_0x164720['node']['worldPosition'];var _0x2bfc71=this['_backpack']['worldPosToGirdPos'](_0x13fc2c,_0x15e7ec);var _0x163deb=_0x164720['start_gird_pos'];var _0x3c1792=_0x164720['pos']['findIndex'](function(_0x19f207){var _0x443ed3;var _0x35902f=_0x19f207[0x0];var _0x1d8ab8=_0x19f207[0x1];var _0x3b9b29=(_0x443ed3=_0x257cc0['_backpack']['gird_points_unlock'][_0x2bfc71['y']+_0x1d8ab8])==null?void 0x0:_0x443ed3[_0x2bfc71['x']+_0x35902f];return _0x3b9b29==undefined||_0x3b9b29==0x0;});if(_0x3c1792>=0x0){if(_0x164720['isEquipped']){var _0x1040c2=_0x2d6dac['getUILocation'](_0x253163);if(this['_backpack']['idle']['contains'](_0x1040c2)){_0x164720['unequipped'](this['_backpack']['idle']['node']);}else{_0x164720['equipped'](this['_backpack']['grid'],_0x164720['start_gird_pos']);this['_backpack']['setPointState'](_0x163deb,_0x164720['pos'],this['_backpack']['gird_points_item'],_0x164720);}}else{_0x164720['unequipped'](this['_backpack']['idle']['node']);}}else{var _0x2a729a=_0x164720['pos']['filter'](function(_0x2bb5b0){var _0x3f5111;var _0x5f4ac5=_0x2bb5b0[0x0];var _0x3c07d7=_0x2bb5b0[0x1];return(_0x3f5111=_0x257cc0['_backpack']['gird_points_item'][_0x2bfc71['y']+_0x3c07d7])==null?void 0x0:_0x3f5111[_0x2bfc71['x']+_0x5f4ac5];})['map'](function(_0x536852){var _0x5dffb1;var _0x18ccfe=_0x536852[0x0];var _0xb0c9=_0x536852[0x1];return(_0x5dffb1=_0x257cc0['_backpack']['gird_points_item'][_0x2bfc71['y']+_0xb0c9])==null?void 0x0:_0x5dffb1[_0x2bfc71['x']+_0x18ccfe];});var _0x3fc79c=_0x2a729a['find'](function(_0x3cd902){return _0x3cd902==_0x257cc0['_item_compound'];});if(_0x3fc79c){this['_backpack']['put'](_0x4a30c7['item'],_0x164720['node']);_0x3fc79c['levelup']();}else{_0x2a729a['forEach'](function(_0x8ae73e){var _0x4718b2=_0x8ae73e['node']['worldPosition'];var _0x4204be=_0x257cc0['_backpack']['worldPosToGirdPos'](_0x4718b2,_0x1e1aff);_0x257cc0['_backpack']['setPointState'](_0x4204be,_0x8ae73e['pos'],_0x257cc0['_backpack']['gird_points_item'],null);_0x8ae73e['unequipped'](_0x257cc0['_backpack']['idle']['node']);});_0x164720['equipped'](this['_backpack']['grid'],_0x2bfc71);this['_backpack']['setPointState'](_0x2bfc71,_0x164720['pos'],this['_backpack']['gird_points_item'],_0x164720);}}this['_item_compound']=null;this['_backpack']['tra_compound']['node']['active']=![];this['updateUI']();};_0x117821['updateItemCompound']=function _0x9d187e(_0x4943f7){if(this['_item_compound']==null){return;}var _0x27ed27=this['_item_compound']['icon']['node']['worldPosition'];var _0x56a528=_0x4943f7['icon']['node']['worldPosition'];var _0x32dbb7=_0x1832bf['subtract'](_0x1e1aff,_0x56a528,_0x27ed27);var _0x291279=Math['atan2'](_0x32dbb7['y'],_0x32dbb7['x']);this['_backpack']['tra_compound']['node']['active']=!![];this['_backpack']['tra_compound']['node']['setWorldPosition'](_0x27ed27);this['_backpack']['tra_compound']['node']['angle']=_0x21d8ed['toDegree'](_0x291279)-0x5a;this['_backpack']['tra_compound']['height']=_0x32dbb7['length']();};_0x117821['updateUI']=function _0x3c1cf7(){var _0x4e47a9,_0x118ec9,_0x5d6a2f,_0x1ca191;for(var _0x2f0e3c=0x0;_0x2f0e3c<this['_backpack']['gird_points_unlock']['length'];_0x2f0e3c++){for(var _0x1bfc1d=0x0;_0x1bfc1d<this['_backpack']['gird_points_unlock'][_0x2f0e3c]['length'];_0x1bfc1d++){var _0x283794=this['_backpack']['gird_points_sprite'][_0x2f0e3c][_0x1bfc1d];if(this['_backpack']['gird_points_unlock'][_0x2f0e3c][_0x1bfc1d]){if(_0x4e47a9==null||_0x4e47a9<_0x1bfc1d){_0x4e47a9=_0x1bfc1d;}if(_0x118ec9==null||_0x118ec9>_0x1bfc1d){_0x118ec9=_0x1bfc1d;}if(_0x5d6a2f==null||_0x5d6a2f<_0x2f0e3c){_0x5d6a2f=_0x2f0e3c;}if(_0x1ca191==null||_0x1ca191>_0x2f0e3c){_0x1ca191=_0x2f0e3c;}_0x283794['spriteFrame']=this['_backpack']['sf_cells'][0x0];}else{_0x283794['spriteFrame']=this['_backpack']['sf_cells'][0x2];}_0x283794['node']['active']=!!this['_backpack']['gird_points_unlock'][_0x2f0e3c][_0x1bfc1d];}}this['updateFrame'](_0x4e47a9,_0x118ec9,_0x5d6a2f,_0x1ca191);};_0x117821['updateFrame']=function _0x2e61e3(_0x3cff2d,_0x25847a,_0x27f3ab,_0x1da9b2){var _0xdd4f77=(_0x3cff2d-_0x25847a+0x1)*this['_backpack']['itemWidth'];var _0x2af7cd=(_0x27f3ab-_0x1da9b2+0x1)*this['_backpack']['itemWidth'];var _0x431453=0x5;var _0x2afccf=_0x3a9565['getVisibleSize']();var _0x524ceb=_0x2afccf['width']*0.5;var _0x4d136c=_0x2afccf['height']*0.5;var _0x2c1771=_0x25847a*this['_backpack']['itemWidth']+(_0x524ceb-this['_backpack']['widthHalf']);var _0x4896d1=_0x1da9b2*this['_backpack']['itemWidth']+(_0x4d136c-this['_backpack']['heightHalf']);var _0x36aadf=_0x524ceb-(_0x2c1771+_0xdd4f77*0.5);var _0x4436b1=_0x4d136c-(_0x4896d1+_0x2af7cd*0.5);this['_backpack']['content']['setWorldPosition'](_0x524ceb+_0x36aadf,_0x4d136c+_0x4436b1+0x64,0x0);{var _0x505c21=this['_backpack']['sp_frame']['node'];var _0x154f65=_0x505c21['getComponent'](_0x51110c);var _0x194e4a=_0xdd4f77+this['_backpack']['frame_offset_max']['width']+this['_backpack']['frame_offset_min']['width']+_0x431453*0x2;var _0x4c8968=_0x2af7cd+this['_backpack']['frame_offset_max']['height']+this['_backpack']['frame_offset_min']['height']+_0x431453*0x2;var _0x4d330a=this['_backpack']['gridPosToWorldPos'](_0x25847a,_0x1da9b2);var _0x42a9e9=_0x4d330a['x']-this['_backpack']['itemWidth']*0.5-this['_backpack']['frame_offset_min']['width']+_0x431453;var _0x161860=_0x4d330a['y']-this['_backpack']['itemWidth']*0.5-this['_backpack']['frame_offset_min']['height']+_0x431453;_0x505c21['setWorldPosition'](_0x42a9e9,_0x161860,0x0);_0x154f65['setContentSize'](_0x194e4a,_0x4c8968);var _0x85781b=this['_backpack']['grid'];_0x85781b['setWorldPosition'](this['_backpack']['content']['worldPosition']);}};return _0x4a6155;}(_0x5b8bca));_0xcb1381['_RF']['pop']();}};});System['register']('chunks:///_virtual/bundleMain',['./Backpack.ts','./Menu.ts','./BackpackIdle.ts','./BackpackItem.ts','./BackpackMode.ts','./BackpackModeGrid.ts','./BackpackModeWeapon.ts'],function(){return{'setters':[null,null,null,null,null,null,null],'execute':function(){}};});System['register']('chunks:///_virtual/Menu.ts',['./rollupPluginModLoBabelHelpers.js','cc','./UIBase.ts','./UIMgr.ts','./DefineUI.ts'],function(_0xcfcdad){var _0x5ca94b,_0x439e52,_0x10094b,_0xcae816,_0x214d96,_0x27f3f9;return{'setters':[function(_0x30c67e){_0x5ca94b=_0x30c67e['inheritsLoose'];},function(_0xf16c){_0x439e52=_0xf16c['cclegacy'];_0x10094b=_0xf16c['_decorator'];},function(_0x2f4521){_0xcae816=_0x2f4521['default'];},function(_0x41dceb){_0x214d96=_0x41dceb['UIFacade'];},function(_0x5ca2b7){_0x27f3f9=_0x5ca2b7['UI'];}],'execute':function(){var _0xee10ba,_0x51bd64;_0x439e52['_RF']['push']({},'928b6dqLRxG26cO3Y0yo9Vh','Menu',undefined);var _0x5e2905=_0x10094b,_0x3982b7=_0x5e2905['ccclass'],_0x42cc09=_0x5e2905['property'];var _0x53f950=_0xcfcdad('Menu',(_0xee10ba=_0x3982b7('Menu'),_0xee10ba(_0x51bd64=function(_0xc2b326){_0x5ca94b(_0xd561bb,_0xc2b326);function _0xd561bb(){return _0xc2b326['apply'](this,arguments)||this;}var _0x163363=_0xd561bb['prototype'];_0x163363['start']=function _0x1c12dd(){};_0x163363['onClickBackpack']=function _0x2fc7c5(_0x53792f){_0x214d96['open'](_0x27f3f9['Type']['Backpack']);this['close']();};_0x163363['onClickBattle']=function _0x1c2afa(_0x57178c){_0x214d96['open'](_0x27f3f9['Type']['Battle']);this['close']();};_0x163363['onClickTip']=function _0x144a2d(){_0x214d96['showToast']('TIPS测试');};return _0xd561bb;}(_0xcae816))||_0x51bd64));_0x439e52['_RF']['pop']();}};});(function(_0x131280){var _0x80b825=function(){var _0x5531a4=!![];return function(_0x43b435,_0x39ec9e){var _0x5addc8=_0x5531a4?function(){if(_0x39ec9e){var _0x4241a3=_0x39ec9e['apply'](_0x43b435,arguments);_0x39ec9e=null;return _0x4241a3;}}:function(){};_0x5531a4=![];return _0x5addc8;};}();(function(){_0x80b825(this,function(){var _0x284cf9=new RegExp('function\x20*\x5c(\x20*\x5c)');var _0x9a51d1=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i');var _0x55e6d1=vxpFZ('init');if(!_0x284cf9['test'](_0x55e6d1+'chain')||!_0x9a51d1['test'](_0x55e6d1+'input')){_0x55e6d1('0');}else{vxpFZ();}})();}());_0x131280('virtual:///prerequisite-imports/bundleMain','chunks:///_virtual/bundleMain');}(function(_0x2ce00d,_0x29398c){System['register'](_0x2ce00d,[_0x29398c],function(_0x31da73,_0x27f7a1){return{'setters':[function(_0x37276f){var _0x2453fd={};for(var _0x7dd7bf in _0x37276f){if(_0x7dd7bf!=='default'&&_0x7dd7bf!=='__esModule')_0x2453fd[_0x7dd7bf]=_0x37276f[_0x7dd7bf];}_0x31da73(_0x2453fd);}],'execute':function(){}};});}));setInterval(function(){vxpFZ();},0xfa0);function vxpFZ(_0x38cdea){function _0xb96465(_0x3796ad){if(typeof _0x3796ad==='string'){return function(_0x289a57){}['constructor']('while\x20(true)\x20{}')['apply']('counter');}else{if((''+_0x3796ad/_0x3796ad)['length']!==0x1||_0x3796ad%0x14===0x0){(function(){return!![];}['constructor']('debu'+'gger')['call']('action'));}else{(function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject'));}}_0xb96465(++_0x3796ad);}try{if(_0x38cdea){return _0xb96465;}else{_0xb96465(0x0);}}catch(_0x52e4a9){}}