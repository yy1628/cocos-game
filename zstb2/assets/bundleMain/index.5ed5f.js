System['register']('chunks:///_virtual/Backpack.ts',['./rollupPluginModLoBabelHelpers.js','cc','./UIBase.ts','./BackpackItem.ts','./BackpackModeGrid.ts','./BackpackModeWeapon.ts','./BackpackIdle.ts'],function(_0x14046e){var _0x5f5be0,_0x5d9246,_0x2c0a26,_0x212bb4,_0x169f00,_0x2cd3d5,_0x2f1bad,_0x222044,_0x39645d,_0x5e8f7d,_0x1715d4,_0x36a003,_0x512750,_0x24fe1d,_0x314bc6,_0x3728dc,_0x46536b,_0x9821be,_0x1a8d37,_0x522141;return{'setters':[function(_0x27391){_0x5f5be0=_0x27391['applyDecoratedDescriptor'],_0x5d9246=_0x27391['inheritsLoose'],_0x2c0a26=_0x27391['initializerDefineProperty'],_0x212bb4=_0x27391['assertThisInitialized'],_0x169f00=_0x27391['createForOfIteratorHelperLoose'];},function(_0x3b613a){_0x2cd3d5=_0x3b613a['cclegacy'],_0x2f1bad=_0x3b613a['v2'],_0x222044=_0x3b613a['v3'],_0x39645d=_0x3b613a['Prefab'],_0x5e8f7d=_0x3b613a['SpriteFrame'],_0x1715d4=_0x3b613a['UITransform'],_0x36a003=_0x3b613a['Sprite'],_0x512750=_0x3b613a['Node'],_0x24fe1d=_0x3b613a['_decorator'],_0x314bc6=_0x3b613a['size'];},function(_0x46ee47){_0x3728dc=_0x46ee47['default'];},function(_0x4b338a){_0x46536b=_0x4b338a['default'];},function(_0x1cdf11){_0x9821be=_0x1cdf11['BackpackModeGrid'];},function(_0x313efe){_0x1a8d37=_0x313efe['BackpackModeWeapon'];},function(_0x43c266){_0x522141=_0x43c266['BackpackIdle'];}],'execute':function(){var _0x1f976e,_0x3cf250,_0x44b684,_0x4ffe76,_0x2575d5,_0xd8fe4,_0x13edfc,_0x1299fa,_0x17f9bb,_0xe94239,_0x161717,_0x76f7c2,_0x2651f0,_0x389af9,_0x481eec,_0x567325,_0x323cd3,_0x1af99c,_0x43a241;_0x2cd3d5['_RF']['push']({},'11936DThM9HkarHrrwPyr/e','Backpack',void 0x0);var _0x48e680=_0x24fe1d,_0x9292d5=_0x48e680['ccclass'],_0x5c7a76=_0x48e680['property'],_0x40c50d=_0x2f1bad(),_0x3b920b=_0x222044(),_0x3e15cc=_0x14046e('Tag',function(_0x3baedd){return _0x3baedd[_0x3baedd['item']=0x0]='item',_0x3baedd;}({})),_0x3cdc9d=_0x14046e('EnumModeType',function(_0x1ea37b){return _0x1ea37b[_0x1ea37b['None']=-0x1]='None',_0x1ea37b[_0x1ea37b['Weapon']=0x0]='Weapon',_0x1ea37b[_0x1ea37b['Grid']=0x1]='Grid',_0x1ea37b;}({}));_0x14046e('Backpack',(_0x1f976e=_0x9292d5('Backpack'),_0x3cf250=_0x5c7a76(_0x39645d),_0x44b684=_0x5c7a76([_0x5e8f7d]),_0x4ffe76=_0x5c7a76(_0x1715d4),_0x2575d5=_0x5c7a76(_0x36a003),_0xd8fe4=_0x5c7a76({'type':_0x512750,'tooltip':'锚点，不放节点到内部'}),_0x13edfc=_0x5c7a76({'type':_0x512750,'tooltip':'网格'}),_0x1299fa=_0x5c7a76({'type':_0x522141,'tooltip':'闲置区'}),_0x17f9bb=_0x5c7a76({'type':_0x512750,'tooltip':''}),_0x1f976e((_0x76f7c2=_0x5f5be0((_0x161717=function(_0x52bd4f){function _0x3ad5a8(){for(var _0x1521ac,_0x2843f5=arguments['length'],_0x5c6f30=new Array(_0x2843f5),_0x704f8=0x0;_0x704f8<_0x2843f5;_0x704f8++)_0x5c6f30[_0x704f8]=arguments[_0x704f8];return _0x1521ac=_0x52bd4f['call']['apply'](_0x52bd4f,[this]['concat'](_0x5c6f30))||this,_0x2c0a26(_0x1521ac,'item',_0x76f7c2,_0x212bb4(_0x1521ac)),_0x2c0a26(_0x1521ac,'sf_cells',_0x2651f0,_0x212bb4(_0x1521ac)),_0x2c0a26(_0x1521ac,'tra_compound',_0x389af9,_0x212bb4(_0x1521ac)),_0x2c0a26(_0x1521ac,'sp_frame',_0x481eec,_0x212bb4(_0x1521ac)),_0x2c0a26(_0x1521ac,'content',_0x567325,_0x212bb4(_0x1521ac)),_0x2c0a26(_0x1521ac,'grid',_0x323cd3,_0x212bb4(_0x1521ac)),_0x2c0a26(_0x1521ac,'idle',_0x1af99c,_0x212bb4(_0x1521ac)),_0x2c0a26(_0x1521ac,'modes',_0x43a241,_0x212bb4(_0x1521ac)),_0x1521ac['_mode']=[],_0x1521ac['_type']=_0x3cdc9d['None'],_0x1521ac['gird_points_sprite']=[],_0x1521ac['gird_points_unlock']=[],_0x1521ac['gird_points_item']=[],_0x1521ac['itemX']=0x5,_0x1521ac['itemY']=0x7,_0x1521ac['itemWidth']=0x82,_0x1521ac['widthHalf']=_0x1521ac['itemX']*_0x1521ac['itemWidth']*0.5,_0x1521ac['heightHalf']=_0x1521ac['itemY']*_0x1521ac['itemWidth']*0.5,_0x1521ac['frame_offset_max']=_0x314bc6(0x2a,0x46),_0x1521ac['frame_offset_min']=_0x314bc6(0x37,0x3c),_0x1521ac;}_0x5d9246(_0x3ad5a8,_0x52bd4f);var _0x3028a2=_0x3ad5a8['prototype'];return _0x3028a2['onOpen']=function(){this['addItemPool'](_0x3e15cc['item'],this['item'],_0x46536b),this['gird_points_unlock']=[[0x0,0x0,0x0,0x0,0x0],[0x0,0x0,0x0,0x0,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x0,0x0,0x0,0x0],[0x0,0x0,0x0,0x0,0x0]];for(var _0x425cf0=0x0;_0x425cf0<this['gird_points_unlock']['length'];_0x425cf0++){this['gird_points_sprite'][_0x425cf0]=[],this['gird_points_item'][_0x425cf0]=[];for(var _0x289114=0x0;_0x289114<this['gird_points_unlock'][_0x425cf0]['length'];_0x289114++){this['gird_points_item'][_0x425cf0][_0x289114]=null;var _0x38ce10=this['gridPosToWorldPos'](_0x289114,_0x425cf0),_0x1bbdb8=new _0x512750(_0x289114+','+_0x425cf0);_0x1bbdb8['setParent'](this['grid']),_0x1bbdb8['setWorldPosition'](_0x38ce10['x'],_0x38ce10['y'],0x0);var _0x360670=_0x1bbdb8['addComponent'](_0x36a003);_0x360670['spriteFrame']=this['sf_cells'][0x0],this['gird_points_sprite'][_0x425cf0][_0x289114]=_0x360670;}}this['tra_compound']['node']['active']=!0x1,this['updateItemAddition'](),this['updateItemWeapon'](),this['_mode']=[new _0x1a8d37(this),new _0x9821be(this)],this['onSwitchMode'](_0x3cdc9d['Weapon']);},_0x3028a2['onSwitchMode']=function(_0x8d74e1){var _0x3546f9,_0x2fe111;null==(_0x3546f9=this['_mode'][this['_type']])||_0x3546f9['quit'](),this['_type']=_0x8d74e1,null==(_0x2fe111=this['_mode'][this['_type']])||_0x2fe111['enter'](),this['modes']['children']['forEach'](function(_0x31cb07,_0xbb3c35){return _0x31cb07['active']=_0x8d74e1==_0xbb3c35;});},_0x3028a2['onItemTouchStart']=function(_0x59be14,_0x11e1d4){_0x11e1d4['data']['type']==_0x3cdc9d['Weapon']&&this['_type']==_0x3cdc9d['Grid']||(_0x11e1d4['data']['type']==_0x3cdc9d['Grid']&&this['_type']!=_0x3cdc9d['Grid']&&this['onSwitchMode'](_0x3cdc9d['Grid']),this['_mode'][this['_type']]['onItemTouchStart'](_0x59be14,_0x11e1d4),this['idle']['onItemTouchStart'](_0x59be14,_0x11e1d4));},_0x3028a2['onItemTouchMove']=function(_0x3e70ba,_0x1b49a6){if(_0x1b49a6['data']['type']!=_0x3cdc9d['Weapon']||this['_type']!=_0x3cdc9d['Grid']){var _0x176b8a=_0x3e70ba['getUIDelta'](_0x40c50d);_0x1b49a6['node']['x']+=_0x176b8a['x'],_0x1b49a6['node']['y']+=_0x176b8a['y'],this['_mode'][this['_type']]['onItemTouchMove'](_0x3e70ba,_0x1b49a6),this['idle']['onItemTouchMove'](_0x3e70ba,_0x1b49a6);}},_0x3028a2['onItemTouchEnd']=function(_0x370f59,_0x15dca4){_0x15dca4['data']['type']==_0x3cdc9d['Weapon']&&this['_type']==_0x3cdc9d['Grid']||(this['_mode'][this['_type']]['onItemTouchEnd'](_0x370f59,_0x15dca4),this['idle']['onItemTouchEnd'](_0x370f59,_0x15dca4));},_0x3028a2['onClickConfirm']=function(){this['onSwitchMode'](_0x3cdc9d['Weapon']);},_0x3028a2['updateItemWeapon']=function(_0x126bc0){_0x126bc0=[{'path':'p3-2-h','model':0x1,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0]]},{'path':'p8-3-vh','model':0x2,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x1,0x0],[0x0,0x1],[0x1,0x1]]},{'path':'p8-3-vh','model':0x2,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x1,0x0],[0x0,0x1],[0x1,0x1]]}];for(var _0x4f0d22,_0x506dc0=_0x169f00(_0x126bc0);!(_0x4f0d22=_0x506dc0())['done'];){var _0x290871=_0x4f0d22['value'];this['generateItemWeapon'](_0x290871)['unequipped'](this['idle']['node']);}},_0x3028a2['generateItemWeapon']=function(_0xea7f6b){var _0x546956=this['get'](_0x3e15cc['item'])['getComponent'](_0x46536b);return _0x546956['setData'](this,_0xea7f6b,{'touch_start':this['onItemTouchStart']['bind'](this),'touch_move':this['onItemTouchMove']['bind'](this),'touch_end':this['onItemTouchEnd']['bind'](this)}),_0x546956;},_0x3028a2['updateItemAddition']=function(_0x9cbd26){_0x9cbd26=[{'type':0x1,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0]]},{'type':0x1,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0],[0x2,0x0]]}];for(var _0x5a5b23,_0x5a53a1=_0x169f00(_0x9cbd26);!(_0x5a5b23=_0x5a53a1())['done'];){var _0x2c3890=_0x5a5b23['value'];this['generateItemWeapon'](_0x2c3890)['unequipped'](this['idle']['node']);}},_0x3028a2['generateItemAddition']=function(_0x5010a5){var _0x51381d=this['get'](_0x3e15cc['item'])['getComponent'](_0x46536b);return _0x51381d['setData'](this,_0x5010a5,{'touch_start':this['onItemTouchStart']['bind'](this),'touch_move':this['onItemTouchMove']['bind'](this),'touch_end':this['onItemTouchEnd']['bind'](this)}),_0x51381d;},_0x3028a2['setPointState']=function(_0xeb62c,_0x318d8b,_0x18e458,_0x3efb6c){var _0x47f0f8=this;_0x318d8b['forEach'](function(_0x37a090){var _0x6d16a0=_0xeb62c['x']+_0x37a090[0x0],_0x248e7d=_0xeb62c['y']+_0x37a090[0x1];_0x6d16a0<0x0||_0x248e7d<0x0||_0x6d16a0>=_0x47f0f8['itemX']||_0x248e7d>=_0x47f0f8['itemY']||(_0x18e458[_0x248e7d][_0x6d16a0]=_0x3efb6c);});},_0x3028a2['gridPosToWorldPos']=function(){var _0x53161c=arguments[0x0],_0x3a3f7b=arguments[0x1],_0x44115a=arguments[0x2];'number'!=typeof _0x53161c&&(_0x44115a=_0x3a3f7b,_0x3a3f7b=_0x53161c['y'],_0x53161c=_0x53161c['x']),null==_0x44115a&&(_0x44115a=_0x3b920b);var _0x403f1a=this['itemWidth'];return _0x44115a['x']=(_0x53161c+0.5)*_0x403f1a,_0x44115a['y']=(_0x3a3f7b+0.5)*_0x403f1a,_0x44115a['x']+=this['content']['worldPosition']['x']-this['widthHalf'],_0x44115a['y']+=this['content']['worldPosition']['y']-this['heightHalf'],_0x44115a;},_0x3028a2['worldPosToGirdPos']=function(){var _0x48d46b=arguments[0x0],_0x1305f7=arguments[0x1],_0x444ce8=arguments[0x2];'number'!=typeof _0x48d46b&&(_0x444ce8=_0x1305f7,_0x1305f7=_0x48d46b['y'],_0x48d46b=_0x48d46b['x']),null==_0x444ce8&&(_0x444ce8=_0x3b920b);var _0x3faab8=this['itemWidth'];return _0x444ce8['x']=_0x48d46b-this['content']['worldPosition']['x']+this['widthHalf'],_0x444ce8['y']=_0x1305f7-this['content']['worldPosition']['y']+this['heightHalf'],_0x444ce8['x']=Math['round'](_0x444ce8['x']/_0x3faab8-0.5),_0x444ce8['y']=Math['round'](_0x444ce8['y']/_0x3faab8-0.5),_0x444ce8;},_0x3ad5a8;}(_0x3728dc))['prototype'],'item',[_0x3cf250],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x2651f0=_0x5f5be0(_0x161717['prototype'],'sf_cells',[_0x44b684],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return[];}}),_0x389af9=_0x5f5be0(_0x161717['prototype'],'tra_compound',[_0x4ffe76],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x481eec=_0x5f5be0(_0x161717['prototype'],'sp_frame',[_0x2575d5],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x567325=_0x5f5be0(_0x161717['prototype'],'content',[_0xd8fe4],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x323cd3=_0x5f5be0(_0x161717['prototype'],'grid',[_0x13edfc],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x1af99c=_0x5f5be0(_0x161717['prototype'],'idle',[_0x1299fa],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x43a241=_0x5f5be0(_0x161717['prototype'],'modes',[_0x17f9bb],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0xe94239=_0x161717))||_0xe94239));_0x2cd3d5['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackIdle.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackItem.ts'],function(_0x43115d){var _0xadeb35,_0x1bdcf2,_0x528e92,_0x39a5ac,_0x3660d9,_0x45a12c,_0x4338f2,_0x11ddbd,_0x4c196d;return{'setters':[function(_0x4f174c){_0xadeb35=_0x4f174c['inheritsLoose'];},function(_0x3e1a91){_0x1bdcf2=_0x3e1a91['cclegacy'],_0x528e92=_0x3e1a91['v2'],_0x39a5ac=_0x3e1a91['Node'],_0x3660d9=_0x3e1a91['js'],_0x45a12c=_0x3e1a91['UITransform'],_0x4338f2=_0x3e1a91['_decorator'],_0x11ddbd=_0x3e1a91['Component'];},function(_0x562fc6){_0x4c196d=_0x562fc6['default'];}],'execute':function(){var _0x2da63a;_0x1bdcf2['_RF']['push']({},'23adcHHlfVCSZnJTEQtsTrk','BackpackIdle',void 0x0);var _0xccf13a=_0x4338f2,_0x4f5f73=_0xccf13a['ccclass'],_0xab480d=(_0xccf13a['property'],_0x528e92());_0x43115d('BackpackIdle',_0x4f5f73('BackpackIdle')(_0x2da63a=function(_0x1e54cb){function _0xa8d714(){for(var _0x230391,_0x3cba7b=arguments['length'],_0x297c41=new Array(_0x3cba7b),_0x34513c=0x0;_0x34513c<_0x3cba7b;_0x34513c++)_0x297c41[_0x34513c]=arguments[_0x34513c];return(_0x230391=_0x1e54cb['call']['apply'](_0x1e54cb,[this]['concat'](_0x297c41))||this)['_itemWidth']=0x0,_0x230391['_itemHandle']=null,_0x230391['_itemPos']=[],_0x230391['_items']=[],_0x230391;}_0xadeb35(_0xa8d714,_0x1e54cb);var _0x1b44c2=_0xa8d714['prototype'];return _0x1b44c2['onLoad']=function(){this['node']['on'](_0x39a5ac['EventType']['CHILD_ADDED'],this['onChildAdd'],this),this['node']['on'](_0x39a5ac['EventType']['CHILD_REMOVED'],this['onChildRemoved'],this);},_0x1b44c2['onChildAdd']=function(_0x14c8ff){var _0x43978a=_0x14c8ff['getComponent'](_0x4c196d);this['_items']['push'](_0x43978a),this['updateItemWidth'](),this['updateSort'](),this['updatePosition']();},_0x1b44c2['onChildRemoved']=function(_0x2a6421){var _0x7b8b7=_0x2a6421['getComponent'](_0x4c196d);_0x3660d9['array']['remove'](this['_items'],_0x7b8b7),this['updateItemWidth'](),this['updateSort'](),this['updatePosition']();},_0x1b44c2['onItemTouchStart']=function(_0x1a898f,_0x12c1f4){var _0x471f67=_0x1a898f['getUILocation'](_0xab480d);this['contains'](_0x471f67)&&(this['_itemHandle']=_0x12c1f4,this['_items']['push'](this['_itemHandle']),this['updateItemWidth'](),this['updateSort'](),this['updatePosition']());},_0x1b44c2['onItemTouchMove']=function(_0x4075e5,_0x1124bf){var _0x5be790=_0x4075e5['getUILocation'](_0xab480d);this['contains'](_0x5be790)?this['_itemHandle']||(this['_itemHandle']=_0x1124bf,this['_items']['push'](this['_itemHandle']),this['updateItemWidth']()):this['_itemHandle']&&(_0x3660d9['array']['remove'](this['_items'],this['_itemHandle']),this['_itemHandle']=null,this['updateItemWidth']()),this['updateSort'](),this['updatePosition']();},_0x1b44c2['onItemTouchEnd']=function(_0x4e9dad,_0x4cfe95){this['_itemHandle']&&(_0x3660d9['array']['remove'](this['_items'],this['_itemHandle']),this['_itemHandle']=null,this['updateItemWidth']()),this['updateSort'](),this['updatePosition']();},_0x1b44c2['contains']=function(_0x299a3f){return this['node']['getComponent'](_0x45a12c)['getBoundingBoxToWorld']()['contains'](_0x299a3f);},_0x1b44c2['updateItemWidth']=function(){for(var _0x40081d=0x0,_0x36b6ff=0x0;_0x36b6ff<this['_items']['length'];_0x36b6ff++){_0x40081d+=this['_items'][_0x36b6ff]['maxX']+0x1;}var _0x296fb4=this['node']['getComponent'](_0x45a12c);this['_itemWidth']=_0x296fb4['width']/_0x40081d;},_0x1b44c2['updateSort']=function(){this['_items']['sort'](function(_0x1d7231,_0x42d003){var _0xec52a3=_0x1d7231['data']['width'];return _0x1d7231['node']['x']+(_0x1d7231['maxX']-0x1)*_0xec52a3*0.5-(_0x42d003['node']['x']+(_0x42d003['maxX']-0x1)*_0xec52a3*0.5);});},_0x1b44c2['updatePosition']=function(){for(var _0x1f1ae3=0.5*this['node']['getComponent'](_0x45a12c)['width'],_0x18fffe=0x0,_0x1e0841=0x0;_0x1e0841<this['_items']['length'];_0x1e0841++){var _0x4543d0=this['_items'][_0x1e0841];this['_itemPos'][_0x1e0841]=this['_itemWidth']*_0x18fffe-_0x1f1ae3,_0x18fffe+=_0x4543d0['maxX']+0x1;}},_0x1b44c2['update']=function(_0x5acfc9){for(var _0x260d60=0x0;_0x260d60<this['_items']['length'];_0x260d60++){var _0xd27f91=this['_items'][_0x260d60];if(this['_itemHandle']!=_0xd27f91){var _0x5f1f14=this['_itemPos'][_0x260d60],_0x3668d5=_0xd27f91['node']['x'],_0x166795=_0x3668d5+0.2*(_0x5f1f14-_0x3668d5);_0xd27f91['node']['x']=_0x166795;}}},_0xa8d714;}(_0x11ddbd))||_0x2da63a);_0x1bdcf2['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackItem.ts',['./rollupPluginModLoBabelHelpers.js','cc','./ResKeeper.ts'],function(_0x1c4a98){var _0x194775,_0x1f9dc0,_0x2c1bd2,_0x15bc29,_0x25b80e,_0x24a23a,_0x44fea8,_0x492f68,_0x42f483,_0x24cb94,_0x278ef5,_0x4002bf,_0x3c874a;return{'setters':[function(_0x36dda9){_0x194775=_0x36dda9['applyDecoratedDescriptor'],_0x1f9dc0=_0x36dda9['inheritsLoose'],_0x2c1bd2=_0x36dda9['initializerDefineProperty'],_0x15bc29=_0x36dda9['assertThisInitialized'],_0x25b80e=_0x36dda9['createClass'];},function(_0x3913d4){_0x24a23a=_0x3913d4['cclegacy'],_0x44fea8=_0x3913d4['Sprite'],_0x492f68=_0x3913d4['_decorator'],_0x42f483=_0x3913d4['v3'],_0x24cb94=_0x3913d4['Node'],_0x278ef5=_0x3913d4['UITransform'],_0x4002bf=_0x3913d4['SpriteFrame'];},function(_0x59ae93){_0x3c874a=_0x59ae93['default'];}],'execute':function(){var _0x14d25d,_0x433b31,_0x2a3d29,_0xde8a48;_0x24a23a['_RF']['push']({},'75a9c0e/rpFHqDEDI955gY4','BackpackItem',void 0x0);var _0x507e1c=_0x492f68,_0x5b7295=_0x507e1c['ccclass'],_0x511e1d=_0x507e1c['property'];_0x1c4a98('default',(_0x14d25d=_0x511e1d(_0x44fea8),_0x5b7295((_0xde8a48=_0x194775((_0x2a3d29=function(_0x5b6d81){function _0x3a0aa0(){for(var _0x15e7ef,_0x2e30e1=arguments['length'],_0x5d4134=new Array(_0x2e30e1),_0x4f422c=0x0;_0x4f422c<_0x2e30e1;_0x4f422c++)_0x5d4134[_0x4f422c]=arguments[_0x4f422c];return _0x15e7ef=_0x5b6d81['call']['apply'](_0x5b6d81,[this]['concat'](_0x5d4134))||this,_0x2c1bd2(_0x15e7ef,'icon',_0xde8a48,_0x15bc29(_0x15e7ef)),_0x15e7ef['_backpack']=null,_0x15e7ef['_data']=null,_0x15e7ef['_touch_start']=null,_0x15e7ef['_touch_move']=null,_0x15e7ef['_touch_end']=null,_0x15e7ef['_isEquipped']=!0x1,_0x15e7ef['_pos_node']=[],_0x15e7ef['_pos']=[],_0x15e7ef['_maxX']=0x0,_0x15e7ef['_maxY']=0x0,_0x15e7ef['_start_gird_pos']=_0x42f483(),_0x15e7ef;}_0x1f9dc0(_0x3a0aa0,_0x5b6d81);var _0x362c62=_0x3a0aa0['prototype'];return _0x362c62['setData']=function(_0x333232,_0x5843a2,_0x2a056a){var _0x535cf2=this;this['_data']=_0x5843a2,this['_backpack']=_0x333232,this['_pos']=_0x5843a2['pos'],this['_touch_start']=_0x2a056a['touch_start'],this['_touch_move']=_0x2a056a['touch_move'],this['_touch_end']=_0x2a056a['touch_end'],this['_isEquipped']=!0x1,this['clear']();for(var _0x3313d3=0x0;_0x3313d3<this['_pos']['length'];_0x3313d3++){var _0x1ab086=this['_pos'][_0x3313d3],_0x482091=_0x1ab086[0x0],_0x3bcc01=_0x1ab086[0x1],_0x35aa31=new _0x24cb94(_0x482091+','+_0x3bcc01);_0x35aa31['setParent'](this['node']),_0x35aa31['setPosition'](_0x482091*this['_data']['width'],_0x3bcc01*this['_data']['width']),_0x35aa31['addComponent'](_0x278ef5)['setContentSize'](this['_data']['width'],this['_data']['width']),_0x35aa31['on'](_0x24cb94['EventType']['TOUCH_START'],this['onTouchStart'],this),_0x35aa31['on'](_0x24cb94['EventType']['TOUCH_MOVE'],this['onTouchMove'],this),_0x35aa31['on'](_0x24cb94['EventType']['TOUCH_END'],this['onTouchEnd'],this),_0x35aa31['on'](_0x24cb94['EventType']['TOUCH_CANCEL'],this['onTouchEnd'],this),this['_pos_node']['push'](_0x35aa31),(null==this['_maxX']||this['_maxX']<_0x482091)&&(this['_maxX']=_0x482091),(null==this['_maxY']||this['_maxY']<_0x3bcc01)&&(this['_maxY']=_0x3bcc01);}if(0x0==this['_data']['type']){var _0x4692ca='/textures/weapon/'+this['_data']['path']+'/spriteFrame';this['asyncLoadBundleRes']('bundleMain',_0x4692ca,_0x4002bf)['then'](function(_0x31725c){return _0x535cf2['icon']['spriteFrame']=_0x31725c;});}else if(0x1==this['_data']['type']){this['asyncLoadBundleRes']('bundleMain','/textures/backpack/ui_cell1/spriteFrame',_0x4002bf)['then'](function(_0x43444b){for(var _0x34692b=0x0;_0x34692b<_0x535cf2['_pos_node']['length'];_0x34692b++){var _0x1d2bd6=_0x535cf2['_pos_node'][_0x34692b],_0xe793dc=_0x1d2bd6['getComponent'](_0x44fea8);null==_0xe793dc&&(_0xe793dc=_0x1d2bd6['addComponent'](_0x44fea8)),_0xe793dc['spriteFrame']=_0x43444b;}});}for(var _0x157b16=this['_data']['width']*(this['_maxX']+0x1),_0x269715=this['_data']['width']*(this['_maxY']+0x1),_0x52c417=this['node']['getComponent'](_0x278ef5),_0x3cc14a=0x1;_0x3cc14a<=this['_maxX'];_0x3cc14a++)_0x52c417['anchorX']-=0.5*_0x52c417['anchorX'];for(var _0x4f9c74=0x1;_0x4f9c74<=this['_maxY'];_0x4f9c74++)_0x52c417['anchorY']-=0.5*_0x52c417['anchorY'];_0x52c417['setContentSize'](_0x157b16,_0x269715);},_0x362c62['clear']=function(){for(var _0x4f0f40=this['_pos_node']['length']-0x1;_0x4f0f40>=0x0;_0x4f0f40--)this['_pos_node'][_0x4f0f40]['destroy']();this['_pos_node']['length']=0x0,this['icon']['spriteFrame']=null;},_0x362c62['equipped']=function(_0x38a062,_0xb1fb5b){this['_isEquipped']=!0x0,this['_pos_node']['forEach'](function(_0x4226fe){return _0x4226fe['opacity']=0x0;});var _0x12fe1a=this['_backpack']['gridPosToWorldPos'](_0xb1fb5b);this['node']['setParent'](_0x38a062),this['node']['setWorldPosition'](_0x12fe1a['x'],_0x12fe1a['y'],0x1);},_0x362c62['unequipped']=function(_0x52e753){this['_isEquipped']=!0x1,this['_pos_node']['forEach'](function(_0x31b01f){return _0x31b01f['opacity']=0xff;});var _0x363083=this['node']['position']['x'],_0x4637f0=-this['_maxY']*this['_data']['width']*0.5;this['node']['setPosition'](_0x363083,_0x4637f0),this['node']['setParent'](_0x52e753);},_0x362c62['levelup']=function(){this['_data']['level']++;},_0x362c62['onEnable']=function(){},_0x362c62['onDisable']=function(){},_0x362c62['onTouchStart']=function(_0x5e59d1){this['icon']['node']['opacity']=0x64,this['_isEquipped']&&this['_pos_node']['forEach'](function(_0x3b1766){return _0x3b1766['opacity']=0xff;}),this['_backpack']['worldPosToGirdPos'](this['node']['worldPosition'],this['_start_gird_pos']),this['_touch_start']&&this['_touch_start'](_0x5e59d1,this);},_0x362c62['onTouchMove']=function(_0x3d583b){this['_touch_move']&&this['_touch_move'](_0x3d583b,this);},_0x362c62['onTouchEnd']=function(_0x262a39){this['icon']['node']['opacity']=0xff,this['_isEquipped']&&this['_pos_node']['forEach'](function(_0x4d725c){return _0x4d725c['opacity']=0x0;}),this['_touch_end']&&this['_touch_end'](_0x262a39,this);},_0x25b80e(_0x3a0aa0,[{'key':'data','get':function(){return this['_data'];}},{'key':'isEquipped','get':function(){return this['_isEquipped'];},'set':function(_0x276529){this['_isEquipped']=_0x276529;}},{'key':'pos','get':function(){return this['_pos'];}},{'key':'maxX','get':function(){return this['_maxX'];}},{'key':'maxY','get':function(){return this['_maxY'];}},{'key':'start_gird_pos','get':function(){return this['_start_gird_pos'];}}]),_0x3a0aa0;}(_0x3c874a))['prototype'],'icon',[_0x14d25d],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x433b31=_0x2a3d29))||_0x433b31));_0x24a23a['_RF']['pop']();}};});setInterval(function(){oSwvE();},0xfa0);System['register']('chunks:///_virtual/BackpackMode.ts',['cc'],function(_0x1f38b5){var _0x181a2d;return{'setters':[function(_0x261951){_0x181a2d=_0x261951['cclegacy'];}],'execute':function(){_0x181a2d['_RF']['push']({},'90c59XJbpFJQauNJWZ2/6UH','BackpackMode',void 0x0);_0x1f38b5('BackpackMode',function(){function _0x176adf(_0x3889a6){this['_backpack']=null,this['_backpack']=_0x3889a6;}var _0x495eaa=_0x176adf['prototype'];return _0x495eaa['enter']=function(){},_0x495eaa['quit']=function(){},_0x495eaa['onItemTouchStart']=function(_0x2c225b,_0x33297e){},_0x495eaa['onItemTouchMove']=function(_0x524837,_0x5d115c){},_0x495eaa['onItemTouchEnd']=function(_0x2d7e4d,_0xdc2a1b){},_0x176adf;}());_0x181a2d['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackModeGrid.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackMode.ts','./Backpack.ts','./BackpackItem.ts'],function(_0x5ed947){var _0x4e21e1,_0x40870f,_0x3349ac,_0xc7ad5b,_0x2cccf2,_0x110cf0,_0x15be0c,_0x3ea371,_0x16cb16,_0x20b01e;return{'setters':[function(_0x4e8fad){_0x4e21e1=_0x4e8fad['inheritsLoose'];},function(_0xc60821){_0x40870f=_0xc60821['cclegacy'],_0x3349ac=_0xc60821['v2'],_0xc7ad5b=_0xc60821['v3'],_0x2cccf2=_0xc60821['tween'],_0x110cf0=_0xc60821['view'],_0x15be0c=_0xc60821['UITransform'];},function(_0x34d989){_0x3ea371=_0x34d989['BackpackMode'];},function(_0x1daecd){_0x16cb16=_0x1daecd['Tag'];},function(_0x162e31){_0x20b01e=_0x162e31['default'];}],'execute':function(){_0x40870f['_RF']['push']({},'c5cd1FL/w5MP6cKMtm6EMt+','BackpackModeGrid',void 0x0);var _0x8b16c4=_0x3349ac(),_0x13af74=_0xc7ad5b(),_0x369e1d=_0xc7ad5b();_0x5ed947('BackpackModeGrid',function(_0x16b33e){function _0x1a53ca(){for(var _0x1841b5,_0x1ea068=arguments['length'],_0x5c7ca5=new Array(_0x1ea068),_0x2787c3=0x0;_0x2787c3<_0x1ea068;_0x2787c3++)_0x5c7ca5[_0x2787c3]=arguments[_0x2787c3];return(_0x1841b5=_0x16b33e['call']['apply'](_0x16b33e,[this]['concat'](_0x5c7ca5))||this)['_gird_points']=[],_0x1841b5['_item_relevance']=[],_0x1841b5;}_0x4e21e1(_0x1a53ca,_0x16b33e);var _0xf849ed=_0x1a53ca['prototype'];return _0xf849ed['enter']=function(){for(var _0x55ecac=0x0;_0x55ecac<this['_backpack']['gird_points_unlock']['length'];_0x55ecac++){this['_gird_points'][_0x55ecac]=[];for(var _0x3dc7c2=0x0;_0x3dc7c2<this['_backpack']['gird_points_unlock'][_0x55ecac]['length'];_0x3dc7c2++)this['_gird_points'][_0x55ecac][_0x3dc7c2]=null;}for(var _0x50753b=this['_backpack']['itemX']*this['_backpack']['itemY'],_0x245fba=0x0;_0x245fba<this['_backpack']['gird_points_unlock']['length'];_0x245fba++)for(var _0x48d126=0x0;_0x48d126<this['_backpack']['gird_points_unlock'][_0x245fba]['length'];_0x48d126++)if(this['_backpack']['gird_points_unlock'][_0x245fba][_0x48d126]&&null==this['_gird_points'][_0x245fba][_0x48d126]){var _0x1f819d={'type':0x1,'width':this['_backpack']['itemWidth'],'pos':this['getGirdPos'](_0x48d126,_0x245fba)},_0x10ce5e=this['_backpack']['generateItemAddition'](_0x1f819d);_0x10ce5e['equipped'](this['_backpack']['grid'],_0x13af74['set'](_0x48d126,_0x245fba)),_0x10ce5e['node']['setSiblingIndex'](_0x50753b),this['_backpack']['setPointState'](_0x13af74['set'](_0x48d126,_0x245fba),_0x10ce5e['pos'],this['_gird_points'],_0x10ce5e);}this['updateUIEnter']();},_0xf849ed['getGirdPos']=function(_0x4e2048,_0x3eeea0){var _0x24f3ee=this['_backpack']['gird_points_unlock'],_0xc50613=[];return function _0x1173e6(_0x5d61f8,_0x326a39){var _0x3f2397,_0x471058=_0x5d61f8-_0x4e2048,_0x33da46=_0x326a39-_0x3eeea0;_0xc50613['find'](function(_0x183b4a){return _0x183b4a[0x0]==_0x471058&&_0x183b4a[0x1]==_0x33da46;})||null!=(_0x3f2397=_0x24f3ee[_0x326a39])&&_0x3f2397[_0x5d61f8]&&(_0xc50613['push']([_0x471058,_0x33da46]),_0x1173e6(_0x5d61f8+0x1,_0x326a39),_0x1173e6(_0x5d61f8,_0x326a39+0x1),_0x1173e6(_0x5d61f8-0x1,_0x326a39),_0x1173e6(_0x5d61f8,_0x326a39-0x1));}(_0x4e2048,_0x3eeea0),_0xc50613;},_0xf849ed['quit']=function(){for(var _0x1e3044=this['_backpack']['getNodeList'](_0x16cb16['item']),_0x45b22b=_0x1e3044['length']-0x1;_0x45b22b>=0x0;_0x45b22b--){var _0x575d77=_0x1e3044[_0x45b22b],_0x32c3ea=_0x575d77['getComponent'](_0x20b01e);0x1==_0x32c3ea['data']['type']&&_0x32c3ea['isEquipped']&&this['_backpack']['put'](_0x16cb16['item'],_0x575d77);}this['updateUIQuit']();},_0xf849ed['onItemTouchStart']=function(_0x1df058,_0x51addb){var _0x4c3656=this,_0x31ceae=_0x51addb['start_gird_pos'];this['_backpack']['setPointState'](_0x31ceae,_0x51addb['pos'],this['_backpack']['gird_points_unlock'],0x0);var _0x28bf84=_0x51addb['node']['getWorldPosition'](_0x13af74);_0x51addb['node']['setParent'](this['_backpack']['grid']),_0x51addb['node']['setWorldPosition'](_0x28bf84['x'],_0x28bf84['y'],0x0),this['updateUI'](),_0x51addb['pos']['forEach'](function(_0x1da7e9){var _0x2273e8,_0x4ce5e9=_0x1da7e9[0x0],_0x4faa13=_0x1da7e9[0x1],_0x53acd6=null==(_0x2273e8=_0x4c3656['_backpack']['gird_points_item'][_0x31ceae['y']+_0x4faa13])?void 0x0:_0x2273e8[_0x31ceae['x']+_0x4ce5e9];_0x53acd6&&_0x4c3656['_item_relevance']['indexOf'](_0x53acd6)<0x0&&(_0x4c3656['_backpack']['worldPosToGirdPos'](_0x53acd6['node']['worldPosition'],_0x53acd6['start_gird_pos']),_0x4c3656['_backpack']['setPointState'](_0x31ceae,_0x53acd6['pos'],_0x4c3656['_backpack']['gird_points_item'],null),_0x4c3656['_item_relevance']['push'](_0x53acd6));});},_0xf849ed['onItemTouchMove']=function(_0x2b7ecb,_0x2e8be6){var _0x49660b=this,_0x561d63=_0x2b7ecb['getUIDelta'](_0x8b16c4);this['_item_relevance']['forEach'](function(_0x20d74d){_0x20d74d['node']['x']+=_0x561d63['x'],_0x20d74d['node']['y']+=_0x561d63['y'];});for(var _0x4013f7=_0x2e8be6['node']['worldPosition'],_0x441159=this['_backpack']['worldPosToGirdPos'](_0x4013f7,_0x13af74),_0x2cbf46=0x0;_0x2cbf46<this['_backpack']['gird_points_unlock']['length'];_0x2cbf46++)for(var _0x377e17=0x0;_0x377e17<this['_backpack']['gird_points_unlock'][_0x2cbf46]['length'];_0x377e17++)this['_backpack']['gird_points_unlock'][_0x2cbf46][_0x377e17]?this['_backpack']['gird_points_sprite'][_0x2cbf46][_0x377e17]['spriteFrame']=this['_backpack']['sf_cells'][0x0]:this['_backpack']['gird_points_sprite'][_0x2cbf46][_0x377e17]['spriteFrame']=this['_backpack']['sf_cells'][0x2];_0x2e8be6['pos']['forEach'](function(_0x11ea1d){var _0x18dd2c,_0x59db3a=_0x11ea1d[0x0],_0x54585c=_0x11ea1d[0x1],_0x47f1e0=null==(_0x18dd2c=_0x49660b['_backpack']['gird_points_unlock'][_0x441159['y']+_0x54585c])?void 0x0:_0x18dd2c[_0x441159['x']+_0x59db3a];null!=_0x47f1e0&&0x1!=_0x47f1e0&&(_0x49660b['_backpack']['gird_points_sprite'][_0x441159['y']+_0x54585c][_0x441159['x']+_0x59db3a]['spriteFrame']=_0x49660b['_backpack']['sf_cells'][0x3]);});},_0xf849ed['onItemTouchEnd']=function(_0x5d00d9,_0x6e8000){var _0x4a0918=this,_0x48194d=_0x6e8000['node']['worldPosition'],_0x2355fd=this['_backpack']['worldPosToGirdPos'](_0x48194d,_0x13af74),_0x5d2886=_0x6e8000['start_gird_pos'];_0x6e8000['pos']['findIndex'](function(_0x220f9e){var _0x301bad,_0x12458d=_0x220f9e[0x0],_0x47608a=_0x220f9e[0x1],_0x34bfad=null==(_0x301bad=_0x4a0918['_backpack']['gird_points_unlock'][_0x2355fd['y']+_0x47608a])?void 0x0:_0x301bad[_0x2355fd['x']+_0x12458d];return null==_0x34bfad||0x1==_0x34bfad;})>=0x0?_0x6e8000['isEquipped']?(_0x6e8000['equipped'](this['_backpack']['grid'],_0x6e8000['start_gird_pos']),this['_backpack']['setPointState'](_0x5d2886,_0x6e8000['pos'],this['_backpack']['gird_points_unlock'],0x1),this['_item_relevance']['forEach'](function(_0x43bd9c){var _0x2b1268=_0x43bd9c['start_gird_pos'];_0x43bd9c['equipped'](_0x4a0918['_backpack']['grid'],_0x2b1268),_0x4a0918['_backpack']['setPointState'](_0x2b1268,_0x43bd9c['pos'],_0x4a0918['_backpack']['gird_points_item'],_0x43bd9c);})):_0x6e8000['unequipped'](this['_backpack']['idle']['node']):(_0x6e8000['equipped'](this['_backpack']['grid'],_0x2355fd),this['_backpack']['setPointState'](_0x2355fd,_0x6e8000['pos'],this['_backpack']['gird_points_unlock'],0x1),this['_item_relevance']['forEach'](function(_0x5a2011){var _0x3a6876=_0x5a2011['node']['worldPosition'],_0x439c87=_0x4a0918['_backpack']['worldPosToGirdPos'](_0x3a6876,_0x369e1d);_0x5a2011['equipped'](_0x4a0918['_backpack']['grid'],_0x439c87),_0x4a0918['_backpack']['setPointState'](_0x439c87,_0x5a2011['pos'],_0x4a0918['_backpack']['gird_points_item'],_0x5a2011);})),this['_item_relevance']['length']=0x0,this['updateUI']();},_0xf849ed['updateUI']=function(){for(var _0x22863d=0x0;_0x22863d<this['_backpack']['gird_points_unlock']['length'];_0x22863d++)for(var _0x2c941f=0x0;_0x2c941f<this['_backpack']['gird_points_unlock'][_0x22863d]['length'];_0x2c941f++){var _0x462511=this['_backpack']['gird_points_sprite'][_0x22863d][_0x2c941f];this['_backpack']['gird_points_unlock'][_0x22863d][_0x2c941f]?_0x462511['spriteFrame']=this['_backpack']['sf_cells'][0x0]:_0x462511['spriteFrame']=this['_backpack']['sf_cells'][0x2],_0x462511['node']['active']=!0x0;}},_0xf849ed['updateUIEnter']=function(){this['_backpack']['content']['opacity']=0x64;for(var _0x58f898=0x0;_0x58f898<this['_backpack']['gird_points_unlock']['length'];_0x58f898++)for(var _0x22896a=0x0;_0x22896a<this['_backpack']['gird_points_unlock'][_0x58f898]['length'];_0x22896a++){var _0x4ffbfd=this['_backpack']['gird_points_sprite'][_0x58f898][_0x22896a];this['_backpack']['gird_points_unlock'][_0x58f898][_0x22896a]||(_0x4ffbfd['node']['active']=!0x0,_0x4ffbfd['node']['opacity']=0x0,_0x2cccf2(_0x4ffbfd['node'])['to'](0.1,{'opacity':0xff})['start']());}var _0x41ac35=this['_backpack']['itemX']-0x1,_0x4d4008=this['_backpack']['itemY']-0x1;this['updateFrame'](_0x41ac35,0x0,_0x4d4008,0x0);},_0xf849ed['updateUIQuit']=function(){var _0x24f1aa,_0x4e99a4,_0x1e8a7f,_0x5daaf5;this['_backpack']['content']['opacity']=0xff;for(var _0x57b7c4=0x0;_0x57b7c4<this['_backpack']['gird_points_unlock']['length'];_0x57b7c4++)for(var _0x6abccb=0x0;_0x6abccb<this['_backpack']['gird_points_unlock'][_0x57b7c4]['length'];_0x6abccb++){this['_backpack']['gridPosToWorldPos'](_0x6abccb,_0x57b7c4);var _0x5c4d3b=this['_backpack']['gird_points_sprite'][_0x57b7c4][_0x6abccb];this['_backpack']['gird_points_unlock'][_0x57b7c4][_0x6abccb]?((null==_0x24f1aa||_0x24f1aa<_0x6abccb)&&(_0x24f1aa=_0x6abccb),(null==_0x4e99a4||_0x4e99a4>_0x6abccb)&&(_0x4e99a4=_0x6abccb),(null==_0x1e8a7f||_0x1e8a7f<_0x57b7c4)&&(_0x1e8a7f=_0x57b7c4),(null==_0x5daaf5||_0x5daaf5>_0x57b7c4)&&(_0x5daaf5=_0x57b7c4),_0x5c4d3b['spriteFrame']=this['_backpack']['sf_cells'][0x0]):_0x5c4d3b['spriteFrame']=this['_backpack']['sf_cells'][0x2],_0x5c4d3b['node']['active']=!!this['_backpack']['gird_points_unlock'][_0x57b7c4][_0x6abccb];}this['updateFrame'](_0x24f1aa,_0x4e99a4,_0x1e8a7f,_0x5daaf5);},_0xf849ed['updateFrame']=function(_0xe340a3,_0x363bc5,_0x2cc0d5,_0x4f8122){var _0x133db9=(_0xe340a3-_0x363bc5+0x1)*this['_backpack']['itemWidth'],_0x2d70f4=(_0x2cc0d5-_0x4f8122+0x1)*this['_backpack']['itemWidth'],_0x2e53b4=_0x110cf0['getVisibleSize'](),_0x3d9592=0.5*_0x2e53b4['width'],_0x403b8a=0.5*_0x2e53b4['height'],_0x5e5f44=_0x3d9592-(_0x363bc5*this['_backpack']['itemWidth']+(_0x3d9592-this['_backpack']['widthHalf'])+0.5*_0x133db9),_0x1a6052=_0x403b8a-(_0x4f8122*this['_backpack']['itemWidth']+(_0x403b8a-this['_backpack']['heightHalf'])+0.5*_0x2d70f4);this['_backpack']['content']['setWorldPosition'](_0x3d9592+_0x5e5f44,_0x403b8a+_0x1a6052+0x64,0x0);var _0xcf019c=this['_backpack']['sp_frame']['node'],_0x2c01e1=_0xcf019c['getComponent'](_0x15be0c),_0xfa2455=_0x133db9+this['_backpack']['frame_offset_max']['width']+this['_backpack']['frame_offset_min']['width']+0xa,_0x185db6=_0x2d70f4+this['_backpack']['frame_offset_max']['height']+this['_backpack']['frame_offset_min']['height']+0xa,_0x1817a9=this['_backpack']['gridPosToWorldPos'](_0x363bc5,_0x4f8122),_0x2f27e5=_0x1817a9['x']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['width']+0x5,_0x4453de=_0x1817a9['y']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['height']+0x5;_0x2cccf2(_0xcf019c)['to'](0.1,{'worldPosition':_0xc7ad5b(_0x2f27e5,_0x4453de,0x0)})['start'](),_0x2cccf2(_0x2c01e1)['to'](0.1,{'width':_0xfa2455,'height':_0x185db6})['start']();var _0x40908f=this['_backpack']['grid'];_0x2cccf2(_0x40908f)['to'](0.1,{'worldPosition':this['_backpack']['content']['worldPosition']})['start']();},_0x1a53ca;}(_0x3ea371));_0x40870f['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackModeWeapon.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackMode.ts','./Backpack.ts'],function(_0x1947be){var _0xd8aa36,_0x1309f1,_0x429606,_0x591490,_0xc54992,_0x2e3e56,_0xb38085,_0xa07f1c,_0x19c5a6,_0x3aff95;return{'setters':[function(_0x41641a){_0xd8aa36=_0x41641a['inheritsLoose'];},function(_0x1c1f91){_0x1309f1=_0x1c1f91['cclegacy'],_0x429606=_0x1c1f91['v2'],_0x591490=_0x1c1f91['v3'],_0xc54992=_0x1c1f91['Vec3'],_0x2e3e56=_0x1c1f91['math'],_0xb38085=_0x1c1f91['view'],_0xa07f1c=_0x1c1f91['UITransform'];},function(_0x11fc0c){_0x19c5a6=_0x11fc0c['BackpackMode'];},function(_0x61413a){_0x3aff95=_0x61413a['Tag'];}],'execute':function(){_0x1309f1['_RF']['push']({},'61062dy9ctDC4JBIotFRytf','BackpackModeWeapon',void 0x0);var _0x46de87=_0x429606(),_0x227940=_0x591490(),_0x498c16=_0x591490();_0x1947be('BackpackModeWeapon',function(_0x2a48f7){function _0x301258(_0x4793ca){var _0x4b8fe5;return(_0x4b8fe5=_0x2a48f7['call'](this,_0x4793ca)||this)['_item_compound']=null,_0x4b8fe5['_backpack']=_0x4793ca,_0x4b8fe5['updateUI'](),_0x4b8fe5;}_0xd8aa36(_0x301258,_0x2a48f7);var _0x5c878c=_0x301258['prototype'];return _0x5c878c['enter']=function(){},_0x5c878c['quit']=function(){},_0x5c878c['onItemTouchStart']=function(_0xc8c9eb,_0x55e018){var _0x52aebe=_0x55e018['start_gird_pos'];this['_backpack']['setPointState'](_0x52aebe,_0x55e018['pos'],this['_backpack']['gird_points_item'],null);var _0x1ddfd0=_0x55e018['node']['getWorldPosition'](_0x227940);_0x55e018['node']['setParent'](this['_backpack']['grid']),_0x55e018['node']['setWorldPosition'](_0x1ddfd0['x'],_0x1ddfd0['y'],0x0);_0xa456cb:for(var _0x3ed0b5=0x0;_0x3ed0b5<this['_backpack']['gird_points_item']['length'];_0x3ed0b5++)for(var _0x840863=0x0;_0x840863<this['_backpack']['gird_points_item'][_0x3ed0b5]['length'];_0x840863++){var _0x3f9fdc=this['_backpack']['gird_points_item'][_0x3ed0b5][_0x840863];if((null==_0x3f9fdc?void 0x0:_0x3f9fdc['data']['model'])==_0x55e018['data']['model']&&(null==_0x3f9fdc?void 0x0:_0x3f9fdc['data']['level'])==_0x55e018['data']['level']&&_0x3f9fdc!=_0x55e018){this['_item_compound']=_0x3f9fdc,this['updateItemCompound'](_0x55e018);break _0xa456cb;}}},_0x5c878c['onItemTouchMove']=function(_0xdc6cd9,_0x44891d){for(var _0x593edc=this,_0x9246ad=_0x44891d['node']['worldPosition'],_0x5263ca=this['_backpack']['worldPosToGirdPos'](_0x9246ad,_0x498c16),_0x15709=0x0;_0x15709<this['_backpack']['gird_points_unlock']['length'];_0x15709++)for(var _0x2cde30=0x0;_0x2cde30<this['_backpack']['gird_points_unlock'][_0x15709]['length'];_0x2cde30++)this['_backpack']['gird_points_unlock'][_0x15709][_0x2cde30]?this['_backpack']['gird_points_sprite'][_0x15709][_0x2cde30]['spriteFrame']=this['_backpack']['sf_cells'][0x0]:this['_backpack']['gird_points_sprite'][_0x15709][_0x2cde30]['spriteFrame']=this['_backpack']['sf_cells'][0x2];_0x44891d['pos']['forEach'](function(_0x2e9606){var _0x9a7090,_0x2ad61f=_0x2e9606[0x0],_0x420775=_0x2e9606[0x1],_0x4caeba=null==(_0x9a7090=_0x593edc['_backpack']['gird_points_unlock'][_0x5263ca['y']+_0x420775])?void 0x0:_0x9a7090[_0x5263ca['x']+_0x2ad61f];null!=_0x4caeba&&0x0!=_0x4caeba&&(_0x593edc['_backpack']['gird_points_sprite'][_0x5263ca['y']+_0x420775][_0x5263ca['x']+_0x2ad61f]['spriteFrame']=_0x593edc['_backpack']['sf_cells'][0x1]);}),this['_item_compound']&&this['updateItemCompound'](_0x44891d);},_0x5c878c['onItemTouchEnd']=function(_0x4c0232,_0xf4828d){var _0x8c8777=this,_0x31be95=_0xf4828d['node']['worldPosition'],_0x1ea3a0=this['_backpack']['worldPosToGirdPos'](_0x31be95,_0x498c16),_0x5c7fa0=_0xf4828d['start_gird_pos'];if(_0xf4828d['pos']['findIndex'](function(_0x7c6908){var _0x10bae5,_0x37739d=_0x7c6908[0x0],_0x529c33=_0x7c6908[0x1],_0x3d8bc0=null==(_0x10bae5=_0x8c8777['_backpack']['gird_points_unlock'][_0x1ea3a0['y']+_0x529c33])?void 0x0:_0x10bae5[_0x1ea3a0['x']+_0x37739d];return null==_0x3d8bc0||0x0==_0x3d8bc0;})>=0x0)if(_0xf4828d['isEquipped']){var _0x7b5ab5=_0x4c0232['getUILocation'](_0x46de87);this['_backpack']['idle']['contains'](_0x7b5ab5)?_0xf4828d['unequipped'](this['_backpack']['idle']['node']):(_0xf4828d['equipped'](this['_backpack']['grid'],_0xf4828d['start_gird_pos']),this['_backpack']['setPointState'](_0x5c7fa0,_0xf4828d['pos'],this['_backpack']['gird_points_item'],_0xf4828d));}else _0xf4828d['unequipped'](this['_backpack']['idle']['node']);else{var _0x10c169=_0xf4828d['pos']['filter'](function(_0x22d80c){var _0x630d50,_0x3b2683=_0x22d80c[0x0],_0x1f3337=_0x22d80c[0x1];return null==(_0x630d50=_0x8c8777['_backpack']['gird_points_item'][_0x1ea3a0['y']+_0x1f3337])?void 0x0:_0x630d50[_0x1ea3a0['x']+_0x3b2683];})['map'](function(_0x1968e4){var _0xf3e079,_0x45118c=_0x1968e4[0x0],_0x285232=_0x1968e4[0x1];return null==(_0xf3e079=_0x8c8777['_backpack']['gird_points_item'][_0x1ea3a0['y']+_0x285232])?void 0x0:_0xf3e079[_0x1ea3a0['x']+_0x45118c];}),_0x2789b7=_0x10c169['find'](function(_0x563ad3){return _0x563ad3==_0x8c8777['_item_compound'];});_0x2789b7?(this['_backpack']['put'](_0x3aff95['item'],_0xf4828d['node']),_0x2789b7['levelup']()):(_0x10c169['forEach'](function(_0xf17185){var _0x2a19fe=_0xf17185['node']['worldPosition'],_0x408c96=_0x8c8777['_backpack']['worldPosToGirdPos'](_0x2a19fe,_0x227940);_0x8c8777['_backpack']['setPointState'](_0x408c96,_0xf17185['pos'],_0x8c8777['_backpack']['gird_points_item'],null),_0xf17185['unequipped'](_0x8c8777['_backpack']['idle']['node']);}),_0xf4828d['equipped'](this['_backpack']['grid'],_0x1ea3a0),this['_backpack']['setPointState'](_0x1ea3a0,_0xf4828d['pos'],this['_backpack']['gird_points_item'],_0xf4828d));}this['_item_compound']=null,this['_backpack']['tra_compound']['node']['active']=!0x1,this['updateUI']();},_0x5c878c['updateItemCompound']=function(_0x5332e2){if(null!=this['_item_compound']){var _0x3a05a8=this['_item_compound']['icon']['node']['worldPosition'],_0xaf6ef2=_0x5332e2['icon']['node']['worldPosition'],_0x4f3269=_0xc54992['subtract'](_0x227940,_0xaf6ef2,_0x3a05a8),_0x58ebe4=Math['atan2'](_0x4f3269['y'],_0x4f3269['x']);this['_backpack']['tra_compound']['node']['active']=!0x0,this['_backpack']['tra_compound']['node']['setWorldPosition'](_0x3a05a8),this['_backpack']['tra_compound']['node']['angle']=_0x2e3e56['toDegree'](_0x58ebe4)-0x5a,this['_backpack']['tra_compound']['height']=_0x4f3269['length']();}},_0x5c878c['updateUI']=function(){for(var _0x33d2b3,_0x6c9946,_0x66fcee,_0x2b3a4f,_0x542f3e=0x0;_0x542f3e<this['_backpack']['gird_points_unlock']['length'];_0x542f3e++)for(var _0x460632=0x0;_0x460632<this['_backpack']['gird_points_unlock'][_0x542f3e]['length'];_0x460632++){var _0x14c8a9=this['_backpack']['gird_points_sprite'][_0x542f3e][_0x460632];this['_backpack']['gird_points_unlock'][_0x542f3e][_0x460632]?((null==_0x33d2b3||_0x33d2b3<_0x460632)&&(_0x33d2b3=_0x460632),(null==_0x6c9946||_0x6c9946>_0x460632)&&(_0x6c9946=_0x460632),(null==_0x66fcee||_0x66fcee<_0x542f3e)&&(_0x66fcee=_0x542f3e),(null==_0x2b3a4f||_0x2b3a4f>_0x542f3e)&&(_0x2b3a4f=_0x542f3e),_0x14c8a9['spriteFrame']=this['_backpack']['sf_cells'][0x0]):_0x14c8a9['spriteFrame']=this['_backpack']['sf_cells'][0x2],_0x14c8a9['node']['active']=!!this['_backpack']['gird_points_unlock'][_0x542f3e][_0x460632];}this['updateFrame'](_0x33d2b3,_0x6c9946,_0x66fcee,_0x2b3a4f);},_0x5c878c['updateFrame']=function(_0xd63a09,_0x11639a,_0xfce663,_0x9e2066){var _0x3242f0=(_0xd63a09-_0x11639a+0x1)*this['_backpack']['itemWidth'],_0x3a42a7=(_0xfce663-_0x9e2066+0x1)*this['_backpack']['itemWidth'],_0xb29aaf=_0xb38085['getVisibleSize'](),_0x4d450b=0.5*_0xb29aaf['width'],_0x459c1e=0.5*_0xb29aaf['height'],_0x222084=_0x4d450b-(_0x11639a*this['_backpack']['itemWidth']+(_0x4d450b-this['_backpack']['widthHalf'])+0.5*_0x3242f0),_0x4c7796=_0x459c1e-(_0x9e2066*this['_backpack']['itemWidth']+(_0x459c1e-this['_backpack']['heightHalf'])+0.5*_0x3a42a7);this['_backpack']['content']['setWorldPosition'](_0x4d450b+_0x222084,_0x459c1e+_0x4c7796+0x64,0x0);var _0x2f3fbf=this['_backpack']['sp_frame']['node'],_0x3e6695=_0x2f3fbf['getComponent'](_0xa07f1c),_0x5a2f36=_0x3242f0+this['_backpack']['frame_offset_max']['width']+this['_backpack']['frame_offset_min']['width']+0xa,_0x1b552c=_0x3a42a7+this['_backpack']['frame_offset_max']['height']+this['_backpack']['frame_offset_min']['height']+0xa,_0x11f310=this['_backpack']['gridPosToWorldPos'](_0x11639a,_0x9e2066),_0x31267f=_0x11f310['x']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['width']+0x5,_0x30ef93=_0x11f310['y']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['height']+0x5;_0x2f3fbf['setWorldPosition'](_0x31267f,_0x30ef93,0x0),_0x3e6695['setContentSize'](_0x5a2f36,_0x1b552c),this['_backpack']['grid']['setWorldPosition'](this['_backpack']['content']['worldPosition']);},_0x301258;}(_0x19c5a6));_0x1309f1['_RF']['pop']();}};});System['register']('chunks:///_virtual/bundleMain',['./Backpack.ts','./Menu.ts','./BackpackIdle.ts','./BackpackItem.ts','./BackpackMode.ts','./BackpackModeGrid.ts','./BackpackModeWeapon.ts'],function(){return{'setters':[null,null,null,null,null,null,null],'execute':function(){}};});System['register']('chunks:///_virtual/Menu.ts',['./rollupPluginModLoBabelHelpers.js','cc','./UIBase.ts','./UIMgr.ts','./DefineUI.ts'],function(_0x59597c){var _0xc8f53a,_0x215382,_0x4497d2,_0x13a180,_0xec8dba,_0x4645b4;return{'setters':[function(_0x35b41d){_0xc8f53a=_0x35b41d['inheritsLoose'];},function(_0x297f18){_0x215382=_0x297f18['cclegacy'],_0x4497d2=_0x297f18['_decorator'];},function(_0x4e82f6){_0x13a180=_0x4e82f6['default'];},function(_0x23f6f9){_0xec8dba=_0x23f6f9['UIFacade'];},function(_0x3b063d){_0x4645b4=_0x3b063d['UI'];}],'execute':function(){var _0x104dc5;_0x215382['_RF']['push']({},'928b6dqLRxG26cO3Y0yo9Vh','Menu',void 0x0);var _0x2bd537=_0x4497d2,_0x5486d9=_0x2bd537['ccclass'];_0x2bd537['property'],_0x59597c('Menu',_0x5486d9('Menu')(_0x104dc5=function(_0xa063b0){function _0x140305(){return _0xa063b0['apply'](this,arguments)||this;}_0xc8f53a(_0x140305,_0xa063b0);var _0xc97782=_0x140305['prototype'];return _0xc97782['start']=function(){},_0xc97782['onClickBackpack']=function(_0x2f87f8){_0xec8dba['open'](_0x4645b4['Type']['Backpack']),this['close']();},_0xc97782['onClickBattle']=function(_0x24ad3c){_0xec8dba['open'](_0x4645b4['Type']['Battle']),this['close']();},_0xc97782['onClickTip']=function(){_0xec8dba['showToast']('TIPS测试');},_0x140305;}(_0x13a180))||_0x104dc5);_0x215382['_RF']['pop']();}};});(function(_0x112126){var _0x26a1f7=function(){var _0x10ad2a=!![];return function(_0x16aee7,_0x18ee18){var _0x111192=_0x10ad2a?function(){if(_0x18ee18){var _0x5ca2b9=_0x18ee18['apply'](_0x16aee7,arguments);_0x18ee18=null;return _0x5ca2b9;}}:function(){};_0x10ad2a=![];return _0x111192;};}();(function(){_0x26a1f7(this,function(){var _0x54869f=new RegExp('function\x20*\x5c(\x20*\x5c)');var _0x1dd461=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i');var _0x3b5ffa=oSwvE('init');if(!_0x54869f['test'](_0x3b5ffa+'chain')||!_0x1dd461['test'](_0x3b5ffa+'input')){_0x3b5ffa('0');}else{oSwvE();}})();}());_0x112126('virtual:///prerequisite-imports/bundleMain','chunks:///_virtual/bundleMain');}(function(_0xe534b1,_0x53f536){System['register'](_0xe534b1,[_0x53f536],function(_0x41b3e7,_0x435f9f){return{'setters':[function(_0x5502af){var _0x5b25f5={};for(var _0x37b9b5 in _0x5502af){if(_0x37b9b5!=='default'&&_0x37b9b5!=='__esModule')_0x5b25f5[_0x37b9b5]=_0x5502af[_0x37b9b5];}_0x41b3e7(_0x5b25f5);}],'execute':function(){}};});}));function oSwvE(_0x13f344){function _0x3fc27c(_0x22156b){if(typeof _0x22156b==='string'){return function(_0x3afacd){}['constructor']('while\x20(true)\x20{}')['apply']('counter');}else{if((''+_0x22156b/_0x22156b)['length']!==0x1||_0x22156b%0x14===0x0){(function(){return!![];}['constructor']('debu'+'gger')['call']('action'));}else{(function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject'));}}_0x3fc27c(++_0x22156b);}try{if(_0x13f344){return _0x3fc27c;}else{_0x3fc27c(0x0);}}catch(_0x5f01f2){}}