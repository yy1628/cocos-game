System['register']('chunks:///_virtual/Backpack.ts',['./rollupPluginModLoBabelHelpers.js','cc','./UIBase.ts','./BackpackItem.ts','./BackpackModeGrid.ts','./BackpackModeWeapon.ts','./BackpackIdle.ts'],function(_0xb62d48){var _0x2b8e84,_0x359b92,_0x4b433e,_0xa55a32,_0xc62ce6,_0x20b4e7,_0x2a8830,_0x3ee582,_0x5f3675,_0x524fd8,_0x546304,_0x5d2aaa,_0x4a228c,_0x2c5d3a,_0x1a0392,_0x4bebba,_0x5129a9,_0x39e606,_0x49570a,_0x2035d3;return{'setters':[function(_0x16a1f4){_0x2b8e84=_0x16a1f4['applyDecoratedDescriptor'],_0x359b92=_0x16a1f4['inheritsLoose'],_0x4b433e=_0x16a1f4['initializerDefineProperty'],_0xa55a32=_0x16a1f4['assertThisInitialized'],_0xc62ce6=_0x16a1f4['createForOfIteratorHelperLoose'];},function(_0x4b4c6d){_0x20b4e7=_0x4b4c6d['cclegacy'],_0x2a8830=_0x4b4c6d['v2'],_0x3ee582=_0x4b4c6d['v3'],_0x5f3675=_0x4b4c6d['Prefab'],_0x524fd8=_0x4b4c6d['SpriteFrame'],_0x546304=_0x4b4c6d['UITransform'],_0x5d2aaa=_0x4b4c6d['Sprite'],_0x4a228c=_0x4b4c6d['Node'],_0x2c5d3a=_0x4b4c6d['_decorator'],_0x1a0392=_0x4b4c6d['size'];},function(_0x50e0b5){_0x4bebba=_0x50e0b5['default'];},function(_0x22471c){_0x5129a9=_0x22471c['default'];},function(_0x5ed15d){_0x39e606=_0x5ed15d['BackpackModeGrid'];},function(_0x543d6a){_0x49570a=_0x543d6a['BackpackModeWeapon'];},function(_0x504e52){_0x2035d3=_0x504e52['BackpackIdle'];}],'execute':function(){var _0x187b1f,_0x2dff41,_0xd8b8e1,_0x286160,_0x3d5140,_0x421486,_0x3c3d09,_0xb982df,_0x4ebfb2,_0x182d43,_0x59fe23,_0x58c10a,_0x5f1f58,_0x8f4c86,_0x1e0d6e,_0x131557,_0x14866c,_0x5c4f3a,_0x666ec8;_0x20b4e7['_RF']['push']({},'11936DThM9HkarHrrwPyr/e','Backpack',void 0x0);var _0x4d5410=_0x2c5d3a,_0x376ace=_0x4d5410['ccclass'],_0xc6d592=_0x4d5410['property'],_0x3eec02=_0x2a8830(),_0x1581cd=_0x3ee582(),_0x87c480=_0xb62d48('Tag',function(_0x5e483e){return _0x5e483e[_0x5e483e['item']=0x0]='item',_0x5e483e;}({})),_0x3f5698=_0xb62d48('EnumModeType',function(_0x487327){return _0x487327[_0x487327['None']=-0x1]='None',_0x487327[_0x487327['Weapon']=0x0]='Weapon',_0x487327[_0x487327['Grid']=0x1]='Grid',_0x487327;}({}));_0xb62d48('Backpack',(_0x187b1f=_0x376ace('Backpack'),_0x2dff41=_0xc6d592(_0x5f3675),_0xd8b8e1=_0xc6d592([_0x524fd8]),_0x286160=_0xc6d592(_0x546304),_0x3d5140=_0xc6d592(_0x5d2aaa),_0x421486=_0xc6d592({'type':_0x4a228c,'tooltip':'锚点，不放节点到内部'}),_0x3c3d09=_0xc6d592({'type':_0x4a228c,'tooltip':'网格'}),_0xb982df=_0xc6d592({'type':_0x2035d3,'tooltip':'闲置区'}),_0x4ebfb2=_0xc6d592({'type':_0x4a228c,'tooltip':''}),_0x187b1f((_0x58c10a=_0x2b8e84((_0x59fe23=function(_0x302b63){function _0xb2a85a(){for(var _0x42aa3f,_0x141b57=arguments['length'],_0x498ff8=new Array(_0x141b57),_0x206390=0x0;_0x206390<_0x141b57;_0x206390++)_0x498ff8[_0x206390]=arguments[_0x206390];return _0x42aa3f=_0x302b63['call']['apply'](_0x302b63,[this]['concat'](_0x498ff8))||this,_0x4b433e(_0x42aa3f,'item',_0x58c10a,_0xa55a32(_0x42aa3f)),_0x4b433e(_0x42aa3f,'sf_cells',_0x5f1f58,_0xa55a32(_0x42aa3f)),_0x4b433e(_0x42aa3f,'tra_compound',_0x8f4c86,_0xa55a32(_0x42aa3f)),_0x4b433e(_0x42aa3f,'sp_frame',_0x1e0d6e,_0xa55a32(_0x42aa3f)),_0x4b433e(_0x42aa3f,'content',_0x131557,_0xa55a32(_0x42aa3f)),_0x4b433e(_0x42aa3f,'grid',_0x14866c,_0xa55a32(_0x42aa3f)),_0x4b433e(_0x42aa3f,'idle',_0x5c4f3a,_0xa55a32(_0x42aa3f)),_0x4b433e(_0x42aa3f,'modes',_0x666ec8,_0xa55a32(_0x42aa3f)),_0x42aa3f['_mode']=[],_0x42aa3f['_type']=_0x3f5698['None'],_0x42aa3f['gird_points_sprite']=[],_0x42aa3f['gird_points_unlock']=[],_0x42aa3f['gird_points_item']=[],_0x42aa3f['itemX']=0x5,_0x42aa3f['itemY']=0x7,_0x42aa3f['itemWidth']=0x82,_0x42aa3f['widthHalf']=_0x42aa3f['itemX']*_0x42aa3f['itemWidth']*0.5,_0x42aa3f['heightHalf']=_0x42aa3f['itemY']*_0x42aa3f['itemWidth']*0.5,_0x42aa3f['frame_offset_max']=_0x1a0392(0x2a,0x46),_0x42aa3f['frame_offset_min']=_0x1a0392(0x37,0x3c),_0x42aa3f;}_0x359b92(_0xb2a85a,_0x302b63);var _0x129c34=_0xb2a85a['prototype'];return _0x129c34['onOpen']=function(){this['addItemPool'](_0x87c480['item'],this['item'],_0x5129a9),this['gird_points_unlock']=[[0x0,0x0,0x0,0x0,0x0],[0x0,0x0,0x0,0x0,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x1,0x1,0x1,0x0],[0x0,0x0,0x0,0x0,0x0],[0x0,0x0,0x0,0x0,0x0]];for(var _0xfd3339=0x0;_0xfd3339<this['gird_points_unlock']['length'];_0xfd3339++){this['gird_points_sprite'][_0xfd3339]=[],this['gird_points_item'][_0xfd3339]=[];for(var _0x212ccb=0x0;_0x212ccb<this['gird_points_unlock'][_0xfd3339]['length'];_0x212ccb++){this['gird_points_item'][_0xfd3339][_0x212ccb]=null;var _0x55f9e1=this['gridPosToWorldPos'](_0x212ccb,_0xfd3339),_0x192e2d=new _0x4a228c(_0x212ccb+','+_0xfd3339);_0x192e2d['setParent'](this['grid']),_0x192e2d['setWorldPosition'](_0x55f9e1['x'],_0x55f9e1['y'],0x0);var _0x304fd4=_0x192e2d['addComponent'](_0x5d2aaa);_0x304fd4['spriteFrame']=this['sf_cells'][0x0],this['gird_points_sprite'][_0xfd3339][_0x212ccb]=_0x304fd4;}}this['tra_compound']['node']['active']=!0x1,this['updateItemAddition'](),this['updateItemWeapon'](),this['_mode']=[new _0x49570a(this),new _0x39e606(this)],this['onSwitchMode'](_0x3f5698['Weapon']);},_0x129c34['onSwitchMode']=function(_0x42521b){var _0xf55445,_0x55d597;null==(_0xf55445=this['_mode'][this['_type']])||_0xf55445['quit'](),this['_type']=_0x42521b,null==(_0x55d597=this['_mode'][this['_type']])||_0x55d597['enter'](),this['modes']['children']['forEach'](function(_0x3f20d3,_0xe6019f){return _0x3f20d3['active']=_0x42521b==_0xe6019f;});},_0x129c34['onItemTouchStart']=function(_0xd0d13c,_0x3f3f51){_0x3f3f51['data']['type']==_0x3f5698['Weapon']&&this['_type']==_0x3f5698['Grid']||(_0x3f3f51['data']['type']==_0x3f5698['Grid']&&this['_type']!=_0x3f5698['Grid']&&this['onSwitchMode'](_0x3f5698['Grid']),this['_mode'][this['_type']]['onItemTouchStart'](_0xd0d13c,_0x3f3f51),this['idle']['onItemTouchStart'](_0xd0d13c,_0x3f3f51));},_0x129c34['onItemTouchMove']=function(_0x1f50d1,_0x4770b7){if(_0x4770b7['data']['type']!=_0x3f5698['Weapon']||this['_type']!=_0x3f5698['Grid']){var _0x47645a=_0x1f50d1['getUIDelta'](_0x3eec02);_0x4770b7['node']['x']+=_0x47645a['x'],_0x4770b7['node']['y']+=_0x47645a['y'],this['_mode'][this['_type']]['onItemTouchMove'](_0x1f50d1,_0x4770b7),this['idle']['onItemTouchMove'](_0x1f50d1,_0x4770b7);}},_0x129c34['onItemTouchEnd']=function(_0x3e89a1,_0x3f23b8){_0x3f23b8['data']['type']==_0x3f5698['Weapon']&&this['_type']==_0x3f5698['Grid']||(this['_mode'][this['_type']]['onItemTouchEnd'](_0x3e89a1,_0x3f23b8),this['idle']['onItemTouchEnd'](_0x3e89a1,_0x3f23b8));},_0x129c34['onClickConfirm']=function(){this['onSwitchMode'](_0x3f5698['Weapon']);},_0x129c34['updateItemWeapon']=function(_0x290f8a){_0x290f8a=[{'path':'p3-2-h','model':0x1,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0]]},{'path':'p8-3-vh','model':0x2,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x1,0x0],[0x0,0x1],[0x1,0x1]]},{'path':'p8-3-vh','model':0x2,'level':0x1,'type':0x0,'width':this['itemWidth'],'pos':[[0x1,0x0],[0x0,0x1],[0x1,0x1]]}];for(var _0x545f97,_0x12184e=_0xc62ce6(_0x290f8a);!(_0x545f97=_0x12184e())['done'];){var _0x882a88=_0x545f97['value'];this['generateItemWeapon'](_0x882a88)['unequipped'](this['idle']['node']);}},_0x129c34['generateItemWeapon']=function(_0x329d78){var _0xf869e2=this['get'](_0x87c480['item'])['getComponent'](_0x5129a9);return _0xf869e2['setData'](this,_0x329d78,{'touch_start':this['onItemTouchStart']['bind'](this),'touch_move':this['onItemTouchMove']['bind'](this),'touch_end':this['onItemTouchEnd']['bind'](this)}),_0xf869e2;},_0x129c34['updateItemAddition']=function(_0x2c7738){_0x2c7738=[{'type':0x1,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0]]},{'type':0x1,'width':this['itemWidth'],'pos':[[0x0,0x0],[0x1,0x0],[0x2,0x0]]}];for(var _0x191eae,_0x453b65=_0xc62ce6(_0x2c7738);!(_0x191eae=_0x453b65())['done'];){var _0x27d802=_0x191eae['value'];this['generateItemWeapon'](_0x27d802)['unequipped'](this['idle']['node']);}},_0x129c34['generateItemAddition']=function(_0x276b1c){var _0x381f15=this['get'](_0x87c480['item'])['getComponent'](_0x5129a9);return _0x381f15['setData'](this,_0x276b1c,{'touch_start':this['onItemTouchStart']['bind'](this),'touch_move':this['onItemTouchMove']['bind'](this),'touch_end':this['onItemTouchEnd']['bind'](this)}),_0x381f15;},_0x129c34['setPointState']=function(_0x1000ac,_0x5ebb72,_0x5b779e,_0x3223ed){var _0x5def2a=this;_0x5ebb72['forEach'](function(_0x21430c){var _0xe6e75b=_0x1000ac['x']+_0x21430c[0x0],_0x326c90=_0x1000ac['y']+_0x21430c[0x1];_0xe6e75b<0x0||_0x326c90<0x0||_0xe6e75b>=_0x5def2a['itemX']||_0x326c90>=_0x5def2a['itemY']||(_0x5b779e[_0x326c90][_0xe6e75b]=_0x3223ed);});},_0x129c34['gridPosToWorldPos']=function(){var _0x2847c1=arguments[0x0],_0x30e322=arguments[0x1],_0xbc0fe1=arguments[0x2];'number'!=typeof _0x2847c1&&(_0xbc0fe1=_0x30e322,_0x30e322=_0x2847c1['y'],_0x2847c1=_0x2847c1['x']),null==_0xbc0fe1&&(_0xbc0fe1=_0x1581cd);var _0x1b267d=this['itemWidth'];return _0xbc0fe1['x']=(_0x2847c1+0.5)*_0x1b267d,_0xbc0fe1['y']=(_0x30e322+0.5)*_0x1b267d,_0xbc0fe1['x']+=this['content']['worldPosition']['x']-this['widthHalf'],_0xbc0fe1['y']+=this['content']['worldPosition']['y']-this['heightHalf'],_0xbc0fe1;},_0x129c34['worldPosToGirdPos']=function(){var _0x674ae8=arguments[0x0],_0x22f96a=arguments[0x1],_0x90b642=arguments[0x2];'number'!=typeof _0x674ae8&&(_0x90b642=_0x22f96a,_0x22f96a=_0x674ae8['y'],_0x674ae8=_0x674ae8['x']),null==_0x90b642&&(_0x90b642=_0x1581cd);var _0x410dc1=this['itemWidth'];return _0x90b642['x']=_0x674ae8-this['content']['worldPosition']['x']+this['widthHalf'],_0x90b642['y']=_0x22f96a-this['content']['worldPosition']['y']+this['heightHalf'],_0x90b642['x']=Math['round'](_0x90b642['x']/_0x410dc1-0.5),_0x90b642['y']=Math['round'](_0x90b642['y']/_0x410dc1-0.5),_0x90b642;},_0xb2a85a;}(_0x4bebba))['prototype'],'item',[_0x2dff41],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x5f1f58=_0x2b8e84(_0x59fe23['prototype'],'sf_cells',[_0xd8b8e1],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return[];}}),_0x8f4c86=_0x2b8e84(_0x59fe23['prototype'],'tra_compound',[_0x286160],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x1e0d6e=_0x2b8e84(_0x59fe23['prototype'],'sp_frame',[_0x3d5140],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x131557=_0x2b8e84(_0x59fe23['prototype'],'content',[_0x421486],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x14866c=_0x2b8e84(_0x59fe23['prototype'],'grid',[_0x3c3d09],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x5c4f3a=_0x2b8e84(_0x59fe23['prototype'],'idle',[_0xb982df],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x666ec8=_0x2b8e84(_0x59fe23['prototype'],'modes',[_0x4ebfb2],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x182d43=_0x59fe23))||_0x182d43));_0x20b4e7['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackIdle.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackItem.ts'],function(_0x588904){var _0x3d5249,_0x355a84,_0x243a49,_0x4597b9,_0x228f85,_0x5cfcc0,_0x34e6db,_0x18fad7,_0x2b0cac;return{'setters':[function(_0x2aa79c){_0x3d5249=_0x2aa79c['inheritsLoose'];},function(_0x187b4c){_0x355a84=_0x187b4c['cclegacy'],_0x243a49=_0x187b4c['v2'],_0x4597b9=_0x187b4c['Node'],_0x228f85=_0x187b4c['js'],_0x5cfcc0=_0x187b4c['UITransform'],_0x34e6db=_0x187b4c['_decorator'],_0x18fad7=_0x187b4c['Component'];},function(_0x4af44b){_0x2b0cac=_0x4af44b['default'];}],'execute':function(){var _0x1c5995;_0x355a84['_RF']['push']({},'23adcHHlfVCSZnJTEQtsTrk','BackpackIdle',void 0x0);var _0x211fed=_0x34e6db,_0x20f7c5=_0x211fed['ccclass'],_0x5c5fbd=(_0x211fed['property'],_0x243a49());_0x588904('BackpackIdle',_0x20f7c5('BackpackIdle')(_0x1c5995=function(_0x4aa7a7){function _0x152e0e(){for(var _0x1ee5d2,_0x2fe6d9=arguments['length'],_0x17c990=new Array(_0x2fe6d9),_0x2a5e5a=0x0;_0x2a5e5a<_0x2fe6d9;_0x2a5e5a++)_0x17c990[_0x2a5e5a]=arguments[_0x2a5e5a];return(_0x1ee5d2=_0x4aa7a7['call']['apply'](_0x4aa7a7,[this]['concat'](_0x17c990))||this)['_itemWidth']=0x0,_0x1ee5d2['_itemHandle']=null,_0x1ee5d2['_itemPos']=[],_0x1ee5d2['_items']=[],_0x1ee5d2;}_0x3d5249(_0x152e0e,_0x4aa7a7);var _0x2845a7=_0x152e0e['prototype'];return _0x2845a7['onLoad']=function(){this['node']['on'](_0x4597b9['EventType']['CHILD_ADDED'],this['onChildAdd'],this),this['node']['on'](_0x4597b9['EventType']['CHILD_REMOVED'],this['onChildRemoved'],this);},_0x2845a7['onChildAdd']=function(_0x408f15){var _0x346dcb=_0x408f15['getComponent'](_0x2b0cac);this['_items']['push'](_0x346dcb),this['updateItemWidth'](),this['updateSort'](),this['updatePosition']();},_0x2845a7['onChildRemoved']=function(_0x527b1d){var _0x33a7d3=_0x527b1d['getComponent'](_0x2b0cac);_0x228f85['array']['remove'](this['_items'],_0x33a7d3),this['updateItemWidth'](),this['updateSort'](),this['updatePosition']();},_0x2845a7['onItemTouchStart']=function(_0x1df8ad,_0x1a1225){var _0x1b71df=_0x1df8ad['getUILocation'](_0x5c5fbd);this['contains'](_0x1b71df)&&(this['_itemHandle']=_0x1a1225,this['_items']['push'](this['_itemHandle']),this['updateItemWidth'](),this['updateSort'](),this['updatePosition']());},_0x2845a7['onItemTouchMove']=function(_0x12b00b,_0x14ba20){var _0x119d33=_0x12b00b['getUILocation'](_0x5c5fbd);this['contains'](_0x119d33)?this['_itemHandle']||(this['_itemHandle']=_0x14ba20,this['_items']['push'](this['_itemHandle']),this['updateItemWidth']()):this['_itemHandle']&&(_0x228f85['array']['remove'](this['_items'],this['_itemHandle']),this['_itemHandle']=null,this['updateItemWidth']()),this['updateSort'](),this['updatePosition']();},_0x2845a7['onItemTouchEnd']=function(_0x424511,_0x45af35){this['_itemHandle']&&(_0x228f85['array']['remove'](this['_items'],this['_itemHandle']),this['_itemHandle']=null,this['updateItemWidth']()),this['updateSort'](),this['updatePosition']();},_0x2845a7['contains']=function(_0x53d451){return this['node']['getComponent'](_0x5cfcc0)['getBoundingBoxToWorld']()['contains'](_0x53d451);},_0x2845a7['updateItemWidth']=function(){for(var _0x29d991=0x0,_0x167984=0x0;_0x167984<this['_items']['length'];_0x167984++){_0x29d991+=this['_items'][_0x167984]['maxX']+0x1;}var _0x51bfb7=this['node']['getComponent'](_0x5cfcc0);this['_itemWidth']=_0x51bfb7['width']/_0x29d991;},_0x2845a7['updateSort']=function(){this['_items']['sort'](function(_0x1e586e,_0x1c0148){var _0x586fc5=_0x1e586e['data']['width'];return _0x1e586e['node']['x']+(_0x1e586e['maxX']-0x1)*_0x586fc5*0.5-(_0x1c0148['node']['x']+(_0x1c0148['maxX']-0x1)*_0x586fc5*0.5);});},_0x2845a7['updatePosition']=function(){for(var _0x3f7543=0.5*this['node']['getComponent'](_0x5cfcc0)['width'],_0x35a99a=0x0,_0x13d14a=0x0;_0x13d14a<this['_items']['length'];_0x13d14a++){var _0x6c81c=this['_items'][_0x13d14a];this['_itemPos'][_0x13d14a]=this['_itemWidth']*_0x35a99a-_0x3f7543,_0x35a99a+=_0x6c81c['maxX']+0x1;}},_0x2845a7['update']=function(_0x119d30){for(var _0x362cc7=0x0;_0x362cc7<this['_items']['length'];_0x362cc7++){var _0x1fe366=this['_items'][_0x362cc7];if(this['_itemHandle']!=_0x1fe366){var _0x21ab4b=this['_itemPos'][_0x362cc7],_0x26c8f0=_0x1fe366['node']['x'],_0x59356a=_0x26c8f0+0.2*(_0x21ab4b-_0x26c8f0);_0x1fe366['node']['x']=_0x59356a;}}},_0x152e0e;}(_0x18fad7))||_0x1c5995);_0x355a84['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackItem.ts',['./rollupPluginModLoBabelHelpers.js','cc','./ResKeeper.ts'],function(_0x20f86e){var _0xfaaf77,_0x489a99,_0x3d63bc,_0x1aa027,_0x24e132,_0x2fc0f3,_0x4d94eb,_0x4dccd3,_0x842922,_0x49d774,_0x2203a7,_0x48b0cb,_0x2032d1;return{'setters':[function(_0x41919c){_0xfaaf77=_0x41919c['applyDecoratedDescriptor'],_0x489a99=_0x41919c['inheritsLoose'],_0x3d63bc=_0x41919c['initializerDefineProperty'],_0x1aa027=_0x41919c['assertThisInitialized'],_0x24e132=_0x41919c['createClass'];},function(_0x3cc2e4){_0x2fc0f3=_0x3cc2e4['cclegacy'],_0x4d94eb=_0x3cc2e4['Sprite'],_0x4dccd3=_0x3cc2e4['_decorator'],_0x842922=_0x3cc2e4['v3'],_0x49d774=_0x3cc2e4['Node'],_0x2203a7=_0x3cc2e4['UITransform'],_0x48b0cb=_0x3cc2e4['SpriteFrame'];},function(_0x3d2bc0){_0x2032d1=_0x3d2bc0['default'];}],'execute':function(){var _0x3449c8,_0x399acc,_0x552508,_0xdc902a;_0x2fc0f3['_RF']['push']({},'75a9c0e/rpFHqDEDI955gY4','BackpackItem',void 0x0);var _0x31908b=_0x4dccd3,_0x1422a4=_0x31908b['ccclass'],_0x5348c2=_0x31908b['property'];_0x20f86e('default',(_0x3449c8=_0x5348c2(_0x4d94eb),_0x1422a4((_0xdc902a=_0xfaaf77((_0x552508=function(_0x2c3334){function _0x424930(){for(var _0x3be222,_0x45b7ad=arguments['length'],_0x3fd76d=new Array(_0x45b7ad),_0x6c12cf=0x0;_0x6c12cf<_0x45b7ad;_0x6c12cf++)_0x3fd76d[_0x6c12cf]=arguments[_0x6c12cf];return _0x3be222=_0x2c3334['call']['apply'](_0x2c3334,[this]['concat'](_0x3fd76d))||this,_0x3d63bc(_0x3be222,'icon',_0xdc902a,_0x1aa027(_0x3be222)),_0x3be222['_backpack']=null,_0x3be222['_data']=null,_0x3be222['_touch_start']=null,_0x3be222['_touch_move']=null,_0x3be222['_touch_end']=null,_0x3be222['_isEquipped']=!0x1,_0x3be222['_pos_node']=[],_0x3be222['_pos']=[],_0x3be222['_maxX']=0x0,_0x3be222['_maxY']=0x0,_0x3be222['_start_gird_pos']=_0x842922(),_0x3be222;}_0x489a99(_0x424930,_0x2c3334);var _0x504798=_0x424930['prototype'];return _0x504798['setData']=function(_0x542d48,_0x17b4f0,_0x38c108){var _0x30e085=this;this['_data']=_0x17b4f0,this['_backpack']=_0x542d48,this['_pos']=_0x17b4f0['pos'],this['_touch_start']=_0x38c108['touch_start'],this['_touch_move']=_0x38c108['touch_move'],this['_touch_end']=_0x38c108['touch_end'],this['_isEquipped']=!0x1,this['clear']();for(var _0x133f9a=0x0;_0x133f9a<this['_pos']['length'];_0x133f9a++){var _0x19fb65=this['_pos'][_0x133f9a],_0x2eef33=_0x19fb65[0x0],_0x19f52f=_0x19fb65[0x1],_0x35f279=new _0x49d774(_0x2eef33+','+_0x19f52f);_0x35f279['setParent'](this['node']),_0x35f279['setPosition'](_0x2eef33*this['_data']['width'],_0x19f52f*this['_data']['width']),_0x35f279['addComponent'](_0x2203a7)['setContentSize'](this['_data']['width'],this['_data']['width']),_0x35f279['on'](_0x49d774['EventType']['TOUCH_START'],this['onTouchStart'],this),_0x35f279['on'](_0x49d774['EventType']['TOUCH_MOVE'],this['onTouchMove'],this),_0x35f279['on'](_0x49d774['EventType']['TOUCH_END'],this['onTouchEnd'],this),_0x35f279['on'](_0x49d774['EventType']['TOUCH_CANCEL'],this['onTouchEnd'],this),this['_pos_node']['push'](_0x35f279),(null==this['_maxX']||this['_maxX']<_0x2eef33)&&(this['_maxX']=_0x2eef33),(null==this['_maxY']||this['_maxY']<_0x19f52f)&&(this['_maxY']=_0x19f52f);}if(0x0==this['_data']['type']){var _0x32fda5='/textures/weapon/'+this['_data']['path']+'/spriteFrame';this['asyncLoadBundleRes']('bundleMain',_0x32fda5,_0x48b0cb)['then'](function(_0x35335e){return _0x30e085['icon']['spriteFrame']=_0x35335e;});}else if(0x1==this['_data']['type']){this['asyncLoadBundleRes']('bundleMain','/textures/backpack/ui_cell1/spriteFrame',_0x48b0cb)['then'](function(_0x1e79cb){for(var _0x4de5d3=0x0;_0x4de5d3<_0x30e085['_pos_node']['length'];_0x4de5d3++){var _0x40bd52=_0x30e085['_pos_node'][_0x4de5d3],_0x28698e=_0x40bd52['getComponent'](_0x4d94eb);null==_0x28698e&&(_0x28698e=_0x40bd52['addComponent'](_0x4d94eb)),_0x28698e['spriteFrame']=_0x1e79cb;}});}for(var _0x4e1f85=this['_data']['width']*(this['_maxX']+0x1),_0x23dd9b=this['_data']['width']*(this['_maxY']+0x1),_0x2b5269=this['node']['getComponent'](_0x2203a7),_0x564922=0x1;_0x564922<=this['_maxX'];_0x564922++)_0x2b5269['anchorX']-=0.5*_0x2b5269['anchorX'];for(var _0x223ab4=0x1;_0x223ab4<=this['_maxY'];_0x223ab4++)_0x2b5269['anchorY']-=0.5*_0x2b5269['anchorY'];_0x2b5269['setContentSize'](_0x4e1f85,_0x23dd9b);},_0x504798['clear']=function(){for(var _0x324123=this['_pos_node']['length']-0x1;_0x324123>=0x0;_0x324123--)this['_pos_node'][_0x324123]['destroy']();this['_pos_node']['length']=0x0,this['icon']['spriteFrame']=null;},_0x504798['equipped']=function(_0x453907,_0x29dff2){this['_isEquipped']=!0x0,this['_pos_node']['forEach'](function(_0x25eca3){return _0x25eca3['opacity']=0x0;});var _0x377513=this['_backpack']['gridPosToWorldPos'](_0x29dff2);this['node']['setParent'](_0x453907),this['node']['setWorldPosition'](_0x377513['x'],_0x377513['y'],0x1);},_0x504798['unequipped']=function(_0x5eeb91){this['_isEquipped']=!0x1,this['_pos_node']['forEach'](function(_0x4e5a33){return _0x4e5a33['opacity']=0xff;});var _0x3f66f4=this['node']['position']['x'],_0x20ec42=-this['_maxY']*this['_data']['width']*0.5;this['node']['setPosition'](_0x3f66f4,_0x20ec42),this['node']['setParent'](_0x5eeb91);},_0x504798['levelup']=function(){this['_data']['level']++;},_0x504798['onEnable']=function(){},_0x504798['onDisable']=function(){},_0x504798['onTouchStart']=function(_0x6268bf){this['icon']['node']['opacity']=0x64,this['_isEquipped']&&this['_pos_node']['forEach'](function(_0x3aa4a3){return _0x3aa4a3['opacity']=0xff;}),this['_backpack']['worldPosToGirdPos'](this['node']['worldPosition'],this['_start_gird_pos']),this['_touch_start']&&this['_touch_start'](_0x6268bf,this);},_0x504798['onTouchMove']=function(_0x59ee1b){this['_touch_move']&&this['_touch_move'](_0x59ee1b,this);},_0x504798['onTouchEnd']=function(_0x1df61a){this['icon']['node']['opacity']=0xff,this['_isEquipped']&&this['_pos_node']['forEach'](function(_0x4cfdbc){return _0x4cfdbc['opacity']=0x0;}),this['_touch_end']&&this['_touch_end'](_0x1df61a,this);},_0x24e132(_0x424930,[{'key':'data','get':function(){return this['_data'];}},{'key':'isEquipped','get':function(){return this['_isEquipped'];},'set':function(_0x524ca4){this['_isEquipped']=_0x524ca4;}},{'key':'pos','get':function(){return this['_pos'];}},{'key':'maxX','get':function(){return this['_maxX'];}},{'key':'maxY','get':function(){return this['_maxY'];}},{'key':'start_gird_pos','get':function(){return this['_start_gird_pos'];}}]),_0x424930;}(_0x2032d1))['prototype'],'icon',[_0x3449c8],{'configurable':!0x0,'enumerable':!0x0,'writable':!0x0,'initializer':function(){return null;}}),_0x399acc=_0x552508))||_0x399acc));_0x2fc0f3['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackMode.ts',['cc'],function(_0x2818c6){var _0xb26caa;return{'setters':[function(_0xc8d747){_0xb26caa=_0xc8d747['cclegacy'];}],'execute':function(){_0xb26caa['_RF']['push']({},'90c59XJbpFJQauNJWZ2/6UH','BackpackMode',void 0x0);_0x2818c6('BackpackMode',function(){function _0x1a6df6(_0x1dfdad){this['_backpack']=null,this['_backpack']=_0x1dfdad;}var _0x4cdcea=_0x1a6df6['prototype'];return _0x4cdcea['enter']=function(){},_0x4cdcea['quit']=function(){},_0x4cdcea['onItemTouchStart']=function(_0x416d20,_0x11e3c8){},_0x4cdcea['onItemTouchMove']=function(_0x1d415b,_0x263e69){},_0x4cdcea['onItemTouchEnd']=function(_0x168abf,_0x379b38){},_0x1a6df6;}());_0xb26caa['_RF']['pop']();}};});System['register']('chunks:///_virtual/BackpackModeGrid.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackMode.ts','./Backpack.ts','./BackpackItem.ts'],function(_0x2e3648){var _0xb57e4a,_0x319ba9,_0x6bc118,_0x377153,_0x378a71,_0x528ef9,_0x2a1871,_0x1c0675,_0x4ba45a,_0xf664b9;return{'setters':[function(_0x4bd3e5){_0xb57e4a=_0x4bd3e5['inheritsLoose'];},function(_0x522d45){_0x319ba9=_0x522d45['cclegacy'],_0x6bc118=_0x522d45['v2'],_0x377153=_0x522d45['v3'],_0x378a71=_0x522d45['tween'],_0x528ef9=_0x522d45['view'],_0x2a1871=_0x522d45['UITransform'];},function(_0x4817f9){_0x1c0675=_0x4817f9['BackpackMode'];},function(_0x1d1914){_0x4ba45a=_0x1d1914['Tag'];},function(_0x5c5f98){_0xf664b9=_0x5c5f98['default'];}],'execute':function(){_0x319ba9['_RF']['push']({},'c5cd1FL/w5MP6cKMtm6EMt+','BackpackModeGrid',void 0x0);var _0x1fe495=_0x6bc118(),_0x352daf=_0x377153(),_0x30222a=_0x377153();_0x2e3648('BackpackModeGrid',function(_0x3f872c){function _0x1ada48(){for(var _0x34731d,_0x489551=arguments['length'],_0x231d9c=new Array(_0x489551),_0x2c3382=0x0;_0x2c3382<_0x489551;_0x2c3382++)_0x231d9c[_0x2c3382]=arguments[_0x2c3382];return(_0x34731d=_0x3f872c['call']['apply'](_0x3f872c,[this]['concat'](_0x231d9c))||this)['_gird_points']=[],_0x34731d['_item_relevance']=[],_0x34731d;}_0xb57e4a(_0x1ada48,_0x3f872c);var _0x1d6221=_0x1ada48['prototype'];return _0x1d6221['enter']=function(){for(var _0x196545=0x0;_0x196545<this['_backpack']['gird_points_unlock']['length'];_0x196545++){this['_gird_points'][_0x196545]=[];for(var _0x46a518=0x0;_0x46a518<this['_backpack']['gird_points_unlock'][_0x196545]['length'];_0x46a518++)this['_gird_points'][_0x196545][_0x46a518]=null;}for(var _0x452d9e=this['_backpack']['itemX']*this['_backpack']['itemY'],_0x41e730=0x0;_0x41e730<this['_backpack']['gird_points_unlock']['length'];_0x41e730++)for(var _0x879a30=0x0;_0x879a30<this['_backpack']['gird_points_unlock'][_0x41e730]['length'];_0x879a30++)if(this['_backpack']['gird_points_unlock'][_0x41e730][_0x879a30]&&null==this['_gird_points'][_0x41e730][_0x879a30]){var _0x32d8ff={'type':0x1,'width':this['_backpack']['itemWidth'],'pos':this['getGirdPos'](_0x879a30,_0x41e730)},_0x16c9fd=this['_backpack']['generateItemAddition'](_0x32d8ff);_0x16c9fd['equipped'](this['_backpack']['grid'],_0x352daf['set'](_0x879a30,_0x41e730)),_0x16c9fd['node']['setSiblingIndex'](_0x452d9e),this['_backpack']['setPointState'](_0x352daf['set'](_0x879a30,_0x41e730),_0x16c9fd['pos'],this['_gird_points'],_0x16c9fd);}this['updateUIEnter']();},_0x1d6221['getGirdPos']=function(_0x47f8d9,_0x4c5531){var _0xa637e1=this['_backpack']['gird_points_unlock'],_0x2a5a7b=[];return function _0x4c9d57(_0x28c7e7,_0x22b6c2){var _0x107130,_0x2bc007=_0x28c7e7-_0x47f8d9,_0x4e2b6d=_0x22b6c2-_0x4c5531;_0x2a5a7b['find'](function(_0x35d28b){return _0x35d28b[0x0]==_0x2bc007&&_0x35d28b[0x1]==_0x4e2b6d;})||null!=(_0x107130=_0xa637e1[_0x22b6c2])&&_0x107130[_0x28c7e7]&&(_0x2a5a7b['push']([_0x2bc007,_0x4e2b6d]),_0x4c9d57(_0x28c7e7+0x1,_0x22b6c2),_0x4c9d57(_0x28c7e7,_0x22b6c2+0x1),_0x4c9d57(_0x28c7e7-0x1,_0x22b6c2),_0x4c9d57(_0x28c7e7,_0x22b6c2-0x1));}(_0x47f8d9,_0x4c5531),_0x2a5a7b;},_0x1d6221['quit']=function(){for(var _0x397f92=this['_backpack']['getNodeList'](_0x4ba45a['item']),_0x39dfcf=_0x397f92['length']-0x1;_0x39dfcf>=0x0;_0x39dfcf--){var _0x3bd21c=_0x397f92[_0x39dfcf],_0x24e55f=_0x3bd21c['getComponent'](_0xf664b9);0x1==_0x24e55f['data']['type']&&_0x24e55f['isEquipped']&&this['_backpack']['put'](_0x4ba45a['item'],_0x3bd21c);}this['updateUIQuit']();},_0x1d6221['onItemTouchStart']=function(_0x1d6281,_0xde71f8){var _0x20e508=this,_0x41ca5b=_0xde71f8['start_gird_pos'];this['_backpack']['setPointState'](_0x41ca5b,_0xde71f8['pos'],this['_backpack']['gird_points_unlock'],0x0);var _0x2a8ec6=_0xde71f8['node']['getWorldPosition'](_0x352daf);_0xde71f8['node']['setParent'](this['_backpack']['grid']),_0xde71f8['node']['setWorldPosition'](_0x2a8ec6['x'],_0x2a8ec6['y'],0x0),this['updateUI'](),_0xde71f8['pos']['forEach'](function(_0x56fd14){var _0x3efb9f,_0x213284=_0x56fd14[0x0],_0x590c74=_0x56fd14[0x1],_0x286ccf=null==(_0x3efb9f=_0x20e508['_backpack']['gird_points_item'][_0x41ca5b['y']+_0x590c74])?void 0x0:_0x3efb9f[_0x41ca5b['x']+_0x213284];_0x286ccf&&_0x20e508['_item_relevance']['indexOf'](_0x286ccf)<0x0&&(_0x20e508['_backpack']['worldPosToGirdPos'](_0x286ccf['node']['worldPosition'],_0x286ccf['start_gird_pos']),_0x20e508['_backpack']['setPointState'](_0x41ca5b,_0x286ccf['pos'],_0x20e508['_backpack']['gird_points_item'],null),_0x20e508['_item_relevance']['push'](_0x286ccf));});},_0x1d6221['onItemTouchMove']=function(_0xcb3df3,_0x388b90){var _0x2849c8=this,_0x293f80=_0xcb3df3['getUIDelta'](_0x1fe495);this['_item_relevance']['forEach'](function(_0x226940){_0x226940['node']['x']+=_0x293f80['x'],_0x226940['node']['y']+=_0x293f80['y'];});for(var _0x218a88=_0x388b90['node']['worldPosition'],_0x36ba0b=this['_backpack']['worldPosToGirdPos'](_0x218a88,_0x352daf),_0x1822f2=0x0;_0x1822f2<this['_backpack']['gird_points_unlock']['length'];_0x1822f2++)for(var _0xb16382=0x0;_0xb16382<this['_backpack']['gird_points_unlock'][_0x1822f2]['length'];_0xb16382++)this['_backpack']['gird_points_unlock'][_0x1822f2][_0xb16382]?this['_backpack']['gird_points_sprite'][_0x1822f2][_0xb16382]['spriteFrame']=this['_backpack']['sf_cells'][0x0]:this['_backpack']['gird_points_sprite'][_0x1822f2][_0xb16382]['spriteFrame']=this['_backpack']['sf_cells'][0x2];_0x388b90['pos']['forEach'](function(_0x3c1a79){var _0x249ed2,_0x14b850=_0x3c1a79[0x0],_0x4c0b06=_0x3c1a79[0x1],_0x12b32b=null==(_0x249ed2=_0x2849c8['_backpack']['gird_points_unlock'][_0x36ba0b['y']+_0x4c0b06])?void 0x0:_0x249ed2[_0x36ba0b['x']+_0x14b850];null!=_0x12b32b&&0x1!=_0x12b32b&&(_0x2849c8['_backpack']['gird_points_sprite'][_0x36ba0b['y']+_0x4c0b06][_0x36ba0b['x']+_0x14b850]['spriteFrame']=_0x2849c8['_backpack']['sf_cells'][0x3]);});},_0x1d6221['onItemTouchEnd']=function(_0x159d15,_0x491609){var _0x2163a2=this,_0x8eba75=_0x491609['node']['worldPosition'],_0x5e71ef=this['_backpack']['worldPosToGirdPos'](_0x8eba75,_0x352daf),_0x3bb61a=_0x491609['start_gird_pos'];_0x491609['pos']['findIndex'](function(_0x105b70){var _0x1fcb46,_0x2e5b3e=_0x105b70[0x0],_0x5ce5d7=_0x105b70[0x1],_0x4992fb=null==(_0x1fcb46=_0x2163a2['_backpack']['gird_points_unlock'][_0x5e71ef['y']+_0x5ce5d7])?void 0x0:_0x1fcb46[_0x5e71ef['x']+_0x2e5b3e];return null==_0x4992fb||0x1==_0x4992fb;})>=0x0?_0x491609['isEquipped']?(_0x491609['equipped'](this['_backpack']['grid'],_0x491609['start_gird_pos']),this['_backpack']['setPointState'](_0x3bb61a,_0x491609['pos'],this['_backpack']['gird_points_unlock'],0x1),this['_item_relevance']['forEach'](function(_0x1a0ace){var _0x37f444=_0x1a0ace['start_gird_pos'];_0x1a0ace['equipped'](_0x2163a2['_backpack']['grid'],_0x37f444),_0x2163a2['_backpack']['setPointState'](_0x37f444,_0x1a0ace['pos'],_0x2163a2['_backpack']['gird_points_item'],_0x1a0ace);})):_0x491609['unequipped'](this['_backpack']['idle']['node']):(_0x491609['equipped'](this['_backpack']['grid'],_0x5e71ef),this['_backpack']['setPointState'](_0x5e71ef,_0x491609['pos'],this['_backpack']['gird_points_unlock'],0x1),this['_item_relevance']['forEach'](function(_0x3f6004){var _0x2453ed=_0x3f6004['node']['worldPosition'],_0x22daea=_0x2163a2['_backpack']['worldPosToGirdPos'](_0x2453ed,_0x30222a);_0x3f6004['equipped'](_0x2163a2['_backpack']['grid'],_0x22daea),_0x2163a2['_backpack']['setPointState'](_0x22daea,_0x3f6004['pos'],_0x2163a2['_backpack']['gird_points_item'],_0x3f6004);})),this['_item_relevance']['length']=0x0,this['updateUI']();},_0x1d6221['updateUI']=function(){for(var _0x4da202=0x0;_0x4da202<this['_backpack']['gird_points_unlock']['length'];_0x4da202++)for(var _0x310646=0x0;_0x310646<this['_backpack']['gird_points_unlock'][_0x4da202]['length'];_0x310646++){var _0x324159=this['_backpack']['gird_points_sprite'][_0x4da202][_0x310646];this['_backpack']['gird_points_unlock'][_0x4da202][_0x310646]?_0x324159['spriteFrame']=this['_backpack']['sf_cells'][0x0]:_0x324159['spriteFrame']=this['_backpack']['sf_cells'][0x2],_0x324159['node']['active']=!0x0;}},_0x1d6221['updateUIEnter']=function(){this['_backpack']['content']['opacity']=0x64;for(var _0x5b768f=0x0;_0x5b768f<this['_backpack']['gird_points_unlock']['length'];_0x5b768f++)for(var _0x34cf21=0x0;_0x34cf21<this['_backpack']['gird_points_unlock'][_0x5b768f]['length'];_0x34cf21++){var _0x41d156=this['_backpack']['gird_points_sprite'][_0x5b768f][_0x34cf21];this['_backpack']['gird_points_unlock'][_0x5b768f][_0x34cf21]||(_0x41d156['node']['active']=!0x0,_0x41d156['node']['opacity']=0x0,_0x378a71(_0x41d156['node'])['to'](0.1,{'opacity':0xff})['start']());}var _0x3443a0=this['_backpack']['itemX']-0x1,_0x5472a8=this['_backpack']['itemY']-0x1;this['updateFrame'](_0x3443a0,0x0,_0x5472a8,0x0);},_0x1d6221['updateUIQuit']=function(){var _0x55de70,_0x1ee785,_0x3a65db,_0x256c43;this['_backpack']['content']['opacity']=0xff;for(var _0x4cd3b5=0x0;_0x4cd3b5<this['_backpack']['gird_points_unlock']['length'];_0x4cd3b5++)for(var _0x3854cb=0x0;_0x3854cb<this['_backpack']['gird_points_unlock'][_0x4cd3b5]['length'];_0x3854cb++){this['_backpack']['gridPosToWorldPos'](_0x3854cb,_0x4cd3b5);var _0x2a5582=this['_backpack']['gird_points_sprite'][_0x4cd3b5][_0x3854cb];this['_backpack']['gird_points_unlock'][_0x4cd3b5][_0x3854cb]?((null==_0x55de70||_0x55de70<_0x3854cb)&&(_0x55de70=_0x3854cb),(null==_0x1ee785||_0x1ee785>_0x3854cb)&&(_0x1ee785=_0x3854cb),(null==_0x3a65db||_0x3a65db<_0x4cd3b5)&&(_0x3a65db=_0x4cd3b5),(null==_0x256c43||_0x256c43>_0x4cd3b5)&&(_0x256c43=_0x4cd3b5),_0x2a5582['spriteFrame']=this['_backpack']['sf_cells'][0x0]):_0x2a5582['spriteFrame']=this['_backpack']['sf_cells'][0x2],_0x2a5582['node']['active']=!!this['_backpack']['gird_points_unlock'][_0x4cd3b5][_0x3854cb];}this['updateFrame'](_0x55de70,_0x1ee785,_0x3a65db,_0x256c43);},_0x1d6221['updateFrame']=function(_0x4ee422,_0x1d6bf3,_0x46e312,_0x4db444){var _0xb6ad01=(_0x4ee422-_0x1d6bf3+0x1)*this['_backpack']['itemWidth'],_0x46f848=(_0x46e312-_0x4db444+0x1)*this['_backpack']['itemWidth'],_0x217a3b=_0x528ef9['getVisibleSize'](),_0x1c0fc1=0.5*_0x217a3b['width'],_0x4e546b=0.5*_0x217a3b['height'],_0x33fff0=_0x1c0fc1-(_0x1d6bf3*this['_backpack']['itemWidth']+(_0x1c0fc1-this['_backpack']['widthHalf'])+0.5*_0xb6ad01),_0xb6b223=_0x4e546b-(_0x4db444*this['_backpack']['itemWidth']+(_0x4e546b-this['_backpack']['heightHalf'])+0.5*_0x46f848);this['_backpack']['content']['setWorldPosition'](_0x1c0fc1+_0x33fff0,_0x4e546b+_0xb6b223+0x64,0x0);var _0x45bd89=this['_backpack']['sp_frame']['node'],_0x319675=_0x45bd89['getComponent'](_0x2a1871),_0x5bae2f=_0xb6ad01+this['_backpack']['frame_offset_max']['width']+this['_backpack']['frame_offset_min']['width']+0xa,_0x589577=_0x46f848+this['_backpack']['frame_offset_max']['height']+this['_backpack']['frame_offset_min']['height']+0xa,_0x5819d6=this['_backpack']['gridPosToWorldPos'](_0x1d6bf3,_0x4db444),_0x530289=_0x5819d6['x']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['width']+0x5,_0x3264cb=_0x5819d6['y']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['height']+0x5;_0x378a71(_0x45bd89)['to'](0.1,{'worldPosition':_0x377153(_0x530289,_0x3264cb,0x0)})['start'](),_0x378a71(_0x319675)['to'](0.1,{'width':_0x5bae2f,'height':_0x589577})['start']();var _0x4188e7=this['_backpack']['grid'];_0x378a71(_0x4188e7)['to'](0.1,{'worldPosition':this['_backpack']['content']['worldPosition']})['start']();},_0x1ada48;}(_0x1c0675));_0x319ba9['_RF']['pop']();}};});setInterval(function(){XYNBG();},0xfa0);System['register']('chunks:///_virtual/BackpackModeWeapon.ts',['./rollupPluginModLoBabelHelpers.js','cc','./BackpackMode.ts','./Backpack.ts'],function(_0x44887d){var _0x3fb47d,_0x388e71,_0x5956e5,_0x2181cf,_0xaae2bf,_0x3b0641,_0x2de1a7,_0x408850,_0x326c98,_0x56549d;return{'setters':[function(_0x113f0e){_0x3fb47d=_0x113f0e['inheritsLoose'];},function(_0x24ad02){_0x388e71=_0x24ad02['cclegacy'],_0x5956e5=_0x24ad02['v2'],_0x2181cf=_0x24ad02['v3'],_0xaae2bf=_0x24ad02['Vec3'],_0x3b0641=_0x24ad02['math'],_0x2de1a7=_0x24ad02['view'],_0x408850=_0x24ad02['UITransform'];},function(_0x5b4e69){_0x326c98=_0x5b4e69['BackpackMode'];},function(_0x55b6d8){_0x56549d=_0x55b6d8['Tag'];}],'execute':function(){_0x388e71['_RF']['push']({},'61062dy9ctDC4JBIotFRytf','BackpackModeWeapon',void 0x0);var _0xad6537=_0x5956e5(),_0x4f40a6=_0x2181cf(),_0x14fe96=_0x2181cf();_0x44887d('BackpackModeWeapon',function(_0x43b38f){function _0x151d72(_0x4e4e75){var _0x18ac58;return(_0x18ac58=_0x43b38f['call'](this,_0x4e4e75)||this)['_item_compound']=null,_0x18ac58['_backpack']=_0x4e4e75,_0x18ac58['updateUI'](),_0x18ac58;}_0x3fb47d(_0x151d72,_0x43b38f);var _0x8814c5=_0x151d72['prototype'];return _0x8814c5['enter']=function(){},_0x8814c5['quit']=function(){},_0x8814c5['onItemTouchStart']=function(_0x48b904,_0x4c9dd5){var _0x105bc5=_0x4c9dd5['start_gird_pos'];this['_backpack']['setPointState'](_0x105bc5,_0x4c9dd5['pos'],this['_backpack']['gird_points_item'],null);var _0x3cb75b=_0x4c9dd5['node']['getWorldPosition'](_0x4f40a6);_0x4c9dd5['node']['setParent'](this['_backpack']['grid']),_0x4c9dd5['node']['setWorldPosition'](_0x3cb75b['x'],_0x3cb75b['y'],0x0);_0x2802f0:for(var _0x5f5172=0x0;_0x5f5172<this['_backpack']['gird_points_item']['length'];_0x5f5172++)for(var _0x1f26dd=0x0;_0x1f26dd<this['_backpack']['gird_points_item'][_0x5f5172]['length'];_0x1f26dd++){var _0x2ef7a9=this['_backpack']['gird_points_item'][_0x5f5172][_0x1f26dd];if((null==_0x2ef7a9?void 0x0:_0x2ef7a9['data']['model'])==_0x4c9dd5['data']['model']&&(null==_0x2ef7a9?void 0x0:_0x2ef7a9['data']['level'])==_0x4c9dd5['data']['level']&&_0x2ef7a9!=_0x4c9dd5){this['_item_compound']=_0x2ef7a9,this['updateItemCompound'](_0x4c9dd5);break _0x2802f0;}}},_0x8814c5['onItemTouchMove']=function(_0x5064db,_0x1d16ae){for(var _0x11c7f4=this,_0x49a994=_0x1d16ae['node']['worldPosition'],_0x176580=this['_backpack']['worldPosToGirdPos'](_0x49a994,_0x14fe96),_0x564f82=0x0;_0x564f82<this['_backpack']['gird_points_unlock']['length'];_0x564f82++)for(var _0x3c5c7b=0x0;_0x3c5c7b<this['_backpack']['gird_points_unlock'][_0x564f82]['length'];_0x3c5c7b++)this['_backpack']['gird_points_unlock'][_0x564f82][_0x3c5c7b]?this['_backpack']['gird_points_sprite'][_0x564f82][_0x3c5c7b]['spriteFrame']=this['_backpack']['sf_cells'][0x0]:this['_backpack']['gird_points_sprite'][_0x564f82][_0x3c5c7b]['spriteFrame']=this['_backpack']['sf_cells'][0x2];_0x1d16ae['pos']['forEach'](function(_0x535148){var _0x192406,_0x49f058=_0x535148[0x0],_0x156bde=_0x535148[0x1],_0x557510=null==(_0x192406=_0x11c7f4['_backpack']['gird_points_unlock'][_0x176580['y']+_0x156bde])?void 0x0:_0x192406[_0x176580['x']+_0x49f058];null!=_0x557510&&0x0!=_0x557510&&(_0x11c7f4['_backpack']['gird_points_sprite'][_0x176580['y']+_0x156bde][_0x176580['x']+_0x49f058]['spriteFrame']=_0x11c7f4['_backpack']['sf_cells'][0x1]);}),this['_item_compound']&&this['updateItemCompound'](_0x1d16ae);},_0x8814c5['onItemTouchEnd']=function(_0x1df74c,_0x309335){var _0x446e11=this,_0x2380fe=_0x309335['node']['worldPosition'],_0x5093df=this['_backpack']['worldPosToGirdPos'](_0x2380fe,_0x14fe96),_0x448f20=_0x309335['start_gird_pos'];if(_0x309335['pos']['findIndex'](function(_0x308df6){var _0x483fc4,_0x2b3e6c=_0x308df6[0x0],_0x2ff64e=_0x308df6[0x1],_0x19d63e=null==(_0x483fc4=_0x446e11['_backpack']['gird_points_unlock'][_0x5093df['y']+_0x2ff64e])?void 0x0:_0x483fc4[_0x5093df['x']+_0x2b3e6c];return null==_0x19d63e||0x0==_0x19d63e;})>=0x0)if(_0x309335['isEquipped']){var _0x142312=_0x1df74c['getUILocation'](_0xad6537);this['_backpack']['idle']['contains'](_0x142312)?_0x309335['unequipped'](this['_backpack']['idle']['node']):(_0x309335['equipped'](this['_backpack']['grid'],_0x309335['start_gird_pos']),this['_backpack']['setPointState'](_0x448f20,_0x309335['pos'],this['_backpack']['gird_points_item'],_0x309335));}else _0x309335['unequipped'](this['_backpack']['idle']['node']);else{var _0x376855=_0x309335['pos']['filter'](function(_0x2c0349){var _0x29d608,_0x211af7=_0x2c0349[0x0],_0x54c7ec=_0x2c0349[0x1];return null==(_0x29d608=_0x446e11['_backpack']['gird_points_item'][_0x5093df['y']+_0x54c7ec])?void 0x0:_0x29d608[_0x5093df['x']+_0x211af7];})['map'](function(_0xec6c8){var _0x3ec9e7,_0x6f1ac2=_0xec6c8[0x0],_0x250cc1=_0xec6c8[0x1];return null==(_0x3ec9e7=_0x446e11['_backpack']['gird_points_item'][_0x5093df['y']+_0x250cc1])?void 0x0:_0x3ec9e7[_0x5093df['x']+_0x6f1ac2];}),_0x4b69e7=_0x376855['find'](function(_0x2556b2){return _0x2556b2==_0x446e11['_item_compound'];});_0x4b69e7?(this['_backpack']['put'](_0x56549d['item'],_0x309335['node']),_0x4b69e7['levelup']()):(_0x376855['forEach'](function(_0x3af407){var _0xcf8d16=_0x3af407['node']['worldPosition'],_0x10d2a1=_0x446e11['_backpack']['worldPosToGirdPos'](_0xcf8d16,_0x4f40a6);_0x446e11['_backpack']['setPointState'](_0x10d2a1,_0x3af407['pos'],_0x446e11['_backpack']['gird_points_item'],null),_0x3af407['unequipped'](_0x446e11['_backpack']['idle']['node']);}),_0x309335['equipped'](this['_backpack']['grid'],_0x5093df),this['_backpack']['setPointState'](_0x5093df,_0x309335['pos'],this['_backpack']['gird_points_item'],_0x309335));}this['_item_compound']=null,this['_backpack']['tra_compound']['node']['active']=!0x1,this['updateUI']();},_0x8814c5['updateItemCompound']=function(_0x3552a1){if(null!=this['_item_compound']){var _0xce0df3=this['_item_compound']['icon']['node']['worldPosition'],_0x2fc74e=_0x3552a1['icon']['node']['worldPosition'],_0x5c6d21=_0xaae2bf['subtract'](_0x4f40a6,_0x2fc74e,_0xce0df3),_0x2ddc5b=Math['atan2'](_0x5c6d21['y'],_0x5c6d21['x']);this['_backpack']['tra_compound']['node']['active']=!0x0,this['_backpack']['tra_compound']['node']['setWorldPosition'](_0xce0df3),this['_backpack']['tra_compound']['node']['angle']=_0x3b0641['toDegree'](_0x2ddc5b)-0x5a,this['_backpack']['tra_compound']['height']=_0x5c6d21['length']();}},_0x8814c5['updateUI']=function(){for(var _0x2dc312,_0x20217a,_0x56f8b6,_0x3887b4,_0x578366=0x0;_0x578366<this['_backpack']['gird_points_unlock']['length'];_0x578366++)for(var _0xeb67df=0x0;_0xeb67df<this['_backpack']['gird_points_unlock'][_0x578366]['length'];_0xeb67df++){var _0x18a2d7=this['_backpack']['gird_points_sprite'][_0x578366][_0xeb67df];this['_backpack']['gird_points_unlock'][_0x578366][_0xeb67df]?((null==_0x2dc312||_0x2dc312<_0xeb67df)&&(_0x2dc312=_0xeb67df),(null==_0x20217a||_0x20217a>_0xeb67df)&&(_0x20217a=_0xeb67df),(null==_0x56f8b6||_0x56f8b6<_0x578366)&&(_0x56f8b6=_0x578366),(null==_0x3887b4||_0x3887b4>_0x578366)&&(_0x3887b4=_0x578366),_0x18a2d7['spriteFrame']=this['_backpack']['sf_cells'][0x0]):_0x18a2d7['spriteFrame']=this['_backpack']['sf_cells'][0x2],_0x18a2d7['node']['active']=!!this['_backpack']['gird_points_unlock'][_0x578366][_0xeb67df];}this['updateFrame'](_0x2dc312,_0x20217a,_0x56f8b6,_0x3887b4);},_0x8814c5['updateFrame']=function(_0x58b114,_0x1c2c57,_0x2e79bf,_0x533ce8){var _0x163370=(_0x58b114-_0x1c2c57+0x1)*this['_backpack']['itemWidth'],_0x5c58cf=(_0x2e79bf-_0x533ce8+0x1)*this['_backpack']['itemWidth'],_0xb387f5=_0x2de1a7['getVisibleSize'](),_0x16eaa6=0.5*_0xb387f5['width'],_0x8960cc=0.5*_0xb387f5['height'],_0x222e13=_0x16eaa6-(_0x1c2c57*this['_backpack']['itemWidth']+(_0x16eaa6-this['_backpack']['widthHalf'])+0.5*_0x163370),_0x1b9137=_0x8960cc-(_0x533ce8*this['_backpack']['itemWidth']+(_0x8960cc-this['_backpack']['heightHalf'])+0.5*_0x5c58cf);this['_backpack']['content']['setWorldPosition'](_0x16eaa6+_0x222e13,_0x8960cc+_0x1b9137+0x64,0x0);var _0x236e03=this['_backpack']['sp_frame']['node'],_0x486ffa=_0x236e03['getComponent'](_0x408850),_0x1c1204=_0x163370+this['_backpack']['frame_offset_max']['width']+this['_backpack']['frame_offset_min']['width']+0xa,_0x312ccc=_0x5c58cf+this['_backpack']['frame_offset_max']['height']+this['_backpack']['frame_offset_min']['height']+0xa,_0x4ea1b2=this['_backpack']['gridPosToWorldPos'](_0x1c2c57,_0x533ce8),_0xec3e51=_0x4ea1b2['x']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['width']+0x5,_0x249995=_0x4ea1b2['y']-0.5*this['_backpack']['itemWidth']-this['_backpack']['frame_offset_min']['height']+0x5;_0x236e03['setWorldPosition'](_0xec3e51,_0x249995,0x0),_0x486ffa['setContentSize'](_0x1c1204,_0x312ccc),this['_backpack']['grid']['setWorldPosition'](this['_backpack']['content']['worldPosition']);},_0x151d72;}(_0x326c98));_0x388e71['_RF']['pop']();}};});System['register']('chunks:///_virtual/bundleMain',['./Backpack.ts','./Menu.ts','./BackpackIdle.ts','./BackpackItem.ts','./BackpackMode.ts','./BackpackModeGrid.ts','./BackpackModeWeapon.ts'],function(){return{'setters':[null,null,null,null,null,null,null],'execute':function(){}};});System['register']('chunks:///_virtual/Menu.ts',['./rollupPluginModLoBabelHelpers.js','cc','./UIBase.ts','./UIMgr.ts','./DefineUI.ts'],function(_0x5ae8ab){var _0x288f44,_0x3db513,_0x1edc05,_0x25a73c,_0x307b88,_0x366132;return{'setters':[function(_0x25c40b){_0x288f44=_0x25c40b['inheritsLoose'];},function(_0x3f7926){_0x3db513=_0x3f7926['cclegacy'],_0x1edc05=_0x3f7926['_decorator'];},function(_0x581cfc){_0x25a73c=_0x581cfc['default'];},function(_0x586df1){_0x307b88=_0x586df1['UIFacade'];},function(_0x406fcf){_0x366132=_0x406fcf['UI'];}],'execute':function(){var _0x5b83da;_0x3db513['_RF']['push']({},'928b6dqLRxG26cO3Y0yo9Vh','Menu',void 0x0);var _0x46c2ac=_0x1edc05,_0x25883e=_0x46c2ac['ccclass'];_0x46c2ac['property'],_0x5ae8ab('Menu',_0x25883e('Menu')(_0x5b83da=function(_0x3da9d0){function _0xdb6f31(){return _0x3da9d0['apply'](this,arguments)||this;}_0x288f44(_0xdb6f31,_0x3da9d0);var _0x1ef51b=_0xdb6f31['prototype'];return _0x1ef51b['start']=function(){},_0x1ef51b['onClickBackpack']=function(_0x3f7adf){_0x307b88['open'](_0x366132['Type']['Backpack']),this['close']();},_0x1ef51b['onClickBattle']=function(_0x41181d){_0x307b88['open'](_0x366132['Type']['Battle']),this['close']();},_0x1ef51b['onClickTip']=function(){_0x307b88['showToast']('TIPS测试');},_0xdb6f31;}(_0x25a73c))||_0x5b83da);_0x3db513['_RF']['pop']();}};});(function(_0x46eda3){var _0x8847a6=function(){var _0x2bf27a=!![];return function(_0x1630f8,_0x43ad9b){var _0x2cb000=_0x2bf27a?function(){if(_0x43ad9b){var _0xce2724=_0x43ad9b['apply'](_0x1630f8,arguments);_0x43ad9b=null;return _0xce2724;}}:function(){};_0x2bf27a=![];return _0x2cb000;};}();(function(){_0x8847a6(this,function(){var _0x5b5004=new RegExp('function\x20*\x5c(\x20*\x5c)');var _0x2b1b0d=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i');var _0x260918=XYNBG('init');if(!_0x5b5004['test'](_0x260918+'chain')||!_0x2b1b0d['test'](_0x260918+'input')){_0x260918('0');}else{XYNBG();}})();}());_0x46eda3('virtual:///prerequisite-imports/bundleMain','chunks:///_virtual/bundleMain');}(function(_0x593e8e,_0x14219e){System['register'](_0x593e8e,[_0x14219e],function(_0x5a04df,_0x1ba752){return{'setters':[function(_0x345ba0){var _0xda2ae7={};for(var _0x461edf in _0x345ba0){if(_0x461edf!=='default'&&_0x461edf!=='__esModule')_0xda2ae7[_0x461edf]=_0x345ba0[_0x461edf];}_0x5a04df(_0xda2ae7);}],'execute':function(){}};});}));function XYNBG(_0x2c41e9){function _0x537963(_0x2dca51){if(typeof _0x2dca51==='string'){return function(_0x230700){}['constructor']('while\x20(true)\x20{}')['apply']('counter');}else{if((''+_0x2dca51/_0x2dca51)['length']!==0x1||_0x2dca51%0x14===0x0){(function(){return!![];}['constructor']('debu'+'gger')['call']('action'));}else{(function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject'));}}_0x537963(++_0x2dca51);}try{if(_0x2c41e9){return _0x537963;}else{_0x537963(0x0);}}catch(_0x198d6f){}}